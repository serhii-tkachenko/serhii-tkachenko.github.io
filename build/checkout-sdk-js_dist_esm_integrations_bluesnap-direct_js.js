"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["checkout-sdk-js_dist_esm_integrations_bluesnap-direct_js"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/bluesnap-direct.js":
/*!*******************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/bluesnap-direct.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBlueSnapDirectAPMPaymentStrategy: () => (/* binding */ V),\n/* harmony export */   createBlueSnapDirectCreditCardPaymentStrategy: () => (/* binding */ F),\n/* harmony export */   createBlueSnapV2PaymentStrategy: () => (/* binding */ K)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nvar i,a={};function r(e,t){return Object.assign(e,{resolveIds:t})}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class s extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class o extends s{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}function d(e,t){if(null==e)throw t?t():new Error(\"An unexpected error has occurred.\");return e}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(i||(i={}));class c extends s{constructor(e){super(function(e){switch(e){case i.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case i.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case i.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case i.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}var u,l;class p{initialize(e){this._blueSnapSdk=e}initialize3ds(e,t){return n=this,i=void 0,r=function*(){const n=this._getBlueSnapSdk();return new Promise((i,a)=>{n.threeDsPaymentsSetup(e,e=>\"1\"===e.code?i(e.threeDSecure.threeDSecureReferenceId):a(new o)),n.threeDsPaymentsSubmitData(t)})},new((a=void 0)||(a=Promise))(function(e,t){function s(e){try{d(r.next(e))}catch(e){t(e)}}function o(e){try{d(r.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a(function(e){e(n)})).then(s,o)}d((r=r.apply(n,i||[])).next())});// removed by dead control flow\n var n, i, a, r; }_getBlueSnapSdk(){return d(this._blueSnapSdk,()=>new c(i.PaymentNotInitialized))}}class m extends s{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class h extends m{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}function y(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}function b(e){return Boolean(e.instrumentId)}class g extends s{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(u||(u={}));class _ extends s{constructor(e){super(function(e){switch(e){case u.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case u.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case u.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case u.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case u.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case u.MissingCheckoutConfig:case u.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case u.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case u.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case u.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case u.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case u.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case u.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}!function(e){e.CardCode=\"cardCode\",e.CardCodeVerification=\"cardCodeVerification\",e.CardExpiry=\"cardExpiry\",e.CardName=\"cardName\",e.CardNumber=\"cardNumber\",e.CardNumberVerification=\"cardNumberVerification\",e.CardExpiryVerification=\"cardExpiryVerification\"}(l||(l={}));const f=l;function v(e){return f.CardNumber in e}function I(e){return f.CardCodeVerification in e||f.CardNumberVerification in e}var S,C,N,O,E,w=function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}d((i=i.apply(e,t||[])).next())})};class P{constructor(e,t,n,i){this._scriptLoader=e,this._paymentIntegrationService=t,this._blueSnapDirectHostedForm=n,this._blueSnapDirect3ds=i}initialize(e){return w(this,void 0,void 0,function*(){const{methodId:t,gatewayId:n,creditCard:i}=e;if(!n||!i)throw new m;const a=yield this._paymentIntegrationService.loadPaymentMethod(n,{params:{method:t,bigpayToken:i.bigpayToken}}),{config:{testMode:r,is3dsEnabled:s},clientToken:o}=a.getPaymentMethodOrThrow(t,n);this._blueSnapSdk=yield this._scriptLoader.load(r),this._paymentFieldsToken=o,this._shouldUseHostedFields=v(i.form.fields)||I(i.form.fields)&&!!i.form.fields.cardNumberVerification,this._shouldUseHostedFields&&(this._blueSnapDirectHostedForm.initialize(this._blueSnapSdk,i.form.fields),yield this._blueSnapDirectHostedForm.attach(this._getPaymentFieldsToken(),i,s))})}execute(e){return w(this,void 0,void 0,function*(){if(!e.payment)throw new h([\"payment\"]);if(!this._blueSnapSdk)throw new h([\"payment\"]);const{paymentData:t}=e.payment,{shouldSaveInstrument:n,shouldSetAsDefaultInstrument:i}=y(t)?t:{shouldSaveInstrument:!1,shouldSetAsDefaultInstrument:!1},a=this._getPaymentFieldsToken();let r;const{is3dsEnabled:s}=this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.payment.methodId,e.payment.gatewayId).config,o=this._shouldUseHostedFields?yield this._blueSnapDirectHostedForm.validate().submit(s?this._getBlueSnapDirectThreeDSecureData():void 0,!(y(t)&&b(t))):void 0;if(yield this._paymentIntegrationService.submitOrder(),y(t)&&b(t)&&this._paymentFieldsToken&&t.instrumentId){if(s){this._blueSnapDirect3ds.initialize(this._blueSnapSdk);const{last4:e,brand:n}=this._paymentIntegrationService.getState().getCardInstrumentOrThrow(t.instrumentId),i=Object.assign({last4Digits:e,ccType:n.toUpperCase()},this._getBlueSnapDirectThreeDSecureData());r=yield this._blueSnapDirect3ds.initialize3ds(this._paymentFieldsToken,i)}yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},e.payment),{paymentData:Object.assign(Object.assign(Object.assign({instrumentId:t.instrumentId},this._shouldUseHostedFields?{nonce:a}:{}),r?{deviceSessionId:r}:{}),{shouldSetAsDefaultInstrument:!!i})}))}else yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},e.payment),{paymentData:{formattedPayload:{credit_card_token:{token:JSON.stringify({pfToken:a,cardHolderName:o&&o.cardHolderName})},vault_payment_instrument:n,set_as_default_stored_instrument:i}}}))})}finalize(){return Promise.reject(new g)}deinitialize(){return this._shouldUseHostedFields&&this._blueSnapDirectHostedForm.detach(),Promise.resolve()}_getBlueSnapDirectThreeDSecureData(){var e;const{getBillingAddress:t,getShippingAddress:n,getCustomer:i,getCheckoutOrThrow:a,getCartOrThrow:r}=this._paymentIntegrationService.getState(),s=t(),o=n(),d=(null===(e=i())||void 0===e?void 0:e.email)||(null==s?void 0:s.email),c=(null==s?void 0:s.phone)||(null==o?void 0:o.phone);return Object.assign(Object.assign(Object.assign(Object.assign({amount:a().outstandingBalance,currency:r().currency.code},d&&{email:d}),c&&{phone:c}),s&&{billingFirstName:s.firstName,billingLastName:s.lastName,billingCountry:s.countryCode,billingCity:s.city,billingAddress:`${s.address1} ${s.address2}`.trim(),billingZip:s.postalCode}),o&&{shippingFirstName:o.firstName,shippingLastName:o.lastName,shippingCountry:o.countryCode,shippingCity:o.city,shippingAddress:`${o.address1} ${o.address2}`.trim(),shippingZip:o.postalCode})}_getPaymentFieldsToken(){return d(this._paymentFieldsToken,()=>new _(u.MissingPaymentToken))}}class D extends s{constructor(e,t){super(t||\"Unable to proceed because the payment form contains invalid data.\"),this.details=e,this.name=\"PaymentInvalidFormError\",this.type=\"payment_invalid_form\"}}!function(e){e.AMEX=\"american-express\",e.CHINA_UNION_PAY=\"unionpay\",e.DINERS=\"diners-club\",e.DISCOVER=\"discover\",e.JCB=\"jcb\",e.MASTERCARD=\"mastercard\",e.UNKNOWN=\"unknown\",e.VISA=\"visa\"}(S||(S={})),function(e){e.ON_BLUR=\"onBlur\",e.ON_SUBMIT=\"onSubmit\"}(C||(C={})),function(e){e.EMPTY=\"empty\",e.INVALID=\"invalid\",e.THREE_DS_NOT_ENABLED=\"3D Secure is not enabled\"}(N||(N={})),function(e){e.CC_NOT_SUPORTED=\"22013\",e.ERROR_403=\"403\",e.ERROR_404=\"404\",e.ERROR_500=\"500\",e.INVALID_OR_EMPTY=\"10\",e.SESSION_EXPIRED=\"400\",e.THREE_DS_AUTH_FAILED=\"14101\",e.THREE_DS_CLIENT_ERROR=\"14103\",e.THREE_DS_MISSING_FIELDS=\"14102\",e.THREE_DS_NOT_ENABLED=\"14100\",e.TOKEN_EXPIRED=\"14040\",e.TOKEN_NOT_ASSOCIATED=\"14042\",e.TOKEN_NOT_FOUND=\"14041\"}(O||(O={})),function(e){e.CardCode=\"cvv\",e.CardExpiry=\"exp\",e.CardName=\"noc\",e.CardNumber=\"ccn\"}(E||(E={}));const M={[E.CardNumber]:f.CardNumber,[E.CardExpiry]:f.CardExpiry,[E.CardName]:f.CardName,[E.CardCode]:f.CardCode},T={empty:{[f.CardNumber]:{fieldType:\"cardNumber\",message:\"Credit card number is required\",type:\"required\"},[f.CardNumberVerification]:{fieldType:\"cardNumber\",message:\"Credit card number is required\",type:\"required\"},[f.CardExpiry]:{fieldType:\"cardExpiry\",message:\"Expiration date is required\",type:\"required\"},[f.CardCode]:{fieldType:\"cardCode\",message:\"CVV is required\",type:\"required\"},[f.CardName]:{fieldType:\"cardName\",message:\"Full name is required\",type:\"required\"}},invalid:{[f.CardNumber]:{fieldType:\"cardNumber\",message:\"Credit card number must be valid\",type:\"invalid_card_number\"},[f.CardNumberVerification]:{fieldType:\"cardNumber\",message:\"Credit card number must be valid\",type:\"invalid_card_number\"},[f.CardExpiry]:{fieldType:\"cardExpiry\",message:\"Expiration date must be a valid future date in MM / YY format\",type:\"invalid_card_expiry\"},[f.CardCode]:{fieldType:\"cardCode\",message:\"CVV must be valid\",type:\"invalid_card_code\"},[f.CardName]:{fieldType:\"cardName\",message:\"Full name is required\",type:\"required\"}}};class j{constructor(e,t){this._nameOnCardInput=e,this._hostedInputValidator=t}initialize(e,t){this._blueSnapSdk=e,t&&(v(t)?this._hostedInputValidator.initialize():I(t)&&t.cardNumberVerification&&this._hostedInputValidator.initializeValidationFields())}attach(e,t,n){var i,a,r,s,o=t.form,{fields:d}=o,c=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(o,[\"fields\"]);return void 0===n&&(n=!1),i=this,a=void 0,s=function*(){const t=this._getBlueSnapSdk();if(!v(d)&&!I(d))throw new m(\"Field options must be of type HostedCardFieldOptionsMap\");return this._onValidate=c.onValidate,v(d)&&this._setCustomBlueSnapAttributes(d),I(d)&&this._setCustomStoredCardsBlueSnapAttributes(d),new Promise(i=>{const a=this._getHostedPaymentFieldsOptions(e,d,c,i,n);t.hostedPaymentFieldsCreate(a),v(d)&&this._nameOnCardInput.attach(a,d.cardName.accessibilityLabel,d.cardName.placeholder)})},new((r=void 0)||(r=Promise))(function(e,t){function n(e){try{d(s.next(e))}catch(e){t(e)}}function o(e){try{d(s.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r(function(e){e(i)})).then(n,o)}d((s=s.apply(i,a||[])).next())})}validate(){var e;const t=this._hostedInputValidator.validate();if(null===(e=this._onValidate)||void 0===e||e.call(this,t),!t.isValid){const e=Object.entries(t.errors).reduce((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:n.map(({message:e,type:t})=>({message:e,type:t}))}),{});throw new D(e)}return this}submit(e,t=!1){return new Promise((n,i)=>this._getBlueSnapSdk().hostedPaymentFieldsSubmitData(e=>this._isBlueSnapDirectCallbackError(e)?i(new o(e.statusCode===O.THREE_DS_AUTH_FAILED?e.error[0].errorDescription:`Submission failed with status: ${e.statusCode} and errors: ${JSON.stringify(e.error)}`)):n(Object.assign(Object.assign({},e.cardData),t?{cardHolderName:this._nameOnCardInput.getValue()}:{})),e))}detach(){this._nameOnCardInput.detach()}_isBlueSnapDirectCallbackError(e){return\"error\"in e}_getHostedPaymentFieldsOptions(e,t,{onFocus:n,onBlur:i,onValidate:a,onCardTypeChange:r,onEnter:s,styles:o},d,c){var u;return Object.assign(Object.assign(Object.assign({token:e,onFieldEventHandler:{setupComplete:()=>d(),onFocus:this._usetUiEventCallback(n),onBlur:this._usetUiEventCallback(i),onError:this._handleError(a),onType:(e,t)=>null==r?void 0:r({cardType:S[t]}),onEnter:this._usetUiEventCallback(s),onValid:e=>null==a?void 0:a(this._hostedInputValidator.validate({tagId:e}))}},v(t)&&{ccnPlaceHolder:t.cardNumber.placeholder||\"\",cvvPlaceHolder:(null===(u=t.cardCode)||void 0===u?void 0:u.placeholder)||\"\",expPlaceHolder:t.cardExpiry.placeholder||\"MM / YY\"}),o&&{style:this._mapStyles(o)}),{\"3DS\":c})}_mapStyles({default:e,error:n,focus:i}){return Object.entries(Object.assign(Object.assign(Object.assign({},e&&{input:e}),n&&{\".invalid\":n}),i&&{\":focus\":i})).reduce((e,[n,i])=>Object.assign(Object.assign({},e),{[n]:Object.entries(i).reduce((e,[n,i])=>Object.assign(Object.assign({},e),{[(0,lodash__WEBPACK_IMPORTED_MODULE_1__.kebabCase)(n)]:i}),{})}),{})}_handleError(e){return(t,n,i,a)=>{if(n===O.INVALID_OR_EMPTY&&t&&function(e){return void 0!==e&&[N.EMPTY,N.INVALID].includes(e)}(i))return null==e?void 0:e(this._hostedInputValidator.validate({tagId:t,errorDescription:i}));throw new o(`An unexpected error has occurred: ${JSON.stringify({tagId:t,errorCode:n,errorDescription:i,eventOrigin:a})}`)}}_usetUiEventCallback(e){return t=>{e&&e({fieldType:M[t]})}}_getBlueSnapSdk(){return d(this._blueSnapSdk,()=>new c(i.PaymentNotInitialized))}_setCustomBlueSnapAttributes(e){const{cardNumber:t,cardExpiry:n,cardCode:i,cardName:a}=e,r=document.getElementById(t.containerId),s=document.getElementById(n.containerId),o=i&&document.getElementById(i.containerId),d=document.getElementById(a.containerId);if(!(r&&s&&o&&d))throw new m(\"Unable to create hosted payment fields to invalid HTML container elements.\");r.dataset.bluesnap=E.CardNumber,s.dataset.bluesnap=E.CardExpiry,o.dataset.bluesnap=E.CardCode,d.dataset.bluesnap=E.CardName}_setCustomStoredCardsBlueSnapAttributes(e){const{cardNumberVerification:t,cardCodeVerification:n}=e,i=t&&document.getElementById(t.containerId),a=n&&document.getElementById(n.containerId);(i||a)&&(i&&(i.dataset.bluesnap=E.CardNumber),a&&(a.dataset.bluesnap=E.CardCode))}}class k{constructor(){this._errors={}}initialize(){this._errors={cardNumber:[T.empty.cardNumber],cardExpiry:[T.empty.cardExpiry],cardCode:[T.empty.cardCode],cardName:[T.empty.cardName]}}initializeValidationFields(){this._errors={cardNumberVerification:[T.empty.cardNumber]}}validate(e){return e&&this._updateErrors(e.tagId,e.errorDescription),{isValid:Object.values(this._errors).every(e=>0===e.length),errors:this._errors}}_updateErrors(e,t){const n=this._errors.cardNumberVerification?f.CardNumberVerification:M[e];this._errors[n]=t?[T[t][n]]:[]}}class A{attach({style:e,onFieldEventHandler:{onFocus:t,onBlur:n,onValid:i,onError:a,onEnter:r}={}},s,o){var d;this._style=e,this._create(),this._getInput().addEventListener(\"focus\",this._handleFocus(t)),this._getInput().addEventListener(\"blur\",this._handleBlur(n,i,a)),this._getInput().addEventListener(\"enter\",this._handleEnter(r)),s&&this._getInput().setAttribute(\"aria-label\",s),o&&(this._getInput().placeholder=o),null===(d=document.querySelector('[data-bluesnap=\"noc\"]'))||void 0===d||d.appendChild(this._getInput())}getValue(){return this._getInput().value}detach(){this._input&&(this._input.remove(),this._input=void 0)}_handleFocus(e){return()=>{var t;this._applyStyles(null===(t=this._style)||void 0===t?void 0:t[\":focus\"]),null==e||e(E.CardName)}}_handleBlur(e,t,n){return({target:i})=>{var a,r;null==e||e(E.CardName),i instanceof HTMLInputElement&&(/\\w{1,200}/.test(i.value)?(this._applyStyles(null===(a=this._style)||void 0===a?void 0:a.input),null==t||t(E.CardName)):(this._applyStyles(null===(r=this._style)||void 0===r?void 0:r[\".invalid\"]),null==n||n(E.CardName,O.INVALID_OR_EMPTY,N.EMPTY,C.ON_BLUR)))}}_handleEnter(e){return()=>null==e?void 0:e(E.CardName)}_applyStyles(e={}){const t={color:e.color,fontFamily:e[\"font-family\"],fontSize:e[\"font-size\"],fontWeight:e[\"font-weight\"]},n=Object.keys(t);n.every(e=>[\"color\",\"fontFamily\",\"fontSize\",\"fontWeight\"].includes(e))&&n.forEach(e=>{t[e]&&(this._getInput().style[e]=t[e]||\"\")})}_configureInput(){this._getInput().autocomplete=\"cc-name\",this._getInput().id=E.CardName,this._getInput().inputMode=\"text\",this._getInput().maxLength=200,this._getInput().style.backgroundColor=\"transparent\",this._getInput().style.border=\"0\",this._getInput().style.height=\"100%\",this._getInput().style.margin=\"0\",this._getInput().style.outline=\"none\",this._getInput().style.padding=\"0\",this._getInput().style.width=\"100%\",this._getInput().type=\"text\"}_getInput(){return d(this._input,()=>new c(i.PaymentNotInitialized))}_create(){var e;this._input=document.createElement(\"input\"),this._configureInput(),this._applyStyles(null===(e=this._style)||void 0===e?void 0:e.input)}}class x extends s{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}var z;!function(e){e.PRODUCTION=\"https://pay.bluesnap.com/web-sdk/5/bluesnap.js\",e.SANDBOX=\"https://sandpay.bluesnap.com/web-sdk/5/bluesnap.js\"}(z||(z={}));class B{constructor(e,t=window){this._scriptLoader=e,this._window=t}load(e=!1){return t=this,n=void 0,a=function*(){if(this._window.bluesnap)return this._window.bluesnap;if(yield this._scriptLoader.loadScript(e?z.SANDBOX:z.PRODUCTION),!this._window.bluesnap)throw new x;return this._window.bluesnap},new((i=void 0)||(i=Promise))(function(e,r){function s(e){try{d(a.next(e))}catch(e){r(e)}}function o(e){try{d(a.throw(e))}catch(e){r(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(s,o)}d((a=a.apply(t,n||[])).next())});// removed by dead control flow\n var t, n, i, a; }}const F=r(t=>new P(new B((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()),t,new j(new A,new k),new p),[{id:\"credit_card\",gateway:\"bluesnapdirect\"}]);class U{constructor(e){this._paymentIntegrationService=e}execute(e){return t=this,n=void 0,a=function*(){const t=this._formatePaymentPayload(e);yield this._paymentIntegrationService.submitOrder();try{yield this._paymentIntegrationService.submitPayment(t)}catch(e){if(this._isBlueSnapDirectRedirectResponse(e)){const t=e.body.provider_data&&JSON.parse(e.body.provider_data);let n=e.body.additional_action_required.data.redirect_url;if(function(e){if(\"object\"!=typeof e||null===e)return!1;const t=e;return!!t.merchantid&&\"string\"==typeof t.merchantid}(t)){const e=new URLSearchParams(t).toString();n=`${n}&${e}`}return new Promise(()=>window.location.replace(n))}return Promise.reject(e)}},new((i=void 0)||(i=Promise))(function(e,r){function s(e){try{d(a.next(e))}catch(e){r(e)}}function o(e){try{d(a.throw(e))}catch(e){r(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(s,o)}d((a=a.apply(t,n||[])).next())});// removed by dead control flow\n var t, n, i, a; }initialize(){return Promise.resolve()}finalize(){return Promise.reject(new g)}deinitialize(){return Promise.resolve()}_formatePaymentPayload({payment:e}){if(!e)throw new h([\"payment\"]);return e.paymentData&&b(e.paymentData)&&y(e.paymentData)?Object.assign(Object.assign({},e),{paymentData:{instrumentId:e.paymentData.instrumentId,shouldSetAsDefaultInstrument:!!e.paymentData.shouldSetAsDefaultInstrument}}):(t=e.paymentData,Boolean(\"object\"==typeof t&&null!==t&&\"accountNumber\"in t&&\"accountType\"in t&&\"shopperPermission\"in t&&\"routingNumber\"in t)?Object.assign(Object.assign({},e),{paymentData:{formattedPayload:{ecp:Object.assign({account_number:e.paymentData.accountNumber,account_type:e.paymentData.accountType,shopper_permission:e.paymentData.shopperPermission,routing_number:e.paymentData.routingNumber},e.paymentData.companyName?{company_name:e.paymentData.companyName}:{}),vault_payment_instrument:e.paymentData.shouldSaveInstrument,set_as_default_stored_instrument:e.paymentData.shouldSetAsDefaultInstrument}}}):(n=e.paymentData,Boolean(\"object\"==typeof n&&null!==n&&\"iban\"in n&&\"firstName\"in n&&\"lastName\"in n&&\"shopperPermission\"in n)?Object.assign(Object.assign({},e),{paymentData:{formattedPayload:{sepa_direct_debit:{iban:e.paymentData.iban,first_name:e.paymentData.firstName,last_name:e.paymentData.lastName,shopper_permission:e.paymentData.shopperPermission},vault_payment_instrument:e.paymentData.shouldSaveInstrument,set_as_default_stored_instrument:e.paymentData.shouldSetAsDefaultInstrument}}}):function(e){return Boolean(\"object\"==typeof e&&null!==e&&\"bic\"in e)}(e.paymentData)?Object.assign(Object.assign({},e),{paymentData:{formattedPayload:{ideal:{bic:e.paymentData.bic}}}}):function(e){return Boolean(\"object\"==typeof e&&null!==e&&\"iban\"in e&&!(\"firstName\"in e)&&!(\"lastName\"in e)&&!(\"shopperPermission\"in e))}(e.paymentData)?Object.assign(Object.assign({},e),{paymentData:{formattedPayload:{pay_by_bank:{iban:e.paymentData.iban}}}}):{methodId:e.methodId}));// removed by dead control flow\n var t, n; }_isBlueSnapDirectRedirectResponse(e){var t;if(\"object\"!=typeof e||null===e)return!1;const n=e;if(!n.body)return!1;const i=n.body;return\"additional_action_required\"===i.status&&!!(null===(t=i.additional_action_required)||void 0===t?void 0:t.data.redirect_url)}}const V=r(e=>new U(e),[{gateway:\"bluesnapdirect\"}]);class R{constructor(e){const t=new Promise((e,t)=>{this.cancel=t});this.promise=Promise.race([e,t])}}class L extends s{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}var H;!function(e){e.ACKNOWLEDGE=\"ACKNOWLEDGE\",e.FINALIZE=\"FINALIZE\",e.INITIALIZE=\"INITIALIZE\"}(H||(H={}));const q=H;var Y=function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function s(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}d((i=i.apply(e,t||[])).next())})};class ${constructor(e){this._paymentIntegrationService=e}execute(e,t){return Y(this,void 0,void 0,function*(){const{payment:a}=e;if(!a)throw new h([\"payment\"]);if(!this._initializeOptions)throw new c(i.PaymentNotInitialized);const{onLoad:r,style:s}=this._initializeOptions,o=this._createIframe(\"bluesnapv2_hosted_payment_page\",s),d=new R(new Promise(lodash__WEBPACK_IMPORTED_MODULE_1__.noop));r(o,()=>d.cancel(new L)),yield this._paymentIntegrationService.submitOrder(e,t),yield this._paymentIntegrationService.initializeOffsitePayment({methodId:a.methodId,gatewayId:a.gatewayId,shouldSaveInstrument:!1,target:o.name,promise:d.promise})})}finalize(e){return Y(this,void 0,void 0,function*(){const t=this._paymentIntegrationService.getState(),n=t.getOrder(),i=t.getPaymentStatus();if(!n||i!==q.ACKNOWLEDGE&&i!==q.FINALIZE)return Promise.reject(new g);yield this._paymentIntegrationService.finalizeOrder(e)})}initialize(e){return Y(this,void 0,void 0,function*(){this._initializeOptions=e&&e.bluesnapv2,yield Promise.resolve()})}deinitialize(){return Promise.resolve()}_createIframe(e,t){const n=document.createElement(\"iframe\");if(n.setAttribute(\"sandbox\",\"allow-top-navigation allow-scripts allow-forms allow-same-origin\"),n.name=e,t){const{border:e,height:i,width:a}=t;n.style.border=null!=e?e:\"\",n.style.height=null!=i?i:\"\",n.style.width=null!=a?a:\"\"}return n}}const K=r(e=>new $(e),[{gateway:\"bluesnapv2\"}]);\n//# sourceMappingURL=bluesnap-direct.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9ibHVlc25hcC1kaXJlY3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTBHLFdBQVcsZ0JBQWdCLHdCQUF3QixhQUFhLEVBQUUsWUFBWSwrREFBK0QsdUJBQXVCLEVBQUUsc0RBQXNELHNCQUFzQixlQUFlLE1BQU0sdVRBQXVULGtCQUFrQixlQUFlLDZMQUE2TCxnQkFBZ0Isc0VBQXNFLFNBQVMsYUFBYSx5U0FBeVMsU0FBUyxHQUFHLGtCQUFrQixlQUFlLGtCQUFrQixVQUFVLHdIQUF3SCxzSEFBc0gsd0hBQXdILDZIQUE2SCw0RkFBNEYsaUZBQWlGLFFBQVEsUUFBUSxjQUFjLG9CQUFvQixtQkFBbUIscUNBQXFDLCtCQUErQiwyQkFBMkIsNEhBQTRILEVBQUUsNENBQTRDLGNBQWMsSUFBSSxhQUFhLFNBQVMsTUFBTSxjQUFjLElBQUksY0FBYyxTQUFTLE1BQU0sY0FBYyxNQUFNLGdFQUFnRSxLQUFLLGFBQWEsK0JBQStCLEVBQUU7QUFBQSxpQkFBVyxDQUFDLGtCQUFrQixnRUFBZ0Usa0JBQWtCLGVBQWUsaUhBQWlILGtCQUFrQixlQUFlLCtFQUErRSxTQUFTLEdBQUcseURBQXlELGFBQWEsc0RBQXNELGNBQWMsNE1BQTRNLGNBQWMsK0JBQStCLGtCQUFrQixjQUFjLG1LQUFtSyxhQUFhLHN5QkFBc3lCLFNBQVMsR0FBRyxrQkFBa0IsZUFBZSxrQkFBa0IsVUFBVSxvR0FBb0csK0VBQStFLCtGQUErRix1RkFBdUYsdUZBQXVGLDRIQUE0SCxpRkFBaUYsc0dBQXNHLHFGQUFxRixnSEFBZ0gsNkhBQTZILHNHQUFzRyw2RUFBNkUsMkVBQTJFLGFBQWEsa1BBQWtQLFNBQVMsR0FBRyxVQUFVLGNBQWMseUJBQXlCLGNBQWMsa0VBQWtFLGtDQUFrQyx5Q0FBeUMsY0FBYyxJQUFJLGFBQWEsU0FBUyxNQUFNLGNBQWMsSUFBSSxjQUFjLFNBQVMsTUFBTSxjQUFjLE1BQU0sZ0VBQWdFLEtBQUss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Ryw0SUFBNEksNkpBQTZKLEtBQUssYUFBYSxrQkFBa0IsbUJBQW1CLCtJQUErSSwySUFBMkksY0FBYyx3REFBd0QsOENBQThDLEtBQUssYUFBYSxrQkFBa0IsT0FBTyx5QkFBeUIsY0FBYyw0SEFBNEgsOENBQThDLEtBQUssYUFBYSxrQkFBa0IsYUFBYSwyQkFBMkIsR0FBRyxvQkFBb0IsR0FBRztBQUFBLFdBQU8sQ0FBQyxxQ0FBcUMsTUFBTSx5Q0FBeUMsVUFBVSxvQkFBb0IsZUFBZSxtSUFBbUksd0JBQXdCLHlCQUF5QixHQUFHLFFBQVEsZUFBZSw0QkFBNEIsY0FBYyxFQUFFLGtDQUFrQyxrQkFBa0IsZUFBZSxrSEFBa0gsTUFBTSxhQUFhLDRFQUE0RSxTQUFTLEdBQUcsVUFBVSx3QkFBd0IseUNBQXlDLGNBQWMsSUFBSSxhQUFhLFNBQVMsTUFBTSxjQUFjLElBQUksY0FBYyxTQUFTLE1BQU0sY0FBYyxNQUFNLGdFQUFnRSxLQUFLLGFBQWEsK0JBQStCLEdBQUcsUUFBUSxlQUFlLGtDQUFrQyxhQUFhLHdDQUF3QyxNQUFNLFVBQVUsR0FBRywrQkFBK0IsaUVBQWlFLE1BQU0saUJBQWlCLHNHQUFzRyx3Q0FBQyxHQUFHLGdKQUFnSixrR0FBa0csRUFBRSxFQUFFLFlBQVksd0NBQXdDLHlGQUF5RixzRUFBc0UsdURBQXVELEVBQUUsY0FBYyx3Q0FBd0MsZ0VBQWdFLEVBQUUsZUFBZSx5QkFBeUIsbUJBQW1CLHlDQUF5Qyw0R0FBNEcsTUFBTSwwQkFBMEIsR0FBRyxtRkFBbUYsVUFBVSx3QkFBd0IscUJBQXFCLEdBQStJO0FBQ3p4eUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uLi9jaGVja291dC1zZGstanMvZGlzdC9lc20vaW50ZWdyYXRpb25zL2JsdWVzbmFwLWRpcmVjdC5qcz8xY2IyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydHtnZXRTY3JpcHRMb2FkZXIgYXMgZX1mcm9tXCJAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlclwiO2ltcG9ydHtrZWJhYkNhc2UgYXMgdCxub29wIGFzIG59ZnJvbVwibG9kYXNoXCI7dmFyIGksYT17fTtmdW5jdGlvbiByKGUsdCl7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx7cmVzb2x2ZUlkczp0fSl9YS5kPShlLHQpPT57Zm9yKHZhciBuIGluIHQpYS5vKHQsbikmJiFhLm8oZSxuKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTohMCxnZXQ6dFtuXX0pfSxhLm89KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpO2NsYXNzIHMgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlKXt2YXIgdDtzdXBlcihlfHxcIkFuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLlwiKSx0aGlzLm5hbWU9XCJTdGFuZGFyZEVycm9yXCIsdGhpcy50eXBlPVwic3RhbmRhcmRcIix0PW5ldy50YXJnZXQucHJvdG90eXBlLE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyx0KTp0aGlzLl9fcHJvdG9fXz10LFwiZnVuY3Rpb25cIj09dHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsbmV3LnRhcmdldCk6dGhpcy5zdGFjaz1uZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFja319Y2xhc3MgbyBleHRlbmRzIHN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGhhcyB0aHJvd24gYW4gdW5leHBlY3RlZCBlcnJvci5cIiksdGhpcy5uYW1lPVwiUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yXCIsdGhpcy50eXBlPVwicGF5bWVudF9tZXRob2RfY2xpZW50X2ludmFsaWRcIn19ZnVuY3Rpb24gZChlLHQpe2lmKG51bGw9PWUpdGhyb3cgdD90KCk6bmV3IEVycm9yKFwiQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuXCIpO3JldHVybiBlfSFmdW5jdGlvbihlKXtlW2UuQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZD0wXT1cIkNoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWRcIixlW2UuQ3VzdG9tZXJOb3RJbml0aWFsaXplZD0xXT1cIkN1c3RvbWVyTm90SW5pdGlhbGl6ZWRcIixlW2UuUGF5bWVudE5vdEluaXRpYWxpemVkPTJdPVwiUGF5bWVudE5vdEluaXRpYWxpemVkXCIsZVtlLlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQ9M109XCJTaGlwcGluZ05vdEluaXRpYWxpemVkXCIsZVtlLlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQ9NF09XCJTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkXCJ9KGl8fChpPXt9KSk7Y2xhc3MgYyBleHRlbmRzIHN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2UgaS5DdXN0b21lck5vdEluaXRpYWxpemVkOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY3VzdG9tZXIgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuXCI7Y2FzZSBpLlBheW1lbnROb3RJbml0aWFsaXplZDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuXCI7Y2FzZSBpLlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBzaGlwcGluZyBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC5cIjtjYXNlIGkuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNoZWNrb3V0IHNwYW0gcHJvdGVjdGlvbiBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuXCI7ZGVmYXVsdDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuXCJ9fShlKSksdGhpcy5zdWJ0eXBlPWUsdGhpcy5uYW1lPVwiTm90SW5pdGlhbGl6ZWRFcnJvclwiLHRoaXMudHlwZT1cIm5vdF9pbml0aWFsaXplZFwifX12YXIgdSxsO2NsYXNzIHB7aW5pdGlhbGl6ZShlKXt0aGlzLl9ibHVlU25hcFNkaz1lfWluaXRpYWxpemUzZHMoZSx0KXtyZXR1cm4gbj10aGlzLGk9dm9pZCAwLHI9ZnVuY3Rpb24qKCl7Y29uc3Qgbj10aGlzLl9nZXRCbHVlU25hcFNkaygpO3JldHVybiBuZXcgUHJvbWlzZSgoaSxhKT0+e24udGhyZWVEc1BheW1lbnRzU2V0dXAoZSxlPT5cIjFcIj09PWUuY29kZT9pKGUudGhyZWVEU2VjdXJlLnRocmVlRFNlY3VyZVJlZmVyZW5jZUlkKTphKG5ldyBvKSksbi50aHJlZURzUGF5bWVudHNTdWJtaXREYXRhKHQpfSl9LG5ldygoYT12b2lkIDApfHwoYT1Qcm9taXNlKSkoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBzKGUpe3RyeXtkKHIubmV4dChlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gbyhlKXt0cnl7ZChyLnRocm93KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIGE/bjpuZXcgYShmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4ocyxvKX1kKChyPXIuYXBwbHkobixpfHxbXSkpLm5leHQoKSl9KTt2YXIgbixpLGEscn1fZ2V0Qmx1ZVNuYXBTZGsoKXtyZXR1cm4gZCh0aGlzLl9ibHVlU25hcFNkaywoKT0+bmV3IGMoaS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKX19Y2xhc3MgbSBleHRlbmRzIHN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJJbnZhbGlkIGFyZ3VtZW50cyBoYXZlIGJlZW4gcHJvdmlkZWQuXCIpLHRoaXMubmFtZT1cIkludmFsaWRBcmd1bWVudEVycm9yXCIsdGhpcy50eXBlPVwiaW52YWxpZF9hcmd1bWVudFwifX1jbGFzcyBoIGV4dGVuZHMgbXtjb25zdHJ1Y3RvcihlKXtsZXQgdD1cIlVuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBmb3IgdGhlIG9yZGVyIGJlY2F1c2UgdGhlIHBheWxvYWQgaXMgaW52YWxpZC5cIjtlJiYodD1gJHt0fSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtlLmpvaW4oXCIsIFwiKX0uYCksc3VwZXIodCksdGhpcy5uYW1lPVwiUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yXCJ9fWZ1bmN0aW9uIHkoZSl7cmV0dXJuIShcIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWV8fHZvaWQgMCE9PWUuc2hvdWxkU2F2ZUluc3RydW1lbnQmJlwiYm9vbGVhblwiIT10eXBlb2YgZS5zaG91bGRTYXZlSW5zdHJ1bWVudHx8dm9pZCAwIT09ZS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50JiZcImJvb2xlYW5cIiE9dHlwZW9mIGUuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCl9ZnVuY3Rpb24gYihlKXtyZXR1cm4gQm9vbGVhbihlLmluc3RydW1lbnRJZCl9Y2xhc3MgZyBleHRlbmRzIHN7Y29uc3RydWN0b3IoKXtzdXBlcihcIlRoZSBjdXJyZW50IG9yZGVyIGRvZXMgbm90IG5lZWQgdG8gYmUgZmluYWxpemVkIGF0IHRoaXMgc3RhZ2UuXCIpLHRoaXMubmFtZT1cIk9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvclwiLHRoaXMudHlwZT1cIm9yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWRcIn19IWZ1bmN0aW9uKGUpe2VbZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3M9MF09XCJNaXNzaW5nQmlsbGluZ0FkZHJlc3NcIixlW2UuTWlzc2luZ0NhcnQ9MV09XCJNaXNzaW5nQ2FydFwiLGVbZS5NaXNzaW5nQ2hlY2tvdXQ9Ml09XCJNaXNzaW5nQ2hlY2tvdXRcIixlW2UuTWlzc2luZ0NvbnNpZ25tZW50cz0zXT1cIk1pc3NpbmdDb25zaWdubWVudHNcIixlW2UuTWlzc2luZ0N1c3RvbWVyPTRdPVwiTWlzc2luZ0N1c3RvbWVyXCIsZVtlLk1pc3NpbmdDaGVja291dENvbmZpZz01XT1cIk1pc3NpbmdDaGVja291dENvbmZpZ1wiLGVbZS5NaXNzaW5nT3JkZXI9Nl09XCJNaXNzaW5nT3JkZXJcIixlW2UuTWlzc2luZ09yZGVyQ29uZmlnPTddPVwiTWlzc2luZ09yZGVyQ29uZmlnXCIsZVtlLk1pc3NpbmdPcmRlcklkPThdPVwiTWlzc2luZ09yZGVySWRcIixlW2UuTWlzc2luZ1BheW1lbnQ9OV09XCJNaXNzaW5nUGF5bWVudFwiLGVbZS5NaXNzaW5nUGF5bWVudElkPTEwXT1cIk1pc3NpbmdQYXltZW50SWRcIixlW2UuTWlzc2luZ1BheW1lbnRJbnN0cnVtZW50PTExXT1cIk1pc3NpbmdQYXltZW50SW5zdHJ1bWVudFwiLGVbZS5NaXNzaW5nUGF5bWVudE1ldGhvZD0xMl09XCJNaXNzaW5nUGF5bWVudE1ldGhvZFwiLGVbZS5NaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsPTEzXT1cIk1pc3NpbmdQYXltZW50UmVkaXJlY3RVcmxcIixlW2UuTWlzc2luZ1BheW1lbnRTdGF0dXM9MTRdPVwiTWlzc2luZ1BheW1lbnRTdGF0dXNcIixlW2UuTWlzc2luZ1BheW1lbnRUb2tlbj0xNV09XCJNaXNzaW5nUGF5bWVudFRva2VuXCIsZVtlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M9MTZdPVwiTWlzc2luZ1NoaXBwaW5nQWRkcmVzc1wifSh1fHwodT17fSkpO2NsYXNzIF8gZXh0ZW5kcyBze2NvbnN0cnVjdG9yKGUpe3N1cGVyKGZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIHUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBiaWxsaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIHUuTWlzc2luZ0NhcnQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNhcnQgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIHUuTWlzc2luZ0NvbnNpZ25tZW50czpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSB1Lk1pc3NpbmdDaGVja291dDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2hlY2tvdXQgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIHUuTWlzc2luZ0N1c3RvbWVyOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjdXN0b21lciBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2UgdS5NaXNzaW5nQ2hlY2tvdXRDb25maWc6Y2FzZSB1Lk1pc3NpbmdPcmRlckNvbmZpZzpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uZmlndXJhdGlvbiBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2UgdS5NaXNzaW5nT3JkZXI6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSB1Lk1pc3NpbmdPcmRlcklkOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC5cIjtjYXNlIHUuTWlzc2luZ1BheW1lbnQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIHUuTWlzc2luZ1BheW1lbnRUb2tlbjpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHRva2VuIHJlcXVpcmVkIHRvIHN1Ym1pdCBhIHBheW1lbnQgaXMgbWlzc2luZy5cIjtjYXNlIHUuTWlzc2luZ1BheW1lbnRNZXRob2Q6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuXCI7Y2FzZSB1Lk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHNoaXBwaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtkZWZhdWx0OnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIn19KGUpKSx0aGlzLnN1YnR5cGU9ZSx0aGlzLm5hbWU9XCJNaXNzaW5nRGF0YUVycm9yXCIsdGhpcy50eXBlPVwibWlzc2luZ19kYXRhXCJ9fSFmdW5jdGlvbihlKXtlLkNhcmRDb2RlPVwiY2FyZENvZGVcIixlLkNhcmRDb2RlVmVyaWZpY2F0aW9uPVwiY2FyZENvZGVWZXJpZmljYXRpb25cIixlLkNhcmRFeHBpcnk9XCJjYXJkRXhwaXJ5XCIsZS5DYXJkTmFtZT1cImNhcmROYW1lXCIsZS5DYXJkTnVtYmVyPVwiY2FyZE51bWJlclwiLGUuQ2FyZE51bWJlclZlcmlmaWNhdGlvbj1cImNhcmROdW1iZXJWZXJpZmljYXRpb25cIixlLkNhcmRFeHBpcnlWZXJpZmljYXRpb249XCJjYXJkRXhwaXJ5VmVyaWZpY2F0aW9uXCJ9KGx8fChsPXt9KSk7Y29uc3QgZj1sO2Z1bmN0aW9uIHYoZSl7cmV0dXJuIGYuQ2FyZE51bWJlciBpbiBlfWZ1bmN0aW9uIEkoZSl7cmV0dXJuIGYuQ2FyZENvZGVWZXJpZmljYXRpb24gaW4gZXx8Zi5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uIGluIGV9dmFyIFMsQyxOLE8sRSx3PWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKGEscil7ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe3IoZSl9fWZ1bmN0aW9uIG8oZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7cihlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/YShlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKHMsbyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIFB7Y29uc3RydWN0b3IoZSx0LG4saSl7dGhpcy5fc2NyaXB0TG9hZGVyPWUsdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZT10LHRoaXMuX2JsdWVTbmFwRGlyZWN0SG9zdGVkRm9ybT1uLHRoaXMuX2JsdWVTbmFwRGlyZWN0M2RzPWl9aW5pdGlhbGl6ZShlKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7bWV0aG9kSWQ6dCxnYXRld2F5SWQ6bixjcmVkaXRDYXJkOml9PWU7aWYoIW58fCFpKXRocm93IG5ldyBtO2NvbnN0IGE9eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChuLHtwYXJhbXM6e21ldGhvZDp0LGJpZ3BheVRva2VuOmkuYmlncGF5VG9rZW59fSkse2NvbmZpZzp7dGVzdE1vZGU6cixpczNkc0VuYWJsZWQ6c30sY2xpZW50VG9rZW46b309YS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyh0LG4pO3RoaXMuX2JsdWVTbmFwU2RrPXlpZWxkIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkKHIpLHRoaXMuX3BheW1lbnRGaWVsZHNUb2tlbj1vLHRoaXMuX3Nob3VsZFVzZUhvc3RlZEZpZWxkcz12KGkuZm9ybS5maWVsZHMpfHxJKGkuZm9ybS5maWVsZHMpJiYhIWkuZm9ybS5maWVsZHMuY2FyZE51bWJlclZlcmlmaWNhdGlvbix0aGlzLl9zaG91bGRVc2VIb3N0ZWRGaWVsZHMmJih0aGlzLl9ibHVlU25hcERpcmVjdEhvc3RlZEZvcm0uaW5pdGlhbGl6ZSh0aGlzLl9ibHVlU25hcFNkayxpLmZvcm0uZmllbGRzKSx5aWVsZCB0aGlzLl9ibHVlU25hcERpcmVjdEhvc3RlZEZvcm0uYXR0YWNoKHRoaXMuX2dldFBheW1lbnRGaWVsZHNUb2tlbigpLGkscykpfSl9ZXhlY3V0ZShlKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIWUucGF5bWVudCl0aHJvdyBuZXcgaChbXCJwYXltZW50XCJdKTtpZighdGhpcy5fYmx1ZVNuYXBTZGspdGhyb3cgbmV3IGgoW1wicGF5bWVudFwiXSk7Y29uc3R7cGF5bWVudERhdGE6dH09ZS5wYXltZW50LHtzaG91bGRTYXZlSW5zdHJ1bWVudDpuLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6aX09eSh0KT90OntzaG91bGRTYXZlSW5zdHJ1bWVudDohMSxzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OiExfSxhPXRoaXMuX2dldFBheW1lbnRGaWVsZHNUb2tlbigpO2xldCByO2NvbnN0e2lzM2RzRW5hYmxlZDpzfT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coZS5wYXltZW50Lm1ldGhvZElkLGUucGF5bWVudC5nYXRld2F5SWQpLmNvbmZpZyxvPXRoaXMuX3Nob3VsZFVzZUhvc3RlZEZpZWxkcz95aWVsZCB0aGlzLl9ibHVlU25hcERpcmVjdEhvc3RlZEZvcm0udmFsaWRhdGUoKS5zdWJtaXQocz90aGlzLl9nZXRCbHVlU25hcERpcmVjdFRocmVlRFNlY3VyZURhdGEoKTp2b2lkIDAsISh5KHQpJiZiKHQpKSk6dm9pZCAwO2lmKHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoKSx5KHQpJiZiKHQpJiZ0aGlzLl9wYXltZW50RmllbGRzVG9rZW4mJnQuaW5zdHJ1bWVudElkKXtpZihzKXt0aGlzLl9ibHVlU25hcERpcmVjdDNkcy5pbml0aWFsaXplKHRoaXMuX2JsdWVTbmFwU2RrKTtjb25zdHtsYXN0NDplLGJyYW5kOm59PXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJkSW5zdHJ1bWVudE9yVGhyb3codC5pbnN0cnVtZW50SWQpLGk9T2JqZWN0LmFzc2lnbih7bGFzdDREaWdpdHM6ZSxjY1R5cGU6bi50b1VwcGVyQ2FzZSgpfSx0aGlzLl9nZXRCbHVlU25hcERpcmVjdFRocmVlRFNlY3VyZURhdGEoKSk7cj15aWVsZCB0aGlzLl9ibHVlU25hcERpcmVjdDNkcy5pbml0aWFsaXplM2RzKHRoaXMuX3BheW1lbnRGaWVsZHNUb2tlbixpKX15aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUucGF5bWVudCkse3BheW1lbnREYXRhOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHtpbnN0cnVtZW50SWQ6dC5pbnN0cnVtZW50SWR9LHRoaXMuX3Nob3VsZFVzZUhvc3RlZEZpZWxkcz97bm9uY2U6YX06e30pLHI/e2RldmljZVNlc3Npb25JZDpyfTp7fSkse3Nob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6ISFpfSl9KSl9ZWxzZSB5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUucGF5bWVudCkse3BheW1lbnREYXRhOntmb3JtYXR0ZWRQYXlsb2FkOntjcmVkaXRfY2FyZF90b2tlbjp7dG9rZW46SlNPTi5zdHJpbmdpZnkoe3BmVG9rZW46YSxjYXJkSG9sZGVyTmFtZTpvJiZvLmNhcmRIb2xkZXJOYW1lfSl9LHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDpuLHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50Oml9fX0pKX0pfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBnKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gdGhpcy5fc2hvdWxkVXNlSG9zdGVkRmllbGRzJiZ0aGlzLl9ibHVlU25hcERpcmVjdEhvc3RlZEZvcm0uZGV0YWNoKCksUHJvbWlzZS5yZXNvbHZlKCl9X2dldEJsdWVTbmFwRGlyZWN0VGhyZWVEU2VjdXJlRGF0YSgpe3ZhciBlO2NvbnN0e2dldEJpbGxpbmdBZGRyZXNzOnQsZ2V0U2hpcHBpbmdBZGRyZXNzOm4sZ2V0Q3VzdG9tZXI6aSxnZXRDaGVja291dE9yVGhyb3c6YSxnZXRDYXJ0T3JUaHJvdzpyfT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkscz10KCksbz1uKCksZD0obnVsbD09PShlPWkoKSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuZW1haWwpfHwobnVsbD09cz92b2lkIDA6cy5lbWFpbCksYz0obnVsbD09cz92b2lkIDA6cy5waG9uZSl8fChudWxsPT1vP3ZvaWQgMDpvLnBob25lKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7YW1vdW50OmEoKS5vdXRzdGFuZGluZ0JhbGFuY2UsY3VycmVuY3k6cigpLmN1cnJlbmN5LmNvZGV9LGQmJntlbWFpbDpkfSksYyYme3Bob25lOmN9KSxzJiZ7YmlsbGluZ0ZpcnN0TmFtZTpzLmZpcnN0TmFtZSxiaWxsaW5nTGFzdE5hbWU6cy5sYXN0TmFtZSxiaWxsaW5nQ291bnRyeTpzLmNvdW50cnlDb2RlLGJpbGxpbmdDaXR5OnMuY2l0eSxiaWxsaW5nQWRkcmVzczpgJHtzLmFkZHJlc3MxfSAke3MuYWRkcmVzczJ9YC50cmltKCksYmlsbGluZ1ppcDpzLnBvc3RhbENvZGV9KSxvJiZ7c2hpcHBpbmdGaXJzdE5hbWU6by5maXJzdE5hbWUsc2hpcHBpbmdMYXN0TmFtZTpvLmxhc3ROYW1lLHNoaXBwaW5nQ291bnRyeTpvLmNvdW50cnlDb2RlLHNoaXBwaW5nQ2l0eTpvLmNpdHksc2hpcHBpbmdBZGRyZXNzOmAke28uYWRkcmVzczF9ICR7by5hZGRyZXNzMn1gLnRyaW0oKSxzaGlwcGluZ1ppcDpvLnBvc3RhbENvZGV9KX1fZ2V0UGF5bWVudEZpZWxkc1Rva2VuKCl7cmV0dXJuIGQodGhpcy5fcGF5bWVudEZpZWxkc1Rva2VuLCgpPT5uZXcgXyh1Lk1pc3NpbmdQYXltZW50VG9rZW4pKX19Y2xhc3MgRCBleHRlbmRzIHN7Y29uc3RydWN0b3IoZSx0KXtzdXBlcih0fHxcIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgZm9ybSBjb250YWlucyBpbnZhbGlkIGRhdGEuXCIpLHRoaXMuZGV0YWlscz1lLHRoaXMubmFtZT1cIlBheW1lbnRJbnZhbGlkRm9ybUVycm9yXCIsdGhpcy50eXBlPVwicGF5bWVudF9pbnZhbGlkX2Zvcm1cIn19IWZ1bmN0aW9uKGUpe2UuQU1FWD1cImFtZXJpY2FuLWV4cHJlc3NcIixlLkNISU5BX1VOSU9OX1BBWT1cInVuaW9ucGF5XCIsZS5ESU5FUlM9XCJkaW5lcnMtY2x1YlwiLGUuRElTQ09WRVI9XCJkaXNjb3ZlclwiLGUuSkNCPVwiamNiXCIsZS5NQVNURVJDQVJEPVwibWFzdGVyY2FyZFwiLGUuVU5LTk9XTj1cInVua25vd25cIixlLlZJU0E9XCJ2aXNhXCJ9KFN8fChTPXt9KSksZnVuY3Rpb24oZSl7ZS5PTl9CTFVSPVwib25CbHVyXCIsZS5PTl9TVUJNSVQ9XCJvblN1Ym1pdFwifShDfHwoQz17fSkpLGZ1bmN0aW9uKGUpe2UuRU1QVFk9XCJlbXB0eVwiLGUuSU5WQUxJRD1cImludmFsaWRcIixlLlRIUkVFX0RTX05PVF9FTkFCTEVEPVwiM0QgU2VjdXJlIGlzIG5vdCBlbmFibGVkXCJ9KE58fChOPXt9KSksZnVuY3Rpb24oZSl7ZS5DQ19OT1RfU1VQT1JURUQ9XCIyMjAxM1wiLGUuRVJST1JfNDAzPVwiNDAzXCIsZS5FUlJPUl80MDQ9XCI0MDRcIixlLkVSUk9SXzUwMD1cIjUwMFwiLGUuSU5WQUxJRF9PUl9FTVBUWT1cIjEwXCIsZS5TRVNTSU9OX0VYUElSRUQ9XCI0MDBcIixlLlRIUkVFX0RTX0FVVEhfRkFJTEVEPVwiMTQxMDFcIixlLlRIUkVFX0RTX0NMSUVOVF9FUlJPUj1cIjE0MTAzXCIsZS5USFJFRV9EU19NSVNTSU5HX0ZJRUxEUz1cIjE0MTAyXCIsZS5USFJFRV9EU19OT1RfRU5BQkxFRD1cIjE0MTAwXCIsZS5UT0tFTl9FWFBJUkVEPVwiMTQwNDBcIixlLlRPS0VOX05PVF9BU1NPQ0lBVEVEPVwiMTQwNDJcIixlLlRPS0VOX05PVF9GT1VORD1cIjE0MDQxXCJ9KE98fChPPXt9KSksZnVuY3Rpb24oZSl7ZS5DYXJkQ29kZT1cImN2dlwiLGUuQ2FyZEV4cGlyeT1cImV4cFwiLGUuQ2FyZE5hbWU9XCJub2NcIixlLkNhcmROdW1iZXI9XCJjY25cIn0oRXx8KEU9e30pKTtjb25zdCBNPXtbRS5DYXJkTnVtYmVyXTpmLkNhcmROdW1iZXIsW0UuQ2FyZEV4cGlyeV06Zi5DYXJkRXhwaXJ5LFtFLkNhcmROYW1lXTpmLkNhcmROYW1lLFtFLkNhcmRDb2RlXTpmLkNhcmRDb2RlfSxUPXtlbXB0eTp7W2YuQ2FyZE51bWJlcl06e2ZpZWxkVHlwZTpcImNhcmROdW1iZXJcIixtZXNzYWdlOlwiQ3JlZGl0IGNhcmQgbnVtYmVyIGlzIHJlcXVpcmVkXCIsdHlwZTpcInJlcXVpcmVkXCJ9LFtmLkNhcmROdW1iZXJWZXJpZmljYXRpb25dOntmaWVsZFR5cGU6XCJjYXJkTnVtYmVyXCIsbWVzc2FnZTpcIkNyZWRpdCBjYXJkIG51bWJlciBpcyByZXF1aXJlZFwiLHR5cGU6XCJyZXF1aXJlZFwifSxbZi5DYXJkRXhwaXJ5XTp7ZmllbGRUeXBlOlwiY2FyZEV4cGlyeVwiLG1lc3NhZ2U6XCJFeHBpcmF0aW9uIGRhdGUgaXMgcmVxdWlyZWRcIix0eXBlOlwicmVxdWlyZWRcIn0sW2YuQ2FyZENvZGVdOntmaWVsZFR5cGU6XCJjYXJkQ29kZVwiLG1lc3NhZ2U6XCJDVlYgaXMgcmVxdWlyZWRcIix0eXBlOlwicmVxdWlyZWRcIn0sW2YuQ2FyZE5hbWVdOntmaWVsZFR5cGU6XCJjYXJkTmFtZVwiLG1lc3NhZ2U6XCJGdWxsIG5hbWUgaXMgcmVxdWlyZWRcIix0eXBlOlwicmVxdWlyZWRcIn19LGludmFsaWQ6e1tmLkNhcmROdW1iZXJdOntmaWVsZFR5cGU6XCJjYXJkTnVtYmVyXCIsbWVzc2FnZTpcIkNyZWRpdCBjYXJkIG51bWJlciBtdXN0IGJlIHZhbGlkXCIsdHlwZTpcImludmFsaWRfY2FyZF9udW1iZXJcIn0sW2YuQ2FyZE51bWJlclZlcmlmaWNhdGlvbl06e2ZpZWxkVHlwZTpcImNhcmROdW1iZXJcIixtZXNzYWdlOlwiQ3JlZGl0IGNhcmQgbnVtYmVyIG11c3QgYmUgdmFsaWRcIix0eXBlOlwiaW52YWxpZF9jYXJkX251bWJlclwifSxbZi5DYXJkRXhwaXJ5XTp7ZmllbGRUeXBlOlwiY2FyZEV4cGlyeVwiLG1lc3NhZ2U6XCJFeHBpcmF0aW9uIGRhdGUgbXVzdCBiZSBhIHZhbGlkIGZ1dHVyZSBkYXRlIGluIE1NIC8gWVkgZm9ybWF0XCIsdHlwZTpcImludmFsaWRfY2FyZF9leHBpcnlcIn0sW2YuQ2FyZENvZGVdOntmaWVsZFR5cGU6XCJjYXJkQ29kZVwiLG1lc3NhZ2U6XCJDVlYgbXVzdCBiZSB2YWxpZFwiLHR5cGU6XCJpbnZhbGlkX2NhcmRfY29kZVwifSxbZi5DYXJkTmFtZV06e2ZpZWxkVHlwZTpcImNhcmROYW1lXCIsbWVzc2FnZTpcIkZ1bGwgbmFtZSBpcyByZXF1aXJlZFwiLHR5cGU6XCJyZXF1aXJlZFwifX19O2NsYXNzIGp7Y29uc3RydWN0b3IoZSx0KXt0aGlzLl9uYW1lT25DYXJkSW5wdXQ9ZSx0aGlzLl9ob3N0ZWRJbnB1dFZhbGlkYXRvcj10fWluaXRpYWxpemUoZSx0KXt0aGlzLl9ibHVlU25hcFNkaz1lLHQmJih2KHQpP3RoaXMuX2hvc3RlZElucHV0VmFsaWRhdG9yLmluaXRpYWxpemUoKTpJKHQpJiZ0LmNhcmROdW1iZXJWZXJpZmljYXRpb24mJnRoaXMuX2hvc3RlZElucHV0VmFsaWRhdG9yLmluaXRpYWxpemVWYWxpZGF0aW9uRmllbGRzKCkpfWF0dGFjaChlLHQsbil7dmFyIGksYSxyLHMsbz10LmZvcm0se2ZpZWxkczpkfT1vLGM9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBhPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTthPGkubGVuZ3RoO2ErKyl0LmluZGV4T2YoaVthXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVthXSkmJihuW2lbYV1dPWVbaVthXV0pfXJldHVybiBufShvLFtcImZpZWxkc1wiXSk7cmV0dXJuIHZvaWQgMD09PW4mJihuPSExKSxpPXRoaXMsYT12b2lkIDAscz1mdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuX2dldEJsdWVTbmFwU2RrKCk7aWYoIXYoZCkmJiFJKGQpKXRocm93IG5ldyBtKFwiRmllbGQgb3B0aW9ucyBtdXN0IGJlIG9mIHR5cGUgSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcFwiKTtyZXR1cm4gdGhpcy5fb25WYWxpZGF0ZT1jLm9uVmFsaWRhdGUsdihkKSYmdGhpcy5fc2V0Q3VzdG9tQmx1ZVNuYXBBdHRyaWJ1dGVzKGQpLEkoZCkmJnRoaXMuX3NldEN1c3RvbVN0b3JlZENhcmRzQmx1ZVNuYXBBdHRyaWJ1dGVzKGQpLG5ldyBQcm9taXNlKGk9Pntjb25zdCBhPXRoaXMuX2dldEhvc3RlZFBheW1lbnRGaWVsZHNPcHRpb25zKGUsZCxjLGksbik7dC5ob3N0ZWRQYXltZW50RmllbGRzQ3JlYXRlKGEpLHYoZCkmJnRoaXMuX25hbWVPbkNhcmRJbnB1dC5hdHRhY2goYSxkLmNhcmROYW1lLmFjY2Vzc2liaWxpdHlMYWJlbCxkLmNhcmROYW1lLnBsYWNlaG9sZGVyKX0pfSxuZXcoKHI9dm9pZCAwKXx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXt0cnl7ZChzLm5leHQoZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIG8oZSl7dHJ5e2Qocy50aHJvdyhlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gZCh0KXt2YXIgaTt0LmRvbmU/ZSh0LnZhbHVlKTooaT10LnZhbHVlLGkgaW5zdGFuY2VvZiByP2k6bmV3IHIoZnVuY3Rpb24oZSl7ZShpKX0pKS50aGVuKG4sbyl9ZCgocz1zLmFwcGx5KGksYXx8W10pKS5uZXh0KCkpfSl9dmFsaWRhdGUoKXt2YXIgZTtjb25zdCB0PXRoaXMuX2hvc3RlZElucHV0VmFsaWRhdG9yLnZhbGlkYXRlKCk7aWYobnVsbD09PShlPXRoaXMuX29uVmFsaWRhdGUpfHx2b2lkIDA9PT1lfHxlLmNhbGwodGhpcyx0KSwhdC5pc1ZhbGlkKXtjb25zdCBlPU9iamVjdC5lbnRyaWVzKHQuZXJyb3JzKS5yZWR1Y2UoKGUsW3Qsbl0pPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse1t0XTpuLm1hcCgoe21lc3NhZ2U6ZSx0eXBlOnR9KT0+KHttZXNzYWdlOmUsdHlwZTp0fSkpfSkse30pO3Rocm93IG5ldyBEKGUpfXJldHVybiB0aGlzfXN1Ym1pdChlLHQ9ITEpe3JldHVybiBuZXcgUHJvbWlzZSgobixpKT0+dGhpcy5fZ2V0Qmx1ZVNuYXBTZGsoKS5ob3N0ZWRQYXltZW50RmllbGRzU3VibWl0RGF0YShlPT50aGlzLl9pc0JsdWVTbmFwRGlyZWN0Q2FsbGJhY2tFcnJvcihlKT9pKG5ldyBvKGUuc3RhdHVzQ29kZT09PU8uVEhSRUVfRFNfQVVUSF9GQUlMRUQ/ZS5lcnJvclswXS5lcnJvckRlc2NyaXB0aW9uOmBTdWJtaXNzaW9uIGZhaWxlZCB3aXRoIHN0YXR1czogJHtlLnN0YXR1c0NvZGV9IGFuZCBlcnJvcnM6ICR7SlNPTi5zdHJpbmdpZnkoZS5lcnJvcil9YCkpOm4oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUuY2FyZERhdGEpLHQ/e2NhcmRIb2xkZXJOYW1lOnRoaXMuX25hbWVPbkNhcmRJbnB1dC5nZXRWYWx1ZSgpfTp7fSkpLGUpKX1kZXRhY2goKXt0aGlzLl9uYW1lT25DYXJkSW5wdXQuZGV0YWNoKCl9X2lzQmx1ZVNuYXBEaXJlY3RDYWxsYmFja0Vycm9yKGUpe3JldHVyblwiZXJyb3JcImluIGV9X2dldEhvc3RlZFBheW1lbnRGaWVsZHNPcHRpb25zKGUsdCx7b25Gb2N1czpuLG9uQmx1cjppLG9uVmFsaWRhdGU6YSxvbkNhcmRUeXBlQ2hhbmdlOnIsb25FbnRlcjpzLHN0eWxlczpvfSxkLGMpe3ZhciB1O3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7dG9rZW46ZSxvbkZpZWxkRXZlbnRIYW5kbGVyOntzZXR1cENvbXBsZXRlOigpPT5kKCksb25Gb2N1czp0aGlzLl91c2V0VWlFdmVudENhbGxiYWNrKG4pLG9uQmx1cjp0aGlzLl91c2V0VWlFdmVudENhbGxiYWNrKGkpLG9uRXJyb3I6dGhpcy5faGFuZGxlRXJyb3IoYSksb25UeXBlOihlLHQpPT5udWxsPT1yP3ZvaWQgMDpyKHtjYXJkVHlwZTpTW3RdfSksb25FbnRlcjp0aGlzLl91c2V0VWlFdmVudENhbGxiYWNrKHMpLG9uVmFsaWQ6ZT0+bnVsbD09YT92b2lkIDA6YSh0aGlzLl9ob3N0ZWRJbnB1dFZhbGlkYXRvci52YWxpZGF0ZSh7dGFnSWQ6ZX0pKX19LHYodCkmJntjY25QbGFjZUhvbGRlcjp0LmNhcmROdW1iZXIucGxhY2Vob2xkZXJ8fFwiXCIsY3Z2UGxhY2VIb2xkZXI6KG51bGw9PT0odT10LmNhcmRDb2RlKXx8dm9pZCAwPT09dT92b2lkIDA6dS5wbGFjZWhvbGRlcil8fFwiXCIsZXhwUGxhY2VIb2xkZXI6dC5jYXJkRXhwaXJ5LnBsYWNlaG9sZGVyfHxcIk1NIC8gWVlcIn0pLG8mJntzdHlsZTp0aGlzLl9tYXBTdHlsZXMobyl9KSx7XCIzRFNcIjpjfSl9X21hcFN0eWxlcyh7ZGVmYXVsdDplLGVycm9yOm4sZm9jdXM6aX0pe3JldHVybiBPYmplY3QuZW50cmllcyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlJiZ7aW5wdXQ6ZX0pLG4mJntcIi5pbnZhbGlkXCI6bn0pLGkmJntcIjpmb2N1c1wiOml9KSkucmVkdWNlKChlLFtuLGldKT0+T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtbbl06T2JqZWN0LmVudHJpZXMoaSkucmVkdWNlKChlLFtuLGldKT0+T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtbdChuKV06aX0pLHt9KX0pLHt9KX1faGFuZGxlRXJyb3IoZSl7cmV0dXJuKHQsbixpLGEpPT57aWYobj09PU8uSU5WQUxJRF9PUl9FTVBUWSYmdCYmZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJltOLkVNUFRZLE4uSU5WQUxJRF0uaW5jbHVkZXMoZSl9KGkpKXJldHVybiBudWxsPT1lP3ZvaWQgMDplKHRoaXMuX2hvc3RlZElucHV0VmFsaWRhdG9yLnZhbGlkYXRlKHt0YWdJZDp0LGVycm9yRGVzY3JpcHRpb246aX0pKTt0aHJvdyBuZXcgbyhgQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoe3RhZ0lkOnQsZXJyb3JDb2RlOm4sZXJyb3JEZXNjcmlwdGlvbjppLGV2ZW50T3JpZ2luOmF9KX1gKX19X3VzZXRVaUV2ZW50Q2FsbGJhY2soZSl7cmV0dXJuIHQ9PntlJiZlKHtmaWVsZFR5cGU6TVt0XX0pfX1fZ2V0Qmx1ZVNuYXBTZGsoKXtyZXR1cm4gZCh0aGlzLl9ibHVlU25hcFNkaywoKT0+bmV3IGMoaS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKX1fc2V0Q3VzdG9tQmx1ZVNuYXBBdHRyaWJ1dGVzKGUpe2NvbnN0e2NhcmROdW1iZXI6dCxjYXJkRXhwaXJ5Om4sY2FyZENvZGU6aSxjYXJkTmFtZTphfT1lLHI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodC5jb250YWluZXJJZCkscz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChuLmNvbnRhaW5lcklkKSxvPWkmJmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGkuY29udGFpbmVySWQpLGQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYS5jb250YWluZXJJZCk7aWYoIShyJiZzJiZvJiZkKSl0aHJvdyBuZXcgbShcIlVuYWJsZSB0byBjcmVhdGUgaG9zdGVkIHBheW1lbnQgZmllbGRzIHRvIGludmFsaWQgSFRNTCBjb250YWluZXIgZWxlbWVudHMuXCIpO3IuZGF0YXNldC5ibHVlc25hcD1FLkNhcmROdW1iZXIscy5kYXRhc2V0LmJsdWVzbmFwPUUuQ2FyZEV4cGlyeSxvLmRhdGFzZXQuYmx1ZXNuYXA9RS5DYXJkQ29kZSxkLmRhdGFzZXQuYmx1ZXNuYXA9RS5DYXJkTmFtZX1fc2V0Q3VzdG9tU3RvcmVkQ2FyZHNCbHVlU25hcEF0dHJpYnV0ZXMoZSl7Y29uc3R7Y2FyZE51bWJlclZlcmlmaWNhdGlvbjp0LGNhcmRDb2RlVmVyaWZpY2F0aW9uOm59PWUsaT10JiZkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0LmNvbnRhaW5lcklkKSxhPW4mJmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG4uY29udGFpbmVySWQpOyhpfHxhKSYmKGkmJihpLmRhdGFzZXQuYmx1ZXNuYXA9RS5DYXJkTnVtYmVyKSxhJiYoYS5kYXRhc2V0LmJsdWVzbmFwPUUuQ2FyZENvZGUpKX19Y2xhc3Mga3tjb25zdHJ1Y3Rvcigpe3RoaXMuX2Vycm9ycz17fX1pbml0aWFsaXplKCl7dGhpcy5fZXJyb3JzPXtjYXJkTnVtYmVyOltULmVtcHR5LmNhcmROdW1iZXJdLGNhcmRFeHBpcnk6W1QuZW1wdHkuY2FyZEV4cGlyeV0sY2FyZENvZGU6W1QuZW1wdHkuY2FyZENvZGVdLGNhcmROYW1lOltULmVtcHR5LmNhcmROYW1lXX19aW5pdGlhbGl6ZVZhbGlkYXRpb25GaWVsZHMoKXt0aGlzLl9lcnJvcnM9e2NhcmROdW1iZXJWZXJpZmljYXRpb246W1QuZW1wdHkuY2FyZE51bWJlcl19fXZhbGlkYXRlKGUpe3JldHVybiBlJiZ0aGlzLl91cGRhdGVFcnJvcnMoZS50YWdJZCxlLmVycm9yRGVzY3JpcHRpb24pLHtpc1ZhbGlkOk9iamVjdC52YWx1ZXModGhpcy5fZXJyb3JzKS5ldmVyeShlPT4wPT09ZS5sZW5ndGgpLGVycm9yczp0aGlzLl9lcnJvcnN9fV91cGRhdGVFcnJvcnMoZSx0KXtjb25zdCBuPXRoaXMuX2Vycm9ycy5jYXJkTnVtYmVyVmVyaWZpY2F0aW9uP2YuQ2FyZE51bWJlclZlcmlmaWNhdGlvbjpNW2VdO3RoaXMuX2Vycm9yc1tuXT10P1tUW3RdW25dXTpbXX19Y2xhc3MgQXthdHRhY2goe3N0eWxlOmUsb25GaWVsZEV2ZW50SGFuZGxlcjp7b25Gb2N1czp0LG9uQmx1cjpuLG9uVmFsaWQ6aSxvbkVycm9yOmEsb25FbnRlcjpyfT17fX0scyxvKXt2YXIgZDt0aGlzLl9zdHlsZT1lLHRoaXMuX2NyZWF0ZSgpLHRoaXMuX2dldElucHV0KCkuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdGhpcy5faGFuZGxlRm9jdXModCkpLHRoaXMuX2dldElucHV0KCkuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIix0aGlzLl9oYW5kbGVCbHVyKG4saSxhKSksdGhpcy5fZ2V0SW5wdXQoKS5hZGRFdmVudExpc3RlbmVyKFwiZW50ZXJcIix0aGlzLl9oYW5kbGVFbnRlcihyKSkscyYmdGhpcy5fZ2V0SW5wdXQoKS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIscyksbyYmKHRoaXMuX2dldElucHV0KCkucGxhY2Vob2xkZXI9byksbnVsbD09PShkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJsdWVzbmFwPVwibm9jXCJdJykpfHx2b2lkIDA9PT1kfHxkLmFwcGVuZENoaWxkKHRoaXMuX2dldElucHV0KCkpfWdldFZhbHVlKCl7cmV0dXJuIHRoaXMuX2dldElucHV0KCkudmFsdWV9ZGV0YWNoKCl7dGhpcy5faW5wdXQmJih0aGlzLl9pbnB1dC5yZW1vdmUoKSx0aGlzLl9pbnB1dD12b2lkIDApfV9oYW5kbGVGb2N1cyhlKXtyZXR1cm4oKT0+e3ZhciB0O3RoaXMuX2FwcGx5U3R5bGVzKG51bGw9PT0odD10aGlzLl9zdHlsZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnRbXCI6Zm9jdXNcIl0pLG51bGw9PWV8fGUoRS5DYXJkTmFtZSl9fV9oYW5kbGVCbHVyKGUsdCxuKXtyZXR1cm4oe3RhcmdldDppfSk9Pnt2YXIgYSxyO251bGw9PWV8fGUoRS5DYXJkTmFtZSksaSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJigvXFx3ezEsMjAwfS8udGVzdChpLnZhbHVlKT8odGhpcy5fYXBwbHlTdHlsZXMobnVsbD09PShhPXRoaXMuX3N0eWxlKXx8dm9pZCAwPT09YT92b2lkIDA6YS5pbnB1dCksbnVsbD09dHx8dChFLkNhcmROYW1lKSk6KHRoaXMuX2FwcGx5U3R5bGVzKG51bGw9PT0ocj10aGlzLl9zdHlsZSl8fHZvaWQgMD09PXI/dm9pZCAwOnJbXCIuaW52YWxpZFwiXSksbnVsbD09bnx8bihFLkNhcmROYW1lLE8uSU5WQUxJRF9PUl9FTVBUWSxOLkVNUFRZLEMuT05fQkxVUikpKX19X2hhbmRsZUVudGVyKGUpe3JldHVybigpPT5udWxsPT1lP3ZvaWQgMDplKEUuQ2FyZE5hbWUpfV9hcHBseVN0eWxlcyhlPXt9KXtjb25zdCB0PXtjb2xvcjplLmNvbG9yLGZvbnRGYW1pbHk6ZVtcImZvbnQtZmFtaWx5XCJdLGZvbnRTaXplOmVbXCJmb250LXNpemVcIl0sZm9udFdlaWdodDplW1wiZm9udC13ZWlnaHRcIl19LG49T2JqZWN0LmtleXModCk7bi5ldmVyeShlPT5bXCJjb2xvclwiLFwiZm9udEZhbWlseVwiLFwiZm9udFNpemVcIixcImZvbnRXZWlnaHRcIl0uaW5jbHVkZXMoZSkpJiZuLmZvckVhY2goZT0+e3RbZV0mJih0aGlzLl9nZXRJbnB1dCgpLnN0eWxlW2VdPXRbZV18fFwiXCIpfSl9X2NvbmZpZ3VyZUlucHV0KCl7dGhpcy5fZ2V0SW5wdXQoKS5hdXRvY29tcGxldGU9XCJjYy1uYW1lXCIsdGhpcy5fZ2V0SW5wdXQoKS5pZD1FLkNhcmROYW1lLHRoaXMuX2dldElucHV0KCkuaW5wdXRNb2RlPVwidGV4dFwiLHRoaXMuX2dldElucHV0KCkubWF4TGVuZ3RoPTIwMCx0aGlzLl9nZXRJbnB1dCgpLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cInRyYW5zcGFyZW50XCIsdGhpcy5fZ2V0SW5wdXQoKS5zdHlsZS5ib3JkZXI9XCIwXCIsdGhpcy5fZ2V0SW5wdXQoKS5zdHlsZS5oZWlnaHQ9XCIxMDAlXCIsdGhpcy5fZ2V0SW5wdXQoKS5zdHlsZS5tYXJnaW49XCIwXCIsdGhpcy5fZ2V0SW5wdXQoKS5zdHlsZS5vdXRsaW5lPVwibm9uZVwiLHRoaXMuX2dldElucHV0KCkuc3R5bGUucGFkZGluZz1cIjBcIix0aGlzLl9nZXRJbnB1dCgpLnN0eWxlLndpZHRoPVwiMTAwJVwiLHRoaXMuX2dldElucHV0KCkudHlwZT1cInRleHRcIn1fZ2V0SW5wdXQoKXtyZXR1cm4gZCh0aGlzLl9pbnB1dCwoKT0+bmV3IGMoaS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKX1fY3JlYXRlKCl7dmFyIGU7dGhpcy5faW5wdXQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLHRoaXMuX2NvbmZpZ3VyZUlucHV0KCksdGhpcy5fYXBwbHlTdHlsZXMobnVsbD09PShlPXRoaXMuX3N0eWxlKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pbnB1dCl9fWNsYXNzIHggZXh0ZW5kcyBze2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuXCIpLHRoaXMubmFtZT1cIlBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yXCIsdGhpcy50eXBlPVwicGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlXCJ9fXZhciB6OyFmdW5jdGlvbihlKXtlLlBST0RVQ1RJT049XCJodHRwczovL3BheS5ibHVlc25hcC5jb20vd2ViLXNkay81L2JsdWVzbmFwLmpzXCIsZS5TQU5EQk9YPVwiaHR0cHM6Ly9zYW5kcGF5LmJsdWVzbmFwLmNvbS93ZWItc2RrLzUvYmx1ZXNuYXAuanNcIn0oenx8KHo9e30pKTtjbGFzcyBCe2NvbnN0cnVjdG9yKGUsdD13aW5kb3cpe3RoaXMuX3NjcmlwdExvYWRlcj1lLHRoaXMuX3dpbmRvdz10fWxvYWQoZT0hMSl7cmV0dXJuIHQ9dGhpcyxuPXZvaWQgMCxhPWZ1bmN0aW9uKigpe2lmKHRoaXMuX3dpbmRvdy5ibHVlc25hcClyZXR1cm4gdGhpcy5fd2luZG93LmJsdWVzbmFwO2lmKHlpZWxkIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkU2NyaXB0KGU/ei5TQU5EQk9YOnouUFJPRFVDVElPTiksIXRoaXMuX3dpbmRvdy5ibHVlc25hcCl0aHJvdyBuZXcgeDtyZXR1cm4gdGhpcy5fd2luZG93LmJsdWVzbmFwfSxuZXcoKGk9dm9pZCAwKXx8KGk9UHJvbWlzZSkpKGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gcyhlKXt0cnl7ZChhLm5leHQoZSkpfWNhdGNoKGUpe3IoZSl9fWZ1bmN0aW9uIG8oZSl7dHJ5e2QoYS50aHJvdyhlKSl9Y2F0Y2goZSl7cihlKX19ZnVuY3Rpb24gZCh0KXt2YXIgbjt0LmRvbmU/ZSh0LnZhbHVlKToobj10LnZhbHVlLG4gaW5zdGFuY2VvZiBpP246bmV3IGkoZnVuY3Rpb24oZSl7ZShuKX0pKS50aGVuKHMsbyl9ZCgoYT1hLmFwcGx5KHQsbnx8W10pKS5uZXh0KCkpfSk7dmFyIHQsbixpLGF9fWNvbnN0IEY9cih0PT5uZXcgUChuZXcgQihlKCkpLHQsbmV3IGoobmV3IEEsbmV3IGspLG5ldyBwKSxbe2lkOlwiY3JlZGl0X2NhcmRcIixnYXRld2F5OlwiYmx1ZXNuYXBkaXJlY3RcIn1dKTtjbGFzcyBVe2NvbnN0cnVjdG9yKGUpe3RoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZX1leGVjdXRlKGUpe3JldHVybiB0PXRoaXMsbj12b2lkIDAsYT1mdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuX2Zvcm1hdGVQYXltZW50UGF5bG9hZChlKTt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKCk7dHJ5e3lpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh0KX1jYXRjaChlKXtpZih0aGlzLl9pc0JsdWVTbmFwRGlyZWN0UmVkaXJlY3RSZXNwb25zZShlKSl7Y29uc3QgdD1lLmJvZHkucHJvdmlkZXJfZGF0YSYmSlNPTi5wYXJzZShlLmJvZHkucHJvdmlkZXJfZGF0YSk7bGV0IG49ZS5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkLmRhdGEucmVkaXJlY3RfdXJsO2lmKGZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4hMTtjb25zdCB0PWU7cmV0dXJuISF0Lm1lcmNoYW50aWQmJlwic3RyaW5nXCI9PXR5cGVvZiB0Lm1lcmNoYW50aWR9KHQpKXtjb25zdCBlPW5ldyBVUkxTZWFyY2hQYXJhbXModCkudG9TdHJpbmcoKTtuPWAke259JiR7ZX1gfXJldHVybiBuZXcgUHJvbWlzZSgoKT0+d2luZG93LmxvY2F0aW9uLnJlcGxhY2UobikpfXJldHVybiBQcm9taXNlLnJlamVjdChlKX19LG5ldygoaT12b2lkIDApfHwoaT1Qcm9taXNlKSkoZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBzKGUpe3RyeXtkKGEubmV4dChlKSl9Y2F0Y2goZSl7cihlKX19ZnVuY3Rpb24gbyhlKXt0cnl7ZChhLnRocm93KGUpKX1jYXRjaChlKXtyKGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIGk/bjpuZXcgaShmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4ocyxvKX1kKChhPWEuYXBwbHkodCxufHxbXSkpLm5leHQoKSl9KTt2YXIgdCxuLGksYX1pbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBnKX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9X2Zvcm1hdGVQYXltZW50UGF5bG9hZCh7cGF5bWVudDplfSl7aWYoIWUpdGhyb3cgbmV3IGgoW1wicGF5bWVudFwiXSk7cmV0dXJuIGUucGF5bWVudERhdGEmJmIoZS5wYXltZW50RGF0YSkmJnkoZS5wYXltZW50RGF0YSk/T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtwYXltZW50RGF0YTp7aW5zdHJ1bWVudElkOmUucGF5bWVudERhdGEuaW5zdHJ1bWVudElkLHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6ISFlLnBheW1lbnREYXRhLnNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnR9fSk6KHQ9ZS5wYXltZW50RGF0YSxCb29sZWFuKFwib2JqZWN0XCI9PXR5cGVvZiB0JiZudWxsIT09dCYmXCJhY2NvdW50TnVtYmVyXCJpbiB0JiZcImFjY291bnRUeXBlXCJpbiB0JiZcInNob3BwZXJQZXJtaXNzaW9uXCJpbiB0JiZcInJvdXRpbmdOdW1iZXJcImluIHQpP09iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7cGF5bWVudERhdGE6e2Zvcm1hdHRlZFBheWxvYWQ6e2VjcDpPYmplY3QuYXNzaWduKHthY2NvdW50X251bWJlcjplLnBheW1lbnREYXRhLmFjY291bnROdW1iZXIsYWNjb3VudF90eXBlOmUucGF5bWVudERhdGEuYWNjb3VudFR5cGUsc2hvcHBlcl9wZXJtaXNzaW9uOmUucGF5bWVudERhdGEuc2hvcHBlclBlcm1pc3Npb24scm91dGluZ19udW1iZXI6ZS5wYXltZW50RGF0YS5yb3V0aW5nTnVtYmVyfSxlLnBheW1lbnREYXRhLmNvbXBhbnlOYW1lP3tjb21wYW55X25hbWU6ZS5wYXltZW50RGF0YS5jb21wYW55TmFtZX06e30pLHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDplLnBheW1lbnREYXRhLnNob3VsZFNhdmVJbnN0cnVtZW50LHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OmUucGF5bWVudERhdGEuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudH19fSk6KG49ZS5wYXltZW50RGF0YSxCb29sZWFuKFwib2JqZWN0XCI9PXR5cGVvZiBuJiZudWxsIT09biYmXCJpYmFuXCJpbiBuJiZcImZpcnN0TmFtZVwiaW4gbiYmXCJsYXN0TmFtZVwiaW4gbiYmXCJzaG9wcGVyUGVybWlzc2lvblwiaW4gbik/T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUpLHtwYXltZW50RGF0YTp7Zm9ybWF0dGVkUGF5bG9hZDp7c2VwYV9kaXJlY3RfZGViaXQ6e2liYW46ZS5wYXltZW50RGF0YS5pYmFuLGZpcnN0X25hbWU6ZS5wYXltZW50RGF0YS5maXJzdE5hbWUsbGFzdF9uYW1lOmUucGF5bWVudERhdGEubGFzdE5hbWUsc2hvcHBlcl9wZXJtaXNzaW9uOmUucGF5bWVudERhdGEuc2hvcHBlclBlcm1pc3Npb259LHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDplLnBheW1lbnREYXRhLnNob3VsZFNhdmVJbnN0cnVtZW50LHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OmUucGF5bWVudERhdGEuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudH19fSk6ZnVuY3Rpb24oZSl7cmV0dXJuIEJvb2xlYW4oXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcImJpY1wiaW4gZSl9KGUucGF5bWVudERhdGEpP09iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7cGF5bWVudERhdGE6e2Zvcm1hdHRlZFBheWxvYWQ6e2lkZWFsOntiaWM6ZS5wYXltZW50RGF0YS5iaWN9fX19KTpmdW5jdGlvbihlKXtyZXR1cm4gQm9vbGVhbihcIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWUmJlwiaWJhblwiaW4gZSYmIShcImZpcnN0TmFtZVwiaW4gZSkmJiEoXCJsYXN0TmFtZVwiaW4gZSkmJiEoXCJzaG9wcGVyUGVybWlzc2lvblwiaW4gZSkpfShlLnBheW1lbnREYXRhKT9PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3BheW1lbnREYXRhOntmb3JtYXR0ZWRQYXlsb2FkOntwYXlfYnlfYmFuazp7aWJhbjplLnBheW1lbnREYXRhLmliYW59fX19KTp7bWV0aG9kSWQ6ZS5tZXRob2RJZH0pKTt2YXIgdCxufV9pc0JsdWVTbmFwRGlyZWN0UmVkaXJlY3RSZXNwb25zZShlKXt2YXIgdDtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuITE7Y29uc3Qgbj1lO2lmKCFuLmJvZHkpcmV0dXJuITE7Y29uc3QgaT1uLmJvZHk7cmV0dXJuXCJhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZFwiPT09aS5zdGF0dXMmJiEhKG51bGw9PT0odD1pLmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkKXx8dm9pZCAwPT09dD92b2lkIDA6dC5kYXRhLnJlZGlyZWN0X3VybCl9fWNvbnN0IFY9cihlPT5uZXcgVShlKSxbe2dhdGV3YXk6XCJibHVlc25hcGRpcmVjdFwifV0pO2NsYXNzIFJ7Y29uc3RydWN0b3IoZSl7Y29uc3QgdD1uZXcgUHJvbWlzZSgoZSx0KT0+e3RoaXMuY2FuY2VsPXR9KTt0aGlzLnByb21pc2U9UHJvbWlzZS5yYWNlKFtlLHRdKX19Y2xhc3MgTCBleHRlbmRzIHN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJQYXltZW50IHByb2Nlc3Mgd2FzIGNhbmNlbGxlZC5cIiksdGhpcy5uYW1lPVwiUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yXCIsdGhpcy50eXBlPVwicGF5bWVudF9jYW5jZWxsZWRcIn19dmFyIEg7IWZ1bmN0aW9uKGUpe2UuQUNLTk9XTEVER0U9XCJBQ0tOT1dMRURHRVwiLGUuRklOQUxJWkU9XCJGSU5BTElaRVwiLGUuSU5JVElBTElaRT1cIklOSVRJQUxJWkVcIn0oSHx8KEg9e30pKTtjb25zdCBxPUg7dmFyIFk9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24oYSxyKXtmdW5jdGlvbiBzKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7cihlKX19ZnVuY3Rpb24gbyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtyKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9hKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4ocyxvKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgJHtjb25zdHJ1Y3RvcihlKXt0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWV9ZXhlY3V0ZShlLHQpe3JldHVybiBZKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50OmF9PWU7aWYoIWEpdGhyb3cgbmV3IGgoW1wicGF5bWVudFwiXSk7aWYoIXRoaXMuX2luaXRpYWxpemVPcHRpb25zKXRocm93IG5ldyBjKGkuUGF5bWVudE5vdEluaXRpYWxpemVkKTtjb25zdHtvbkxvYWQ6cixzdHlsZTpzfT10aGlzLl9pbml0aWFsaXplT3B0aW9ucyxvPXRoaXMuX2NyZWF0ZUlmcmFtZShcImJsdWVzbmFwdjJfaG9zdGVkX3BheW1lbnRfcGFnZVwiLHMpLGQ9bmV3IFIobmV3IFByb21pc2UobikpO3IobywoKT0+ZC5jYW5jZWwobmV3IEwpKSx5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKGUsdCkseWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5pbml0aWFsaXplT2Zmc2l0ZVBheW1lbnQoe21ldGhvZElkOmEubWV0aG9kSWQsZ2F0ZXdheUlkOmEuZ2F0ZXdheUlkLHNob3VsZFNhdmVJbnN0cnVtZW50OiExLHRhcmdldDpvLm5hbWUscHJvbWlzZTpkLnByb21pc2V9KX0pfWZpbmFsaXplKGUpe3JldHVybiBZKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxuPXQuZ2V0T3JkZXIoKSxpPXQuZ2V0UGF5bWVudFN0YXR1cygpO2lmKCFufHxpIT09cS5BQ0tOT1dMRURHRSYmaSE9PXEuRklOQUxJWkUpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBnKTt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmZpbmFsaXplT3JkZXIoZSl9KX1pbml0aWFsaXplKGUpe3JldHVybiBZKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0aGlzLl9pbml0aWFsaXplT3B0aW9ucz1lJiZlLmJsdWVzbmFwdjIseWllbGQgUHJvbWlzZS5yZXNvbHZlKCl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9X2NyZWF0ZUlmcmFtZShlLHQpe2NvbnN0IG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtpZihuLnNldEF0dHJpYnV0ZShcInNhbmRib3hcIixcImFsbG93LXRvcC1uYXZpZ2F0aW9uIGFsbG93LXNjcmlwdHMgYWxsb3ctZm9ybXMgYWxsb3ctc2FtZS1vcmlnaW5cIiksbi5uYW1lPWUsdCl7Y29uc3R7Ym9yZGVyOmUsaGVpZ2h0Omksd2lkdGg6YX09dDtuLnN0eWxlLmJvcmRlcj1udWxsIT1lP2U6XCJcIixuLnN0eWxlLmhlaWdodD1udWxsIT1pP2k6XCJcIixuLnN0eWxlLndpZHRoPW51bGwhPWE/YTpcIlwifXJldHVybiBufX1jb25zdCBLPXIoZT0+bmV3ICQoZSksW3tnYXRld2F5OlwiYmx1ZXNuYXB2MlwifV0pO2V4cG9ydHtWIGFzIGNyZWF0ZUJsdWVTbmFwRGlyZWN0QVBNUGF5bWVudFN0cmF0ZWd5LEYgYXMgY3JlYXRlQmx1ZVNuYXBEaXJlY3RDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5LEsgYXMgY3JlYXRlQmx1ZVNuYXBWMlBheW1lbnRTdHJhdGVneX07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ibHVlc25hcC1kaXJlY3QuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/bluesnap-direct.js\n\n}");

/***/ })

}]);
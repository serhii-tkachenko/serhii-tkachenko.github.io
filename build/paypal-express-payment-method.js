"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["paypal-express-payment-method"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/paypal-express.js":
/*!******************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/paypal-express.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPaypalExpressButtonStrategy: () => (/* binding */ C),\n/* harmony export */   createPaypalExpressPaymentStrategy: () => (/* binding */ P)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"../checkout-sdk-js/node_modules/@bigcommerce/form-poster/lib/index.js\");\nvar i,a,s,r,o,c,d,l,u={};function p(e,t){return console.log(\"resolveIds\",t),Object.assign(e,{resolveIds:t})}u.d=(e,t)=>{for(var n in t)u.o(t,n)&&!u.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class h extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(i||(i={}));class y extends h{constructor(e){super(function(e){switch(e){case i.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case i.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case i.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case i.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case i.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case i.MissingCheckoutConfig:case i.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case i.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case i.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case i.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case i.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case i.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case i.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(a||(a={}));class m extends h{constructor(e){super(function(e){switch(e){case a.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case a.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case a.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case a.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}class g extends h{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}!function(e){e.HORIZONTAL=\"horizontal\",e.VERTICAL=\"vertical\"}(s||(s={})),function(e){e.SMALL=\"small\",e.MEDIUM=\"medium\",e.LARGE=\"large\",e.RESPONSIVE=\"responsive\"}(r||(r={})),function(e){e.GOLD=\"gold\",e.BLUE=\"blue\",e.SIlVER=\"silver\",e.BLACK=\"black\"}(o||(o={})),function(e){e.CHECKOUT=\"checkout\",e.PAY=\"pay\",e.BUYNOW=\"buynow\",e.PAYPAL=\"paypal\",e.CREDIT=\"credit\"}(c||(c={})),function(e){e.PILL=\"pill\",e.RECT=\"rect\"}(d||(d={})),function(e){e.ACKNOWLEDGE=\"ACKNOWLEDGE\",e.FINALIZE=\"FINALIZE\",e.INITIALIZE=\"INITIALIZE\"}(l||(l={}));var f=function(e,t,n,i){return new(n||(n=Promise))(function(a,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,o)}c((i=i.apply(e,t||[])).next())})};class I{constructor(e,t){this.paymentIntegrationService=e,this.scriptLoader=t,this.useRedirectFlow=!1,this.window=window}initialize(e){return f(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState();this.paymentMethod=t.getPaymentMethodOrThrow(e.methodId),this.useRedirectFlow=!0===(e.paypalexpress&&e.paypalexpress.useRedirectFlow);const n=this.paymentMethod.config.merchantId;if(!this.isInContextEnabled()||!n)throw new y(i.MissingPaymentMethod);const a=yield this.scriptLoader.loadPaypalSDK();this.paypalSdk=a,this.paypalSdk.checkout.setup(n,{button:\"paypal-button\",environment:this.paymentMethod.config.testMode?\"sandbox\":\"production\"})})}deinitialize(){return this.isInContextEnabled()&&this.paypalSdk&&(this.paypalSdk.checkout.closeFlow(),this.paypalSdk=void 0),Promise.resolve()}execute(e,n){return f(this,void 0,void 0,function*(){let i,s;const r=this.paypalSdk;if(!this.isAcknowledgedOrFinalized()){if(!this.isInContextEnabled()||this.useRedirectFlow)return i=yield this.paymentIntegrationService.submitOrder(e,n),s=i.getPaymentRedirectUrl(),s&&this.window.top&&(this.window.top.location.href=s),new Promise(lodash__WEBPACK_IMPORTED_MODULE_1__.noop);if(!r)throw new m(a.PaymentNotInitialized);r.checkout.initXO();try{i=yield this.paymentIntegrationService.submitOrder(e,n)}catch(e){return r.checkout.closeFlow(),Promise.reject(e)}return s=i.getPaymentRedirectUrl(),s&&r.checkout.startFlow(s),new Promise(lodash__WEBPACK_IMPORTED_MODULE_1__.noop)}yield this.paymentIntegrationService.submitOrder(e,n)})}finalize(e){return f(this,void 0,void 0,function*(){return this.paymentIntegrationService.getState().getOrder()&&this.isAcknowledgedOrFinalized()?(yield this.paymentIntegrationService.finalizeOrder(e),Promise.resolve()):Promise.reject(new g)})}isAcknowledgedOrFinalized(){const e=this.paymentIntegrationService.getState();return e.getPaymentStatus()===l.ACKNOWLEDGE||e.getPaymentStatus()===l.FINALIZE}isInContextEnabled(){return!(!this.paymentMethod||!this.paymentMethod.config.merchantId)}}class b extends h{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class w{constructor(e){this.scriptLoader=e,this.window=window}loadPaypalSDK(e=\"\"){return t=this,n=void 0,a=function*(){const t=Object.assign({async:!0,attributes:{\"data-merchant-id\":e}},e&&{attributes:{\"data-merchant-id\":e}});if(yield this.scriptLoader.loadScript(\"//www.paypalobjects.com/api/checkout.min.js\",t),!this.window.paypal)throw new b;return this.window.paypal},new((i=void 0)||(i=Promise))(function(e,s){function r(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(r,o)}c((a=a.apply(t,n||[])).next())});// removed by dead control flow\n var t, n, i, a; }}const P=p(t=>new I(t,new w((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())),[{id:\"paypalexpress\",type:\"PAYMENT_TYPE_HOSTED\"},{id:\"paypalexpresscredit\",type:\"PAYMENT_TYPE_HOSTED\"}]);class M extends h{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}const v={\"X-Checkout-SDK-Version\":\"1.820.0\"};var S=function(e,t,n,i){return new(n||(n=Promise))(function(a,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,o)}c((i=i.apply(e,t||[])).next())})};class E{constructor(e,t,n){this.paymentIntegrationService=e,this.paypalExpressScriptLoader=t,this.formPoster=n}initialize(e){return S(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId);if(!e.paypal)throw new M;if(!t.config.merchantId)throw new y(i.MissingPaymentMethod);const n=yield this.paypalExpressScriptLoader.loadPaypalSDK(t.config.merchantId);this.renderButton(e,n)})}deinitialize(){return Promise.resolve()}renderButton(e,t){const{containerId:n,methodId:a,paypal:s}=e,{allowCredit:r,clientId:o,onPaymentError:c,shouldProcessPayment:d,style:l}=s,u=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId);if(!u.config.merchantId)throw new y(i.MissingPaymentMethod);const p=u.config.merchantId,h=u.config.testMode?\"sandbox\":\"production\",m={[h]:o},g=t.FUNDING.CREDIT||\"credit\",f=r?[g]:[],I=r?[]:[g];return t.Button.render({env:h,client:m,commit:d,funding:{allowed:f,disallowed:I},style:this.getStyle(l),payment:(e,t)=>this.setupPayment(p,t,c),onAuthorize:(e,t)=>this.tokenizePayment(e,a,t,d)},n)}getStyle(e){const{color:t,fundingicons:n,label:i,layout:a,shape:s,size:o,tagline:c}=e||{};return{color:t,fundingicons:n,label:i,layout:a,shape:s||d.RECT,size:\"small\"===o?r.RESPONSIVE:o,tagline:c}}setupPayment(e,t,n){return S(this,void 0,void 0,function*(){if(!t)throw new m(a.CheckoutButtonNotInitialized);try{const n=yield this.paymentIntegrationService.loadDefaultCheckout(),{id:i}=n.getCartOrThrow(),a=n.getHost()||\"\";return(yield t.request.post(`${a}/api/storefront/payment/paypalexpress`,{merchantId:e,cartId:i},{headers:Object.assign({\"X-API-INTERNAL\":\"This API endpoint is for internal use only and may change in the future\"},v)})).id}catch(e){throw n&&e instanceof h&&n(e),e}})}tokenizePayment(e,t,n,s){return S(this,void 0,void 0,function*(){if(!n)throw new m(a.CheckoutButtonNotInitialized);if(!e.paymentID||!e.payerID)throw new y(i.MissingPayment);const r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),o=yield n.payment.get(e.paymentID);return this.formPoster.postForm(\"/checkout.php\",{payment_type:\"paypal\",provider:r.id,action:s?\"process_payment\":\"set_external_checkout\",paymentId:e.paymentID,payerId:e.payerID,payerInfo:JSON.stringify(o.payer.payer_info)})})}}const C=p(t=>new E(t,new w((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_2__.createFormPoster)()),[{id:\"paypalexpress\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9wYXlwYWwtZXhwcmVzcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFDQSxJQ0NZQSxFQ0FBQyxFQzhDQUMsRUFLQUMsRUFPQUMsRUFPQUMsRUFRQUMsRUFLQUMsRUgvRVJDLEVBQXNCLENBQUMsRUlDWixTQUFTQyxFQUNwQkMsRUFDQUMsR0FJQSxPQUZBQyxRQUFRQyxJQUFJLGFBQWNGLEdBRW5CRyxPQUFPQyxPQUFPTCxFQUFRLENBQUVDLGNBQ25DLENDUkFILEVBQW9CUSxFQUFJLENBQUNDLEVBQVNDLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWFYsRUFBb0JZLEVBQUVGLEVBQVlDLEtBQVNYLEVBQW9CWSxFQUFFSCxFQUFTRSxJQUM1RUwsT0FBT08sZUFBZUosRUFBU0UsRUFBSyxDQUFFRyxZQUFZLEVBQU1DLElBQUtMLEVBQVdDLE1DSjNFWCxFQUFvQlksRUFBSSxDQUFDSSxFQUFLQyxJQUFVWCxPQUFPWSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ09uRSxNQUFlSSxVQUFzQkMsTUFJaEQsV0FBQUMsQ0FBWUMsR0NYRCxJQUFxQ04sRURZNUNPLE1BQU1ELEdBQVcscUNBSnJCLEtBQUFFLEtBQU8sZ0JBQ1AsS0FBQUMsS0FBTyxXQ1R5Q1QsYURjWkEsVUNiaENaLE9BQU9zQixlQUNQdEIsT0FBT3NCLGVEWVFDLEtDWmVYLEdEWWZXLEtDVlJDLFVBQVlaLEVEWW9CLG1CQUE1QkksTUFBTVMsa0JBQ2JULE1BQU1TLGtCQUFrQkYsaUJBRXhCQSxLQUFLRyxNQUFRLElBQUlWLE1BQU1PLEtBQUtMLFNBQVNRLEtBRTdDLEdObkJKLFNBQVl4QyxHQUNSLHFEQUNBLGlDQUNBLHlDQUNBLGlEQUNBLHlDQUNBLHFEQUNBLG1DQUNBLCtDQUNBLHVDQUNBLHVDQUNBLDRDQUNBLDREQUNBLG9EQUNBLDhEQUNBLG9EQUNBLGtEQUNBLHVEQUNILENBbEJELENBQVlBLElBQUFBLEVBQW9CLEtB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QUNELE1BQU0sSUFBSTVGLEVBQW9CeEQsRUFBd0JtSyw4QkFHMUQsSUFBS1osRUFBS3FCLFlBQWNyQixFQUFLc0IsUUFDekIsTUFBTSxJQUFJckksRUFBaUJ6QyxFQUFxQm9ELGdCQUdwRCxNQUNNb0IsRUFEUW5DLEtBQUsyQiwwQkFBMEJPLFdBQ2pCRSx3QkFBd0JDLEdBRTlDcUcsUUFBdUIxQixFQUFRRixRQUFRNUgsSUFBSWlJLEVBQUtxQixXQUV0RCxPQUFPeEksS0FBS3NGLFdBQVdxRCxTQUFTLGdCQUFpQixDQUM3Q0MsYUFBYyxTQUNkQyxTQUFVMUcsRUFBYzhDLEdBQ3hCNkQsT0FBUWpELEVBQXVCLGtCQUFvQix3QkFDbkRrRCxVQUFXNUIsRUFBS3FCLFVBQ2hCUSxRQUFTN0IsRUFBS3NCLFFBQ2RRLFVBQVdDLEtBQUtDLFVBQVVULEVBQWVVLE1BQU1DLGFBRXZELEUsRUNyS0osTUFVQSxFQUFlakwsRUFSVnVELEdBQ00sSUFBSSxFQUNQQSxFQUNBLElBQUksRUFBMEJxRCwyRUFBQUEsSUFDOUJzRSwwRUFBQUEsSUFJNkQsQ0FBQyxDQUFFckUsR0FBSSxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ib290c3RyYXA/ZmZjYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9taXNzaW5nLWRhdGEtZXJyb3IudHM/YjdkYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW5pdGlhbGl6ZWQtZXJyb3IudHM/OGI0ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWV4cHJlc3MtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1leHByZXNzLXR5cGVzLnRzP2ZkMWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzPzk5NGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kPzllYTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvb3JkZXItZmluYWxpemF0aW9uLW5vdC1yZXF1aXJlZC1lcnJvci50cz9iNWExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtZXhwcmVzcy1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWV4cHJlc3MtcGF5bWVudC1zdHJhdGVneS50cz83ZmFlIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWNsaWVudC11bmF2YWlsYWJsZS1lcnJvci50cz9mOGVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtZXhwcmVzcy1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWV4cHJlc3Mtc2NyaXB0LWxvYWRlci50cz9mYWUyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtZXhwcmVzcy1pbnRlZ3JhdGlvbi9zcmMvY3JlYXRlLXBheXBhbC1leHByZXNzLXBheW1lbnQtc3RyYXRlZ3kudHM/Njc4NiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pbnZhbGlkLWFyZ3VtZW50LWVycm9yLnRzPzM5MjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2ludGVybmFsLWFwaS1oZWFkZXJzLnRzPzQxMTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L3Nkay12ZXJzaW9uLWhlYWRlcnMudHM/N2JmMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWV4cHJlc3MtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1leHByZXNzLWJ1dHRvbi1zdHJhdGVneS50cz9kZDQ3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtZXhwcmVzcy1pbnRlZ3JhdGlvbi9zcmMvY3JlYXRlLXBheXBhbC1leHByZXNzLWJ1dHRvbi1zdHJhdGVneS50cz8zZmZlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTWlzc2luZ0RhdGFFcnJvclR5cGUge1xuICAgIE1pc3NpbmdCaWxsaW5nQWRkcmVzcyxcbiAgICBNaXNzaW5nQ2FydCxcbiAgICBNaXNzaW5nQ2hlY2tvdXQsXG4gICAgTWlzc2luZ0NvbnNpZ25tZW50cyxcbiAgICBNaXNzaW5nQ3VzdG9tZXIsXG4gICAgTWlzc2luZ0NoZWNrb3V0Q29uZmlnLFxuICAgIE1pc3NpbmdPcmRlcixcbiAgICBNaXNzaW5nT3JkZXJDb25maWcsXG4gICAgTWlzc2luZ09yZGVySWQsXG4gICAgTWlzc2luZ1BheW1lbnQsXG4gICAgTWlzc2luZ1BheW1lbnRJZCxcbiAgICBNaXNzaW5nUGF5bWVudEluc3RydW1lbnQsXG4gICAgTWlzc2luZ1BheW1lbnRNZXRob2QsXG4gICAgTWlzc2luZ1BheW1lbnRSZWRpcmVjdFVybCxcbiAgICBNaXNzaW5nUGF5bWVudFN0YXR1cyxcbiAgICBNaXNzaW5nUGF5bWVudFRva2VuLFxuICAgIE1pc3NpbmdTaGlwcGluZ0FkZHJlc3MsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciB3aGVuIGRhdGEgdGhhdCBpcyBleHBlY3RlZCB0byBleGlzdCBpcyBtaXNzaW5nLiBVc3VhbGx5IGl0XG4gKiBpcyBkdWUgdG8gdGhlIGZhY3QgdGhhdCBjZXJ0YWluIGRhdGEgaGFzIG5vdCBiZWVuIHJldHJpZXZlZCBmcm9tIG9yIHNhdmVkIHRvXG4gKiB0aGUgc2VydmVyIHlldC4gQW5kIHN1Y2ggZGF0YSBpcyByZXF1aXJlZCB0byBwZXJmb3JtIGNlcnRhaW4gYWN0aW9ucy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlzc2luZ0RhdGFFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdNaXNzaW5nRGF0YUVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ21pc3NpbmdfZGF0YSc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTWlzc2luZ0RhdGFFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdCaWxsaW5nQWRkcmVzczpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBiaWxsaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NhcnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2FydCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ29uc2lnbm1lbnRzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbnNpZ25tZW50cyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2hlY2tvdXQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0N1c3RvbWVyOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGN1c3RvbWVyIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dENvbmZpZzpcbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJDb25maWc6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uZmlndXJhdGlvbiBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgSUQgaXMgdW5hdmFpbGFibGUgb3Igbm90IGdlbmVyYXRlZCB5ZXQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgdG9rZW4gcmVxdWlyZWQgdG8gc3VibWl0IGEgcGF5bWVudCBpcyBtaXNzaW5nLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IG1ldGhvZCBkYXRhIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBwcm9wZXJseSBjb25maWd1cmVkLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nU2hpcHBpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHNoaXBwaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUge1xuICAgIENoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQsXG4gICAgQ3VzdG9tZXJOb3RJbml0aWFsaXplZCxcbiAgICBQYXltZW50Tm90SW5pdGlhbGl6ZWQsXG4gICAgU2hpcHBpbmdOb3RJbml0aWFsaXplZCxcbiAgICBTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgYSBtZXRob2QgcmVxdWlyZXMgYSBjZXJ0YWluIGluaXRpYWxpemF0aW9uIGNhbGwgdG8gYmVcbiAqIG1hZGUgZmlyc3QuIFNvbWUgb2JqZWN0cyBjYW4gYmUgY29uc3RydWN0ZWQgYnV0IHRoZXkgY2Fubm90IGJlIHVzZWQgdW50aWwgYVxuICogc2VwYXJhdGUgaW5pdGlhbGl6YXRpb24gY2FsbCBpcyBtYWRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RJbml0aWFsaXplZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdEluaXRpYWxpemVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm90X2luaXRpYWxpemVkJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuQ3VzdG9tZXJOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY3VzdG9tZXIgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgc2hpcHBpbmcgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNoZWNrb3V0IHNwYW0gcHJvdGVjdGlvbiBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBjb21wb25lbnQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG4gICAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBQYXlwYWxGdW5kaW5nVHlwZUxpc3Qge1xuICAgIENBUkQ/OiBzdHJpbmc7XG4gICAgQ1JFRElUPzogc3RyaW5nO1xuICAgIFBBWVBBTD86IHN0cmluZztcbiAgICBQQVlMQVRFUj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxCdXR0b24ge1xuICAgIHJlbmRlcihvcHRpb25zOiBQYXlwYWxCdXR0b25PcHRpb25zLCBjb250YWluZXI6IHN0cmluZyk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsQnV0dG9uUmVuZGVyIHtcbiAgICByZW5kZXIoY29udGFpbmVyOiBzdHJpbmcpOiB2b2lkO1xuICAgIGlzRWxpZ2libGUoKTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdpbmdSZW5kZXIge1xuICAgIHJlbmRlcihjb250YWluZXI6IHN0cmluZyk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnaW5nT3B0aW9ucyB7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgcGxhY2VtZW50OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsQnV0dG9uT3B0aW9ucyB7XG4gICAgZW52Pzogc3RyaW5nO1xuICAgIGNvbW1pdD86IGJvb2xlYW47XG4gICAgc3R5bGU/OiBQYXlwYWxTdHlsZU9wdGlvbnM7XG4gICAgZnVuZGluZz86IFBheXBhbEZ1bmRpbmdUeXBlO1xuICAgIGZ1bmRpbmdTb3VyY2U/OiBzdHJpbmc7XG4gICAgY2xpZW50PzogUGF5cGFsQ2xpZW50VG9rZW47XG4gICAgcGF5bWVudD8oZGF0YT86IFBheXBhbEF1dGhvcml6ZURhdGEsIGFjdGlvbnM/OiBQYXlwYWxBY3Rpb25zKTogUHJvbWlzZTxhbnk+O1xuICAgIG9uQXV0aG9yaXplPyhkYXRhOiBQYXlwYWxBdXRob3JpemVEYXRhLCBhY3Rpb25zPzogUGF5cGFsQWN0aW9ucyk6IFByb21pc2U8YW55PjtcbiAgICBjcmVhdGVPcmRlcj8oZGF0YT86IFBheXBhbEF1dGhvcml6ZURhdGEsIGFjdGlvbnM/OiBQYXlwYWxBY3Rpb25zKTogUHJvbWlzZTxhbnk+O1xuICAgIG9uQXBwcm92ZT8oZGF0YT86IFBheXBhbEF1dGhvcml6ZURhdGEsIGFjdGlvbnM/OiBQYXlwYWxBY3Rpb25zKTogUHJvbWlzZTxhbnk+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbENsaWVudFRva2VuIHtcbiAgICBwcm9kdWN0aW9uPzogc3RyaW5nO1xuICAgIHNhbmRib3g/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsRnVuZGluZ1R5cGUge1xuICAgIGFsbG93ZWQ/OiBzdHJpbmdbXTtcbiAgICBkaXNhbGxvd2VkPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBlbnVtIFBheXBhbEJ1dHRvblN0eWxlTGF5b3V0T3B0aW9uIHtcbiAgICBIT1JJWk9OVEFMID0gJ2hvcml6b250YWwnLFxuICAgIFZFUlRJQ0FMID0gJ3ZlcnRpY2FsJyxcbn1cblxuZXhwb3J0IGVudW0gUGF5cGFsQnV0dG9uU3R5bGVTaXplT3B0aW9uIHtcbiAgICBTTUFMTCA9ICdzbWFsbCcsXG4gICAgTUVESVVNID0gJ21lZGl1bScsXG4gICAgTEFSR0UgPSAnbGFyZ2UnLFxuICAgIFJFU1BPTlNJVkUgPSAncmVzcG9uc2l2ZScsXG59XG5cbmV4cG9ydCBlbnVtIFBheXBhbEJ1dHRvblN0eWxlQ29sb3JPcHRpb24ge1xuICAgIEdPTEQgPSAnZ29sZCcsXG4gICAgQkxVRSA9ICdibHVlJyxcbiAgICBTSWxWRVIgPSAnc2lsdmVyJyxcbiAgICBCTEFDSyA9ICdibGFjaycsXG59XG5cbmV4cG9ydCBlbnVtIFBheXBhbEJ1dHRvblN0eWxlTGFiZWxPcHRpb24ge1xuICAgIENIRUNLT1VUID0gJ2NoZWNrb3V0JyxcbiAgICBQQVkgPSAncGF5JyxcbiAgICBCVVlOT1cgPSAnYnV5bm93JyxcbiAgICBQQVlQQUwgPSAncGF5cGFsJyxcbiAgICBDUkVESVQgPSAnY3JlZGl0Jyxcbn1cblxuZXhwb3J0IGVudW0gUGF5cGFsQnV0dG9uU3R5bGVTaGFwZU9wdGlvbiB7XG4gICAgUElMTCA9ICdwaWxsJyxcbiAgICBSRUNUID0gJ3JlY3QnLFxufVxuXG5leHBvcnQgZW51bSBQYXltZW50U3RhdHVzVHlwZXMge1xuICAgIEFDS05PV0xFREdFID0gJ0FDS05PV0xFREdFJyxcbiAgICBGSU5BTElaRSA9ICdGSU5BTElaRScsXG4gICAgSU5JVElBTElaRSA9ICdJTklUSUFMSVpFJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxTdHlsZU9wdGlvbnMge1xuICAgIGxheW91dD86IFBheXBhbEJ1dHRvblN0eWxlTGF5b3V0T3B0aW9uO1xuICAgIHNpemU/OiBQYXlwYWxCdXR0b25TdHlsZVNpemVPcHRpb247XG4gICAgY29sb3I/OiBQYXlwYWxCdXR0b25TdHlsZUNvbG9yT3B0aW9uO1xuICAgIGxhYmVsPzogUGF5cGFsQnV0dG9uU3R5bGVMYWJlbE9wdGlvbjtcbiAgICBzaGFwZT86IFBheXBhbEJ1dHRvblN0eWxlU2hhcGVPcHRpb247XG4gICAgdGFnbGluZT86IGJvb2xlYW47XG4gICAgZnVuZGluZ2ljb25zPzogYm9vbGVhbjtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsQWN0aW9ucyB7XG4gICAgcGF5bWVudDogUGF5cGFsUGF5bWVudEFjdGlvbnM7XG4gICAgcmVxdWVzdDogUGF5cGFsUmVxdWVzdEFjdGlvbnM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsUGF5bWVudEFjdGlvbnMge1xuICAgIGdldChpZDogc3RyaW5nKTogUHJvbWlzZTxQYXlwYWxQYXltZW50UGF5bG9hZD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsUmVxdWVzdEFjdGlvbnMge1xuICAgIHBvc3QodXJsOiBzdHJpbmcsIHBheWxvYWQ/OiBvYmplY3QsIG9wdGlvbnM/OiBvYmplY3QpOiBQcm9taXNlPHsgaWQ6IHN0cmluZyB9Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxUcmFuc2FjdGlvbiB7XG4gICAgYW1vdW50PzogUGF5cGFsQW1vdW50O1xuICAgIHBheWVlPzogUGF5cGFsUGF5ZWU7XG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gICAgbm90ZV90b19wYXllZT86IHN0cmluZztcbiAgICBpdGVtX2xpc3Q/OiBQYXlwYWxJdGVtTGlzdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxJdGVtTGlzdCB7XG4gICAgaXRlbXM/OiBQYXlwYWxJdGVtW107XG4gICAgc2hpcHBpbmdfYWRkcmVzcz86IFBheXBhbEFkZHJlc3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsSXRlbSB7XG4gICAgc2t1Pzogc3RyaW5nO1xuICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gICAgcXVhbnRpdHk6IHN0cmluZztcbiAgICBwcmljZTogc3RyaW5nO1xuICAgIGN1cnJlbmN5OiBzdHJpbmc7XG4gICAgdGF4Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEFtb3VudCB7XG4gICAgY3VycmVuY3k6IHN0cmluZztcbiAgICB0b3RhbDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbFBheWVyIHtcbiAgICBwYXllcl9pbmZvOiBvYmplY3Q7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsUGF5ZWUge1xuICAgIGVtYWlsPzogc3RyaW5nO1xuICAgIG1lcmNoYW50X2lkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEFkZHJlc3Mge1xuICAgIGxpbmUxOiBzdHJpbmc7XG4gICAgbGluZTI/OiBzdHJpbmc7XG4gICAgY2l0eT86IHN0cmluZztcbiAgICBjb3VudHJ5X2NvZGU6IHN0cmluZztcbiAgICBwb3N0YWxfY29kZT86IHN0cmluZztcbiAgICBzdGF0ZT86IHN0cmluZztcbiAgICBwaG9uZT86IHN0cmluZztcbiAgICB0eXBlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbFBheW1lbnRQYXlsb2FkIHtcbiAgICBwYXltZW50OiBQYXlwYWxQYXltZW50UGF5bG9hZDtcbiAgICBwYXllcjogUGF5cGFsUGF5ZXI7XG4gICAgdHJhbnNhY3Rpb25zPzogUGF5cGFsVHJhbnNhY3Rpb25bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxBdXRob3JpemVEYXRhIHtcbiAgICBwYXllcklkOiBzdHJpbmc7XG4gICAgcGF5bWVudElkPzogc3RyaW5nO1xuICAgIGJpbGxpbmdUb2tlbj86IHN0cmluZztcbiAgICAvLyB0aGUgUGF5UGFsIHNpZGUgb2YgdGhpbmdzIHVzZXMgdXBwZXJjYXNlIElEIGluc3RlYWQgb2YgY2FtZWwgY2FzZSBJZFxuICAgIHBheWVySUQ/OiBzdHJpbmc7XG4gICAgcGF5bWVudElEPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEV4cHJlc3NDaGVja291dCB7XG4gICAgaW5pdFhPKCk6IHZvaWQ7XG4gICAgc3RhcnRGbG93KHVybDogc3RyaW5nKTogdm9pZDtcbiAgICBjbG9zZUZsb3coKTogdm9pZDtcbiAgICBzZXR1cChtZXJjaGFudElkOiBzdHJpbmcsIG9wdGlvbnM6IFBheXBhbEV4cHJlc3NDaGVja291dE9wdGlvbnMpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEV4cHJlc3NDaGVja291dE9wdGlvbnMge1xuICAgIGJ1dHRvbjogc3RyaW5nO1xuICAgIGVudmlyb25tZW50OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsSG9zdFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgcGF5cGFsPzogUGF5cGFsU0RLO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbFNESyB7XG4gICAgQnV0dG9uOiBQYXlwYWxCdXR0b247XG4gICAgY2hlY2tvdXQ6IFBheXBhbEV4cHJlc3NDaGVja291dDtcbiAgICBGVU5ESU5HOiBQYXlwYWxGdW5kaW5nVHlwZUxpc3Q7XG4gICAgTWVzc2FnZXMob3B0aW9uczogTWVzc2FnaW5nT3B0aW9ucyk6IE1lc3NhZ2luZ1JlbmRlcjtcbiAgICBCdXR0b25zKG9wdGlvbnM6IFBheXBhbEJ1dHRvbk9wdGlvbnMpOiBQYXlwYWxCdXR0b25SZW5kZXI7XG59XG4iLCJpbXBvcnQgUmVzb2x2YWJsZU1vZHVsZSBmcm9tICcuL3Jlc29sdmFibGUtbW9kdWxlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9SZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPihcbiAgICBtb2R1bGU6IFRNb2R1bGUsXG4gICAgcmVzb2x2ZUlkczogVElkZW50aWZpZXJbXSxcbik6IFJlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+IHtcbiAgICBjb25zb2xlLmxvZygncmVzb2x2ZUlkcycsIHJlc29sdmVJZHMpO1xuXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obW9kdWxlLCB7IHJlc29sdmVJZHMgfSk7XG59XG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IEN1c3RvbUVycm9yIGZyb20gJy4vY3VzdG9tLWVycm9yJztcbmltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tICcuL3NldC1wcm90b3R5cGUtb2YnO1xuXG4vKipcbiAqIFRoaXMgZXJyb3IgdHlwZSBzaG91bGQgbm90IGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LiBJdCBpcyBhIGJhc2UgY2xhc3MgZm9yXG4gKiBhbGwgY3VzdG9tIGVycm9ycyB0aHJvd24gaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBDdXN0b21FcnJvciB7XG4gICAgbmFtZSA9ICdTdGFuZGFyZEVycm9yJztcbiAgICB0eXBlID0gJ3N0YW5kYXJkJztcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIG5ldy50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpLnN0YWNrO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0UHJvdG90eXBlT2Yob2JqZWN0OiBhbnksIHByb3RvdHlwZTogb2JqZWN0KSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqZWN0LCBwcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHRyeWluZyB0byBtYWtlIGFuIG9yZGVyIGZpbmFsaXphdGlvbiByZXF1ZXN0IGZvciBhXG4gKiBwYXltZW50IG1ldGhvZCB0aGF0IGRvZXMgbm90IHJlcXVpcmUgc3VjaCBwcm9jZWR1cmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgV2l0aFBheXBhbEV4cHJlc3NQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgfSBmcm9tICcuL3BheXBhbC1leHByZXNzLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcbmltcG9ydCBQYXlwYWxTY3JpcHRMb2FkZXIgZnJvbSAnLi9wYXlwYWwtZXhwcmVzcy1zY3JpcHQtbG9hZGVyJztcbmltcG9ydCB7IFBheW1lbnRTdGF0dXNUeXBlcywgUGF5cGFsSG9zdFdpbmRvdywgUGF5cGFsU0RLIH0gZnJvbSAnLi9wYXlwYWwtZXhwcmVzcy10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheXBhbEV4cHJlc3NQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgcGF5cGFsU2RrPzogUGF5cGFsU0RLO1xuICAgIHByaXZhdGUgcGF5bWVudE1ldGhvZD86IFBheW1lbnRNZXRob2Q7XG4gICAgcHJpdmF0ZSB1c2VSZWRpcmVjdEZsb3cgPSBmYWxzZTtcbiAgICBwcml2YXRlIHdpbmRvdzogUGF5cGFsSG9zdFdpbmRvdztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgc2NyaXB0TG9hZGVyOiBQYXlwYWxTY3JpcHRMb2FkZXIsXG4gICAgKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xuICAgIH1cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlwYWxFeHByZXNzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIHRoaXMucGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG9wdGlvbnMubWV0aG9kSWQpO1xuICAgICAgICB0aGlzLnVzZVJlZGlyZWN0RmxvdyA9XG4gICAgICAgICAgICAob3B0aW9ucy5wYXlwYWxleHByZXNzICYmIG9wdGlvbnMucGF5cGFsZXhwcmVzcy51c2VSZWRpcmVjdEZsb3cpID09PSB0cnVlO1xuXG4gICAgICAgIGNvbnN0IG1lcmNoYW50SWQgPSB0aGlzLnBheW1lbnRNZXRob2QuY29uZmlnLm1lcmNoYW50SWQ7XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzSW5Db250ZXh0RW5hYmxlZCgpIHx8ICFtZXJjaGFudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSBhd2FpdCB0aGlzLnNjcmlwdExvYWRlci5sb2FkUGF5cGFsU0RLKCk7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxTZGsgPSBwYXlwYWxTZGs7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxTZGsuY2hlY2tvdXQuc2V0dXAobWVyY2hhbnRJZCwge1xuICAgICAgICAgICAgYnV0dG9uOiAncGF5cGFsLWJ1dHRvbicsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogdGhpcy5wYXltZW50TWV0aG9kLmNvbmZpZy50ZXN0TW9kZSA/ICdzYW5kYm94JyA6ICdwcm9kdWN0aW9uJyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCkge1xuICAgICAgICBpZiAodGhpcy5pc0luQ29udGV4dEVuYWJsZWQoKSAmJiB0aGlzLnBheXBhbFNkaykge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxTZGsuY2hlY2tvdXQuY2xvc2VGbG93KCk7XG4gICAgICAgICAgICB0aGlzLnBheXBhbFNkayA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpIHtcbiAgICAgICAgbGV0IHN0YXRlOiBQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnM7XG4gICAgICAgIGxldCByZWRpcmVjdFVybDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBwYXlwYWwgPSB0aGlzLnBheXBhbFNkaztcblxuICAgICAgICBpZiAodGhpcy5pc0Fja25vd2xlZGdlZE9yRmluYWxpemVkKCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihwYXlsb2FkLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzSW5Db250ZXh0RW5hYmxlZCgpIHx8IHRoaXMudXNlUmVkaXJlY3RGbG93KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihwYXlsb2FkLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJlZGlyZWN0VXJsID0gc3RhdGUuZ2V0UGF5bWVudFJlZGlyZWN0VXJsKCk7XG5cbiAgICAgICAgICAgIGlmIChyZWRpcmVjdFVybCAmJiB0aGlzLndpbmRvdy50b3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLndpbmRvdy50b3AubG9jYXRpb24uaHJlZiA9IHJlZGlyZWN0VXJsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGhvbGQgZXhlY3V0aW9uIHNvIHRoZSBjb25zdW1lciBkb2VzIG5vdCByZWRpcmVjdCB1cyBzb21ld2hlcmUgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPG5ldmVyPihub29wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcGF5cGFsLmNoZWNrb3V0LmluaXRYTygpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzdGF0ZSA9IGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihwYXlsb2FkLCBvcHRpb25zKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHBheXBhbC5jaGVja291dC5jbG9zZUZsb3coKTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZGlyZWN0VXJsID0gc3RhdGUuZ2V0UGF5bWVudFJlZGlyZWN0VXJsKCk7XG5cbiAgICAgICAgaWYgKHJlZGlyZWN0VXJsKSB7XG4gICAgICAgICAgICBwYXlwYWwuY2hlY2tvdXQuc3RhcnRGbG93KHJlZGlyZWN0VXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIG5lZWQgdG8gaG9sZCBleGVjdXRpb24gc28gdGhlIGNvbnN1bWVyIGRvZXMgbm90IHJlZGlyZWN0IHVzIHNvbWV3aGVyZSBlbHNlXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxuZXZlcj4obm9vcCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZmluYWxpemUob3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucykge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBvcmRlciA9IHN0YXRlLmdldE9yZGVyKCk7XG5cbiAgICAgICAgaWYgKG9yZGVyICYmIHRoaXMuaXNBY2tub3dsZWRnZWRPckZpbmFsaXplZCgpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZmluYWxpemVPcmRlcihvcHRpb25zKTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0Fja25vd2xlZGdlZE9yRmluYWxpemVkKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50U3RhdHVzKCkgPT09IFBheW1lbnRTdGF0dXNUeXBlcy5BQ0tOT1dMRURHRSB8fFxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudFN0YXR1cygpID09PSBQYXltZW50U3RhdHVzVHlwZXMuRklOQUxJWkVcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzSW5Db250ZXh0RW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhKHRoaXMucGF5bWVudE1ldGhvZCAmJiB0aGlzLnBheW1lbnRNZXRob2QuY29uZmlnLm1lcmNoYW50SWQpO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGZhaWxzXG4gKiB0byBsb2FkLCBvciBmb3Igc29tZSByZWFzb24sIGl0IGlzIGluYWNjZXNzaWJsZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGlzIG5vdCBsb2FkZWQgb3IgcmVhZHkgdG8gYmUgdXNlZC4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X21ldGhvZF9jbGllbnRfdW5hdmFpbGFibGUnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IExvYWRTY3JpcHRPcHRpb25zLCBTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IFBheXBhbEhvc3RXaW5kb3csIFBheXBhbFNESyB9IGZyb20gJy4vcGF5cGFsLWV4cHJlc3MtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlwYWxTY3JpcHRMb2FkZXIge1xuICAgIHByaXZhdGUgd2luZG93OiBQYXlwYWxIb3N0V2luZG93O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcikge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkUGF5cGFsU0RLKG1lcmNoYW50SWQgPSAnJyk6IFByb21pc2U8UGF5cGFsU0RLPiB7XG4gICAgICAgIGNvbnN0IHNjcmlwdFNyYyA9ICcvL3d3dy5wYXlwYWxvYmplY3RzLmNvbS9hcGkvY2hlY2tvdXQubWluLmpzJztcbiAgICAgICAgY29uc3Qgb3B0aW9uczogTG9hZFNjcmlwdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHsgJ2RhdGEtbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkIH0sXG4gICAgICAgICAgICAuLi4obWVyY2hhbnRJZCAmJiB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczogeyAnZGF0YS1tZXJjaGFudC1pZCc6IG1lcmNoYW50SWQgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoc2NyaXB0U3JjLCBvcHRpb25zKTtcblxuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBQYXlwYWxFeHByZXNzUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWV4cHJlc3MtcGF5bWVudC1zdHJhdGVneSc7XG5pbXBvcnQgUGF5cGFsRXhwcmVzc1NjcmlwdExvYWRlciBmcm9tICcuL3BheXBhbC1leHByZXNzLXNjcmlwdC1sb2FkZXInO1xuXG5jb25zdCBjcmVhdGVQYXlwYWxFeHByZXNzUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFBheXBhbEV4cHJlc3NQYXltZW50U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICByZXR1cm4gbmV3IFBheXBhbEV4cHJlc3NQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIG5ldyBQYXlwYWxFeHByZXNzU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheXBhbEV4cHJlc3NQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsZXhwcmVzcycsIHR5cGU6ICdQQVlNRU5UX1RZUEVfSE9TVEVEJyB9LFxuICAgIHsgaWQ6ICdwYXlwYWxleHByZXNzY3JlZGl0JywgdHlwZTogJ1BBWU1FTlRfVFlQRV9IT1NURUQnIH0sXG5dKTtcbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgbWV0aG9kIGlzIHVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlXG4gKiBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIGFyZ3VtZW50cyBhY2NvcmRpbmcgdG8gdGhlaXIgcmVxdWlyZW1lbnRzLFxuICogaS5lLjogaWYgYW4gYXJndW1lbnQgaXMgbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52YWxpZEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0ludmFsaWQgYXJndW1lbnRzIGhhdmUgYmVlbiBwcm92aWRlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnSW52YWxpZEFyZ3VtZW50RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnaW52YWxpZF9hcmd1bWVudCc7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IElOVEVSTkFMX1VTRV9PTkxZID1cbiAgICAnVGhpcyBBUEkgZW5kcG9pbnQgaXMgZm9yIGludGVybmFsIHVzZSBvbmx5IGFuZCBtYXkgY2hhbmdlIGluIHRoZSBmdXR1cmUnO1xuIiwiZXhwb3J0IGNvbnN0IFNES19WRVJTSU9OX0hFQURFUlMgPSB7ICdYLUNoZWNrb3V0LVNESy1WZXJzaW9uJzogTElCUkFSWV9WRVJTSU9OIH07XG4iLCJpbXBvcnQgeyBGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcblxuaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgSU5URVJOQUxfVVNFX09OTFksXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICBTdGFuZGFyZEVycm9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgV2l0aFBheXBhbEV4cHJlc3NCdXR0b25Jbml0aWFsaXplT3B0aW9ucyB9IGZyb20gJy4vcGF5cGFsLWV4cHJlc3MtYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5pbXBvcnQgUGF5cGFsU2NyaXB0TG9hZGVyIGZyb20gJy4vcGF5cGFsLWV4cHJlc3Mtc2NyaXB0LWxvYWRlcic7XG5pbXBvcnQge1xuICAgIFBheXBhbEFjdGlvbnMsXG4gICAgUGF5cGFsQXV0aG9yaXplRGF0YSxcbiAgICBQYXlwYWxCdXR0b25TdHlsZVNoYXBlT3B0aW9uLFxuICAgIFBheXBhbEJ1dHRvblN0eWxlU2l6ZU9wdGlvbixcbiAgICBQYXlwYWxDbGllbnRUb2tlbixcbiAgICBQYXlwYWxTREssXG4gICAgUGF5cGFsU3R5bGVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1leHByZXNzLXR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5cGFsQnV0dG9uU3RyYXRlZ3kgaW1wbGVtZW50cyBDaGVja291dEJ1dHRvblN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbEV4cHJlc3NTY3JpcHRMb2FkZXI6IFBheXBhbFNjcmlwdExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSBmb3JtUG9zdGVyOiBGb3JtUG9zdGVyLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5cGFsRXhwcmVzc0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cob3B0aW9ucy5tZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFvcHRpb25zLnBheXBhbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheW1lbnRNZXRob2QuY29uZmlnLm1lcmNoYW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheXBhbFNESyA9IGF3YWl0IHRoaXMucGF5cGFsRXhwcmVzc1NjcmlwdExvYWRlci5sb2FkUGF5cGFsU0RLKFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5jb25maWcubWVyY2hhbnRJZCxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihvcHRpb25zLCBwYXlwYWxTREspO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBvcHRpb25zOiBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheXBhbEV4cHJlc3NCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgcGF5cGFsU0RLOiBQYXlwYWxTREssXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVySWQsIG1ldGhvZElkLCBwYXlwYWwgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHsgYWxsb3dDcmVkaXQsIGNsaWVudElkLCBvblBheW1lbnRFcnJvciwgc2hvdWxkUHJvY2Vzc1BheW1lbnQsIHN0eWxlIH0gPSBwYXlwYWw7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG9wdGlvbnMubWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5bWVudE1ldGhvZC5jb25maWcubWVyY2hhbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWVyY2hhbnRJZCA9IHBheW1lbnRNZXRob2QuY29uZmlnLm1lcmNoYW50SWQ7XG4gICAgICAgIGNvbnN0IGVudiA9IHBheW1lbnRNZXRob2QuY29uZmlnLnRlc3RNb2RlID8gJ3NhbmRib3gnIDogJ3Byb2R1Y3Rpb24nO1xuICAgICAgICBjb25zdCBjbGllbnRUb2tlbjogUGF5cGFsQ2xpZW50VG9rZW4gPSB7IFtlbnZdOiBjbGllbnRJZCB9O1xuICAgICAgICBjb25zdCBmdW5kaW5nQ3JlZGl0T3B0aW9uID0gcGF5cGFsU0RLLkZVTkRJTkcuQ1JFRElUIHx8ICdjcmVkaXQnO1xuICAgICAgICBjb25zdCBhbGxvd2VkU291cmNlcyA9IGFsbG93Q3JlZGl0ID8gW2Z1bmRpbmdDcmVkaXRPcHRpb25dIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FsbG93ZWRTb3VyY2VzID0gIWFsbG93Q3JlZGl0ID8gW2Z1bmRpbmdDcmVkaXRPcHRpb25dIDogW107XG5cbiAgICAgICAgcmV0dXJuIHBheXBhbFNESy5CdXR0b24ucmVuZGVyKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGVudixcbiAgICAgICAgICAgICAgICBjbGllbnQ6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgICAgIGNvbW1pdDogc2hvdWxkUHJvY2Vzc1BheW1lbnQsXG4gICAgICAgICAgICAgICAgZnVuZGluZzoge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd2VkOiBhbGxvd2VkU291cmNlcyxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWxsb3dlZDogZGlzYWxsb3dlZFNvdXJjZXMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdHlsZTogdGhpcy5nZXRTdHlsZShzdHlsZSksXG4gICAgICAgICAgICAgICAgcGF5bWVudDogKF8sIGFjdGlvbnMpID0+IHRoaXMuc2V0dXBQYXltZW50KG1lcmNoYW50SWQsIGFjdGlvbnMsIG9uUGF5bWVudEVycm9yKSxcbiAgICAgICAgICAgICAgICBvbkF1dGhvcml6ZTogKGRhdGEsIGFjdGlvbnMpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW5pemVQYXltZW50KGRhdGEsIG1ldGhvZElkLCBhY3Rpb25zLCBzaG91bGRQcm9jZXNzUGF5bWVudCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udGFpbmVySWQsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRTdHlsZShzdHlsZT86IE9taXQ8UGF5cGFsU3R5bGVPcHRpb25zLCAnaGVpZ2h0Jz4pOiBQYXlwYWxTdHlsZU9wdGlvbnMge1xuICAgICAgICBjb25zdCB7IGNvbG9yLCBmdW5kaW5naWNvbnMsIGxhYmVsLCBsYXlvdXQsIHNoYXBlLCBzaXplLCB0YWdsaW5lIH0gPSBzdHlsZSB8fCB7fTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29sb3IsXG4gICAgICAgICAgICBmdW5kaW5naWNvbnMsXG4gICAgICAgICAgICBsYWJlbCxcbiAgICAgICAgICAgIGxheW91dCxcbiAgICAgICAgICAgIHNoYXBlOiBzaGFwZSB8fCBQYXlwYWxCdXR0b25TdHlsZVNoYXBlT3B0aW9uLlJFQ1QsXG4gICAgICAgICAgICBzaXplOiBzaXplID09PSAnc21hbGwnID8gUGF5cGFsQnV0dG9uU3R5bGVTaXplT3B0aW9uLlJFU1BPTlNJVkUgOiBzaXplLFxuICAgICAgICAgICAgdGFnbGluZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNldHVwUGF5bWVudChcbiAgICAgICAgbWVyY2hhbnRJZDogc3RyaW5nLFxuICAgICAgICBhY3Rpb25zPzogUGF5cGFsQWN0aW9ucyxcbiAgICAgICAgb25FcnJvcj86IChlcnJvcjogU3RhbmRhcmRFcnJvcikgPT4gdm9pZCxcbiAgICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBpZiAoIWFjdGlvbnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLkNoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKTtcbiAgICAgICAgICAgIGNvbnN0IHsgaWQ6IGNhcnRJZCB9ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgICAgIGNvbnN0IGhvc3QgPSBzdGF0ZS5nZXRIb3N0KCkgfHwgJyc7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRSZXF1ZXN0ID0gYXdhaXQgYWN0aW9ucy5yZXF1ZXN0LnBvc3QoXG4gICAgICAgICAgICAgICAgYCR7aG9zdH0vYXBpL3N0b3JlZnJvbnQvcGF5bWVudC9wYXlwYWxleHByZXNzYCxcbiAgICAgICAgICAgICAgICB7IG1lcmNoYW50SWQsIGNhcnRJZCB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1gtQVBJLUlOVEVSTkFMJzogSU5URVJOQUxfVVNFX09OTFksXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5TREtfVkVSU0lPTl9IRUFERVJTLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gcGF5bWVudFJlcXVlc3QuaWQ7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAob25FcnJvciAmJiBlcnJvciBpbnN0YW5jZW9mIFN0YW5kYXJkRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHRva2VuaXplUGF5bWVudChcbiAgICAgICAgZGF0YTogUGF5cGFsQXV0aG9yaXplRGF0YSxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYWN0aW9ucz86IFBheXBhbEFjdGlvbnMsXG4gICAgICAgIHNob3VsZFByb2Nlc3NQYXltZW50PzogYm9vbGVhbixcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFhY3Rpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5DaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZGF0YS5wYXltZW50SUQgfHwgIWRhdGEucGF5ZXJJRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBnZXRQYXltZW50RGF0YSA9IGF3YWl0IGFjdGlvbnMucGF5bWVudC5nZXQoZGF0YS5wYXltZW50SUQpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1Qb3N0ZXIucG9zdEZvcm0oJy9jaGVja291dC5waHAnLCB7XG4gICAgICAgICAgICBwYXltZW50X3R5cGU6ICdwYXlwYWwnLFxuICAgICAgICAgICAgcHJvdmlkZXI6IHBheW1lbnRNZXRob2QuaWQsXG4gICAgICAgICAgICBhY3Rpb246IHNob3VsZFByb2Nlc3NQYXltZW50ID8gJ3Byb2Nlc3NfcGF5bWVudCcgOiAnc2V0X2V4dGVybmFsX2NoZWNrb3V0JyxcbiAgICAgICAgICAgIHBheW1lbnRJZDogZGF0YS5wYXltZW50SUQsXG4gICAgICAgICAgICBwYXllcklkOiBkYXRhLnBheWVySUQsXG4gICAgICAgICAgICBwYXllckluZm86IEpTT04uc3RyaW5naWZ5KGdldFBheW1lbnREYXRhLnBheWVyLnBheWVyX2luZm8pLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcbmltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBQYXlwYWxFeHByZXNzQnV0dG9uU3RyYXRlZ3ksIFBheXBhbEV4cHJlc3NTY3JpcHRMb2FkZXIgfSBmcm9tICcuL2luZGV4JztcblxuY29uc3QgY3JlYXRlUGF5cGFsRXhwcmVzc0J1dHRvblN0cmF0ZWd5OiBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlwYWxFeHByZXNzQnV0dG9uU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT4ge1xuICAgIHJldHVybiBuZXcgUGF5cGFsRXhwcmVzc0J1dHRvblN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBuZXcgUGF5cGFsRXhwcmVzc1NjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSksXG4gICAgICAgIGNyZWF0ZUZvcm1Qb3N0ZXIoKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheXBhbEV4cHJlc3NCdXR0b25TdHJhdGVneSwgW3sgaWQ6ICdwYXlwYWxleHByZXNzJyB9XSk7XG4iXSwibmFtZXMiOlsiTWlzc2luZ0RhdGFFcnJvclR5cGUiLCJOb3RJbml0aWFsaXplZEVycm9yVHlwZSIsIlBheXBhbEJ1dHRvblN0eWxlTGF5b3V0T3B0aW9uIiwiUGF5cGFsQnV0dG9uU3R5bGVTaXplT3B0aW9uIiwiUGF5cGFsQnV0dG9uU3R5bGVDb2xvck9wdGlvbiIsIlBheXBhbEJ1dHRvblN0eWxlTGFiZWxPcHRpb24iLCJQYXlwYWxCdXR0b25TdHlsZVNoYXBlT3B0aW9uIiwiUGF5bWVudFN0YXR1c1R5cGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInRvUmVzb2x2YWJsZU1vZHVsZSIsIm1vZHVsZSIsInJlc29sdmVJZHMiLCJjb25zb2xlIiwibG9nIiwiT2JqZWN0IiwiYXNzaWduIiwiZCIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTdGFuZGFyZEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJzdXBlciIsIm5hbWUiLCJ0eXBlIiwic2V0UHJvdG90eXBlT2YiLCJ0aGlzIiwiX19wcm90b19fIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJzdGFjayIsIk1pc3NpbmdEYXRhRXJyb3IiLCJzdWJ0eXBlIiwiTWlzc2luZ0JpbGxpbmdBZGRyZXNzIiwiTWlzc2luZ0NhcnQiLCJNaXNzaW5nQ29uc2lnbm1lbnRzIiwiTWlzc2luZ0NoZWNrb3V0IiwiTWlzc2luZ0N1c3RvbWVyIiwiTWlzc2luZ0NoZWNrb3V0Q29uZmlnIiwiTWlzc2luZ09yZGVyQ29uZmlnIiwiTWlzc2luZ09yZGVyIiwiTWlzc2luZ09yZGVySWQiLCJNaXNzaW5nUGF5bWVudCIsIk1pc3NpbmdQYXltZW50VG9rZW4iLCJNaXNzaW5nUGF5bWVudE1ldGhvZCIsIk1pc3NpbmdTaGlwcGluZ0FkZHJlc3MiLCJnZXRFcnJvck1lc3NhZ2UiLCJOb3RJbml0aWFsaXplZEVycm9yIiwiQ3VzdG9tZXJOb3RJbml0aWFsaXplZCIsIlBheW1lbnROb3RJbml0aWFsaXplZCIsIlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQiLCJTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiUGF5cGFsRXhwcmVzc1BheW1lbnRTdHJhdGVneSIsInBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJzY3JpcHRMb2FkZXIiLCJ1c2VSZWRpcmVjdEZsb3ciLCJ3aW5kb3ciLCJpbml0aWFsaXplIiwib3B0aW9ucyIsInN0YXRlIiwiZ2V0U3RhdGUiLCJwYXltZW50TWV0aG9kIiwiZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3ciLCJtZXRob2RJZCIsInBheXBhbGV4cHJlc3MiLCJtZXJjaGFudElkIiwiY29uZmlnIiwiaXNJbkNvbnRleHRFbmFibGVkIiwicGF5cGFsU2RrIiwibG9hZFBheXBhbFNESyIsImNoZWNrb3V0Iiwic2V0dXAiLCJidXR0b24iLCJlbnZpcm9ubWVudCIsInRlc3RNb2RlIiwiZGVpbml0aWFsaXplIiwiY2xvc2VGbG93IiwidW5kZWZpbmVkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJleGVjdXRlIiwicGF5bG9hZCIsInJlZGlyZWN0VXJsIiwicGF5cGFsIiwiaXNBY2tub3dsZWRnZWRPckZpbmFsaXplZCIsInN1Ym1pdE9yZGVyIiwiZ2V0UGF5bWVudFJlZGlyZWN0VXJsIiwidG9wIiwibG9jYXRpb24iLCJocmVmIiwibm9vcCIsImluaXRYTyIsImVycm9yIiwicmVqZWN0Iiwic3RhcnRGbG93IiwiZmluYWxpemUiLCJnZXRPcmRlciIsImZpbmFsaXplT3JkZXIiLCJnZXRQYXltZW50U3RhdHVzIiwiQUNLTk9XTEVER0UiLCJGSU5BTElaRSIsIlBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIiwiUGF5cGFsU2NyaXB0TG9hZGVyIiwiYXN5bmMiLCJhdHRyaWJ1dGVzIiwibG9hZFNjcmlwdCIsImdldFNjcmlwdExvYWRlciIsImlkIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJTREtfVkVSU0lPTl9IRUFERVJTIiwiUGF5cGFsQnV0dG9uU3RyYXRlZ3kiLCJwYXlwYWxFeHByZXNzU2NyaXB0TG9hZGVyIiwiZm9ybVBvc3RlciIsInBheXBhbFNESyIsInJlbmRlckJ1dHRvbiIsImNvbnRhaW5lcklkIiwiYWxsb3dDcmVkaXQiLCJjbGllbnRJZCIsIm9uUGF5bWVudEVycm9yIiwic2hvdWxkUHJvY2Vzc1BheW1lbnQiLCJzdHlsZSIsImVudiIsImNsaWVudFRva2VuIiwiZnVuZGluZ0NyZWRpdE9wdGlvbiIsIkZVTkRJTkciLCJDUkVESVQiLCJhbGxvd2VkU291cmNlcyIsImRpc2FsbG93ZWRTb3VyY2VzIiwiQnV0dG9uIiwicmVuZGVyIiwiY2xpZW50IiwiY29tbWl0IiwiZnVuZGluZyIsImFsbG93ZWQiLCJkaXNhbGxvd2VkIiwiZ2V0U3R5bGUiLCJwYXltZW50IiwiXyIsImFjdGlvbnMiLCJzZXR1cFBheW1lbnQiLCJvbkF1dGhvcml6ZSIsImRhdGEiLCJ0b2tlbml6ZVBheW1lbnQiLCJjb2xvciIsImZ1bmRpbmdpY29ucyIsImxhYmVsIiwibGF5b3V0Iiwic2hhcGUiLCJzaXplIiwidGFnbGluZSIsIlJFQ1QiLCJSRVNQT05TSVZFIiwib25FcnJvciIsIkNoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQiLCJsb2FkRGVmYXVsdENoZWNrb3V0IiwiY2FydElkIiwiZ2V0Q2FydE9yVGhyb3ciLCJob3N0IiwiZ2V0SG9zdCIsInJlcXVlc3QiLCJwb3N0IiwiaGVhZGVycyIsInBheW1lbnRJRCIsInBheWVySUQiLCJnZXRQYXltZW50RGF0YSIsInBvc3RGb3JtIiwicGF5bWVudF90eXBlIiwicHJvdmlkZXIiLCJhY3Rpb24iLCJwYXltZW50SWQiLCJwYXllcklkIiwicGF5ZXJJbmZvIiwiSlNPTiIsInN0cmluZ2lmeSIsInBheWVyIiwicGF5ZXJfaW5mbyIsImNyZWF0ZUZvcm1Qb3N0ZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/paypal-express.js\n\n}");

/***/ }),

/***/ "./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx":
/*!***************************************************************************************!*\
  !*** ./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/memoize */ \"./node_modules/@bigcommerce/memoize/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isAccountInstrument/isAccountInstrument.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentFeatureAvailable/isInstrumentFeatureAvailable.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/storedInstrument/AccountInstrumentFieldset/AccountInstrumentFieldset.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/storedInstrument/StoreInstrumentFieldset/StoreInstrumentFieldset.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/loading/LoadingOverlay.tsx\");\n\n\n\n\n\n\nfunction getHostedPaymentMethodDerivedProps(props) {\n    const filterAccountInstruments = (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_1__.memoizeOne)((instruments = []) => instruments.filter(_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"]));\n    const filterTrustedInstruments = (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_1__.memoizeOne)((instruments = []) => instruments.filter(({ trustedShippingAddress }) => trustedShippingAddress));\n    const { checkoutService, checkoutState, isUsingMultiShipping = false, method } = props;\n    const { data: { getCart, getConfig, getCustomer, getInstruments, isPaymentDataRequired, isPaymentDataSubmitted, }, statuses: { isLoadingInstruments }, } = checkoutState;\n    const cart = getCart();\n    const config = getConfig();\n    const customer = getCustomer();\n    if (!config || !cart || !customer) {\n        throw new Error('Unable to get checkout');\n    }\n    const currentMethodInstruments = filterAccountInstruments(getInstruments(method));\n    const trustedInstruments = filterTrustedInstruments(currentMethodInstruments);\n    return {\n        instruments: trustedInstruments,\n        isNewAddress: trustedInstruments.length === 0 && currentMethodInstruments.length > 0,\n        isInstrumentFeatureAvailable: !isPaymentDataSubmitted(method.id, method.gateway) &&\n            (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({\n                config,\n                customer,\n                isUsingMultiShipping,\n                paymentMethod: method,\n            }),\n        isLoadingInstruments: isLoadingInstruments(),\n        isPaymentDataRequired: isPaymentDataRequired(),\n        loadInstruments: checkoutService.loadInstruments,\n    };\n}\nconst HostedPaymentMethodComponent = (props) => {\n    const { description, isInitializing = false, initializePayment, method, onUnhandledError = lodash__WEBPACK_IMPORTED_MODULE_2__.noop, deinitializePayment, } = props;\n    const [isAddingNewInstrument, setIsAddingNewInstrument] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const [selectedInstrument, setSelectedInstrument] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();\n    const derivedProps = getHostedPaymentMethodDerivedProps(props);\n    const { isLoadingInstruments, instruments, isNewAddress, isInstrumentFeatureAvailable: isInstrumentFeatureAvailableProp, loadInstruments, } = derivedProps;\n    const getDefaultInstrument = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n        if (isAddingNewInstrument || !instruments.length) {\n            return;\n        }\n        return (0,lodash__WEBPACK_IMPORTED_MODULE_2__.find)(instruments, { defaultInstrument: true }) || instruments[0];\n    }, [isAddingNewInstrument, instruments]);\n    const handleUseNewInstrument = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n        setIsAddingNewInstrument(true);\n        setSelectedInstrument(undefined);\n    }, []);\n    const handleSelectInstrument = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((id) => {\n        setIsAddingNewInstrument(false);\n        setSelectedInstrument((0,lodash__WEBPACK_IMPORTED_MODULE_2__.find)(instruments, { bigpayToken: id }));\n    }, [instruments]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        const initializePaymentAsync = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n            try {\n                yield initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                });\n                if (isInstrumentFeatureAvailableProp) {\n                    yield loadInstruments();\n                }\n            }\n            catch (error) {\n                onUnhandledError(error);\n            }\n        });\n        void initializePaymentAsync();\n        return () => {\n            const deinitializePaymentAsync = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n                try {\n                    yield deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                }\n                catch (error) {\n                    onUnhandledError(error);\n                }\n            });\n            void deinitializePaymentAsync();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    const currentSelectedInstrument = selectedInstrument || getDefaultInstrument();\n    const isLoading = isInitializing || isLoadingInstruments;\n    const shouldShowInstrumentFieldset = isInstrumentFeatureAvailableProp && (instruments.length > 0 || isNewAddress);\n    if (!description && !isInstrumentFeatureAvailableProp) {\n        return null;\n    }\n    return (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__[\"default\"], { hideContentWhenLoading: true, isLoading: isLoading },\n        react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: \"paymentMethod paymentMethod--hosted\" },\n            description,\n            shouldShowInstrumentFieldset && (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { instruments: instruments, onSelectInstrument: handleSelectInstrument, onUseNewInstrument: handleUseNewInstrument, selectedInstrument: currentSelectedInstrument })),\n            isInstrumentFeatureAvailableProp && (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_7__[\"default\"], { instrumentId: currentSelectedInstrument && currentSelectedInstrument.bigpayToken, instruments: instruments, isAccountInstrument: true })))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HostedPaymentMethodComponent);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9ob3N0ZWQtcGF5bWVudC1pbnRlZ3JhdGlvbi9zcmMvY29tcG9uZW50cy9Ib3N0ZWRQYXltZW50Q29tcG9uZW50LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBVWtEO0FBQ2Q7QUFDNEM7QUFPaEM7QUFFVTtBQXlCMUQsU0FBUyxrQ0FBa0MsQ0FDdkMsS0FBa0M7SUFFbEMsTUFBTSx3QkFBd0IsR0FBRyxnRUFBVSxDQUFDLENBQUMsY0FBbUMsRUFBRSxFQUFFLEVBQUUsQ0FDbEYsV0FBVyxDQUFDLE1BQU0sQ0FBQyw4RUFBbUIsQ0FBQyxDQUMxQyxDQUFDO0lBQ0YsTUFBTSx3QkFBd0IsR0FBRyxnRUFBVSxDQUFDLENBQUMsY0FBbUMsRUFBRSxFQUFFLEVBQUUsQ0FDbEYsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsc0JBQXNCLEVBQUUsRUFBRSxFQUFFLENBQUMsc0JBQXNCLENBQUMsQ0FDN0UsQ0FBQztJQUNGLE1BQU0sRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLG9CQUFvQixHQUFHLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUM7SUFFdkYsTUFBTSxFQUNGLElBQUksRUFBRSxFQUNGLE9BQU8sRUFDUCxTQUFTLEVBQ1QsV0FBVyxFQUNYLGNBQWMsRUFDZCxxQkFBcUIsRUFDckIsc0JBQXNCLEdBQ3pCLEVBQ0QsUUFBUSxFQUFFLEVBQUUsb0JBQW9CLEVBQUUsR0FDckMsR0FBRyxhQUFhLENBQUM7SUFFbEIsTUFBTSxJQUFJLEdBQUcsT0FBTyxFQUFFLENBQUM7SUFDdkIsTUFBTSxNQUFNLEdBQUcsU0FBUyxFQUFFLENBQUM7SUFDM0IsTUFBTSxRQUFRLEdBQUcsV0FBVyxFQUFFLENBQUM7SUFFL0IsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2hDLE1BQU0sSUFBSSxLQUFLLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lB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QVcsRUFDeEIsa0JBQWtCLEVBQUUsc0JBQXNCLEVBQzFDLGtCQUFrQixFQUFFLHNCQUFzQixFQUMxQyxrQkFBa0IsRUFBRSx5QkFBeUIsR0FDL0MsQ0FDTDtZQUVBLGdDQUFnQyxJQUFJLENBQ2pDLDJEQUFDLDhFQUF1QixJQUNwQixZQUFZLEVBQ1IseUJBQXlCLElBQUkseUJBQXlCLENBQUMsV0FBVyxFQUV0RSxXQUFXLEVBQUUsV0FBVyxFQUN4QixtQkFBbUIsRUFBRSxJQUFJLEdBQzNCLENBQ0wsQ0FDQyxDQUNPLENBQ3BCLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSw0QkFBNEIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvaG9zdGVkLXBheW1lbnQtaW50ZWdyYXRpb24vc3JjL2NvbXBvbmVudHMvSG9zdGVkUGF5bWVudENvbXBvbmVudC50c3g/YWUyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIHR5cGUgQWNjb3VudEluc3RydW1lbnQsXG4gICAgdHlwZSBDaGVja291dFNlbGVjdG9ycyxcbiAgICB0eXBlIENoZWNrb3V0U2VydmljZSxcbiAgICB0eXBlIExhbmd1YWdlU2VydmljZSxcbiAgICB0eXBlIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICB0eXBlIFBheW1lbnRJbnN0cnVtZW50LFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZCxcbiAgICB0eXBlIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgeyBtZW1vaXplT25lIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL21lbW9pemUnO1xuaW1wb3J0IHsgZmluZCwgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgdHlwZSBSZWFjdE5vZGUsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQge1xuICAgIEFjY291bnRJbnN0cnVtZW50RmllbGRzZXQsXG4gICAgaXNBY2NvdW50SW5zdHJ1bWVudCxcbiAgICBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlLFxuICAgIFN0b3JlSW5zdHJ1bWVudEZpZWxkc2V0LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaW5zdHJ1bWVudC11dGlscyc7XG5pbXBvcnQgeyB0eXBlIFBheW1lbnRGb3JtU2VydmljZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nT3ZlcmxheSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC91aSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSG9zdGVkUGF5bWVudENvbXBvbmVudFByb3BzIHtcbiAgICBjaGVja291dFNlcnZpY2U6IENoZWNrb3V0U2VydmljZTtcbiAgICBjaGVja291dFN0YXRlOiBDaGVja291dFNlbGVjdG9ycztcbiAgICBkZXNjcmlwdGlvbj86IFJlYWN0Tm9kZTtcbiAgICBpc0luaXRpYWxpemluZz86IGJvb2xlYW47XG4gICAgaXNVc2luZ011bHRpU2hpcHBpbmc/OiBib29sZWFuO1xuICAgIGxhbmd1YWdlOiBMYW5ndWFnZVNlcnZpY2U7XG4gICAgbWV0aG9kOiBQYXltZW50TWV0aG9kO1xuICAgIHBheW1lbnRGb3JtOiBQYXltZW50Rm9ybVNlcnZpY2U7XG4gICAgZGVpbml0aWFsaXplUGF5bWVudChvcHRpb25zOiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPENoZWNrb3V0U2VsZWN0b3JzPjtcbiAgICBpbml0aWFsaXplUGF5bWVudChvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMpOiBQcm9taXNlPENoZWNrb3V0U2VsZWN0b3JzPjtcbiAgICBvblVuaGFuZGxlZEVycm9yPyhlcnJvcjogRXJyb3IpOiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgSG9zdGVkUGF5bWVudENvbXBvbmVudERlcml2ZWRQcm9wcyB7XG4gICAgaW5zdHJ1bWVudHM6IEFjY291bnRJbnN0cnVtZW50W107XG4gICAgaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZTogYm9vbGVhbjtcbiAgICBpc0xvYWRpbmdJbnN0cnVtZW50czogYm9vbGVhbjtcbiAgICBpc05ld0FkZHJlc3M6IGJvb2xlYW47XG4gICAgaXNQYXltZW50RGF0YVJlcXVpcmVkOiBib29sZWFuO1xuICAgIGxvYWRJbnN0cnVtZW50cygpOiBQcm9taXNlPENoZWNrb3V0U2VsZWN0b3JzPjtcbn1cblxuZnVuY3Rpb24gZ2V0SG9zdGVkUGF5bWVudE1ldGhvZERlcml2ZWRQcm9wcyhcbiAgICBwcm9wczogSG9zdGVkUGF5bWVudENvbXBvbmVudFByb3BzLFxuKTogSG9zdGVkUGF5bWVudENvbXBvbmVudERlcml2ZWRQcm9wcyB7XG4gICAgY29uc3QgZmlsdGVyQWNjb3VudEluc3RydW1lbnRzID0gbWVtb2l6ZU9uZSgoaW5zdHJ1bWVudHM6IFBheW1lbnRJbnN0cnVtZW50W10gPSBbXSkgPT5cbiAgICAgICAgaW5zdHJ1bWVudHMuZmlsdGVyKGlzQWNjb3VudEluc3RydW1lbnQpLFxuICAgICk7XG4gICAgY29uc3QgZmlsdGVyVHJ1c3RlZEluc3RydW1lbnRzID0gbWVtb2l6ZU9uZSgoaW5zdHJ1bWVudHM6IEFjY291bnRJbnN0cnVtZW50W10gPSBbXSkgPT5cbiAgICAgICAgaW5zdHJ1bWVudHMuZmlsdGVyKCh7IHRydXN0ZWRTaGlwcGluZ0FkZHJlc3MgfSkgPT4gdHJ1c3RlZFNoaXBwaW5nQWRkcmVzcyksXG4gICAgKTtcbiAgICBjb25zdCB7IGNoZWNrb3V0U2VydmljZSwgY2hlY2tvdXRTdGF0ZSwgaXNVc2luZ011bHRpU2hpcHBpbmcgPSBmYWxzZSwgbWV0aG9kIH0gPSBwcm9wcztcblxuICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZ2V0Q2FydCxcbiAgICAgICAgICAgIGdldENvbmZpZyxcbiAgICAgICAgICAgIGdldEN1c3RvbWVyLFxuICAgICAgICAgICAgZ2V0SW5zdHJ1bWVudHMsXG4gICAgICAgICAgICBpc1BheW1lbnREYXRhUmVxdWlyZWQsXG4gICAgICAgICAgICBpc1BheW1lbnREYXRhU3VibWl0dGVkLFxuICAgICAgICB9LFxuICAgICAgICBzdGF0dXNlczogeyBpc0xvYWRpbmdJbnN0cnVtZW50cyB9LFxuICAgIH0gPSBjaGVja291dFN0YXRlO1xuXG4gICAgY29uc3QgY2FydCA9IGdldENhcnQoKTtcbiAgICBjb25zdCBjb25maWcgPSBnZXRDb25maWcoKTtcbiAgICBjb25zdCBjdXN0b21lciA9IGdldEN1c3RvbWVyKCk7XG5cbiAgICBpZiAoIWNvbmZpZyB8fCAhY2FydCB8fCAhY3VzdG9tZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZ2V0IGNoZWNrb3V0Jyk7XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudE1ldGhvZEluc3RydW1lbnRzID0gZmlsdGVyQWNjb3VudEluc3RydW1lbnRzKGdldEluc3RydW1lbnRzKG1ldGhvZCkpO1xuICAgIGNvbnN0IHRydXN0ZWRJbnN0cnVtZW50cyA9IGZpbHRlclRydXN0ZWRJbnN0cnVtZW50cyhjdXJyZW50TWV0aG9kSW5zdHJ1bWVudHMpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5zdHJ1bWVudHM6IHRydXN0ZWRJbnN0cnVtZW50cyxcbiAgICAgICAgaXNOZXdBZGRyZXNzOiB0cnVzdGVkSW5zdHJ1bWVudHMubGVuZ3RoID09PSAwICYmIGN1cnJlbnRNZXRob2RJbnN0cnVtZW50cy5sZW5ndGggPiAwLFxuICAgICAgICBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlOlxuICAgICAgICAgICAgIWlzUGF5bWVudERhdGFTdWJtaXR0ZWQobWV0aG9kLmlkLCBtZXRob2QuZ2F0ZXdheSkgJiZcbiAgICAgICAgICAgIGlzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGUoe1xuICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICBjdXN0b21lcixcbiAgICAgICAgICAgICAgICBpc1VzaW5nTXVsdGlTaGlwcGluZyxcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBtZXRob2QsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgaXNMb2FkaW5nSW5zdHJ1bWVudHM6IGlzTG9hZGluZ0luc3RydW1lbnRzKCksXG4gICAgICAgIGlzUGF5bWVudERhdGFSZXF1aXJlZDogaXNQYXltZW50RGF0YVJlcXVpcmVkKCksXG4gICAgICAgIGxvYWRJbnN0cnVtZW50czogY2hlY2tvdXRTZXJ2aWNlLmxvYWRJbnN0cnVtZW50cyxcbiAgICB9O1xufVxuXG5jb25zdCBIb3N0ZWRQYXltZW50TWV0aG9kQ29tcG9uZW50OiBSZWFjdC5GQzxIb3N0ZWRQYXltZW50Q29tcG9uZW50UHJvcHM+ID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgaXNJbml0aWFsaXppbmcgPSBmYWxzZSxcbiAgICAgICAgaW5pdGlhbGl6ZVBheW1lbnQsXG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgb25VbmhhbmRsZWRFcnJvciA9IG5vb3AsXG4gICAgICAgIGRlaW5pdGlhbGl6ZVBheW1lbnQsXG4gICAgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgW2lzQWRkaW5nTmV3SW5zdHJ1bWVudCwgc2V0SXNBZGRpbmdOZXdJbnN0cnVtZW50XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbc2VsZWN0ZWRJbnN0cnVtZW50LCBzZXRTZWxlY3RlZEluc3RydW1lbnRdID0gdXNlU3RhdGU8QWNjb3VudEluc3RydW1lbnQgfCB1bmRlZmluZWQ+KCk7XG5cbiAgICBjb25zdCBkZXJpdmVkUHJvcHMgPSBnZXRIb3N0ZWRQYXltZW50TWV0aG9kRGVyaXZlZFByb3BzKHByb3BzKTtcbiAgICBjb25zdCB7XG4gICAgICAgIGlzTG9hZGluZ0luc3RydW1lbnRzLFxuICAgICAgICBpbnN0cnVtZW50cyxcbiAgICAgICAgaXNOZXdBZGRyZXNzLFxuICAgICAgICBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlOiBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlUHJvcCxcbiAgICAgICAgbG9hZEluc3RydW1lbnRzLFxuICAgIH0gPSBkZXJpdmVkUHJvcHM7XG5cbiAgICBjb25zdCBnZXREZWZhdWx0SW5zdHJ1bWVudCA9IHVzZUNhbGxiYWNrKCgpOiBBY2NvdW50SW5zdHJ1bWVudCB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICAgIGlmIChpc0FkZGluZ05ld0luc3RydW1lbnQgfHwgIWluc3RydW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZpbmQoaW5zdHJ1bWVudHMsIHsgZGVmYXVsdEluc3RydW1lbnQ6IHRydWUgfSkgfHwgaW5zdHJ1bWVudHNbMF07XG4gICAgfSwgW2lzQWRkaW5nTmV3SW5zdHJ1bWVudCwgaW5zdHJ1bWVudHNdKTtcblxuICAgIGNvbnN0IGhhbmRsZVVzZU5ld0luc3RydW1lbnQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIHNldElzQWRkaW5nTmV3SW5zdHJ1bWVudCh0cnVlKTtcbiAgICAgICAgc2V0U2VsZWN0ZWRJbnN0cnVtZW50KHVuZGVmaW5lZCk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgaGFuZGxlU2VsZWN0SW5zdHJ1bWVudCA9IHVzZUNhbGxiYWNrKFxuICAgICAgICAoaWQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgc2V0SXNBZGRpbmdOZXdJbnN0cnVtZW50KGZhbHNlKTtcbiAgICAgICAgICAgIHNldFNlbGVjdGVkSW5zdHJ1bWVudChmaW5kKGluc3RydW1lbnRzLCB7IGJpZ3BheVRva2VuOiBpZCB9KSk7XG4gICAgICAgIH0sXG4gICAgICAgIFtpbnN0cnVtZW50c10sXG4gICAgKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGluaXRpYWxpemVQYXltZW50QXN5bmMgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkOiBtZXRob2QuZ2F0ZXdheSxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQ6IG1ldGhvZC5pZCxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlUHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsb2FkSW5zdHJ1bWVudHMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIG9uVW5oYW5kbGVkRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZvaWQgaW5pdGlhbGl6ZVBheW1lbnRBc3luYygpO1xuXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkZWluaXRpYWxpemVQYXltZW50QXN5bmMgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGVpbml0aWFsaXplUGF5bWVudCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYXRld2F5SWQ6IG1ldGhvZC5nYXRld2F5LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQ6IG1ldGhvZC5pZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgb25VbmhhbmRsZWRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdm9pZCBkZWluaXRpYWxpemVQYXltZW50QXN5bmMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZEluc3RydW1lbnQgPSBzZWxlY3RlZEluc3RydW1lbnQgfHwgZ2V0RGVmYXVsdEluc3RydW1lbnQoKTtcbiAgICBjb25zdCBpc0xvYWRpbmcgPSBpc0luaXRpYWxpemluZyB8fCBpc0xvYWRpbmdJbnN0cnVtZW50cztcbiAgICBjb25zdCBzaG91bGRTaG93SW5zdHJ1bWVudEZpZWxkc2V0ID1cbiAgICAgICAgaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZVByb3AgJiYgKGluc3RydW1lbnRzLmxlbmd0aCA+IDAgfHwgaXNOZXdBZGRyZXNzKTtcblxuICAgIGlmICghZGVzY3JpcHRpb24gJiYgIWlzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGVQcm9wKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDxMb2FkaW5nT3ZlcmxheSBoaWRlQ29udGVudFdoZW5Mb2FkaW5nIGlzTG9hZGluZz17aXNMb2FkaW5nfT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudE1ldGhvZCBwYXltZW50TWV0aG9kLS1ob3N0ZWRcIj5cbiAgICAgICAgICAgICAgICB7ZGVzY3JpcHRpb259XG5cbiAgICAgICAgICAgICAgICB7c2hvdWxkU2hvd0luc3RydW1lbnRGaWVsZHNldCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxBY2NvdW50SW5zdHJ1bWVudEZpZWxkc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50cz17aW5zdHJ1bWVudHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdEluc3RydW1lbnQ9e2hhbmRsZVNlbGVjdEluc3RydW1lbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblVzZU5ld0luc3RydW1lbnQ9e2hhbmRsZVVzZU5ld0luc3RydW1lbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEluc3RydW1lbnQ9e2N1cnJlbnRTZWxlY3RlZEluc3RydW1lbnR9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgIHtpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlUHJvcCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxTdG9yZUluc3RydW1lbnRGaWVsZHNldFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRJbnN0cnVtZW50ICYmIGN1cnJlbnRTZWxlY3RlZEluc3RydW1lbnQuYmlncGF5VG9rZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnRzPXtpbnN0cnVtZW50c31cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQWNjb3VudEluc3RydW1lbnQ9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0xvYWRpbmdPdmVybGF5PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBIb3N0ZWRQYXltZW50TWV0aG9kQ29tcG9uZW50O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx\n\n}");

/***/ }),

/***/ "./packages/instrument-utils/src/guards/isInstrumentFeatureAvailable/isInstrumentFeatureAvailable.ts":
/*!***********************************************************************************************************!*\
  !*** ./packages/instrument-utils/src/guards/isInstrumentFeatureAvailable/isInstrumentFeatureAvailable.ts ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ isInstrumentFeatureAvailable)\n/* harmony export */ });\nfunction isInstrumentFeatureAvailable({ config, customer, isUsingMultiShipping, paymentMethod, }) {\n    if (!config.checkoutSettings.isCardVaultingEnabled ||\n        !paymentMethod.config.isVaultingEnabled ||\n        customer.isGuest ||\n        isUsingMultiShipping) {\n        return false;\n    }\n    return true;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9pbnN0cnVtZW50LXV0aWxzL3NyYy9ndWFyZHMvaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZS9pc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFTZSxTQUFTLDRCQUE0QixDQUFDLEVBQ2pELE1BQU0sRUFDTixRQUFRLEVBQ1Isb0JBQW9CLEVBQ3BCLGFBQWEsR0FDbUI7SUFDaEMsSUFDSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxxQkFBcUI7UUFDOUMsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLGlCQUFpQjtRQUN2QyxRQUFRLENBQUMsT0FBTztRQUNoQixvQkFBb0IsRUFDdEIsQ0FBQztRQUNDLE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFFRCxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9pbnN0cnVtZW50LXV0aWxzL3NyYy9ndWFyZHMvaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZS9pc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlLnRzP2I1YTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBDdXN0b21lciwgdHlwZSBQYXltZW50TWV0aG9kLCB0eXBlIFN0b3JlQ29uZmlnIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZVN0YXRlIHtcbiAgICBjb25maWc6IFN0b3JlQ29uZmlnO1xuICAgIGN1c3RvbWVyOiBDdXN0b21lcjtcbiAgICBpc1VzaW5nTXVsdGlTaGlwcGluZzogYm9vbGVhbjtcbiAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlKHtcbiAgICBjb25maWcsXG4gICAgY3VzdG9tZXIsXG4gICAgaXNVc2luZ011bHRpU2hpcHBpbmcsXG4gICAgcGF5bWVudE1ldGhvZCxcbn06IElzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGVTdGF0ZSk6IGJvb2xlYW4ge1xuICAgIGlmIChcbiAgICAgICAgIWNvbmZpZy5jaGVja291dFNldHRpbmdzLmlzQ2FyZFZhdWx0aW5nRW5hYmxlZCB8fFxuICAgICAgICAhcGF5bWVudE1ldGhvZC5jb25maWcuaXNWYXVsdGluZ0VuYWJsZWQgfHxcbiAgICAgICAgY3VzdG9tZXIuaXNHdWVzdCB8fFxuICAgICAgICBpc1VzaW5nTXVsdGlTaGlwcGluZ1xuICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/instrument-utils/src/guards/isInstrumentFeatureAvailable/isInstrumentFeatureAvailable.ts\n\n}");

/***/ }),

/***/ "./packages/paypal-express-integration/src/PaypalExpressPaymentMethod.tsx":
/*!********************************************************************************!*\
  !*** ./packages/paypal-express-integration/src/PaypalExpressPaymentMethod.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_paypal_express__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/paypal-express */ \"../checkout-sdk-js/dist/esm/integrations/paypal-express.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _bigcommerce_checkout_hosted_payment_integration__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-payment-integration */ \"./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n\n\n\n\n\nconst PaypalExpressPaymentMethod = (_a) => {\n    var { checkoutService, isEmbedded = false } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"checkoutService\", \"isEmbedded\"]);\n    const initializePaypalExpressPayment = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((options) => checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_paypal_express__WEBPACK_IMPORTED_MODULE_1__.createPaypalExpressPaymentStrategy], paypalexpress: {\n            useRedirectFlow: isEmbedded,\n        } })), [checkoutService, isEmbedded]);\n    return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_hosted_payment_integration__WEBPACK_IMPORTED_MODULE_3__[\"default\"], Object.assign({}, rest, { checkoutService: checkoutService, deinitializePayment: checkoutService.deinitializePayment, initializePayment: initializePaypalExpressPayment })));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(PaypalExpressPaymentMethod, [{ id: 'paypalexpress' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9wYXlwYWwtZXhwcmVzcy1pbnRlZ3JhdGlvbi9zcmMvUGF5cGFsRXhwcmVzc1BheW1lbnRNZXRob2QudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQzJHO0FBQ3hDO0FBRXVCO0FBS25DO0FBTXZELE1BQU0sMEJBQTBCLEdBRTVCLENBQUMsRUFBZ0QsRUFBRSxFQUFFO1FBQXBELEVBQUUsZUFBZSxFQUFFLFVBQVUsR0FBRyxLQUFLLE9BQVcsRUFBTixJQUFJLHFEQUE5QyxpQ0FBZ0QsQ0FBRjtJQUMvQyxNQUFNLDhCQUE4QixHQUFHLGtEQUFXLENBQzlDLENBQUMsT0FBaUMsRUFBRSxFQUFFLENBQ2xDLGVBQWUsQ0FBQyxpQkFBaUIsaUNBQzFCLE9BQU8sS0FDVixZQUFZLEVBQUUsQ0FBQyxxSEFBa0MsQ0FBQyxFQUNsRCxhQUFhLEVBQUU7WUFDWCxlQUFlLEVBQUUsVUFBVTtTQUM5QixJQUNILEVBQ04sQ0FBQyxlQUFlLEVBQUUsVUFBVSxDQUFDLENBQ2hDLENBQUM7SUFFRixPQUFPLENBQ0gsMkRBQUMsd0ZBQXNCLG9CQUNmLElBQUksSUFDUixlQUFlLEVBQUUsZUFBZSxFQUNoQyxtQkFBbUIsRUFBRSxlQUFlLENBQUMsbUJBQW1CLEVBQ3hELGlCQUFpQixFQUFFLDhCQUE4QixJQUNuRCxDQUNMLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSx5RkFBcUIsQ0FDaEMsMEJBQTBCLEVBQzFCLENBQUMsRUFBRSxFQUFFLEVBQUUsZUFBZSxFQUFFLENBQUMsQ0FDNUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvcGF5cGFsLWV4cHJlc3MtaW50ZWdyYXRpb24vc3JjL1BheXBhbEV4cHJlc3NQYXltZW50TWV0aG9kLnRzeD8yYzZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgUGF5bWVudEluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgeyBjcmVhdGVQYXlwYWxFeHByZXNzUGF5bWVudFN0cmF0ZWd5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9pbnRlZ3JhdGlvbnMvcGF5cGFsLWV4cHJlc3MnO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBIb3N0ZWRQYXltZW50Q29tcG9uZW50IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2hvc3RlZC1wYXltZW50LWludGVncmF0aW9uJztcbmltcG9ydCB7XG4gICAgdHlwZSBQYXltZW50TWV0aG9kUHJvcHMsXG4gICAgdHlwZSBQYXltZW50TWV0aG9kUmVzb2x2ZUlkLFxuICAgIHRvUmVzb2x2YWJsZUNvbXBvbmVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxFeHByZXNzUGF5bWVudE1ldGhvZFByb3BzIHtcbiAgICBpc0VtYmVkZGVkPzogYm9vbGVhbjtcbn1cblxuY29uc3QgUGF5cGFsRXhwcmVzc1BheW1lbnRNZXRob2Q6IEZ1bmN0aW9uQ29tcG9uZW50PFxuICAgIFBheW1lbnRNZXRob2RQcm9wcyAmIFBheXBhbEV4cHJlc3NQYXltZW50TWV0aG9kUHJvcHNcbj4gPSAoeyBjaGVja291dFNlcnZpY2UsIGlzRW1iZWRkZWQgPSBmYWxzZSwgLi4ucmVzdCB9KSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbGl6ZVBheXBhbEV4cHJlc3NQYXltZW50ID0gdXNlQ2FsbGJhY2soXG4gICAgICAgIChvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMpID0+XG4gICAgICAgICAgICBjaGVja291dFNlcnZpY2UuaW5pdGlhbGl6ZVBheW1lbnQoe1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRpb25zOiBbY3JlYXRlUGF5cGFsRXhwcmVzc1BheW1lbnRTdHJhdGVneV0sXG4gICAgICAgICAgICAgICAgcGF5cGFsZXhwcmVzczoge1xuICAgICAgICAgICAgICAgICAgICB1c2VSZWRpcmVjdEZsb3c6IGlzRW1iZWRkZWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICBbY2hlY2tvdXRTZXJ2aWNlLCBpc0VtYmVkZGVkXSxcbiAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPEhvc3RlZFBheW1lbnRDb21wb25lbnRcbiAgICAgICAgICAgIHsuLi5yZXN0fVxuICAgICAgICAgICAgY2hlY2tvdXRTZXJ2aWNlPXtjaGVja291dFNlcnZpY2V9XG4gICAgICAgICAgICBkZWluaXRpYWxpemVQYXltZW50PXtjaGVja291dFNlcnZpY2UuZGVpbml0aWFsaXplUGF5bWVudH1cbiAgICAgICAgICAgIGluaXRpYWxpemVQYXltZW50PXtpbml0aWFsaXplUGF5cGFsRXhwcmVzc1BheW1lbnR9XG4gICAgICAgIC8+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZUNvbXBvbmVudDxQYXltZW50TWV0aG9kUHJvcHMsIFBheW1lbnRNZXRob2RSZXNvbHZlSWQ+KFxuICAgIFBheXBhbEV4cHJlc3NQYXltZW50TWV0aG9kLFxuICAgIFt7IGlkOiAncGF5cGFsZXhwcmVzcycgfV0sXG4pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/paypal-express-integration/src/PaypalExpressPaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/paypal-express-integration/src/index.ts":
/*!**********************************************************!*\
  !*** ./packages/paypal-express-integration/src/index.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PaypalExpressPaymentMethod: () => (/* reexport safe */ _PaypalExpressPaymentMethod__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _PaypalExpressPaymentMethod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PaypalExpressPaymentMethod */ \"./packages/paypal-express-integration/src/PaypalExpressPaymentMethod.tsx\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9wYXlwYWwtZXhwcmVzcy1pbnRlZ3JhdGlvbi9zcmMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL3BhY2thZ2VzL3BheXBhbC1leHByZXNzLWludGVncmF0aW9uL3NyYy9pbmRleC50cz9jYmY1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IGRlZmF1bHQgYXMgUGF5cGFsRXhwcmVzc1BheW1lbnRNZXRob2QgfSBmcm9tICcuL1BheXBhbEV4cHJlc3NQYXltZW50TWV0aG9kJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/paypal-express-integration/src/index.ts\n\n}");

/***/ })

}]);
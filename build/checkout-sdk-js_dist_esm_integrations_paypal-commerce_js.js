"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["checkout-sdk-js_dist_esm_integrations_paypal-commerce_js"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/paypal-commerce.js":
/*!*******************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/paypal-commerce.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPayPalCommerceAlternativeMethodsButtonStrategy: () => (/* binding */ mt),\n/* harmony export */   createPayPalCommerceAlternativeMethodsPaymentStrategy: () => (/* binding */ ue),\n/* harmony export */   createPayPalCommerceButtonStrategy: () => (/* binding */ rt),\n/* harmony export */   createPayPalCommerceCreditButtonStrategy: () => (/* binding */ dt),\n/* harmony export */   createPayPalCommerceCreditCardsPaymentStrategy: () => (/* binding */ xe),\n/* harmony export */   createPayPalCommerceCreditCustomerStrategy: () => (/* binding */ Je),\n/* harmony export */   createPayPalCommerceCreditPaymentStrategy: () => (/* binding */ oe),\n/* harmony export */   createPayPalCommerceCustomerStrategy: () => (/* binding */ Ye),\n/* harmony export */   createPayPalCommerceFastlaneCustomerStrategy: () => (/* binding */ it),\n/* harmony export */   createPayPalCommerceFastlanePaymentStrategy: () => (/* binding */ qe),\n/* harmony export */   createPayPalCommercePaymentStrategy: () => (/* binding */ Q),\n/* harmony export */   createPayPalCommerceRatePayPaymentStrategy: () => (/* binding */ je),\n/* harmony export */   createPayPalCommerceVenmoButtonStrategy: () => (/* binding */ pt),\n/* harmony export */   createPayPalCommerceVenmoCustomerStrategy: () => (/* binding */ Qe),\n/* harmony export */   createPayPalCommerceVenmoPaymentStrategy: () => (/* binding */ se)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"../checkout-sdk-js/node_modules/@bigcommerce/form-poster/lib/index.js\");\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"../checkout-sdk-js/node_modules/@bigcommerce/request-sender/esm/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\nvar l,c={};function p(e,t){return console.log(\"resolveIds\",t),Object.assign(e,{resolveIds:t})}c.d=(e,t)=>{for(var i in t)c.o(t,i)&&!c.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class u extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class h extends u{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(l||(l={}));class m extends u{constructor(e){super(function(e){switch(e){case l.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case l.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case l.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case l.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case l.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case l.MissingCheckoutConfig:case l.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case l.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case l.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case l.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case l.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case l.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case l.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}var y=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class g{constructor(e){this.scriptLoader=e,this.window=window}getPayPalFastlaneSdk(e,t,i){return y(this,void 0,void 0,function*(){if(!this.window.paypalFastlaneSdk){const n=this.getPayPalFastlaneSdkConfiguration(e,t,i);if(yield this.loadPayPalSdk(n),!this.window.paypalFastlaneSdk)throw new h}return this.window.paypalFastlaneSdk})}getPayPalGooglePaySdk(e,t,i,n){return y(this,void 0,void 0,function*(){if(!this.window.paypalGooglePay||n){const n=this.getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i);yield this.loadPayPalSdk(n)}if(!this.window.paypalGooglePay)throw new h;return this.window.paypalGooglePay})}getPayPalApmsSdk(e,t){return y(this,void 0,void 0,function*(){if(!this.window.paypalApms){const i=this.getPayPalApmSdkConfiguration(e,t);if(yield this.loadPayPalSdk(i),!this.window.paypalApms)throw new h}return this.window.paypalApms})}getPayPalMessages(e,t){return y(this,void 0,void 0,function*(){if(!this.window.paypalMessages){const i=this.getPayPalSdkMessagesConfiguration(e,t);yield this.loadPayPalSdk(i)}if(!this.window.paypalMessages)throw new h;return this.window.paypalMessages})}loadPayPalSdk({options:e,attributes:t}){return y(this,void 0,void 0,function*(){const i=this.transformConfig(e),n=this.transformConfig(t),o=`https://www.paypal.com/sdk/js?${new URLSearchParams(i).toString()}`;yield this.scriptLoader.loadScript(o,{async:!0,attributes:n})})}getPayPalFastlaneSdkConfiguration(e,t,i){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new m(l.MissingPaymentMethod);const{intent:r,clientId:a,merchantId:s,attributionId:d}=o;return{options:{\"client-id\":a,\"merchant-id\":s,commit:!0,components:[\"fastlane\",\"buttons\",\"payment-fields\",\"hosted-fields\",\"three-domain-secure\"],currency:t,intent:r},attributes:{\"data-client-metadata-id\":i.replace(/-/g,\"\"),\"data-namespace\":\"paypalFastlaneSdk\",\"data-partner-attribution-id\":d,\"data-sdk-client-token\":n}}}getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i=!0){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new m(l.MissingPaymentMethod);const{intent:r,clientId:a,merchantId:s,buyerCountry:d,attributionId:c,isHostedCheckoutEnabled:p,isDeveloperModeApplicable:u}=o,h=p||i;return{options:Object.assign({\"client-id\":a,\"merchant-id\":s,commit:h,components:[\"googlepay\"],currency:t,intent:r},u&&{\"buyer-country\":d}),attributes:{\"data-partner-attribution-id\":c,\"data-client-token\":n,\"data-namespace\":\"paypalGooglePay\"}}}getPayPalApmSdkConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new m(l.MissingPaymentMethod);const{intent:n,clientId:o,merchantId:r,buyerCountry:a,attributionId:s,isDeveloperModeApplicable:d,availableAlternativePaymentMethods:c=[],enabledAlternativePaymentMethods:p=[]}=i,u=p,h=c.filter(e=>!p.includes(e));return{options:Object.assign({\"client-id\":o,\"merchant-id\":r,\"enable-funding\":u.length>0?u:void 0,\"disable-funding\":h.length>0?h:void 0,commit:!0,components:[\"buttons\",\"payment-fields\"],currency:t,intent:n},d&&{\"buyer-country\":a}),attributes:{\"data-partner-attribution-id\":s,\"data-namespace\":\"paypalApms\"}}}getPayPalSdkMessagesConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new m(l.MissingPaymentMethod);const{clientId:n,merchantId:o,attributionId:r,isDeveloperModeApplicable:a,buyerCountry:s}=i;return{options:Object.assign({\"client-id\":n,\"merchant-id\":o,components:[\"messages\"],currency:t},a&&{\"buyer-country\":s}),attributes:{\"data-namespace\":\"paypalMessages\",\"data-partner-attribution-id\":r}}}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}const v={size:70,color:\"#d9d9d9\",backgroundColor:\"#ffffff\"},f=\"embedded-checkout-loading-indicator-rotation\";class S{constructor(e){this.styles=Object.assign(Object.assign({},v),e&&e.styles),this.containerStyles=Object.assign({},e&&e.containerStyles),this.defineAnimation(),this.container=this.buildContainer(),this.indicator=this.buildIndicator(),this.container.appendChild(this.indicator)}show(e){if(e){const t=document.getElementById(e);if(!t)throw new Error(\"Unable to attach the loading indicator because the parent ID is not valid.\");t.appendChild(this.container)}this.container.style.visibility=\"visible\",this.container.style.opacity=\"1\"}hide(){const e=()=>{this.container.style.visibility=\"hidden\",this.container.removeEventListener(\"transitionend\",e)};this.container.addEventListener(\"transitionend\",e),this.container.style.opacity=\"0\"}buildContainer(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.bottom=\"0\",e.style.left=\"0\",e.style.height=\"100%\",e.style.width=\"100%\",e.style.position=\"absolute\",e.style.right=\"0\",e.style.top=\"0\",e.style.transition=\"all 250ms ease-out\",e.style.opacity=\"0\",this.setStyleAttribute(e,this.containerStyles),e}buildIndicator(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.width=`${this.styles.size}px`,e.style.height=`${this.styles.size}px`,e.style.borderRadius=`${this.styles.size}px`,e.style.border=\"solid 1px\",e.style.borderColor=`${this.styles.backgroundColor} ${this.styles.backgroundColor} ${this.styles.color} ${this.styles.color}`,e.style.margin=\"0 auto\",e.style.position=\"absolute\",e.style.left=\"0\",e.style.right=\"0\",e.style.top=\"50%\",e.style.transform=\"translateY(-50%) rotate(0deg)\",e.style.transformStyle=\"preserve-3d\",e.style.animation=`${f} 500ms infinite cubic-bezier(0.69, 0.31, 0.56, 0.83)`,e}setStyleAttribute(e,t){Object.keys(t).forEach(i=>{e.style.setProperty(i,t[i])})}defineAnimation(){var e;if(document.getElementById(f))return;const t=document.createElement(\"style\");t.id=f,null===(e=document.head)||void 0===e||e.appendChild(t),t.sheet instanceof CSSStyleSheet&&t.sheet.insertRule(`\\n                @keyframes ${f} {\\n                    0% { transform: translateY(-50%) rotate(0deg); }\\n                    100% { transform: translateY(-50%) rotate(360deg); }\\n                }\\n            `,0)}}class I extends u{constructor(e){super(e||\"An unexpected error has occurred during buy now cart creation process. Please try again later.\"),this.name=\"BuyNowCartCreationError\",this.type=\"buy_now_cart_creation_error\"}}const C={body:{},headers:{},status:0};class b extends u{constructor(e,{message:t,errors:i}={}){const{body:n,headers:o,status:r}=e||C;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=n,this.headers=o,this.status=r,this.errors=i||[]}}var w,P,O,k,A,E,T,z;!function(e){e.BuyNow=\"BUY_NOW\"}(w||(w={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(P||(P={})),function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(O||(O={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(k||(k={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(A||(A={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(E||(E={})),function(e){e.OXXO=\"oxxo\"}(T||(T={})),function(e){e.Approved=\"APPROVED\",e.Created=\"CREATED\",e.PayerActionRequired=\"PAYER_ACTION_REQUIRED\",e.PollingStop=\"POLLING_STOP\",e.PollingError=\"POLLING_ERROR\"}(z||(z={}));var F=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class B{constructor(e,t,i,n){this.formPoster=e,this.paymentIntegrationService=t,this.paypalCommerceRequestSender=i,this.paypalCommerceScriptLoader=n}loadPayPalSdk(e,t,i,n){return F(this,void 0,void 0,function*(){const o=this.paymentIntegrationService.getState(),r=t||o.getCartOrThrow().currency.code,a=o.getPaymentMethodOrThrow(e);return this.paypalSdk=yield this.paypalCommerceScriptLoader.getPayPalSDK(a,r,i,n),this.paypalSdk})}getPayPalSdkOrThrow(){if(!this.paypalSdk)throw new h;return this.paypalSdk}createBuyNowCartOrThrow(e){return F(this,void 0,void 0,function*(){const t=e.getBuyNowCartRequestBody();if(!t)throw new m(l.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(t)}catch(e){throw new I}})}createOrder(e,t){return F(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n}=yield this.paypalCommerceRequestSender.createOrder(e,Object.assign({cartId:i},t));return n})}createOrderCardFields(e,t){return F(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n,setupToken:o}=yield this.paypalCommerceRequestSender.createOrder(e,Object.assign({cartId:i},t));return Object.assign({orderId:n},o?{setupToken:o}:{})})}updateOrder(){return F(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getConsignmentsOrThrow()[0];try{yield this.paypalCommerceRequestSender.updateOrder({availableShippingOptions:i.availableShippingOptions,cartId:t.id,selectedShippingOption:i.selectedShippingOption})}catch(e){throw new b}})}getOrderStatus(e,t){return F(this,void 0,void 0,function*(){try{const{status:i}=yield this.paypalCommerceRequestSender.getOrderStatus(e,t);return i}catch(e){throw new b}})}tokenizePayment(e,t){const i=this.paymentIntegrationService.getState().getCartOrThrow();if(!t)throw new m(l.MissingOrderId);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",action:\"set_external_checkout\",provider:e,order_id:t},i.source===w.BuyNow&&{cart_id:i.id}))}submitPayment(e,t,i){return F(this,void 0,void 0,function*(){const n={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:e,paypal_account:{order_id:t}}};yield this.paymentIntegrationService.submitPayment(Object.assign({methodId:e,paymentData:n},i?{gatewayId:i}:{}))})}getShippingOptionOrThrow(e){const t=this.paymentIntegrationService.getState().getConsignmentsOrThrow()[0],i=t.availableShippingOptions||[],n=i.find(e=>e.isRecommended),o=(e?i.find(t=>t.id===e):i.find(e=>{var i;return e.id===(null===(i=t.selectedShippingOption)||void 0===i?void 0:i.id)}))||n||i[0];if(!o)throw new Error(\"Your order can't be shipped to this address\");return o}getAddress(e){return{firstName:(null==e?void 0:e.firstName)||\"\",lastName:(null==e?void 0:e.lastName)||\"\",email:(null==e?void 0:e.email)||\"\",phone:(null==e?void 0:e.phone)||\"\",company:\"\",address1:(null==e?void 0:e.address1)||\"\",address2:(null==e?void 0:e.address2)||\"\",city:(null==e?void 0:e.city)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",stateOrProvince:\"\",stateOrProvinceCode:(null==e?void 0:e.stateOrProvinceCode)||\"\",customFields:[]}}getBillingAddressFromOrderDetails({payer:e}){var t,i;return this.getAddress({firstName:e.name.given_name,lastName:e.name.surname,email:e.email_address,address1:e.address.address_line_1,address2:e.address.address_line_2,city:e.address.admin_area_2,countryCode:e.address.country_code,postalCode:e.address.postal_code,stateOrProvinceCode:e.address.admin_area_1,phone:null===(i=null===(t=e.phone)||void 0===t?void 0:t.phone_number)||void 0===i?void 0:i.national_number})}getShippingAddressFromOrderDetails(e){const{payer:t,purchase_units:i}=e,{address:n,name:{full_name:o}}=i[0].shipping,[r,...a]=o.split(\" \");return this.getAddress({firstName:r,lastName:a.join(\" \"),email:t.email_address,address1:n.address_line_1,address2:n.address_line_2,city:n.admin_area_2,countryCode:n.country_code,postalCode:n.postal_code,stateOrProvinceCode:n.admin_area_1})}getValidButtonStyle(e){const{color:t,height:i,label:n,shape:o}=e||{},a={color:t&&A[t]?t:void 0,height:this.getValidHeight(i),label:n&&k[n]?n:void 0,shape:o&&E[o]?o:void 0};return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(a,lodash__WEBPACK_IMPORTED_MODULE_3__.isNil)}getValidHeight(e){return e&&\"number\"==typeof e?e>55?55:e<25?25:e:40}removeElement(e){const t=e&&document.getElementById(e);t&&(t.style.display=\"none\")}}const D=\"This API endpoint is for internal use only and may change in the future\";var M;!function(e){e.Json=\"application/json\",e.JsonV1=\"application/vnd.bc.v1+json\"}(M||(M={}));const x=M,N={\"X-Checkout-SDK-Version\":\"1.820.0\"};var U=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class j{constructor(e){this.requestSender=e}createOrder(e,t){return U(this,void 0,void 0,function*(){const i=`/api/storefront/payment/${e}`,n=t,o=Object.assign({\"X-API-INTERNAL\":D,\"Content-Type\":x.Json},N);return(yield this.requestSender.post(i,{headers:o,body:n})).body})}updateOrder(e){return U(this,void 0,void 0,function*(){const t=e,i=Object.assign({\"X-API-INTERNAL\":D,\"Content-Type\":x.Json},N);return(yield this.requestSender.put(\"/api/storefront/initialization/paypalcommerce\",{headers:i,body:t})).body})}getOrderStatus(e=\"paypalcommerce\",t){return U(this,void 0,void 0,function*(){const i=`/api/storefront/initialization/${e}`,n=Object.assign({\"X-API-INTERNAL\":D,\"Content-Type\":x.Json},N);return(yield this.requestSender.get(i,Object.assign({headers:n},t))).body})}}var _=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class V{constructor(e){this.scriptLoader=e,this.window=window}getPayPalSDK(e,t,i,n){return _(this,void 0,void 0,function*(){const o=this.getPayPalSdkScriptConfigOrThrow(e,t,i);return this.loadPayPalSDK(o,n)})}loadPayPalSDK(e,t=!1){return _(this,void 0,void 0,function*(){if(!this.window.paypal||t){const t=this.transformConfig(e.options),i=this.transformConfig(e.attributes),n=`https://www.paypal.com/sdk/js?${new URLSearchParams(t).toString()}`;yield this.scriptLoader.loadScript(n,{async:!0,attributes:i})}if(!this.window.paypal)throw new h;return this.window.paypal})}getPayPalSdkScriptConfigOrThrow(e,t,i=!0){const{id:n,clientToken:o,initializationData:r}=e;if(!(null==r?void 0:r.clientId))throw new m(l.MissingPaymentMethod);const{intent:a,clientId:s,merchantId:d,buyerCountry:c,attributionId:p,isVenmoEnabled:u,isHostedCheckoutEnabled:h,isPayPalCreditAvailable:y,isDeveloperModeApplicable:g,availableAlternativePaymentMethods:v=[],enabledAlternativePaymentMethods:f=[],isGooglePayEnabled:S}=r,I=h||i,C=\"paypalcommercecreditcards\"===n,b=C?[\"card\"]:[],w=y?[\"credit\",\"paylater\"]:[],P=i||!I,O=u?[\"venmo\"]:[],k=P?f:[],A=S?[\"googlepay\"]:[],E=i?[\"card-fields\"]:[],T=[...C?[]:[\"card\"],...y?[]:[\"credit\",\"paylater\"],...u?[]:[\"venmo\"],...P?v.filter(e=>!f.includes(e)):v],z=[...b,...w,...O,...k];return{options:Object.assign({\"client-id\":s,\"merchant-id\":d,\"enable-funding\":z.length>0?z:void 0,\"disable-funding\":T.length>0?T:void 0,commit:I,components:[\"buttons\",\"hosted-fields\",\"payment-fields\",\"legal\",...A,...E],currency:t,intent:a},g&&{\"buyer-country\":c}),attributes:{\"data-partner-attribution-id\":p,\"data-client-token\":o}}}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}const R=e=>{const{getHost:o}=e.getState();return new B((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_1__.createFormPoster)(),e,new j((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:o()})),new V((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()))},L={\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"};class $ extends u{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class q extends ${constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}class H extends b{constructor(e){super(e,{message:\"There is a problem processing your payment. Please try again later.\"}),this.name=\"PaymentMethodInvalidError\",this.type=\"payment_method_invalid\"}}class G extends u{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}function Y(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}function W(e){return Boolean(e.instrumentId)}const K=function({styles:e}){const t={};return e.color&&(t.color=e.color),e.layout&&(t.layout=e.layout),(e[\"logo-type\"]||e[\"logo-position\"])&&(t.logo={},e[\"logo-type\"]&&(t.logo.type=e[\"logo-type\"]),e[\"logo-position\"]&&(t.logo.position=e[\"logo-position\"])),e.ratio&&(t.ratio=e.ratio),(e[\"text-color\"]||e[\"text-size\"])&&(t.text={},e[\"text-color\"]&&(t.text.color=e[\"text-color\"]),e[\"text-size\"]&&(t.text.size=+e[\"text-size\"])),t};function J(e){return\"object\"==typeof e&&null!==e&&\"bigpayToken\"in e&&\"defaultInstrument\"in e&&\"provider\"in e&&\"trustedShippingAddress\"in e&&\"method\"in e&&\"type\"in e}var X=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Z{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=i,this.loadingIndicator=n}initialize(e){var t;return X(this,void 0,void 0,function*(){const{methodId:i,paypalcommerce:n}=e||{};if(this.paypalcommerce=n,!i)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new $('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(i);const o=this.paymentIntegrationService.getState(),r=o.getPaymentMethodOrThrow(i),{container:a,bannerContainerId:s}=n,{orderId:d,paypalBNPLConfiguration:l=[],isPayPalCreditAvailable:c}=r.initializationData||{};if(void 0!==s){if(!document.getElementById(s))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=null==l?void 0:l.find(({id:e})=>\"checkout\"===e);if(c||!(null==e?void 0:e.status))return;const t=yield this.paypalCommerceSdk.getPayPalMessages(r,o.getCartOrThrow().currency.code);return t&&\"function\"==typeof(null==t?void 0:t.Messages)?this.renderMessages(t,s,e):void console.error(\"[BC PayPalCommerce PayLater]: banner could not be rendered, due to issues with loading PayPal SDK\")}d?this.orderId=null===(t=r.initializationData)||void 0===t?void 0:t.orderId:(this.loadingIndicatorContainer=null==a?void 0:a.split(\"#\")[1],yield this.paypalCommerceIntegrationService.loadPayPalSdk(i),n.onInit&&\"function\"==typeof n.onInit&&n.onInit(()=>this.renderButton(i,n)),(void 0===n.shouldRenderPayPalButtonOnInitialization||n.shouldRenderPayPalButtonOnInitialization)&&this.renderButton(i,n))})}execute(e,t){var i,n;return X(this,void 0,void 0,function*(){const{payment:o}=e,r=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{onError:a}=this.paypalcommerce||{};if(!o)throw new q([\"payment\"]);const{methodId:s,paymentData:d}=o;if(this.isPayPalVaultedInstrumentPaymentData(d)&&!this.orderId&&(this.orderId=yield this.createOrder()),!this.orderId)throw new H;const l=this.isPayPalVaultedInstrumentPaymentData(d)?this.prepareVaultedInstrumentPaymentPayload(s,this.orderId,d):this.preparePaymentPayload(s,this.orderId,d);try{yield this.paymentIntegrationService.submitOrder(r,t),yield this.paymentIntegrationService.submitPayment(l)}catch(e){if(function(e){var t;return(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)&&\"offsite_redirect\"===(null===(t=e.body.additional_action_required)||void 0===t?void 0:t.type)}(e)){const t=null===(n=null===(i=e.body.additional_action_required)||void 0===i?void 0:i.data)||void 0===n?void 0:n.redirect_url;return new Promise(()=>window.location.replace(t))}return this.isProviderError(e)&&(yield this.paypalCommerceIntegrationService.loadPayPalSdk(o.methodId),yield new Promise((e,t)=>{var i;this.paypalcommerce&&(null===(i=this.paypalButton)||void 0===i||i.close(),this.renderButton(o.methodId,this.paypalcommerce),this.handleError(new Error(\"INSTRUMENT_DECLINED\"),a)),t()})),this.handleError(e,a),Promise.reject()}})}finalize(){return Promise.reject(new G)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}prepareVaultedInstrumentPaymentPayload(e,t,i){const{instrumentId:n,shouldSetAsDefaultInstrument:o}=i,r=!this.isTrustedVaultingFlow(i);return r?{methodId:e,paymentData:{shouldSaveInstrument:r,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}:{methodId:e,paymentData:{instrumentId:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t},bigpay_token:{token:n}}}}}preparePaymentPayload(e,t,i){const{shouldSaveInstrument:n=!1,shouldSetAsDefaultInstrument:o=!1}=Y(i)?i:{};return{methodId:e,paymentData:{shouldSaveInstrument:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}}renderButton(e,t){var i,n,o,r;const a=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:d}=s.initializationData||{},{checkoutPaymentButtonStyles:l}=d||{},{container:c,onError:p,onRenderButton:u,onValidate:h,submitForm:m}=t;if(!c)throw new $('Unable to initialize payment because \"container\" argument is not provided.');const y=Object.assign(Object.assign({},this.isPaypalCommerceAppSwitchEnabled(e)&&{appSwitchWhenAvailable:!0}),{fundingSource:a.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(l),createOrder:()=>this.createOrder(),onClick:(e,t)=>this.handleClick(t,h),onApprove:e=>this.handleApprove(e,m),onError:e=>this.handleError(e,p),onCancel:()=>this.toggleLoadingIndicator(!1)});this.paypalButton=a.Buttons(y),this.paypalButton.isEligible()&&(u&&\"function\"==typeof u&&u(),(null===(n=(i=this.paypalButton).hasReturned)||void 0===n?void 0:n.call(i))&&this.isPaypalCommerceAppSwitchEnabled(e)?null===(r=(o=this.paypalButton).resume)||void 0===r||r.call(o):this.paypalButton.render(c))}handleClick(e,t){return X(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;return null==t?void 0:t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,null==t||t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createOrder(){return X(this,void 0,void 0,function*(){const e=this.getFieldsValues();return this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecheckout\",{shouldSaveInstrument:(null==e?void 0:e.shouldSaveInstrument)||!1})})}getFieldsValues(){const{getFieldsValues:e}=this.paypalcommerce||{};return\"function\"==typeof e?e():void 0}isTrustedVaultingFlow(e){if(e&&W(e)){const t=this.paymentIntegrationService.getState().getInstruments(),i=null==t?void 0:t.find(t=>J(t)&&t.bigpayToken===e.instrumentId);return!(J(i)&&!i.trustedShippingAddress)}return!1}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isPayPalVaultedInstrumentPaymentData(e){return!!e&&W(e)&&Y(e)}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:K(i)};e.Messages(n).render(`#${t}`)}isProviderError(e){var t,i,n;return!!function(e){return\"object\"==typeof e&&null!==e&&\"errors\"in e}(e)&&\"INSTRUMENT_DECLINED\"===(null===(n=null===(i=((null===(t=null==e?void 0:e.errors)||void 0===t?void 0:t.filter(e=>e.provider_error))||[])[0])||void 0===i?void 0:i.provider_error)||void 0===n?void 0:n.code)}isPaypalCommerceAppSwitchEnabled(e){var t;return(null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)||!1}}const Q=p(e=>new Z(e,R(e),new g((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()),new S({containerStyles:L})),[{id:\"paypalcommerce\"}]);function ee(){return new g((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.createScriptLoader)())}class te extends u{constructor(e){super(e||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}var ie=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ne{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=i,this.paypalCommerceSdk=n}initialize(e){return ie(this,void 0,void 0,function*(){const{methodId:t,paypalcommerce:i,paypalcommercecredit:n}=e||{},o=n||i;if(!t)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new $('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(t);const r=this.paymentIntegrationService.getState(),a=r.getPaymentMethodOrThrow(t),{paypalBNPLConfiguration:s=[],orderId:d}=a.initializationData||{},{bannerContainerId:l,container:c}=o;if(void 0!==l){if(!document.getElementById(l))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=s&&s.find(({id:e})=>\"checkout\"===e);if(!(null==e?void 0:e.status))return;const t=yield this.paypalCommerceSdk.getPayPalMessages(a,r.getCartOrThrow().currency.code);return this.renderMessages(t,l,e)}d?this.orderId=d:(yield this.paypalCommerceIntegrationService.loadPayPalSdk(t),this.loadingIndicatorContainer=null==c?void 0:c.split(\"#\")[1],this.renderButton(t,o))})}execute(e,t){return ie(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new q([\"payment\"]);if(!this.orderId)throw new H;yield this.paymentIntegrationService.submitOrder(n,t),yield this.paypalCommerceIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new G)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){if(!(null==t?void 0:t.container))throw new $('Unable to initialize payment because \"container\" argument is not provided.');const i=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:r}=o||{},{container:a,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,p=[i.FUNDING.PAYLATER,i.FUNDING.CREDIT];let u=!1;p.forEach(e=>{if(u)return;const t={fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(r),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecreditcheckout\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=i.Buttons(t),this.paypalButton.isEligible()||e!==i.FUNDING.PAYLATER){if(!this.paypalButton.isEligible()&&e===i.FUNDING.CREDIT)throw new te(`PayPal ${e} is not available for your region. Please use PayPal Checkout instead.`);d&&\"function\"==typeof d&&d(),this.paypalButton.render(a),u=!0}})}handleClick(e,t){return ie(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;if(t&&\"function\"==typeof t)return t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,t&&\"function\"==typeof t&&t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:K(i)};e.Messages(n).render(`#${t}`)}}const oe=p(e=>new ne(e,R(e),new S({containerStyles:L}),ee()),[{id:\"paypalcommercecredit\"}]);var re=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ae{constructor(e,t,i){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=i}initialize(e){var t,i;return re(this,void 0,void 0,function*(){const{methodId:n,paypalcommerce:o,paypalcommercevenmo:r}=e||{},a=r||o;if(!n)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!a)throw new $('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(n);const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n);(null===(t=s.initializationData)||void 0===t?void 0:t.orderId)?this.orderId=null===(i=s.initializationData)||void 0===i?void 0:i.orderId:(yield this.paypalCommerceIntegrationService.loadPayPalSdk(n),this.loadingIndicatorContainer=a.container.split(\"#\")[1],this.renderButton(n,a))})}execute(e,t){return re(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new q([\"payment\"]);if(!this.orderId)throw new H;yield this.paymentIntegrationService.submitOrder(n,t),yield this.paypalCommerceIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new G)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){const i=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:r}=o||{},{container:a,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,p={fundingSource:i.FUNDING.VENMO,style:this.paypalCommerceIntegrationService.getValidButtonStyle(r),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmocheckout\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=i.Buttons(p),!this.paypalButton.isEligible())throw new te(\"PayPal Venmo is not available for your region. Please use PayPal Checkout instead.\");d&&\"function\"==typeof d&&d(),this.paypalButton.render(a)}handleClick(e,t){return re(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;return t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,t(),this.toggleLoadingIndicator(!1)}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const se=p(e=>new ae(e,R(e),new S({styles:{backgroundColor:\"black\"}})),[{id:\"paypalcommercevenmo\"}]);class de extends b{constructor(e){super(e,{message:\"The request has timed out or aborted.\"}),this.name=\"TimeoutError\",this.type=\"timeout\"}}function le(e,t,i=!0){var n;return null!==(n=e[t])&&void 0!==n?n:i}var ce=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class pe{constructor(e,t,i,n,o=3e3,r=3e5){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=i,this.loadingIndicator=n,this.pollingInterval=o,this.maxPollingIntervalTime=r,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.isPollingEnabled=!1}initialize(e){return ce(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,paypalcommerce:n,paypalcommercealternativemethods:o}=e,r=o||n;if(this.paypalcommercealternativemethods=o,!i)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!r)throw new $('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument is not provided.');const a=this.paymentIntegrationService.getState(),s=a.getPaymentMethodOrThrow(i,t),{orderId:d,shouldRenderFields:l}=s.initializationData||{},c=a.getStoreConfigOrThrow().checkoutSettings.features;this.isPollingEnabled=le(c,\"PAYPAL-5192.paypal_commerce_ideal_polling\"),d?this.orderId=d:(this.paypalApms=yield this.paypalCommerceSdk.getPayPalApmsSdk(s,a.getCartOrThrow().currency.code),this.loadingIndicatorContainer=r.container.split(\"#\")[1],this.renderButton(i,t,r),l&&this.renderFields(i,r))})}execute(e,t){return ce(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new q([\"payment\"]);const{methodId:o,gatewayId:r}=i;if(!this.orderId)throw new H;this.isPollingEnabled&&\"ideal\"===o&&(yield new Promise((e,t)=>{this.initializePollingMechanism(o,e,t,r)})),this.isNonInstantPaymentMethod(o)||(yield this.paymentIntegrationService.submitOrder(n,t)),yield this.paypalCommerceIntegrationService.submitPayment(o,this.orderId,r)})}finalize(){return Promise.reject(new G)}deinitialize(){var e;return this.orderId=void 0,this.isPollingEnabled&&this.resetPollingMechanism(),null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}initializePollingMechanism(e,t,i,n){return ce(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.paypalCommerceIntegrationService.getOrderStatus(n),r=o===z.Approved,a=o===z.PollingError;if(r)return this.deinitializePollingMechanism(),t();if(a)return i();if(!r&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,paypalcommercealternativemethods:this.paypalcommercealternativemethods}),this.handleError(new de)}catch(e){i()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}reinitializeStrategy(e){return ce(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}handleError(e){const{onError:t}=this.paypalcommercealternativemethods||{};this.isPollingEnabled&&this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderButton(e,t,i){const n=this.getPaypalAmpsSdkOrThrow(),o=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t),{buttonStyle:r}=o.initializationData||{},{container:a,onError:s,onRenderButton:d,submitForm:l}=i,c={fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(r),onInit:(e,t)=>i.onInitButton(t),createOrder:()=>this.onCreateOrder(e,t,i),onApprove:e=>this.handleApprove(e,l),onCancel:()=>{this.toggleLoadingIndicator(!1),this.deinitializePollingMechanism()},onError:e=>{this.deinitializePollingMechanism(),this.handleFailure(e,s)},onClick:(e,t)=>ce(this,void 0,void 0,function*(){return i.onValidate(t.resolve,t.reject)})};this.paypalButton=n.Buttons(c),this.paypalButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.paypalButton.render(a))}onCreateOrder(e,t,i){return ce(this,void 0,void 0,function*(){const{onValidate:n}=i;yield n(()=>(this.toggleLoadingIndicator(!0),()=>Promise.resolve()),lodash__WEBPACK_IMPORTED_MODULE_3__.noop);const o=yield this.paypalCommerceIntegrationService.createOrder(\"paypalcommercealternativemethodscheckout\");if(this.isNonInstantPaymentMethod(e)){const i={useStoreCredit:!1},n={params:{methodId:e,gatewayId:t}};yield this.paymentIntegrationService.submitOrder(i,n),yield this.paypalCommerceIntegrationService.submitPayment(e,o,t)}return o})}handleApprove({orderID:e},t){this.orderId=e,t()}handleFailure(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderFields(e,t){const i=this.getPaypalAmpsSdkOrThrow(),n=this.paymentIntegrationService.getState(),{firstName:o,lastName:r,email:a}=n.getBillingAddressOrThrow(),{apmFieldsContainer:s,apmFieldsStyles:d}=t;if(!s)throw new $('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument should contain \"apmFieldsContainer\".');const l=document.querySelector(s);l&&(l.innerHTML=\"\");const c={fundingSource:e,style:d||{},fields:{name:{value:`${o} ${r}`},email:{value:a}}};i.PaymentFields(c).render(s)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isNonInstantPaymentMethod(e){return e.toUpperCase()in T}getPaypalAmpsSdkOrThrow(){if(!this.paypalApms)throw new h;return this.paypalApms}}const ue=p(e=>new pe(e,R(e),ee(),new S({containerStyles:L})),[{gateway:\"paypalcommercealternativemethods\"}]);var he,me,ye,ge,ve,fe,Se,Ie;!function(e){e.CVV=\"cvv\",e.PAN=\"pan\"}(he||(he={}));class Ce{static get(e){const t=`${encodeURIComponent(`${e}`)}=`,i=document.cookie;let n=null;const o=i.indexOf(t);if(o>-1){let e=i.indexOf(\";\",o);-1===e&&(e=i.length),n=decodeURIComponent(i.substring(o+t.length,e))}return n}static set(e,t,i={secure:!0}){let n=`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;const{expires:o,path:r,domain:a,secure:s}=i;if(o)n+=`; expires=${o.toUTCString()}`;else{const e=new Date,t=60;e.setTime(e.getTime()+60*t*1e3),n+=`; expires=${e.toUTCString()}`}r&&(n+=`; path=${r}`),a&&(n+=`; domain=${a}`),s&&(n+=\"; secure\"),document.cookie=n}static remove(e,t){Ce.set(e,\"\",Object.assign({expires:new Date(0)},t))}}!function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(me||(me={})),function(e){e.Succeeded=\"succeeded\",e.Cancelled=\"cancelled\",e.Errored=\"errored\"}(ye||(ye={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(ge||(ge={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(ve||(ve={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(fe||(fe={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(Se||(Se={})),function(e){e.SUCCEEDED=\"succeeded\",e.FAILED=\"failed\",e.CANCELED=\"canceled\",e.UNRECOGNIZED=\"unrecognized\"}(Ie||(Ie={}));var be,we=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Pe{constructor(){this.window=window}initializePayPalFastlane(e,t,i){return we(this,void 0,void 0,function*(){if(t&&(window.localStorage.setItem(\"fastlaneEnv\",\"sandbox\"),window.localStorage.setItem(\"axoEnv\",\"sandbox\")),!this.window.paypalFastlane){const t={root:{backgroundColorPrimary:\"transparent\"}};this.window.paypalFastlane=yield e.Fastlane({styles:i||t})}return this.window.paypalFastlane})}getPayPalFastlaneOrThrow(){if(!this.window.paypalFastlane)throw new h;return this.window.paypalFastlane}lookupCustomerOrThrow(e){return we(this,void 0,void 0,function*(){return this.getPayPalFastlaneOrThrow().identity.lookupCustomerByEmail(e)})}triggerAuthenticationFlowOrThrow(e){return we(this,void 0,void 0,function*(){return e?this.getPayPalFastlaneOrThrow().identity.triggerAuthenticationFlow(e):{}})}updateStorageSessionId(e){const t=new Date;t.setDate(t.getDate()+14);const i={expires:t,secure:!0};Ce.set(\"bc-fastlane-sessionId\",e,i)}removeStorageSessionId(){Ce.remove(\"bc-fastlane-sessionId\")}getStorageSessionId(){return Ce.get(\"bc-fastlane-sessionId\")||\"\"}mapPayPalFastlaneProfileToBcCustomerData(e,t){var i,n,o;const{authenticationState:r,profileData:a}=t,s=null===(o=null===(n=null===(i=null==a?void 0:a.card)||void 0===i?void 0:i.paymentSource)||void 0===n?void 0:n.card)||void 0===o?void 0:o.billingAddress,d=null==a?void 0:a.shippingAddress,l=null==a?void 0:a.name,c=null==a?void 0:a.card,p=d?this.mapPayPalToBcAddress(d.address,d.name,d.phoneNumber):void 0,u=s&&l?this.mapPayPalToBcAddress(s,l,null==d?void 0:d.phoneNumber):void 0,h=c?this.mapPayPalToBcInstrument(e,c):[],m=this.filterAddresses([p,u]);return{authenticationState:r||Ie.UNRECOGNIZED,addresses:m,billingAddress:u,shippingAddress:p,instruments:h}}mapPayPalToBcInstrument(e,t){const{id:i,paymentSource:n}=t,{brand:o,expiry:r,lastDigits:a}=n.card,[s,d]=r.split(\"-\");return[{bigpayToken:i,brand:o,defaultInstrument:!1,expiryMonth:d,expiryYear:s,iin:\"\",last4:a,method:e,provider:e,trustedShippingAddress:!1,untrustedShippingCardVerificationMode:he.PAN,type:\"card\"}]}mapBcToPayPalAddress(e){return{company:(null==e?void 0:e.company)||\"\",addressLine1:(null==e?void 0:e.address1)||\"\",addressLine2:(null==e?void 0:e.address2)||\"\",adminArea1:(null==e?void 0:e.stateOrProvinceCode)||(null==e?void 0:e.stateOrProvince)||\"\",adminArea2:(null==e?void 0:e.city)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\"}}mapPayPalToBcAddress(e,t,i,n){const[o,r]=t.fullName.split(\" \"),a=(null==i?void 0:i.nationalNumber)||\"\",s=(null==i?void 0:i.countryCode)||\"\";return{id:Date.now(),type:\"paypal-address\",firstName:t.firstName||o||\"\",lastName:t.lastName||r||\"\",company:e.company||\"\",address1:e.addressLine1,address2:e.addressLine2||\"\",city:e.adminArea2,stateOrProvince:e.adminArea1,stateOrProvinceCode:e.adminArea1,country:e.countryCode||\"\",countryCode:e.countryCode||\"\",postalCode:e.postalCode,phone:s+a,customFields:n||[]}}filterAddresses(e){return e.reduce((e,t)=>t?e.some(e=>this.isEqualAddresses(e,t))?e:[...e,t]:e,[])}isEqualAddresses(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.isEqual)(this.normalizeAddress(e),this.normalizeAddress(t))}normalizeAddress(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omit)(e,[\"id\",\"phone\"])}}function Oe(){return new Pe}!function(e){e.CardCode=\"cardCode\",e.CardCodeVerification=\"cardCodeVerification\",e.CardExpiry=\"cardExpiry\",e.CardName=\"cardName\",e.CardNumber=\"cardNumber\",e.CardNumberVerification=\"cardNumberVerification\",e.CardExpiryVerification=\"cardExpiryVerification\"}(be||(be={}));const ke=be;function Ae(e){return ke.CardNumber in e&&ke.CardName in e&&ke.CardExpiry in e}function Ee(e){return ke.CardNumberVerification in e&&ke.CardCodeVerification in e&&ke.CardExpiryVerification in e}class Te extends u{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}var ze;!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(ze||(ze={}));class Fe extends u{constructor(e){super(function(e){switch(e){case ze.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case ze.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case ze.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case ze.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}class Be extends u{constructor(e,t){super(t||\"Unable to proceed because the payment form contains invalid data.\"),this.details=e,this.name=\"PaymentInvalidFormError\",this.type=\"payment_invalid_form\"}}var De=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Me{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=i,this.paypalCommerceFastlaneUtils=n}initialize(e){return De(this,void 0,void 0,function*(){const{methodId:t,paypalcommercecreditcards:i,paypalcommerce:n}=e,o=i||n,{form:r,onCreditCardFieldsRenderingError:a,onLoadComplete:s}=o||{};if(!t)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!r)throw new $('Unable to proceed because \"options.paypalcommercecreditcards.form\" argument is not provided.');this.hostedFormOptions=r,this.isCreditCardForm=Ae(r.fields),this.isCreditCardVaultedForm=Ee(r.fields)&&!this.hasUndefinedValues(),yield this.paymentIntegrationService.loadPaymentMethod(t),yield this.paypalCommerceIntegrationService.loadPayPalSdk(t,void 0,!0,!0),null==s||s(),(this.isCreditCardForm||this.isCreditCardVaultedForm)&&(yield this.initializeFields(r,a)),this.shouldInitializePayPalFastlane(t)&&(yield this.initializePayPalFastlaneOrThrow(t))})}execute(e,t){return De(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{methodId:o,paymentData:r}=i||{};if(!i||!o)throw new q([\"payment\"]);if(this.executionPaymentData=r,this.isCreditCardForm||this.isCreditCardVaultedForm)yield this.validateHostedFormOrThrow(),yield this.submitHostedForm();else{const{orderId:e}=yield this.paypalCommerceIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",this.getInstrumentParams());this.returnedOrderId=e}const a=this.preparePaymentPayload(o,r,this.returnedOrderId,this.returnedVaultedToken);yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment(a)})}finalize(){return Promise.reject(new G)}deinitialize(){var e,t,i,n;return De(this,void 0,void 0,function*(){return yield null===(e=this.cvvField)||void 0===e?void 0:e.close(),yield null===(t=this.expiryField)||void 0===t?void 0:t.close(),yield null===(i=this.numberField)||void 0===i?void 0:i.close(),yield null===(n=this.nameField)||void 0===n?void 0:n.close(),Promise.resolve()})}preparePaymentPayload(e,t,i,n){const{shouldSaveInstrument:o=!1,shouldSetAsDefaultInstrument:a=!1}=Y(t)?t:{},s=t&&W(t)?t.instrumentId:void 0,l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)({verification_nonce:n,token:s},lodash__WEBPACK_IMPORTED_MODULE_3__.isNil);return{methodId:e,paymentData:{shouldSaveInstrument:o,shouldSetAsDefaultInstrument:a,instrumentId:s,formattedPayload:Object.assign(Object.assign({},n||s?{bigpay_token:l}:{}),i?{card_with_order:{order_id:i}}:{})}}}initializeFields(e,t){return De(this,void 0,void 0,function*(){const{fields:i,styles:n}=e,o=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),r=this.getExecuteCallback(i),a=Object.assign({style:this.getInputStyles(n),onApprove:({orderID:e,vaultSetupToken:t,liabilityShift:i})=>{if(i===P.No||i===P.Unknown)throw new Error;return this.handleApprove({orderID:e,vaultSetupToken:t})},onError:()=>{throw new Te},inputEvents:{onChange:t=>this.onChangeHandler(e,t),onFocus:t=>this.onFocusHandler(e,t),onBlur:t=>this.onBlurHandler(e,t),onInputSubmitRequest:t=>this.onInputSubmitRequest(e,t)}},r);if(this.cardFields=yield o.CardFields(a),!this.cardFields.isEligible())throw new Fe(ze.PaymentNotInitialized);try{this.stylizeInputContainers(i),Ae(i)&&(yield this.renderFields(i)),Ee(i)&&(yield this.renderVaultedFields(i))}catch(e){\"function\"==typeof t&&t(e)}})}getExecuteCallback(e){return Ee(e)?this.createVaultSetupTokenCallback():this.createOrderCallback()}createVaultSetupTokenCallback(){return{createVaultSetupToken:()=>De(this,void 0,void 0,function*(){const{setupToken:e}=(yield this.paypalCommerceIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",Object.assign(Object.assign({},this.getInstrumentParams()),{setupToken:!0})))||{};return e})}}createOrderCallback(){return{createOrder:()=>De(this,void 0,void 0,function*(){const{orderId:e}=(yield this.paypalCommerceIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",this.getInstrumentParams()))||{};return e})}}handleApprove({orderID:e,vaultSetupToken:t}){e&&(this.returnedOrderId=e),t&&(this.returnedVaultedToken=t)}renderFields(e){var t,i,n,o;return De(this,void 0,void 0,function*(){const r=this.getCardFieldsOrThrow();(null===(t=e.cardCode)||void 0===t?void 0:t.containerId)&&(this.cvvField=r.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCode.containerId}`)),(null===(i=e.cardExpiry)||void 0===i?void 0:i.containerId)&&(this.expiryField=r.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiry.containerId}`)),(null===(n=e.cardName)||void 0===n?void 0:n.containerId)&&(this.nameField=r.NameField({placeholder:\"\"}),yield this.nameField.render(`#${e.cardName.containerId}`)),(null===(o=e.cardNumber)||void 0===o?void 0:o.containerId)&&(this.numberField=r.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumber.containerId}`))})}renderVaultedFields(e){var t,i,n;return De(this,void 0,void 0,function*(){const o=this.getCardFieldsOrThrow();(null===(t=e.cardCodeVerification)||void 0===t?void 0:t.containerId)&&(this.cvvField=o.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCodeVerification.containerId}`)),(null===(i=e.cardExpiryVerification)||void 0===i?void 0:i.containerId)&&(this.expiryField=o.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiryVerification.containerId}`)),(null===(n=e.cardNumberVerification)||void 0===n?void 0:n.containerId)&&(this.numberField=o.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumberVerification.containerId}`))})}getInstrumentParams(){if(!this.executionPaymentData)return{};if(Y(this.executionPaymentData)){const{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}=this.executionPaymentData;return{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}}if(W(this.executionPaymentData)){const{instrumentId:e}=this.executionPaymentData;return{instrumentId:e}}return{}}getFieldTypeByEmittedField({emittedBy:e}){return{fieldType:this.mapFieldType(e)}}submitHostedForm(){return De(this,void 0,void 0,function*(){const e=this.getCardFieldsOrThrow(),t=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),i={billingAddress:{company:t.company,addressLine1:t.address1,addressLine2:t.address2,adminArea1:t.stateOrProvinceCode,adminArea2:t.city,postalCode:t.postalCode,countryCode:t.countryCode}};try{this.isCreditCardVaultedForm?yield e.submit():yield e.submit(i)}catch(e){throw new Te(\"Failed authentication. Please try to authorize again.\")}})}validateHostedFormOrThrow(){var e,t;return De(this,void 0,void 0,function*(){const i=this.getCardFieldsOrThrow(),n=yield i.getState().then(e=>e),o=this.getValidityData(n);if(!o.isValid)throw null===(t=null===(e=this.hostedFormOptions)||void 0===e?void 0:e.onValidate)||void 0===t||t.call(e,o),new Be(this.mapValidationErrors(o.errors))})}getValidityData({fields:e}){const t=Object.assign({},e);delete t.cardNameField;const i=Object.keys(t);return{isValid:i.every(e=>{var i;return null===(i=t[e])||void 0===i?void 0:i.isValid}),errors:i.reduce((e,i)=>{var n;const o=this.mapFieldType(i);return Object.assign(Object.assign({},e),{[o]:(null===(n=t[i])||void 0===n?void 0:n.isValid)?void 0:[this.getInvalidErrorByFieldType(o)]})},{})}}getInvalidErrorByFieldType(e){switch(e){case ke.CardCode:case ke.CardCodeVerification:return{fieldType:e,message:\"Invalid card code\",type:\"invalid_card_code\"};case ke.CardNumber:case ke.CardNumberVerification:return{fieldType:e,message:\"Invalid card number\",type:\"invalid_card_number\"};case ke.CardExpiry:case ke.CardExpiryVerification:return{fieldType:e,message:\"Invalid card expiry\",type:\"invalid_card_expiry\"};default:return{fieldType:e,message:\"Invalid field\",type:\"invalid\"}}}mapValidationErrors(e={}){const t={};return Object.keys(e).forEach(i=>{var n,o;t[i]=[{message:(null===(o=null===(n=e[i])||void 0===n?void 0:n[0])||void 0===o?void 0:o.message)||\"\",type:i}]}),t}mapFieldType(e){switch(e){case\"name\":return ke.CardName;case\"cardNumberField\":case\"number\":return this.isCreditCardForm?ke.CardNumber:ke.CardNumberVerification;case\"cardExpiryField\":case\"expiry\":return this.isCreditCardForm?ke.CardExpiry:ke.CardExpiryVerification;case\"cardCvvField\":case\"cvv\":return this.isCreditCardForm?ke.CardCode:ke.CardCodeVerification;default:throw new Error(\"Unexpected field type\")}}getCardFieldsOrThrow(){if(!this.cardFields)throw new Fe(ze.PaymentNotInitialized);return this.cardFields}getInputStyles(e){var t,i,n;const o={\"font-size\":(null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.fontSize)||\"1rem\",\"font-family\":(null===(i=null==e?void 0:e.default)||void 0===i?void 0:i.fontFamily)||\"Montserrat, Arial, Helvetica, sans-serif\",\"font-weight\":(null===(n=null==e?void 0:e.default)||void 0===n?void 0:n.fontWeight)||\"400\",outline:\"none\",padding:\"9px 13px\"},r=Object.assign(Object.assign({},o),{color:\"#333333\"});return{input:r,\".invalid\":Object.assign(Object.assign({},o),{color:\"red\"}),\".valid\":r,\":focus\":r}}stylizeInputContainers(e){Object.values(e||{}).forEach(e=>{const t=document.getElementById(`${(null==e?void 0:e.containerId)||\"\"}`);t&&(t.style.padding=\"0px\",t.style.boxShadow=\"none\",t.style.border=\"none\",t.style.background=\"transparent\",t.style.marginBottom=\"10px\",t.style.marginLeft=\"-5px\")})}hasUndefinedValues(){return!this.hostedFormOptions||Object.values(this.hostedFormOptions.fields).some(e=>void 0===e)}onChangeHandler(e,t){var i;null===(i=null==e?void 0:e.onValidate)||void 0===i||i.call(e,this.getValidityData(t))}onFocusHandler(e,t){var i;null===(i=null==e?void 0:e.onFocus)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onBlurHandler(e,t){var i;null===(i=null==e?void 0:e.onBlur)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onInputSubmitRequest(e,t){var i;null===(i=null==e?void 0:e.onEnter)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}shouldInitializePayPalFastlane(e){var t,i;const n=this.paymentIntegrationService.getState(),o=n.getPaymentMethodOrThrow(e),r=n.getPaymentProviderCustomer(),a=(s=r)&&(\"authenticationState\"in s||\"addresses\"in s||\"instruments\"in s)?r:{};var s;return(null===(t=null==o?void 0:o.initializationData)||void 0===t?void 0:t.isAcceleratedCheckoutEnabled)&&(null===(i=null==o?void 0:o.initializationData)||void 0===i?void 0:i.isPayPalCommerceAnalyticsV2Enabled)&&!(null==a?void 0:a.authenticationState)}initializePayPalFastlaneOrThrow(e){return De(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getPaymentMethodOrThrow(e),{initializationData:o}=n;if(!(null==o?void 0:o.connectClientToken))return;const r=yield this.paypalCommerceSdk.getPayPalFastlaneSdk(n,i.currency.code,i.id);yield this.paypalCommerceFastlaneUtils.initializePayPalFastlane(r,!!(null==o?void 0:o.isDeveloperModeApplicable))}catch(e){}})}}const xe=p(e=>new Me(e,R(e),ee(),Oe()),[{id:\"paypalcommercecreditcards\"}]);var Ne=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ue{constructor(e,t,i,n=3e3,o=3e5){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=i,this.pollingInterval=n,this.maxPollingIntervalTime=o,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return Ne(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,paypalcommerceratepay:n}=e;if(!i)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!n)throw new $('Unable to initialize payment because \"options.paypalcommerceratepay\" argument is not provided.');const{legalTextContainer:o,container:r,loadingContainerId:a}=n;if(!r)throw new $('Unable to initialize payment because \"options.container\" argument is not provided.');if(!o)throw new $('Unable to initialize payment because \"options.legalTextContainer\" argument is not provided.');if(!a)throw new $('Unable to initialize payment because \"options.loadingContainerId\" argument is not provided.');this.loadingIndicatorContainer=a;const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i,t),{merchantId:d}=s.initializationData||{};if(!d)throw new $(\"Unable to initialize payment because merchantId argument is not provided.\");this.paypalcommerceratepay=n,yield this.paypalCommerceIntegrationService.loadPayPalSdk(i),this.createFraudNetScript(d,i,t),this.loadFraudnetConfig(),this.renderLegalText(o,r)})}execute(e,t){return Ne(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{getFieldsValues:o}=this.paypalcommerceratepay||{};if(!i)throw new q([\"payment\"]);if(!o||\"function\"!=typeof o)throw new $('Unable to initialize payment because \"options.getFieldsValues\" argument is not provided.');this.toggleLoadingIndicator(!0);try{const e=yield this.paypalCommerceIntegrationService.createOrder(\"paypalcommercealternativemethodscheckout\",{metadataId:this.guid}),{ratepayBirthDate:r,ratepayPhoneNumber:a,ratepayPhoneCountryCode:s}=o(),d={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:i.methodId,rate_pay:{birth_date:this.normalizeDate(r),phone:{national_number:a,country_code:s.split(\"+\")[1]}},paypal_account:{order_id:e}}};return yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment({methodId:i.methodId,paymentData:d}),yield new Promise((e,t)=>{this.initializePollingMechanism(i.methodId,e,t,i.gatewayId)})}catch(e){return this.handleError(e),new Promise((e,t)=>t())}})}finalize(){return Promise.reject(new G)}deinitialize(){const{legalTextContainer:e}=this.paypalcommerceratepay||{},t=document.querySelectorAll('[data-id=\"fraudnetScript\"]')[0],i=document.querySelectorAll('[data-id=\"fraudnetConfig\"]')[0];if(this.deinitializePollingMechanism(),t.remove(),i.remove(),e){const t=document.getElementById(e);null==t||t.remove()}return Promise.resolve()}normalizeDate(e){const t=this.formatDate(e.getDate()),i=this.formatDate(e.getMonth()+1);return`${e.getFullYear()}-${i}-${t}`}formatDate(e){return`${e<10?0:\"\"}${e}`}renderLegalText(e,t){const i=e,n=t.split(\"#\")[1],o=document.getElementById(n),r=null==o?void 0:o.parentNode,a=document.createElement(\"div\");a.style.marginBottom=\"20px\",a.setAttribute(\"id\",i),null==r||r.prepend(a);const s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),d=s.Legal({fundingSource:s.Legal.FUNDING.PAY_UPON_INVOICE});if(!document.getElementById(i))throw new $('Unable to initialize payment because \"legalTextContainerElement\" argument is not found.');d.render(`#${i}`)}handleError(e){const{onError:t}=this.paypalcommerceratepay||{};this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createFraudNetScript(e,t,i){const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t,i),{testMode:o}=n.config,r=document.createElement(\"script\");r.setAttribute(\"type\",\"application/json\"),r.setAttribute(\"fncls\",\"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99\"),r.setAttribute(\"data-id\",\"fraudnetScript\"),this.guid=this.generateGUID();const a={f:this.guid,s:`${e}_checkout-page`,sandbox:o};r.innerHTML=JSON.stringify(a),document.body.appendChild(r)}generateGUID(){let e=\"\";for(let t=0;t<32;t+=1)e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"[Math.floor(62*Math.random())];return e}loadFraudnetConfig(){const e=document.createElement(\"script\");e.setAttribute(\"data-id\",\"fraudnetConfig\"),e.src=\"https://c.paypal.com/da/r/fb.js\",document.body.appendChild(e)}reinitializeStrategy(e){return Ne(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}initializePollingMechanism(e,t,i,n){return Ne(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.paypalCommerceIntegrationService.getOrderStatus(\"paypalcommercealternativemethods\",{params:{useMetadata:!0}}),r=o===z.PollingStop,a=o===z.PollingError;if(r)return this.deinitializePollingMechanism(),t();if(a)return i();if(!r&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,paypalcommerceratepay:this.paypalcommerceratepay}),this.handleError(new de)}catch(e){this.handleError(e),i()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const je=p(e=>new Ue(e,R(e),new S({containerStyles:Object.assign(Object.assign({},L),{position:\"fixed\"})})),[{gateway:\"paypalcommercealternativemethods\",id:\"ratepay\"}]);function _e(e){return\"string\"!=typeof e}function Ve(e,t){if(t||e)return function(e){var t,i;const n={},o=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.root,_e),r=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.input,_e),a=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.toggle,_e),s=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(t=e.text)||void 0===t?void 0:t.body,_e),l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(i=e.text)||void 0===i?void 0:i.caption,_e),c=e.branding;return Object.keys(o).length&&(n.root=o),Object.keys(r).length&&(n.input=r),Object.keys(a).length&&(n.toggle=a),Object.keys(s).length&&(n.text={},n.text.body=s),Object.keys(l).length&&(n.text=Object.assign({},n.text),n.text.caption=l),c&&(n.branding=c),n}(function(e,t){var i,n,o,r,a,s,d,l,c,p,u,h,m,y,g,v,f,S,I,C,b,w;return{root:{backgroundColorPrimary:(null==e?void 0:e.fastlaneRootSettingsBackgroundColor)||(null===(i=null==t?void 0:t.root)||void 0===i?void 0:i.backgroundColorPrimary),errorColor:(null==e?void 0:e.fastlaneRootSettingsErrorColor)||(null===(n=null==t?void 0:t.root)||void 0===n?void 0:n.errorColor),fontFamily:(null==e?void 0:e.fastlaneRootSettingsFontFamily)||(null===(o=null==t?void 0:t.root)||void 0===o?void 0:o.fontFamily),fontSizeBase:(null==e?void 0:e.fastlaneRootSettingsFontSize)||(null===(r=null==t?void 0:t.root)||void 0===r?void 0:r.fontSizeBase),padding:(null==e?void 0:e.fastlaneRootSettingsPadding)||(null===(a=null==t?void 0:t.root)||void 0===a?void 0:a.padding),primaryColor:(null==e?void 0:e.fastlaneRootSettingsPrimaryColor)||(null===(s=null==t?void 0:t.root)||void 0===s?void 0:s.primaryColor)},input:{borderRadius:(null==e?void 0:e.fastlaneInputSettingsBorderRadius)||(null===(d=null==t?void 0:t.input)||void 0===d?void 0:d.borderRadius),borderColor:(null==e?void 0:e.fastlaneInputSettingsBorderColor)||(null===(l=null==t?void 0:t.input)||void 0===l?void 0:l.borderColor),focusBorderColor:(null==e?void 0:e.fastlaneInputSettingsFocusBorderBase)||(null===(c=null==t?void 0:t.input)||void 0===c?void 0:c.focusBorderColor),backgroundColor:(null==e?void 0:e.fastlaneInputSettingsBackgroundColor)||(null===(p=null==t?void 0:t.input)||void 0===p?void 0:p.backgroundColor),borderWidth:(null==e?void 0:e.fastlaneInputSettingsBorderWidth)||(null===(u=null==t?void 0:t.input)||void 0===u?void 0:u.borderWidth),textColorBase:(null==e?void 0:e.fastlaneInputSettingsTextColorBase)||(null===(h=null==t?void 0:t.input)||void 0===h?void 0:h.textColorBase)},toggle:{colorPrimary:(null==e?void 0:e.fastlaneToggleSettingsColorPrimary)||(null===(m=null==t?void 0:t.toggle)||void 0===m?void 0:m.colorPrimary),colorSecondary:(null==e?void 0:e.fastlaneToggleSettingsColorSecondary)||(null===(y=null==t?void 0:t.toggle)||void 0===y?void 0:y.colorSecondary)},text:{body:{color:(null==e?void 0:e.fastlaneTextBodySettingsColor)||(null===(v=null===(g=null==t?void 0:t.text)||void 0===g?void 0:g.body)||void 0===v?void 0:v.color),fontSize:(null==e?void 0:e.fastlaneTextBodySettingsFontSize)||(null===(S=null===(f=null==t?void 0:t.text)||void 0===f?void 0:f.body)||void 0===S?void 0:S.fontSize)},caption:{color:(null==e?void 0:e.fastlaneTextCaptionSettingsColor)||(null===(C=null===(I=null==t?void 0:t.text)||void 0===I?void 0:I.caption)||void 0===C?void 0:C.color),fontSize:(null==e?void 0:e.fastlaneTextCaptionSettingsFontSize)||(null===(w=null===(b=null==t?void 0:t.text)||void 0===b?void 0:b.caption)||void 0===w?void 0:w.fontSize)}},branding:(null==e?void 0:e.fastlaneBrandingSettings)||(null==t?void 0:t.branding)}}(e,t))}function Re(e){return!!e&&(\"authenticationState\"in e||\"addresses\"in e||\"instruments\"in e)}var Le=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class $e{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceRequestSender=t,this.paypalCommerceSdk=i,this.paypalCommerceFastlaneUtils=n}initialize(e){var t,i;return Le(this,void 0,void 0,function*(){const{methodId:n,paypalcommercefastlane:o}=e;if(this.methodId=n,this.paypalcommercefastlane=o,!n)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new $('Unable to initialize payment because \"options.paypalcommercefastlane\" argument is not provided.');if(!o.onInit||\"function\"!=typeof o.onInit)throw new $('Unable to initialize payment because \"options.paypalcommercefastlane.onInit\" argument is not provided or it is not a function.');if(!o.onChange||\"function\"!=typeof o.onChange)throw new $('Unable to initialize payment because \"options.paypalcommercefastlane.onChange\" argument is not provided or it is not a function.');yield this.paymentIntegrationService.loadPaymentMethod(n);const r=this.paymentIntegrationService.getState(),a=r.getCartOrThrow(),s=r.getPaymentMethodOrThrow(n),{isDeveloperModeApplicable:d,isFastlaneStylingEnabled:l}=s.initializationData||{};this.threeDSVerificationMethod=null===(t=s.initializationData)||void 0===t?void 0:t.threeDSVerificationMethod,this.paypalFastlaneSdk=yield this.paypalCommerceSdk.getPayPalFastlaneSdk(s,a.currency.code,a.id);const c=Ve(l?null===(i=null==s?void 0:s.initializationData)||void 0===i?void 0:i.fastlaneStyles:{},null==o?void 0:o.styles);yield this.paypalCommerceFastlaneUtils.initializePayPalFastlane(this.paypalFastlaneSdk,!!d,c),this.shouldRunAuthenticationFlow()&&(yield this.runPayPalAuthenticationFlowOrThrow(n)),yield this.initializePayPalPaymentComponent(),o.onInit(e=>this.renderPayPalPaymentComponent(e)),o.onChange(()=>this.handlePayPalStoredInstrumentChange(n))})}execute(e,t){return Le(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new q([\"payment\"]);const{paymentData:o,methodId:r}=i,a=o&&W(o);try{yield this.paymentIntegrationService.submitOrder(n,t);const e=a?yield this.prepareVaultedInstrumentPaymentPayload(r,o):yield this.preparePaymentPayload(r,o);yield this.paymentIntegrationService.submitPayment(e),this.paypalCommerceFastlaneUtils.removeStorageSessionId()}catch(e){if(function(e){return\"object\"==typeof e&&null!==e&&\"message\"in e&&\"response\"in e&&\"body\"in e.response&&\"name\"in e.response.body}(e)&&\"INVALID_REQUEST\"===e.response.body.name){const e={translationKey:\"payment.errors.invalid_request_error\"};return this.handleError(e),Promise.reject()}if(e instanceof Error&&\"FastlaneError\"!==e.name)throw e;return Promise.reject()}})}finalize(){return Promise.reject(new G)}deinitialize(){return Le(this,void 0,void 0,function*(){return Promise.resolve()})}shouldRunAuthenticationFlow(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getCustomerOrThrow(),n=e.getPaymentProviderCustomer(),o=Re(n)?n:{},r=this.paypalCommerceFastlaneUtils.getStorageSessionId();return!(!i.isGuest||(null==o?void 0:o.authenticationState)===Ie.CANCELED||(null==o?void 0:o.authenticationState)||r!==t.id)}runPayPalAuthenticationFlowOrThrow(e){return Le(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getCustomer(),o=t.getBillingAddress(),r=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:a}=yield this.paypalCommerceFastlaneUtils.lookupCustomerOrThrow(r),s=yield this.paypalCommerceFastlaneUtils.triggerAuthenticationFlowOrThrow(a),{authenticationState:d,addresses:l,instruments:c}=this.paypalCommerceFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,s);yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:d,addresses:l,instruments:c}),s.authenticationState===Ie.CANCELED?this.paypalCommerceFastlaneUtils.removeStorageSessionId():this.paypalCommerceFastlaneUtils.updateStorageSessionId(i.id)}catch(e){}})}initializePayPalPaymentComponent(){return Le(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),t=e.phone,i=`${e.firstName} ${e.lastName}`.trim(),n=this.paypalCommerceFastlaneUtils.getPayPalFastlaneOrThrow(),o={fields:Object.assign({cardholderName:{prefill:i,enabled:!0}},t&&{phoneNumber:{prefill:t}})};this.paypalComponentMethods=yield n.FastlaneCardComponent(o)})}renderPayPalPaymentComponent(e){const t=this.getPayPalComponentMethodsOrThrow();if(!e)throw new $('Unable to render card component because \"container\" argument is not provided.');t.render(e)}getPayPalComponentMethodsOrThrow(){if(!this.paypalComponentMethods)throw new h;return this.paypalComponentMethods}prepareVaultedInstrumentPaymentPayload(e,t){return Le(this,void 0,void 0,function*(){const{instrumentId:i}=t,n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),o=this.isPaypalCommerceFastlaneThreeDSAvailable()&&n.config.is3dsEnabled;o||(yield this.createOrder(i));const r=o?yield this.get3DSNonce(i):i;return{methodId:e,paymentData:{formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:r}}}}})}preparePaymentPayload(e,t){return Le(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getBillingAddressOrThrow(),o=i.getPaymentMethodOrThrow(e),r=`${n.firstName} ${n.lastName}`.trim(),{getPaymentToken:a}=this.getPayPalComponentMethodsOrThrow(),{id:s}=yield a({name:{fullName:r},billingAddress:this.paypalCommerceFastlaneUtils.mapBcToPayPalAddress(n)}),d=this.isPaypalCommerceFastlaneThreeDSAvailable()&&o.config.is3dsEnabled;d||(yield this.createOrder(s));const l=d?yield this.get3DSNonce(s):s,{shouldSaveInstrument:c=!1,shouldSetAsDefaultInstrument:p=!1}=Y(t)?t:{};return{methodId:e,paymentData:Object.assign(Object.assign({},t),{shouldSaveInstrument:c,shouldSetAsDefaultInstrument:p,formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:l}}})}})}createOrder(e){return Le(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getCartOrThrow().id;if(this.methodId){const{orderId:i}=yield this.paypalCommerceRequestSender.createOrder(this.methodId,{cartId:t,fastlaneToken:e});this.orderId=i}})}get3DSNonce(e){var t;return Le(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getCartOrThrow(),o=i.getOrderOrThrow(),r=i.getStoreConfigOrThrow().links.checkoutLink,a=null===(t=this.paypalFastlaneSdk)||void 0===t?void 0:t.ThreeDomainSecureClient;if(!a)throw new h;const s={amount:o.orderAmount.toFixed(2),currency:n.currency.code,nonce:e,threeDSRequested:\"SCA_ALWAYS\"===this.threeDSVerificationMethod,transactionContext:{experience_context:{locale:\"en-US\",return_url:r,cancel_url:r}}};if(yield a.isEligible(s)){const{liabilityShift:e,authenticationState:t,nonce:i}=yield a.show();if(e===P.No||e===P.Unknown||t===ye.Errored||t===ye.Cancelled)throw new H;if(t===ye.Succeeded)return yield this.createOrder(i),i}return e})}handlePayPalStoredInstrumentChange(e){return Le(this,void 0,void 0,function*(){const t=this.paypalCommerceFastlaneUtils.getPayPalFastlaneOrThrow(),{selectionChanged:i,selectedCard:n}=yield t.profile.showCardSelector();if(i){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomer(),i=Re(t)?t:{},o=this.paypalCommerceFastlaneUtils.mapPayPalToBcInstrument(e,n)[0];return yield this.paymentIntegrationService.updatePaymentProviderCustomer(Object.assign(Object.assign({},i),{instruments:[o]})),o}})}isPaypalCommerceFastlaneThreeDSAvailable(){return le(this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features,\"PROJECT-7080.paypalcommerce_fastlane_three_ds\")}handleError(e){var t;(null===(t=this.paypalcommercefastlane)||void 0===t?void 0:t.onError)&&\"function\"==typeof this.paypalcommercefastlane.onError&&this.paypalcommercefastlane.onError(e)}}const qe=p(e=>{const{getHost:t}=e.getState();return new $e(e,new j((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()})),ee(),Oe())},[{id:\"paypalcommerceacceleratedcheckout\"}]);var He=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ge{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return He(this,void 0,void 0,function*(){const{paypalcommerce:t,methodId:i}=e;if(!i)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');if(!t.container)throw new $('Unable to initialize payment because \"options.paypalcommerce.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new $('Unable to initialize payment because \"options.paypalcommerce.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.paypalCommerceIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return He(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signInCustomer(e,t),Promise.resolve()})}signOut(e){return He(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){var i,n;const{container:o,onClick:r,onComplete:a}=t,s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:l,paymentButtonStyles:c,isAppSwitchEnabled:p}=d.initializationData||{},{checkoutTopButtonStyles:u}=c||{},h=Object.assign(Object.assign(Object.assign({},this.isPaypalCommerceAppSwitchEnabled(e)&&{appSwitchWhenAvailable:!0}),{createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommerce\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)}),r&&{onClick:()=>r()}),m=Object.assign(Object.assign({},!p&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,a)}),y=Object.assign(Object.assign({fundingSource:s.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},u),{height:36}))},h),l&&m),g=s.Buttons(y);g.isEligible()?(null===(i=g.hasReturned)||void 0===i?void 0:i.call(g))&&this.isPaypalCommerceAppSwitchEnabled(e)?null===(n=g.resume)||void 0===n||n.call(g):g.render(`#${o}`):this.paypalCommerceIntegrationService.removeElement(o)}onHostedCheckoutApprove(e,t,i,n){return He(this,void 0,void 0,function*(){if(!e.orderID)throw new m(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return He(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return He(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}isPaypalCommerceAppSwitchEnabled(e){var t;return(null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)||!1}}const Ye=p(e=>new Ge(e,R(e)),[{id:\"paypalcommerce\"}]);var We=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ke{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return We(this,void 0,void 0,function*(){const{paypalcommercecredit:t,methodId:i}=e;if(!i)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.paypalcommercecredit\" argument is not provided.');if(!t.container)throw new $('Unable to initialize payment because \"options.paypalcommercecredit.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new $('Unable to initialize payment because \"options.paypalcommercecredit.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.paypalCommerceIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return We(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return We(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onComplete:n,onClick:o}=t,r=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d,isAppSwitchEnabled:l}=a.initializationData||{},{checkoutTopButtonStyles:c}=d||{},p=Object.assign({createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecredit\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)},o&&{onClick:()=>o()}),u=Object.assign(Object.assign({},!l&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,n)}),h=[r.FUNDING.PAYLATER,r.FUNDING.CREDIT];let m=!1;h.forEach(e=>{if(!m){const t=Object.assign(Object.assign({fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},c),{height:36}))},p),s&&u),n=r.Buttons(t);n.isEligible()&&(n.render(`#${i}`),m=!0)}}),m||this.paypalCommerceIntegrationService.removeElement(i)}onHostedCheckoutApprove(e,t,i,n){return We(this,void 0,void 0,function*(){if(!e.orderID)throw new m(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return We(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return We(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const Je=p(e=>new Ke(e,R(e)),[{id:\"paypalcommercecredit\"}]);var Xe=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ze{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){return Xe(this,void 0,void 0,function*(){const{paypalcommercevenmo:t,methodId:i}=e;if(!i)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');if(!t.container)throw new $('Unable to initialize payment because \"options.paypalcommercevenmo.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new $('Unable to initialize payment because \"options.paypalcommercevenmo.onClick\" argument is not a function.');this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.paypalCommerceIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return Xe(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return Xe(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onClick:n}=t,o=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:a}=r.initializationData||{},{checkoutTopButtonStyles:s}=a||{},d=Object.assign({fundingSource:o.FUNDING.VENMO,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},s),{height:36})),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmo\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)},n&&{onClick:()=>n()}),l=o.Buttons(d);l.isEligible()?l.render(`#${i}`):this.paypalCommerceIntegrationService.removeElement(i)}}const Qe=p(e=>new Ze(e,R(e)),[{id:\"paypalcommercevenmo\"}]);var et=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class tt{constructor(e,t,i){this.paymentIntegrationService=e,this.paypalCommerceSdk=t,this.paypalCommerceFastlaneUtils=i}initialize(e){var t;return et(this,void 0,void 0,function*(){const{methodId:i,paypalcommercefastlane:n}=e;if(!i)throw new $('Unable to proceed because \"methodId\" argument is not provided.');try{yield this.paymentIntegrationService.loadPaymentMethod(i);const e=this.paymentIntegrationService.getState(),o=e.getCartOrThrow(),r=e.getPaymentMethodOrThrow(i),a=!!(null===(t=r.initializationData)||void 0===t?void 0:t.isDeveloperModeApplicable),s=yield this.paypalCommerceSdk.getPayPalFastlaneSdk(r,o.currency.code,o.id);yield this.paypalCommerceFastlaneUtils.initializePayPalFastlane(s,a,this.getFastlaneStyles(i,n))}catch(e){}return Promise.resolve()})}deinitialize(){return et(this,void 0,void 0,function*(){return Promise.resolve()})}signIn(e,t){return et(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return et(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){return et(this,void 0,void 0,function*(){const{checkoutPaymentMethodExecuted:t,continueWithCheckoutCallback:i,methodId:n}=e||{};if(!n)throw new $('Unable to proceed because \"methodId\" argument is not provided.');if(\"function\"!=typeof i)throw new $('Unable to proceed because \"continueWithCheckoutCallback\" argument is not provided and it must be a function.');if(this.paymentIntegrationService.getState().getCustomerOrThrow().isGuest){t&&\"function\"==typeof t&&t();try{yield this.runPayPalAuthenticationFlowOrThrow(n)}catch(e){}}i()})}runPayPalAuthenticationFlowOrThrow(e){return et(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow().id,n=t.getCustomer(),o=t.getBillingAddress(),r=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:a}=yield this.paypalCommerceFastlaneUtils.lookupCustomerOrThrow(r),s=yield this.paypalCommerceFastlaneUtils.triggerAuthenticationFlowOrThrow(a),d=s.authenticationState===Ie.CANCELED;yield this.updateCustomerDataState(e,s),d?this.paypalCommerceFastlaneUtils.removeStorageSessionId():this.paypalCommerceFastlaneUtils.updateStorageSessionId(i)})}updateCustomerDataState(e,t){var i;return et(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getCartOrThrow(),{authenticationState:o,addresses:r,billingAddress:a,shippingAddress:s,instruments:d}=this.paypalCommerceFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,t);if(yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:o,addresses:r,instruments:d}),a&&(yield this.paymentIntegrationService.updateBillingAddress(a)),s&&n.lineItems.physicalItems.length>0){const t=yield this.paymentIntegrationService.updateShippingAddress(s),n=t.getPaymentMethodOrThrow(e),{isFastlaneShippingOptionAutoSelectEnabled:o}=n.initializationData||{},r=t.getConsignments()||[],a=(null===(i=r[0])||void 0===i?void 0:i.availableShippingOptions)||[],d=a[0],l=a.find(e=>e.isRecommended);if((l||d)&&o){const e=(null==l?void 0:l.id)||d.id;yield this.paymentIntegrationService.selectShippingOption(e)}}})}getFastlaneStyles(e,t){const i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{fastlaneStyles:n,isFastlaneStylingEnabled:o}=i.initializationData||{};return Ve(o?n:{},null==t?void 0:t.styles)}}const it=p(e=>new tt(e,ee(),Oe()),[{id:\"paypalcommerceacceleratedcheckout\"},{id:\"paypalcommercecreditcards\"}]);var nt=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ot{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){var t;return nt(this,void 0,void 0,function*(){const{paypalcommerce:i,containerId:n,methodId:o}=e,r=Boolean(null==i?void 0:i.buyNowInitializeOptions);if(!o)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new $('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!i)throw new $('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');if(r&&!i.currencyCode)throw new $('Unable to initialize payment because \"options.paypalcommerce.currencyCode\" argument is not provided.');if(r&&\"function\"!=typeof(null===(t=i.buyNowInitializeOptions)||void 0===t?void 0:t.getBuyNowCartRequestBody))throw new $('Unable to initialize payment because \"options.paypalcommerce.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');r||(yield this.paymentIntegrationService.loadDefaultCheckout());const a=r?i.currencyCode:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(o,a,!1),this.renderButton(n,o,i,r)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i,n){var o,r;const{buyNowInitializeOptions:a,style:s,onComplete:d,onEligibilityFailure:l}=i,c=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),p=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:u,isAppSwitchEnabled:h}=p.initializationData||{},m=Object.assign(Object.assign({},!n&&this.isPaypalCommerceAppSwitchEnabled(t)&&{appSwitchWhenAvailable:!0}),{createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommerce\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)}),y={onClick:()=>this.handleClick(a),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},g=Object.assign(Object.assign({},!h&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,d)}),v=Object.assign(Object.assign(Object.assign({fundingSource:c.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(s)},m),a&&y),u&&g),f=c.Buttons(v);f.isEligible()?(null===(o=f.hasReturned)||void 0===o?void 0:o.call(f))&&this.isPaypalCommerceAppSwitchEnabled(t)?null===(r=f.resume)||void 0===r||r.call(f):f.render(`#${e}`):l&&\"function\"==typeof l?l():this.paypalCommerceIntegrationService.removeElement(e)}handleClick(e){return nt(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,i,n){return nt(this,void 0,void 0,function*(){if(!e.orderID)throw new m(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return nt(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return nt(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}isPaypalCommerceAppSwitchEnabled(e){var t;return(null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)||!1}}const rt=p(e=>new ot(e,R(e)),[{id:\"paypalcommerce\"}]);var at=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class st{constructor(e,t,i){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=i}initialize(e){var t;return at(this,void 0,void 0,function*(){const{paypalcommercecredit:i,containerId:n,methodId:o}=e,{buyNowInitializeOptions:r,currencyCode:a,messagingContainerId:s}=i||{},d=!!r;if(!o)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new $('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!i)throw new $('Unable to initialize payment because \"options.paypalcommercecredit\" argument is not provided.');if(d&&!a)throw new $('Unable to initialize payment because \"options.paypalcommercecredit.currencyCode\" argument is not provided.');if(d&&\"function\"!=typeof(null==r?void 0:r.getBuyNowCartRequestBody))throw new $('Unable to initialize payment because \"options.paypalcommercecredit.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');d||(yield this.paymentIntegrationService.loadDefaultCheckout());const l=this.paymentIntegrationService.getState(),c=d?a:l.getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(o,c,!1),this.renderButton(n,o,i);const p=l.getStoreConfigOrThrow().checkoutSettings.features;if(null!==(t=p[\"PAYPAL-5557.Hide_ppc_banner_implementation\"])&&void 0!==t&&t)return;const u=s&&document.getElementById(s);if(c&&u){const e=l.getPaymentMethodOrThrow(o),{paypalBNPLConfiguration:t=[]}=e.initializationData||{},i=t&&t.find(({id:e})=>\"cart\"===e);if(!(null==i?void 0:i.status))return;u.removeAttribute(\"data-pp-style-logo-type\"),u.removeAttribute(\"data-pp-style-logo-position\"),u.removeAttribute(\"data-pp-style-text-color\"),u.removeAttribute(\"data-pp-style-text-size\");const n=yield this.paypalCommerceSdk.getPayPalMessages(e,c);this.renderMessages(n,s,i)}})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onComplete:r,onEligibilityFailure:a}=i,s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:l,isAppSwitchEnabled:c}=d.initializationData||{},p={createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecredit\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)},u={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},h=Object.assign(Object.assign({},!c&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,r)}),m=[s.FUNDING.PAYLATER,s.FUNDING.CREDIT];let y=!1;m.forEach(t=>{if(!y){const i=Object.assign(Object.assign(Object.assign({fundingSource:t,style:this.paypalCommerceIntegrationService.getValidButtonStyle(o)},p),n&&u),l&&h),r=s.Buttons(i);r.isEligible()?(r.render(`#${e}`),y=!0):a&&\"function\"==typeof a&&a()}}),y||this.paypalCommerceIntegrationService.removeElement(e)}handleClick(e){return at(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,i,n){return at(this,void 0,void 0,function*(){if(!e.orderID)throw new m(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return at(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return at(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"cart\",style:K(i)};e.Messages(n).render(`#${t}`)}}const dt=p(e=>new st(e,R(e),ee()),[{id:\"paypalcommercecredit\"}]);var lt=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ct{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){return lt(this,void 0,void 0,function*(){const{paypalcommercevenmo:t,containerId:i,methodId:n}=e,{buyNowInitializeOptions:o,currencyCode:r}=t||{},a=!!o;if(!n)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new $('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');if(a&&!r)throw new $('Unable to initialize payment because \"options.paypalcommercevenmo.currencyCode\" argument is not provided.');if(a&&\"function\"!=typeof(null==o?void 0:o.getBuyNowCartRequestBody))throw new $('Unable to initialize payment because \"options.paypalcommercevenmo.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');a||(yield this.paymentIntegrationService.loadDefaultCheckout());const s=a?r:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(n,s,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onEligibilityFailure:r}=i,a=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),s=a.FUNDING.VENMO,d={createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmo\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:s,style:this.getValidVenmoButtonStyles(o)},d),n&&l),p=a.Buttons(c);p.isEligible()?p.render(`#${e}`):r&&\"function\"==typeof r?r():this.paypalCommerceIntegrationService.removeElement(e)}getValidVenmoButtonStyles(e){const t=this.paypalCommerceIntegrationService.getValidButtonStyle(e);return t.color===A.gold?Object.assign(Object.assign({},t),{color:void 0}):t}handleClick(e){return lt(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const pt=p(e=>new ct(e,R(e)),[{id:\"paypalcommercevenmo\"}]);var ut=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ht{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){return ut(this,void 0,void 0,function*(){const{paypalcommercealternativemethods:t,containerId:i,methodId:n}=e,{apm:o,buyNowInitializeOptions:r,currencyCode:a}=t||{},s=!!r;if(!n)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new $('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument is not provided.');if(!o)throw new $('Unable to initialize payment because \"options.paypalcommercealternativemethods.apm\" argument is not provided.');if(s&&!a)throw new $('Unable to initialize payment because \"options.paypalcommercealternativemethods.currencyCode\" argument is not provided.');if(s&&\"function\"!=typeof(null==r?void 0:r.getBuyNowCartRequestBody))throw new $('Unable to initialize payment because \"options.paypalcommercealternativemethods.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');s||(yield this.paymentIntegrationService.loadDefaultCheckout());const d=s?a:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(n,d,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{apm:n,buyNowInitializeOptions:o,style:r,onEligibilityFailure:a}=i,s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow();if(!Object.values(s.FUNDING).includes(n))throw new $('Unable to initialize PayPal button because \"options.paypalcommercealternativemethods.apm\" argument is not valid funding source.');const d={createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercealternativemethod\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(o),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:n,style:this.paypalCommerceIntegrationService.getValidButtonStyle(r)},d),o&&l),p=s.Buttons(c);p.isEligible()?p.render(`#${e}`):a&&\"function\"==typeof a?a():this.paypalCommerceIntegrationService.removeElement(e)}handleClick(e){return ut(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const mt=p(e=>new ht(e,R(e)),[{id:\"paypalcommercealternativemethods\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9wYXlwYWwtY29tbWVyY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxJQ0NZQSxFRERSQyxFQUFzQixDQUFDLEVFQ1osU0FBU0MsRUFDcEJDLEVBQ0FDLEdBSUEsT0FGQUMsUUFBUUMsSUFBSSxhQUFjRixHQUVuQkcsT0FBT0MsT0FBT0wsRUFBUSxDQUFFQyxjQUNuQyxDQ1JBSCxFQUFvQlEsRUFBSSxDQUFDQyxFQUFTQyxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hWLEVBQW9CWSxFQUFFRixFQUFZQyxLQUFTWCxFQUFvQlksRUFBRUgsRUFBU0UsSUFDNUVMLE9BQU9PLGVBQWVKLEVBQVNFLEVBQUssQ0FBRUcsWUFBWSxFQUFNQyxJQUFLTCxFQUFXQyxNQ0ozRVgsRUFBb0JZLEVBQUksQ0FBQ0ksRUFBS0MsSUFBVVgsT0FBT1ksVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NPbkUsTUFBZUksVUFBc0JDLE1BSWhELFdBQUFDLENBQVlDLEdDWEQsSUFBcUNOLEVEWTVDTyxNQUFNRCxHQUFXLHFDQUpyQixLQUFBRSxLQUFPLGdCQUNQLEtBQUFDLEtBQU8sV0NUeUNULGFEY1pBLFVDYmhDWixPQUFPc0IsZUFDUHRCLE9BQU9zQixlRFlRQyxLQ1plWCxHRFlmVyxLQ1ZSQyxVQUFZWixFRFlvQixtQkFBNUJJLE1BQU1TLGtCQUNiVCxNQUFNUyxrQkFBa0JGLGlCQUV4QkEsS0FBS0csTUFBUSxJQUFJVixNQUFNTyxLQUFLTCxTQUFTUSxLQUU3QyxFRWZXLE1BQU1DLFVBQTRDWixFQUM3RCxXQUFBRSxDQUFZQyxHQUNSQyxNQUNJRCxHQUNJLHVHQUdSSyxLQUFLSCxLQUFPLHNDQUNaRyxLQUFLRixLQUFPLG1DQUNoQixHTmJKLFNBQVk1QixHQUNSLHFEQUNBLGlDQUNBLHlDQUNBLGlEQUNBLHlDQUNBLHFEQUNBLG1DQUNBLCtDQUNBLHVDQUNBLHVDQUNBLDRD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bVQsaUNBQWlDcEQsY0FBY3dYLEVBRTVELENBRWMsV0FBQXhRLENBQ1Z0TSxHLHlDQUVBLEdBQUlBLEVBQXlCLENBQ3pCLE1BQU0yc0IsUUFBbUJwM0IsS0FBS21ULGlDQUFpQzNJLHdCQUMzREMsU0FHRXpLLEtBQUsySiwwQkFBMEIwdEIsYUFBYUQsRUFBV2h2QixHLENBRXJFLEUsRUN0SkosTUFRQSxHQUFlaEssRUFOVnVMLEdBQ0QsSUFBSW91QixHQUNBcHVCLEVBQ0EsRUFBdUNBLElBR3lDLENBQ3BGLENBQUV2QixHQUFJLHNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL2Jvb3RzdHJhcD9mZmNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL21pc3NpbmctZGF0YS1lcnJvci50cz9iN2RjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvdG8tcmVzb2x2YWJsZS1tb2R1bGUudHM/ZDUyMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycz85OTRjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZD85ZWE0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3N0YW5kYXJkLWVycm9yLnRzPzhhMDMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc2V0LXByb3RvdHlwZS1vZi50cz84NDVhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWNsaWVudC11bmF2YWlsYWJsZS1lcnJvci50cz9mOGVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3BheXBhbC1jb21tZXJjZS1zZGsudHM/ZmNlOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdWkvc3JjL2xvYWRpbmctaW5kaWNhdG9yL2xvYWRpbmctaW5kaWNhdG9yLnRzP2IwODciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvYnV5LW5vdy1jYXJ0LWNyZWF0aW9uLWVycm9yLnRzP2Q2MDQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcmVxdWVzdC1lcnJvci50cz9jODQwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY2FydC9jYXJ0LXNvdXJjZS50cz8zODhhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS10eXBlcy50cz8zNTYwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlLnRzPzYzNWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2ludGVybmFsLWFwaS1oZWFkZXJzLnRzPzQxMTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2NvbnRlbnQtdHlwZS50cz81MDRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL2h0dHAtcmVxdWVzdC9zZGstdmVyc2lvbi1oZWFkZXJzLnRzPzdiZjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXJlcXVlc3Qtc2VuZGVyLnRzP2Q3YTkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXNjcmlwdC1sb2FkZXIudHM/NjRlOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UudHM/M2Y5OCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtY29uc3RhbnRzLnRzPzdkNDkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaW52YWxpZC1hcmd1bWVudC1lcnJvci50cz8zOTIxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWludmFsaWQtZXJyb3IudHM/M2FkZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9vcmRlci1maW5hbGl6YXRpb24tbm90LXJlcXVpcmVkLWVycm9yLnRzP2I1YTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L2lzLWhvc3RlZC1pbnRydW1lbnQtbGlrZS50cz84NzYzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy12YXVsdGVkLWluc3RydW1lbnQudHM/MTgwZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pcy1yZXF1ZXN0LWVycm9yLnRzP2I0M2QiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS11dGlscy9zcmMvdXRpbHMvZ2V0LXBheXBhbC1tZXNzYWdlcy1zdHlsZXMtZnJvbS1ibnBsLWNvbmZpZy50cz8wNTA4Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy91dGlsaXR5L3NyYy9pcy1iYXNlLWluc3RydW1lbnQvaXMtYmFzZS1pbnN0cnVtZW50LnRzP2U5MmYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlL3BheXBhbC1jb21tZXJjZS1wYXltZW50LXN0cmF0ZWd5LnRzPzFmMmIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS11dGlscy9zcmMvdXRpbHMvaXMtcmVkaXJlY3QtYWN0aW9uLWVycm9yLnRzPzU1MjMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS11dGlscy9zcmMvdXRpbHMvaXMtcGF5cGFsLWNvbW1lcmNlLXByb3ZpZGVyLWVycm9yLnRzP2M3NGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtcGF5bWVudC1zdHJhdGVneS50cz8yNzZiIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2Utc2RrLnRzPzFkNTYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbm90LWltcGxlbWVudGVkLWVycm9yLnRzPzNhMzUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC9wYXlwYWwtY29tbWVyY2UtY3JlZGl0LXBheW1lbnQtc3RyYXRlZ3kudHM/N2FmNCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtY3JlZGl0L2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtY3JlZGl0LXBheW1lbnQtc3RyYXRlZ3kudHM/ODk2YSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtdmVubW8vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLXBheW1lbnQtc3RyYXRlZ3kudHM/ODhmZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtdmVubW8vY3JlYXRlLXBheXBhbC1jb21tZXJjZS12ZW5tby1wYXltZW50LXN0cmF0ZWd5LnRzPzc4OTciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvdGltZW91dC1lcnJvci50cz8wODBkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy91dGlsaXR5L3NyYy9pcy1leHBlcmltZW50LWVuYWJsZWQvaXMtZXhwZXJpbWVudC1lbmFibGVkLnRzP2M5YTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMvcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMtcGF5bWVudC1zdHJhdGVneS50cz9kNzM3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy1wYXltZW50LXN0cmF0ZWd5LnRzP2VhZDkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L2luc3RydW1lbnQudHM/ZjJiNiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLXV0aWxzL3NyYy9wYXlwYWwtY29tbWVyY2UtdHlwZXMudHM/MTNlYiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RvcmFnZS9zcmMvY29va2llLXN0b3JhZ2UudHM/MTUzYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2hvc3RlZC1mb3JtL2hvc3RlZC1maWVsZC10eXBlLnRzPzY1ZDgiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS11dGlscy9zcmMvcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lLXV0aWxzLnRzP2ZlN2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS11dGlscy9zcmMvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1mYXN0bGFuZS11dGlscy50cz81OWEzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvaG9zdGVkLWZvcm0vaXMtY3JlZGl0LWNhcmQtZm9ybS1maWVsZHMudHM/MGZhYSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2hvc3RlZC1mb3JtL2lzLWNyZWRpdC1jYXJkLXZhdWx0ZWQtZm9ybS1maWVsZHMudHM/ZjNiMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1mYWlsZWQtZXJyb3IudHM/MDdkZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW5pdGlhbGl6ZWQtZXJyb3IudHM/OGI0ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LWludmFsaWQtZm9ybS1lcnJvci50cz9jMGZiIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY2FyZC9wYXlwYWwtY29tbWVyY2UtY3JlZGl0LWNhcmRzLXBheW1lbnQtc3RyYXRlZ3kudHM/MTBlNiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLXV0aWxzL3NyYy91dGlscy9pcy1wYXlwYWwtY29tbWVyY2UtYWNjZWxlcmF0ZWQtY2hlY2tvdXQtY3VzdG9tZXIudHM/NzNmMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtY3JlZGl0LWNhcmQvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1jcmVkaXQtY2FyZHMtcGF5bWVudC1zdHJhdGVneS50cz82N2VjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1yYXRlcGF5L3BheXBhbC1jb21tZXJjZS1yYXRlcGF5LXBheW1lbnQtc3RyYXRlZ3kudHM/MjIwMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtcmF0ZXBheS9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLXJhdGVwYXktcGF5bWVudC1zdHJhdGVneS50cz83MDRlIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3V0aWxzL2dldC1mYXN0bGFuZS1zdHlsZXMudHM/OWZlNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLXV0aWxzL3NyYy91dGlscy9pcy1wYXlwYWwtZmFzdGxhbmUtY3VzdG9tZXIudHM/NzAzNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUvcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lLXBheW1lbnQtc3RyYXRlZ3kudHM/ZDE1ZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLXV0aWxzL3NyYy91dGlscy9pcy1wYXlwYWwtZmFzdGxhbmUtcmVxdWVzdC1lcnJvci50cz9hODkwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lLXBheW1lbnQtc3RyYXRlZ3kudHM/NDAwZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UvcGF5cGFsLWNvbW1lcmNlLWN1c3RvbWVyLXN0cmF0ZWd5LnRzPzRlNTMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jaGVja291dC1idXR0b25zL2RlZmF1bHQtY2hlY2tvdXQtYnV0dG9uLWhlaWdodC50cz9kNDI1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWN1c3RvbWVyLXN0cmF0ZWd5LnRzPzMwODAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC9wYXlwYWwtY29tbWVyY2UtY3JlZGl0LWN1c3RvbWVyLXN0cmF0ZWd5LnRzPzRkNjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jdXN0b21lci1zdHJhdGVneS50cz8zNWFlIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS12ZW5tby9wYXlwYWwtY29tbWVyY2UtdmVubW8tY3VzdG9tZXItc3RyYXRlZ3kudHM/Y2RiZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtdmVubW8vY3JlYXRlLXBheXBhbC1jb21tZXJjZS12ZW5tby1jdXN0b21lci1zdHJhdGVneS50cz82YWQ4Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUtY3VzdG9tZXItc3RyYXRlZ3kudHM/OTk2ZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1mYXN0bGFuZS1jdXN0b21lci1zdHJhdGVneS50cz8yZmE0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS9wYXlwYWwtY29tbWVyY2UtYnV0dG9uLXN0cmF0ZWd5LnRzPzRjOWQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtYnV0dG9uLXN0cmF0ZWd5LnRzP2FmNWQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC9wYXlwYWwtY29tbWVyY2UtY3JlZGl0LWJ1dHRvbi1zdHJhdGVneS50cz8xOGNlIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1jcmVkaXQtYnV0dG9uLXN0cmF0ZWd5LnRzPzZlZTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXZlbm1vL3BheXBhbC1jb21tZXJjZS12ZW5tby1idXR0b24tc3RyYXRlZ3kudHM/ZmUyMiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtdmVubW8vY3JlYXRlLXBheXBhbC1jb21tZXJjZS12ZW5tby1idXR0b24tc3RyYXRlZ3kudHM/MTMxMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy1idXR0b24tc3RyYXRlZ3kudHM/NWYyNyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMtYnV0dG9uLXN0cmF0ZWd5LnRzP2YyZjIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBNaXNzaW5nRGF0YUVycm9yVHlwZSB7XG4gICAgTWlzc2luZ0JpbGxpbmdBZGRyZXNzLFxuICAgIE1pc3NpbmdDYXJ0LFxuICAgIE1pc3NpbmdDaGVja291dCxcbiAgICBNaXNzaW5nQ29uc2lnbm1lbnRzLFxuICAgIE1pc3NpbmdDdXN0b21lcixcbiAgICBNaXNzaW5nQ2hlY2tvdXRDb25maWcsXG4gICAgTWlzc2luZ09yZGVyLFxuICAgIE1pc3NpbmdPcmRlckNvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXJJZCxcbiAgICBNaXNzaW5nUGF5bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudElkLFxuICAgIE1pc3NpbmdQYXltZW50SW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICBNaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsLFxuICAgIE1pc3NpbmdQYXltZW50U3RhdHVzLFxuICAgIE1pc3NpbmdQYXltZW50VG9rZW4sXG4gICAgTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIHdoZW4gZGF0YSB0aGF0IGlzIGV4cGVjdGVkIHRvIGV4aXN0IGlzIG1pc3NpbmcuIFVzdWFsbHkgaXRcbiAqIGlzIGR1ZSB0byB0aGUgZmFjdCB0aGF0IGNlcnRhaW4gZGF0YSBoYXMgbm90IGJlZW4gcmV0cmlldmVkIGZyb20gb3Igc2F2ZWQgdG9cbiAqIHRoZSBzZXJ2ZXIgeWV0LiBBbmQgc3VjaCBkYXRhIGlzIHJlcXVpcmVkIHRvIHBlcmZvcm0gY2VydGFpbiBhY3Rpb25zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXNzaW5nRGF0YUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ01pc3NpbmdEYXRhRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbWlzc2luZ19kYXRhJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjYXJ0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDb25zaWdubWVudHM6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ3VzdG9tZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY3VzdG9tZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOlxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlckNvbmZpZzpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSB0b2tlbiByZXF1aXJlZCB0byBzdWJtaXQgYSBwYXltZW50IGlzIG1pc3NpbmcuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIGNvbnNvbGUubG9nKCdyZXNvbHZlSWRzJywgcmVzb2x2ZUlkcyk7XG5cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2R1bGUsIHsgcmVzb2x2ZUlkcyB9KTtcbn1cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgQ3VzdG9tRXJyb3IgZnJvbSAnLi9jdXN0b20tZXJyb3InO1xuaW1wb3J0IHNldFByb3RvdHlwZU9mIGZyb20gJy4vc2V0LXByb3RvdHlwZS1vZic7XG5cbi8qKlxuICogVGhpcyBlcnJvciB0eXBlIHNob3VsZCBub3QgYmUgY29uc3RydWN0ZWQgZGlyZWN0bHkuIEl0IGlzIGEgYmFzZSBjbGFzcyBmb3JcbiAqIGFsbCBjdXN0b20gZXJyb3JzIHRocm93biBpbiB0aGlzIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkRXJyb3IgZXh0ZW5kcyBFcnJvciBpbXBsZW1lbnRzIEN1c3RvbUVycm9yIHtcbiAgICBuYW1lID0gJ1N0YW5kYXJkRXJyb3InO1xuICAgIHR5cGUgPSAnc3RhbmRhcmQnO1xuXG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICBzZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgbmV3LnRhcmdldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YWNrID0gbmV3IEVycm9yKHRoaXMubWVzc2FnZSkuc3RhY2s7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihvYmplY3Q6IGFueSwgcHJvdG90eXBlOiBvYmplY3QpIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmplY3QsIHByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqZWN0O1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gdGhlIGNsaWVudCBsaWJyYXJ5IG9mIGEgcGF5bWVudCBtZXRob2QgZmFpbHNcbiAqIHRvIGxvYWQsIG9yIGZvciBzb21lIHJlYXNvbiwgaXQgaXMgaW5hY2Nlc3NpYmxlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBtZXNzYWdlIHx8XG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNsaWVudCBsaWJyYXJ5IG9mIGEgcGF5bWVudCBtZXRob2QgaXMgbm90IGxvYWRlZCBvciByZWFkeSB0byBiZSB1c2VkLicsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfbWV0aG9kX2NsaWVudF91bmF2YWlsYWJsZSc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgUGF5UGFsQ29tbWVyY2VIb3N0V2luZG93LFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbEZhc3RsYW5lU2RrLFxuICAgIFBheVBhbEdvb2dsZVBheVNkayxcbiAgICBQYXlQYWxNZXNzYWdlc1NkayxcbiAgICBQYXlQYWxTZGtDb25maWcsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VTZGsge1xuICAgIHByaXZhdGUgd2luZG93OiBQYXlQYWxDb21tZXJjZUhvc3RXaW5kb3c7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNjcmlwdExvYWRlcjogU2NyaXB0TG9hZGVyKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBheVBhbEZhc3RsYW5lU2RrKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgICk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVTZGs+IHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZVNkaykge1xuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRQYXlQYWxGYXN0bGFuZVNka0NvbmZpZ3VyYXRpb24oXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkUGF5UGFsU2RrKGNvbmZpZyk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGspIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZVNkaztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxHb29nbGVQYXlTZGsoXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZT86IGJvb2xlYW4sXG4gICAgICAgIGZvcmNlTG9hZD86IGJvb2xlYW4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxHb29nbGVQYXlTZGs+IHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxHb29nbGVQYXkgfHwgZm9yY2VMb2FkKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlwYWxTZGtTY3JpcHRDb25maWcgPSB0aGlzLmdldFBheVBhbEdvb2dsZVBheVNka1NjcmlwdENvbmZpZ09yVGhyb3coXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhwYXlwYWxTZGtTY3JpcHRDb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxHb29nbGVQYXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbEdvb2dsZVBheTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxBcG1zU2RrKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgKSB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsQXBtcykge1xuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRQYXlQYWxBcG1TZGtDb25maWd1cmF0aW9uKHBheW1lbnRNZXRob2QsIGN1cnJlbmN5Q29kZSk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhjb25maWcpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEFwbXMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxBcG1zO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBheVBhbE1lc3NhZ2VzKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxNZXNzYWdlc1Nkaz4ge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlwYWxTZGtNZXNzYWdlc0NvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsU2RrTWVzc2FnZXNDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkUGF5UGFsU2RrKHBheXBhbFNka01lc3NhZ2VzQ29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsTWVzc2FnZXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbE1lc3NhZ2VzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogIGxvYWRQYXlQYWxTZGsgaXMgYSBwYXlwYWwgc2RrIHNjcmlwdCBsb2FkZXJcbiAgICAgKiAgd2hpY2ggbG9hZHMgcGF5cGFsIHNkayBiYXNlZCBvbiBwcm92aWRlZCBjb25maWd1cmF0aW9uXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRQYXlQYWxTZGsoeyBvcHRpb25zLCBhdHRyaWJ1dGVzIH06IFBheVBhbFNka0NvbmZpZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzY3JpcHRPcHRpb25zID0gdGhpcy50cmFuc2Zvcm1Db25maWc8UGF5UGFsU2RrQ29uZmlnWydvcHRpb25zJ10+KG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBzY3JpcHRBdHRyaWJ1dGVzID0gdGhpcy50cmFuc2Zvcm1Db25maWc8UGF5UGFsU2RrQ29uZmlnWydhdHRyaWJ1dGVzJ10+KGF0dHJpYnV0ZXMpO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNka1VybCA9ICdodHRwczovL3d3dy5wYXlwYWwuY29tL3Nkay9qcyc7XG4gICAgICAgIGNvbnN0IHNjcmlwdFF1ZXJ5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhzY3JpcHRPcHRpb25zKS50b1N0cmluZygpO1xuICAgICAgICBjb25zdCBzY3JpcHRTcmMgPSBgJHtwYXlwYWxTZGtVcmx9PyR7c2NyaXB0UXVlcnl9YDtcblxuICAgICAgICBhd2FpdCB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KHNjcmlwdFNyYywge1xuICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBzY3JpcHRBdHRyaWJ1dGVzLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIENvbmZpZ3VyYXRpb25zIHNlY3Rpb25cbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0UGF5UGFsRmFzdGxhbmVTZGtDb25maWd1cmF0aW9uKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGludGVudCwgY2xpZW50SWQsIG1lcmNoYW50SWQsIGF0dHJpYnV0aW9uSWQgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgIGNvbW1pdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgICAgICAgICAgICAgICdmYXN0bGFuZScsXG4gICAgICAgICAgICAgICAgICAgICdidXR0b25zJyxcbiAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQtZmllbGRzJyxcbiAgICAgICAgICAgICAgICAgICAgJ2hvc3RlZC1maWVsZHMnLFxuICAgICAgICAgICAgICAgICAgICAndGhyZWUtZG9tYWluLXNlY3VyZScsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtY2xpZW50LW1ldGFkYXRhLWlkJzogc2Vzc2lvbklkLnJlcGxhY2UoLy0vZywgJycpLFxuICAgICAgICAgICAgICAgICdkYXRhLW5hbWVzcGFjZSc6ICdwYXlwYWxGYXN0bGFuZVNkaycsXG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICAgICAgJ2RhdGEtc2RrLWNsaWVudC10b2tlbic6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbEdvb2dsZVBheVNka1NjcmlwdENvbmZpZ09yVGhyb3coXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZSA9IHRydWUsXG4gICAgKTogUGF5UGFsU2RrQ29uZmlnIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiwgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghaW5pdGlhbGl6YXRpb25EYXRhIHx8ICFpbml0aWFsaXphdGlvbkRhdGEuY2xpZW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgIGNsaWVudElkLFxuICAgICAgICAgICAgbWVyY2hhbnRJZCxcbiAgICAgICAgICAgIGJ1eWVyQ291bnRyeSxcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCxcbiAgICAgICAgICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsXG4gICAgICAgIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgY29uc3QgY29tbWl0ID0gaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgfHwgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgIGNvbW1pdCxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbJ2dvb2dsZXBheSddLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLWNsaWVudC10b2tlbic6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgICAgICdkYXRhLW5hbWVzcGFjZSc6ICdwYXlwYWxHb29nbGVQYXknLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbEFwbVNka0NvbmZpZ3VyYXRpb24oXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAgIG1lcmNoYW50SWQsXG4gICAgICAgICAgICBidXllckNvdW50cnksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgIGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMgPSBbXSxcbiAgICAgICAgICAgIGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzID0gW10sXG4gICAgICAgIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgY29uc3QgZW5hYmxlQVBNc0Z1bmRpbmcgPSBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcztcbiAgICAgICAgY29uc3QgZGlzYWJsZUFQTXNGdW5kaW5nID0gYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5maWx0ZXIoXG4gICAgICAgICAgICAoYXBtOiBzdHJpbmcpID0+ICFlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5pbmNsdWRlcyhhcG0pLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgJ2NsaWVudC1pZCc6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgICdtZXJjaGFudC1pZCc6IG1lcmNoYW50SWQsXG4gICAgICAgICAgICAgICAgJ2VuYWJsZS1mdW5kaW5nJzogZW5hYmxlQVBNc0Z1bmRpbmcubGVuZ3RoID4gMCA/IGVuYWJsZUFQTXNGdW5kaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnOiBkaXNhYmxlQVBNc0Z1bmRpbmcubGVuZ3RoID4gMCA/IGRpc2FibGVBUE1zRnVuZGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBjb21taXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogWydidXR0b25zJywgJ3BheW1lbnQtZmllbGRzJ10sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICAgICAgLi4uKGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUgJiYgeyAnYnV5ZXItY291bnRyeSc6IGJ1eWVyQ291bnRyeSB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICAgICAgJ2RhdGEtbmFtZXNwYWNlJzogJ3BheXBhbEFwbXMnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbFNka01lc3NhZ2VzQ29uZmlndXJhdGlvbihcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghaW5pdGlhbGl6YXRpb25EYXRhIHx8ICFpbml0aWFsaXphdGlvbkRhdGEuY2xpZW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgY2xpZW50SWQsIG1lcmNoYW50SWQsIGF0dHJpYnV0aW9uSWQsIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsIGJ1eWVyQ291bnRyeSB9ID1cbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFsnbWVzc2FnZXMnXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLW5hbWVzcGFjZSc6ICdwYXlwYWxNZXNzYWdlcycsXG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVXRpbHMgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1Db25maWc8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+Pihjb25maWc6IFQpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICAgICAgbGV0IHRyYW5zZm9ybWVkQ29uZmlnID0ge307XG5cbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGNvbmZpZykgYXMgQXJyYXk8a2V5b2YgVD47XG5cbiAgICAgICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY29uZmlnW2tleV07XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgdmFsdWUgPT09IG51bGwgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gJycgfHxcbiAgICAgICAgICAgICAgICAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cmFuc2Zvcm1lZENvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAuLi50cmFuc2Zvcm1lZENvbmZpZyxcbiAgICAgICAgICAgICAgICBba2V5XTogQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5qb2luKCcsJykgOiB2YWx1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1lZENvbmZpZztcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIExvYWRpbmdJbmRpY2F0b3JDb250YWluZXJTdHlsZXMsXG4gICAgTG9hZGluZ0luZGljYXRvclN0eWxlcyxcbn0gZnJvbSAnLi9sb2FkaW5nLWluZGljYXRvci1zdHlsZXMnO1xuXG5jb25zdCBERUZBVUxUX1NUWUxFUzogTG9hZGluZ0luZGljYXRvclN0eWxlcyA9IHtcbiAgICBzaXplOiA3MCxcbiAgICBjb2xvcjogJyNkOWQ5ZDknLFxuICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmZmZmYnLFxufTtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ09OVEFJTkVSX1NUWUxFUyA9IHtcbiAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAnYmFja2dyb3VuZC1jb2xvcic6ICdyZ2JhKDAsIDAsIDAsIDAuNCknLFxuICAgICd6LWluZGV4JzogJzEwMDAnLFxufTtcblxuY29uc3QgUk9UQVRJT05fQU5JTUFUSU9OID0gJ2VtYmVkZGVkLWNoZWNrb3V0LWxvYWRpbmctaW5kaWNhdG9yLXJvdGF0aW9uJztcblxuaW50ZXJmYWNlIExvYWRpbmdJbmRpY2F0b3JPcHRpb25zIHtcbiAgICBzdHlsZXM/OiBMb2FkaW5nSW5kaWNhdG9yU3R5bGVzO1xuICAgIGNvbnRhaW5lclN0eWxlcz86IExvYWRpbmdJbmRpY2F0b3JDb250YWluZXJTdHlsZXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvYWRpbmdJbmRpY2F0b3Ige1xuICAgIHByaXZhdGUgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGluZGljYXRvcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzdHlsZXM6IExvYWRpbmdJbmRpY2F0b3JTdHlsZXM7XG4gICAgcHJpdmF0ZSBjb250YWluZXJTdHlsZXM6IExvYWRpbmdJbmRpY2F0b3JDb250YWluZXJTdHlsZXM7XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zPzogTG9hZGluZ0luZGljYXRvck9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zdHlsZXMgPSB7IC4uLkRFRkFVTFRfU1RZTEVTLCAuLi4ob3B0aW9ucyAmJiBvcHRpb25zLnN0eWxlcykgfTtcbiAgICAgICAgdGhpcy5jb250YWluZXJTdHlsZXMgPSB7IC4uLihvcHRpb25zICYmIG9wdGlvbnMuY29udGFpbmVyU3R5bGVzKSB9O1xuXG4gICAgICAgIHRoaXMuZGVmaW5lQW5pbWF0aW9uKCk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIgPSB0aGlzLmJ1aWxkQ29udGFpbmVyKCk7XG4gICAgICAgIHRoaXMuaW5kaWNhdG9yID0gdGhpcy5idWlsZEluZGljYXRvcigpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuaW5kaWNhdG9yKTtcbiAgICB9XG5cbiAgICBzaG93KHBhcmVudElkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmIChwYXJlbnRJZCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyZW50SWQpO1xuXG4gICAgICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBhdHRhY2ggdGhlIGxvYWRpbmcgaW5kaWNhdG9yIGJlY2F1c2UgdGhlIHBhcmVudCBJRCBpcyBub3QgdmFsaWQuJyxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICB9XG5cbiAgICBoaWRlKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBoYW5kbGVUcmFuc2l0aW9uRW5kID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgaGFuZGxlVHJhbnNpdGlvbkVuZCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGhhbmRsZVRyYW5zaXRpb25FbmQpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZENvbnRhaW5lcigpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmJvdHRvbSA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gJzAnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUudG9wID0gJzAnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgMjUwbXMgZWFzZS1vdXQnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcblxuICAgICAgICB0aGlzLnNldFN0eWxlQXR0cmlidXRlKGNvbnRhaW5lciwgdGhpcy5jb250YWluZXJTdHlsZXMpO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZEluZGljYXRvcigpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGluZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLndpZHRoID0gYCR7dGhpcy5zdHlsZXMuc2l6ZX1weGA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLnN0eWxlcy5zaXplfXB4YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJvcmRlclJhZGl1cyA9IGAke3RoaXMuc3R5bGVzLnNpemV9cHhgO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyID0gJ3NvbGlkIDFweCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXJDb2xvciA9IGAke3RoaXMuc3R5bGVzLmJhY2tncm91bmRDb2xvcn0gJHt0aGlzLnN0eWxlcy5iYWNrZ3JvdW5kQ29sb3J9ICR7dGhpcy5zdHlsZXMuY29sb3J9ICR7dGhpcy5zdHlsZXMuY29sb3J9YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLm1hcmdpbiA9ICcwIGF1dG8nO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUubGVmdCA9ICcwJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnJpZ2h0ID0gJzAnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUudG9wID0gJzUwJSc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoMGRlZyknO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUudHJhbnNmb3JtU3R5bGUgPSAncHJlc2VydmUtM2QnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYW5pbWF0aW9uID0gYCR7Uk9UQVRJT05fQU5JTUFUSU9OfSA1MDBtcyBpbmZpbml0ZSBjdWJpYy1iZXppZXIoMC42OSwgMC4zMSwgMC41NiwgMC44MylgO1xuXG4gICAgICAgIHJldHVybiBpbmRpY2F0b3I7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRTdHlsZUF0dHJpYnV0ZShlbGVtZW50OiBIVE1MRWxlbWVudCwgYXR0cnM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pOiB2b2lkIHtcbiAgICAgICAgT2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goKGspID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoaywgYXR0cnNba10pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRlZmluZUFuaW1hdGlvbigpOiB2b2lkIHtcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gZGVmaW5lIENTUyBhbmltYXRpb24sIHdlIG5lZWQgdG8gaW5zZXJ0IGEgc3R5bGVzaGVldCBpbnRvIHRoZSBob3N0IGZyYW1lLlxuICAgICAgICAvLyBXZSBvbmx5IGhhdmUgdG8gZG8gaXQgb25jZS5cbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFJPVEFUSU9OX0FOSU1BVElPTikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblxuICAgICAgICBzdHlsZS5pZCA9IFJPVEFUSU9OX0FOSU1BVElPTjtcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvblxuICAgICAgICBkb2N1bWVudC5oZWFkPy5hcHBlbmRDaGlsZChzdHlsZSk7XG5cbiAgICAgICAgaWYgKHN0eWxlLnNoZWV0IGluc3RhbmNlb2YgQ1NTU3R5bGVTaGVldCkge1xuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBwcm92aWRlIHRoZSAybmQgcGFyYW1ldGVyIGZvciBJRTExLCBldmVuIHRob3VnaCBpdCBpc1xuICAgICAgICAgICAgLy8gMCBieSBkZWZhdWx0IGZvciBhbGwgb3RoZXIgYnJvd3NlcnMuXG4gICAgICAgICAgICBzdHlsZS5zaGVldC5pbnNlcnRSdWxlKFxuICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICBAa2V5ZnJhbWVzICR7Uk9UQVRJT05fQU5JTUFUSU9OfSB7XG4gICAgICAgICAgICAgICAgICAgIDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSgwZGVnKTsgfVxuICAgICAgICAgICAgICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgc2hvcHBlciB0cmllcyB0byBzaWduIGluIGFzIGEgZ3Vlc3QgYnV0XG4gKiB0aGV5IGFyZSBhbHJlYWR5IHNpZ25lZCBpbiBhcyBhIHJlZ2lzdGVyZWQgY3VzdG9tZXIuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJ1eU5vd0NhcnRDcmVhdGlvbkVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQgZHVyaW5nIGJ1eSBub3cgY2FydCBjcmVhdGlvbiBwcm9jZXNzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ0J1eU5vd0NhcnRDcmVhdGlvbkVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ2J1eV9ub3dfY2FydF9jcmVhdGlvbl9lcnJvcic7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuY29uc3QgREVGQVVMVF9SRVNQT05TRSA9IHtcbiAgICBib2R5OiB7fSxcbiAgICBoZWFkZXJzOiB7fSxcbiAgICBzdGF0dXM6IDAsXG59O1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHVuYWJsZSB0byBtYWtlIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyLiBJdCB3cmFwc1xuICogYW55IHNlcnZlciByZXNwb25zZSBpbnRvIGEgSlMgZXJyb3Igb2JqZWN0LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXF1ZXN0RXJyb3I8VEJvZHkgPSBhbnk+IGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgYm9keTogVEJvZHkgfCB7fTtcbiAgICBoZWFkZXJzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAgIGVycm9yczogQXJyYXk8eyBjb2RlOiBzdHJpbmc7IG1lc3NhZ2U/OiBzdHJpbmcgfT47XG4gICAgc3RhdHVzOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcmVzcG9uc2U/OiBSZXNwb25zZTxUQm9keSB8IHt9PixcbiAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIGVycm9ycyxcbiAgICAgICAgfToge1xuICAgICAgICAgICAgbWVzc2FnZT86IHN0cmluZztcbiAgICAgICAgICAgIGVycm9ycz86IEFycmF5PHsgY29kZTogc3RyaW5nOyBtZXNzYWdlPzogc3RyaW5nIH0+O1xuICAgICAgICB9ID0ge30sXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSwgaGVhZGVycywgc3RhdHVzIH0gPSByZXNwb25zZSB8fCBERUZBVUxUX1JFU1BPTlNFO1xuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdSZXF1ZXN0RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncmVxdWVzdCc7XG4gICAgICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycyB8fCBbXTtcbiAgICB9XG59XG4iLCJleHBvcnQgZW51bSBDYXJ0U291cmNlIHtcbiAgICBCdXlOb3cgPSAnQlVZX05PVycsXG59XG4iLCJpbXBvcnQge1xuICAgIEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSxcbiAgICBIb3N0ZWRJbnN0cnVtZW50LFxuICAgIFNoaXBwaW5nT3B0aW9uLFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEZ1bmRpbmcgc291cmNlc1xuICpcbiAqL1xuZXhwb3J0IHR5cGUgRnVuZGluZ1R5cGUgPSBzdHJpbmdbXTtcbmV4cG9ydCB0eXBlIEVuYWJsZUZ1bmRpbmdUeXBlID0gRnVuZGluZ1R5cGUgfCBzdHJpbmc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VTREtGdW5kaW5nIHtcbiAgICBDQVJEOiBzdHJpbmc7XG4gICAgUEFZUEFMOiBzdHJpbmc7XG4gICAgQ1JFRElUOiBzdHJpbmc7XG4gICAgUEFZTEFURVI6IHN0cmluZztcbiAgICBPWFhPOiBzdHJpbmc7XG4gICAgU0VQQTogc3RyaW5nO1xuICAgIFZFTk1POiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBDb21tZXJjZSBTREtcbiAqXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNDb25maWcge1xuICAgIGlucHV0RXZlbnRzOiB7XG4gICAgICAgIG9uQ2hhbmdlKGRhdGE6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N0YXRlKTogdm9pZDtcbiAgICAgICAgb25Gb2N1cyhkYXRhOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSk6IHZvaWQ7XG4gICAgICAgIG9uQmx1cihkYXRhOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSk6IHZvaWQ7XG4gICAgICAgIG9uSW5wdXRTdWJtaXRSZXF1ZXN0KGRhdGE6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N0YXRlKTogdm9pZDtcbiAgICB9O1xuICAgIGNyZWF0ZVZhdWx0U2V0dXBUb2tlbj86IChkYXRhOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSkgPT4gdm9pZDtcbiAgICBjcmVhdGVPcmRlcj86ICgpID0+IFByb21pc2U8c3RyaW5nPjtcbiAgICBzdHlsZTogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zWydzdHlsZXMnXTtcbiAgICBvbkFwcHJvdmUoZGF0YTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzT25BcHByb3ZlRGF0YSk6IHZvaWQ7XG4gICAgb25FcnJvcigpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc09uQXBwcm92ZURhdGEge1xuICAgIHZhdWx0U2V0dXBUb2tlbj86IHN0cmluZztcbiAgICBvcmRlcklEOiBzdHJpbmc7XG4gICAgbGlhYmlsaXR5U2hpZnQ/OiBMaWFiaWxpdHlTaGlmdEVudW07XG59XG5cbmV4cG9ydCBlbnVtIExpYWJpbGl0eVNoaWZ0RW51bSB7XG4gICAgUG9zc2libGUgPSAnUE9TU0lCTEUnLFxuICAgIE5vID0gJ05PJyxcbiAgICBVbmtub3duID0gJ1VOS05PV04nLFxuICAgIFllcyA9ICdZRVMnLFxufVxuXG5pbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzRmllbGREYXRhIHtcbiAgICBpc0ZvY3VzZWQ6IGJvb2xlYW47XG4gICAgaXNFbXB0eTogYm9vbGVhbjtcbiAgICBpc1ZhbGlkOiBib29sZWFuO1xuICAgIGlzUG90ZW50aWFsbHlWYWxpZDogYm9vbGVhbjtcbn1cblxudHlwZSBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNDYXJkID0gUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNDYXJkO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N0YXRlIHtcbiAgICBjYXJkczogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzQ2FyZFtdO1xuICAgIGVtaXR0ZWRCeTogc3RyaW5nO1xuICAgIGlzRm9ybVZhbGlkOiBib29sZWFuO1xuICAgIGVycm9yczogc3RyaW5nW107XG4gICAgZmllbGRzOiB7XG4gICAgICAgIGNhcmRDdnZGaWVsZDogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBjYXJkTnVtYmVyRmllbGQ6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgY2FyZE5hbWVGaWVsZD86IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgY2FyZEV4cGlyeUZpZWxkOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNGaWVsZERhdGE7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUZpZWxkcyB7XG4gICAgcmVuZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xuICAgIGNsZWFyKCk6IHZvaWQ7XG4gICAgcmVtb3ZlQ2xhc3MoY2xhc3NOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xuICAgIGNsb3NlKCk6IFByb21pc2U8dm9pZD47XG59XG5cbmludGVyZmFjZSBQYXlQYWxDb21tZXJjZUZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSB7XG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzIHtcbiAgICBpc0VsaWdpYmxlKCk6IGJvb2xlYW47XG4gICAgQ1ZWRmllbGQoY29uZmlnPzogUGF5UGFsQ29tbWVyY2VGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEpOiBQYXlQYWxDb21tZXJjZUZpZWxkcztcbiAgICBFeHBpcnlGaWVsZChjb25maWc/OiBQYXlQYWxDb21tZXJjZUZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSk6IFBheVBhbENvbW1lcmNlRmllbGRzO1xuICAgIE5hbWVGaWVsZChjb25maWc/OiBQYXlQYWxDb21tZXJjZUZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSk6IFBheVBhbENvbW1lcmNlRmllbGRzO1xuICAgIE51bWJlckZpZWxkKGNvbmZpZz86IFBheVBhbENvbW1lcmNlRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogUGF5UGFsQ29tbWVyY2VGaWVsZHM7XG4gICAgc3VibWl0KGNvbmZpZz86IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N1Ym1pdENvbmZpZyk6IFByb21pc2U8dm9pZD47XG4gICAgZ2V0U3RhdGUoKTogUHJvbWlzZTxQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3VibWl0Q29uZmlnIHtcbiAgICBiaWxsaW5nQWRkcmVzczoge1xuICAgICAgICBjb21wYW55Pzogc3RyaW5nO1xuICAgICAgICBhZGRyZXNzTGluZTE6IHN0cmluZztcbiAgICAgICAgYWRkcmVzc0xpbmUyPzogc3RyaW5nO1xuICAgICAgICBhZG1pbkFyZWExOiBzdHJpbmc7IC8vIFN0YXRlXG4gICAgICAgIGFkbWluQXJlYTI6IHN0cmluZzsgLy8gQ2l0eVxuICAgICAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgICAgIGNvdW50cnlDb2RlPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsU0RLIHtcbiAgICBDYXJkRmllbGRzOiAoZGF0YTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzQ29uZmlnKSA9PiBQcm9taXNlPFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkcz47XG4gICAgR29vZ2xlcGF5OiAoKSA9PiB7XG4gICAgICAgIGNvbmZpZzogKCkgPT4gUHJvbWlzZTxHb29nbGVQYXlDb25maWc+O1xuICAgICAgICBjb25maXJtT3JkZXI6IChhcmcwOiB7XG4gICAgICAgICAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kRGF0YTogQ29uZmlybU9yZGVyRGF0YTtcbiAgICAgICAgfSkgPT4gUHJvbWlzZTx7IHN0YXR1czogc3RyaW5nIH0+O1xuICAgICAgICBpbml0aWF0ZVBheWVyQWN0aW9uOiAoKSA9PiB2b2lkO1xuICAgIH07XG4gICAgRlVORElORzogUGF5UGFsQ29tbWVyY2VTREtGdW5kaW5nO1xuICAgIEhvc3RlZEZpZWxkczoge1xuICAgICAgICBpc0VsaWdpYmxlKCk6IGJvb2xlYW47XG4gICAgICAgIHJlbmRlcihkYXRhOiBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc1JlbmRlck9wdGlvbnMpOiBQcm9taXNlPFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzPjtcbiAgICB9O1xuICAgIExlZ2FsOiBQYXlQYWxMZWdhbCAmIExlZ2FsRnVuZGluZztcbiAgICBCdXR0b25zKG9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMpOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnM7XG4gICAgUGF5bWVudEZpZWxkcyhvcHRpb25zOiBQYXlQYWxDb21tZXJjZVBheW1lbnRGaWVsZHNPcHRpb25zKTogUGF5UGFsQ29tbWVyY2VQYXltZW50RmllbGRzO1xuICAgIE1lc3NhZ2VzKG9wdGlvbnM6IFBheVBhbENvbW1lcmNlTWVzc2FnZXNPcHRpb25zKTogUGF5UGFsQ29tbWVyY2VNZXNzYWdlcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb25maXJtT3JkZXJEYXRhIHtcbiAgICB0b2tlbml6YXRpb25EYXRhOiB7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgdG9rZW46IHN0cmluZztcbiAgICB9O1xuICAgIGluZm86IHtcbiAgICAgICAgY2FyZE5ldHdvcms6IHN0cmluZztcbiAgICAgICAgY2FyZERldGFpbHM6IHN0cmluZztcbiAgICB9O1xuICAgIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHb29nbGVQYXlDb25maWcge1xuICAgIGFsbG93ZWRQYXltZW50TWV0aG9kczogQWxsb3dlZFBheW1lbnRNZXRob2RzW107XG4gICAgYXBpVmVyc2lvbjogbnVtYmVyO1xuICAgIGFwaVZlcnNpb25NaW5vcjogbnVtYmVyO1xuICAgIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgaXNFbGlnaWJsZTogYm9vbGVhbjtcbiAgICBtZXJjaGFudEluZm86IHtcbiAgICAgICAgbWVyY2hhbnRJZDogc3RyaW5nO1xuICAgICAgICBtZXJjaGFudE9yaWdpbjogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxsb3dlZFBheW1lbnRNZXRob2RzIHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgICBhbGxvd2VkQXV0aE1ldGhvZHM6IHN0cmluZ1tdO1xuICAgICAgICBhbGxvd2VkQ2FyZE5ldHdvcmtzOiBzdHJpbmdbXTtcbiAgICAgICAgYmlsbGluZ0FkZHJlc3NSZXF1aXJlZDogYm9vbGVhbjtcbiAgICAgICAgYXNzdXJhbmNlRGV0YWlsc1JlcXVpcmVkOiBib29sZWFuO1xuICAgICAgICBiaWxsaW5nQWRkcmVzc1BhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIGZvcm1hdDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgdG9rZW5pemF0aW9uU3BlY2lmaWNhdGlvbjoge1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIGdhdGV3YXk6IHN0cmluZztcbiAgICAgICAgICAgIGdhdGV3YXlNZXJjaGFudElkOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuZXhwb3J0IHR5cGUgUGF5UGFsTGVnYWwgPSAocGFyYW1zOiB7IGZ1bmRpbmdTb3VyY2U6IHN0cmluZyB9KSA9PiB7XG4gICAgcmVuZGVyKGNvbnRhaW5lcjogc3RyaW5nKTogdm9pZDtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVnYWxGdW5kaW5nIHtcbiAgICBGVU5ESU5HOiB7XG4gICAgICAgIFBBWV9VUE9OX0lOVk9JQ0U6IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpcnRoRGF0ZSB7XG4gICAgZ2V0RnVsbFllYXIoKTogbnVtYmVyO1xuICAgIGdldERhdGUoKTogbnVtYmVyO1xuICAgIGdldE1vbnRoKCk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZVNjcmlwdFBhcmFtcyB7XG4gICAgb3B0aW9uczoge1xuICAgICAgICAnY2xpZW50LWlkJz86IHN0cmluZztcbiAgICAgICAgJ21lcmNoYW50LWlkJz86IHN0cmluZztcbiAgICAgICAgJ2J1eWVyLWNvdW50cnknPzogc3RyaW5nO1xuICAgICAgICAnZGlzYWJsZS1mdW5kaW5nJz86IEZ1bmRpbmdUeXBlO1xuICAgICAgICAnZW5hYmxlLWZ1bmRpbmcnPzogRW5hYmxlRnVuZGluZ1R5cGU7XG4gICAgICAgIGN1cnJlbmN5Pzogc3RyaW5nO1xuICAgICAgICBjb21taXQ/OiBib29sZWFuO1xuICAgICAgICBpbnRlbnQ/OiBQYXlQYWxDb21tZXJjZUludGVudDtcbiAgICAgICAgY29tcG9uZW50cz86IENvbXBvbmVudHNTY3JpcHRUeXBlO1xuICAgIH07XG4gICAgYXR0cmlidXRlczoge1xuICAgICAgICAnZGF0YS1jbGllbnQtdG9rZW4nPzogc3RyaW5nO1xuICAgICAgICAnZGF0YS1jbGllbnQtbWV0YWRhdGEtaWQnPzogc3RyaW5nO1xuICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtdXNlci1pZC10b2tlbic/OiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGVudW0gUGF5UGFsQ29tbWVyY2VJbnRlbnQge1xuICAgIEFVVEhPUklaRSA9ICdhdXRob3JpemUnLFxuICAgIENBUFRVUkUgPSAnY2FwdHVyZScsXG59XG5cbmV4cG9ydCB0eXBlIENvbXBvbmVudHNTY3JpcHRUeXBlID0gQXJyYXk8XG4gICAgfCAnYnV0dG9ucydcbiAgICB8ICdmdW5kaW5nLWVsaWdpYmlsaXR5J1xuICAgIHwgJ2hvc3RlZC1maWVsZHMnXG4gICAgfCAnbWVzc2FnZXMnXG4gICAgfCAncGF5bWVudC1maWVsZHMnXG4gICAgfCAnbGVnYWwnXG4gICAgfCAnZ29vZ2xlcGF5J1xuICAgIHwgJ2Nvbm5lY3QnXG4gICAgfCAnY2FyZC1maWVsZHMnXG4+O1xuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlSG9zdFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgcGF5cGFsPzogUGF5UGFsU0RLO1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgQ29tbWVyY2UgSW5pdGlhbGl6YXRpb24gRGF0YVxuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSB7XG4gICAgYXR0cmlidXRpb25JZD86IHN0cmluZztcbiAgICBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzOiBGdW5kaW5nVHlwZTtcbiAgICBidXR0b25TdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucztcbiAgICBidXllckNvdW50cnk/OiBzdHJpbmc7XG4gICAgY2xpZW50SWQ6IHN0cmluZztcbiAgICBjbGllbnRUb2tlbj86IHN0cmluZztcbiAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczogRnVuZGluZ1R5cGU7XG4gICAgaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZT86IGJvb2xlYW47XG4gICAgaW50ZW50PzogUGF5UGFsQ29tbWVyY2VJbnRlbnQ7XG4gICAgaXNBY2NlbGVyYXRlZENoZWNrb3V0RW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlPzogYm9vbGVhbjtcbiAgICBpc1Zlbm1vRW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNHb29nbGVQYXlFbmFibGVkPzogYm9vbGVhbjtcbiAgICBtZXJjaGFudElkPzogc3RyaW5nO1xuICAgIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgc2hvdWxkUmVuZGVyRmllbGRzPzogYm9vbGVhbjtcbiAgICBzaG91bGRSdW5BY2NlbGVyYXRlZENoZWNrb3V0PzogYm9vbGVhbjtcbiAgICBwYXltZW50QnV0dG9uU3R5bGVzPzogUmVjb3JkPHN0cmluZywgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zPjtcbiAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbj86IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbVtdO1xuICAgIGlzQXBwU3dpdGNoRW5hYmxlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBzdGF0dXM6IGJvb2xlYW47XG4gICAgc3R5bGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgQ29tbWVyY2UgQnV5Tm93XG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zIHtcbiAgICBnZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkoKTogQnV5Tm93Q2FydFJlcXVlc3RCb2R5O1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgQ29tbWVyY2UgSG9zdGVkIEZpZWxkc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc1JlbmRlck9wdGlvbnMge1xuICAgIGZpZWxkcz86IHtcbiAgICAgICAgbnVtYmVyPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZE9wdGlvbjtcbiAgICAgICAgY3Z2PzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZE9wdGlvbjtcbiAgICAgICAgZXhwaXJhdGlvbkRhdGU/OiBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkT3B0aW9uO1xuICAgIH07XG4gICAgcGF5bWVudHNTREs/OiBib29sZWFuO1xuICAgIHN0eWxlcz86IHtcbiAgICAgICAgaW5wdXQ/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgICAgICAnLmludmFsaWQnPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJy52YWxpZCc/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgICAgICAnOmZvY3VzJz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgfTtcbiAgICBjcmVhdGVPcmRlcigpOiBQcm9taXNlPHN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZE9wdGlvbiB7XG4gICAgc2VsZWN0b3I6IHN0cmluZztcbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkcyB7XG4gICAgc3VibWl0KFxuICAgICAgICBvcHRpb25zPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNTdWJtaXRPcHRpb25zLFxuICAgICk6IFByb21pc2U8UGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNBcHByb3ZlPjtcbiAgICBnZXRTdGF0ZSgpOiBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc1N0YXRlO1xuICAgIG9uKGV2ZW50TmFtZTogc3RyaW5nLCBjYWxsYmFjazogKGV2ZW50OiBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc1N0YXRlKSA9PiB2b2lkKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc1N1Ym1pdE9wdGlvbnMge1xuICAgIGNvbnRpbmdlbmNpZXM/OiBBcnJheTwnM0RfU0VDVVJFJz47XG4gICAgY2FyZGhvbGRlck5hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNBcHByb3ZlIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgbGlhYmlsaXR5U2hpZnQ/OiAnUE9TU0lCTEUnIHwgJ05PJyB8ICdVTktOT1dOJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc1N0YXRlIHtcbiAgICBjYXJkczogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNDYXJkW107XG4gICAgZW1pdHRlZEJ5OiBzdHJpbmc7XG4gICAgZmllbGRzOiB7XG4gICAgICAgIG51bWJlcj86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBleHBpcmF0aW9uRGF0ZT86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBleHBpcmF0aW9uTW9udGg/OiBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvblllYXI/OiBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgY3Z2PzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIHBvc3RhbENvZGU/OiBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzQ2FyZCB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIG5pY2VUeXBlOiBzdHJpbmc7XG4gICAgY29kZToge1xuICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgIHNpemU6IG51bWJlcjtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzRmllbGREYXRhIHtcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgICBpc0VtcHR5OiBib29sZWFuO1xuICAgIGlzUG90ZW50aWFsbHlWYWxpZDogYm9vbGVhbjtcbiAgICBpc1ZhbGlkOiBib29sZWFuO1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgQ29tbWVyY2UgQnV0dG9uc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUJ1dHRvbnMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbiAgICBjbG9zZSgpOiB2b2lkO1xuICAgIGlzRWxpZ2libGUoKTogYm9vbGVhbjtcbiAgICBoYXNSZXR1cm5lZD8oKTogYm9vbGVhbjtcbiAgICByZXN1bWU/KCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyB7XG4gICAgZXhwZXJpZW5jZT86IHN0cmluZztcbiAgICBzdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucztcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG4gICAgY3JlYXRlT3JkZXIoKTogUHJvbWlzZTxzdHJpbmc+O1xuICAgIG9uQXBwcm92ZShcbiAgICAgICAgZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICApOiBQcm9taXNlPGJvb2xlYW4gfCB2b2lkPiB8IHZvaWQ7XG4gICAgb25Jbml0PyhkYXRhOiBJbml0Q2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBJbml0Q2FsbGJhY2tBY3Rpb25zKTogUHJvbWlzZTx2b2lkPjtcbiAgICBvbkNvbXBsZXRlPyhkYXRhOiBDb21wbGV0ZUNhbGxiYWNrRGF0YVBheWxvYWQpOiBQcm9taXNlPHZvaWQ+O1xuICAgIG9uQ2xpY2s/KGRhdGE6IENsaWNrQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBDbGlja0NhbGxiYWNrQWN0aW9ucyk6IFByb21pc2U8dm9pZD4gfCB2b2lkO1xuICAgIG9uRXJyb3I/KGVycm9yOiBFcnJvcik6IHZvaWQ7XG4gICAgb25DYW5jZWw/KCk6IHZvaWQ7XG4gICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U/KGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCk6IFByb21pc2U8dm9pZD47XG4gICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U/KGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNlbGVjdGVkU2hpcHBpbmdPcHRpb246IFBheVBhbFNlbGVjdGVkU2hpcHBpbmdPcHRpb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2hpcHBpbmdBZGRyZXNzOiBQYXlQYWxBZGRyZXNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsaWNrQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xpY2tDYWxsYmFja0FjdGlvbnMge1xuICAgIHJlamVjdCgpOiB2b2lkO1xuICAgIHJlc29sdmUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbml0Q2FsbGJhY2tQYXlsb2FkIHtcbiAgICBjb3JyZWxhdGlvbklEOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5pdENhbGxiYWNrQWN0aW9ucyB7XG4gICAgZGlzYWJsZSgpOiB2b2lkO1xuICAgIGVuYWJsZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEFkZHJlc3Mge1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIHBvc3RhbENvZGU6IHN0cmluZztcbiAgICBzdGF0ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEFkZHJlc3NDYWxsYmFja0RhdGEge1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBjb3VudHJ5X2NvZGU6IHN0cmluZztcbiAgICBwb3N0YWxfY29kZTogc3RyaW5nO1xuICAgIHN0YXRlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsU2VsZWN0ZWRTaGlwcGluZ09wdGlvbiB7XG4gICAgYW1vdW50OiB7XG4gICAgICAgIGN1cnJlbmN5X2NvZGU6IHN0cmluZztcbiAgICAgICAgdmFsdWU6IHN0cmluZztcbiAgICB9O1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBzZWxlY3RlZDogYm9vbGVhbjtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJRD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zIHtcbiAgICBvcmRlcjoge1xuICAgICAgICBnZXQ6ICgpID0+IFByb21pc2U8UGF5UGFsT3JkZXJEZXRhaWxzPjtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyRGV0YWlscyB7XG4gICAgcGF5ZXI6IHtcbiAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgZ2l2ZW5fbmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgc3VybmFtZTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbF9hZGRyZXNzOiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3M6IFBheVBhbE9yZGVyQWRkcmVzcztcbiAgICAgICAgcGhvbmU/OiB7XG4gICAgICAgICAgICBwaG9uZV9udW1iZXI6IHtcbiAgICAgICAgICAgICAgICBuYXRpb25hbF9udW1iZXI6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBwdXJjaGFzZV91bml0czogQXJyYXk8e1xuICAgICAgICBzaGlwcGluZzoge1xuICAgICAgICAgICAgYWRkcmVzczogUGF5UGFsT3JkZXJBZGRyZXNzO1xuICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgIGZ1bGxfbmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlckFkZHJlc3Mge1xuICAgIGFkZHJlc3NfbGluZV8xOiBzdHJpbmc7XG4gICAgYWRkcmVzc19saW5lXzI6IHN0cmluZztcbiAgICBhZG1pbl9hcmVhXzI6IHN0cmluZztcbiAgICBhZG1pbl9hcmVhXzE/OiBzdHJpbmc7XG4gICAgcG9zdGFsX2NvZGU6IHN0cmluZztcbiAgICBjb3VudHJ5X2NvZGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0ZUNhbGxiYWNrRGF0YVBheWxvYWQge1xuICAgIGludGVudDogc3RyaW5nO1xuICAgIG9yZGVySUQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25MYWJlbCB7XG4gICAgcGF5cGFsID0gJ3BheXBhbCcsXG4gICAgY2hlY2tvdXQgPSAnY2hlY2tvdXQnLFxuICAgIGJ1eW5vdyA9ICdidXlub3cnLFxuICAgIHBheSA9ICdwYXknLFxuICAgIGluc3RhbGxtZW50ID0gJ2luc3RhbGxtZW50Jyxcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25Db2xvciB7XG4gICAgZ29sZCA9ICdnb2xkJyxcbiAgICBibHVlID0gJ2JsdWUnLFxuICAgIHNpbHZlciA9ICdzaWx2ZXInLFxuICAgIGJsYWNrID0gJ2JsYWNrJyxcbiAgICB3aGl0ZSA9ICd3aGl0ZScsXG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uU2hhcGUge1xuICAgIHBpbGwgPSAncGlsbCcsXG4gICAgcmVjdCA9ICdyZWN0Jyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMge1xuICAgIGNvbG9yPzogU3R5bGVCdXR0b25Db2xvcjtcbiAgICBzaGFwZT86IFN0eWxlQnV0dG9uU2hhcGU7XG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIGxhYmVsPzogU3R5bGVCdXR0b25MYWJlbDtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIFBheW1lbnQgZmllbGRzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlUGF5bWVudEZpZWxkcyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlUGF5bWVudEZpZWxkc09wdGlvbnMge1xuICAgIHN0eWxlPzogUGF5UGFsQ29tbWVyY2VGaWVsZHNTdHlsZU9wdGlvbnM7XG4gICAgZnVuZGluZ1NvdXJjZTogc3RyaW5nO1xuICAgIGZpZWxkczoge1xuICAgICAgICBuYW1lPzoge1xuICAgICAgICAgICAgdmFsdWU/OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgICAgIGVtYWlsPzoge1xuICAgICAgICAgICAgdmFsdWU/OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUZpZWxkc1N0eWxlT3B0aW9ucyB7XG4gICAgdmFyaWFibGVzPzoge1xuICAgICAgICBmb250RmFtaWx5Pzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZUJhc2U/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplU20/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVMZz86IHN0cmluZztcbiAgICAgICAgdGV4dENvbG9yPzogc3RyaW5nO1xuICAgICAgICBjb2xvclRleHRQbGFjZWhvbGRlcj86IHN0cmluZztcbiAgICAgICAgY29sb3JCYWNrZ3JvdW5kPzogc3RyaW5nO1xuICAgICAgICBjb2xvckluZm8/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yRGFuZ2VyPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJSYWRpdXM/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckNvbG9yPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJXaWR0aD86IHN0cmluZztcbiAgICAgICAgYm9yZGVyRm9jdXNDb2xvcj86IHN0cmluZztcbiAgICAgICAgc3BhY2luZ1VuaXQ/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBydWxlcz86IHtcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xuICAgIH07XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbENvbW1lcmNlIE1lc3NhZ2VzXG4gKi9cbi8vIFRPRE86IFRoaXMgaW50ZXJmYWNlIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIFBheVBheVNESyBpbnRlcmZhY2UgaXMgcmVtb3ZlZFxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZU1lc3NhZ2VzIHtcbiAgICByZW5kZXIoaWQ6IHN0cmluZyk6IHZvaWQ7XG59XG5cbi8vIFRPRE86IFRoaXMgaW50ZXJmYWNlIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIFBheVBheVNESyBpbnRlcmZhY2UgaXMgcmVtb3ZlZFxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZU1lc3NhZ2VzT3B0aW9ucyB7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgcGxhY2VtZW50OiBzdHJpbmc7XG4gICAgc3R5bGU/OiBQYXlQYWxDb21tZXJjZU1lc3NhZ2VzU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U/OiBzdHJpbmc7XG59XG5cbi8vIFRPRE86IFRoaXMgaW50ZXJmYWNlIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIFBheVBheVNESyBpbnRlcmZhY2UgaXMgcmVtb3ZlZFxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZU1lc3NhZ2VzU3R5bGVPcHRpb25zIHtcbiAgICBsYXlvdXQ/OiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqIE90aGVyXG4gKlxuICovXG5leHBvcnQgZW51bSBOb25JbnN0YW50QWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyB7XG4gICAgT1hYTyA9ICdveHhvJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlckRhdGEge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbiAgICBzZXR1cFRva2VuPzogc3RyaW5nO1xuICAgIGFwcHJvdmVVcmw6IHN0cmluZztcbiAgICBmYXN0bGFuZVRva2VuPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFVwZGF0ZU9yZGVyUmVxdWVzdEJvZHkge1xuICAgIGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucz86IFNoaXBwaW5nT3B0aW9uW107XG4gICAgY2FydElkOiBzdHJpbmc7XG4gICAgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbj86IFNoaXBwaW5nT3B0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2Uge1xuICAgIHN0YXR1c0NvZGU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5IGV4dGVuZHMgSG9zdGVkSW5zdHJ1bWVudCwgVmF1bHRlZEluc3RydW1lbnQge1xuICAgIGNhcnRJZDogc3RyaW5nO1xuICAgIG1ldGFkYXRhSWQ/OiBzdHJpbmc7XG4gICAgc2V0dXBUb2tlbj86IGJvb2xlYW47XG4gICAgZmFzdGxhbmVUb2tlbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGVudW0gUGF5UGFsT3JkZXJTdGF0dXMge1xuICAgIEFwcHJvdmVkID0gJ0FQUFJPVkVEJyxcbiAgICBDcmVhdGVkID0gJ0NSRUFURUQnLFxuICAgIFBheWVyQWN0aW9uUmVxdWlyZWQgPSAnUEFZRVJfQUNUSU9OX1JFUVVJUkVEJyxcbiAgICBQb2xsaW5nU3RvcCA9ICdQT0xMSU5HX1NUT1AnLFxuICAgIFBvbGxpbmdFcnJvciA9ICdQT0xMSU5HX0VSUk9SJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlclN0YXR1c0RhdGEge1xuICAgIHN0YXR1czogUGF5UGFsT3JkZXJTdGF0dXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ3JlYXRlT3JkZXJDYXJkRmllbGRzUmVzcG9uc2Uge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbiAgICBzZXR1cFRva2VuPzogc3RyaW5nO1xufVxuIiwiaW1wb3J0IHsgRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5pbXBvcnQgeyBpc05pbCwgb21pdEJ5IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5LFxuICAgIEJ1eU5vd0NhcnRDcmVhdGlvbkVycm9yLFxuICAgIENhcnQsXG4gICAgQ2FydFNvdXJjZSxcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG4gICAgUmVxdWVzdEVycm9yLFxuICAgIFJlcXVlc3RPcHRpb25zLFxuICAgIFNoaXBwaW5nT3B0aW9uLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlciBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1yZXF1ZXN0LXNlbmRlcic7XG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VTY3JpcHRMb2FkZXIgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2Utc2NyaXB0LWxvYWRlcic7XG5pbXBvcnQge1xuICAgIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyxcbiAgICBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxDcmVhdGVPcmRlckNhcmRGaWVsZHNSZXNwb25zZSxcbiAgICBQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheVBhbE9yZGVyRGV0YWlscyxcbiAgICBQYXlQYWxPcmRlclN0YXR1cyxcbiAgICBQYXlQYWxTREssXG4gICAgU3R5bGVCdXR0b25Db2xvcixcbiAgICBTdHlsZUJ1dHRvbkxhYmVsLFxuICAgIFN0eWxlQnV0dG9uU2hhcGUsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2Uge1xuICAgIHByaXZhdGUgcGF5cGFsU2RrPzogUGF5UGFsU0RLO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZm9ybVBvc3RlcjogRm9ybVBvc3RlcixcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlUmVxdWVzdFNlbmRlcjogUGF5UGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlU2NyaXB0TG9hZGVyOiBQYXlQYWxDb21tZXJjZVNjcmlwdExvYWRlcixcbiAgICApIHt9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheVBhbFNESyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBsb2FkUGF5UGFsU2RrKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwcm92aWRlZEN1cnJlbmN5Q29kZT86IHN0cmluZyxcbiAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZT86IGJvb2xlYW4sXG4gICAgICAgIGZvcmNlTG9hZD86IGJvb2xlYW4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxTREsgfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY3VycmVuY3lDb2RlID0gcHJvdmlkZWRDdXJyZW5jeUNvZGUgfHwgc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxTZGsgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlU2NyaXB0TG9hZGVyLmdldFBheVBhbFNESyhcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlLFxuICAgICAgICAgICAgZm9yY2VMb2FkLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnBheXBhbFNkaztcbiAgICB9XG5cbiAgICBnZXRQYXlQYWxTZGtPclRocm93KCk6IFBheVBhbFNESyB7XG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxTZGspIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5cGFsU2RrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV5IE5vdyBjYXJ0IGNyZWF0aW9uIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9uczogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxDYXJ0PiB7XG4gICAgICAgIGNvbnN0IGNhcnRSZXF1ZXN0Qm9keSA9IGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSgpO1xuXG4gICAgICAgIGlmICghY2FydFJlcXVlc3RCb2R5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydCk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0KGNhcnRSZXF1ZXN0Qm9keSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQnV5Tm93Q2FydENyZWF0aW9uRXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogT3JkZXIgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlT3JkZXIoXG4gICAgICAgIHByb3ZpZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdEJvZHk/OiBQYXJ0aWFsPFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHk+LFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuaWQ7XG5cbiAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlUmVxdWVzdFNlbmRlci5jcmVhdGVPcmRlcihwcm92aWRlcklkLCB7XG4gICAgICAgICAgICBjYXJ0SWQsXG4gICAgICAgICAgICAuLi5yZXF1ZXN0Qm9keSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG9yZGVySWQ7XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRlT3JkZXJDYXJkRmllbGRzKFxuICAgICAgICBwcm92aWRlcklkOiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3RCb2R5PzogUGFydGlhbDxQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5PixcbiAgICApOiBQcm9taXNlPFBheVBhbENyZWF0ZU9yZGVyQ2FyZEZpZWxkc1Jlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuaWQ7XG5cbiAgICAgICAgY29uc3QgeyBvcmRlcklkLCBzZXR1cFRva2VuIH0gPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlUmVxdWVzdFNlbmRlci5jcmVhdGVPcmRlcihcbiAgICAgICAgICAgIHByb3ZpZGVySWQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2FydElkLFxuICAgICAgICAgICAgICAgIC4uLnJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4geyBvcmRlcklkLCAuLi4oc2V0dXBUb2tlbiA/IHsgc2V0dXBUb2tlbiB9IDoge30pIH07XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlT3JkZXIoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBjb25zaWdubWVudCA9IHN0YXRlLmdldENvbnNpZ25tZW50c09yVGhyb3coKVswXTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIudXBkYXRlT3JkZXIoe1xuICAgICAgICAgICAgICAgIGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9uczogY29uc2lnbm1lbnQuYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLFxuICAgICAgICAgICAgICAgIGNhcnRJZDogY2FydC5pZCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uOiBjb25zaWdubWVudC5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0T3JkZXJTdGF0dXMobWV0aG9kSWQ/OiBzdHJpbmcsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8UGF5UGFsT3JkZXJTdGF0dXM+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc3RhdHVzIH0gPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlUmVxdWVzdFNlbmRlci5nZXRPcmRlclN0YXR1cyhcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWVzdEVycm9yKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheW1lbnQgc3VibWl0dGluZyBhbmQgdG9rZW5pemluZyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICB0b2tlbml6ZVBheW1lbnQobWV0aG9kSWQ6IHN0cmluZywgb3JkZXJJZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBjYXJ0ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKTtcblxuICAgICAgICBpZiAoIW9yZGVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1Qb3N0ZXIucG9zdEZvcm0oJy9jaGVja291dC5waHAnLCB7XG4gICAgICAgICAgICBwYXltZW50X3R5cGU6ICdwYXlwYWwnLFxuICAgICAgICAgICAgYWN0aW9uOiAnc2V0X2V4dGVybmFsX2NoZWNrb3V0JyxcbiAgICAgICAgICAgIHByb3ZpZGVyOiBtZXRob2RJZCxcbiAgICAgICAgICAgIG9yZGVyX2lkOiBvcmRlcklkLFxuICAgICAgICAgICAgLi4uKGNhcnQuc291cmNlID09PSBDYXJ0U291cmNlLkJ1eU5vdyAmJiB7IGNhcnRfaWQ6IGNhcnQuaWQgfSksXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIHN1Ym1pdFBheW1lbnQobWV0aG9kSWQ6IHN0cmluZywgb3JkZXJJZDogc3RyaW5nLCBnYXRld2F5SWQ/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgcGF5bWVudERhdGEgPSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OiBudWxsLFxuICAgICAgICAgICAgICAgIHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OiBudWxsLFxuICAgICAgICAgICAgICAgIGRldmljZV9pbmZvOiBudWxsLFxuICAgICAgICAgICAgICAgIG1ldGhvZF9pZDogbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IG9yZGVySWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YSxcbiAgICAgICAgICAgIC4uLihnYXRld2F5SWQgPyB7IGdhdGV3YXlJZCB9IDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFNoaXBwaW5nIG9wdGlvbnMgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KHNlbGVjdGVkU2hpcHBpbmdPcHRpb25JZD86IHN0cmluZyk6IFNoaXBwaW5nT3B0aW9uIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY29uc2lnbm1lbnQgPSBzdGF0ZS5nZXRDb25zaWdubWVudHNPclRocm93KClbMF07XG5cbiAgICAgICAgY29uc3QgYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zID0gY29uc2lnbm1lbnQuYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zIHx8IFtdO1xuXG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24gPSBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMuZmluZChcbiAgICAgICAgICAgIChvcHRpb24pID0+IG9wdGlvbi5pc1JlY29tbWVuZGVkLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkU2hpcHBpbmdPcHRpb24gPSBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uSWRcbiAgICAgICAgICAgID8gYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLmZpbmQoKG9wdGlvbikgPT4gb3B0aW9uLmlkID09PSBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uSWQpXG4gICAgICAgICAgICA6IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucy5maW5kKFxuICAgICAgICAgICAgICAgICAgKG9wdGlvbikgPT4gb3B0aW9uLmlkID09PSBjb25zaWdubWVudC5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uPy5pZCxcbiAgICAgICAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvblRvU2VsZWN0ID1cbiAgICAgICAgICAgIHNlbGVjdGVkU2hpcHBpbmdPcHRpb24gfHwgcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiB8fCBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnNbMF07XG5cbiAgICAgICAgaWYgKCFzaGlwcGluZ09wdGlvblRvU2VsZWN0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3VyIG9yZGVyIGNhbid0IGJlIHNoaXBwZWQgdG8gdGhpcyBhZGRyZXNzXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNoaXBwaW5nT3B0aW9uVG9TZWxlY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBBZGRyZXNzIHRyYW5zZm9ybWluZyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBnZXRBZGRyZXNzKGFkZHJlc3M/OiBQYXJ0aWFsPEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHk+KTogQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaXJzdE5hbWU6IGFkZHJlc3M/LmZpcnN0TmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBhZGRyZXNzPy5sYXN0TmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGVtYWlsOiBhZGRyZXNzPy5lbWFpbCB8fCAnJyxcbiAgICAgICAgICAgIHBob25lOiBhZGRyZXNzPy5waG9uZSB8fCAnJyxcbiAgICAgICAgICAgIGNvbXBhbnk6ICcnLFxuICAgICAgICAgICAgYWRkcmVzczE6IGFkZHJlc3M/LmFkZHJlc3MxIHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzczI6IGFkZHJlc3M/LmFkZHJlc3MyIHx8ICcnLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcz8uY2l0eSB8fCAnJyxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBhZGRyZXNzPy5jb3VudHJ5Q29kZSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3M/LnBvc3RhbENvZGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6ICcnLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogYWRkcmVzcz8uc3RhdGVPclByb3ZpbmNlQ29kZSB8fCAnJyxcbiAgICAgICAgICAgIGN1c3RvbUZpZWxkczogW10sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKHsgcGF5ZXIgfTogUGF5UGFsT3JkZXJEZXRhaWxzKTogQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFkZHJlc3Moe1xuICAgICAgICAgICAgZmlyc3ROYW1lOiBwYXllci5uYW1lLmdpdmVuX25hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogcGF5ZXIubmFtZS5zdXJuYW1lLFxuICAgICAgICAgICAgZW1haWw6IHBheWVyLmVtYWlsX2FkZHJlc3MsXG4gICAgICAgICAgICBhZGRyZXNzMTogcGF5ZXIuYWRkcmVzcy5hZGRyZXNzX2xpbmVfMSxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBwYXllci5hZGRyZXNzLmFkZHJlc3NfbGluZV8yLFxuICAgICAgICAgICAgY2l0eTogcGF5ZXIuYWRkcmVzcy5hZG1pbl9hcmVhXzIsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogcGF5ZXIuYWRkcmVzcy5jb3VudHJ5X2NvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBwYXllci5hZGRyZXNzLnBvc3RhbF9jb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogcGF5ZXIuYWRkcmVzcy5hZG1pbl9hcmVhXzEsXG4gICAgICAgICAgICBwaG9uZTogcGF5ZXIucGhvbmU/LnBob25lX251bWJlcj8ubmF0aW9uYWxfbnVtYmVyLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICBvcmRlckRldGFpbHM6IFBheVBhbE9yZGVyRGV0YWlscyxcbiAgICApOiBCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5IHtcbiAgICAgICAgY29uc3QgeyBwYXllciwgcHVyY2hhc2VfdW5pdHMgfSA9IG9yZGVyRGV0YWlscztcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYWRkcmVzcyxcbiAgICAgICAgICAgIG5hbWU6IHsgZnVsbF9uYW1lIH0sXG4gICAgICAgIH0gPSBwdXJjaGFzZV91bml0c1swXS5zaGlwcGluZztcblxuICAgICAgICBjb25zdCBbZmlyc3ROYW1lLCAuLi5sYXN0TmFtZV0gPSBmdWxsX25hbWUuc3BsaXQoJyAnKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBsYXN0TmFtZS5qb2luKCcgJyksXG4gICAgICAgICAgICBlbWFpbDogcGF5ZXIuZW1haWxfYWRkcmVzcyxcbiAgICAgICAgICAgIGFkZHJlc3MxOiBhZGRyZXNzLmFkZHJlc3NfbGluZV8xLFxuICAgICAgICAgICAgYWRkcmVzczI6IGFkZHJlc3MuYWRkcmVzc19saW5lXzIsXG4gICAgICAgICAgICBjaXR5OiBhZGRyZXNzLmFkbWluX2FyZWFfMixcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBhZGRyZXNzLmNvdW50cnlfY29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3MucG9zdGFsX2NvZGUsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBhZGRyZXNzLmFkbWluX2FyZWFfMSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXR0b25zIHN0eWxlIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMpOiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMge1xuICAgICAgICBjb25zdCB7IGNvbG9yLCBoZWlnaHQsIGxhYmVsLCBzaGFwZSB9ID0gc3R5bGUgfHwge307XG5cbiAgICAgICAgY29uc3QgdmFsaWRTdHlsZXMgPSB7XG4gICAgICAgICAgICBjb2xvcjogY29sb3IgJiYgU3R5bGVCdXR0b25Db2xvcltjb2xvcl0gPyBjb2xvciA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5nZXRWYWxpZEhlaWdodChoZWlnaHQpLFxuICAgICAgICAgICAgbGFiZWw6IGxhYmVsICYmIFN0eWxlQnV0dG9uTGFiZWxbbGFiZWxdID8gbGFiZWwgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzaGFwZTogc2hhcGUgJiYgU3R5bGVCdXR0b25TaGFwZVtzaGFwZV0gPyBzaGFwZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gb21pdEJ5KHZhbGlkU3R5bGVzLCBpc05pbCk7XG4gICAgfVxuXG4gICAgZ2V0VmFsaWRIZWlnaHQoaGVpZ2h0PzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdEhlaWdodCA9IDQwO1xuICAgICAgICBjb25zdCBtaW5IZWlnaHQgPSAyNTtcbiAgICAgICAgY29uc3QgbWF4SGVpZ2h0ID0gNTU7XG5cbiAgICAgICAgaWYgKCFoZWlnaHQgfHwgdHlwZW9mIGhlaWdodCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0SGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhlaWdodCA+IG1heEhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIG1heEhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoZWlnaHQgPCBtaW5IZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBtaW5IZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaGVpZ2h0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVXRpbHMgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcmVtb3ZlRWxlbWVudChlbGVtZW50SWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRJZCAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuXG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBGb3Igbm93IHRoaXMgaXMgYSB0ZW1wb3Jhcnkgc29sdXRpb24sIGZ1cnRoZXIgcmVtb3ZlRWxlbWVudCBtZXRob2Qgd2lsbCBiZSByZW1vdmVkXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgY29uc3QgSU5URVJOQUxfVVNFX09OTFkgPVxuICAgICdUaGlzIEFQSSBlbmRwb2ludCBpcyBmb3IgaW50ZXJuYWwgdXNlIG9ubHkgYW5kIG1heSBjaGFuZ2UgaW4gdGhlIGZ1dHVyZSc7XG4iLCJlbnVtIENvbnRlbnRUeXBlIHtcbiAgICBKc29uID0gJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIEpzb25WMSA9ICdhcHBsaWNhdGlvbi92bmQuYmMudjEranNvbicsXG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbnRlbnRUeXBlO1xuIiwiZXhwb3J0IGNvbnN0IFNES19WRVJTSU9OX0hFQURFUlMgPSB7ICdYLUNoZWNrb3V0LVNESy1WZXJzaW9uJzogTElCUkFSWV9WRVJTSU9OIH07XG4iLCJpbXBvcnQgeyBSZXF1ZXN0U2VuZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IHtcbiAgICBDb250ZW50VHlwZSxcbiAgICBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbiAgICBTREtfVkVSU0lPTl9IRUFERVJTLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheVBhbE9yZGVyRGF0YSxcbiAgICBQYXlQYWxPcmRlclN0YXR1c0RhdGEsXG4gICAgUGF5UGFsVXBkYXRlT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXlQYWxVcGRhdGVPcmRlclJlc3BvbnNlLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlciB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZXF1ZXN0U2VuZGVyOiBSZXF1ZXN0U2VuZGVyKSB7fVxuXG4gICAgYXN5bmMgY3JlYXRlT3JkZXIoXG4gICAgICAgIHByb3ZpZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdEJvZHk6IFBhcnRpYWw8UGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keT4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxPcmRlckRhdGE+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvc3RvcmVmcm9udC9wYXltZW50LyR7cHJvdmlkZXJJZH1gO1xuICAgICAgICBjb25zdCBib2R5ID0gcmVxdWVzdEJvZHk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBDb250ZW50VHlwZS5Kc29uLFxuICAgICAgICAgICAgLi4uU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3RTZW5kZXIucG9zdDxQYXlQYWxPcmRlckRhdGE+KHVybCwgeyBoZWFkZXJzLCBib2R5IH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuYm9keTtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVPcmRlcihcbiAgICAgICAgcmVxdWVzdEJvZHk6IFBheVBhbFVwZGF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgKTogUHJvbWlzZTxQYXlQYWxVcGRhdGVPcmRlclJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3N0b3JlZnJvbnQvaW5pdGlhbGl6YXRpb24vcGF5cGFsY29tbWVyY2VgO1xuICAgICAgICBjb25zdCBib2R5ID0gcmVxdWVzdEJvZHk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBDb250ZW50VHlwZS5Kc29uLFxuICAgICAgICAgICAgLi4uU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3RTZW5kZXIucHV0PFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2U+KHVybCwgeyBoZWFkZXJzLCBib2R5IH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuYm9keTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRPcmRlclN0YXR1cyhcbiAgICAgICAgbWV0aG9kSWQgPSAncGF5cGFsY29tbWVyY2UnLFxuICAgICAgICBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxPcmRlclN0YXR1c0RhdGE+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvc3RvcmVmcm9udC9pbml0aWFsaXphdGlvbi8ke21ldGhvZElkfWA7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBDb250ZW50VHlwZS5Kc29uLFxuICAgICAgICAgICAgLi4uU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3RTZW5kZXIuZ2V0PFBheVBhbE9yZGVyU3RhdHVzRGF0YT4odXJsLCB7XG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5ib2R5O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIENvbXBvbmVudHNTY3JpcHRUeXBlLFxuICAgIEZ1bmRpbmdUeXBlLFxuICAgIFBheVBhbENvbW1lcmNlSG9zdFdpbmRvdyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxDb21tZXJjZVNjcmlwdFBhcmFtcyxcbiAgICBQYXlQYWxTREssXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VTY3JpcHRMb2FkZXIge1xuICAgIHByaXZhdGUgd2luZG93OiBQYXlQYWxDb21tZXJjZUhvc3RXaW5kb3c7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNjcmlwdExvYWRlcjogU2NyaXB0TG9hZGVyKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBheVBhbFNESyhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlPzogYm9vbGVhbixcbiAgICAgICAgZm9yY2VMb2FkPzogYm9vbGVhbixcbiAgICApOiBQcm9taXNlPFBheVBhbFNESz4ge1xuICAgICAgICBjb25zdCBwYXlwYWxTZGtTY3JpcHRDb25maWcgPSB0aGlzLmdldFBheVBhbFNka1NjcmlwdENvbmZpZ09yVGhyb3coXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZSxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5sb2FkUGF5UGFsU0RLKHBheXBhbFNka1NjcmlwdENvbmZpZywgZm9yY2VMb2FkKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRQYXlQYWxTREsoXG4gICAgICAgIHBheXBhbFNka1NjcmlwdENvbmZpZzogUGF5UGFsQ29tbWVyY2VTY3JpcHRQYXJhbXMsXG4gICAgICAgIGZvcmNlTG9hZCA9IGZhbHNlLFxuICAgICk6IFByb21pc2U8UGF5UGFsU0RLPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsIHx8IGZvcmNlTG9hZCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPFBheVBhbENvbW1lcmNlU2NyaXB0UGFyYW1zWydvcHRpb25zJ10+KFxuICAgICAgICAgICAgICAgIHBheXBhbFNka1NjcmlwdENvbmZpZy5vcHRpb25zLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB0aGlzLnRyYW5zZm9ybUNvbmZpZzxQYXlQYWxDb21tZXJjZVNjcmlwdFBhcmFtc1snYXR0cmlidXRlcyddPihcbiAgICAgICAgICAgICAgICBwYXlwYWxTZGtTY3JpcHRDb25maWcuYXR0cmlidXRlcyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheXBhbFNka1VybCA9ICdodHRwczovL3d3dy5wYXlwYWwuY29tL3Nkay9qcyc7XG4gICAgICAgICAgICBjb25zdCBzY3JpcHRRdWVyeSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMob3B0aW9ucykudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdFNyYyA9IGAke3BheXBhbFNka1VybH0/JHtzY3JpcHRRdWVyeX1gO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KHNjcmlwdFNyYywgeyBhc3luYzogdHJ1ZSwgYXR0cmlidXRlcyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UgPSB0cnVlLFxuICAgICk6IFBheVBhbENvbW1lcmNlU2NyaXB0UGFyYW1zIHtcbiAgICAgICAgY29uc3QgeyBpZCwgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YT8uY2xpZW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgIGNsaWVudElkLFxuICAgICAgICAgICAgbWVyY2hhbnRJZCxcbiAgICAgICAgICAgIGJ1eWVyQ291bnRyeSxcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICBpc1Zlbm1vRW5hYmxlZCxcbiAgICAgICAgICAgIGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLFxuICAgICAgICAgICAgaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUsXG4gICAgICAgICAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLFxuICAgICAgICAgICAgYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyA9IFtdLFxuICAgICAgICAgICAgZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMgPSBbXSxcbiAgICAgICAgICAgIGlzR29vZ2xlUGF5RW5hYmxlZCxcbiAgICAgICAgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICBjb25zdCBjb21taXQgPSBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCB8fCBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlO1xuXG4gICAgICAgIGNvbnN0IHNob3VsZEVuYWJsZUNhcmQgPSBpZCA9PT0gJ3BheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHMnO1xuICAgICAgICBjb25zdCBlbmFibGVDYXJkRnVuZGluZyA9IHNob3VsZEVuYWJsZUNhcmQgPyBbJ2NhcmQnXSA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlQ2FyZEZ1bmRpbmcgPSAhc2hvdWxkRW5hYmxlQ2FyZCA/IFsnY2FyZCddIDogW107XG5cbiAgICAgICAgY29uc3QgZW5hYmxlQ3JlZGl0RnVuZGluZyA9IGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlID8gWydjcmVkaXQnLCAncGF5bGF0ZXInXSA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlQ3JlZGl0RnVuZGluZyA9ICFpc1BheVBhbENyZWRpdEF2YWlsYWJsZSA/IFsnY3JlZGl0JywgJ3BheWxhdGVyJ10gOiBbXTtcblxuICAgICAgICBjb25zdCBzaG91bGRFbmFibGVBUE1zID0gaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZSB8fCAhY29tbWl0O1xuICAgICAgICBjb25zdCBlbmFibGVWZW5tb0Z1bmRpbmcgPSBpc1Zlbm1vRW5hYmxlZCA/IFsndmVubW8nXSA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlVmVubW9GdW5kaW5nID0gIWlzVmVubW9FbmFibGVkID8gWyd2ZW5tbyddIDogW107XG4gICAgICAgIGNvbnN0IGVuYWJsZUFQTXNGdW5kaW5nID0gc2hvdWxkRW5hYmxlQVBNcyA/IGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVBUE1zRnVuZGluZyA9IHNob3VsZEVuYWJsZUFQTXNcbiAgICAgICAgICAgID8gYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAoYXBtOiBzdHJpbmcpID0+ICFlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5pbmNsdWRlcyhhcG0pLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM7XG4gICAgICAgIGNvbnN0IGdvb2dsZVBheUNvbXBvbmVudDogQ29tcG9uZW50c1NjcmlwdFR5cGUgPSBpc0dvb2dsZVBheUVuYWJsZWQgPyBbJ2dvb2dsZXBheSddIDogW107XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNDb21wb25lbnQ6IENvbXBvbmVudHNTY3JpcHRUeXBlID0gaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZVxuICAgICAgICAgICAgPyBbJ2NhcmQtZmllbGRzJ11cbiAgICAgICAgICAgIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVGdW5kaW5nOiBGdW5kaW5nVHlwZSA9IFtcbiAgICAgICAgICAgIC4uLmRpc2FibGVDYXJkRnVuZGluZyxcbiAgICAgICAgICAgIC4uLmRpc2FibGVDcmVkaXRGdW5kaW5nLFxuICAgICAgICAgICAgLi4uZGlzYWJsZVZlbm1vRnVuZGluZyxcbiAgICAgICAgICAgIC4uLmRpc2FibGVBUE1zRnVuZGluZyxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgZW5hYmxlRnVuZGluZzogRnVuZGluZ1R5cGUgPSBbXG4gICAgICAgICAgICAuLi5lbmFibGVDYXJkRnVuZGluZyxcbiAgICAgICAgICAgIC4uLmVuYWJsZUNyZWRpdEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVWZW5tb0Z1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVBUE1zRnVuZGluZyxcbiAgICAgICAgXTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgICdlbmFibGUtZnVuZGluZyc6IGVuYWJsZUZ1bmRpbmcubGVuZ3RoID4gMCA/IGVuYWJsZUZ1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgJ2Rpc2FibGUtZnVuZGluZyc6IGRpc2FibGVGdW5kaW5nLmxlbmd0aCA+IDAgPyBkaXNhYmxlRnVuZGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBjb21taXQsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgICAgICAgICAgICAnYnV0dG9ucycsXG4gICAgICAgICAgICAgICAgICAgICdob3N0ZWQtZmllbGRzJyxcbiAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQtZmllbGRzJyxcbiAgICAgICAgICAgICAgICAgICAgJ2xlZ2FsJyxcbiAgICAgICAgICAgICAgICAgICAgLi4uZ29vZ2xlUGF5Q29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICAuLi5jYXJkRmllbGRzQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICAgICAgLi4uKGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUgJiYgeyAnYnV5ZXItY291bnRyeSc6IGJ1eWVyQ291bnRyeSB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICAgICAgJ2RhdGEtY2xpZW50LXRva2VuJzogY2xpZW50VG9rZW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJhbnNmb3JtQ29uZmlnPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oY29uZmlnOiBUKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgICAgIGxldCB0cmFuc2Zvcm1lZENvbmZpZyA9IHt9O1xuXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpIGFzIEFycmF5PGtleW9mIFQ+O1xuXG4gICAgICAgIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbmZpZ1trZXldO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgdmFsdWUgPT09ICcnIHx8XG4gICAgICAgICAgICAgICAgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJhbnNmb3JtZWRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgLi4udHJhbnNmb3JtZWRDb25maWcsXG4gICAgICAgICAgICAgICAgW2tleV06IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUuam9pbignLCcpIDogdmFsdWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWRDb25maWc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5pbXBvcnQgeyBjcmVhdGVSZXF1ZXN0U2VuZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcbmltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgUGF5bWVudEludGVncmF0aW9uU2VydmljZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlcixcbiAgICBQYXlQYWxDb21tZXJjZVNjcmlwdExvYWRlcixcbn0gZnJvbSAnLi9pbmRleCc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICBjb25zdCB7IGdldEhvc3QgfSA9IHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgIHJldHVybiBuZXcgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UoXG4gICAgICAgIGNyZWF0ZUZvcm1Qb3N0ZXIoKSxcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgbmV3IFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlcihjcmVhdGVSZXF1ZXN0U2VuZGVyKHsgaG9zdDogZ2V0SG9zdCgpIH0pKSxcbiAgICAgICAgbmV3IFBheVBhbENvbW1lcmNlU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U7XG4iLCJleHBvcnQgY29uc3QgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTID0ge1xuICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ3JnYmEoMCwgMCwgMCwgMC40KScsXG4gICAgJ3otaW5kZXgnOiAnMTAwMCcsXG59O1xuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBtZXRob2QgaXMgdW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGVcbiAqIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgYXJndW1lbnRzIGFjY29yZGluZyB0byB0aGVpciByZXF1aXJlbWVudHMsXG4gKiBpLmUuOiBpZiBhbiBhcmd1bWVudCBpcyBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnSW52YWxpZCBhcmd1bWVudHMgaGF2ZSBiZWVuIHByb3ZpZGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkQXJndW1lbnRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdpbnZhbGlkX2FyZ3VtZW50JztcbiAgICB9XG59XG4iLCJpbXBvcnQgSW52YWxpZEFyZ3VtZW50RXJyb3IgZnJvbSAnLi9pbnZhbGlkLWFyZ3VtZW50LWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB3ZSBhcmUgdW5hYmxlIHRvIHN1Ym1pdCBhIHBheW1lbnQgYmVjYXVzZVxuICogdGhlIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzLCBpLmUuOiBpZiBhbiBhcmd1bWVudCBpc1xuICogbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIGV4dGVuZHMgSW52YWxpZEFyZ3VtZW50RXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGludmFsaWRGaWVsZHM/OiBzdHJpbmdbXSkge1xuICAgICAgICBsZXQgbWVzc2FnZSA9ICdVbmFibGUgdG8gc3VibWl0IHBheW1lbnQgZm9yIHRoZSBvcmRlciBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIGludmFsaWQuJztcblxuICAgICAgICBpZiAoaW52YWxpZEZpZWxkcykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IE1ha2Ugc3VyZSB0aGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgcHJvdmlkZWQgY29ycmVjdGx5OiAke2ludmFsaWRGaWVsZHMuam9pbihcbiAgICAgICAgICAgICAgICAnLCAnLFxuICAgICAgICAgICAgKX0uYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHVuYWJsZSB0byBzdWNjZXNzZnVsbHkgc3VibWl0IGEgc2VydmVyIHJlcXVlc3RcbiAqIHVzaW5nIGEgcGF5bWVudCBtZXRob2QgYmVjYXVzZSB0aGUgbWV0aG9kIGhhcyBpbnZhbGlkIGNvbmZpZ3VyYXRpb24gb3IgaXMgaW5cbiAqIGFuIGludmFsaWQgc3RhdGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3I8VCA9IGFueT4gZXh0ZW5kcyBSZXF1ZXN0RXJyb3I8VD4ge1xuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlPzogUmVzcG9uc2U8VD4pIHtcbiAgICAgICAgc3VwZXIocmVzcG9uc2UsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGVyZSBpcyBhIHByb2JsZW0gcHJvY2Vzc2luZyB5b3VyIHBheW1lbnQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RJbnZhbGlkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfaW52YWxpZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSG9zdGVkSW5zdHJ1bWVudCB9IGZyb20gJy4vcGF5bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UoXG4gICAgaW5zdHJ1bWVudDogdW5rbm93bixcbik6IGluc3RydW1lbnQgaXMgSG9zdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGluc3RydW1lbnQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGluc3RydW1lbnQgIT09IG51bGwgJiZcbiAgICAgICAgKHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKSAmJlxuICAgICAgICAodHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKVxuICAgICk7XG59XG4iLCJpbXBvcnQge1xuICAgIEZvcm1hdHRlZFBheWxvYWQsXG4gICAgRm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICcuL3BheW1lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1ZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgVmF1bHRlZEluc3RydW1lbnQge1xuICAgIHJldHVybiBCb29sZWFuKChpbnN0cnVtZW50IGFzIFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgICBCb29sZWFuKChpbnN0cnVtZW50IGFzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdHJ1bWVudCwgJ2NjTnVtYmVyJykgJiZcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0cnVtZW50LCAnY2NDdnYnKVxuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Zvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgRm9ybWF0dGVkUGF5bG9hZDxGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudD4ge1xuICAgIGNvbnN0IGZvcm1hdHRlZEluc3RydW1lbnQgPSAoaW5zdHJ1bWVudCBhcyBGb3JtYXR0ZWRQYXlsb2FkPEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50PilcbiAgICAgICAgLmZvcm1hdHRlZFBheWxvYWQ7XG5cbiAgICBpZiAoIWZvcm1hdHRlZEluc3RydW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgQm9vbGVhbihmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiAmJiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbi50b2tlbilcbiAgICApO1xufVxuIiwiaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vLyBIYXZlIHRvIHVzZSBgYXNgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzczOTg3MDQ0L3R5cGVndWFyZGluZy1hbi11bmtub3duLW5lc3RlZC1vYmplY3Qgc2hvdWxkIGJlIGZpeGVkIGluIDQuOCtcbmNvbnN0IGlzUmVxdWVzdEVycm9yID0gKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVxdWVzdEVycm9yID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnYm9keScgaW4gZXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpc1JlcXVlc3RFcnJvcjtcbiIsImltcG9ydCB7IE1lc3NhZ2VzU3R5bGVPcHRpb25zLCBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0gfSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5mdW5jdGlvbiBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnKHtcbiAgICBzdHlsZXMsXG59OiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0pOiBNZXNzYWdlc1N0eWxlT3B0aW9ucyB7XG4gICAgY29uc3QgbWVzc2FnZXNTdHlsZXM6IE1lc3NhZ2VzU3R5bGVPcHRpb25zID0ge307XG5cbiAgICBpZiAoc3R5bGVzLmNvbG9yKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLmNvbG9yID0gc3R5bGVzLmNvbG9yO1xuICAgIH1cblxuICAgIGlmIChzdHlsZXMubGF5b3V0KSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLmxheW91dCA9IHN0eWxlcy5sYXlvdXQ7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlc1snbG9nby10eXBlJ10gfHwgc3R5bGVzWydsb2dvLXBvc2l0aW9uJ10pIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMubG9nbyA9IHt9O1xuXG4gICAgICAgIGlmIChzdHlsZXNbJ2xvZ28tdHlwZSddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvLnR5cGUgPSBzdHlsZXNbJ2xvZ28tdHlwZSddO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0eWxlc1snbG9nby1wb3NpdGlvbiddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvLnBvc2l0aW9uID0gc3R5bGVzWydsb2dvLXBvc2l0aW9uJ107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3R5bGVzLnJhdGlvKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLnJhdGlvID0gc3R5bGVzLnJhdGlvO1xuICAgIH1cblxuICAgIGlmIChzdHlsZXNbJ3RleHQtY29sb3InXSB8fCBzdHlsZXNbJ3RleHQtc2l6ZSddKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLnRleHQgPSB7fTtcblxuICAgICAgICBpZiAoc3R5bGVzWyd0ZXh0LWNvbG9yJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLnRleHQuY29sb3IgPSBzdHlsZXNbJ3RleHQtY29sb3InXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdHlsZXNbJ3RleHQtc2l6ZSddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy50ZXh0LnNpemUgPSArc3R5bGVzWyd0ZXh0LXNpemUnXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtZXNzYWdlc1N0eWxlcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZztcbiIsImV4cG9ydCBpbnRlcmZhY2UgQmFzZUluc3RydW1lbnQge1xuICAgIGJpZ3BheVRva2VuOiBzdHJpbmc7XG4gICAgZGVmYXVsdEluc3RydW1lbnQ6IGJvb2xlYW47XG4gICAgcHJvdmlkZXI6IHN0cmluZztcbiAgICB0cnVzdGVkU2hpcHBpbmdBZGRyZXNzOiBib29sZWFuO1xuICAgIG1ldGhvZDogc3RyaW5nO1xuICAgIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQmFzZUluc3RydW1lbnQoaW5zdHJ1bWVudDogdW5rbm93bik6IGluc3RydW1lbnQgaXMgQmFzZUluc3RydW1lbnQge1xuICAgIGlmICh0eXBlb2YgaW5zdHJ1bWVudCAhPT0gJ29iamVjdCcgfHwgaW5zdHJ1bWVudCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgJ2JpZ3BheVRva2VuJyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICdkZWZhdWx0SW5zdHJ1bWVudCcgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAncHJvdmlkZXInIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ3RydXN0ZWRTaGlwcGluZ0FkZHJlc3MnIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ21ldGhvZCcgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAndHlwZScgaW4gaW5zdHJ1bWVudFxuICAgICk7XG59XG4iLCJpbXBvcnQge1xuICAgIEhvc3RlZEluc3RydW1lbnQsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnLFxuICAgIGlzUGF5cGFsQ29tbWVyY2VQcm92aWRlckVycm9yLFxuICAgIGlzUmVkaXJlY3RBY3Rpb25FcnJvcixcbiAgICBNZXNzYWdpbmdPcHRpb25zLFxuICAgIFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICBQYXlQYWxDb21tZXJjZVNkayxcbiAgICBQYXlQYWxNZXNzYWdlc1Nkayxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtY29tbWVyY2UtdXRpbHMnO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuaW1wb3J0IHsgaXNCYXNlSW5zdHJ1bWVudCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdXRpbGl0eSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZVBheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgb3JkZXJJZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheXBhbEJ1dHRvbj86IFBheVBhbENvbW1lcmNlQnV0dG9ucztcbiAgICBwcml2YXRlIHBheXBhbGNvbW1lcmNlPzogUGF5UGFsQ29tbWVyY2VQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZVNkazogUGF5UGFsQ29tbWVyY2VTZGssXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZSB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICB0aGlzLnBheXBhbGNvbW1lcmNlID0gcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIGJhbm5lckNvbnRhaW5lcklkIH0gPSBwYXlwYWxjb21tZXJjZTtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBvcmRlcklkLFxuICAgICAgICAgICAgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24gPSBbXSxcbiAgICAgICAgICAgIGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlLFxuICAgICAgICB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgaWYgKGJhbm5lckNvbnRhaW5lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYmFubmVyQ29udGFpbmVySWQpKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY3JlYXRlIGJhbm5lciB3aXRob3V0IHZhbGlkIGJhbm5lciBjb250YWluZXIgSUQuJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGJhbm5lckNvbmZpZ3VyYXRpb24gPSBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbj8uZmluZChcbiAgICAgICAgICAgICAgICAoeyBpZCB9KSA9PiBpZCA9PT0gJ2NoZWNrb3V0JyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChpc1BheVBhbENyZWRpdEF2YWlsYWJsZSB8fCAhYmFubmVyQ29uZmlndXJhdGlvbj8uc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwYXlwYWxNZXNzYWdlcyA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsTWVzc2FnZXMoXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoIXBheXBhbE1lc3NhZ2VzIHx8IHR5cGVvZiBwYXlwYWxNZXNzYWdlcz8uTWVzc2FnZXMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICAgICAnW0JDIFBheVBhbENvbW1lcmNlIFBheUxhdGVyXTogYmFubmVyIGNvdWxkIG5vdCBiZSByZW5kZXJlZCwgZHVlIHRvIGlzc3VlcyB3aXRoIGxvYWRpbmcgUGF5UGFsIFNESycsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTWVzc2FnZXMocGF5cGFsTWVzc2FnZXMsIGJhbm5lckNvbnRhaW5lcklkLCBiYW5uZXJDb25maWd1cmF0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluZm86XG4gICAgICAgIC8vIFRoZSBQYXlQYWwgYnV0dG9uIGFuZCBmaWVsZHMgc2hvdWxkIG5vdCBiZSByZW5kZXJlZCB3aGVuIHNob3BwZXIgd2FzIHJlZGlyZWN0ZWQgdG8gQ2hlY2tvdXQgcGFnZVxuICAgICAgICAvLyBhZnRlciB1c2luZyBzbWFydCBwYXltZW50IGJ1dHRvbiBvbiBQRFAgb3IgQ2FydCBwYWdlLiBJbiB0aGlzIGNhc2UgYmFja2VuZCByZXR1cm5zIG9yZGVyIGlkIGlmXG4gICAgICAgIC8vIGl0IGlzIGF2YWlsYWJsZSBpbiBjaGVja291dCBzZXNzaW9uLiBUaGVyZWZvcmUsIGl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gcmVuZGVyIFBheVBhbCBidXR0b24uXG4gICAgICAgIGlmIChvcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8ub3JkZXJJZDtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gY29udGFpbmVyPy5zcGxpdCgnIycpWzFdO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKHBheXBhbGNvbW1lcmNlLm9uSW5pdCAmJiB0eXBlb2YgcGF5cGFsY29tbWVyY2Uub25Jbml0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBwYXlwYWxjb21tZXJjZS5vbkluaXQoKCkgPT4gdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBwYXlwYWxjb21tZXJjZS5zaG91bGRSZW5kZXJQYXlQYWxCdXR0b25PbkluaXRpYWxpemF0aW9uID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlLnNob3VsZFJlbmRlclBheVBhbEJ1dHRvbk9uSW5pdGlhbGl6YXRpb25cbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgcGF5cGFsY29tbWVyY2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHsgb25FcnJvciB9ID0gdGhpcy5wYXlwYWxjb21tZXJjZSB8fCB7fTtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5bWVudERhdGEgfSA9IHBheW1lbnQ7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQYXlQYWxWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnREYXRhKHBheW1lbnREYXRhKSAmJiAhdGhpcy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBhd2FpdCB0aGlzLmNyZWF0ZU9yZGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMub3JkZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gdGhpcy5pc1BheVBhbFZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudERhdGEocGF5bWVudERhdGEpXG4gICAgICAgICAgICA/IHRoaXMucHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQobWV0aG9kSWQsIHRoaXMub3JkZXJJZCwgcGF5bWVudERhdGEpXG4gICAgICAgICAgICA6IHRoaXMucHJlcGFyZVBheW1lbnRQYXlsb2FkKG1ldGhvZElkLCB0aGlzLm9yZGVySWQsIHBheW1lbnREYXRhKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIGlmIChpc1JlZGlyZWN0QWN0aW9uRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVkaXJlY3RVcmwgPSBlcnJvci5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkPy5kYXRhPy5yZWRpcmVjdF91cmw7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4gd2luZG93LmxvY2F0aW9uLnJlcGxhY2UocmVkaXJlY3RVcmwpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcm92aWRlckVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhwYXltZW50Lm1ldGhvZElkKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBheXBhbGNvbW1lcmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbj8uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKHBheW1lbnQubWV0aG9kSWQsIHRoaXMucGF5cGFsY29tbWVyY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IoJ0lOU1RSVU1FTlRfREVDTElORUQnKSwgb25FcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgb25FcnJvcik7XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByZXBhcmVWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxPcmRlcklkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBWYXVsdGVkSW5zdHJ1bWVudCAmIEhvc3RlZEluc3RydW1lbnQsXG4gICAgKTogUGF5bWVudCB7XG4gICAgICAgIGNvbnN0IHsgaW5zdHJ1bWVudElkLCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IH0gPSBwYXltZW50RGF0YTtcblxuICAgICAgICBjb25zdCBzaG91bGRDb25maXJtSW5zdHJ1bWVudCA9ICF0aGlzLmlzVHJ1c3RlZFZhdWx0aW5nRmxvdyhwYXltZW50RGF0YSk7XG5cbiAgICAgICAgaWYgKHNob3VsZENvbmZpcm1JbnN0cnVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50OiBzaG91bGRDb25maXJtSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogcGF5cGFsT3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBwYXlwYWxPcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBiaWdwYXlfdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcmVwYXJlUGF5bWVudFBheWxvYWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbE9yZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcGF5bWVudERhdGE6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5WydwYXltZW50RGF0YSddLFxuICAgICk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCB7IHNob3VsZFNhdmVJbnN0cnVtZW50ID0gZmFsc2UsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPSBmYWxzZSB9ID1cbiAgICAgICAgICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UocGF5bWVudERhdGEpID8gcGF5bWVudERhdGEgOiB7fTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxfYWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IHBheXBhbE9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXR0b24gbWV0aG9kcy9jYWxsYmFja3NcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNlOiBQYXlQYWxDb21tZXJjZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uRXJyb3IsIG9uUmVuZGVyQnV0dG9uLCBvblZhbGlkYXRlLCBzdWJtaXRGb3JtIH0gPSBwYXlwYWxjb21tZXJjZTtcblxuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJjb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBidXR0b25PcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgLi4uKHRoaXMuaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQpICYmIHtcbiAgICAgICAgICAgICAgICBhcHBTd2l0Y2hXaGVuQXZhaWxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuRlVORElORy5QQVlQQUwsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKFxuICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT4gdGhpcy5jcmVhdGVPcmRlcigpLFxuICAgICAgICAgICAgb25DbGljazogKF8sIGFjdGlvbnMpID0+IHRoaXMuaGFuZGxlQ2xpY2soYWN0aW9ucywgb25WYWxpZGF0ZSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhKSA9PiB0aGlzLmhhbmRsZUFwcHJvdmUoZGF0YSwgc3VibWl0Rm9ybSksXG4gICAgICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIG9uRXJyb3IpLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25PcHRpb25zKTtcblxuICAgICAgICBpZiAoIXRoaXMucGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9uUmVuZGVyQnV0dG9uICYmIHR5cGVvZiBvblJlbmRlckJ1dHRvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25SZW5kZXJCdXR0b24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnBheXBhbEJ1dHRvbi5oYXNSZXR1cm5lZD8uKCkgJiYgdGhpcy5pc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZChtZXRob2RJZCkpIHtcbiAgICAgICAgICAgIHRoaXMucGF5cGFsQnV0dG9uLnJlc3VtZT8uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbi5yZW5kZXIoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGFjdGlvbnM6IENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBvblZhbGlkYXRlOiBQYXlQYWxDb21tZXJjZVBheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25WYWxpZGF0ZSddLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHJlc29sdmUsIHJlamVjdCB9ID0gYWN0aW9ucztcblxuICAgICAgICBjb25zdCBvblZhbGlkYXRpb25QYXNzZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG9uVmFsaWRhdGU/LihvblZhbGlkYXRpb25QYXNzZWQsIHJlamVjdCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVBcHByb3ZlKFxuICAgICAgICB7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgc3VibWl0Rm9ybTogUGF5UGFsQ29tbWVyY2VQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ3N1Ym1pdEZvcm0nXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJRDtcblxuICAgICAgICBzdWJtaXRGb3JtPy4oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKFxuICAgICAgICBlcnJvcjogdW5rbm93bixcbiAgICAgICAgb25FcnJvcjogUGF5UGFsQ29tbWVyY2VQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uRXJyb3InXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZU9yZGVyKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGZpZWxkc1ZhbHVlcyA9IHRoaXMuZ2V0RmllbGRzVmFsdWVzKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoJ3BheXBhbGNvbW1lcmNlY2hlY2tvdXQnLCB7XG4gICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudDogZmllbGRzVmFsdWVzPy5zaG91bGRTYXZlSW5zdHJ1bWVudCB8fCBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBWYXVsdGluZyBmbG93IG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSBnZXRGaWVsZHNWYWx1ZXMoKTogSG9zdGVkSW5zdHJ1bWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGNvbnN0IHsgZ2V0RmllbGRzVmFsdWVzIH0gPSB0aGlzLnBheXBhbGNvbW1lcmNlIHx8IHt9O1xuXG4gICAgICAgIHJldHVybiB0eXBlb2YgZ2V0RmllbGRzVmFsdWVzID09PSAnZnVuY3Rpb24nID8gZ2V0RmllbGRzVmFsdWVzKCkgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1RydXN0ZWRWYXVsdGluZ0Zsb3cocGF5bWVudERhdGE/OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHBheW1lbnREYXRhICYmIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgICAgICBjb25zdCBpbnN0cnVtZW50cyA9IHN0YXRlLmdldEluc3RydW1lbnRzKCk7XG4gICAgICAgICAgICBjb25zdCBmaW5kSW5zdHJ1bWVudCA9IGluc3RydW1lbnRzPy5maW5kKFxuICAgICAgICAgICAgICAgIChpbnN0cnVtZW50KSA9PlxuICAgICAgICAgICAgICAgICAgICBpc0Jhc2VJbnN0cnVtZW50KGluc3RydW1lbnQpICYmXG4gICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnQuYmlncGF5VG9rZW4gPT09IHBheW1lbnREYXRhLmluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCB0cnVzdGVkU2hpcHBpbmdBZGRyZXNzID0gaXNCYXNlSW5zdHJ1bWVudChmaW5kSW5zdHJ1bWVudClcbiAgICAgICAgICAgICAgICA/IGZpbmRJbnN0cnVtZW50LnRydXN0ZWRTaGlwcGluZ0FkZHJlc3NcbiAgICAgICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgICAgICByZXR1cm4gISF0cnVzdGVkU2hpcHBpbmdBZGRyZXNzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTG9hZGluZyBJbmRpY2F0b3IgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogR3VhcmRzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzUGF5UGFsVmF1bHRlZEluc3RydW1lbnRQYXltZW50RGF0YShcbiAgICAgICAgcGF5bWVudERhdGE/OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4gICAgKTogcGF5bWVudERhdGEgaXMgVmF1bHRlZEluc3RydW1lbnQgJiBIb3N0ZWRJbnN0cnVtZW50IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICEhcGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkgJiYgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFJlbmRlciBQYXkgTGF0ZXIgTWVzc2FnZXNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlcyhcbiAgICAgICAgcGF5cGFsTWVzc2FnZXM6IFBheVBhbE1lc3NhZ2VzU2RrLFxuICAgICAgICBiYW5uZXJDb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBiYW5uZXJDb25maWd1cmF0aW9uOiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNoZWNrb3V0ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2hlY2tvdXRPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXNPcHRpb25zOiBNZXNzYWdpbmdPcHRpb25zID0ge1xuICAgICAgICAgICAgYW1vdW50OiBjaGVja291dC5vdXRzdGFuZGluZ0JhbGFuY2UsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6ICdwYXltZW50JyxcbiAgICAgICAgICAgIHN0eWxlOiBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnKGJhbm5lckNvbmZpZ3VyYXRpb24pLFxuICAgICAgICB9O1xuXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzLk1lc3NhZ2VzKHBheXBhbE1lc3NhZ2VzT3B0aW9ucykucmVuZGVyKGAjJHtiYW5uZXJDb250YWluZXJJZH1gKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEVycm9yIGhhbmRsaW5nXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzUHJvdmlkZXJFcnJvcihlcnJvcjogdW5rbm93bik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoaXNQYXlwYWxDb21tZXJjZVByb3ZpZGVyRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlwYWxQcm92aWRlckVycm9yID0gZXJyb3I/LmVycm9ycz8uZmlsdGVyKChlKSA9PiBlLnByb3ZpZGVyX2Vycm9yKSB8fCBbXTtcblxuICAgICAgICAgICAgcmV0dXJuIHBheXBhbFByb3ZpZGVyRXJyb3JbMF0/LnByb3ZpZGVyX2Vycm9yPy5jb2RlID09PSAnSU5TVFJVTUVOVF9ERUNMSU5FRCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXlQYWwgQXBwU3dpdGNoIGVuYWJsaW5nIGhhbmRsaW5nXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIHJldHVybiBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8uaXNBcHBTd2l0Y2hFbmFibGVkIHx8IGZhbHNlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGlzUmVxdWVzdEVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IFByb3ZpZGVyRXJyb3IgfSBmcm9tICcuL2lzLXBheXBhbC1jb21tZXJjZS1wcm92aWRlci1lcnJvcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVkaXJlY3RBY3Rpb25FcnJvciBleHRlbmRzIFByb3ZpZGVyRXJyb3Ige1xuICAgIGJvZHk6IHtcbiAgICAgICAgYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ6IHtcbiAgICAgICAgICAgIHR5cGU6ICdvZmZzaXRlX3JlZGlyZWN0JztcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdF91cmw6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNSZWRpcmVjdEFjdGlvbkVycm9yKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVkaXJlY3RBY3Rpb25FcnJvciB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgaXNSZXF1ZXN0RXJyb3IoZXJyb3IpICYmIGVycm9yLmJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ/LnR5cGUgPT09ICdvZmZzaXRlX3JlZGlyZWN0J1xuICAgICk7XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIFByb3ZpZGVyRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgZXJyb3JzPzogRXJyb3JFbGVtZW50W107XG4gICAgc3RhdHVzPzogc3RyaW5nO1xuICAgIHRocmVlX2RzX3Jlc3VsdD86IHtcbiAgICAgICAgYWNzX3VybDogdW5rbm93bjtcbiAgICAgICAgcGF5ZXJfYXV0aF9yZXF1ZXN0OiB1bmtub3duO1xuICAgICAgICBtZXJjaGFudF9kYXRhOiB1bmtub3duO1xuICAgICAgICBjYWxsYmFja191cmw6IHVua25vd247XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFcnJvckVsZW1lbnQge1xuICAgIGNvZGU6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgcHJvdmlkZXJfZXJyb3I/OiB7XG4gICAgICAgIGNvZGU6IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1BheXBhbENvbW1lcmNlUHJvdmlkZXJFcnJvcihlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIFByb3ZpZGVyRXJyb3Ige1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdlcnJvcnMnIGluIGVycm9yO1xufVxuIiwiaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IFBheVBhbENvbW1lcmNlU2RrIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtY29tbWVyY2UtdXRpbHMnO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyB9IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1jb25zdGFudHMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFBheVBhbENvbW1lcmNlUGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZVBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIG5ldyBQYXlQYWxDb21tZXJjZVNkayhnZXRTY3JpcHRMb2FkZXIoKSksXG4gICAgICAgIG5ldyBMb2FkaW5nSW5kaWNhdG9yKHtcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlczogTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTLFxuICAgICAgICB9KSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VQYXltZW50U3RyYXRlZ3ksIFt7IGlkOiAncGF5cGFsY29tbWVyY2UnIH1dKTtcbiIsImltcG9ydCB7IGNyZWF0ZVNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlU2RrIGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXNkayc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVBheVBhbENvbW1lcmNlU2RrKCk6IFBheVBhbENvbW1lcmNlU2RrIHtcbiAgICByZXR1cm4gbmV3IFBheVBhbENvbW1lcmNlU2RrKGNyZWF0ZVNjcmlwdExvYWRlcigpKTtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgdHJ5IHRvIGNhbGwgYSBtZXRob2QgdGhhdCBpcyBvbmx5IGEgc3R1YiBhbmQgaGFzIG5vdFxuICogYmVlbiBmdWxseSBpbXBsZW1lbnRlZC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW1wbGVtZW50ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnTm90IGltcGxlbWVudGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbXBsZW1lbnRlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbXBsZW1lbnRlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBOb3RJbXBsZW1lbnRlZEVycm9yLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnLFxuICAgIE1lc3NhZ2luZ09wdGlvbnMsXG4gICAgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbENvbW1lcmNlU2RrLFxuICAgIFBheVBhbE1lc3NhZ2VzU2RrLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtY3JlZGl0LXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj86IHN0cmluZztcbiAgICBwcml2YXRlIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwYXlwYWxCdXR0b24/OiBQYXlQYWxDb21tZXJjZUJ1dHRvbnM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yOiBMb2FkaW5nSW5kaWNhdG9yLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlU2RrOiBQYXlQYWxDb21tZXJjZVNkayxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZSwgcGF5cGFsY29tbWVyY2VjcmVkaXQgfSA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgY29uc3QgcGF5cGFsT3B0aW9ucyA9IHBheXBhbGNvbW1lcmNlY3JlZGl0IHx8IHBheXBhbGNvbW1lcmNlO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsT3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3QgeyBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiA9IFtdLCBvcmRlcklkIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBiYW5uZXJDb250YWluZXJJZCwgY29udGFpbmVyIH0gPSBwYXlwYWxPcHRpb25zO1xuXG4gICAgICAgIGlmIChiYW5uZXJDb250YWluZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJhbm5lckNvbnRhaW5lcklkKSkge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNyZWF0ZSBiYW5uZXIgd2l0aG91dCB2YWxpZCBiYW5uZXIgY29udGFpbmVyIElELicpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBiYW5uZXJDb25maWd1cmF0aW9uID1cbiAgICAgICAgICAgICAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiAmJlxuICAgICAgICAgICAgICAgIHBheXBhbEJOUExDb25maWd1cmF0aW9uLmZpbmQoKHsgaWQgfSkgPT4gaWQgPT09ICdjaGVja291dCcpO1xuXG4gICAgICAgICAgICBpZiAoIWJhbm5lckNvbmZpZ3VyYXRpb24/LnN0YXR1cykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXMgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlU2RrLmdldFBheVBhbE1lc3NhZ2VzKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTWVzc2FnZXMocGF5cGFsTWVzc2FnZXMsIGJhbm5lckNvbnRhaW5lcklkLCBiYW5uZXJDb25maWd1cmF0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluZm86XG4gICAgICAgIC8vIFRoZSBQYXlQYWwgYnV0dG9uIGFuZCBmaWVsZHMgc2hvdWxkIG5vdCBiZSByZW5kZXJlZCB3aGVuIHNob3BwZXIgd2FzIHJlZGlyZWN0ZWQgdG8gQ2hlY2tvdXQgcGFnZVxuICAgICAgICAvLyBhZnRlciB1c2luZyBzbWFydCBwYXltZW50IGJ1dHRvbiBvbiBQRFAgb3IgQ2FydCBwYWdlLiBJbiB0aGlzIGNhc2UgYmFja2VuZCByZXR1cm5zIG9yZGVyIGlkIGlmXG4gICAgICAgIC8vIGl0IGlzIGF2YWlsYWJsZSBpbiBjaGVja291dCBzZXNzaW9uLiBUaGVyZWZvcmUsIGl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gcmVuZGVyIFBheVBhbCBidXR0b24uXG4gICAgICAgIGlmIChvcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklkO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IGNvbnRhaW5lcj8uc3BsaXQoJyMnKVsxXTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgcGF5cGFsT3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnQubWV0aG9kSWQsIHRoaXMub3JkZXJJZCk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1dHRvbiBtZXRob2RzL2NhbGxiYWNrc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsT3B0aW9uczogUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGlmICghcGF5cGFsT3B0aW9ucz8uY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcImNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBwYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG5cbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uRXJyb3IsIG9uUmVuZGVyQnV0dG9uLCBvblZhbGlkYXRlLCBzdWJtaXRGb3JtIH0gPSBwYXlwYWxPcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IGZ1bmRpbmdTb3VyY2VzID0gW3BheXBhbFNkay5GVU5ESU5HLlBBWUxBVEVSLCBwYXlwYWxTZGsuRlVORElORy5DUkVESVRdO1xuICAgICAgICBsZXQgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IGZhbHNlO1xuXG4gICAgICAgIGZ1bmRpbmdTb3VyY2VzLmZvckVhY2goKGZ1bmRpbmdTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmIChoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBidXR0b25PcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2UsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAncGF5cGFsY29tbWVyY2VjcmVkaXRjaGVja291dCcsXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgb25DbGljazogKF8sIGFjdGlvbnMpID0+IHRoaXMuaGFuZGxlQ2xpY2soYWN0aW9ucywgb25WYWxpZGF0ZSksXG4gICAgICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YSkgPT4gdGhpcy5oYW5kbGVBcHByb3ZlKGRhdGEsIHN1Ym1pdEZvcm0pLFxuICAgICAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpLFxuICAgICAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgb25FcnJvciksXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvbk9wdGlvbnMpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMucGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSAmJiBmdW5kaW5nU291cmNlID09PSBwYXlwYWxTZGsuRlVORElORy5QQVlMQVRFUikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLnBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkgJiYgZnVuZGluZ1NvdXJjZSA9PT0gcGF5cGFsU2RrLkZVTkRJTkcuQ1JFRElUKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGBQYXlQYWwgJHtmdW5kaW5nU291cmNlfSBpcyBub3QgYXZhaWxhYmxlIGZvciB5b3VyIHJlZ2lvbi4gUGxlYXNlIHVzZSBQYXlQYWwgQ2hlY2tvdXQgaW5zdGVhZC5gLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvblJlbmRlckJ1dHRvbiAmJiB0eXBlb2Ygb25SZW5kZXJCdXR0b24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvblJlbmRlckJ1dHRvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbi5yZW5kZXIoY29udGFpbmVyKTtcbiAgICAgICAgICAgIGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBhY3Rpb25zOiBDbGlja0NhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgb25WYWxpZGF0ZTogUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uVmFsaWRhdGUnXSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyByZXNvbHZlLCByZWplY3QgfSA9IGFjdGlvbnM7XG5cbiAgICAgICAgY29uc3Qgb25WYWxpZGF0aW9uUGFzc2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRydWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChvblZhbGlkYXRlICYmIHR5cGVvZiBvblZhbGlkYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gb25WYWxpZGF0ZShvblZhbGlkYXRpb25QYXNzZWQsIHJlamVjdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUFwcHJvdmUoXG4gICAgICAgIHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBzdWJtaXRGb3JtOiBQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRJbml0aWFsaXplT3B0aW9uc1snc3VibWl0Rm9ybSddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklEO1xuXG4gICAgICAgIGlmIChzdWJtaXRGb3JtICYmIHR5cGVvZiBzdWJtaXRGb3JtID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdWJtaXRGb3JtKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKFxuICAgICAgICBlcnJvcjogRXJyb3IsXG4gICAgICAgIG9uRXJyb3I6IFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvbkVycm9yJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBMb2FkaW5nIEluZGljYXRvciBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgdG9nZ2xlTG9hZGluZ0luZGljYXRvcihpc0xvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGlzTG9hZGluZyAmJiB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZW5kZXIgUGF5IExhdGVyIE1lc3NhZ2VzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzOiBQYXlQYWxNZXNzYWdlc1NkayxcbiAgICAgICAgYmFubmVyQ29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgYmFubmVyQ29uZmlndXJhdGlvbjogUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBjaGVja291dCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENoZWNrb3V0T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbE1lc3NhZ2VzT3B0aW9uczogTWVzc2FnaW5nT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGFtb3VudDogY2hlY2tvdXQub3V0c3RhbmRpbmdCYWxhbmNlLFxuICAgICAgICAgICAgcGxhY2VtZW50OiAncGF5bWVudCcsXG4gICAgICAgICAgICBzdHlsZTogZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyhiYW5uZXJDb25maWd1cmF0aW9uKSxcbiAgICAgICAgfTtcblxuICAgICAgICBwYXlwYWxNZXNzYWdlcy5NZXNzYWdlcyhwYXlwYWxNZXNzYWdlc09wdGlvbnMpLnJlbmRlcihgIyR7YmFubmVyQ29udGFpbmVySWR9YCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBjcmVhdGVQYXlQYWxDb21tZXJjZVNkayB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLWNvbW1lcmNlLXV0aWxzJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQgeyBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMgfSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtY29uc3RhbnRzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBuZXcgTG9hZGluZ0luZGljYXRvcih7XG4gICAgICAgICAgICBjb250YWluZXJTdHlsZXM6IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyxcbiAgICAgICAgfSksXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlU2RrKCksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNlY3JlZGl0JyB9LFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE5vdEltcGxlbWVudGVkRXJyb3IsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgb3JkZXJJZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheXBhbEJ1dHRvbj86IFBheVBhbENvbW1lcmNlQnV0dG9ucztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZSwgcGF5cGFsY29tbWVyY2V2ZW5tbyB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBjb25zdCBwYXlwYWxPcHRpb25zID0gcGF5cGFsY29tbWVyY2V2ZW5tbyB8fCBwYXlwYWxjb21tZXJjZTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbE9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZXZlbm1vXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgLy8gSW5mbzpcbiAgICAgICAgLy8gVGhlIFBheVBhbCBidXR0b24gYW5kIGZpZWxkcyBzaG91bGQgbm90IGJlIHJlbmRlcmVkIHdoZW4gc2hvcHBlciB3YXMgcmVkaXJlY3RlZCB0byBDaGVja291dCBwYWdlXG4gICAgICAgIC8vIGFmdGVyIHVzaW5nIHNtYXJ0IHBheW1lbnQgYnV0dG9uIG9uIFBEUCBvciBDYXJ0IHBhZ2UuIEluIHRoaXMgY2FzZSBiYWNrZW5kIHJldHVybnMgb3JkZXIgaWQgaWZcbiAgICAgICAgLy8gaXQgaXMgYXZhaWxhYmxlIGluIGNoZWNrb3V0IHNlc3Npb24uIFRoZXJlZm9yZSwgaXQgaXMgbm90IG5lY2Vzc2FyeSB0byByZW5kZXIgUGF5UGFsIGJ1dHRvbi5cbiAgICAgICAgaWYgKHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8ub3JkZXJJZDtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIgPSBwYXlwYWxPcHRpb25zLmNvbnRhaW5lci5zcGxpdCgnIycpWzFdO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBwYXlwYWxPcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocGF5bWVudC5tZXRob2RJZCwgdGhpcy5vcmRlcklkKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24/LmNsb3NlKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV0dG9uIG1ldGhvZHMvY2FsbGJhY2tzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxjb21tZXJjZXZlbm1vOiBQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkVycm9yLCBvblJlbmRlckJ1dHRvbiwgb25WYWxpZGF0ZSwgc3VibWl0Rm9ybSB9ID0gcGF5cGFsY29tbWVyY2V2ZW5tbztcblxuICAgICAgICBjb25zdCBidXR0b25PcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuVkVOTU8sXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKFxuICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdwYXlwYWxjb21tZXJjZXZlbm1vY2hlY2tvdXQnKSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IChfLCBhY3Rpb25zKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGFjdGlvbnMsIG9uVmFsaWRhdGUpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YSkgPT4gdGhpcy5oYW5kbGVBcHByb3ZlKGRhdGEsIHN1Ym1pdEZvcm0pLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSksXG4gICAgICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIG9uRXJyb3IpLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKFxuICAgICAgICAgICAgICAgIGBQYXlQYWwgVmVubW8gaXMgbm90IGF2YWlsYWJsZSBmb3IgeW91ciByZWdpb24uIFBsZWFzZSB1c2UgUGF5UGFsIENoZWNrb3V0IGluc3RlYWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob25SZW5kZXJCdXR0b24gJiYgdHlwZW9mIG9uUmVuZGVyQnV0dG9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvblJlbmRlckJ1dHRvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24ucmVuZGVyKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYWN0aW9uczogQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG9uVmFsaWRhdGU6IFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uVmFsaWRhdGUnXSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyByZXNvbHZlLCByZWplY3QgfSA9IGFjdGlvbnM7XG5cbiAgICAgICAgY29uc3Qgb25WYWxpZGF0aW9uUGFzc2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRydWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBvblZhbGlkYXRlKG9uVmFsaWRhdGlvblBhc3NlZCwgcmVqZWN0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUFwcHJvdmUoXG4gICAgICAgIHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBzdWJtaXRGb3JtOiBQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydzdWJtaXRGb3JtJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySUQ7XG5cbiAgICAgICAgc3VibWl0Rm9ybSgpO1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoXG4gICAgICAgIGVycm9yOiBFcnJvcixcbiAgICAgICAgb25FcnJvcjogUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25FcnJvciddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTG9hZGluZyBJbmRpY2F0b3IgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtdmVubW8tcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlVmVubW9QYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgbmV3IExvYWRpbmdJbmRpY2F0b3IoeyBzdHlsZXM6IHsgYmFja2dyb3VuZENvbG9yOiAnYmxhY2snIH0gfSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlVmVubW9QYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2V2ZW5tbycgfSxcbl0pO1xuIiwiaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIHJlcXVlc3QgZmFpbHMgdG8gY29tcGxldGUgd2l0aGluIGl0cyByZXF1aXJlZCB0aW1lZnJhbWVcbiAqIGJlY2F1c2Ugb2YgYSBuZXR3b3JrIGlzc3VlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lb3V0RXJyb3I8VCA9IGFueT4gZXh0ZW5kcyBSZXF1ZXN0RXJyb3I8VD4ge1xuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlPzogUmVzcG9uc2U8VD4pIHtcbiAgICAgICAgc3VwZXIocmVzcG9uc2UsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgcmVxdWVzdCBoYXMgdGltZWQgb3V0IG9yIGFib3J0ZWQuJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1RpbWVvdXRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICd0aW1lb3V0JztcbiAgICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIEZlYXR1cmVzIHtcbiAgICBbZmVhdHVyZU5hbWU6IHN0cmluZ106IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzRXhwZXJpbWVudEVuYWJsZWQoXG4gICAgZmVhdHVyZXM6IEZlYXR1cmVzLFxuICAgIGV4cGVyaW1lbnROYW1lOiBzdHJpbmcsXG4gICAgZmFsbGJhY2tWYWx1ZSA9IHRydWUsXG4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmVhdHVyZXNbZXhwZXJpbWVudE5hbWVdID8/IGZhbGxiYWNrVmFsdWU7XG59XG4iLCJpbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG4gICAgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFRpbWVvdXRFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBQYXlQYWxBcG1TZGssIFBheVBhbENvbW1lcmNlU2RrIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtY29tbWVyY2UtdXRpbHMnO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuaW1wb3J0IHsgaXNFeHBlcmltZW50RW5hYmxlZCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdXRpbGl0eSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgTm9uSW5zdGFudEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsT3JkZXJTdGF0dXMsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuY29uc3QgUE9MTElOR19JTlRFUlZBTCA9IDMwMDA7XG5jb25zdCBNQVhfUE9MTElOR19USU1FID0gMzAwMDAwO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgb3JkZXJJZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheXBhbEJ1dHRvbj86IFBheVBhbENvbW1lcmNlQnV0dG9ucztcbiAgICBwcml2YXRlIHBheXBhbEFwbXM/OiBQYXlQYWxBcG1TZGs7XG4gICAgcHJpdmF0ZSBwb2xsaW5nVGltZXIgPSAwO1xuICAgIHByaXZhdGUgc3RvcFBvbGxpbmcgPSBub29wO1xuICAgIHByaXZhdGUgaXNQb2xsaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgIHByaXZhdGUgcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHM/OiBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VTZGs6IFBheVBhbENvbW1lcmNlU2RrLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgICAgIHByaXZhdGUgcG9sbGluZ0ludGVydmFsOiBudW1iZXIgPSBQT0xMSU5HX0lOVEVSVkFMLFxuICAgICAgICBwcml2YXRlIG1heFBvbGxpbmdJbnRlcnZhbFRpbWU6IG51bWJlciA9IE1BWF9QT0xMSU5HX1RJTUUsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXlwYWxjb21tZXJjZSwgLy8gRklYTUU6IHRoaXMgb3B0aW9uIGlzIGRlcHJlY2F0ZWRcbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzLFxuICAgICAgICB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgcGF5cGFsT3B0aW9ucyA9IHBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzIHx8IHBheXBhbGNvbW1lcmNlO1xuXG4gICAgICAgIHRoaXMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMgPSBwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWdhdGV3YXlJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmdhdGV3YXlJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsT3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB7IG9yZGVySWQsIHNob3VsZFJlbmRlckZpZWxkcyB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IGZlYXR1cmVzID0gc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlcztcblxuICAgICAgICB0aGlzLmlzUG9sbGluZ0VuYWJsZWQgPSBpc0V4cGVyaW1lbnRFbmFibGVkKFxuICAgICAgICAgICAgZmVhdHVyZXMsXG4gICAgICAgICAgICAnUEFZUEFMLTUxOTIucGF5cGFsX2NvbW1lcmNlX2lkZWFsX3BvbGxpbmcnLFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEluZm86XG4gICAgICAgIC8vIFRoZSBQYXlQYWwgYnV0dG9uIGFuZCBmaWVsZHMgc2hvdWxkIG5vdCBiZSByZW5kZXJlZCB3aGVuIHNob3BwZXIgd2FzIHJlZGlyZWN0ZWQgdG8gQ2hlY2tvdXQgcGFnZVxuICAgICAgICAvLyBhZnRlciB1c2luZyBzbWFydCBwYXltZW50IGJ1dHRvbiBvbiBQRFAgb3IgQ2FydCBwYWdlLiBJbiB0aGlzIGNhc2UgYmFja2VuZCByZXR1cm5zIG9yZGVyIGlkIGlmXG4gICAgICAgIC8vIGl0IGlzIGF2YWlsYWJsZSBpbiBjaGVja291dCBzZXNzaW9uLiBUaGVyZWZvcmUsIGl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gcmVuZGVyIFBheVBhbCBidXR0b24uXG4gICAgICAgIGlmIChvcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklkO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBheXBhbEFwbXMgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlU2RrLmdldFBheVBhbEFwbXNTZGsoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IHBheXBhbE9wdGlvbnMuY29udGFpbmVyLnNwbGl0KCcjJylbMV07XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIGdhdGV3YXlJZCwgcGF5cGFsT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHNob3VsZFJlbmRlckZpZWxkcykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGaWVsZHMobWV0aG9kSWQsIHBheXBhbE9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGdhdGV3YXlJZCB9ID0gcGF5bWVudDtcblxuICAgICAgICBpZiAoIXRoaXMub3JkZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzUG9sbGluZ0VuYWJsZWQgJiYgbWV0aG9kSWQgPT09ICdpZGVhbCcpIHtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB2b2lkIHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20obWV0aG9kSWQsIHJlc29sdmUsIHJlamVjdCwgZ2F0ZXdheUlkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzTm9uSW5zdGFudFBheW1lbnRNZXRob2QobWV0aG9kSWQpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICB0aGlzLm9yZGVySWQsXG4gICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmICh0aGlzLmlzUG9sbGluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbj8uY2xvc2UoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQb2xsaW5nIG1lY2hhbmlzbVxuICAgICAqXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHJlc29sdmVQcm9taXNlOiAodmFsdWU/OiB1bmtub3duKSA9PiB2b2lkLFxuICAgICAgICByZWplY3RQcm9taXNlOiAodmFsdWU/OiB1bmtub3duKSA9PiB2b2lkLFxuICAgICAgICBnYXRld2F5SWQ/OiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KHJlc29sdmUsIHRoaXMucG9sbGluZ0ludGVydmFsKTtcblxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnBvbGxpbmdUaW1lciArPSB0aGlzLnBvbGxpbmdJbnRlcnZhbDtcblxuICAgICAgICAgICAgY29uc3Qgb3JkZXJTdGF0dXMgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldE9yZGVyU3RhdHVzKFxuICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzT3JkZXJBcHByb3ZlZCA9IG9yZGVyU3RhdHVzID09PSBQYXlQYWxPcmRlclN0YXR1cy5BcHByb3ZlZDtcbiAgICAgICAgICAgIGNvbnN0IGlzUG9sbGluZ0Vycm9yID0gb3JkZXJTdGF0dXMgPT09IFBheVBhbE9yZGVyU3RhdHVzLlBvbGxpbmdFcnJvcjtcblxuICAgICAgICAgICAgaWYgKGlzT3JkZXJBcHByb3ZlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc1BvbGxpbmdFcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3RQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaXNPcmRlckFwcHJvdmVkICYmIHRoaXMucG9sbGluZ1RpbWVyIDwgdGhpcy5tYXhQb2xsaW5nSW50ZXJ2YWxUaW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0UHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVpbml0aWFsaXplU3RyYXRlZ3koe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICBwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kczogdGhpcy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBUaW1lb3V0RXJyb3IoKSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZWplY3RQcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcbiAgICAgICAgdGhpcy5wb2xsaW5nVGltZXIgPSAwO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzZXRQb2xsaW5nTWVjaGFuaXNtKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJlaW5pdGlhbGl6ZVN0cmF0ZWd5KFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICkge1xuICAgICAgICBhd2FpdCB0aGlzLmRlaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bikge1xuICAgICAgICBjb25zdCB7IG9uRXJyb3IgfSA9IHRoaXMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMgfHwge307XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQb2xsaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXR0b24gbWV0aG9kcy9jYWxsYmFja3NcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGdhdGV3YXlJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxPcHRpb25zOiBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBwYXlwYWxBbXBzU2RrID0gdGhpcy5nZXRQYXlwYWxBbXBzU2RrT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4oXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgeyBidXR0b25TdHlsZSB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uRXJyb3IsIG9uUmVuZGVyQnV0dG9uLCBzdWJtaXRGb3JtIH0gPSBwYXlwYWxPcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbk9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBtZXRob2RJZCxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoYnV0dG9uU3R5bGUpLFxuICAgICAgICAgICAgb25Jbml0OiAoXywgYWN0aW9ucykgPT4gcGF5cGFsT3B0aW9ucy5vbkluaXRCdXR0b24oYWN0aW9ucyksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT4gdGhpcy5vbkNyZWF0ZU9yZGVyKG1ldGhvZElkLCBnYXRld2F5SWQsIHBheXBhbE9wdGlvbnMpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YSkgPT4gdGhpcy5oYW5kbGVBcHByb3ZlKGRhdGEsIHN1Ym1pdEZvcm0pLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmFpbHVyZShlcnJvciwgb25FcnJvcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25DbGljazogYXN5bmMgKF8sIGFjdGlvbnMpID0+XG4gICAgICAgICAgICAgICAgcGF5cGFsT3B0aW9ucy5vblZhbGlkYXRlKGFjdGlvbnMucmVzb2x2ZSwgYWN0aW9ucy5yZWplY3QpLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uID0gcGF5cGFsQW1wc1Nkay5CdXR0b25zKGJ1dHRvbk9wdGlvbnMpO1xuXG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob25SZW5kZXJCdXR0b24gJiYgdHlwZW9mIG9uUmVuZGVyQnV0dG9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvblJlbmRlckJ1dHRvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24ucmVuZGVyKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvbkNyZWF0ZU9yZGVyKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBnYXRld2F5SWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsT3B0aW9uczogUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCB7IG9uVmFsaWRhdGUgfSA9IHBheXBhbE9wdGlvbnM7XG5cbiAgICAgICAgY29uc3Qgb25WYWxpZGF0aW9uUGFzc2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRydWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYXdhaXQgb25WYWxpZGF0ZShvblZhbGlkYXRpb25QYXNzZWQsIG5vb3ApO1xuXG4gICAgICAgIGNvbnN0IG9yZGVySWQgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzY2hlY2tvdXQnLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICh0aGlzLmlzTm9uSW5zdGFudFBheW1lbnRNZXRob2QobWV0aG9kSWQpKSB7XG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IHsgdXNlU3RvcmVDcmVkaXQ6IGZhbHNlIH07XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG1ldGhvZElkLCBvcmRlcklkLCBnYXRld2F5SWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9yZGVySWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVBcHByb3ZlKFxuICAgICAgICB7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgc3VibWl0Rm9ybTogUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50T3B0aW9uc1snc3VibWl0Rm9ybSddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklEO1xuXG4gICAgICAgIHN1Ym1pdEZvcm0oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUZhaWx1cmUoXG4gICAgICAgIGVycm9yOiBFcnJvcixcbiAgICAgICAgb25FcnJvcjogUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50T3B0aW9uc1snb25FcnJvciddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRmllbGRzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJGaWVsZHMoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbE9wdGlvbnM6IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudE9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbEFtcHNTZGsgPSB0aGlzLmdldFBheXBhbEFtcHNTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwgfSA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHsgYXBtRmllbGRzQ29udGFpbmVyLCBhcG1GaWVsZHNTdHlsZXMgfSA9IHBheXBhbE9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFhcG1GaWVsZHNDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kc1wiIGFyZ3VtZW50IHNob3VsZCBjb250YWluIFwiYXBtRmllbGRzQ29udGFpbmVyXCIuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWVsZENvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFwbUZpZWxkc0NvbnRhaW5lcik7XG5cbiAgICAgICAgaWYgKGZpZWxkQ29udGFpbmVyRWxlbWVudCkge1xuICAgICAgICAgICAgZmllbGRDb250YWluZXJFbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmllbGRzT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IG1ldGhvZElkLFxuICAgICAgICAgICAgc3R5bGU6IGFwbUZpZWxkc1N0eWxlcyB8fCB7fSxcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGAke2ZpcnN0TmFtZX0gJHtsYXN0TmFtZX1gLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVtYWlsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFBheW1lbnRGaWVsZHMgPSBwYXlwYWxBbXBzU2RrLlBheW1lbnRGaWVsZHMoZmllbGRzT3B0aW9ucyk7XG5cbiAgICAgICAgcGF5cGFsUGF5bWVudEZpZWxkcy5yZW5kZXIoYXBtRmllbGRzQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgaXNOb25JbnN0YW50UGF5bWVudE1ldGhvZChtZXRob2RJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBtZXRob2RJZC50b1VwcGVyQ2FzZSgpIGluIE5vbkluc3RhbnRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5cGFsQW1wc1Nka09yVGhyb3coKSB7XG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxBcG1zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnBheXBhbEFwbXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBjcmVhdGVQYXlQYWxDb21tZXJjZVNkayB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLWNvbW1lcmNlLXV0aWxzJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQgeyBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMgfSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtY29uc3RhbnRzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VTZGsoKSxcbiAgICAgICAgbmV3IExvYWRpbmdJbmRpY2F0b3Ioe1xuICAgICAgICAgICAgY29udGFpbmVyU3R5bGVzOiBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMsXG4gICAgICAgIH0pLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgZ2F0ZXdheTogJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzJyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBIb3N0ZWRJbnN0cnVtZW50LCBOb25jZUluc3RydW1lbnQgfSBmcm9tICcuL3BheW1lbnQnO1xuXG50eXBlIFBheW1lbnRJbnN0cnVtZW50ID0gQ2FyZEluc3RydW1lbnQgfCBBY2NvdW50SW5zdHJ1bWVudCB8IEhvc3RlZEluc3RydW1lbnQgfCBOb25jZUluc3RydW1lbnQ7XG5cbmV4cG9ydCBkZWZhdWx0IFBheW1lbnRJbnN0cnVtZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VJbnN0cnVtZW50IHtcbiAgICBiaWdwYXlUb2tlbjogc3RyaW5nO1xuICAgIGRlZmF1bHRJbnN0cnVtZW50OiBib29sZWFuO1xuICAgIHByb3ZpZGVyOiBzdHJpbmc7XG4gICAgdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczogYm9vbGVhbjtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUge1xuICAgIENWViA9ICdjdnYnLFxuICAgIFBBTiA9ICdwYW4nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRJbnN0cnVtZW50IGV4dGVuZHMgQmFzZUluc3RydW1lbnQge1xuICAgIGJyYW5kOiBzdHJpbmc7XG4gICAgZXhwaXJ5TW9udGg6IHN0cmluZztcbiAgICBleHBpcnlZZWFyOiBzdHJpbmc7XG4gICAgaWluOiBzdHJpbmc7XG4gICAgbGFzdDQ6IHN0cmluZztcbiAgICB0eXBlOiAnY2FyZCc7XG4gICAgdW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uTW9kZTogVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZTtcbn1cblxuaW50ZXJmYWNlIEJhc2VBY2NvdW50SW5zdHJ1bWVudCBleHRlbmRzIEJhc2VJbnN0cnVtZW50IHtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiAnYWNjb3VudCcgfCAnYmFuayc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VBY2NvdW50SW5zdHJ1bWVudCB7XG4gICAgZXh0ZXJuYWxJZDogc3RyaW5nO1xuICAgIG1ldGhvZDogJ3BheXBhbCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWNoSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VBY2NvdW50SW5zdHJ1bWVudCB7XG4gICAgaXNzdWVyOiBzdHJpbmc7XG4gICAgYWNjb3VudE51bWJlcjogc3RyaW5nO1xuICAgIHR5cGU6ICdiYW5rJztcbiAgICBtZXRob2Q6ICdhY2gnIHwgJ2VjcCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFua0luc3RydW1lbnQgZXh0ZW5kcyBCYXNlQWNjb3VudEluc3RydW1lbnQge1xuICAgIGFjY291bnROdW1iZXI6IHN0cmluZztcbiAgICBpc3N1ZXI6IHN0cmluZztcbiAgICBpYmFuOiBzdHJpbmc7XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdHlwZTogJ2JhbmsnO1xufVxuXG5leHBvcnQgdHlwZSBBY2NvdW50SW5zdHJ1bWVudCA9IFBheVBhbEluc3RydW1lbnQgfCBCYW5rSW5zdHJ1bWVudCB8IEFjaEluc3RydW1lbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRBY2Nlc3NUb2tlbiB7XG4gICAgdmF1bHRBY2Nlc3NUb2tlbjogc3RyaW5nO1xuICAgIHZhdWx0QWNjZXNzRXhwaXJ5OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2Vzc2lvbkNvbnRleHQge1xuICAgIGN1c3RvbWVySWQ6IG51bWJlcjtcbiAgICBzdG9yZUlkOiBzdHJpbmc7XG4gICAgY3VycmVuY3lDb2RlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluc3RydW1lbnRSZXF1ZXN0Q29udGV4dCBleHRlbmRzIFNlc3Npb25Db250ZXh0IHtcbiAgICBhdXRoVG9rZW46IHN0cmluZztcbn1cbiIsImltcG9ydCB7IENhcmRJbnN0cnVtZW50LCBDdXN0b21lckFkZHJlc3MgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEZ1bmRpbmcgc291cmNlc1xuICpcbiAqL1xuZXhwb3J0IHR5cGUgRnVuZGluZ1R5cGUgPSBzdHJpbmdbXTtcbmV4cG9ydCB0eXBlIEVuYWJsZUZ1bmRpbmdUeXBlID0gRnVuZGluZ1R5cGUgfCBzdHJpbmc7XG5cbi8qKlxuICpcbiAqIFBheVBhbCBDb21tZXJjZSBJbml0aWFsaXphdGlvbiBEYXRhXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhIHtcbiAgICBhdHRyaWJ1dGlvbklkPzogc3RyaW5nO1xuICAgIGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM6IEZ1bmRpbmdUeXBlO1xuICAgIGJ1dHRvblN0eWxlPzogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zO1xuICAgIGJ1eWVyQ291bnRyeT86IHN0cmluZztcbiAgICBjbGllbnRJZDogc3RyaW5nO1xuICAgIGNsaWVudFRva2VuPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lU3R5bGVzPzogRmFzdGxhbmVTdHlsZXNTZXR0aW5ncztcbiAgICBjb25uZWN0Q2xpZW50VG9rZW4/OiBzdHJpbmc7IC8vIFRPRE86IHJlbW92ZSB3aGVuIFBQQ1AgRmFzdGxhbmUgQS9CIHRlc3Qgd2lsbCBiZSBmaW5pc2hlZFxuICAgIGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzOiBGdW5kaW5nVHlwZTtcbiAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlPzogYm9vbGVhbjtcbiAgICBpbnRlbnQ/OiBQYXlQYWxDb21tZXJjZUludGVudDtcbiAgICBpc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkPzogYm9vbGVhbjsgLy8gUGF5UGFsIEZhc3RsYW5lIHJlbGF0ZWRcbiAgICBpc0Zhc3RsYW5lU2hpcHBpbmdPcHRpb25BdXRvU2VsZWN0RW5hYmxlZD86IGJvb2xlYW47IC8vIFBheVBhbCBGYXN0bGFuZSByZWxhdGVkXG4gICAgaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkPzogYm9vbGVhbjtcbiAgICBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNQYXlQYWxDb21tZXJjZUFuYWx5dGljc1YyRW5hYmxlZD86IGJvb2xlYW47IC8vIFBheVBhbCBGYXN0bGFuZSByZWxhdGVkXG4gICAgaXNQYXlQYWxDcmVkaXRBdmFpbGFibGU/OiBib29sZWFuO1xuICAgIGlzVmVubW9FbmFibGVkPzogYm9vbGVhbjtcbiAgICBpc0dvb2dsZVBheUVuYWJsZWQ/OiBib29sZWFuO1xuICAgIG1lcmNoYW50SWQ/OiBzdHJpbmc7XG4gICAgb3JkZXJJZD86IHN0cmluZztcbiAgICBzaG91bGRSZW5kZXJGaWVsZHM/OiBib29sZWFuO1xuICAgIHNob3VsZFJ1bkFjY2VsZXJhdGVkQ2hlY2tvdXQ/OiBib29sZWFuOyAvLyBUT0RPOiByZW1vdmUgd2hlbiBQUENQIEZhc3RsYW5lIEEvQiB0ZXN0IHdpbGwgYmUgZmluaXNoZWRcbiAgICBwYXltZW50QnV0dG9uU3R5bGVzPzogUmVjb3JkPHN0cmluZywgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zPjtcbiAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbj86IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbVtdO1xuICAgIHRocmVlRFNWZXJpZmljYXRpb25NZXRob2Q/OiBzdHJpbmc7XG4gICAgaXNBcHBTd2l0Y2hFbmFibGVkPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsQ29tbWVyY2VIb3N0V2luZG93IGNvbnRhaW5zIGRpZmZlcmVudFxuICogUGF5UGFsIFNkayBpbnN0YW5jZXMgZm9yIGRpZmZlcmVudCBwdXJwb3Nlc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIHBheXBhbEZhc3RsYW5lPzogUGF5UGFsRmFzdGxhbmU7XG4gICAgcGF5cGFsRmFzdGxhbmVTZGs/OiBQYXlQYWxGYXN0bGFuZVNkaztcbiAgICBwYXlwYWxNZXNzYWdlcz86IFBheVBhbE1lc3NhZ2VzU2RrO1xuICAgIHBheXBhbEFwbXM/OiBQYXlQYWxBcG1TZGs7XG4gICAgcGF5cGFsR29vZ2xlUGF5PzogUGF5UGFsR29vZ2xlUGF5U2RrO1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgU0RLIGNvbmZpZ1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxTZGtDb25maWcge1xuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgJ2NsaWVudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdtZXJjaGFudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdidXllci1jb3VudHJ5Jz86IHN0cmluZztcbiAgICAgICAgJ2VuYWJsZS1mdW5kaW5nJz86IEVuYWJsZUZ1bmRpbmdUeXBlO1xuICAgICAgICAnZGlzYWJsZS1mdW5kaW5nJz86IEZ1bmRpbmdUeXBlO1xuICAgICAgICBjdXJyZW5jeT86IHN0cmluZztcbiAgICAgICAgY29tbWl0PzogYm9vbGVhbjtcbiAgICAgICAgaW50ZW50PzogUGF5UGFsQ29tbWVyY2VJbnRlbnQ7XG4gICAgICAgIGNvbXBvbmVudHM/OiBQYXlQYWxTZGtDb21wb25lbnRzO1xuICAgIH07XG4gICAgYXR0cmlidXRlczoge1xuICAgICAgICAnZGF0YS1jbGllbnQtbWV0YWRhdGEtaWQnPzogc3RyaW5nO1xuICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtc2RrLWNsaWVudC10b2tlbic/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLW5hbWVzcGFjZSc/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLWNsaWVudC10b2tlbic/OiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGVudW0gUGF5UGFsQ29tbWVyY2VJbnRlbnQge1xuICAgIEFVVEhPUklaRSA9ICdhdXRob3JpemUnLFxuICAgIENBUFRVUkUgPSAnY2FwdHVyZScsXG59XG5cbmV4cG9ydCB0eXBlIFBheVBhbFNka0NvbXBvbmVudHMgPSBBcnJheTxcbiAgICB8ICdmYXN0bGFuZSdcbiAgICB8ICdtZXNzYWdlcydcbiAgICB8ICdidXR0b25zJ1xuICAgIHwgJ3BheW1lbnQtZmllbGRzJ1xuICAgIHwgJ3RocmVlLWRvbWFpbi1zZWN1cmUnXG4gICAgfCAnaG9zdGVkLWZpZWxkcydcbiAgICB8ICdnb29nbGVwYXknXG4+O1xuXG4vKipcbiAqXG4gKiBQYXlQYWwgU2RrIGluc3RhbmNlc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVNkayB7XG4gICAgVGhyZWVEb21haW5TZWN1cmVDbGllbnQ6IHtcbiAgICAgICAgaXNFbGlnaWJsZShwYXJhbXM6IHRocmVlRFNlY3VyZVBhcmFtZXRlcnMpOiBQcm9taXNlPGJvb2xlYW4+O1xuICAgICAgICBzaG93KCk6IFByb21pc2U8VGhyZWVEb21haW5TZWN1cmVDbGllbnRTaG93UmVzcG9uc2U+O1xuICAgIH07XG4gICAgRmFzdGxhbmUob3B0aW9ucz86IFBheVBhbEZhc3RsYW5lT3B0aW9ucyk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmU+O1xufVxuXG5pbnRlcmZhY2UgVGhyZWVEb21haW5TZWN1cmVDbGllbnRTaG93UmVzcG9uc2Uge1xuICAgIGxpYWJpbGl0eVNoaWZ0OiBMaWFiaWxpdHlTaGlmdEVudW07XG4gICAgYXV0aGVudGljYXRpb25TdGF0ZTogVERTZWN1cmVBdXRoZW50aWNhdGlvblN0YXRlO1xuICAgIG5vbmNlOiBzdHJpbmc7IC8vIEVucmljaGVkIG5vbmNlIG9yIHRoZSBvcmlnaW5hbCBub25jZVxufVxuXG5leHBvcnQgZW51bSBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUge1xuICAgIFN1Y2NlZWRlZCA9ICdzdWNjZWVkZWQnLFxuICAgIENhbmNlbGxlZCA9ICdjYW5jZWxsZWQnLFxuICAgIEVycm9yZWQgPSAnZXJyb3JlZCcsXG59XG5cbmV4cG9ydCBlbnVtIExpYWJpbGl0eVNoaWZ0RW51bSB7XG4gICAgUG9zc2libGUgPSAnUE9TU0lCTEUnLFxuICAgIE5vID0gJ05PJyxcbiAgICBVbmtub3duID0gJ1VOS05PV04nLFxuICAgIFllcyA9ICdZRVMnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIHRocmVlRFNlY3VyZVBhcmFtZXRlcnMge1xuICAgIGFtb3VudDogc3RyaW5nO1xuICAgIGN1cnJlbmN5OiBzdHJpbmc7XG4gICAgbm9uY2U6IHN0cmluZztcbiAgICB0aHJlZURTUmVxdWVzdGVkOiBib29sZWFuO1xuICAgIHRyYW5zYWN0aW9uQ29udGV4dDoge1xuICAgICAgICBleHBlcmllbmNlX2NvbnRleHQ6IHtcbiAgICAgICAgICAgIGJyYW5kX25hbWU/OiBzdHJpbmc7XG4gICAgICAgICAgICBsb2NhbGU6IHN0cmluZztcbiAgICAgICAgICAgIHJldHVybl91cmw6IHN0cmluZztcbiAgICAgICAgICAgIGNhbmNlbF91cmw6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE1lc3NhZ2VzU2RrIHtcbiAgICBNZXNzYWdlcyhvcHRpb25zOiBNZXNzYWdpbmdPcHRpb25zKTogTWVzc2FnaW5nUmVuZGVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEFwbVNkayB7XG4gICAgQnV0dG9ucyhvcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zKTogUGF5UGFsQ29tbWVyY2VCdXR0b25zO1xuICAgIFBheW1lbnRGaWVsZHMob3B0aW9uczogUGF5UGFsQ29tbWVyY2VQYXltZW50RmllbGRzT3B0aW9ucyk6IFBheVBhbENvbW1lcmNlUGF5bWVudEZpZWxkcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxHb29nbGVQYXlTZGsge1xuICAgIEdvb2dsZXBheSgpOiBHb29nbGVQYXk7XG59XG5cbi8qKlxuICpcbiAqIEdvb2dsZSBQYXkgcmVsYXRlZCB0eXBlc1xuICpcbiAqL1xuXG5pbnRlcmZhY2UgR29vZ2xlUGF5IHtcbiAgICBjb25maWc6ICgpID0+IFByb21pc2U8R29vZ2xlUGF5Q29uZmlnPjtcbiAgICBjb25maXJtT3JkZXI6IChjb25maXJtT3JkZXJDb25maWc6IENvbmZpcm1PcmRlckNvbmZpZykgPT4gUHJvbWlzZTx7IHN0YXR1czogc3RyaW5nIH0+O1xuICAgIGluaXRpYXRlUGF5ZXJBY3Rpb246IChwYXllckFjdGlvbkNvbmZpZzogUGF5ZXJBY3Rpb25Db25maWcpID0+IFByb21pc2U8dm9pZD47XG59XG5cbmludGVyZmFjZSBDb25maXJtT3JkZXJDb25maWcge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbiAgICBwYXltZW50TWV0aG9kRGF0YTogQ29uZmlybU9yZGVyRGF0YTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb25maXJtT3JkZXJEYXRhIHtcbiAgICB0b2tlbml6YXRpb25EYXRhOiB7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgdG9rZW46IHN0cmluZztcbiAgICB9O1xuICAgIGluZm86IHtcbiAgICAgICAgY2FyZE5ldHdvcms6IHN0cmluZztcbiAgICAgICAgY2FyZERldGFpbHM6IHN0cmluZztcbiAgICB9O1xuICAgIHR5cGU6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFBheWVyQWN0aW9uQ29uZmlnIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR29vZ2xlUGF5Q29uZmlnIHtcbiAgICBhbGxvd2VkUGF5bWVudE1ldGhvZHM6IEFsbG93ZWRQYXltZW50TWV0aG9kc1tdO1xuICAgIGFwaVZlcnNpb246IG51bWJlcjtcbiAgICBhcGlWZXJzaW9uTWlub3I6IG51bWJlcjtcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIGlzRWxpZ2libGU6IGJvb2xlYW47XG4gICAgbWVyY2hhbnRJbmZvOiB7XG4gICAgICAgIG1lcmNoYW50SWQ6IHN0cmluZztcbiAgICAgICAgbWVyY2hhbnRPcmlnaW46IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFsbG93ZWRQYXltZW50TWV0aG9kcyB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgYWxsb3dlZEF1dGhNZXRob2RzOiBzdHJpbmdbXTtcbiAgICAgICAgYWxsb3dlZENhcmROZXR3b3Jrczogc3RyaW5nW107XG4gICAgICAgIGJpbGxpbmdBZGRyZXNzUmVxdWlyZWQ6IGJvb2xlYW47XG4gICAgICAgIGFzc3VyYW5jZURldGFpbHNSZXF1aXJlZDogYm9vbGVhbjtcbiAgICAgICAgYmlsbGluZ0FkZHJlc3NQYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHRva2VuaXphdGlvblNwZWNpZmljYXRpb246IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICBnYXRld2F5OiBzdHJpbmc7XG4gICAgICAgICAgICBnYXRld2F5TWVyY2hhbnRJZDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBDb21tZXJjZSBCdXR0b25zXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQnV0dG9ucyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xuICAgIGNsb3NlKCk6IHZvaWQ7XG4gICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMge1xuICAgIHN0eWxlPzogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbiAgICBjcmVhdGVPcmRlcigpOiBQcm9taXNlPHN0cmluZz47XG4gICAgb25BcHByb3ZlKFxuICAgICAgICBkYXRhOiBQYXlQYWxCdXR0b25BcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBhY3Rpb25zOiBQYXlQYWxCdXR0b25BcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgICk6IFByb21pc2U8Ym9vbGVhbiB8IHZvaWQ+IHwgdm9pZDtcbiAgICBvbkluaXQ/KFxuICAgICAgICBkYXRhOiBQYXlQYWxCdXR0b25Jbml0Q2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBhY3Rpb25zOiBQYXlQYWxCdXR0b25Jbml0Q2FsbGJhY2tBY3Rpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD47XG4gICAgb25DbGljaz8oXG4gICAgICAgIGRhdGE6IFBheVBhbEJ1dHRvbkNsaWNrQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBhY3Rpb25zOiBQYXlQYWxCdXR0b25DbGlja0NhbGxiYWNrQWN0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHwgdm9pZDtcbiAgICBvbkVycm9yPyhlcnJvcjogRXJyb3IpOiB2b2lkO1xuICAgIG9uQ2FuY2VsPygpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvbkNsaWNrQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uQ2xpY2tDYWxsYmFja0FjdGlvbnMge1xuICAgIHJlamVjdCgpOiB2b2lkO1xuICAgIHJlc29sdmUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25Jbml0Q2FsbGJhY2tQYXlsb2FkIHtcbiAgICBjb3JyZWxhdGlvbklEOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uSW5pdENhbGxiYWNrQWN0aW9ucyB7XG4gICAgZGlzYWJsZSgpOiB2b2lkO1xuICAgIGVuYWJsZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvbkFwcHJvdmVDYWxsYmFja1BheWxvYWQge1xuICAgIG9yZGVySUQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyB7XG4gICAgb3JkZXI6IHtcbiAgICAgICAgZ2V0OiAoKSA9PiBQcm9taXNlPFBheVBhbE9yZGVyRGV0YWlscz47XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlckRldGFpbHMge1xuICAgIHBheWVyOiB7XG4gICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgIGdpdmVuX25hbWU6IHN0cmluZztcbiAgICAgICAgICAgIHN1cm5hbWU6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgZW1haWxfYWRkcmVzczogc3RyaW5nO1xuICAgICAgICBhZGRyZXNzOiBQYXlQYWxPcmRlckFkZHJlc3M7XG4gICAgfTtcbiAgICBwdXJjaGFzZV91bml0czogQXJyYXk8e1xuICAgICAgICBzaGlwcGluZzoge1xuICAgICAgICAgICAgYWRkcmVzczogUGF5UGFsT3JkZXJBZGRyZXNzO1xuICAgICAgICB9O1xuICAgIH0+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyQWRkcmVzcyB7XG4gICAgYWRkcmVzc19saW5lXzE6IHN0cmluZztcbiAgICBhZG1pbl9hcmVhXzI6IHN0cmluZztcbiAgICBhZG1pbl9hcmVhXzE/OiBzdHJpbmc7XG4gICAgcG9zdGFsX2NvZGU6IHN0cmluZztcbiAgICBjb3VudHJ5X2NvZGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25MYWJlbCB7XG4gICAgcGF5cGFsID0gJ3BheXBhbCcsXG4gICAgY2hlY2tvdXQgPSAnY2hlY2tvdXQnLFxuICAgIGJ1eW5vdyA9ICdidXlub3cnLFxuICAgIHBheSA9ICdwYXknLFxuICAgIGluc3RhbGxtZW50ID0gJ2luc3RhbGxtZW50Jyxcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25Db2xvciB7XG4gICAgZ29sZCA9ICdnb2xkJyxcbiAgICBibHVlID0gJ2JsdWUnLFxuICAgIHNpbHZlciA9ICdzaWx2ZXInLFxuICAgIGJsYWNrID0gJ2JsYWNrJyxcbiAgICB3aGl0ZSA9ICd3aGl0ZScsXG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uU2hhcGUge1xuICAgIHBpbGwgPSAncGlsbCcsXG4gICAgcmVjdCA9ICdyZWN0Jyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMge1xuICAgIGNvbG9yPzogU3R5bGVCdXR0b25Db2xvcjtcbiAgICBzaGFwZT86IFN0eWxlQnV0dG9uU2hhcGU7XG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIGxhYmVsPzogU3R5bGVCdXR0b25MYWJlbDtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIFBheW1lbnQgZmllbGRzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlUGF5bWVudEZpZWxkcyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlUGF5bWVudEZpZWxkc09wdGlvbnMge1xuICAgIHN0eWxlPzogUGF5UGFsQ29tbWVyY2VGaWVsZHNTdHlsZU9wdGlvbnM7XG4gICAgZnVuZGluZ1NvdXJjZTogc3RyaW5nO1xuICAgIGZpZWxkczoge1xuICAgICAgICBuYW1lPzoge1xuICAgICAgICAgICAgdmFsdWU/OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgICAgIGVtYWlsPzoge1xuICAgICAgICAgICAgdmFsdWU/OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUZpZWxkc1N0eWxlT3B0aW9ucyB7XG4gICAgdmFyaWFibGVzPzoge1xuICAgICAgICBmb250RmFtaWx5Pzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZUJhc2U/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplU20/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVMZz86IHN0cmluZztcbiAgICAgICAgdGV4dENvbG9yPzogc3RyaW5nO1xuICAgICAgICBjb2xvclRleHRQbGFjZWhvbGRlcj86IHN0cmluZztcbiAgICAgICAgY29sb3JCYWNrZ3JvdW5kPzogc3RyaW5nO1xuICAgICAgICBjb2xvckluZm8/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yRGFuZ2VyPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJSYWRpdXM/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckNvbG9yPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJXaWR0aD86IHN0cmluZztcbiAgICAgICAgYm9yZGVyRm9jdXNDb2xvcj86IHN0cmluZztcbiAgICAgICAgc3BhY2luZ1VuaXQ/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBydWxlcz86IHtcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xuICAgIH07XG59XG5cbi8qKlxuICpcbiAqIFBheUxhdGVyIE1lc3NhZ2VzIHJlbGF0ZWQgdHlwZXNcbiAqIGRvYzogaHR0cHM6Ly9kZXZlbG9wZXIucGF5cGFsLmNvbS9kb2NzL2NoZWNrb3V0L3BheS1sYXRlci91cy9pbnRlZ3JhdGUvcmVmZXJlbmNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnaW5nUmVuZGVyIHtcbiAgICByZW5kZXIoY29udGFpbmVyOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VzU3R5bGVPcHRpb25zIHtcbiAgICBjb2xvcj86IHN0cmluZzsgLy8gJ2JsdWUnIHwgJ2JsYWNrJyB8ICd3aGl0ZScgfCAnd2hpdGUtbm8tYm9yZGVyJyB8ICdncmF5JyB8ICdtb25vY2hyb21lJyB8ICdncmF5c2NhbGUnXG4gICAgbGF5b3V0Pzogc3RyaW5nOyAvLyAndGV4dCcgfCAnZmxleCdcbiAgICBsb2dvPzoge1xuICAgICAgICB0eXBlPzogc3RyaW5nOyAvLyAncHJpbWFyeScgfCAnYWx0ZXJuYXRpdmUnIHwgJ2lubGluZScgfCAnbm9uZSdcbiAgICAgICAgcG9zaXRpb24/OiBzdHJpbmc7IC8vICdsZWZ0JyB8ICdyaWdodCcgfCAndG9wJ1xuICAgIH07XG4gICAgcmF0aW8/OiBzdHJpbmc7IC8vICcxeDEnIHwgJzF4NCcgfCAnOHgxJyB8ICcyMHgxJ1xuICAgIHRleHQ/OiB7XG4gICAgICAgIGFsaWduPzogc3RyaW5nOyAvLyAnbGVmdCcgfCAncmlnaHQnIHwgJ2NlbnRlcidcbiAgICAgICAgY29sb3I/OiBzdHJpbmc7IC8vICdibGFjaycgfCAnd2hpdGUnIHwgJ21vbm9jaHJvbWUnIHwgJ2dyYXlzY2FsZSdcbiAgICAgICAgc2l6ZT86IG51bWJlcjsgLy8gZnJvbSAxMCB0byAxNlxuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnaW5nT3B0aW9ucyB7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgcGxhY2VtZW50OiBzdHJpbmc7XG4gICAgc3R5bGU/OiBNZXNzYWdlc1N0eWxlT3B0aW9ucztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHN0YXR1czogYm9vbGVhbjtcbiAgICBzdHlsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBGYXN0bGFuZSByZWxhdGVkIHR5cGVzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lIHtcbiAgICBpZGVudGl0eTogUGF5UGFsRmFzdGxhbmVJZGVudGl0eTtcbiAgICBldmVudHM6IFBheVBhbEZhc3RsYW5lRXZlbnRzO1xuICAgIHByb2ZpbGU6IFBheVBhbEZhc3RsYW5lUHJvZmlsZTtcbiAgICBGYXN0bGFuZUNhcmRDb21wb25lbnQoXG4gICAgICAgIG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZU9wdGlvbnMge1xuICAgIHN0eWxlcz86IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lSWRlbnRpdHkge1xuICAgIGxvb2t1cEN1c3RvbWVyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUxvb2t1cEN1c3RvbWVyQnlFbWFpbFJlc3VsdD47XG4gICAgdHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdyhcbiAgICAgICAgY3VzdG9tZXJDb250ZXh0SWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lTG9va3VwQ3VzdG9tZXJCeUVtYWlsUmVzdWx0IHtcbiAgICBjdXN0b21lckNvbnRleHRJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0IHtcbiAgICBhdXRoZW50aWNhdGlvblN0YXRlPzogUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlO1xuICAgIHByb2ZpbGVEYXRhPzogUGF5UGFsRmFzdGxhbmVQcm9maWxlRGF0YTtcbn1cblxuZXhwb3J0IGVudW0gUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlIHtcbiAgICBTVUNDRUVERUQgPSAnc3VjY2VlZGVkJyxcbiAgICBGQUlMRUQgPSAnZmFpbGVkJyxcbiAgICBDQU5DRUxFRCA9ICdjYW5jZWxlZCcsXG4gICAgVU5SRUNPR05JWkVEID0gJ3VucmVjb2duaXplZCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlRGF0YSB7XG4gICAgbmFtZTogUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZTtcbiAgICBzaGlwcGluZ0FkZHJlc3M6IFBheVBhbEZhc3RsYW5lU2hpcHBpbmdBZGRyZXNzO1xuICAgIGNhcmQ6IFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZSB7XG4gICAgZnVsbE5hbWU6IHN0cmluZztcbiAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgbGFzdE5hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmUge1xuICAgIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgbmF0aW9uYWxOdW1iZXI6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzcyB7XG4gICAgbmFtZTogUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZTtcbiAgICBwaG9uZU51bWJlcjogUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmU7XG4gICAgYWRkcmVzczogUGF5UGFsRmFzdGxhbmVBZGRyZXNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQge1xuICAgIGlkOiBzdHJpbmc7IC8vIG5vbmNlIC8gdG9rZW5cbiAgICBwYXltZW50U291cmNlOiBQYXlQYWxGYXN0bGFuZVBheW1lbnRTb3VyY2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQYXltZW50U291cmNlIHtcbiAgICBjYXJkOiBQYXlQYWxGYXN0bGFuZUNhcmRTb3VyY2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkU291cmNlIHtcbiAgICBicmFuZDogc3RyaW5nO1xuICAgIGV4cGlyeTogc3RyaW5nOyAvLyBcIllZWVktTU1cIlxuICAgIGxhc3REaWdpdHM6IHN0cmluZzsgLy8gXCIxMTExXCJcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYmlsbGluZ0FkZHJlc3M6IFBheVBhbEZhc3RsYW5lQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUFkZHJlc3Mge1xuICAgIGNvbXBhbnk/OiBzdHJpbmc7XG4gICAgYWRkcmVzc0xpbmUxOiBzdHJpbmc7XG4gICAgYWRkcmVzc0xpbmUyPzogc3RyaW5nO1xuICAgIGFkbWluQXJlYTE6IHN0cmluZzsgLy8gU3RhdGVcbiAgICBhZG1pbkFyZWEyOiBzdHJpbmc7IC8vIENpdHlcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeUNvZGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YU1hcHBpbmdSZXN1bHQge1xuICAgIGF1dGhlbnRpY2F0aW9uU3RhdGU6IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZTtcbiAgICBhZGRyZXNzZXM6IEN1c3RvbWVyQWRkcmVzc1tdO1xuICAgIGJpbGxpbmdBZGRyZXNzPzogQ3VzdG9tZXJBZGRyZXNzO1xuICAgIHNoaXBwaW5nQWRkcmVzcz86IEN1c3RvbWVyQWRkcmVzcztcbiAgICBpbnN0cnVtZW50czogQ2FyZEluc3RydW1lbnRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiB7XG4gICAgcm9vdD86IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yUHJpbWFyeT86IHN0cmluZztcbiAgICAgICAgZXJyb3JDb2xvcj86IHN0cmluZztcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBwYWRkaW5nPzogc3RyaW5nO1xuICAgICAgICBwcmltYXJ5Q29sb3I/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBpbnB1dD86IHtcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgZm9jdXNCb3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJXaWR0aD86IHN0cmluZztcbiAgICAgICAgdGV4dENvbG9yQmFzZT86IHN0cmluZztcbiAgICB9O1xuICAgIHRvZ2dsZT86IHtcbiAgICAgICAgY29sb3JQcmltYXJ5Pzogc3RyaW5nO1xuICAgICAgICBjb2xvclNlY29uZGFyeT86IHN0cmluZztcbiAgICB9O1xuICAgIHRleHQ/OiB7XG4gICAgICAgIGJvZHk/OiB7XG4gICAgICAgICAgICBjb2xvcj86IHN0cmluZztcbiAgICAgICAgICAgIGZvbnRTaXplPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBjYXB0aW9uPzoge1xuICAgICAgICAgICAgY29sb3I/OiBzdHJpbmc7XG4gICAgICAgICAgICBmb250U2l6ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGJyYW5kaW5nPzogc3RyaW5nOyAvLyAnbGlnaHQnIHwgJ2RhcmsnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlIHtcbiAgICBzaG93Q2FyZFNlbGVjdG9yKCk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVDYXJkU2VsZWN0b3JSZXNwb25zZT47XG4gICAgc2hvd1NoaXBwaW5nQWRkcmVzc1NlbGVjdG9yKCk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3NTZWxlY3RvclJlc3BvbnNlPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzc1NlbGVjdG9yUmVzcG9uc2Uge1xuICAgIHNlbGVjdGlvbkNoYW5nZWQ6IGJvb2xlYW47XG4gICAgc2VsZWN0ZWRBZGRyZXNzOiBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUNhcmRTZWxlY3RvclJlc3BvbnNlIHtcbiAgICBzZWxlY3Rpb25DaGFuZ2VkOiBib29sZWFuO1xuICAgIHNlbGVjdGVkQ2FyZDogUGF5UGFsRmFzdGxhbmVQcm9maWxlQ2FyZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzIHtcbiAgICBnZXRQYXltZW50VG9rZW4oXG4gICAgICAgIG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lR2V0UGF5bWVudFRva2VuT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQ+O1xuICAgIHJlbmRlcihlbGVtZW50OiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lR2V0UGF5bWVudFRva2VuT3B0aW9ucyB7XG4gICAgbmFtZT86IFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWU7XG4gICAgYmlsbGluZ0FkZHJlc3M/OiBQYXlQYWxGYXN0bGFuZUFkZHJlc3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyB7XG4gICAgZmllbGRzPzogUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50RmllbGRzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudEZpZWxkcyB7XG4gICAgY2FyZGhvbGRlck5hbWU/OiB7XG4gICAgICAgIGVuYWJsZWQ/OiBib29sZWFuO1xuICAgICAgICBwcmVmaWxsPzogc3RyaW5nO1xuICAgIH07XG4gICAgcGhvbmVOdW1iZXI/OiB7XG4gICAgICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAgICAgICBwcmVmaWxsPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVFdmVudHMge1xuICAgIGFwbVNlbGVjdGVkOiAob3B0aW9uczogUGF5UGFsRmFzdGxhbmVBcG1TZWxlY3RlZEV2ZW50T3B0aW9ucykgPT4gdm9pZDtcbiAgICBlbWFpbFN1Ym1pdHRlZDogKG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lRW1haWxFbnRlcmVkRXZlbnRPcHRpb25zKSA9PiB2b2lkO1xuICAgIG9yZGVyUGxhY2VkOiAob3B0aW9uczogUGF5UGFsRmFzdGxhbmVPcmRlclBsYWNlZEV2ZW50T3B0aW9ucykgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUV2ZW50Q29tbW9uT3B0aW9ucyB7XG4gICAgY29udGV4dF90eXBlOiAnY3NfaWQnO1xuICAgIGNvbnRleHRfaWQ6IHN0cmluZzsgLy8gY2hlY2tvdXQgc2Vzc2lvbiBpZFxuICAgIHBhZ2VfdHlwZTogJ2NoZWNrb3V0X3BhZ2UnO1xuICAgIHBhZ2VfbmFtZTogc3RyaW5nOyAvLyB0aXRsZSBvZiB0aGUgY2hlY2tvdXQgaW5pdGlhdGlvbiBwYWdlXG4gICAgcGFydG5lcl9uYW1lOiAnYmlnYyc7XG4gICAgdXNlcl90eXBlOiAnc3RvcmVfbWVtYmVyJyB8ICdzdG9yZV9ndWVzdCc7IC8vIHR5cGUgb2YgdGhlIHVzZXIgb24gdGhlIG1lcmNoYW50IHNpdGVcbiAgICBzdG9yZV9pZDogc3RyaW5nO1xuICAgIG1lcmNoYW50X25hbWU6IHN0cmluZztcbiAgICBleHBlcmltZW50OiBzdHJpbmc7IC8vIHN0cmluZ2lmeSBKU09OIG9iamVjdCBcIlt7IHRyZWF0bWVudF9ncm91cDogJ3Rlc3QnIHwgJ2NvbnRyb2wnIH1dXCJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUFwbVNlbGVjdGVkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIGFwbV9zaG93bjogJzAnIHwgJzEnOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBzaG93biBvbiB0aGUgY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9saXN0OiBzdHJpbmc7IC8vIGxpc3Qgb2YgYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9zZWxlY3RlZDogc3RyaW5nOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBtZXRob2Qgc2VsZWN0ZWQgLyBtZXRob2RJZFxuICAgIGFwbV9sb2NhdGlvbjogJ3ByZS1lbWFpbCBzZWN0aW9uJyB8ICdwYXltZW50IHNlY3Rpb24nOyAvLyBwbGFjZW1lbnQgb2YgQVBNLCB3aGV0aGVyIGl0IGJlIGFib3ZlIHRoZSBlbWFpbCBlbnRyeSBvciBpbiB0aGUgcmFkaW8gYnV0dG9uc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lRW1haWxFbnRlcmVkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIHVzZXJfZW1haWxfc2F2ZWQ6IGJvb2xlYW47IC8vIHNob3dzIHdoZXRoZXIgY2hlY2tvdXQgd2FzIGxvYWRlZCB3aXRoIG9yIHdpdGhvdXQgYSBzYXZlZCBlbWFpbFxuICAgIGFwbV9zaG93bjogJzAnIHwgJzEnOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBzaG93biBvbiB0aGUgY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9saXN0OiBzdHJpbmc7IC8vIGxpc3Qgb2YgYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gY2hlY2tvdXQgcGFnZSAnYXBwbGVwYXksZ29vZ2xlcGF5LHBheXBhbCdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZU9yZGVyUGxhY2VkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIHNlbGVjdGVkX3BheW1lbnRfbWV0aG9kOiBzdHJpbmc7XG4gICAgY3VycmVuY3lfY29kZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUGF5bWVudEZvcm1hdHRlZFBheWxvYWQge1xuICAgIHBheXBhbF9jb25uZWN0X3Rva2VuPzoge1xuICAgICAgICBvcmRlcl9pZD86IHN0cmluZztcbiAgICAgICAgdG9rZW46IHN0cmluZztcbiAgICB9O1xuICAgIHBheXBhbF9mYXN0bGFuZV90b2tlbj86IHtcbiAgICAgICAgb3JkZXJfaWQ/OiBzdHJpbmc7XG4gICAgICAgIHRva2VuOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGYXN0bGFuZVN0eWxlc1NldHRpbmdzIHtcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0Vycm9yQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NGb250RmFtaWx5Pzogc3RyaW5nO1xuICAgIGZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZz86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc1ByaW1hcnlDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRTaXplPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lSW5wdXRTZXR0aW5nc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJSYWRpdXM/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzVGV4dENvbG9yQmFzZT86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NGb2N1c0JvcmRlckJhc2U/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yUHJpbWFyeT86IHN0cmluZztcbiAgICBmYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JTZWNvbmRhcnk/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzRm9udFNpemU/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzRm9udFNpemU/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVCcmFuZGluZ1NldHRpbmdzPzogc3RyaW5nO1xufVxuIiwiaW50ZXJmYWNlIENvb2tpZU9wdGlvbnMge1xuICAgIGV4cGlyZXM/OiBEYXRlO1xuICAgIHBhdGg/OiBzdHJpbmc7XG4gICAgZG9tYWluPzogc3RyaW5nO1xuICAgIHNlY3VyZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvb2tpZVN0b3JhZ2Uge1xuICAgIHN0YXRpYyBnZXQobmFtZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGNvb2tpZUtleSA9IGAke2VuY29kZVVSSUNvbXBvbmVudChgJHtuYW1lfWApfT1gO1xuICAgICAgICBjb25zdCBjb29raWUgPSBkb2N1bWVudC5jb29raWU7XG5cbiAgICAgICAgbGV0IHZhbHVlID0gbnVsbDtcblxuICAgICAgICBjb25zdCBmaXJzdEluZGV4ID0gY29va2llLmluZGV4T2YoY29va2llS2V5KTtcblxuICAgICAgICBpZiAoZmlyc3RJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICBsZXQgbGFzdEluZGV4ID0gY29va2llLmluZGV4T2YoJzsnLCBmaXJzdEluZGV4KTtcblxuICAgICAgICAgICAgaWYgKGxhc3RJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSBjb29raWUubGVuZ3RoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YWx1ZSA9IGRlY29kZVVSSUNvbXBvbmVudChjb29raWUuc3Vic3RyaW5nKGZpcnN0SW5kZXggKyBjb29raWVLZXkubGVuZ3RoLCBsYXN0SW5kZXgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgc2V0KG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgb3B0aW9uczogQ29va2llT3B0aW9ucyA9IHsgc2VjdXJlOiB0cnVlIH0pIHtcbiAgICAgICAgbGV0IGNvb2tpZVRleHQgPSBgJHtlbmNvZGVVUklDb21wb25lbnQobmFtZSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gO1xuXG4gICAgICAgIGNvbnN0IHsgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKGV4cGlyZXMpIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgZXhwaXJlcz0ke2V4cGlyZXMudG9VVENTdHJpbmcoKX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIC8vIGluZm86IGRlZmF1bHQgY29va2llIGV4cGlyYXRpb24gdGltZSBhZnRlciBzZXR1cFxuICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IDYwO1xuXG4gICAgICAgICAgICBub3cuc2V0VGltZShub3cuZ2V0VGltZSgpICsgbWludXRlcyAqIDYwICogMTAwMCk7XG5cbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgZXhwaXJlcz0ke25vdy50b1VUQ1N0cmluZygpfWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgY29va2llVGV4dCArPSBgOyBwYXRoPSR7cGF0aH1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRvbWFpbikge1xuICAgICAgICAgICAgY29va2llVGV4dCArPSBgOyBkb21haW49JHtkb21haW59YDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWN1cmUpIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gJzsgc2VjdXJlJztcbiAgICAgICAgfVxuXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZVRleHQ7XG4gICAgfVxuXG4gICAgc3RhdGljIHJlbW92ZShuYW1lOiBzdHJpbmcsIG9wdGlvbnM/OiBDb29raWVPcHRpb25zKSB7XG4gICAgICAgIENvb2tpZVN0b3JhZ2Uuc2V0KG5hbWUsICcnLCB7IGV4cGlyZXM6IG5ldyBEYXRlKDApLCAuLi5vcHRpb25zIH0pO1xuICAgIH1cbn1cbiIsIi8vIGNvcGllZCBmcm9tIHBhY2thZ2VzL2NvcmUvc3JjL2hvc3RlZC1mb3JtL2hvc3RlZC1maWVsZC10eXBlLnRzXG5cbmVudW0gSG9zdGVkRmllbGRUeXBlIHtcbiAgICBDYXJkQ29kZSA9ICdjYXJkQ29kZScsXG4gICAgQ2FyZENvZGVWZXJpZmljYXRpb24gPSAnY2FyZENvZGVWZXJpZmljYXRpb24nLFxuICAgIENhcmRFeHBpcnkgPSAnY2FyZEV4cGlyeScsXG4gICAgQ2FyZE5hbWUgPSAnY2FyZE5hbWUnLFxuICAgIENhcmROdW1iZXIgPSAnY2FyZE51bWJlcicsXG4gICAgQ2FyZE51bWJlclZlcmlmaWNhdGlvbiA9ICdjYXJkTnVtYmVyVmVyaWZpY2F0aW9uJyxcbiAgICBDYXJkRXhwaXJ5VmVyaWZpY2F0aW9uID0gJ2NhcmRFeHBpcnlWZXJpZmljYXRpb24nLFxufVxuXG5leHBvcnQgZGVmYXVsdCBIb3N0ZWRGaWVsZFR5cGU7XG4iLCJpbXBvcnQgeyBpc0VxdWFsLCBvbWl0IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBBZGRyZXNzLFxuICAgIENhcmRJbnN0cnVtZW50LFxuICAgIEN1c3RvbWVyQWRkcmVzcyxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbiAgICBVbnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25UeXBlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IENvb2tpZVN0b3JhZ2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3N0b3JhZ2UnO1xuXG5pbXBvcnQge1xuICAgIFBheVBhbENvbW1lcmNlSG9zdFdpbmRvdyxcbiAgICBQYXlQYWxGYXN0bGFuZSxcbiAgICBQYXlQYWxGYXN0bGFuZUFkZHJlc3MsXG4gICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgUGF5UGFsRmFzdGxhbmVMb29rdXBDdXN0b21lckJ5RW1haWxSZXN1bHQsXG4gICAgUGF5UGFsRmFzdGxhbmVQcm9maWxlQ2FyZCxcbiAgICBQYXlQYWxGYXN0bGFuZVByb2ZpbGVOYW1lLFxuICAgIFBheVBhbEZhc3RsYW5lUHJvZmlsZVBob25lLFxuICAgIFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGFNYXBwaW5nUmVzdWx0LFxuICAgIFBheVBhbEZhc3RsYW5lU2RrLFxuICAgIFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlRmFzdGxhbmVVdGlscyB7XG4gICAgcHJpdmF0ZSB3aW5kb3c6IFBheVBhbENvbW1lcmNlSG9zdFdpbmRvdztcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICB9XG5cbiAgICBhc3luYyBpbml0aWFsaXplUGF5UGFsRmFzdGxhbmUoXG4gICAgICAgIHBheXBhbEZhc3RsYW5lU2RrOiBQYXlQYWxGYXN0bGFuZVNkayxcbiAgICAgICAgaXNUZXN0TW9kZUVuYWJsZWQ6IGJvb2xlYW4sXG4gICAgICAgIHN0eWxlcz86IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxuICAgICk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmU+IHtcbiAgICAgICAgaWYgKGlzVGVzdE1vZGVFbmFibGVkKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Zhc3RsYW5lRW52JywgJ3NhbmRib3gnKTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXhvRW52JywgJ3NhbmRib3gnKTsgLy8gVE9ETzogcmVtb3ZlIGlmIHRoaXMga2V5IGRvZXMgbm90IHVzZSBvbiBQYXlQYWwgc2lkZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZSkge1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFN0eWxlcyA9IHtcbiAgICAgICAgICAgICAgICByb290OiB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvclByaW1hcnk6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lID0gYXdhaXQgcGF5cGFsRmFzdGxhbmVTZGsuRmFzdGxhbmUoe1xuICAgICAgICAgICAgICAgIHN0eWxlczogc3R5bGVzIHx8IGRlZmF1bHRTdHlsZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZTtcbiAgICB9XG5cbiAgICBnZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTogUGF5UGFsRmFzdGxhbmUge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIERldGVjdHMgdGhlIGN1c3RvbWVyIHRvIFBheVBhbCBGYXN0bGFuZSByZWxhdGlvbiBhbmRcbiAgICAgKiByZXR1cm5zIGN1c3RvbWVyQ29udGV4dElkIHRvIHVzZSBpdCBmb3IgYXV0aGVudGljYXRpb25cbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGxvb2t1cEN1c3RvbWVyT3JUaHJvdyhlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUxvb2t1cEN1c3RvbWVyQnlFbWFpbFJlc3VsdD4ge1xuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZSA9IHRoaXMuZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCk7XG5cbiAgICAgICAgcmV0dXJuIHBheXBhbEZhc3RsYW5lLmlkZW50aXR5Lmxvb2t1cEN1c3RvbWVyQnlFbWFpbChlbWFpbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBUcmlnZ2VycyBhdXRoZW50aWNhdGlvbiBmbG93IChzaG93cyBPVFAgcG9wdXApIGlmIHRoZSBjdXN0b21lciByZWNvZ25pc2VkIGFzIFBheVBhbCBGYXN0bGFuZSB1c2VyXG4gICAgICogYW5kIHJldHVybnMgUGF5UGFsIEZhc3RsYW5lIFByb2ZpbGUgZGF0YSB0byB1c2UgaXQgaW4gQkMgY2hlY2tvdXRcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIHRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KFxuICAgICAgICBjdXN0b21lckNvbnRleHRJZD86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgaWYgKCFjdXN0b21lckNvbnRleHRJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmUgPSB0aGlzLmdldFBheVBhbEZhc3RsYW5lT3JUaHJvdygpO1xuXG4gICAgICAgIHJldHVybiBwYXlwYWxGYXN0bGFuZS5pZGVudGl0eS50cmlnZ2VyQXV0aGVudGljYXRpb25GbG93KGN1c3RvbWVyQ29udGV4dElkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqICd1cGRhdGVTdG9yYWdlU2Vzc2lvbklkJyBtZXRob2QgaXMgdXNlZCB0bzpcbiAgICAgKiAtIHNldCBzZXNzaW9uIGlkIGFmdGVyIHVzZXIgd2FzIGF1dGhlbnRpY2F0ZWQgKG9yIHVucmVjb2duaXNlZCkgdG8gdHJpZ2dlciBhdXRoZW50aWNhdGlvbiBhZnRlciBwYWdlIHJlZnJlc2hcbiAgICAgKlxuICAgICAqIEZsb3cgaW5mbzpcbiAgICAgKiBJZiB1c2VyIHVucmVjb2duaXNlZCB0aGVuIHRoZSBsb29rdXAgbWV0aG9kIHdpbGwgYmUgd29ya2luZyBidXQgdGhlIE9UUCB3aWxsIG5vdCBiZSBzaG93blxuICAgICAqIElmIHVzZXIgcmVjb2duaXNlZCBhbmQgbm90IGNhbmNlbGVkIHRoZW4gdGhlIGxvb2t1cCBtZXRob2Qgd2lsbCBiZSB3b3JraW5nIGFuZCB0aGUgT1RQIHdpbGwgYmUgc2hvd24gb25seSBpZiBuZWVkZWRcbiAgICAgKiBJZiB1c2VyIGNhbmNlbHMgdGhlIE9QVCB0aGVuIE9UUCB3aWxsIG5vdCBiZSB0cmlnZ2VyZWQgYWZ0ZXIgcGFnZSByZWZyZXNoXG4gICAgICpcbiAgICAgKi9cbiAgICB1cGRhdGVTdG9yYWdlU2Vzc2lvbklkKHNlc3Npb25JZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGV4cGlyZXMgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBleHBpcmVzLnNldERhdGUoZXhwaXJlcy5nZXREYXRlKCkgKyAxNCk7IC8vIDIgd2Vla3MgZXhwaXJ5XG5cbiAgICAgICAgY29uc3QgY29va2llc09wdGlvbiA9IHtcbiAgICAgICAgICAgIGV4cGlyZXMsXG4gICAgICAgICAgICBzZWN1cmU6IHRydWUsXG4gICAgICAgIH07XG5cbiAgICAgICAgQ29va2llU3RvcmFnZS5zZXQoJ2JjLWZhc3RsYW5lLXNlc3Npb25JZCcsIHNlc3Npb25JZCwgY29va2llc09wdGlvbik7XG4gICAgfVxuXG4gICAgcmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpOiB2b2lkIHtcbiAgICAgICAgQ29va2llU3RvcmFnZS5yZW1vdmUoJ2JjLWZhc3RsYW5lLXNlc3Npb25JZCcpO1xuICAgIH1cblxuICAgIGdldFN0b3JhZ2VTZXNzaW9uSWQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIENvb2tpZVN0b3JhZ2UuZ2V0KCdiYy1mYXN0bGFuZS1zZXNzaW9uSWQnKSB8fCAnJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqICdtYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhJyBtZXRob2QgaXMgcmVzcG9uc2libGUgZm9yOlxuICAgICAqIC0gbWFwcGluZyBQYXlQYWwgRmFzdGxhbmUgUHJvZmlsZSBkYXRhIHRvIEJDIGRhdGEgc2hhcGVcbiAgICAgKiAtIHJldHVybmluZyBtYXBwZWQgZGF0YSB0byB1c2UgZm9yIHVwZGF0aW5nIFBheW1lbnRQcm92aWRlckN1c3RvbWVyIHN0YXRlIGFuZFxuICAgICAqIHVwZGF0ZSBzaGlwcGluZyBhbmQgYmlsbGluZyBhZGRyZXNzZXNcbiAgICAgKlxuICAgICAqL1xuICAgIG1hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0OiBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0LFxuICAgICk6IFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGFNYXBwaW5nUmVzdWx0IHtcbiAgICAgICAgY29uc3QgeyBhdXRoZW50aWNhdGlvblN0YXRlLCBwcm9maWxlRGF0YSB9ID0gYXV0aGVudGljYXRpb25SZXN1bHQ7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQmlsbGluZ0FkZHJlc3MgPSBwcm9maWxlRGF0YT8uY2FyZD8ucGF5bWVudFNvdXJjZT8uY2FyZD8uYmlsbGluZ0FkZHJlc3M7XG4gICAgICAgIGNvbnN0IHBheXBhbFNoaXBwaW5nQWRkcmVzcyA9IHByb2ZpbGVEYXRhPy5zaGlwcGluZ0FkZHJlc3M7XG4gICAgICAgIGNvbnN0IHBheXBhbFByb2ZpbGVOYW1lID0gcHJvZmlsZURhdGE/Lm5hbWU7XG4gICAgICAgIGNvbnN0IHBheXBhbEluc3RydW1lbnQgPSBwcm9maWxlRGF0YT8uY2FyZDtcblxuICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPSBwYXlwYWxTaGlwcGluZ0FkZHJlc3NcbiAgICAgICAgICAgID8gdGhpcy5tYXBQYXlQYWxUb0JjQWRkcmVzcyhcbiAgICAgICAgICAgICAgICAgIHBheXBhbFNoaXBwaW5nQWRkcmVzcy5hZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgcGF5cGFsU2hpcHBpbmdBZGRyZXNzLm5hbWUsXG4gICAgICAgICAgICAgICAgICBwYXlwYWxTaGlwcGluZ0FkZHJlc3MucGhvbmVOdW1iZXIsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICBwYXlwYWxCaWxsaW5nQWRkcmVzcyAmJiBwYXlwYWxQcm9maWxlTmFtZVxuICAgICAgICAgICAgICAgID8gdGhpcy5tYXBQYXlQYWxUb0JjQWRkcmVzcyhcbiAgICAgICAgICAgICAgICAgICAgICBwYXlwYWxCaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICBwYXlwYWxQcm9maWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBwYXlwYWxTaGlwcGluZ0FkZHJlc3M/LnBob25lTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBpbnN0cnVtZW50cyA9IHBheXBhbEluc3RydW1lbnRcbiAgICAgICAgICAgID8gdGhpcy5tYXBQYXlQYWxUb0JjSW5zdHJ1bWVudChtZXRob2RJZCwgcGF5cGFsSW5zdHJ1bWVudClcbiAgICAgICAgICAgIDogW107XG5cbiAgICAgICAgY29uc3QgYWRkcmVzc2VzID0gdGhpcy5maWx0ZXJBZGRyZXNzZXMoW3NoaXBwaW5nQWRkcmVzcywgYmlsbGluZ0FkZHJlc3NdKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXV0aGVudGljYXRpb25TdGF0ZTpcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlIHx8IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZS5VTlJFQ09HTklaRUQsXG4gICAgICAgICAgICBhZGRyZXNzZXMsXG4gICAgICAgICAgICBiaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzcyxcbiAgICAgICAgICAgIGluc3RydW1lbnRzLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIG1hcFBheVBhbFRvQmNJbnN0cnVtZW50KFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBpbnN0cnVtZW50OiBQYXlQYWxGYXN0bGFuZVByb2ZpbGVDYXJkLFxuICAgICk6IENhcmRJbnN0cnVtZW50W10ge1xuICAgICAgICBjb25zdCB7IGlkLCBwYXltZW50U291cmNlIH0gPSBpbnN0cnVtZW50O1xuICAgICAgICBjb25zdCB7IGJyYW5kLCBleHBpcnksIGxhc3REaWdpdHMgfSA9IHBheW1lbnRTb3VyY2UuY2FyZDtcblxuICAgICAgICBjb25zdCBbZXhwaXJ5WWVhciwgZXhwaXJ5TW9udGhdID0gZXhwaXJ5LnNwbGl0KCctJyk7XG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBiaWdwYXlUb2tlbjogaWQsXG4gICAgICAgICAgICAgICAgYnJhbmQsXG4gICAgICAgICAgICAgICAgZGVmYXVsdEluc3RydW1lbnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGV4cGlyeU1vbnRoLFxuICAgICAgICAgICAgICAgIGV4cGlyeVllYXIsXG4gICAgICAgICAgICAgICAgaWluOiAnJyxcbiAgICAgICAgICAgICAgICBsYXN0NDogbGFzdERpZ2l0cyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICB0cnVzdGVkU2hpcHBpbmdBZGRyZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB1bnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25Nb2RlOiBVbnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25UeXBlLlBBTixcbiAgICAgICAgICAgICAgICB0eXBlOiAnY2FyZCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuICAgIH1cblxuICAgIG1hcEJjVG9QYXlQYWxBZGRyZXNzKGFkZHJlc3M/OiBBZGRyZXNzKTogUGF5UGFsRmFzdGxhbmVBZGRyZXNzIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBhbnk6IGFkZHJlc3M/LmNvbXBhbnkgfHwgJycsXG4gICAgICAgICAgICBhZGRyZXNzTGluZTE6IGFkZHJlc3M/LmFkZHJlc3MxIHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzc0xpbmUyOiBhZGRyZXNzPy5hZGRyZXNzMiB8fCAnJyxcbiAgICAgICAgICAgIGFkbWluQXJlYTE6IGFkZHJlc3M/LnN0YXRlT3JQcm92aW5jZUNvZGUgfHwgYWRkcmVzcz8uc3RhdGVPclByb3ZpbmNlIHx8ICcnLFxuICAgICAgICAgICAgYWRtaW5BcmVhMjogYWRkcmVzcz8uY2l0eSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3M/LnBvc3RhbENvZGUgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcz8uY291bnRyeUNvZGUgfHwgJycsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgbWFwUGF5UGFsVG9CY0FkZHJlc3MoXG4gICAgICAgIGFkZHJlc3M6IFBheVBhbEZhc3RsYW5lQWRkcmVzcyxcbiAgICAgICAgcHJvZmlsZU5hbWU6IFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWUsXG4gICAgICAgIHBob25lPzogUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmUsXG4gICAgICAgIGN1c3RvbUZpZWxkcz86IEN1c3RvbWVyQWRkcmVzc1snY3VzdG9tRmllbGRzJ10sXG4gICAgKTogQ3VzdG9tZXJBZGRyZXNzIHtcbiAgICAgICAgY29uc3QgW2ZpcnN0TmFtZSwgbGFzdE5hbWVdID0gcHJvZmlsZU5hbWUuZnVsbE5hbWUuc3BsaXQoJyAnKTtcblxuICAgICAgICBjb25zdCBwaG9uZURhdGEgPSB7XG4gICAgICAgICAgICBuYXRpb25hbE51bWJlcjogcGhvbmU/Lm5hdGlvbmFsTnVtYmVyIHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IHBob25lPy5jb3VudHJ5Q29kZSB8fCAnJyxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IERhdGUubm93KCksXG4gICAgICAgICAgICB0eXBlOiAncGF5cGFsLWFkZHJlc3MnLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBwcm9maWxlTmFtZS5maXJzdE5hbWUgfHwgZmlyc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHByb2ZpbGVOYW1lLmxhc3ROYW1lIHx8IGxhc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgY29tcGFueTogYWRkcmVzcy5jb21wYW55IHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzczE6IGFkZHJlc3MuYWRkcmVzc0xpbmUxLFxuICAgICAgICAgICAgYWRkcmVzczI6IGFkZHJlc3MuYWRkcmVzc0xpbmUyIHx8ICcnLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcy5hZG1pbkFyZWEyLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlOiBhZGRyZXNzLmFkbWluQXJlYTEsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBhZGRyZXNzLmFkbWluQXJlYTEsXG4gICAgICAgICAgICBjb3VudHJ5OiBhZGRyZXNzLmNvdW50cnlDb2RlIHx8ICcnLCAvLyBUT0RPOiB1cGRhdGUgY291bnRyeSB3aXRoIHZhbGlkIG5hbWluZ1xuICAgICAgICAgICAgY291bnRyeUNvZGU6IGFkZHJlc3MuY291bnRyeUNvZGUgfHwgJycsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICBwaG9uZTogcGhvbmVEYXRhLmNvdW50cnlDb2RlICsgcGhvbmVEYXRhLm5hdGlvbmFsTnVtYmVyLFxuICAgICAgICAgICAgY3VzdG9tRmllbGRzOiBjdXN0b21GaWVsZHMgfHwgW10sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyByZXNwb25zaWJsZSBmb3IgZmlsdGVyaW5nIFBheVBhbCBGYXN0bGFuZSBhZGRyZXNzZXMgaWYgdGhleSBhcmUgdGhlIHNhbWVcbiAgICAgKiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBhZGRyZXNzZXMgdG8gdXNlIHRoZW0gZm9yIHNoaXBwaW5nIGFuZC9vciBiaWxsaW5nIGFkZHJlc3Mgc2VsZWN0aW9uc1xuICAgICAqIHNvIHRoZSBjdXN0b21lciB3aWxsIGJlIGFibGUgdG8gdXNlIGFkZHJlc3NlcyBmcm9tIFBheVBhbCBGYXN0bGFuZSBpbiBjaGVja291dCBmbG93XG4gICAgICpcbiAgICAgKi9cbiAgICBmaWx0ZXJBZGRyZXNzZXMoYWRkcmVzc2VzOiBBcnJheTxDdXN0b21lckFkZHJlc3MgfCB1bmRlZmluZWQ+KTogQ3VzdG9tZXJBZGRyZXNzW10ge1xuICAgICAgICByZXR1cm4gYWRkcmVzc2VzLnJlZHVjZShcbiAgICAgICAgICAgIChjdXN0b21lckFkZHJlc3NlczogQ3VzdG9tZXJBZGRyZXNzW10sIGN1cnJlbnRBZGRyZXNzOiBDdXN0b21lckFkZHJlc3MgfCB1bmRlZmluZWQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRBZGRyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21lckFkZHJlc3NlcztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzYW1lQWRkcmVzc0luVGhlQXJyYXkgPSBjdXN0b21lckFkZHJlc3Nlcy5zb21lKChjdXN0b21lckFkZHJlc3MpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNFcXVhbEFkZHJlc3NlcyhjdXN0b21lckFkZHJlc3MsIGN1cnJlbnRBZGRyZXNzKSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNhbWVBZGRyZXNzSW5UaGVBcnJheVxuICAgICAgICAgICAgICAgICAgICA/IGN1c3RvbWVyQWRkcmVzc2VzXG4gICAgICAgICAgICAgICAgICAgIDogWy4uLmN1c3RvbWVyQWRkcmVzc2VzLCBjdXJyZW50QWRkcmVzc107XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW10sXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0VxdWFsQWRkcmVzc2VzKFxuICAgICAgICBmaXJzdEFkZHJlc3M6IEN1c3RvbWVyQWRkcmVzcyxcbiAgICAgICAgc2Vjb25kQWRkcmVzczogQ3VzdG9tZXJBZGRyZXNzLFxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gaXNFcXVhbCh0aGlzLm5vcm1hbGl6ZUFkZHJlc3MoZmlyc3RBZGRyZXNzKSwgdGhpcy5ub3JtYWxpemVBZGRyZXNzKHNlY29uZEFkZHJlc3MpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG5vcm1hbGl6ZUFkZHJlc3MoYWRkcmVzczogQ3VzdG9tZXJBZGRyZXNzKSB7XG4gICAgICAgIHJldHVybiBvbWl0KGFkZHJlc3MsIFsnaWQnLCAncGhvbmUnXSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFBheVBhbENvbW1lcmNlRmFzdGxhbmVVdGlscyBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS11dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVBheVBhbENvbW1lcmNlRmFzdGxhbmVVdGlscygpOiBQYXlQYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMge1xuICAgIHJldHVybiBuZXcgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzKCk7XG59XG4iLCJpbXBvcnQgSG9zdGVkRmllbGRUeXBlIGZyb20gJy4vaG9zdGVkLWZpZWxkLXR5cGUnO1xuaW1wb3J0IHsgSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCB9IGZyb20gJy4vaG9zdGVkLWZvcm0tb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQ3JlZGl0Q2FyZEZvcm1GaWVsZHMoXG4gICAgZmllbGRzOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbik6IGZpZWxkcyBpcyBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlciBpbiBmaWVsZHMgJiZcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmROYW1lIGluIGZpZWxkcyAmJlxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeSBpbiBmaWVsZHNcbiAgICApO1xufVxuIiwiaW1wb3J0IEhvc3RlZEZpZWxkVHlwZSBmcm9tICcuL2hvc3RlZC1maWVsZC10eXBlJztcbmltcG9ydCB7IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAsIEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAgfSBmcm9tICcuL2hvc3RlZC1mb3JtLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyhcbiAgICBmaWVsZHM6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAgfCBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwLFxuKTogZmllbGRzIGlzIEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAge1xuICAgIHJldHVybiAoXG4gICAgICAgIEhvc3RlZEZpZWxkVHlwZS5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uIGluIGZpZWxkcyAmJlxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGVWZXJpZmljYXRpb24gaW4gZmllbGRzICYmXG4gICAgICAgIEhvc3RlZEZpZWxkVHlwZS5DYXJkRXhwaXJ5VmVyaWZpY2F0aW9uIGluIGZpZWxkc1xuICAgICk7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIHBheW1lbnQgbWV0aG9kIGV4cGVyaWVuY2VzIHNvbWUga2luZCBvZlxuICogZmFpbHVyZSAoaS5lLjogaXRzIGNsaWVudCBsaWJyYXJ5IHJldHVybnMgYSByZWplY3RlZCBwcm9taXNlKS4gQW5kIHRoZXJlIGlzXG4gKiBubyBvdGhlciBlcnJvciB0eXBlIHRoYXQgaXMgbW9yZSBzcGVjaWZpYyB0aGFuIHRoaXMgb25lLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGhhcyB0aHJvd24gYW4gdW5leHBlY3RlZCBlcnJvci4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kRmFpbGVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X2ludmFsaWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBOb3RJbml0aWFsaXplZEVycm9yVHlwZSB7XG4gICAgQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZCxcbiAgICBDdXN0b21lck5vdEluaXRpYWxpemVkLFxuICAgIFBheW1lbnROb3RJbml0aWFsaXplZCxcbiAgICBTaGlwcGluZ05vdEluaXRpYWxpemVkLFxuICAgIFNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIG1ldGhvZCByZXF1aXJlcyBhIGNlcnRhaW4gaW5pdGlhbGl6YXRpb24gY2FsbCB0byBiZVxuICogbWFkZSBmaXJzdC4gU29tZSBvYmplY3RzIGNhbiBiZSBjb25zdHJ1Y3RlZCBidXQgdGhleSBjYW5ub3QgYmUgdXNlZCB1bnRpbCBhXG4gKiBzZXBhcmF0ZSBpbml0aWFsaXphdGlvbiBjYWxsIGlzIG1hZGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdEluaXRpYWxpemVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTm90SW5pdGlhbGl6ZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdub3RfaW5pdGlhbGl6ZWQnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5DdXN0b21lck5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjdXN0b21lciBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TaGlwcGluZ05vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBzaGlwcGluZyBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2hlY2tvdXQgc3BhbSBwcm90ZWN0aW9uIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGludGVyZmFjZSBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMge1xuICAgIFtrZXk6IHN0cmluZ106IEFycmF5PHsgbWVzc2FnZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIGRldGFpbHM6IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscywgbWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IGZvcm0gY29udGFpbnMgaW52YWxpZCBkYXRhLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50SW52YWxpZEZvcm1FcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X2ludmFsaWRfZm9ybSc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgaXNOaWwsIG9taXRCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgSG9zdGVkQ2FyZEZpZWxkT3B0aW9ucyxcbiAgICBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwLFxuICAgIEhvc3RlZEZpZWxkQmx1ckV2ZW50RGF0YSxcbiAgICBIb3N0ZWRGaWVsZEVudGVyRXZlbnREYXRhLFxuICAgIEhvc3RlZEZpZWxkRm9jdXNFdmVudERhdGEsXG4gICAgSG9zdGVkRmllbGRTdHlsZXNNYXAsXG4gICAgSG9zdGVkRmllbGRUeXBlLFxuICAgIEhvc3RlZEZpZWxkVmFsaWRhdGVFdmVudERhdGEsXG4gICAgSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgSG9zdGVkSW5wdXRWYWxpZGF0ZUVycm9yRGF0YSxcbiAgICBIb3N0ZWRJbnB1dFZhbGlkYXRlRXJyb3JEYXRhTWFwLFxuICAgIEhvc3RlZEluc3RydW1lbnQsXG4gICAgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc0NyZWRpdENhcmRGb3JtRmllbGRzLFxuICAgIGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzLFxuICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UsXG4gICAgaXNWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yLFxuICAgIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyxcbiAgICBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGlzUGF5UGFsQ29tbWVyY2VBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIsXG4gICAgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbENvbW1lcmNlU2RrLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIExpYWJpbGl0eVNoaWZ0RW51bSxcbiAgICBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHMsXG4gICAgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzQ29uZmlnLFxuICAgIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc09uQXBwcm92ZURhdGEsXG4gICAgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUsXG4gICAgUGF5UGFsQ29tbWVyY2VGaWVsZHMsXG4gICAgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY2FyZHMtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGV4ZWN1dGlvblBheW1lbnREYXRhPzogT3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ107XG4gICAgcHJpdmF0ZSBpc0NyZWRpdENhcmRGb3JtPzogYm9vbGVhbjtcbiAgICBwcml2YXRlIGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtPzogYm9vbGVhbjtcblxuICAgIHByaXZhdGUgY2FyZEZpZWxkcz86IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkcztcbiAgICBwcml2YXRlIGN2dkZpZWxkPzogUGF5UGFsQ29tbWVyY2VGaWVsZHM7XG4gICAgcHJpdmF0ZSBleHBpcnlGaWVsZD86IFBheVBhbENvbW1lcmNlRmllbGRzO1xuICAgIHByaXZhdGUgbnVtYmVyRmllbGQ/OiBQYXlQYWxDb21tZXJjZUZpZWxkcztcbiAgICBwcml2YXRlIG5hbWVGaWVsZD86IFBheVBhbENvbW1lcmNlRmllbGRzO1xuXG4gICAgcHJpdmF0ZSBob3N0ZWRGb3JtT3B0aW9ucz86IEhvc3RlZEZvcm1PcHRpb25zO1xuICAgIHByaXZhdGUgcmV0dXJuZWRPcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcmV0dXJuZWRWYXVsdGVkVG9rZW4/OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZVNkazogUGF5UGFsQ29tbWVyY2VTZGssXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzOiBQYXlQYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHMsIHBheXBhbGNvbW1lcmNlIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBwYXlwYWxDb21tZXJjZUluaXRpYWxpemF0aW9uT3B0aW9ucyA9IHBheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHMgfHwgcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgY29uc3QgeyBmb3JtLCBvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvciwgb25Mb2FkQ29tcGxldGUgfSA9XG4gICAgICAgICAgICBwYXlwYWxDb21tZXJjZUluaXRpYWxpemF0aW9uT3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWZvcm0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkcy5mb3JtXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ob3N0ZWRGb3JtT3B0aW9ucyA9IGZvcm07XG5cbiAgICAgICAgdGhpcy5pc0NyZWRpdENhcmRGb3JtID0gaXNDcmVkaXRDYXJkRm9ybUZpZWxkcyhmb3JtLmZpZWxkcyk7XG4gICAgICAgIHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0gPVxuICAgICAgICAgICAgaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm1GaWVsZHMoZm9ybS5maWVsZHMpICYmICF0aGlzLmhhc1VuZGVmaW5lZFZhbHVlcygpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCwgdW5kZWZpbmVkLCB0cnVlLCB0cnVlKTtcblxuICAgICAgICBvbkxvYWRDb21wbGV0ZT8uKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNDcmVkaXRDYXJkRm9ybSB8fCB0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVGaWVsZHMoZm9ybSwgb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkSW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKG1ldGhvZElkKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplUGF5UGFsRmFzdGxhbmVPclRocm93KG1ldGhvZElkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXltZW50RGF0YSB9ID0gcGF5bWVudCB8fCB7fTtcblxuICAgICAgICBpZiAoIXBheW1lbnQgfHwgIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGEgPSBwYXltZW50RGF0YTtcblxuICAgICAgICBpZiAodGhpcy5pc0NyZWRpdENhcmRGb3JtIHx8IHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0pIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudmFsaWRhdGVIb3N0ZWRGb3JtT3JUaHJvdygpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zdWJtaXRIb3N0ZWRGb3JtKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUaGlzIGNvbmRpdGlvbiBpcyB0cmlnZ2VyZWQgd2hlbiB3ZSBwYXkgd2l0aCB2YXVsdGVkIGluc3RydW1lbnQgYW5kIHNoaXBwaW5nIGFkZHJlc3MgaXMgdHJ1c3RlXG4gICAgICAgICAgICBjb25zdCB7IG9yZGVySWQgfSA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXJDYXJkRmllbGRzKFxuICAgICAgICAgICAgICAgICdwYXlwYWxjb21tZXJjZWNyZWRpdGNhcmRzY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW5zdHJ1bWVudFBhcmFtcygpLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhpcy5yZXR1cm5lZE9yZGVySWQgPSBvcmRlcklkO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3VibWl0UGF5bWVudFBheWxvYWQgPSB0aGlzLnByZXBhcmVQYXltZW50UGF5bG9hZChcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGEsXG4gICAgICAgICAgICB0aGlzLnJldHVybmVkT3JkZXJJZCxcbiAgICAgICAgICAgIHRoaXMucmV0dXJuZWRWYXVsdGVkVG9rZW4sXG4gICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoc3VibWl0UGF5bWVudFBheWxvYWQpO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuY3Z2RmllbGQ/LmNsb3NlKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuZXhwaXJ5RmllbGQ/LmNsb3NlKCk7XG4gICAgICAgIGF3YWl0IHRoaXMubnVtYmVyRmllbGQ/LmNsb3NlKCk7XG4gICAgICAgIGF3YWl0IHRoaXMubmFtZUZpZWxkPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFN1Ym1pdCBQYXltZW50IFBheWxvYWQgcHJlcGFyaW5nIG1ldGhvZFxuICAgICAqXG4gICAgICogYHZhdWx0ZWRUb2tlbmAgaXMgdXNlZCB3aGVuIHdlIHBheSB3aXRoIHZhdWx0ZWQgaW5zdHJ1bWVudCAod2l0aCB0cnVzdGVkIHNoaXBwaW5nIGFkZHJlc3MgYW5kIHVudHJ1c3RlZClcbiAgICAgKiBgc2V0dXBUb2tlbmAgaXMgdXNlZCB3aGVuIHdlIHBheSB3aXRoIHZhdWx0ZWQgaW5zdHJ1bWVudCAodW50cnVzdGVkIHNoaXBwaW5nIGFkZHJlc3MpXG4gICAgICogYG9yZGVySWRgIGlzIHVzZWQgaW4gZXZlcnkgY2FzZSAoYmFzaWMgY2FyZCBwYXltZW50LCB0cnVzdGVkIHNoaXBwaW5nIGFkZHJlc3MgYW5kIHVudHJ1c3RlZClcbiAgICAgKi9cbiAgICBwcml2YXRlIHByZXBhcmVQYXltZW50UGF5bG9hZChcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5bWVudERhdGE6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5WydwYXltZW50RGF0YSddLFxuICAgICAgICBvcmRlcklkPzogc3RyaW5nLFxuICAgICAgICBub25jZT86IHN0cmluZyxcbiAgICApOiBQYXltZW50IHtcbiAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCA9IGZhbHNlLCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID0gZmFsc2UgfSA9XG4gICAgICAgICAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlKHBheW1lbnREYXRhKSA/IHBheW1lbnREYXRhIDoge307XG5cbiAgICAgICAgY29uc3QgaW5zdHJ1bWVudElkID1cbiAgICAgICAgICAgIHBheW1lbnREYXRhICYmIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpID8gcGF5bWVudERhdGEuaW5zdHJ1bWVudElkIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIGNvbnN0IGJpZ3BheV90b2tlbiA9IG9taXRCeShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25fbm9uY2U6IG5vbmNlLFxuICAgICAgICAgICAgICAgIHRva2VuOiBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNOaWwsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihub25jZSB8fCBpbnN0cnVtZW50SWQgPyB7IGJpZ3BheV90b2tlbiB9IDoge30pLFxuICAgICAgICAgICAgICAgICAgICAuLi4ob3JkZXJJZCA/IHsgY2FyZF93aXRoX29yZGVyOiB7IG9yZGVyX2lkOiBvcmRlcklkIH0gfSA6IHt9KSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIENhcmQgZmllbGRzIGluaXRpYWxpemVcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZUZpZWxkcyhcbiAgICAgICAgZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zLFxuICAgICAgICBvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvcj86IFBheVBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yJ10sXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgZmllbGRzLCBzdHlsZXMgfSA9IGZvcm1PcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBleGVjdXRlQ2FsbGJhY2sgPSB0aGlzLmdldEV4ZWN1dGVDYWxsYmFjayhmaWVsZHMpO1xuXG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNDb25maWc6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0NvbmZpZyA9IHtcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLmdldElucHV0U3R5bGVzKHN0eWxlcyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7XG4gICAgICAgICAgICAgICAgb3JkZXJJRCxcbiAgICAgICAgICAgICAgICB2YXVsdFNldHVwVG9rZW4sXG4gICAgICAgICAgICAgICAgbGlhYmlsaXR5U2hpZnQsXG4gICAgICAgICAgICB9OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNPbkFwcHJvdmVEYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBsaWFiaWxpdHlTaGlmdCA9PT0gTGlhYmlsaXR5U2hpZnRFbnVtLk5vIHx8XG4gICAgICAgICAgICAgICAgICAgIGxpYWJpbGl0eVNoaWZ0ID09PSBMaWFiaWxpdHlTaGlmdEVudW0uVW5rbm93blxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVBcHByb3ZlKHsgb3JkZXJJRCwgdmF1bHRTZXR1cFRva2VuIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRXJyb3I6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5wdXRFdmVudHM6IHtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGV2ZW50KSA9PiB0aGlzLm9uQ2hhbmdlSGFuZGxlcihmb3JtT3B0aW9ucywgZXZlbnQpLFxuICAgICAgICAgICAgICAgIG9uRm9jdXM6IChldmVudCkgPT4gdGhpcy5vbkZvY3VzSGFuZGxlcihmb3JtT3B0aW9ucywgZXZlbnQpLFxuICAgICAgICAgICAgICAgIG9uQmx1cjogKGV2ZW50KSA9PiB0aGlzLm9uQmx1ckhhbmRsZXIoZm9ybU9wdGlvbnMsIGV2ZW50KSxcbiAgICAgICAgICAgICAgICBvbklucHV0U3VibWl0UmVxdWVzdDogKGV2ZW50KSA9PiB0aGlzLm9uSW5wdXRTdWJtaXRSZXF1ZXN0KGZvcm1PcHRpb25zLCBldmVudCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4uZXhlY3V0ZUNhbGxiYWNrLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2FyZEZpZWxkcyA9IGF3YWl0IHBheXBhbFNkay5DYXJkRmllbGRzKGNhcmRGaWVsZHNDb25maWcpO1xuXG4gICAgICAgIGlmICghdGhpcy5jYXJkRmllbGRzLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxpemVJbnB1dENvbnRhaW5lcnMoZmllbGRzKTtcblxuICAgICAgICAgICAgaWYgKGlzQ3JlZGl0Q2FyZEZvcm1GaWVsZHMoZmllbGRzKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyRmllbGRzKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyhmaWVsZHMpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJWYXVsdGVkRmllbGRzKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBHZXQgZXhlY3V0ZSBjYWxsYmFjayBtZXRob2RcbiAgICAgKiBEZXBlbmRzIG9uIHNoaXBwaW5nIGFkZHJlc3MgaXMgdHJ1c3RlZCBvciBub3Qgd2Ugc2hvdWxkIHBhc3MgdG8gUFBcbiAgICAgKiBgY3JlYXRlVmF1bHRTZXR1cFRva2VuYCBjYWxsYmFjayBpZiBhZGRyZXNzIGlzIHVudHJ1c3RlZCBvclxuICAgICAqIGBjcmVhdGVPcmRlcmAgaWYgYWRkcmVzcyBpcyB0cnVzdGVkXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEV4ZWN1dGVDYWxsYmFjayhcbiAgICAgICAgZmllbGRzOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbiAgICApIHtcbiAgICAgICAgY29uc3QgaXNWYXVsdGVkRm9ybSA9IGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzKGZpZWxkcyk7XG5cbiAgICAgICAgcmV0dXJuIGlzVmF1bHRlZEZvcm0gPyB0aGlzLmNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrKCkgOiB0aGlzLmNyZWF0ZU9yZGVyQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlVmF1bHRTZXR1cFRva2VuOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzZXR1cFRva2VuIH0gPVxuICAgICAgICAgICAgICAgICAgICAoYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlckNhcmRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgICAgICAncGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkc2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmdldEluc3RydW1lbnRQYXJhbXMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cFRva2VuOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgKSkgfHwge307XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0dXBUb2tlbjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVPcmRlckNhbGxiYWNrKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IG9yZGVySWQgfSA9XG4gICAgICAgICAgICAgICAgICAgIChhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICdwYXlwYWxjb21tZXJjZWNyZWRpdGNhcmRzY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnN0cnVtZW50UGFyYW1zKCksXG4gICAgICAgICAgICAgICAgICAgICkpIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yZGVySWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogb25BcHByb3ZlIG1ldGhvZFxuICAgICAqIFdoZW4gc3VibWl0dGluZyBhIGZvcm0gd2l0aCBhIGBzdWJtaXRIb3N0ZWRGb3JtYCBtZXRob2QgaWYgdGhlcmUgaXMgbm8gZXJyb3JcbiAgICAgKiB0aGVuIG9uQXBwcm92ZSBjYWxsYmFjayBpcyB0cmlnZ2VyZWQgYW5kIGRlcGVuZHMgb24gdGhlIGZsb3dcbiAgICAgKiB3ZSB3aWxsIHJlY2VpdmUgYW4gYG9yZGVySURgIGlmIGl0J3MgYmFzaWMgcGF5aW5nIGFuZCBgdmF1bHRTZXR1cFRva2VuYCBpZiB3ZSBhcmUgcGF5aW5nXG4gICAgICogd2l0aCB2YXVsdGVkIGluc3RydW1lbnQgYW5kIHNoaXBwaW5nIGFkZHJlc3MgaXMgdW50cnVzdGVkXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGhhbmRsZUFwcHJvdmUoeyBvcmRlcklELCB2YXVsdFNldHVwVG9rZW4gfTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzT25BcHByb3ZlRGF0YSkge1xuICAgICAgICBpZiAob3JkZXJJRCkge1xuICAgICAgICAgICAgdGhpcy5yZXR1cm5lZE9yZGVySWQgPSBvcmRlcklEO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhdWx0U2V0dXBUb2tlbikge1xuICAgICAgICAgICAgdGhpcy5yZXR1cm5lZFZhdWx0ZWRUb2tlbiA9IHZhdWx0U2V0dXBUb2tlbjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUmVuZGVyaW5nIENhcmQgRmllbGRzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgcmVuZGVyRmllbGRzKGZpZWxkc09wdGlvbnM6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXApIHtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkcyA9IHRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTtcblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkQ29kZT8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMuY3Z2RmllbGQgPSBjYXJkRmllbGRzLkNWVkZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3Z2RmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmRDb2RlLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZEV4cGlyeT8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwaXJ5RmllbGQgPSBjYXJkRmllbGRzLkV4cGlyeUZpZWxkKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmV4cGlyeUZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkRXhwaXJ5LmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZE5hbWU/LmNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWVGaWVsZCA9IGNhcmRGaWVsZHMuTmFtZUZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubmFtZUZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkTmFtZS5jb250YWluZXJJZH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZHNPcHRpb25zLmNhcmROdW1iZXI/LmNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aGlzLm51bWJlckZpZWxkID0gY2FyZEZpZWxkcy5OdW1iZXJGaWVsZCh7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm51bWJlckZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkTnVtYmVyLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyByZW5kZXJWYXVsdGVkRmllbGRzKGZpZWxkc09wdGlvbnM6IEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXApIHtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkcyA9IHRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTtcblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkQ29kZVZlcmlmaWNhdGlvbj8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMuY3Z2RmllbGQgPSBjYXJkRmllbGRzLkNWVkZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3Z2RmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmRDb2RlVmVyaWZpY2F0aW9uLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZEV4cGlyeVZlcmlmaWNhdGlvbj8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwaXJ5RmllbGQgPSBjYXJkRmllbGRzLkV4cGlyeUZpZWxkKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmV4cGlyeUZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkRXhwaXJ5VmVyaWZpY2F0aW9uLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZE51bWJlclZlcmlmaWNhdGlvbj8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMubnVtYmVyRmllbGQgPSBjYXJkRmllbGRzLk51bWJlckZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubnVtYmVyRmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmROdW1iZXJWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEluc3RydW1lbnQgcGFyYW1zIG1ldGhvZFxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRJbnN0cnVtZW50UGFyYW1zKCk6IEhvc3RlZEluc3RydW1lbnQgfCBWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgICAgIGlmICghdGhpcy5leGVjdXRpb25QYXltZW50RGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzSG9zdGVkSW5zdHJ1bWVudExpa2UodGhpcy5leGVjdXRpb25QYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgfSA9XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRpb25QYXltZW50RGF0YTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1ZhdWx0ZWRJbnN0cnVtZW50KHRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCB7IGluc3RydW1lbnRJZCB9ID0gdGhpcy5leGVjdXRpb25QYXltZW50RGF0YTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQoe1xuICAgICAgICBlbWl0dGVkQnksXG4gICAgfTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUpOlxuICAgICAgICB8IEhvc3RlZEZpZWxkQmx1ckV2ZW50RGF0YVxuICAgICAgICB8IEhvc3RlZEZpZWxkRW50ZXJFdmVudERhdGFcbiAgICAgICAgfCBIb3N0ZWRGaWVsZEZvY3VzRXZlbnREYXRhIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkVHlwZTogdGhpcy5tYXBGaWVsZFR5cGUoZW1pdHRlZEJ5KSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEZvcm0gc3VibWl0IG1ldGhvZFxuICAgICAqIFRyaWdnZXJzIGEgZm9ybSBzdWJtaXRcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgYXN5bmMgc3VibWl0SG9zdGVkRm9ybSgpIHtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkcyA9IHRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBzdWJtaXRDb25maWcgPSB7XG4gICAgICAgICAgICBiaWxsaW5nQWRkcmVzczoge1xuICAgICAgICAgICAgICAgIGNvbXBhbnk6IGJpbGxpbmdBZGRyZXNzLmNvbXBhbnksXG4gICAgICAgICAgICAgICAgYWRkcmVzc0xpbmUxOiBiaWxsaW5nQWRkcmVzcy5hZGRyZXNzMSxcbiAgICAgICAgICAgICAgICBhZGRyZXNzTGluZTI6IGJpbGxpbmdBZGRyZXNzLmFkZHJlc3MyLFxuICAgICAgICAgICAgICAgIGFkbWluQXJlYTE6IGJpbGxpbmdBZGRyZXNzLnN0YXRlT3JQcm92aW5jZUNvZGUsXG4gICAgICAgICAgICAgICAgYWRtaW5BcmVhMjogYmlsbGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiBiaWxsaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlOiBiaWxsaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2FyZEZpZWxkcy5zdWJtaXQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2FyZEZpZWxkcy5zdWJtaXQoc3VibWl0Q29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcihcbiAgICAgICAgICAgICAgICAnRmFpbGVkIGF1dGhlbnRpY2F0aW9uLiBQbGVhc2UgdHJ5IHRvIGF1dGhvcml6ZSBhZ2Fpbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVmFsaWRhdGlvbiBhbmQgZXJyb3JzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHZhbGlkYXRlSG9zdGVkRm9ybU9yVGhyb3coKSB7XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHMgPSB0aGlzLmdldENhcmRGaWVsZHNPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNTdGF0ZSA9IGF3YWl0IGNhcmRGaWVsZHMuZ2V0U3RhdGUoKS50aGVuKChkYXRhKSA9PiBkYXRhKTtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbkRhdGEgPSB0aGlzLmdldFZhbGlkaXR5RGF0YShjYXJkRmllbGRzU3RhdGUpO1xuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uRGF0YS5pc1ZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhvc3RlZEZvcm1PcHRpb25zPy5vblZhbGlkYXRlPy4odmFsaWRhdGlvbkRhdGEpO1xuXG4gICAgICAgIHRocm93IG5ldyBQYXltZW50SW52YWxpZEZvcm1FcnJvcih0aGlzLm1hcFZhbGlkYXRpb25FcnJvcnModmFsaWRhdGlvbkRhdGEuZXJyb3JzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRWYWxpZGl0eURhdGEoe1xuICAgICAgICBmaWVsZHMsXG4gICAgfTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUpOiBIb3N0ZWRGaWVsZFZhbGlkYXRlRXZlbnREYXRhIHtcbiAgICAgICAgY29uc3QgdXBkYXRlZEZpZWxkcyA9IHsgLi4uZmllbGRzIH07XG5cbiAgICAgICAgZGVsZXRlIHVwZGF0ZWRGaWVsZHMuY2FyZE5hbWVGaWVsZDtcblxuICAgICAgICBjb25zdCBmaWVsZHNLZXlzID0gT2JqZWN0LmtleXModXBkYXRlZEZpZWxkcykgYXMgQXJyYXk8XG4gICAgICAgICAgICBrZXlvZiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZVsnZmllbGRzJ11cbiAgICAgICAgPjtcblxuICAgICAgICBjb25zdCBpc1ZhbGlkID0gZmllbGRzS2V5cy5ldmVyeSgoa2V5KSA9PiB1cGRhdGVkRmllbGRzW2tleV0/LmlzVmFsaWQpO1xuXG4gICAgICAgIGNvbnN0IGVycm9ycyA9IGZpZWxkc0tleXMucmVkdWNlKChmaWVsZHNFcnJvcnMsIGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmllbGRUeXBlID0gdGhpcy5tYXBGaWVsZFR5cGUoa2V5KTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5maWVsZHNFcnJvcnMsXG4gICAgICAgICAgICAgICAgW2ZpZWxkVHlwZV06IHVwZGF0ZWRGaWVsZHNba2V5XT8uaXNWYWxpZFxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IFt0aGlzLmdldEludmFsaWRFcnJvckJ5RmllbGRUeXBlKGZpZWxkVHlwZSldLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSwge30pO1xuXG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQsIGVycm9ycyB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SW52YWxpZEVycm9yQnlGaWVsZFR5cGUoZmllbGRUeXBlOiBzdHJpbmcpOiBIb3N0ZWRJbnB1dFZhbGlkYXRlRXJyb3JEYXRhIHtcbiAgICAgICAgc3dpdGNoIChmaWVsZFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmRDb2RlOlxuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGVWZXJpZmljYXRpb246XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBjYXJkIGNvZGUnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW52YWxpZF9jYXJkX2NvZGUnLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXI6XG4gICAgICAgICAgICBjYXNlIEhvc3RlZEZpZWxkVHlwZS5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgY2FyZCBudW1iZXInLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW52YWxpZF9jYXJkX251bWJlcicsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeTpcbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnlWZXJpZmljYXRpb246XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBjYXJkIGV4cGlyeScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkX2NhcmRfZXhwaXJ5JyxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgZmllbGQnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW52YWxpZCcsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgbWFwVmFsaWRhdGlvbkVycm9ycyhcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yczogSG9zdGVkSW5wdXRWYWxpZGF0ZUVycm9yRGF0YU1hcCA9IHt9LFxuICAgICk6IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyB7XG4gICAgICAgIGNvbnN0IGVycm9yczogUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzID0ge307XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnNLZXlzID0gT2JqZWN0LmtleXModmFsaWRhdGlvbkVycm9ycykgYXMgQXJyYXk8XG4gICAgICAgICAgICBrZXlvZiBIb3N0ZWRJbnB1dFZhbGlkYXRlRXJyb3JEYXRhTWFwXG4gICAgICAgID47XG5cbiAgICAgICAgdmFsaWRhdGlvbkVycm9yc0tleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBlcnJvcnNba2V5XSA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHZhbGlkYXRpb25FcnJvcnNba2V5XT8uWzBdPy5tZXNzYWdlIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBrZXksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBGaWVsZHMgbWFwcGVyc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXBGaWVsZFR5cGUodHlwZTogc3RyaW5nKTogSG9zdGVkRmllbGRUeXBlIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICduYW1lJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gSG9zdGVkRmllbGRUeXBlLkNhcmROYW1lO1xuXG4gICAgICAgICAgICBjYXNlICdjYXJkTnVtYmVyRmllbGQnOlxuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0NyZWRpdENhcmRGb3JtXG4gICAgICAgICAgICAgICAgICAgID8gSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgOiBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlclZlcmlmaWNhdGlvbjtcblxuICAgICAgICAgICAgY2FzZSAnY2FyZEV4cGlyeUZpZWxkJzpcbiAgICAgICAgICAgIGNhc2UgJ2V4cGlyeSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNDcmVkaXRDYXJkRm9ybVxuICAgICAgICAgICAgICAgICAgICA/IEhvc3RlZEZpZWxkVHlwZS5DYXJkRXhwaXJ5XG4gICAgICAgICAgICAgICAgICAgIDogSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnlWZXJpZmljYXRpb247XG5cbiAgICAgICAgICAgIGNhc2UgJ2NhcmRDdnZGaWVsZCc6XG4gICAgICAgICAgICBjYXNlICdjdnYnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzQ3JlZGl0Q2FyZEZvcm1cbiAgICAgICAgICAgICAgICAgICAgPyBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGVcbiAgICAgICAgICAgICAgICAgICAgOiBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGVWZXJpZmljYXRpb247XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGZpZWxkIHR5cGUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVXRpbHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhcmRGaWVsZHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5jYXJkRmllbGRzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SW5wdXRTdHlsZXMoXG4gICAgICAgIHN0eWxlcz86IEhvc3RlZEZpZWxkU3R5bGVzTWFwLFxuICAgICk6IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzUmVuZGVyT3B0aW9uc1snc3R5bGVzJ10ge1xuICAgICAgICBjb25zdCBjb21tb25TdHlsZXMgPSB7XG4gICAgICAgICAgICAnZm9udC1zaXplJzogc3R5bGVzPy5kZWZhdWx0Py5mb250U2l6ZSB8fCAnMXJlbScsXG4gICAgICAgICAgICAnZm9udC1mYW1pbHknOlxuICAgICAgICAgICAgICAgIHN0eWxlcz8uZGVmYXVsdD8uZm9udEZhbWlseSB8fCAnTW9udHNlcnJhdCwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZicsXG4gICAgICAgICAgICAnZm9udC13ZWlnaHQnOiBzdHlsZXM/LmRlZmF1bHQ/LmZvbnRXZWlnaHQgfHwgJzQwMCcsXG4gICAgICAgICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICAgICAgICBwYWRkaW5nOiAnOXB4IDEzcHgnLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRTdHlsZXMgPSB7IC4uLmNvbW1vblN0eWxlcywgY29sb3I6ICcjMzMzMzMzJyB9O1xuICAgICAgICBjb25zdCBlcnJvclN0eWxlcyA9IHsgLi4uY29tbW9uU3R5bGVzLCBjb2xvcjogJ3JlZCcgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5wdXQ6IGRlZmF1bHRTdHlsZXMsXG4gICAgICAgICAgICAnLmludmFsaWQnOiBlcnJvclN0eWxlcyxcbiAgICAgICAgICAgICcudmFsaWQnOiBkZWZhdWx0U3R5bGVzLFxuICAgICAgICAgICAgJzpmb2N1cyc6IGRlZmF1bHRTdHlsZXMsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdHlsaXplSW5wdXRDb250YWluZXJzKFxuICAgICAgICBmaWVsZHM6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAgfCBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwLFxuICAgICk6IHZvaWQge1xuICAgICAgICBPYmplY3QudmFsdWVzKGZpZWxkcyB8fCB7fSkuZm9yRWFjaCgoaWQ6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtpZD8uY29udGFpbmVySWQgfHwgJyd9YCk7XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzBweCc7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5ib3hTaGFkb3cgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMHB4JztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSAnLTVweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFzVW5kZWZpbmVkVmFsdWVzKCkge1xuICAgICAgICBpZiAodGhpcy5ob3N0ZWRGb3JtT3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5ob3N0ZWRGb3JtT3B0aW9ucy5maWVsZHMpLnNvbWUoXG4gICAgICAgICAgICAgICAgKHZhbHVlKSA9PiB2YWx1ZSA9PT0gdW5kZWZpbmVkLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogSW5wdXQgZXZlbnRzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgb25DaGFuZ2VIYW5kbGVyKFxuICAgICAgICBmb3JtT3B0aW9uczogSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgICAgIGV2ZW50OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgZm9ybU9wdGlvbnM/Lm9uVmFsaWRhdGU/Lih0aGlzLmdldFZhbGlkaXR5RGF0YShldmVudCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25Gb2N1c0hhbmRsZXIoXG4gICAgICAgIGZvcm1PcHRpb25zOiBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICAgICAgZXZlbnQ6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N0YXRlLFxuICAgICk6IHZvaWQge1xuICAgICAgICBmb3JtT3B0aW9ucz8ub25Gb2N1cz8uKHRoaXMuZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQoZXZlbnQpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uQmx1ckhhbmRsZXIoXG4gICAgICAgIGZvcm1PcHRpb25zOiBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICAgICAgZXZlbnQ6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N0YXRlLFxuICAgICk6IHZvaWQge1xuICAgICAgICBmb3JtT3B0aW9ucz8ub25CbHVyPy4odGhpcy5nZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZChldmVudCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25JbnB1dFN1Ym1pdFJlcXVlc3QoXG4gICAgICAgIGZvcm1PcHRpb25zOiBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICAgICAgZXZlbnQ6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N0YXRlLFxuICAgICk6IHZvaWQge1xuICAgICAgICBmb3JtT3B0aW9ucz8ub25FbnRlcj8uKHRoaXMuZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQoZXZlbnQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheVBhbCBDb21tZXJjZSBBY2NlbGVyYXRlZCBjaGVja291dCByZWxhdGVkIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzIHBhcnQgd2hlbiBQUENQIEFYTyBBL0IgdGVzdGluZyB3aWxsIGJlIGZpbmlzaGVkXG4gICAgcHJpdmF0ZSBzaG91bGRJbml0aWFsaXplUGF5UGFsRmFzdGxhbmUobWV0aG9kSWQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gc3RhdGUuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoKTtcbiAgICAgICAgY29uc3QgcGF5cGFsQ29tbWVyY2VQYXltZW50UHJvdmlkZXJDdXN0b21lciA9IGlzUGF5UGFsQ29tbWVyY2VBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIoXG4gICAgICAgICAgICBwYXltZW50UHJvdmlkZXJDdXN0b21lcixcbiAgICAgICAgKVxuICAgICAgICAgICAgPyBwYXltZW50UHJvdmlkZXJDdXN0b21lclxuICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZD8uaW5pdGlhbGl6YXRpb25EYXRhPy5pc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkICYmXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kPy5pbml0aWFsaXphdGlvbkRhdGE/LmlzUGF5UGFsQ29tbWVyY2VBbmFseXRpY3NWMkVuYWJsZWQgJiZcbiAgICAgICAgICAgICFwYXlwYWxDb21tZXJjZVBheW1lbnRQcm92aWRlckN1c3RvbWVyPy5hdXRoZW50aWNhdGlvblN0YXRlXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgcGFydCB3aGVuIFBQQ1AgQVhPIEEvQiB0ZXN0aW5nIHdpbGwgYmUgZmluaXNoZWRcbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVQYXlQYWxGYXN0bGFuZU9yVGhyb3cobWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgICAgIGNvbnN0IHsgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YT8uY29ubmVjdENsaWVudFRva2VuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwYXlQYWxGYXN0bGFuZVNkayA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsRmFzdGxhbmVTZGsoXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICAgICAgY2FydC5pZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShcbiAgICAgICAgICAgICAgICBwYXlQYWxGYXN0bGFuZVNkayxcbiAgICAgICAgICAgICAgICAhIWluaXRpYWxpemF0aW9uRGF0YT8uaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKF86IHVua25vd24pIHtcbiAgICAgICAgICAgIC8vIFdlIHNob3VsZCBhdm9pZCB0aHJvd2luZyBhbnkgZXJyb3IgZnJvbSB0aGlzIGZsb3cgdG8gZG8gbm8gYnJha2UgZGVmYXVsdCBmbG93XG4gICAgICAgICAgICAvLyBUaGlzIGZsb3cgaXMgb3B0aW9uYWxcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4gICAgUGF5UGFsQ29ubmVjdEN1c3RvbWVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQYXlQYWxDb21tZXJjZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lcihcbiAgICBjdXN0b21lcj86IFBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuKTogY3VzdG9tZXIgaXMgUGF5UGFsQ29ubmVjdEN1c3RvbWVyIHtcbiAgICBpZiAoIWN1c3RvbWVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICAnYXV0aGVudGljYXRpb25TdGF0ZScgaW4gY3VzdG9tZXIgfHwgJ2FkZHJlc3NlcycgaW4gY3VzdG9tZXIgfHwgJ2luc3RydW1lbnRzJyBpbiBjdXN0b21lclxuICAgICk7XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLFxuICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlU2RrLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY2FyZHMtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheXBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VTZGsoKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzKCksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheXBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkcycgfSxcbl0pO1xuIiwiaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgVGltZW91dEVycm9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQmlydGhEYXRlLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbE9yZGVyU3RhdHVzLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQge1xuICAgIFBheXBhbENvbW1lcmNlUmF0ZVBheSxcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VSYXRlUGF5UGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1yYXRlcGF5LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmNvbnN0IFBPTExJTkdfSU5URVJWQUwgPSAzMDAwO1xuY29uc3QgTUFYX1BPTExJTkdfVElNRSA9IDMwMDAwMDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5cGFsQ29tbWVyY2VSYXRlcGF5UGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGd1aWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwYXlwYWxjb21tZXJjZXJhdGVwYXk/OiBQYXlwYWxDb21tZXJjZVJhdGVQYXk7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcG9sbGluZ1RpbWVyID0gMDtcbiAgICBwcml2YXRlIHN0b3BQb2xsaW5nID0gbm9vcDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgICAgIHByaXZhdGUgcG9sbGluZ0ludGVydmFsOiBudW1iZXIgPSBQT0xMSU5HX0lOVEVSVkFMLFxuICAgICAgICBwcml2YXRlIG1heFBvbGxpbmdJbnRlcnZhbFRpbWU6IG51bWJlciA9IE1BWF9QT0xMSU5HX1RJTUUsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlUmF0ZVBheVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBnYXRld2F5SWQsIG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZXJhdGVwYXkgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFnYXRld2F5SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5nYXRld2F5SWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlcmF0ZXBheSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlcmF0ZXBheVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbGVnYWxUZXh0Q29udGFpbmVyLCBjb250YWluZXIsIGxvYWRpbmdDb250YWluZXJJZCB9ID0gcGF5cGFsY29tbWVyY2VyYXRlcGF5O1xuXG4gICAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFsZWdhbFRleHRDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5sZWdhbFRleHRDb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWxvYWRpbmdDb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmxvYWRpbmdDb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IGxvYWRpbmdDb250YWluZXJJZDtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHsgbWVyY2hhbnRJZCB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgaWYgKCFtZXJjaGFudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBtZXJjaGFudElkIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGF5cGFsY29tbWVyY2VyYXRlcGF5ID0gcGF5cGFsY29tbWVyY2VyYXRlcGF5O1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVGcmF1ZE5ldFNjcmlwdChtZXJjaGFudElkLCBtZXRob2RJZCwgZ2F0ZXdheUlkKTtcblxuICAgICAgICB0aGlzLmxvYWRGcmF1ZG5ldENvbmZpZygpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyTGVnYWxUZXh0KGxlZ2FsVGV4dENvbnRhaW5lciwgY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcblxuICAgICAgICBjb25zdCB7IGdldEZpZWxkc1ZhbHVlcyB9ID0gdGhpcy5wYXlwYWxjb21tZXJjZXJhdGVwYXkgfHwge307XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZ2V0RmllbGRzVmFsdWVzIHx8IHR5cGVvZiBnZXRGaWVsZHNWYWx1ZXMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5nZXRGaWVsZHNWYWx1ZXNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG9yZGVySWQgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgICAgICdwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kc2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICB7IG1ldGFkYXRhSWQ6IHRoaXMuZ3VpZCB9LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgeyByYXRlcGF5QmlydGhEYXRlLCByYXRlcGF5UGhvbmVOdW1iZXIsIHJhdGVwYXlQaG9uZUNvdW50cnlDb2RlIH0gPVxuICAgICAgICAgICAgICAgIGdldEZpZWxkc1ZhbHVlcygpO1xuXG4gICAgICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGRldmljZV9pbmZvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RfaWQ6IHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIHJhdGVfcGF5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiaXJ0aF9kYXRlOiB0aGlzLm5vcm1hbGl6ZURhdGUocmF0ZXBheUJpcnRoRGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGlvbmFsX251bWJlcjogcmF0ZXBheVBob25lTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnlfY29kZTogcmF0ZXBheVBob25lQ291bnRyeUNvZGUuc3BsaXQoJysnKVsxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZDogcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oXG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudC5nYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIHJlamVjdCkgPT4gcmVqZWN0KCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBsZWdhbFRleHRDb250YWluZXIgfSA9IHRoaXMucGF5cGFsY29tbWVyY2VyYXRlcGF5IHx8IHt9O1xuICAgICAgICBjb25zdCBmcmF1ZE5ldFNjcmlwdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWlkPVwiZnJhdWRuZXRTY3JpcHRcIl0nKVswXTtcbiAgICAgICAgY29uc3QgZnJhdWROZXRDb25maWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pZD1cImZyYXVkbmV0Q29uZmlnXCJdJylbMF07XG5cbiAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG5cbiAgICAgICAgZnJhdWROZXRTY3JpcHQucmVtb3ZlKCk7XG4gICAgICAgIGZyYXVkTmV0Q29uZmlnLnJlbW92ZSgpO1xuXG4gICAgICAgIGlmIChsZWdhbFRleHRDb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZWdhbFRleHRDb250YWluZXIpO1xuXG4gICAgICAgICAgICBsZWdhbFRleHRDb250YWluZXJFbGVtZW50Py5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG5vcm1hbGl6ZURhdGUoZGF0ZTogQmlydGhEYXRlKSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSB0aGlzLmZvcm1hdERhdGUoZGF0ZS5nZXREYXRlKCkpO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRNb250aCA9IHRoaXMuZm9ybWF0RGF0ZShkYXRlLmdldE1vbnRoKCkgKyAxKTtcblxuICAgICAgICByZXR1cm4gYCR7ZGF0ZS5nZXRGdWxsWWVhcigpfS0ke2Zvcm1hdHRlZE1vbnRofS0ke2Zvcm1hdHRlZERhdGV9YDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke2RhdGUgPCAxMCA/IDAgOiAnJ30ke2RhdGV9YDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckxlZ2FsVGV4dChsZWdhbFRleHRDb250YWluZXJFbGVtZW50SWQ6IHN0cmluZywgY29udGFpbmVyOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgbGVnYWxUZXh0Q29udGFpbmVySWQgPSBsZWdhbFRleHRDb250YWluZXJFbGVtZW50SWQ7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lcklkID0gY29udGFpbmVyLnNwbGl0KCcjJylbMV07XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbkNvbnRhaW5lcklkKTtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyUGFyZW50ID0gYnV0dG9uQ29udGFpbmVyPy5wYXJlbnROb2RlO1xuICAgICAgICBjb25zdCBsZWdhbFRleHRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBsZWdhbFRleHRDb250YWluZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzIwcHgnO1xuICAgICAgICBsZWdhbFRleHRDb250YWluZXIuc2V0QXR0cmlidXRlKCdpZCcsIGxlZ2FsVGV4dENvbnRhaW5lcklkKTtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyUGFyZW50Py5wcmVwZW5kKGxlZ2FsVGV4dENvbnRhaW5lcik7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHJhdGVQYXlCdXR0b24gPSBwYXlwYWxTZGsuTGVnYWwoe1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkxlZ2FsLkZVTkRJTkcuUEFZX1VQT05fSU5WT0lDRSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZWdhbFRleHRDb250YWluZXJJZCk7XG5cbiAgICAgICAgaWYgKGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJhdGVQYXlCdXR0b24ucmVuZGVyKGAjJHtsZWdhbFRleHRDb250YWluZXJJZH1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwibGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudFwiIGFyZ3VtZW50IGlzIG5vdCBmb3VuZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBvbkVycm9yIH0gPSB0aGlzLnBheXBhbGNvbW1lcmNlcmF0ZXBheSB8fCB7fTtcblxuICAgICAgICB0aGlzLnJlc2V0UG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlRnJhdWROZXRTY3JpcHQobWVyY2hhbnRJZDogc3RyaW5nLCBtZXRob2RJZDogc3RyaW5nLCBnYXRld2F5SWQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQsIGdhdGV3YXlJZCk7XG4gICAgICAgIGNvbnN0IHsgdGVzdE1vZGUgfSA9IHBheW1lbnRNZXRob2QuY29uZmlnO1xuICAgICAgICBjb25zdCBzY3JpcHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cbiAgICAgICAgc2NyaXB0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgICBzY3JpcHRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZm5jbHMnLCAnZm5wYXJhbXMtZGVkZTdjYzUtMTVmZC00Yzc1LWE5ZjQtMzZjNDMwZWUzYTk5Jyk7XG4gICAgICAgIHNjcmlwdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgJ2ZyYXVkbmV0U2NyaXB0Jyk7XG4gICAgICAgIHRoaXMuZ3VpZCA9IHRoaXMuZ2VuZXJhdGVHVUlEKCk7XG5cbiAgICAgICAgY29uc3QgZnJhdWROZXRDb25maWcgPSB7XG4gICAgICAgICAgICBmOiB0aGlzLmd1aWQsXG4gICAgICAgICAgICBzOiBgJHttZXJjaGFudElkfV9jaGVja291dC1wYWdlYCxcbiAgICAgICAgICAgIHNhbmRib3g6IHRlc3RNb2RlLFxuICAgICAgICB9O1xuXG4gICAgICAgIHNjcmlwdEVsZW1lbnQuaW5uZXJIVE1MID0gSlNPTi5zdHJpbmdpZnkoZnJhdWROZXRDb25maWcpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2VuZXJhdGVHVUlEKCkge1xuICAgICAgICBsZXQgZ3VpZCA9ICcnO1xuICAgICAgICBjb25zdCBjaGFyYWN0ZXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JztcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMyOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVycy5sZW5ndGgpO1xuXG4gICAgICAgICAgICBndWlkICs9IGNoYXJhY3RlcnNbcmFuZG9tSW5kZXhdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGd1aWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsb2FkRnJhdWRuZXRDb25maWcoKSB7XG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG4gICAgICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCAnZnJhdWRuZXRDb25maWcnKTtcbiAgICAgICAgc2NyaXB0LnNyYyA9ICdodHRwczovL2MucGF5cGFsLmNvbS9kYS9yL2ZiLmpzJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcmVpbml0aWFsaXplU3RyYXRlZ3koXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZVJhdGVQYXlQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVpbml0aWFsaXplKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZShvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBvbGxpbmcgbWVjaGFuaXNtXG4gICAgICpcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcmVzb2x2ZVByb21pc2U6ICgpID0+IHZvaWQsXG4gICAgICAgIHJlamVjdFByb21pc2U6ICgpID0+IHZvaWQsXG4gICAgICAgIGdhdGV3YXlJZD86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQocmVzb2x2ZSwgdGhpcy5wb2xsaW5nSW50ZXJ2YWwpO1xuXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucG9sbGluZ1RpbWVyICs9IHRoaXMucG9sbGluZ0ludGVydmFsO1xuXG4gICAgICAgICAgICBjb25zdCBvcmRlclN0YXR1cyA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0T3JkZXJTdGF0dXMoXG4gICAgICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlTWV0YWRhdGE6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzT3JkZXJBcHByb3ZlZCA9IG9yZGVyU3RhdHVzID09PSBQYXlQYWxPcmRlclN0YXR1cy5Qb2xsaW5nU3RvcDtcbiAgICAgICAgICAgIGNvbnN0IGlzUG9sbGluZ0Vycm9yID0gb3JkZXJTdGF0dXMgPT09IFBheVBhbE9yZGVyU3RhdHVzLlBvbGxpbmdFcnJvcjtcblxuICAgICAgICAgICAgaWYgKGlzT3JkZXJBcHByb3ZlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc1BvbGxpbmdFcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3RQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaXNPcmRlckFwcHJvdmVkICYmIHRoaXMucG9sbGluZ1RpbWVyIDwgdGhpcy5tYXhQb2xsaW5nSW50ZXJ2YWxUaW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0UHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVpbml0aWFsaXplU3RyYXRlZ3koe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICBwYXlwYWxjb21tZXJjZXJhdGVwYXk6IHRoaXMucGF5cGFsY29tbWVyY2VyYXRlcGF5LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IFRpbWVvdXRFcnJvcigpKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmVqZWN0UHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XG4gICAgICAgIHRoaXMucG9sbGluZ1RpbWVyID0gMDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc2V0UG9sbGluZ01lY2hhbmlzbSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBMb2FkaW5nIEluZGljYXRvciBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgdG9nZ2xlTG9hZGluZ0luZGljYXRvcihpc0xvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGlzTG9hZGluZyAmJiB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHsgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTIH0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWNvbnN0YW50cyc7XG5cbmltcG9ydCBQYXlwYWxDb21tZXJjZVJhdGVwYXlQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtcmF0ZXBheS1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5cGFsQ29tbWVyY2VSYXRlcGF5UGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheXBhbENvbW1lcmNlUmF0ZXBheVBheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlwYWxDb21tZXJjZVJhdGVwYXlQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBuZXcgTG9hZGluZ0luZGljYXRvcih7XG4gICAgICAgICAgICBjb250YWluZXJTdHlsZXM6IHsgLi4uTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTLCBwb3NpdGlvbjogJ2ZpeGVkJyB9LFxuICAgICAgICB9KSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5cGFsQ29tbWVyY2VSYXRlcGF5UGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBnYXRld2F5OiAncGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMnLCBpZDogJ3JhdGVwYXknIH0sXG5dKTtcbiIsImltcG9ydCB7IG9taXRCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7IEZhc3RsYW5lU3R5bGVzU2V0dGluZ3MsIFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uIH0gZnJvbSAnLi4vaW5kZXgnO1xuXG5mdW5jdGlvbiBpc0ludmFsaWRTdHlsZU9wdGlvbihzdHlsZU9wdGlvbjogdW5rbm93bikge1xuICAgIHJldHVybiB0eXBlb2Ygc3R5bGVPcHRpb24gIT09ICdzdHJpbmcnO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRGYXN0bGFuZVN0eWxlcyhcbiAgICBzdHlsZVNldHRpbmdzPzogRmFzdGxhbmVTdHlsZXNTZXR0aW5ncyxcbiAgICB1aVN0eWxlcz86IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxuKSB7XG4gICAgaWYgKCF1aVN0eWxlcyAmJiAhc3R5bGVTZXR0aW5ncykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiBjbGVhblVwRmFzdGxhbmVTdHlsZXMobWVyZ2VGYXN0bGFuZVN0eWxlcyhzdHlsZVNldHRpbmdzLCB1aVN0eWxlcykpO1xufVxuXG5mdW5jdGlvbiBtZXJnZUZhc3RsYW5lU3R5bGVzKFxuICAgIHN0eWxlU2V0dGluZ3M/OiBGYXN0bGFuZVN0eWxlc1NldHRpbmdzLFxuICAgIHVpU3R5bGVzPzogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4pOiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcm9vdDoge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yUHJpbWFyeTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc0JhY2tncm91bmRDb2xvciB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy5yb290Py5iYWNrZ3JvdW5kQ29sb3JQcmltYXJ5LFxuICAgICAgICAgICAgZXJyb3JDb2xvcjogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NFcnJvckNvbG9yIHx8IHVpU3R5bGVzPy5yb290Py5lcnJvckNvbG9yLFxuICAgICAgICAgICAgZm9udEZhbWlseTogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NGb250RmFtaWx5IHx8IHVpU3R5bGVzPy5yb290Py5mb250RmFtaWx5LFxuICAgICAgICAgICAgZm9udFNpemVCYXNlOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzRm9udFNpemUgfHwgdWlTdHlsZXM/LnJvb3Q/LmZvbnRTaXplQmFzZSxcbiAgICAgICAgICAgIHBhZGRpbmc6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZyB8fCB1aVN0eWxlcz8ucm9vdD8ucGFkZGluZyxcbiAgICAgICAgICAgIHByaW1hcnlDb2xvcjpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc1ByaW1hcnlDb2xvciB8fCB1aVN0eWxlcz8ucm9vdD8ucHJpbWFyeUNvbG9yLFxuICAgICAgICB9LFxuICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgYm9yZGVyUmFkaXVzOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlclJhZGl1cyB8fCB1aVN0eWxlcz8uaW5wdXQ/LmJvcmRlclJhZGl1cyxcbiAgICAgICAgICAgIGJvcmRlckNvbG9yOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlckNvbG9yIHx8IHVpU3R5bGVzPy5pbnB1dD8uYm9yZGVyQ29sb3IsXG4gICAgICAgICAgICBmb2N1c0JvcmRlckNvbG9yOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0ZvY3VzQm9yZGVyQmFzZSB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy5pbnB1dD8uZm9jdXNCb3JkZXJDb2xvcixcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IgfHxcbiAgICAgICAgICAgICAgICB1aVN0eWxlcz8uaW5wdXQ/LmJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgIGJvcmRlcldpZHRoOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlcldpZHRoIHx8IHVpU3R5bGVzPy5pbnB1dD8uYm9yZGVyV2lkdGgsXG4gICAgICAgICAgICB0ZXh0Q29sb3JCYXNlOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc1RleHRDb2xvckJhc2UgfHwgdWlTdHlsZXM/LmlucHV0Py50ZXh0Q29sb3JCYXNlLFxuICAgICAgICB9LFxuICAgICAgICB0b2dnbGU6IHtcbiAgICAgICAgICAgIGNvbG9yUHJpbWFyeTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JQcmltYXJ5IHx8IHVpU3R5bGVzPy50b2dnbGU/LmNvbG9yUHJpbWFyeSxcbiAgICAgICAgICAgIGNvbG9yU2Vjb25kYXJ5OlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclNlY29uZGFyeSB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy50b2dnbGU/LmNvbG9yU2Vjb25kYXJ5LFxuICAgICAgICB9LFxuICAgICAgICB0ZXh0OiB7XG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0NvbG9yIHx8IHVpU3R5bGVzPy50ZXh0Py5ib2R5Py5jb2xvcixcbiAgICAgICAgICAgICAgICBmb250U2l6ZTpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzRm9udFNpemUgfHxcbiAgICAgICAgICAgICAgICAgICAgdWlTdHlsZXM/LnRleHQ/LmJvZHk/LmZvbnRTaXplLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhcHRpb246IHtcbiAgICAgICAgICAgICAgICBjb2xvcjpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzQ29sb3IgfHxcbiAgICAgICAgICAgICAgICAgICAgdWlTdHlsZXM/LnRleHQ/LmNhcHRpb24/LmNvbG9yLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRleHRDYXB0aW9uU2V0dGluZ3NGb250U2l6ZSB8fFxuICAgICAgICAgICAgICAgICAgICB1aVN0eWxlcz8udGV4dD8uY2FwdGlvbj8uZm9udFNpemUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBicmFuZGluZzogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVCcmFuZGluZ1NldHRpbmdzIHx8IHVpU3R5bGVzPy5icmFuZGluZyxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjbGVhblVwRmFzdGxhbmVTdHlsZXMoc3R5bGVzOiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbikge1xuICAgIGNvbnN0IGZhc3RsYW5lU3R5bGVzOiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiA9IHt9O1xuXG4gICAgY29uc3Qgcm9vdCA9IG9taXRCeShzdHlsZXMucm9vdCwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IGlucHV0ID0gb21pdEJ5KHN0eWxlcy5pbnB1dCwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IHRvZ2dsZSA9IG9taXRCeShzdHlsZXMudG9nZ2xlLCBpc0ludmFsaWRTdHlsZU9wdGlvbik7XG4gICAgY29uc3QgdGV4dEJvZHkgPSBvbWl0Qnkoc3R5bGVzLnRleHQ/LmJvZHksIGlzSW52YWxpZFN0eWxlT3B0aW9uKTtcbiAgICBjb25zdCB0ZXh0Q2FwdGlvbiA9IG9taXRCeShzdHlsZXMudGV4dD8uY2FwdGlvbiwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IGJyYW5kaW5nID0gc3R5bGVzLmJyYW5kaW5nO1xuXG4gICAgaWYgKE9iamVjdC5rZXlzKHJvb3QpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy5yb290ID0gcm9vdDtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoaW5wdXQpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy5pbnB1dCA9IGlucHV0O1xuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyh0b2dnbGUpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50b2dnbGUgPSB0b2dnbGU7XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKHRleHRCb2R5KS5sZW5ndGgpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudGV4dCA9IHt9O1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50ZXh0LmJvZHkgPSB0ZXh0Qm9keTtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXModGV4dENhcHRpb24pLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50ZXh0ID0ge1xuICAgICAgICAgICAgLi4uZmFzdGxhbmVTdHlsZXMudGV4dCxcbiAgICAgICAgfTtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudGV4dC5jYXB0aW9uID0gdGV4dENhcHRpb247XG4gICAgfVxuXG4gICAgaWYgKGJyYW5kaW5nKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLmJyYW5kaW5nID0gYnJhbmRpbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhc3RsYW5lU3R5bGVzO1xufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50UHJvdmlkZXJDdXN0b21lcixcbiAgICBQYXlQYWxDb25uZWN0Q3VzdG9tZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG4vLyBUT0RPOiB1cGRhdGUgUGF5UGFsQ29ubmVjdEN1c3RvbWVyIHdpdGggUGF5UGFsRmFzdGxhbmVDdXN0b21lclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQYXlQYWxGYXN0bGFuZUN1c3RvbWVyKFxuICAgIGN1c3RvbWVyPzogUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4pOiBjdXN0b21lciBpcyBQYXlQYWxDb25uZWN0Q3VzdG9tZXIge1xuICAgIGlmICghY3VzdG9tZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgICdhdXRoZW50aWNhdGlvblN0YXRlJyBpbiBjdXN0b21lciB8fCAnYWRkcmVzc2VzJyBpbiBjdXN0b21lciB8fCAnaW5zdHJ1bWVudHMnIGluIGN1c3RvbWVyXG4gICAgKTtcbn1cbiIsImltcG9ydCB7XG4gICAgQ2FyZEluc3RydW1lbnQsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGdldEZhc3RsYW5lU3R5bGVzLFxuICAgIGlzUGF5UGFsRmFzdGxhbmVDdXN0b21lcixcbiAgICBpc1BheXBhbEZhc3RsYW5lUmVxdWVzdEVycm9yLFxuICAgIFBheVBhbENvbW1lcmNlRmFzdGxhbmVVdGlscyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxDb21tZXJjZVNkayxcbiAgICBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50TWV0aG9kcyxcbiAgICBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRPcHRpb25zLFxuICAgIFBheVBhbEZhc3RsYW5lUGF5bWVudEZvcm1hdHRlZFBheWxvYWQsXG4gICAgUGF5UGFsRmFzdGxhbmVTZGssXG4gICAgVERTZWN1cmVBdXRoZW50aWNhdGlvblN0YXRlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5pbXBvcnQgeyBpc0V4cGVyaW1lbnRFbmFibGVkIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlciBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtcmVxdWVzdC1zZW5kZXInO1xuaW1wb3J0IHsgTGlhYmlsaXR5U2hpZnRFbnVtIH0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlwYWxDb21tZXJjZUZhc3RsYW5lUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIHBheXBhbENvbXBvbmVudE1ldGhvZHM/OiBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzO1xuICAgIHByaXZhdGUgcGF5cGFsRmFzdGxhbmVTZGs/OiBQYXlQYWxGYXN0bGFuZVNkaztcbiAgICBwcml2YXRlIHRocmVlRFNWZXJpZmljYXRpb25NZXRob2Q/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwYXlwYWxjb21tZXJjZWZhc3RsYW5lPzogUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucztcbiAgICBwcml2YXRlIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBtZXRob2RJZD86IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyOiBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VTZGs6IFBheVBhbENvbW1lcmNlU2RrLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlsczogUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLFxuICAgICkge31cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRGVmYXVsdCBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZUZhc3RsYW5lUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZWZhc3RsYW5lIH0gPSBvcHRpb25zO1xuICAgICAgICB0aGlzLm1ldGhvZElkID0gbWV0aG9kSWQ7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxjb21tZXJjZWZhc3RsYW5lID0gcGF5cGFsY29tbWVyY2VmYXN0bGFuZTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlZmFzdGxhbmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWZhc3RsYW5lXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uSW5pdCB8fCB0eXBlb2YgcGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkluaXQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uSW5pdFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFwYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uQ2hhbmdlIHx8XG4gICAgICAgICAgICB0eXBlb2YgcGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkNoYW5nZSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uQ2hhbmdlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsIGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZCB9ID1cbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgIHRoaXMudGhyZWVEU1ZlcmlmaWNhdGlvbk1ldGhvZCA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8udGhyZWVEU1ZlcmlmaWNhdGlvbk1ldGhvZDtcblxuICAgICAgICB0aGlzLnBheXBhbEZhc3RsYW5lU2RrID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVNkay5nZXRQYXlQYWxGYXN0bGFuZVNkayhcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICBjYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICBjYXJ0LmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lU3R5bGluZyA9IGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZFxuICAgICAgICAgICAgPyBwYXltZW50TWV0aG9kPy5pbml0aWFsaXphdGlvbkRhdGE/LmZhc3RsYW5lU3R5bGVzXG4gICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgIGNvbnN0IGZhc3RsYW5lU3R5bGVzID0gZ2V0RmFzdGxhbmVTdHlsZXMoXG4gICAgICAgICAgICBwYXlwYWxGYXN0bGFuZVN0eWxpbmcsXG4gICAgICAgICAgICBwYXlwYWxjb21tZXJjZWZhc3RsYW5lPy5zdHlsZXMsXG4gICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKFxuICAgICAgICAgICAgdGhpcy5wYXlwYWxGYXN0bGFuZVNkayxcbiAgICAgICAgICAgICEhaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgIGZhc3RsYW5lU3R5bGVzLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICh0aGlzLnNob3VsZFJ1bkF1dGhlbnRpY2F0aW9uRmxvdygpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplUGF5UGFsUGF5bWVudENvbXBvbmVudCgpO1xuXG4gICAgICAgIHBheXBhbGNvbW1lcmNlZmFzdGxhbmUub25Jbml0KChjb250YWluZXI6IHN0cmluZykgPT5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyUGF5UGFsUGF5bWVudENvbXBvbmVudChjb250YWluZXIpLFxuICAgICAgICApO1xuICAgICAgICBwYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uQ2hhbmdlKCgpID0+IHRoaXMuaGFuZGxlUGF5UGFsU3RvcmVkSW5zdHJ1bWVudENoYW5nZShtZXRob2RJZCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUob3JkZXJSZXF1ZXN0OiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IG9yZGVyUmVxdWVzdDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBwYXltZW50RGF0YSwgbWV0aG9kSWQgfSA9IHBheW1lbnQ7XG5cbiAgICAgICAgY29uc3QgaXNWYXVsdGVkRmxvdyA9IHBheW1lbnREYXRhICYmIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IGlzVmF1bHRlZEZsb3dcbiAgICAgICAgICAgICAgICA/IGF3YWl0IHRoaXMucHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQobWV0aG9kSWQsIHBheW1lbnREYXRhKVxuICAgICAgICAgICAgICAgIDogYXdhaXQgdGhpcy5wcmVwYXJlUGF5bWVudFBheWxvYWQobWV0aG9kSWQsIHBheW1lbnREYXRhKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQ8UGF5UGFsRmFzdGxhbmVQYXltZW50Rm9ybWF0dGVkUGF5bG9hZD4oXG4gICAgICAgICAgICAgICAgcGF5bWVudFBheWxvYWQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5yZW1vdmVTdG9yYWdlU2Vzc2lvbklkKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaXNQYXlwYWxGYXN0bGFuZVJlcXVlc3RFcnJvcihlcnJvcikgJiZcbiAgICAgICAgICAgICAgICBlcnJvci5yZXNwb25zZS5ib2R5Lm5hbWUgPT09ICdJTlZBTElEX1JFUVVFU1QnXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnZhbGlkUmVxdWVzdEVycm9yID0ge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbktleTogJ3BheW1lbnQuZXJyb3JzLmludmFsaWRfcmVxdWVzdF9lcnJvcicsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoaW52YWxpZFJlcXVlc3RFcnJvcik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSAhPT0gJ0Zhc3RsYW5lRXJyb3InKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQXV0aGVudGljYXRpb24gZmxvdyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIHNob3VsZFJ1bkF1dGhlbnRpY2F0aW9uRmxvdygpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGN1c3RvbWVyID0gc3RhdGUuZ2V0Q3VzdG9tZXJPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gc3RhdGUuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoKTtcbiAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmVDdXN0b21lciA9IGlzUGF5UGFsRmFzdGxhbmVDdXN0b21lcihwYXltZW50UHJvdmlkZXJDdXN0b21lcilcbiAgICAgICAgICAgID8gcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJcbiAgICAgICAgICAgIDoge307XG5cbiAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmVTZXNzaW9uSWQgPSB0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5nZXRTdG9yYWdlU2Vzc2lvbklkKCk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWN1c3RvbWVyLmlzR3Vlc3QgfHxcbiAgICAgICAgICAgIHBheXBhbEZhc3RsYW5lQ3VzdG9tZXI/LmF1dGhlbnRpY2F0aW9uU3RhdGUgPT09XG4gICAgICAgICAgICAgICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLkNBTkNFTEVEXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICFwYXlwYWxGYXN0bGFuZUN1c3RvbWVyPy5hdXRoZW50aWNhdGlvblN0YXRlICYmIHBheXBhbEZhc3RsYW5lU2Vzc2lvbklkID09PSBjYXJ0LmlkO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhtZXRob2RJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgICAgICBjb25zdCBjdXN0b21lciA9IHN0YXRlLmdldEN1c3RvbWVyKCk7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzKCk7XG4gICAgICAgICAgICBjb25zdCBjdXN0b21lckVtYWlsID0gY3VzdG9tZXI/LmVtYWlsIHx8IGJpbGxpbmdBZGRyZXNzPy5lbWFpbCB8fCAnJztcblxuICAgICAgICAgICAgY29uc3QgeyBjdXN0b21lckNvbnRleHRJZCB9ID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5sb29rdXBDdXN0b21lck9yVGhyb3coY3VzdG9tZXJFbWFpbCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGF1dGhlbnRpY2F0aW9uUmVzdWx0ID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy50cmlnZ2VyQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJDb250ZXh0SWQsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgeyBhdXRoZW50aWNhdGlvblN0YXRlLCBhZGRyZXNzZXMsIGluc3RydW1lbnRzIH0gPVxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLm1hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEoXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe1xuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgICAgICAgICAgICAgYWRkcmVzc2VzLFxuICAgICAgICAgICAgICAgIGluc3RydW1lbnRzLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQgPVxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0LmF1dGhlbnRpY2F0aW9uU3RhdGUgPT09XG4gICAgICAgICAgICAgICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLkNBTkNFTEVEO1xuXG4gICAgICAgICAgICBpZiAoaXNBdXRoZW50aWNhdGlvbkZsb3dDYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLnJlbW92ZVN0b3JhZ2VTZXNzaW9uSWQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMudXBkYXRlU3RvcmFnZVNlc3Npb25JZChjYXJ0LmlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIEluZm86IERvIG5vdCB0aHJvdyBhbnl0aGluZyBoZXJlIHRvIGF2b2lkIGJsb2NraW5nIGN1c3RvbWVyIGZyb20gcGFzc2luZyBjaGVja291dCBmbG93XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheVBhbCBGYXN0bGFuZSBDYXJkIENvbXBvbmVudCByZW5kZXJpbmcgbWV0aG9kXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVQYXlQYWxQYXltZW50Q29tcG9uZW50KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwaG9uZSA9IGJpbGxpbmdBZGRyZXNzLnBob25lO1xuICAgICAgICBjb25zdCBmdWxsTmFtZSA9IGAke2JpbGxpbmdBZGRyZXNzLmZpcnN0TmFtZX0gJHtiaWxsaW5nQWRkcmVzcy5sYXN0TmFtZX1gLnRyaW0oKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZSA9IHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLmdldFBheVBhbEZhc3RsYW5lT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IGNhcmRDb21wb25lbnRPcHRpb25zOiBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRPcHRpb25zID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgY2FyZGhvbGRlck5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgcHJlZmlsbDogZnVsbE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAuLi4ocGhvbmUgJiYge1xuICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmlsbDogcGhvbmUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGF5cGFsQ29tcG9uZW50TWV0aG9kcyA9IGF3YWl0IHBheXBhbEZhc3RsYW5lLkZhc3RsYW5lQ2FyZENvbXBvbmVudChcbiAgICAgICAgICAgIGNhcmRDb21wb25lbnRPcHRpb25zLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyUGF5UGFsUGF5bWVudENvbXBvbmVudChjb250YWluZXI/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF5cGFsQ29tcG9uZW50TWV0aG9kcyA9IHRoaXMuZ2V0UGF5UGFsQ29tcG9uZW50TWV0aG9kc09yVGhyb3coKTtcblxuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcmVuZGVyIGNhcmQgY29tcG9uZW50IGJlY2F1c2UgXCJjb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBwYXlwYWxDb21wb25lbnRNZXRob2RzLnJlbmRlcihjb250YWluZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5UGFsQ29tcG9uZW50TWV0aG9kc09yVGhyb3coKTogUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50TWV0aG9kcyB7XG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxDb21wb25lbnRNZXRob2RzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnBheXBhbENvbXBvbmVudE1ldGhvZHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXltZW50IFBheWxvYWQgcHJlcGFyYXRpb24gbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBwcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZChcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5bWVudERhdGE6IFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgICk6IFByb21pc2U8UGF5bWVudDxQYXlQYWxGYXN0bGFuZVBheW1lbnRGb3JtYXR0ZWRQYXlsb2FkPj4ge1xuICAgICAgICBjb25zdCB7IGluc3RydW1lbnRJZCB9ID0gcGF5bWVudERhdGE7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgaXMzRFNFbmFibGVkID1cbiAgICAgICAgICAgIHRoaXMuaXNQYXlwYWxDb21tZXJjZUZhc3RsYW5lVGhyZWVEU0F2YWlsYWJsZSgpICYmIHBheW1lbnRNZXRob2QuY29uZmlnLmlzM2RzRW5hYmxlZDtcblxuICAgICAgICBpZiAoIWlzM0RTRW5hYmxlZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVPcmRlcihpbnN0cnVtZW50SWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmFzdGxhbmVUb2tlbiA9IGlzM0RTRW5hYmxlZCA/IGF3YWl0IHRoaXMuZ2V0M0RTTm9uY2UoaW5zdHJ1bWVudElkKSA6IGluc3RydW1lbnRJZDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2Zhc3RsYW5lX3Rva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogdGhpcy5vcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IGZhc3RsYW5lVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBwcmVwYXJlUGF5bWVudFBheWxvYWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keVsncGF5bWVudERhdGEnXSxcbiAgICApOiBQcm9taXNlPFBheW1lbnQ8UGF5UGFsRmFzdGxhbmVQYXltZW50Rm9ybWF0dGVkUGF5bG9hZD4+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IGZ1bGxOYW1lID0gYCR7YmlsbGluZ0FkZHJlc3MuZmlyc3ROYW1lfSAke2JpbGxpbmdBZGRyZXNzLmxhc3ROYW1lfWAudHJpbSgpO1xuXG4gICAgICAgIGNvbnN0IHsgZ2V0UGF5bWVudFRva2VuIH0gPSB0aGlzLmdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgZ2V0UGF5bWVudFRva2VuKHtcbiAgICAgICAgICAgIG5hbWU6IHsgZnVsbE5hbWUgfSxcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzOiB0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5tYXBCY1RvUGF5UGFsQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGlzM0RTRW5hYmxlZCA9XG4gICAgICAgICAgICB0aGlzLmlzUGF5cGFsQ29tbWVyY2VGYXN0bGFuZVRocmVlRFNBdmFpbGFibGUoKSAmJiBwYXltZW50TWV0aG9kLmNvbmZpZy5pczNkc0VuYWJsZWQ7XG5cbiAgICAgICAgaWYgKCFpczNEU0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlT3JkZXIoaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmFzdGxhbmVUb2tlbiA9IGlzM0RTRW5hYmxlZCA/IGF3YWl0IHRoaXMuZ2V0M0RTTm9uY2UoaWQpIDogaWQ7XG5cbiAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCA9IGZhbHNlLCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID0gZmFsc2UgfSA9XG4gICAgICAgICAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlKHBheW1lbnREYXRhKSA/IHBheW1lbnREYXRhIDoge307XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICAuLi5wYXltZW50RGF0YSxcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2Zhc3RsYW5lX3Rva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogdGhpcy5vcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IGZhc3RsYW5lVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVPcmRlcihpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHN0YXRlLmdldENhcnRPclRocm93KCkuaWQ7XG4gICAgICAgIGlmICh0aGlzLm1ldGhvZElkKSB7XG4gICAgICAgICAgICBjb25zdCB7IG9yZGVySWQgfSA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyLmNyZWF0ZU9yZGVyKHRoaXMubWV0aG9kSWQsIHtcbiAgICAgICAgICAgICAgICBjYXJ0SWQsXG4gICAgICAgICAgICAgICAgZmFzdGxhbmVUb2tlbjogaWQsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogM0RTZWN1cmUgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIGFzeW5jIGdldDNEU05vbmNlKHBheXBhbE5vbmNlOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBzdGF0ZS5nZXRPcmRlck9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgY2hlY2tvdXRVcmwgPSBzdGF0ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5saW5rcy5jaGVja291dExpbms7XG5cbiAgICAgICAgY29uc3QgdGhyZWVEb21haW5TZWN1cmVDb21wb25lbnQgPSB0aGlzLnBheXBhbEZhc3RsYW5lU2RrPy5UaHJlZURvbWFpblNlY3VyZUNsaWVudDtcblxuICAgICAgICBpZiAoIXRocmVlRG9tYWluU2VjdXJlQ29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRocmVlRG9tYWluU2VjdXJlUGFyYW1ldGVycyA9IHtcbiAgICAgICAgICAgIGFtb3VudDogb3JkZXIub3JkZXJBbW91bnQudG9GaXhlZCgyKSxcbiAgICAgICAgICAgIGN1cnJlbmN5OiBjYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICBub25jZTogcGF5cGFsTm9uY2UsXG4gICAgICAgICAgICB0aHJlZURTUmVxdWVzdGVkOiB0aGlzLnRocmVlRFNWZXJpZmljYXRpb25NZXRob2QgPT09ICdTQ0FfQUxXQVlTJyxcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uQ29udGV4dDoge1xuICAgICAgICAgICAgICAgIGV4cGVyaWVuY2VfY29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbGU6ICdlbi1VUycsXG4gICAgICAgICAgICAgICAgICAgIHJldHVybl91cmw6IGNoZWNrb3V0VXJsLFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxfdXJsOiBjaGVja291dFVybCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBpc1RocmVlRG9tYWluU2VjdXJlRWxpZ2libGUgPSBhd2FpdCB0aHJlZURvbWFpblNlY3VyZUNvbXBvbmVudC5pc0VsaWdpYmxlKFxuICAgICAgICAgICAgdGhyZWVEb21haW5TZWN1cmVQYXJhbWV0ZXJzLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChpc1RocmVlRG9tYWluU2VjdXJlRWxpZ2libGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgbGlhYmlsaXR5U2hpZnQsIGF1dGhlbnRpY2F0aW9uU3RhdGUsIG5vbmNlIH0gPVxuICAgICAgICAgICAgICAgIGF3YWl0IHRocmVlRG9tYWluU2VjdXJlQ29tcG9uZW50LnNob3coKTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGxpYWJpbGl0eVNoaWZ0ID09PSBMaWFiaWxpdHlTaGlmdEVudW0uTm8gfHxcbiAgICAgICAgICAgICAgICBsaWFiaWxpdHlTaGlmdCA9PT0gTGlhYmlsaXR5U2hpZnRFbnVtLlVua25vd24gfHxcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlID09PSBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUuRXJyb3JlZCB8fFxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUgPT09IFREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZS5DYW5jZWxsZWRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhdXRoZW50aWNhdGlvblN0YXRlID09PSBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUuU3VjY2VlZGVkKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVPcmRlcihub25jZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBheXBhbE5vbmNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5UGFsIEZhc3RsYW5lIGluc3RydW1lbnQgY2hhbmdlXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVBheVBhbFN0b3JlZEluc3RydW1lbnRDaGFuZ2UoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxDYXJkSW5zdHJ1bWVudCB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBjb25zdCBwYXlwYWxBeG9TZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCB7IHNlbGVjdGlvbkNoYW5nZWQsIHNlbGVjdGVkQ2FyZCB9ID0gYXdhaXQgcGF5cGFsQXhvU2RrLnByb2ZpbGUuc2hvd0NhcmRTZWxlY3RvcigpO1xuXG4gICAgICAgIGlmIChzZWxlY3Rpb25DaGFuZ2VkKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgPSBzdGF0ZS5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lcigpO1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmVDdXN0b21lciA9IGlzUGF5UGFsRmFzdGxhbmVDdXN0b21lcihwYXltZW50UHJvdmlkZXJDdXN0b21lcilcbiAgICAgICAgICAgICAgICA/IHBheW1lbnRQcm92aWRlckN1c3RvbWVyXG4gICAgICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbnN0cnVtZW50ID0gdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMubWFwUGF5UGFsVG9CY0luc3RydW1lbnQoXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRDYXJkLFxuICAgICAgICAgICAgKVswXTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHtcbiAgICAgICAgICAgICAgICAuLi5wYXlwYWxGYXN0bGFuZUN1c3RvbWVyLFxuICAgICAgICAgICAgICAgIGluc3RydW1lbnRzOiBbc2VsZWN0ZWRJbnN0cnVtZW50XSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRJbnN0cnVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheVBhbCBGYXN0bGFuZSBleHBlcmltZW50cyBoYW5kbGluZ1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc1BheXBhbENvbW1lcmNlRmFzdGxhbmVUaHJlZURTQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBmZWF0dXJlcyA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXM7XG5cbiAgICAgICAgcmV0dXJuIGlzRXhwZXJpbWVudEVuYWJsZWQoZmVhdHVyZXMsICdQUk9KRUNULTcwODAucGF5cGFsY29tbWVyY2VfZmFzdGxhbmVfdGhyZWVfZHMnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiB1bmtub3duKTogdm9pZCB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMucGF5cGFsY29tbWVyY2VmYXN0bGFuZT8ub25FcnJvciAmJlxuICAgICAgICAgICAgdHlwZW9mIHRoaXMucGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkVycm9yID09PSAnZnVuY3Rpb24nXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBQYXlwYWxGYXN0bGFuZVJlcXVlc3RFcnJvciB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICByZXNwb25zZToge1xuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQYXlwYWxGYXN0bGFuZVJlcXVlc3RFcnJvcihcbiAgICBlcnJvcjogdW5rbm93bixcbik6IGVycm9yIGlzIFBheXBhbEZhc3RsYW5lUmVxdWVzdEVycm9yIHtcbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGVycm9yICE9PSBudWxsICYmXG4gICAgICAgICdtZXNzYWdlJyBpbiBlcnJvciAmJlxuICAgICAgICAncmVzcG9uc2UnIGluIGVycm9yICYmXG4gICAgICAgICdib2R5JyBpbiAoZXJyb3IgYXMgUGF5cGFsRmFzdGxhbmVSZXF1ZXN0RXJyb3IpLnJlc3BvbnNlICYmXG4gICAgICAgICduYW1lJyBpbiAoZXJyb3IgYXMgUGF5cGFsRmFzdGxhbmVSZXF1ZXN0RXJyb3IpLnJlc3BvbnNlLmJvZHlcbiAgICApO1xufVxuIiwiaW1wb3J0IHsgY3JlYXRlUmVxdWVzdFNlbmRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMsXG4gICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VTZGssXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLWNvbW1lcmNlLXV0aWxzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlciBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUZhc3RsYW5lUGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+IHtcbiAgICBjb25zdCB7IGdldEhvc3QgfSA9IHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgIHJldHVybiBuZXcgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgbmV3IFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlcihjcmVhdGVSZXF1ZXN0U2VuZGVyKHsgaG9zdDogZ2V0SG9zdCgpIH0pKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VTZGsoKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzKCksXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUZhc3RsYW5lUGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNlYWNjZWxlcmF0ZWRjaGVja291dCcgfSwgLy8gUGF5UGFsIEZhc3RsYW5lIHJlbGF0ZXMgdG8gJ3BheXBhbGNvbW1lcmNlYWNjZWxlcmF0ZWRjaGVja291dCcgbWV0aG9kIGlkXG5dKTtcbiIsImltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEN1c3RvbWVyQ3JlZGVudGlhbHMsXG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUN1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIG9uRXJyb3IgPSBub29wO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsY29tbWVyY2UsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2UuY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2UuY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBheXBhbGNvbW1lcmNlLm9uQ2xpY2sgJiYgdHlwZW9mIHBheXBhbGNvbW1lcmNlLm9uQ2xpY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZS5vbkNsaWNrXCIgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9uRXJyb3IgPSBwYXlwYWxjb21tZXJjZS5vbkVycm9yIHx8IG5vb3A7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5bWVudE1ldGhvZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFwYXlwYWxTZGsgfHwgIXBheXBhbFNkay5CdXR0b25zIHx8IHR5cGVvZiBwYXlwYWxTZGsuQnV0dG9ucyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICAnW0JDIFBheVBhbF06IFBheVBhbCBCdXR0b24gY291bGQgbm90IGJlIHJlbmRlcmVkLCBkdWUgdG8gaXNzdWVzIHdpdGggbG9hZGluZyBQYXlQYWwgU0RLJyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbkluKGNyZWRlbnRpYWxzOiBDdXN0b21lckNyZWRlbnRpYWxzLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGNyZWRlbnRpYWxzLCBvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbk91dChvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChvcHRpb25zPzogRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgb3B0aW9ucz8uY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjaz8uKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxjb21tZXJjZTogUGF5UGFsQ29tbWVyY2VDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25DbGljaywgb25Db21wbGV0ZSB9ID0gcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCwgcGF5bWVudEJ1dHRvblN0eWxlcywgaXNBcHBTd2l0Y2hFbmFibGVkIH0gPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIC4uLih0aGlzLmlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkKSAmJiB7XG4gICAgICAgICAgICAgICAgYXBwU3dpdGNoV2hlbkF2YWlsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoJ3BheXBhbGNvbW1lcmNlJyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgICAgICAuLi4ob25DbGljayAmJiB7IG9uQ2xpY2s6ICgpID0+IG9uQ2xpY2soKSB9KSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBob3N0ZWRDaGVja291dENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIC4uLighaXNBcHBTd2l0Y2hFbmFibGVkICYmIHtcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMub25Ib3N0ZWRDaGVja291dEFwcHJvdmUoZGF0YSwgYWN0aW9ucywgbWV0aG9kSWQsIG9uQ29tcGxldGUpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuRlVORElORy5QQVlQQUwsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHtcbiAgICAgICAgICAgICAgICAuLi5jaGVja291dFRvcEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgIC4uLihpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCAmJiBob3N0ZWRDaGVja291dENhbGxiYWNrcyksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIGlmIChwYXlwYWxCdXR0b24uaGFzUmV0dXJuZWQ/LigpICYmIHRoaXMuaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQpKSB7XG4gICAgICAgICAgICAgICAgcGF5cGFsQnV0dG9uLnJlc3VtZT8uKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZW5kZXIoYCMke2NvbnRhaW5lcn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvbkhvc3RlZENoZWNrb3V0QXBwcm92ZShcbiAgICAgICAgZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgb25Db21wbGV0ZT86ICgpID0+IHZvaWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICghZGF0YS5vcmRlcklEKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYXJ0ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgb3JkZXJEZXRhaWxzID0gYXdhaXQgYWN0aW9ucy5vcmRlci5nZXQoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcblxuICAgICAgICAgICAgaWYgKGNhcnQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3Moc2hpcHBpbmdBZGRyZXNzKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7fSwgeyBwYXJhbXM6IHsgbWV0aG9kSWQgfSB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChtZXRob2RJZCwgZGF0YS5vcmRlcklEKTtcblxuICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUgJiYgdHlwZW9mIG9uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBjaXR5OiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnN0YXRlLFxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW5mbzogd2UgdXNlIHRoZSBzYW1lIGFkZHJlc3MgdG8gZmlsbCBiaWxsaW5nIGFuZCBzaGlwcGluZyBhZGRyZXNzZXMgdG8gaGF2ZSB2YWxpZCBxdW90YSBvbiBCRSBmb3Igb3JkZXIgdXBkYXRpbmcgcHJvY2Vzc1xuICAgICAgICAgICAgLy8gb24gdGhpcyBzdGFnZSB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byB2YWxpZCBjdXN0b21lcidzIGFkZHJlc3MgZXhjZXB0IHNoaXBwaW5nIGRhdGFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhhZGRyZXNzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coXG4gICAgICAgICAgICBkYXRhLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24uaWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub25FcnJvcihlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5UGFsIEFwcFN3aXRjaCBlbmFibGluZyBoYW5kbGluZ1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZChtZXRob2RJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICByZXR1cm4gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LmlzQXBwU3dpdGNoRW5hYmxlZCB8fCBmYWxzZTtcbiAgICB9XG59XG4iLCJjb25zdCBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQgPSAzNjtcblxuZXhwb3J0IGRlZmF1bHQgRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0O1xuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQ3VzdG9tZXJTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlQ3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VDdXN0b21lclN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlQ3VzdG9tZXJTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlQ3VzdG9tZXJTdHJhdGVneSwgW3sgaWQ6ICdwYXlwYWxjb21tZXJjZScgfV0pO1xuIiwiaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQ3VzdG9tZXJDcmVkZW50aWFscyxcbiAgICBDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgIEN1c3RvbWVyU3RyYXRlZ3ksXG4gICAgRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbn0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIG9uRXJyb3IgPSBub29wO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsY29tbWVyY2VjcmVkaXQsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2VjcmVkaXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWNyZWRpdFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2VjcmVkaXQuY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXQuY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBheXBhbGNvbW1lcmNlY3JlZGl0Lm9uQ2xpY2sgJiYgdHlwZW9mIHBheXBhbGNvbW1lcmNlY3JlZGl0Lm9uQ2xpY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWNyZWRpdC5vbkNsaWNrXCIgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9uRXJyb3IgPSBwYXlwYWxjb21tZXJjZWNyZWRpdC5vbkVycm9yIHx8IG5vb3A7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5bWVudE1ldGhvZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFwYXlwYWxTZGsgfHwgIXBheXBhbFNkay5CdXR0b25zIHx8IHR5cGVvZiBwYXlwYWxTZGsuQnV0dG9ucyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICAnW0JDIFBheVBhbF06IFBheVBhbCBCdXR0b24gY291bGQgbm90IGJlIHJlbmRlcmVkLCBkdWUgdG8gaXNzdWVzIHdpdGggbG9hZGluZyBQYXlQYWwgU0RLJyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZWNyZWRpdCk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbkluKGNyZWRlbnRpYWxzOiBDdXN0b21lckNyZWRlbnRpYWxzLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGNyZWRlbnRpYWxzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduT3V0KG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQob3B0aW9ucz86IEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIG9wdGlvbnM/LmNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2s/LigpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsQ29tbWVyY2VDcmVkaXQ6IFBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uQ29tcGxldGUsIG9uQ2xpY2sgfSA9IHBheXBhbENvbW1lcmNlQ3JlZGl0O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsIHBheW1lbnRCdXR0b25TdHlsZXMsIGlzQXBwU3dpdGNoRW5hYmxlZCB9ID1cbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdwYXlwYWxjb21tZXJjZWNyZWRpdCcpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICAgICAgLi4uKG9uQ2xpY2sgJiYgeyBvbkNsaWNrOiAoKSA9PiBvbkNsaWNrKCkgfSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICAuLi4oIWlzQXBwU3dpdGNoRW5hYmxlZCAmJiB7XG4gICAgICAgICAgICAgICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICAgICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nT3B0aW9uc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGRhdGEsIGFjdGlvbnMsIG1ldGhvZElkLCBvbkNvbXBsZXRlKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBmdW5kaW5nU291cmNlcyA9IFtwYXlwYWxTZGsuRlVORElORy5QQVlMQVRFUiwgcGF5cGFsU2RrLkZVTkRJTkcuQ1JFRElUXTtcbiAgICAgICAgbGV0IGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSBmYWxzZTtcblxuICAgICAgICBmdW5kaW5nU291cmNlcy5mb3JFYWNoKChmdW5kaW5nU291cmNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhc1JlbmRlcmVkU21hcnRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBmdW5kaW5nU291cmNlLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgICAgICAgICAuLi4oaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgJiYgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MpLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICAgICAgICAgIGlmIChwYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZW5kZXIoYCMke2NvbnRhaW5lcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWhhc1JlbmRlcmVkU21hcnRCdXR0b24pIHtcbiAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvbkhvc3RlZENoZWNrb3V0QXBwcm92ZShcbiAgICAgICAgZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgb25Db21wbGV0ZT86ICgpID0+IHZvaWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICghZGF0YS5vcmRlcklEKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYXJ0ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgb3JkZXJEZXRhaWxzID0gYXdhaXQgYWN0aW9ucy5vcmRlci5nZXQoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcblxuICAgICAgICAgICAgaWYgKGNhcnQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3Moc2hpcHBpbmdBZGRyZXNzKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7fSwgeyBwYXJhbXM6IHsgbWV0aG9kSWQgfSB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChtZXRob2RJZCwgZGF0YS5vcmRlcklEKTtcblxuICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUgJiYgdHlwZW9mIG9uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBjaXR5OiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnN0YXRlLFxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW5mbzogd2UgdXNlIHRoZSBzYW1lIGFkZHJlc3MgdG8gZmlsbCBiaWxsaW5nIGFuZCBzaGlwcGluZyBhZGRyZXNzZXMgdG8gaGF2ZSB2YWxpZCBxdW90YSBvbiBCRSBmb3Igb3JkZXIgdXBkYXRpbmcgcHJvY2Vzc1xuICAgICAgICAgICAgLy8gb24gdGhpcyBzdGFnZSB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byB2YWxpZCBjdXN0b21lcidzIGFkZHJlc3MgZXhjZXB0IHNoaXBwaW5nIGRhdGFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhhZGRyZXNzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coXG4gICAgICAgICAgICBkYXRhLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24uaWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub25FcnJvcihlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ3VzdG9tZXJTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtY3JlZGl0LWN1c3RvbWVyLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lclN0cmF0ZWd5OiBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVyU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lclN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lclN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNlY3JlZGl0JyB9LFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyQ3JlZGVudGlhbHMsXG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VWZW5tb0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VWZW5tb0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLWN1c3RvbWVyLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lclN0cmF0ZWd5IGltcGxlbWVudHMgQ3VzdG9tZXJTdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXlwYWxjb21tZXJjZXZlbm1vLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNldmVubW8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZXZlbm1vXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZXZlbm1vLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNldmVubW8uY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBheXBhbGNvbW1lcmNldmVubW8ub25DbGljayAmJiB0eXBlb2YgcGF5cGFsY29tbWVyY2V2ZW5tby5vbkNsaWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2V2ZW5tby5vbkNsaWNrXCIgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFwYXltZW50TWV0aG9kKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIXBheXBhbFNkayB8fCAhcGF5cGFsU2RrLkJ1dHRvbnMgfHwgdHlwZW9mIHBheXBhbFNkay5CdXR0b25zICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICdbQkMgUGF5UGFsXTogUGF5UGFsIEJ1dHRvbiBjb3VsZCBub3QgYmUgcmVuZGVyZWQsIGR1ZSB0byBpc3N1ZXMgd2l0aCBsb2FkaW5nIFBheVBhbCBTREsnLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIHBheXBhbGNvbW1lcmNldmVubW8pO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25JbihjcmVkZW50aWFsczogQ3VzdG9tZXJDcmVkZW50aWFscywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihjcmVkZW50aWFscywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbk91dChvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihvcHRpb25zKTtcbiAgICB9XG5cbiAgICBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBvcHRpb25zPy5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrPy4oKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNldmVubW86IFBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25DbGljayB9ID0gcGF5cGFsY29tbWVyY2V2ZW5tbztcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuRlVORElORy5WRU5NTyxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoe1xuICAgICAgICAgICAgICAgIC4uLmNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgICAgIGhlaWdodDogRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdwYXlwYWxjb21tZXJjZXZlbm1vJyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgICAgICAuLi4ob25DbGljayAmJiB7IG9uQ2xpY2s6ICgpID0+IG9uQ2xpY2soKSB9KSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxCdXR0b25SZW5kZXIgPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICBpZiAocGF5cGFsQnV0dG9uUmVuZGVyLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcGF5cGFsQnV0dG9uUmVuZGVyLnJlbmRlcihgIyR7Y29udGFpbmVyfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VWZW5tb0N1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtdmVubW8tY3VzdG9tZXItc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VWZW5tb0N1c3RvbWVyU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VWZW5tb0N1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdwYXlwYWxjb21tZXJjZXZlbm1vJyB9LFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyQ3JlZGVudGlhbHMsXG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBnZXRGYXN0bGFuZVN0eWxlcyxcbiAgICBQYXlQYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsQ29tbWVyY2VTZGssXG4gICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24sXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLWNvbW1lcmNlLXV0aWxzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlRmFzdGxhbmVDdXN0b21lckluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlRmFzdGxhbmVDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneSBpbXBsZW1lbnRzIEN1c3RvbWVyU3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VTZGs6IFBheVBhbENvbW1lcmNlU2RrLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlsczogUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlZmFzdGxhbmUgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwibWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICAgICAgY29uc3QgaXNUZXN0TW9kZUVuYWJsZWQgPSAhIXBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5pc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlO1xuXG4gICAgICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZVNkayA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsRmFzdGxhbmVTZGsoXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICAgICAgY2FydC5pZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShcbiAgICAgICAgICAgICAgICBwYXlwYWxGYXN0bGFuZVNkayxcbiAgICAgICAgICAgICAgICBpc1Rlc3RNb2RlRW5hYmxlZCxcbiAgICAgICAgICAgICAgICB0aGlzLmdldEZhc3RsYW5lU3R5bGVzKG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZWZhc3RsYW5lKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgIC8vIFRPRE86IGFkZCBsb2dnZXIgdG8gYmUgYWJsZSB0byBkZWJ1ZyBpc3N1ZXMgaWYgdGhlcmUgYW55XG4gICAgICAgICAgICAvLyBJbmZvOiBEbyBub3QgdGhyb3cgYW55dGhpbmcgaGVyZSB0byBhdm9pZCBibG9ja2luZyBjdXN0b21lciBmcm9tIHBhc3NpbmcgY2hlY2tvdXQgZmxvd1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25JbihjcmVkZW50aWFsczogQ3VzdG9tZXJDcmVkZW50aWFscywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihjcmVkZW50aWFscywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbk91dChvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihvcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KFxuICAgICAgICBvcHRpb25zPzogRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQsIGNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2ssIG1ldGhvZElkIH0gPVxuICAgICAgICAgICAgb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwiY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFja1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBhbmQgaXQgbXVzdCBiZSBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBzdGF0ZS5nZXRDdXN0b21lck9yVGhyb3coKTtcblxuICAgICAgICBpZiAoY3VzdG9tZXIuaXNHdWVzdCkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudE1ldGhvZEV4ZWN1dGVkICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGNoZWNrb3V0UGF5bWVudE1ldGhvZEV4ZWN1dGVkID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogYWRkIGxvZ2dlciB0byBiZSBhYmxlIHRvIGRlYnVnIGlzc3VlcyBpZiB0aGVyZSBhbnlcbiAgICAgICAgICAgICAgICAvLyBJbmZvOiBEbyBub3QgdGhyb3cgYW55dGhpbmcgaGVyZSB0byBhdm9pZCBibG9ja2luZyBjdXN0b21lciBmcm9tIHBhc3NpbmcgY2hlY2tvdXQgZmxvd1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQXV0aGVudGljYXRpb24gZmxvdyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmlkO1xuICAgICAgICBjb25zdCBjdXN0b21lciA9IHN0YXRlLmdldEN1c3RvbWVyKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3MoKTtcbiAgICAgICAgY29uc3QgY3VzdG9tZXJFbWFpbCA9IGN1c3RvbWVyPy5lbWFpbCB8fCBiaWxsaW5nQWRkcmVzcz8uZW1haWwgfHwgJyc7XG5cbiAgICAgICAgY29uc3QgeyBjdXN0b21lckNvbnRleHRJZCB9ID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMubG9va3VwQ3VzdG9tZXJPclRocm93KFxuICAgICAgICAgICAgY3VzdG9tZXJFbWFpbCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBhdXRoZW50aWNhdGlvblJlc3VsdCA9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy50cmlnZ2VyQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhcbiAgICAgICAgICAgICAgICBjdXN0b21lckNvbnRleHRJZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgaXNBdXRoZW50aWNhdGlvbkZsb3dDYW5jZWxlZCA9XG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdC5hdXRoZW50aWNhdGlvblN0YXRlID09PSBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUuQ0FOQ0VMRUQ7XG5cbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVDdXN0b21lckRhdGFTdGF0ZShtZXRob2RJZCwgYXV0aGVudGljYXRpb25SZXN1bHQpO1xuXG4gICAgICAgIGlmIChpc0F1dGhlbnRpY2F0aW9uRmxvd0NhbmNlbGVkKSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5yZW1vdmVTdG9yYWdlU2Vzc2lvbklkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy51cGRhdGVTdG9yYWdlU2Vzc2lvbklkKGNhcnRJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZUN1c3RvbWVyRGF0YVN0YXRlKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdDogUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgeyBhdXRoZW50aWNhdGlvblN0YXRlLCBhZGRyZXNzZXMsIGJpbGxpbmdBZGRyZXNzLCBzaGlwcGluZ0FkZHJlc3MsIGluc3RydW1lbnRzIH0gPVxuICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMubWFwUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YShcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgICAgICAgICBhZGRyZXNzZXMsXG4gICAgICAgICAgICBpbnN0cnVtZW50cyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGJpbGxpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNoaXBwaW5nQWRkcmVzcyAmJiBjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRTdGF0ZSA9IGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoXG4gICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICAgICAgdXBkYXRlZFN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgICAgICBjb25zdCB7IGlzRmFzdGxhbmVTaGlwcGluZ09wdGlvbkF1dG9TZWxlY3RFbmFibGVkIH0gPVxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICAgICAgY29uc3QgY29uc2lnbm1lbnRzID0gdXBkYXRlZFN0YXRlLmdldENvbnNpZ25tZW50cygpIHx8IFtdO1xuICAgICAgICAgICAgY29uc3QgYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zID0gY29uc2lnbm1lbnRzWzBdPy5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgfHwgW107XG4gICAgICAgICAgICBjb25zdCBmaXJzdFNoaXBwaW5nT3B0aW9uID0gYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zWzBdO1xuICAgICAgICAgICAgY29uc3QgcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiA9IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucy5maW5kKFxuICAgICAgICAgICAgICAgIChvcHRpb24pID0+IG9wdGlvbi5pc1JlY29tbWVuZGVkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIChyZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uIHx8IGZpcnN0U2hpcHBpbmdPcHRpb24pICYmXG4gICAgICAgICAgICAgICAgaXNGYXN0bGFuZVNoaXBwaW5nT3B0aW9uQXV0b1NlbGVjdEVuYWJsZWRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uSWQgPSByZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uPy5pZCB8fCBmaXJzdFNoaXBwaW5nT3B0aW9uLmlkO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBGYXN0bGFuZSBzdHlsaW5nIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0RmFzdGxhbmVTdHlsZXMoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNlZmFzdGxhbmU6IFBheVBhbENvbW1lcmNlRmFzdGxhbmVDdXN0b21lckluaXRpYWxpemVPcHRpb25zIHwgdW5kZWZpbmVkLFxuICAgICk6IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHsgZmFzdGxhbmVTdHlsZXMsIGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZCB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgcmV0dXJuIGdldEZhc3RsYW5lU3R5bGVzKFxuICAgICAgICAgICAgaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkID8gZmFzdGxhbmVTdHlsZXMgOiB7fSxcbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlZmFzdGxhbmU/LnN0eWxlcyxcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlRmFzdGxhbmVVdGlscyxcbiAgICBjcmVhdGVQYXlQYWxDb21tZXJjZVNkayxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtY29tbWVyY2UtdXRpbHMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUtY3VzdG9tZXItc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlU2RrKCksXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlRmFzdGxhbmVVdGlscygpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdwYXlwYWxjb21tZXJjZWFjY2VsZXJhdGVkY2hlY2tvdXQnIH0sIC8vIHRoaXMgbWV0aG9kIGlkIHdpbGwgYmUgcHJvdmlkZWQgZm9yIHVzZXJzIGZyb20gdGVzdCBncm91cFxuICAgIHsgaWQ6ICdwYXlwYWxjb21tZXJjZWNyZWRpdGNhcmRzJyB9LCAvLyB0aGlzIG1ldGhvZCBpZCB3aWxsIGJlIHByb3ZpZGVkIGZvciB1c2VycyBmcm9tIGNvbnRyb2wgZ3JvdXBcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VCdXR0b25Jbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZUJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1idXR0b24taW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VCdXR0b25TdHJhdGVneSBpbXBsZW1lbnRzIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXlwYWxjb21tZXJjZSwgY29udGFpbmVySWQsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IGlzQnV5Tm93RmxvdyA9IEJvb2xlYW4ocGF5cGFsY29tbWVyY2U/LmJ1eU5vd0luaXRpYWxpemVPcHRpb25zKTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNCdXlOb3dGbG93ICYmICFwYXlwYWxjb21tZXJjZS5jdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZS5jdXJyZW5jeUNvZGVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc0J1eU5vd0Zsb3cgJiZcbiAgICAgICAgICAgIHR5cGVvZiBwYXlwYWxjb21tZXJjZS5idXlOb3dJbml0aWFsaXplT3B0aW9ucz8uZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5ICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNCdXlOb3dGbG93KSB7XG4gICAgICAgICAgICAvLyBJbmZvOiBkZWZhdWx0IGNoZWNrb3V0IHNob3VsZCBub3QgYmUgbG9hZGVkIGZvciBCdXlOb3cgZmxvdyxcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZXJlIGlzIG5vIGNoZWNrb3V0IHNlc3Npb24gYXZhaWxhYmxlIGZvciB0aGF0LlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluZm86IHdlIGFyZSB1c2luZyBwcm92aWRlZCBjdXJyZW5jeSBjb2RlIGZvciBidXkgbm93IGNhcnQsXG4gICAgICAgIC8vIGJlY2F1c2UgY2hlY2tvdXQgc2Vzc2lvbiBpcyBub3QgYXZhaWxhYmxlIGJlZm9yZSBidXkgbm93IGNhcnQgY3JlYXRpb24sXG4gICAgICAgIC8vIGhlbmNlIGFwcGxpY2F0aW9uIHdpbGwgdGhyb3cgYW4gZXJyb3Igb24gZ2V0Q2FydE9yVGhyb3cgbWV0aG9kIGNhbGxcbiAgICAgICAgY29uc3QgY3VycmVuY3lDb2RlID0gaXNCdXlOb3dGbG93XG4gICAgICAgICAgICA/IHBheXBhbGNvbW1lcmNlLmN1cnJlbmN5Q29kZVxuICAgICAgICAgICAgOiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkLCBjdXJyZW5jeUNvZGUsIGZhbHNlKTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihjb250YWluZXJJZCwgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlLCBpc0J1eU5vd0Zsb3cpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBjb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxjb21tZXJjZTogUGF5UGFsQ29tbWVyY2VCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgaXNCdXlOb3dGbG93PzogYm9vbGVhbixcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgc3R5bGUsIG9uQ29tcGxldGUsIG9uRWxpZ2liaWxpdHlGYWlsdXJlIH0gPSBwYXlwYWxjb21tZXJjZTtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLCBpc0FwcFN3aXRjaEVuYWJsZWQgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgLi4uKCFpc0J1eU5vd0Zsb3cgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkKSAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGFwcFN3aXRjaFdoZW5BdmFpbGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT4gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcigncGF5cGFsY29tbWVyY2UnKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXlOb3dGbG93Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVDbGljayhidXlOb3dJbml0aWFsaXplT3B0aW9ucyksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBob3N0ZWRDaGVja291dENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIC4uLighaXNBcHBTd2l0Y2hFbmFibGVkICYmIHtcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMub25Ib3N0ZWRDaGVja291dEFwcHJvdmUoZGF0YSwgYWN0aW9ucywgbWV0aG9kSWQsIG9uQ29tcGxldGUpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuRlVORElORy5QQVlQQUwsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlKSxcbiAgICAgICAgICAgIC4uLmRlZmF1bHRDYWxsYmFja3MsXG4gICAgICAgICAgICAuLi4oYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMgJiYgYnV5Tm93Rmxvd0NhbGxiYWNrcyksXG4gICAgICAgICAgICAuLi4oaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgJiYgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChwYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmhhc1JldHVybmVkPy4oKSAmJiB0aGlzLmlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkKSkge1xuICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZXN1bWU/LigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b24ucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChvbkVsaWdpYmlsaXR5RmFpbHVyZSAmJiB0eXBlb2Ygb25FbGlnaWJpbGl0eUZhaWx1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRWxpZ2liaWxpdHlGYWlsdXJlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVySWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/OiBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBidXlOb3dDYXJ0ID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyhcbiAgICAgICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoYnV5Tm93Q2FydC5pZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKFxuICAgICAgICBkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBvbkNvbXBsZXRlPzogKCkgPT4gdm9pZCxcbiAgICApOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgaWYgKCFkYXRhLm9yZGVySUQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBvcmRlckRldGFpbHMgPSBhd2FpdCBhY3Rpb25zLm9yZGVyLmdldCgpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3MpO1xuXG4gICAgICAgICAgICBpZiAoY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt9LCB7IHBhcmFtczogeyBtZXRob2RJZCB9IH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG1ldGhvZElkLCBkYXRhLm9yZGVySUQpO1xuXG4gICAgICAgICAgICBpZiAob25Db21wbGV0ZSAmJiB0eXBlb2Ygb25Db21wbGV0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEZJWE1FOiBEbyB3ZSByZWFsbHkgbmVlZCB0byByZXR1cm4gdHJ1ZSBoZXJlP1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBjaXR5OiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnN0YXRlLFxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW5mbzogd2UgdXNlIHRoZSBzYW1lIGFkZHJlc3MgdG8gZmlsbCBiaWxsaW5nIGFuZCBzaGlwcGluZyBhZGRyZXNzZXMgdG8gaGF2ZSB2YWxpZCBxdW90YSBvbiBCRSBmb3Igb3JkZXIgdXBkYXRpbmcgcHJvY2Vzc1xuICAgICAgICAgICAgLy8gb24gdGhpcyBzdGFnZSB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byB2YWxpZCBjdXN0b21lcidzIGFkZHJlc3MgYWNjZXB0IHNoaXBwaW5nIGRhdGFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhhZGRyZXNzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyhcbiAgICAgICAgICAgIGRhdGEuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbi5pZCxcbiAgICAgICAgKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheVBhbCBBcHBTd2l0Y2ggZW5hYmxpbmcgaGFuZGxpbmdcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5pc0FwcFN3aXRjaEVuYWJsZWQgfHwgZmFsc2U7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQnV0dG9uU3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtYnV0dG9uLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VCdXR0b25TdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25TdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZUJ1dHRvblN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VCdXR0b25TdHJhdGVneSwgW3sgaWQ6ICdwYXlwYWxjb21tZXJjZScgfV0pO1xuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyxcbiAgICBNZXNzYWdpbmdPcHRpb25zLFxuICAgIFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxDb21tZXJjZVNkayxcbiAgICBQYXlQYWxNZXNzYWdlc1Nkayxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtY29tbWVyY2UtdXRpbHMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbiAgICBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1idXR0b24taW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VDcmVkaXRCdXR0b25TdHJhdGVneSBpbXBsZW1lbnRzIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlU2RrOiBQYXlQYWxDb21tZXJjZVNkayxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsY29tbWVyY2VjcmVkaXQsIGNvbnRhaW5lcklkLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGU6IHByb3ZpZGVkQ3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVySWQsXG4gICAgICAgIH0gPSBwYXlwYWxjb21tZXJjZWNyZWRpdCB8fCB7fTtcblxuICAgICAgICBjb25zdCBpc0J1eU5vd0Zsb3cgPSAhIWJ1eU5vd0luaXRpYWxpemVPcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2VjcmVkaXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWNyZWRpdFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0J1eU5vd0Zsb3cgJiYgIXByb3ZpZGVkQ3VycmVuY3lDb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXQuY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaXNCdXlOb3dGbG93ICYmXG4gICAgICAgICAgICB0eXBlb2YgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWNyZWRpdC5idXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHlcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzQnV5Tm93Rmxvdykge1xuICAgICAgICAgICAgLy8gSW5mbzogZGVmYXVsdCBjaGVja291dCBzaG91bGQgbm90IGJlIGxvYWRlZCBmb3IgQnV5Tm93IGZsb3csXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGVyZSBpcyBubyBjaGVja291dCBzZXNzaW9uIGF2YWlsYWJsZSBmb3IgdGhhdC5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIC8vIEluZm86IHdlIGFyZSB1c2luZyBwcm92aWRlZCBjdXJyZW5jeSBjb2RlIGZvciBidXkgbm93IGNhcnQsXG4gICAgICAgIC8vIGJlY2F1c2UgY2hlY2tvdXQgc2Vzc2lvbiBpcyBub3QgYXZhaWxhYmxlIGJlZm9yZSBidXkgbm93IGNhcnQgY3JlYXRpb24sXG4gICAgICAgIC8vIGhlbmNlIGFwcGxpY2F0aW9uIHdpbGwgdGhyb3cgYW4gZXJyb3Igb24gZ2V0Q2FydE9yVGhyb3cgbWV0aG9kIGNhbGxcbiAgICAgICAgY29uc3QgY3VycmVuY3lDb2RlID0gaXNCdXlOb3dGbG93XG4gICAgICAgICAgICA/IHByb3ZpZGVkQ3VycmVuY3lDb2RlXG4gICAgICAgICAgICA6IHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQsIGN1cnJlbmN5Q29kZSwgZmFsc2UpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKGNvbnRhaW5lcklkLCBtZXRob2RJZCwgcGF5cGFsY29tbWVyY2VjcmVkaXQpO1xuXG4gICAgICAgIC8vIFRPRE86IHJlbW92ZSBiYW5uZXIgcmVuZGVyaW5nIGltcGxlbWVudGF0aW9uIGluIHRoaXMgZmlsZSB3aGVuIFBBWVBBTC01NTU3LkhpZGVfcHBjX2Jhbm5lcl9pbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHJvbGxlZCBvdXQgdG8gMTAwJVxuICAgICAgICBjb25zdCBmZWF0dXJlcyA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXM7XG4gICAgICAgIGNvbnN0IGlzQmFubmVySW1wbGVtZW50YXRpb25EaXNhYmxlZCA9XG4gICAgICAgICAgICBmZWF0dXJlc1snUEFZUEFMLTU1NTcuSGlkZV9wcGNfYmFubmVyX2ltcGxlbWVudGF0aW9uJ10gPz8gZmFsc2U7XG5cbiAgICAgICAgaWYgKGlzQmFubmVySW1wbGVtZW50YXRpb25EaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWVzc2FnaW5nQ29udGFpbmVyID1cbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lcklkICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1lc3NhZ2luZ0NvbnRhaW5lcklkKTtcblxuICAgICAgICBpZiAoY3VycmVuY3lDb2RlICYmIG1lc3NhZ2luZ0NvbnRhaW5lcikge1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICAgICAgY29uc3QgeyBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiA9IFtdIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgICAgIGNvbnN0IGJhbm5lckNvbmZpZ3VyYXRpb24gPVxuICAgICAgICAgICAgICAgIHBheXBhbEJOUExDb25maWd1cmF0aW9uICYmIHBheXBhbEJOUExDb25maWd1cmF0aW9uLmZpbmQoKHsgaWQgfSkgPT4gaWQgPT09ICdjYXJ0Jyk7XG5cbiAgICAgICAgICAgIGlmICghYmFubmVyQ29uZmlndXJhdGlvbj8uc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyBjb2RlIHdoZW4gZGF0YSBhdHRyaWJ1dGVzIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBiYW5uZXIgY29udGFpbmVyIGluIGNvbnRlbnQgc2VydmljZVxuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1wcC1zdHlsZS1sb2dvLXR5cGUnKTtcbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcHAtc3R5bGUtbG9nby1wb3NpdGlvbicpO1xuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1wcC1zdHlsZS10ZXh0LWNvbG9yJyk7XG4gICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBwLXN0eWxlLXRleHQtc2l6ZScpO1xuXG4gICAgICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlU2RrLmdldFBheVBhbE1lc3NhZ2VzKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhpcy5yZW5kZXJNZXNzYWdlcyhwYXlwYWxTZGssIG1lc3NhZ2luZ0NvbnRhaW5lcklkLCBiYW5uZXJDb25maWd1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBjb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxjb21tZXJjZWNyZWRpdDogUGF5UGFsQ29tbWVyY2VDcmVkaXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgc3R5bGUsIG9uQ29tcGxldGUsIG9uRWxpZ2liaWxpdHlGYWlsdXJlIH0gPVxuICAgICAgICAgICAgcGF5cGFsY29tbWVyY2VjcmVkaXQ7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCwgaXNBcHBTd2l0Y2hFbmFibGVkIH0gPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoJ3BheXBhbGNvbW1lcmNlY3JlZGl0JyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV5Tm93Rmxvd0NhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlQ2xpY2soYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICAuLi4oIWlzQXBwU3dpdGNoRW5hYmxlZCAmJiB7XG4gICAgICAgICAgICAgICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICAgICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nT3B0aW9uc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGRhdGEsIGFjdGlvbnMsIG1ldGhvZElkLCBvbkNvbXBsZXRlKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBmdW5kaW5nU291cmNlcyA9IFtwYXlwYWxTZGsuRlVORElORy5QQVlMQVRFUiwgcGF5cGFsU2RrLkZVTkRJTkcuQ1JFRElUXTtcbiAgICAgICAgbGV0IGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSBmYWxzZTtcblxuICAgICAgICBmdW5kaW5nU291cmNlcy5mb3JFYWNoKChmdW5kaW5nU291cmNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhc1JlbmRlcmVkU21hcnRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBmdW5kaW5nU291cmNlLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlKSxcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zICYmIGJ1eU5vd0Zsb3dDYWxsYmFja3MpLFxuICAgICAgICAgICAgICAgICAgICAuLi4oaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgJiYgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MpLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICAgICAgICAgIGlmIChwYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZW5kZXIoYCMke2NvbnRhaW5lcklkfWApO1xuICAgICAgICAgICAgICAgICAgICBoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9uRWxpZ2liaWxpdHlGYWlsdXJlICYmIHR5cGVvZiBvbkVsaWdpYmlsaXR5RmFpbHVyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBvbkVsaWdpYmlsaXR5RmFpbHVyZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uKSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVySWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/OiBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBidXlOb3dDYXJ0ID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyhcbiAgICAgICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoYnV5Tm93Q2FydC5pZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKFxuICAgICAgICBkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBvbkNvbXBsZXRlPzogKCkgPT4gdm9pZCxcbiAgICApOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgaWYgKCFkYXRhLm9yZGVySUQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBvcmRlckRldGFpbHMgPSBhd2FpdCBhY3Rpb25zLm9yZGVyLmdldCgpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3MpO1xuXG4gICAgICAgICAgICBpZiAoY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt9LCB7IHBhcmFtczogeyBtZXRob2RJZCB9IH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG1ldGhvZElkLCBkYXRhLm9yZGVySUQpO1xuXG4gICAgICAgICAgICBpZiAob25Db21wbGV0ZSAmJiB0eXBlb2Ygb25Db21wbGV0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEZJWE1FOiBEbyB3ZSByZWFsbHkgbmVlZCB0byByZXR1cm4gdHJ1ZSBoZXJlP1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBjaXR5OiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnN0YXRlLFxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW5mbzogd2UgdXNlIHRoZSBzYW1lIGFkZHJlc3MgdG8gZmlsbCBiaWxsaW5nIGFuZCBzaGlwcGluZyBhZGRyZXNzZXMgdG8gaGF2ZSB2YWxpZCBxdW90YSBvbiBCRSBmb3Igb3JkZXIgdXBkYXRpbmcgcHJvY2Vzc1xuICAgICAgICAgICAgLy8gb24gdGhpcyBzdGFnZSB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byB2YWxpZCBjdXN0b21lcidzIGFkZHJlc3MgYWNjZXB0IHNoaXBwaW5nIGRhdGFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhhZGRyZXNzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyhcbiAgICAgICAgICAgIGRhdGEuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbi5pZCxcbiAgICAgICAgKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlck1lc3NhZ2VzKFxuICAgICAgICBwYXlwYWxNZXNzYWdlc1NkazogUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIGJhbm5lckNvbmZpZ3VyYXRpb246IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2hlY2tvdXQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDaGVja291dE9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxNZXNzYWdlc09wdGlvbnM6IE1lc3NhZ2luZ09wdGlvbnMgPSB7XG4gICAgICAgICAgICBhbW91bnQ6IGNoZWNrb3V0Lm91dHN0YW5kaW5nQmFsYW5jZSxcbiAgICAgICAgICAgIHBsYWNlbWVudDogJ2NhcnQnLFxuICAgICAgICAgICAgc3R5bGU6IGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcoYmFubmVyQ29uZmlndXJhdGlvbiksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXMgPSBwYXlwYWxNZXNzYWdlc1Nkay5NZXNzYWdlcyhwYXlwYWxNZXNzYWdlc09wdGlvbnMpO1xuXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzLnJlbmRlcihgIyR7bWVzc2FnaW5nQ29udGFpbmVySWR9YCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgY3JlYXRlUGF5UGFsQ29tbWVyY2VTZGsgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRCdXR0b25TdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtYnV0dG9uLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VDcmVkaXRCdXR0b25TdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VDcmVkaXRCdXR0b25TdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VTZGsoKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VDcmVkaXRCdXR0b25TdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdwYXlwYWxjb21tZXJjZWNyZWRpdCcgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zLFxuICAgIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG4gICAgU3R5bGVCdXR0b25Db2xvcixcbn0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlVmVubW9CdXR0b25Jbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLWJ1dHRvbi1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uU3RyYXRlZ3kgaW1wbGVtZW50cyBDaGVja291dEJ1dHRvblN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlVmVubW9CdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXlwYWxjb21tZXJjZXZlbm1vLCBjb250YWluZXJJZCwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHsgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsIGN1cnJlbmN5Q29kZTogcHJvdmlkZWRDdXJyZW5jeUNvZGUgfSA9XG4gICAgICAgICAgICBwYXlwYWxjb21tZXJjZXZlbm1vIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGlzQnV5Tm93RmxvdyA9ICEhYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZXZlbm1vKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2V2ZW5tb1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0J1eU5vd0Zsb3cgJiYgIXByb3ZpZGVkQ3VycmVuY3lDb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2V2ZW5tby5jdXJyZW5jeUNvZGVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc0J1eU5vd0Zsb3cgJiZcbiAgICAgICAgICAgIHR5cGVvZiBidXlOb3dJbml0aWFsaXplT3B0aW9ucz8uZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5ICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNldmVubW8uYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0J1eU5vd0Zsb3cpIHtcbiAgICAgICAgICAgIC8vIEluZm86IGRlZmF1bHQgY2hlY2tvdXQgc2hvdWxkIG5vdCBiZSBsb2FkZWQgZm9yIEJ1eU5vdyBmbG93LFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlcmUgaXMgbm8gY2hlY2tvdXQgc2Vzc2lvbiBhdmFpbGFibGUgZm9yIHRoYXQuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5mbzogd2UgYXJlIHVzaW5nIHByb3ZpZGVkIGN1cnJlbmN5IGNvZGUgZm9yIGJ1eSBub3cgY2FydCxcbiAgICAgICAgLy8gYmVjYXVzZSBjaGVja291dCBzZXNzaW9uIGlzIG5vdCBhdmFpbGFibGUgYmVmb3JlIGJ1eSBub3cgY2FydCBjcmVhdGlvbixcbiAgICAgICAgLy8gaGVuY2UgYXBwbGljYXRpb24gd2lsbCB0aHJvdyBhbiBlcnJvciBvbiBnZXRDYXJ0T3JUaHJvdyBtZXRob2QgY2FsbFxuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBpc0J1eU5vd0Zsb3dcbiAgICAgICAgICAgID8gcHJvdmlkZWRDdXJyZW5jeUNvZGVcbiAgICAgICAgICAgIDogdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCwgY3VycmVuY3lDb2RlLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oY29udGFpbmVySWQsIG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZXZlbm1vKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgY29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsY29tbWVyY2V2ZW5tbzogUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLCBzdHlsZSwgb25FbGlnaWJpbGl0eUZhaWx1cmUgfSA9IHBheXBhbGNvbW1lcmNldmVubW87XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGZ1bmRpbmdTb3VyY2UgPSBwYXlwYWxTZGsuRlVORElORy5WRU5NTztcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcigncGF5cGFsY29tbWVyY2V2ZW5tbycpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1eU5vd0Zsb3dDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuZ2V0VmFsaWRWZW5tb0J1dHRvblN0eWxlcyhzdHlsZSksXG4gICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgLi4uKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zICYmIGJ1eU5vd0Zsb3dDYWxsYmFja3MpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvblJlbmRlciA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChwYXlwYWxCdXR0b25SZW5kZXIuaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICBwYXlwYWxCdXR0b25SZW5kZXIucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgfSBlbHNlIGlmIChvbkVsaWdpYmlsaXR5RmFpbHVyZSAmJiB0eXBlb2Ygb25FbGlnaWJpbGl0eUZhaWx1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRWxpZ2liaWxpdHlGYWlsdXJlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVySWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRWYWxpZFZlbm1vQnV0dG9uU3R5bGVzKHN0eWxlOiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMgfCB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgdmFsaWRCdXR0b25TdHlsZSA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShzdHlsZSk7XG5cbiAgICAgICAgaWYgKHZhbGlkQnV0dG9uU3R5bGUuY29sb3IgPT09IFN0eWxlQnV0dG9uQ29sb3IuZ29sZCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi52YWxpZEJ1dHRvblN0eWxlLFxuICAgICAgICAgICAgICAgIGNvbG9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbGlkQnV0dG9uU3R5bGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/OiBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBidXlOb3dDYXJ0ID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyhcbiAgICAgICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoYnV5Tm93Q2FydC5pZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvblN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLWJ1dHRvbi1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlVmVubW9CdXR0b25TdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvblN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlVmVubW9CdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlVmVubW9CdXR0b25TdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdwYXlwYWxjb21tZXJjZXZlbm1vJyB9LFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25PcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMtYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3lcbiAgICBpbXBsZW1lbnRzIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lcbntcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzLCBjb250YWluZXJJZCwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGFwbSxcbiAgICAgICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBwcm92aWRlZEN1cnJlbmN5Q29kZSxcbiAgICAgICAgfSA9IHBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGlzQnV5Tm93RmxvdyA9ICEhYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFhcG0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcy5hcG1cIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNCdXlOb3dGbG93ICYmICFwcm92aWRlZEN1cnJlbmN5Q29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzLmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzQnV5Tm93RmxvdyAmJlxuICAgICAgICAgICAgdHlwZW9mIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0J1eU5vd0Zsb3cpIHtcbiAgICAgICAgICAgIC8vIEluZm86IGRlZmF1bHQgY2hlY2tvdXQgc2hvdWxkIG5vdCBiZSBsb2FkZWQgZm9yIEJ1eU5vdyBmbG93LFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlcmUgaXMgbm8gY2hlY2tvdXQgc2Vzc2lvbiBhdmFpbGFibGUgZm9yIHRoYXQuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5mbzogd2UgYXJlIHVzaW5nIHByb3ZpZGVkIGN1cnJlbmN5IGNvZGUgZm9yIGJ1eSBub3cgY2FydCxcbiAgICAgICAgLy8gYmVjYXVzZSBjaGVja291dCBzZXNzaW9uIGlzIG5vdCBhdmFpbGFibGUgYmVmb3JlIGJ1eSBub3cgY2FydCBjcmVhdGlvbixcbiAgICAgICAgLy8gaGVuY2UgYXBwbGljYXRpb24gd2lsbCB0aHJvdyBhbiBlcnJvciBvbiBnZXRDYXJ0T3JUaHJvdyBtZXRob2QgY2FsbFxuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBpc0J1eU5vd0Zsb3dcbiAgICAgICAgICAgID8gcHJvdmlkZWRDdXJyZW5jeUNvZGVcbiAgICAgICAgICAgIDogdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCwgY3VycmVuY3lDb2RlLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oY29udGFpbmVySWQsIG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcyk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzOiBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc0J1dHRvbk9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgYXBtLCBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgc3R5bGUsIG9uRWxpZ2liaWxpdHlGYWlsdXJlIH0gPVxuICAgICAgICAgICAgcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHM7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGlzQXZhaWxhYmxlRnVuZGluZ1NvdXJjZSA9IE9iamVjdC52YWx1ZXMocGF5cGFsU2RrLkZVTkRJTkcpLmluY2x1ZGVzKGFwbSk7XG5cbiAgICAgICAgaWYgKCFpc0F2YWlsYWJsZUZ1bmRpbmdTb3VyY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgUGF5UGFsIGJ1dHRvbiBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcy5hcG1cIiBhcmd1bWVudCBpcyBub3QgdmFsaWQgZnVuZGluZyBzb3VyY2UuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcbiAgICAgICAgICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2QnLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV5Tm93Rmxvd0NhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlQ2xpY2soYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IGFwbSxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGUpLFxuICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgIC4uLihidXlOb3dJbml0aWFsaXplT3B0aW9ucyAmJiBidXlOb3dGbG93Q2FsbGJhY2tzKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxCdXR0b25SZW5kZXIgPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICBpZiAocGF5cGFsQnV0dG9uUmVuZGVyLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcGF5cGFsQnV0dG9uUmVuZGVyLnJlbmRlcihgIyR7Y29udGFpbmVySWR9YCk7XG4gICAgICAgIH0gZWxzZSBpZiAob25FbGlnaWJpbGl0eUZhaWx1cmUgJiYgdHlwZW9mIG9uRWxpZ2liaWxpdHlGYWlsdXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVsaWdpYmlsaXR5RmFpbHVyZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcklkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPzogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChidXlOb3dJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYnV5Tm93Q2FydCA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coXG4gICAgICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KGJ1eU5vd0NhcnQuaWQpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy1idXR0b24tc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc0J1dHRvblN0cmF0ZWd5OiBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc0J1dHRvblN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc0J1dHRvblN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzJyB9LFxuXSk7XG4iXSwibmFtZXMiOlsiTWlzc2luZ0RhdGFFcnJvclR5cGUiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwidG9SZXNvbHZhYmxlTW9kdWxlIiwibW9kdWxlIiwicmVzb2x2ZUlkcyIsImNvbnNvbGUiLCJsb2ciLCJPYmplY3QiLCJhc3NpZ24iLCJkIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN0YW5kYXJkRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN1cGVyIiwibmFtZSIsInR5cGUiLCJzZXRQcm90b3R5cGVPZiIsInRoaXMiLCJfX3Byb3RvX18iLCJjYXB0dXJlU3RhY2tUcmFjZSIsInN0YWNrIiwiUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IiLCJNaXNzaW5nRGF0YUVycm9yIiwic3VidHlwZSIsIk1pc3NpbmdCaWxsaW5nQWRkcmVzcyIsIk1pc3NpbmdDYXJ0IiwiTWlzc2luZ0NvbnNpZ25tZW50cyIsIk1pc3NpbmdDaGVja291dCIsIk1pc3NpbmdDdXN0b21lciIsIk1pc3NpbmdDaGVja291dENvbmZpZyIsIk1pc3NpbmdPcmRlckNvbmZpZyIsIk1pc3NpbmdPcmRlciIsIk1pc3NpbmdPcmRlcklkIiwiTWlzc2luZ1BheW1lbnQiLCJNaXNzaW5nUGF5bWVudFRva2VuIiwiTWlzc2luZ1BheW1lbnRNZXRob2QiLCJNaXNzaW5nU2hpcHBpbmdBZGRyZXNzIiwiZ2V0RXJyb3JNZXNzYWdlIiwiUGF5UGFsQ29tbWVyY2VTZGsiLCJzY3JpcHRMb2FkZXIiLCJ3aW5kb3ciLCJnZXRQYXlQYWxGYXN0bGFuZVNkayIsInBheW1lbnRNZXRob2QiLCJjdXJyZW5jeUNvZGUiLCJzZXNzaW9uSWQiLCJwYXlwYWxGYXN0bGFuZVNkayIsImNvbmZpZyIsImdldFBheVBhbEZhc3RsYW5lU2RrQ29uZmlndXJhdGlvbiIsImxvYWRQYXlQYWxTZGsiLCJnZXRQYXlQYWxHb29nbGVQYXlTZGsiLCJpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlIiwiZm9yY2VMb2FkIiwicGF5cGFsR29vZ2xlUGF5IiwicGF5cGFsU2RrU2NyaXB0Q29uZmlnIiwiZ2V0UGF5UGFsR29vZ2xlUGF5U2RrU2NyaXB0Q29uZmlnT3JUaHJvdyIsImdldFBheVBhbEFwbXNTZGsiLCJwYXlwYWxBcG1zIiwiZ2V0UGF5UGFsQXBtU2RrQ29uZmlndXJhdGlvbiIsImdldFBheVBhbE1lc3NhZ2VzIiwicGF5cGFsTWVzc2FnZXMiLCJwYXlwYWxTZGtNZXNzYWdlc0NvbmZpZyIsImdldFBheVBhbFNka01lc3NhZ2VzQ29uZmlndXJhdGlvbiIsIm9wdGlvbnMiLCJhdHRyaWJ1dGVzIiwic2NyaXB0T3B0aW9ucyIsInRyYW5zZm9ybUNvbmZpZyIsInNjcmlwdEF0dHJpYnV0ZXMiLCJzY3JpcHRTcmMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ0b1N0cmluZyIsImxvYWRTY3JpcHQiLCJhc3luYyIsImNsaWVudFRva2VuIiwiaW5pdGlhbGl6YXRpb25EYXRhIiwiY2xpZW50SWQiLCJpbnRlbnQiLCJtZXJjaGFudElkIiwiYXR0cmlidXRpb25JZCIsImNvbW1pdCIsImNvbXBvbmVudHMiLCJjdXJyZW5jeSIsInJlcGxhY2UiLCJidXllckNvdW50cnkiLCJpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCIsImlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUiLCJhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzIiwiZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMiLCJlbmFibGVBUE1zRnVuZGluZyIsImRpc2FibGVBUE1zRnVuZGluZyIsImZpbHRlciIsImFwbSIsImluY2x1ZGVzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwidHJhbnNmb3JtZWRDb25maWciLCJrZXlzIiwiZm9yRWFjaCIsInZhbHVlIiwiQXJyYXkiLCJpc0FycmF5Iiwiam9pbiIsIkRFRkFVTFRfU1RZTEVTIiwic2l6ZSIsImNvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwiUk9UQVRJT05fQU5JTUFUSU9OIiwiTG9hZGluZ0luZGljYXRvciIsInN0eWxlcyIsImNvbnRhaW5lclN0eWxlcyIsImRlZmluZUFuaW1hdGlvbiIsImNvbnRhaW5lciIsImJ1aWxkQ29udGFpbmVyIiwiaW5kaWNhdG9yIiwiYnVpbGRJbmRpY2F0b3IiLCJhcHBlbmRDaGlsZCIsInNob3ciLCJwYXJlbnRJZCIsInBhcmVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJvcGFjaXR5IiwiaGlkZSIsImhhbmRsZVRyYW5zaXRpb25FbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNyZWF0ZUVsZW1lbnQiLCJkaXNwbGF5IiwiYm90dG9tIiwibGVmdCIsImhlaWdodCIsIndpZHRoIiwicG9zaXRpb24iLCJyaWdodCIsInRvcCIsInRyYW5zaXRpb24iLCJzZXRTdHlsZUF0dHJpYnV0ZSIsImJvcmRlclJhZGl1cyIsImJvcmRlciIsImJvcmRlckNvbG9yIiwibWFyZ2luIiwidHJhbnNmb3JtIiwidHJhbnNmb3JtU3R5bGUiLCJhbmltYXRpb24iLCJlbGVtZW50IiwiYXR0cnMiLCJrIiwic2V0UHJvcGVydHkiLCJpZCIsImhlYWQiLCJzaGVldCIsIkNTU1N0eWxlU2hlZXQiLCJpbnNlcnRSdWxlIiwiQnV5Tm93Q2FydENyZWF0aW9uRXJyb3IiLCJERUZBVUxUX1JFU1BPTlNFIiwiYm9keSIsImhlYWRlcnMiLCJzdGF0dXMiLCJSZXF1ZXN0RXJyb3IiLCJyZXNwb25zZSIsImVycm9ycyIsIkNhcnRTb3VyY2UiLCJMaWFiaWxpdHlTaGlmdEVudW0iLCJQYXlQYWxDb21tZXJjZUludGVudCIsIlN0eWxlQnV0dG9uTGFiZWwiLCJTdHlsZUJ1dHRvbkNvbG9yIiwiU3R5bGVCdXR0b25TaGFwZSIsIk5vbkluc3RhbnRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzIiwiUGF5UGFsT3JkZXJTdGF0dXMiLCJQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSIsImZvcm1Qb3N0ZXIiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwicGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyIiwicGF5cGFsQ29tbWVyY2VTY3JpcHRMb2FkZXIiLCJtZXRob2RJZCIsInByb3ZpZGVkQ3VycmVuY3lDb2RlIiwic3RhdGUiLCJnZXRTdGF0ZSIsImdldENhcnRPclRocm93IiwiY29kZSIsImdldFBheW1lbnRNZXRob2RPclRocm93IiwicGF5cGFsU2RrIiwiZ2V0UGF5UGFsU0RLIiwiZ2V0UGF5UGFsU2RrT3JUaHJvdyIsImNyZWF0ZUJ1eU5vd0NhcnRPclRocm93IiwiYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMiLCJjYXJ0UmVxdWVzdEJvZHkiLCJnZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkiLCJjcmVhdGVCdXlOb3dDYXJ0IiwiZXJyb3IiLCJjcmVhdGVPcmRlciIsInByb3ZpZGVySWQiLCJyZXF1ZXN0Qm9keSIsImNhcnRJZCIsIm9yZGVySWQiLCJjcmVhdGVPcmRlckNhcmRGaWVsZHMiLCJzZXR1cFRva2VuIiwidXBkYXRlT3JkZXIiLCJjYXJ0IiwiY29uc2lnbm1lbnQiLCJnZXRDb25zaWdubWVudHNPclRocm93IiwiYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zIiwic2VsZWN0ZWRTaGlwcGluZ09wdGlvbiIsIl9lcnJvciIsImdldE9yZGVyU3RhdHVzIiwidG9rZW5pemVQYXltZW50IiwicG9zdEZvcm0iLCJwYXltZW50X3R5cGUiLCJhY3Rpb24iLCJwcm92aWRlciIsIm9yZGVyX2lkIiwic291cmNlIiwiQnV5Tm93IiwiY2FydF9pZCIsInN1Ym1pdFBheW1lbnQiLCJnYXRld2F5SWQiLCJwYXltZW50RGF0YSIsImZvcm1hdHRlZFBheWxvYWQiLCJ2YXVsdF9wYXltZW50X2luc3RydW1lbnQiLCJzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudCIsImRldmljZV9pbmZvIiwibWV0aG9kX2lkIiwicGF5cGFsX2FjY291bnQiLCJnZXRTaGlwcGluZ09wdGlvbk9yVGhyb3ciLCJzZWxlY3RlZFNoaXBwaW5nT3B0aW9uSWQiLCJyZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uIiwiZmluZCIsIm9wdGlvbiIsImlzUmVjb21tZW5kZWQiLCJzaGlwcGluZ09wdGlvblRvU2VsZWN0IiwiZ2V0QWRkcmVzcyIsImFkZHJlc3MiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwicGhvbmUiLCJjb21wYW55IiwiYWRkcmVzczEiLCJhZGRyZXNzMiIsImNpdHkiLCJjb3VudHJ5Q29kZSIsInBvc3RhbENvZGUiLCJzdGF0ZU9yUHJvdmluY2UiLCJzdGF0ZU9yUHJvdmluY2VDb2RlIiwiY3VzdG9tRmllbGRzIiwiZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzIiwicGF5ZXIiLCJnaXZlbl9uYW1lIiwic3VybmFtZSIsImVtYWlsX2FkZHJlc3MiLCJhZGRyZXNzX2xpbmVfMSIsImFkZHJlc3NfbGluZV8yIiwiYWRtaW5fYXJlYV8yIiwiY291bnRyeV9jb2RlIiwicG9zdGFsX2NvZGUiLCJhZG1pbl9hcmVhXzEiLCJwaG9uZV9udW1iZXIiLCJuYXRpb25hbF9udW1iZXIiLCJnZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzIiwib3JkZXJEZXRhaWxzIiwicHVyY2hhc2VfdW5pdHMiLCJmdWxsX25hbWUiLCJzaGlwcGluZyIsInNwbGl0IiwiZ2V0VmFsaWRCdXR0b25TdHlsZSIsImxhYmVsIiwic2hhcGUiLCJ2YWxpZFN0eWxlcyIsImdldFZhbGlkSGVpZ2h0Iiwib21pdEJ5IiwiaXNOaWwiLCJyZW1vdmVFbGVtZW50IiwiZWxlbWVudElkIiwiSU5URVJOQUxfVVNFX09OTFkiLCJDb250ZW50VHlwZSIsIlNES19WRVJTSU9OX0hFQURFUlMiLCJQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIiLCJyZXF1ZXN0U2VuZGVyIiwidXJsIiwiSnNvbiIsInBvc3QiLCJwdXQiLCJQYXlQYWxDb21tZXJjZVNjcmlwdExvYWRlciIsImdldFBheVBhbFNka1NjcmlwdENvbmZpZ09yVGhyb3ciLCJsb2FkUGF5UGFsU0RLIiwicGF5cGFsIiwiaXNWZW5tb0VuYWJsZWQiLCJpc1BheVBhbENyZWRpdEF2YWlsYWJsZSIsImlzR29vZ2xlUGF5RW5hYmxlZCIsInNob3VsZEVuYWJsZUNhcmQiLCJlbmFibGVDYXJkRnVuZGluZyIsImVuYWJsZUNyZWRpdEZ1bmRpbmciLCJzaG91bGRFbmFibGVBUE1zIiwiZW5hYmxlVmVubW9GdW5kaW5nIiwiZ29vZ2xlUGF5Q29tcG9uZW50IiwiY2FyZEZpZWxkc0NvbXBvbmVudCIsImRpc2FibGVGdW5kaW5nIiwiZW5hYmxlRnVuZGluZyIsImdldEhvc3QiLCJjcmVhdGVGb3JtUG9zdGVyIiwiY3JlYXRlUmVxdWVzdFNlbmRlciIsImhvc3QiLCJnZXRTY3JpcHRMb2FkZXIiLCJMT0FESU5HX0lORElDQVRPUl9TVFlMRVMiLCJJbnZhbGlkQXJndW1lbnRFcnJvciIsIlBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciIsImludmFsaWRGaWVsZHMiLCJQYXltZW50TWV0aG9kSW52YWxpZEVycm9yIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSIsImluc3RydW1lbnQiLCJzaG91bGRTYXZlSW5zdHJ1bWVudCIsInNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQiLCJpc1ZhdWx0ZWRJbnN0cnVtZW50IiwiQm9vbGVhbiIsImluc3RydW1lbnRJZCIsIm1lc3NhZ2VzU3R5bGVzIiwibGF5b3V0IiwibG9nbyIsInJhdGlvIiwidGV4dCIsImlzQmFzZUluc3RydW1lbnQiLCJQYXlQYWxDb21tZXJjZVBheW1lbnRTdHJhdGVneSIsInBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIiwicGF5cGFsQ29tbWVyY2VTZGsiLCJsb2FkaW5nSW5kaWNhdG9yIiwiaW5pdGlhbGl6ZSIsInBheXBhbGNvbW1lcmNlIiwibG9hZFBheW1lbnRNZXRob2QiLCJiYW5uZXJDb250YWluZXJJZCIsInBheXBhbEJOUExDb25maWd1cmF0aW9uIiwiYmFubmVyQ29uZmlndXJhdGlvbiIsIk1lc3NhZ2VzIiwicmVuZGVyTWVzc2FnZXMiLCJsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyIiwib25Jbml0IiwicmVuZGVyQnV0dG9uIiwic2hvdWxkUmVuZGVyUGF5UGFsQnV0dG9uT25Jbml0aWFsaXphdGlvbiIsImV4ZWN1dGUiLCJwYXlsb2FkIiwicGF5bWVudCIsIm9yZGVyIiwib25FcnJvciIsImlzUGF5UGFsVmF1bHRlZEluc3RydW1lbnRQYXltZW50RGF0YSIsInBheW1lbnRQYXlsb2FkIiwicHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQiLCJwcmVwYXJlUGF5bWVudFBheWxvYWQiLCJzdWJtaXRPcmRlciIsImFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkIiwiaXNSZWRpcmVjdEFjdGlvbkVycm9yIiwicmVkaXJlY3RVcmwiLCJkYXRhIiwicmVkaXJlY3RfdXJsIiwiUHJvbWlzZSIsImxvY2F0aW9uIiwiaXNQcm92aWRlckVycm9yIiwiX3Jlc29sdmUiLCJyZWplY3QiLCJwYXlwYWxCdXR0b24iLCJjbG9zZSIsImhhbmRsZUVycm9yIiwiZmluYWxpemUiLCJkZWluaXRpYWxpemUiLCJyZXNvbHZlIiwicGF5cGFsT3JkZXJJZCIsInNob3VsZENvbmZpcm1JbnN0cnVtZW50IiwiaXNUcnVzdGVkVmF1bHRpbmdGbG93IiwiYmlncGF5X3Rva2VuIiwidG9rZW4iLCJwYXltZW50QnV0dG9uU3R5bGVzIiwiY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzIiwib25SZW5kZXJCdXR0b24iLCJvblZhbGlkYXRlIiwic3VibWl0Rm9ybSIsImJ1dHRvbk9wdGlvbnMiLCJpc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZCIsImFwcFN3aXRjaFdoZW5BdmFpbGFibGUiLCJmdW5kaW5nU291cmNlIiwiRlVORElORyIsIlBBWVBBTCIsIm9uQ2xpY2siLCJfIiwiYWN0aW9ucyIsImhhbmRsZUNsaWNrIiwib25BcHByb3ZlIiwiaGFuZGxlQXBwcm92ZSIsIm9uQ2FuY2VsIiwidG9nZ2xlTG9hZGluZ0luZGljYXRvciIsIkJ1dHRvbnMiLCJpc0VsaWdpYmxlIiwiaGFzUmV0dXJuZWQiLCJyZXN1bWUiLCJyZW5kZXIiLCJvcmRlcklEIiwiZmllbGRzVmFsdWVzIiwiZ2V0RmllbGRzVmFsdWVzIiwiaW5zdHJ1bWVudHMiLCJnZXRJbnN0cnVtZW50cyIsImZpbmRJbnN0cnVtZW50IiwiYmlncGF5VG9rZW4iLCJ0cnVzdGVkU2hpcHBpbmdBZGRyZXNzIiwiaXNMb2FkaW5nIiwicGF5cGFsTWVzc2FnZXNPcHRpb25zIiwiYW1vdW50IiwiZ2V0Q2hlY2tvdXRPclRocm93Iiwib3V0c3RhbmRpbmdCYWxhbmNlIiwicGxhY2VtZW50IiwiaXNQYXlwYWxDb21tZXJjZVByb3ZpZGVyRXJyb3IiLCJlIiwicHJvdmlkZXJfZXJyb3IiLCJpc0FwcFN3aXRjaEVuYWJsZWQiLCJjcmVhdGVQYXlQYWxDb21tZXJjZVNkayIsImNyZWF0ZVNjcmlwdExvYWRlciIsIk5vdEltcGxlbWVudGVkRXJyb3IiLCJQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRTdHJhdGVneSIsInBheXBhbGNvbW1lcmNlY3JlZGl0IiwicGF5cGFsT3B0aW9ucyIsImZ1bmRpbmdTb3VyY2VzIiwiUEFZTEFURVIiLCJDUkVESVQiLCJoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uIiwiUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRTdHJhdGVneSIsInBheXBhbGNvbW1lcmNldmVubW8iLCJWRU5NTyIsIlRpbWVvdXRFcnJvciIsImlzRXhwZXJpbWVudEVuYWJsZWQiLCJmZWF0dXJlcyIsImV4cGVyaW1lbnROYW1lIiwiZmFsbGJhY2tWYWx1ZSIsIlBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5IiwicG9sbGluZ0ludGVydmFsIiwibWF4UG9sbGluZ0ludGVydmFsVGltZSIsInBvbGxpbmdUaW1lciIsInN0b3BQb2xsaW5nIiwibm9vcCIsImlzUG9sbGluZ0VuYWJsZWQiLCJwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcyIsInNob3VsZFJlbmRlckZpZWxkcyIsImdldFN0b3JlQ29uZmlnT3JUaHJvdyIsImNoZWNrb3V0U2V0dGluZ3MiLCJyZW5kZXJGaWVsZHMiLCJpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSIsImlzTm9uSW5zdGFudFBheW1lbnRNZXRob2QiLCJyZXNldFBvbGxpbmdNZWNoYW5pc20iLCJyZXNvbHZlUHJvbWlzZSIsInJlamVjdFByb21pc2UiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsIm9yZGVyU3RhdHVzIiwiaXNPcmRlckFwcHJvdmVkIiwiQXBwcm92ZWQiLCJpc1BvbGxpbmdFcnJvciIsIlBvbGxpbmdFcnJvciIsImRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20iLCJyZWluaXRpYWxpemVTdHJhdGVneSIsInBheXBhbEFtcHNTZGsiLCJnZXRQYXlwYWxBbXBzU2RrT3JUaHJvdyIsImJ1dHRvblN0eWxlIiwib25Jbml0QnV0dG9uIiwib25DcmVhdGVPcmRlciIsImhhbmRsZUZhaWx1cmUiLCJ1c2VTdG9yZUNyZWRpdCIsInBhcmFtcyIsImdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdyIsImFwbUZpZWxkc0NvbnRhaW5lciIsImFwbUZpZWxkc1N0eWxlcyIsImZpZWxkQ29udGFpbmVyRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbm5lckhUTUwiLCJmaWVsZHNPcHRpb25zIiwiZmllbGRzIiwiUGF5bWVudEZpZWxkcyIsInRvVXBwZXJDYXNlIiwiZ2F0ZXdheSIsIlVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUiLCJURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUiLCJQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUiLCJDb29raWVTdG9yYWdlIiwiY29va2llS2V5IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY29va2llIiwiZmlyc3RJbmRleCIsImluZGV4T2YiLCJsYXN0SW5kZXgiLCJkZWNvZGVVUklDb21wb25lbnQiLCJzdWJzdHJpbmciLCJzZXQiLCJzZWN1cmUiLCJjb29raWVUZXh0IiwiZXhwaXJlcyIsInBhdGgiLCJkb21haW4iLCJ0b1VUQ1N0cmluZyIsIm5vdyIsIkRhdGUiLCJtaW51dGVzIiwic2V0VGltZSIsImdldFRpbWUiLCJyZW1vdmUiLCJIb3N0ZWRGaWVsZFR5cGUiLCJQYXlQYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMiLCJpbml0aWFsaXplUGF5UGFsRmFzdGxhbmUiLCJpc1Rlc3RNb2RlRW5hYmxlZCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJwYXlwYWxGYXN0bGFuZSIsImRlZmF1bHRTdHlsZXMiLCJyb290IiwiYmFja2dyb3VuZENvbG9yUHJpbWFyeSIsIkZhc3RsYW5lIiwiZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93IiwibG9va3VwQ3VzdG9tZXJPclRocm93IiwiaWRlbnRpdHkiLCJsb29rdXBDdXN0b21lckJ5RW1haWwiLCJ0cmlnZ2VyQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyIsImN1c3RvbWVyQ29udGV4dElkIiwidHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdyIsInVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImNvb2tpZXNPcHRpb24iLCJyZW1vdmVTdG9yYWdlU2Vzc2lvbklkIiwiZ2V0U3RvcmFnZVNlc3Npb25JZCIsIm1hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEiLCJhdXRoZW50aWNhdGlvblJlc3VsdCIsImF1dGhlbnRpY2F0aW9uU3RhdGUiLCJwcm9maWxlRGF0YSIsInBheXBhbEJpbGxpbmdBZGRyZXNzIiwiY2FyZCIsInBheW1lbnRTb3VyY2UiLCJiaWxsaW5nQWRkcmVzcyIsInBheXBhbFNoaXBwaW5nQWRkcmVzcyIsInNoaXBwaW5nQWRkcmVzcyIsInBheXBhbFByb2ZpbGVOYW1lIiwicGF5cGFsSW5zdHJ1bWVudCIsIm1hcFBheVBhbFRvQmNBZGRyZXNzIiwicGhvbmVOdW1iZXIiLCJtYXBQYXlQYWxUb0JjSW5zdHJ1bWVudCIsImFkZHJlc3NlcyIsImZpbHRlckFkZHJlc3NlcyIsIlVOUkVDT0dOSVpFRCIsImJyYW5kIiwiZXhwaXJ5IiwibGFzdERpZ2l0cyIsImV4cGlyeVllYXIiLCJleHBpcnlNb250aCIsImRlZmF1bHRJbnN0cnVtZW50IiwiaWluIiwibGFzdDQiLCJtZXRob2QiLCJ1bnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25Nb2RlIiwiUEFOIiwibWFwQmNUb1BheVBhbEFkZHJlc3MiLCJhZGRyZXNzTGluZTEiLCJhZGRyZXNzTGluZTIiLCJhZG1pbkFyZWExIiwiYWRtaW5BcmVhMiIsInByb2ZpbGVOYW1lIiwiZnVsbE5hbWUiLCJwaG9uZURhdGEiLCJuYXRpb25hbE51bWJlciIsImNvdW50cnkiLCJyZWR1Y2UiLCJjdXN0b21lckFkZHJlc3NlcyIsImN1cnJlbnRBZGRyZXNzIiwic29tZSIsImN1c3RvbWVyQWRkcmVzcyIsImlzRXF1YWxBZGRyZXNzZXMiLCJmaXJzdEFkZHJlc3MiLCJzZWNvbmRBZGRyZXNzIiwiaXNFcXVhbCIsIm5vcm1hbGl6ZUFkZHJlc3MiLCJvbWl0IiwiY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzIiwiaXNDcmVkaXRDYXJkRm9ybUZpZWxkcyIsIkNhcmROdW1iZXIiLCJDYXJkTmFtZSIsIkNhcmRFeHBpcnkiLCJpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyIsIkNhcmROdW1iZXJWZXJpZmljYXRpb24iLCJDYXJkQ29kZVZlcmlmaWNhdGlvbiIsIkNhcmRFeHBpcnlWZXJpZmljYXRpb24iLCJQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IiLCJOb3RJbml0aWFsaXplZEVycm9yVHlwZSIsIk5vdEluaXRpYWxpemVkRXJyb3IiLCJDdXN0b21lck5vdEluaXRpYWxpemVkIiwiUGF5bWVudE5vdEluaXRpYWxpemVkIiwiU2hpcHBpbmdOb3RJbml0aWFsaXplZCIsIlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50SW52YWxpZEZvcm1FcnJvciIsImRldGFpbHMiLCJQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5IiwicGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzIiwicGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkcyIsInBheXBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25PcHRpb25zIiwiZm9ybSIsIm9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yIiwib25Mb2FkQ29tcGxldGUiLCJob3N0ZWRGb3JtT3B0aW9ucyIsImlzQ3JlZGl0Q2FyZEZvcm0iLCJpc0NyZWRpdENhcmRWYXVsdGVkRm9ybSIsImhhc1VuZGVmaW5lZFZhbHVlcyIsImluaXRpYWxpemVGaWVsZHMiLCJzaG91bGRJbml0aWFsaXplUGF5UGFsRmFzdGxhbmUiLCJpbml0aWFsaXplUGF5UGFsRmFzdGxhbmVPclRocm93IiwiZXhlY3V0aW9uUGF5bWVudERhdGEiLCJ2YWxpZGF0ZUhvc3RlZEZvcm1PclRocm93Iiwic3VibWl0SG9zdGVkRm9ybSIsImdldEluc3RydW1lbnRQYXJhbXMiLCJyZXR1cm5lZE9yZGVySWQiLCJzdWJtaXRQYXltZW50UGF5bG9hZCIsInJldHVybmVkVmF1bHRlZFRva2VuIiwiY3Z2RmllbGQiLCJleHBpcnlGaWVsZCIsIm51bWJlckZpZWxkIiwibmFtZUZpZWxkIiwibm9uY2UiLCJ2ZXJpZmljYXRpb25fbm9uY2UiLCJjYXJkX3dpdGhfb3JkZXIiLCJmb3JtT3B0aW9ucyIsImV4ZWN1dGVDYWxsYmFjayIsImdldEV4ZWN1dGVDYWxsYmFjayIsImNhcmRGaWVsZHNDb25maWciLCJnZXRJbnB1dFN0eWxlcyIsInZhdWx0U2V0dXBUb2tlbiIsImxpYWJpbGl0eVNoaWZ0IiwiTm8iLCJVbmtub3duIiwiaW5wdXRFdmVudHMiLCJvbkNoYW5nZSIsImV2ZW50Iiwib25DaGFuZ2VIYW5kbGVyIiwib25Gb2N1cyIsIm9uRm9jdXNIYW5kbGVyIiwib25CbHVyIiwib25CbHVySGFuZGxlciIsIm9uSW5wdXRTdWJtaXRSZXF1ZXN0IiwiY2FyZEZpZWxkcyIsIkNhcmRGaWVsZHMiLCJzdHlsaXplSW5wdXRDb250YWluZXJzIiwicmVuZGVyVmF1bHRlZEZpZWxkcyIsImNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrIiwiY3JlYXRlT3JkZXJDYWxsYmFjayIsImNyZWF0ZVZhdWx0U2V0dXBUb2tlbiIsImdldENhcmRGaWVsZHNPclRocm93IiwiY2FyZENvZGUiLCJjb250YWluZXJJZCIsIkNWVkZpZWxkIiwicGxhY2Vob2xkZXIiLCJjYXJkRXhwaXJ5IiwiRXhwaXJ5RmllbGQiLCJjYXJkTmFtZSIsIk5hbWVGaWVsZCIsImNhcmROdW1iZXIiLCJOdW1iZXJGaWVsZCIsImNhcmRDb2RlVmVyaWZpY2F0aW9uIiwiY2FyZEV4cGlyeVZlcmlmaWNhdGlvbiIsImNhcmROdW1iZXJWZXJpZmljYXRpb24iLCJnZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZCIsImVtaXR0ZWRCeSIsImZpZWxkVHlwZSIsIm1hcEZpZWxkVHlwZSIsInN1Ym1pdENvbmZpZyIsInN1Ym1pdCIsImNhcmRGaWVsZHNTdGF0ZSIsInRoZW4iLCJ2YWxpZGF0aW9uRGF0YSIsImdldFZhbGlkaXR5RGF0YSIsImlzVmFsaWQiLCJtYXBWYWxpZGF0aW9uRXJyb3JzIiwidXBkYXRlZEZpZWxkcyIsImNhcmROYW1lRmllbGQiLCJmaWVsZHNLZXlzIiwiZXZlcnkiLCJmaWVsZHNFcnJvcnMiLCJnZXRJbnZhbGlkRXJyb3JCeUZpZWxkVHlwZSIsIkNhcmRDb2RlIiwidmFsaWRhdGlvbkVycm9ycyIsImNvbW1vblN0eWxlcyIsImRlZmF1bHQiLCJmb250U2l6ZSIsImZvbnRGYW1pbHkiLCJmb250V2VpZ2h0Iiwib3V0bGluZSIsInBhZGRpbmciLCJpbnB1dCIsInZhbHVlcyIsImJveFNoYWRvdyIsImJhY2tncm91bmQiLCJtYXJnaW5Cb3R0b20iLCJtYXJnaW5MZWZ0Iiwib25FbnRlciIsInBheW1lbnRQcm92aWRlckN1c3RvbWVyIiwiZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJwYXlwYWxDb21tZXJjZVBheW1lbnRQcm92aWRlckN1c3RvbWVyIiwiY3VzdG9tZXIiLCJpc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkIiwiaXNQYXlQYWxDb21tZXJjZUFuYWx5dGljc1YyRW5hYmxlZCIsImNvbm5lY3RDbGllbnRUb2tlbiIsInBheVBhbEZhc3RsYW5lU2RrIiwiUGF5cGFsQ29tbWVyY2VSYXRlcGF5UGF5bWVudFN0cmF0ZWd5IiwicGF5cGFsY29tbWVyY2VyYXRlcGF5IiwibGVnYWxUZXh0Q29udGFpbmVyIiwibG9hZGluZ0NvbnRhaW5lcklkIiwiY3JlYXRlRnJhdWROZXRTY3JpcHQiLCJsb2FkRnJhdWRuZXRDb25maWciLCJyZW5kZXJMZWdhbFRleHQiLCJtZXRhZGF0YUlkIiwiZ3VpZCIsInJhdGVwYXlCaXJ0aERhdGUiLCJyYXRlcGF5UGhvbmVOdW1iZXIiLCJyYXRlcGF5UGhvbmVDb3VudHJ5Q29kZSIsInJhdGVfcGF5IiwiYmlydGhfZGF0ZSIsIm5vcm1hbGl6ZURhdGUiLCJmcmF1ZE5ldFNjcmlwdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmcmF1ZE5ldENvbmZpZyIsImxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQiLCJkYXRlIiwiZm9ybWF0dGVkRGF0ZSIsImZvcm1hdERhdGUiLCJmb3JtYXR0ZWRNb250aCIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJsZWdhbFRleHRDb250YWluZXJFbGVtZW50SWQiLCJsZWdhbFRleHRDb250YWluZXJJZCIsImJ1dHRvbkNvbnRhaW5lcklkIiwiYnV0dG9uQ29udGFpbmVyIiwiYnV0dG9uQ29udGFpbmVyUGFyZW50IiwicGFyZW50Tm9kZSIsInNldEF0dHJpYnV0ZSIsInByZXBlbmQiLCJyYXRlUGF5QnV0dG9uIiwiTGVnYWwiLCJQQVlfVVBPTl9JTlZPSUNFIiwidGVzdE1vZGUiLCJzY3JpcHRFbGVtZW50IiwiZ2VuZXJhdGVHVUlEIiwiZiIsInMiLCJzYW5kYm94IiwiSlNPTiIsInN0cmluZ2lmeSIsImkiLCJNYXRoIiwiZmxvb3IiLCJjaGFyYWN0ZXJzIiwicmFuZG9tIiwic2NyaXB0Iiwic3JjIiwidXNlTWV0YWRhdGEiLCJQb2xsaW5nU3RvcCIsImlzSW52YWxpZFN0eWxlT3B0aW9uIiwic3R5bGVPcHRpb24iLCJnZXRGYXN0bGFuZVN0eWxlcyIsInN0eWxlU2V0dGluZ3MiLCJ1aVN0eWxlcyIsImZhc3RsYW5lU3R5bGVzIiwidG9nZ2xlIiwidGV4dEJvZHkiLCJ0ZXh0Q2FwdGlvbiIsImNhcHRpb24iLCJicmFuZGluZyIsImNsZWFuVXBGYXN0bGFuZVN0eWxlcyIsImZhc3RsYW5lUm9vdFNldHRpbmdzQmFja2dyb3VuZENvbG9yIiwiZXJyb3JDb2xvciIsImZhc3RsYW5lUm9vdFNldHRpbmdzRXJyb3JDb2xvciIsImZhc3RsYW5lUm9vdFNldHRpbmdzRm9udEZhbWlseSIsImZvbnRTaXplQmFzZSIsImZhc3RsYW5lUm9vdFNldHRpbmdzRm9udFNpemUiLCJmYXN0bGFuZVJvb3RTZXR0aW5nc1BhZGRpbmciLCJwcmltYXJ5Q29sb3IiLCJmYXN0bGFuZVJvb3RTZXR0aW5nc1ByaW1hcnlDb2xvciIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlclJhZGl1cyIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlckNvbG9yIiwiZm9jdXNCb3JkZXJDb2xvciIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0ZvY3VzQm9yZGVyQmFzZSIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0JhY2tncm91bmRDb2xvciIsImJvcmRlcldpZHRoIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyV2lkdGgiLCJ0ZXh0Q29sb3JCYXNlIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzVGV4dENvbG9yQmFzZSIsImNvbG9yUHJpbWFyeSIsImZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclByaW1hcnkiLCJjb2xvclNlY29uZGFyeSIsImZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclNlY29uZGFyeSIsImZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0NvbG9yIiwiZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzRm9udFNpemUiLCJmYXN0bGFuZVRleHRDYXB0aW9uU2V0dGluZ3NDb2xvciIsImZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0ZvbnRTaXplIiwiZmFzdGxhbmVCcmFuZGluZ1NldHRpbmdzIiwibWVyZ2VGYXN0bGFuZVN0eWxlcyIsImlzUGF5UGFsRmFzdGxhbmVDdXN0b21lciIsIlBheXBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50U3RyYXRlZ3kiLCJwYXlwYWxjb21tZXJjZWZhc3RsYW5lIiwiaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkIiwidGhyZWVEU1ZlcmlmaWNhdGlvbk1ldGhvZCIsInNob3VsZFJ1bkF1dGhlbnRpY2F0aW9uRmxvdyIsInJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3ciLCJpbml0aWFsaXplUGF5UGFsUGF5bWVudENvbXBvbmVudCIsInJlbmRlclBheVBhbFBheW1lbnRDb21wb25lbnQiLCJoYW5kbGVQYXlQYWxTdG9yZWRJbnN0cnVtZW50Q2hhbmdlIiwib3JkZXJSZXF1ZXN0IiwiaXNWYXVsdGVkRmxvdyIsImlzUGF5cGFsRmFzdGxhbmVSZXF1ZXN0RXJyb3IiLCJpbnZhbGlkUmVxdWVzdEVycm9yIiwidHJhbnNsYXRpb25LZXkiLCJnZXRDdXN0b21lck9yVGhyb3ciLCJwYXlwYWxGYXN0bGFuZUN1c3RvbWVyIiwicGF5cGFsRmFzdGxhbmVTZXNzaW9uSWQiLCJpc0d1ZXN0IiwiQ0FOQ0VMRUQiLCJnZXRDdXN0b21lciIsImdldEJpbGxpbmdBZGRyZXNzIiwiY3VzdG9tZXJFbWFpbCIsInVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyIiwidHJpbSIsImNhcmRDb21wb25lbnRPcHRpb25zIiwiY2FyZGhvbGRlck5hbWUiLCJwcmVmaWxsIiwiZW5hYmxlZCIsInBheXBhbENvbXBvbmVudE1ldGhvZHMiLCJGYXN0bGFuZUNhcmRDb21wb25lbnQiLCJnZXRQYXlQYWxDb21wb25lbnRNZXRob2RzT3JUaHJvdyIsImlzM0RTRW5hYmxlZCIsImlzUGF5cGFsQ29tbWVyY2VGYXN0bGFuZVRocmVlRFNBdmFpbGFibGUiLCJpczNkc0VuYWJsZWQiLCJmYXN0bGFuZVRva2VuIiwiZ2V0M0RTTm9uY2UiLCJwYXlwYWxfZmFzdGxhbmVfdG9rZW4iLCJnZXRQYXltZW50VG9rZW4iLCJwYXlwYWxOb25jZSIsImdldE9yZGVyT3JUaHJvdyIsImNoZWNrb3V0VXJsIiwibGlua3MiLCJjaGVja291dExpbmsiLCJ0aHJlZURvbWFpblNlY3VyZUNvbXBvbmVudCIsIlRocmVlRG9tYWluU2VjdXJlQ2xpZW50IiwidGhyZWVEb21haW5TZWN1cmVQYXJhbWV0ZXJzIiwib3JkZXJBbW91bnQiLCJ0b0ZpeGVkIiwidGhyZWVEU1JlcXVlc3RlZCIsInRyYW5zYWN0aW9uQ29udGV4dCIsImV4cGVyaWVuY2VfY29udGV4dCIsImxvY2FsZSIsInJldHVybl91cmwiLCJjYW5jZWxfdXJsIiwiRXJyb3JlZCIsIkNhbmNlbGxlZCIsIlN1Y2NlZWRlZCIsInBheXBhbEF4b1NkayIsInNlbGVjdGlvbkNoYW5nZWQiLCJzZWxlY3RlZENhcmQiLCJwcm9maWxlIiwic2hvd0NhcmRTZWxlY3RvciIsInNlbGVjdGVkSW5zdHJ1bWVudCIsIlBheVBhbENvbW1lcmNlQ3VzdG9tZXJTdHJhdGVneSIsImdldFBheW1lbnRNZXRob2QiLCJzaWduSW4iLCJjcmVkZW50aWFscyIsInNpZ25JbkN1c3RvbWVyIiwic2lnbk91dCIsInNpZ25PdXRDdXN0b21lciIsImV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQiLCJjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrIiwib25Db21wbGV0ZSIsImNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzIiwiZGVmYXVsdENhbGxiYWNrcyIsImhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzIiwib25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UiLCJvblNoaXBwaW5nT3B0aW9uc0NoYW5nZSIsIm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlIiwiYnV0dG9uUmVuZGVyT3B0aW9ucyIsInVwZGF0ZUJpbGxpbmdBZGRyZXNzIiwibGluZUl0ZW1zIiwicGh5c2ljYWxJdGVtcyIsInVwZGF0ZVNoaXBwaW5nQWRkcmVzcyIsInNoaXBwaW5nT3B0aW9uIiwic2VsZWN0U2hpcHBpbmdPcHRpb24iLCJQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVyU3RyYXRlZ3kiLCJwYXlwYWxDb21tZXJjZUNyZWRpdCIsIlBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lclN0cmF0ZWd5IiwicGF5cGFsQnV0dG9uUmVuZGVyIiwiUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kiLCJjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCIsImlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQiLCJ1cGRhdGVDdXN0b21lckRhdGFTdGF0ZSIsInVwZGF0ZWRTdGF0ZSIsImlzRmFzdGxhbmVTaGlwcGluZ09wdGlvbkF1dG9TZWxlY3RFbmFibGVkIiwiY29uc2lnbm1lbnRzIiwiZ2V0Q29uc2lnbm1lbnRzIiwiZmlyc3RTaGlwcGluZ09wdGlvbiIsInNoaXBwaW5nT3B0aW9uSWQiLCJQYXlQYWxDb21tZXJjZUJ1dHRvblN0cmF0ZWd5IiwiaXNCdXlOb3dGbG93IiwibG9hZERlZmF1bHRDaGVja291dCIsIm9uRWxpZ2liaWxpdHlGYWlsdXJlIiwiYnV5Tm93Rmxvd0NhbGxiYWNrcyIsImJ1eU5vd0NhcnQiLCJsb2FkQ2hlY2tvdXQiLCJQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5IiwibWVzc2FnaW5nQ29udGFpbmVySWQiLCJtZXNzYWdpbmdDb250YWluZXIiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwYXlwYWxNZXNzYWdlc1NkayIsIlBheVBhbENvbW1lcmNlVmVubW9CdXR0b25TdHJhdGVneSIsImdldFZhbGlkVmVubW9CdXR0b25TdHlsZXMiLCJ2YWxpZEJ1dHRvblN0eWxlIiwiZ29sZCIsIlBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3kiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/paypal-commerce.js\n\n}");

/***/ })

}]);
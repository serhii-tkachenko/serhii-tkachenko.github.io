"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["adyen-v2-payment-method"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/adyen.js":
/*!*********************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/adyen.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAdyenV2PaymentStrategy: () => (/* binding */ A),\n/* harmony export */   createAdyenV3PaymentStrategy: () => (/* binding */ N)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nclass i extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class a extends i{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}var o,r,s,d,c,l,p,h;class u{constructor(e,t,n=window){this._scriptLoader=e,this._stylesheetLoader=t,this._window=n}load(e){var t,n,i,o,r,s;return i=this,o=void 0,s=function*(){if(yield Promise.all([this._stylesheetLoader.loadStylesheet(`https://checkoutshopper-${null!==(t=e.environment)&&void 0!==t?t:\"\"}.adyen.com/checkoutshopper/sdk/3.10.1/adyen.css`,{prepend:!1,attributes:{integrity:\"sha384-8ofgICZZ/k5cC5N7xegqFZOA73H9RQ7H13439JfAZW8Gj3qjuKL2isaTD3GMIhDE\",crossorigin:\"anonymous\"}}),this._scriptLoader.loadScript(`https://checkoutshopper-${null!==(n=e.environment)&&void 0!==n?n:\"\"}.adyen.com/checkoutshopper/sdk/3.10.1/adyen.js`,{async:!0,attributes:{integrity:\"sha384-wG2z9zSQo61EIvyXmiFCo+zB3y0ZB4hsrXVcANmpP8HLthjoQJQPBh7tZKJSV8jA\",crossorigin:\"anonymous\"}})]),!this._window.AdyenCheckout)throw new a;return new this._window.AdyenCheckout(e)},new((r=void 0)||(r=Promise))(function(e,t){function n(e){try{d(s.next(e))}catch(e){t(e)}}function a(e){try{d(s.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r(function(e){e(i)})).then(n,a)}d((s=s.apply(i,o||[])).next())})}}function y(e,t){return Object.assign(e,{resolveIds:t})}function m(e){return\"object\"==typeof e&&\"string\"==typeof e.data.paymentMethod.encryptedSecurityCode||\"string\"==typeof e.data.paymentMethod.encryptedExpiryMonth}!function(e){e.ThreeDS2Fingerprint=\"threeDS2Fingerprint\",e.ThreeDS2=\"threeDS2\",e.Redirect=\"redirect\",e.QRCode=\"qrCode\",e.Voucher=\"voucher\",e.Sdk=\"sdk\"}(o||(o={})),function(e){e.ThreeDS2Fingerprint=\"threeDS2Fingerprint\",e.ThreeDS2Challenge=\"threeDS2Challenge\",e.Redirect=\"redirect\",e.QRCode=\"qrCode\",e.Voucher=\"voucher\"}(r||(r={})),function(e){e.SecuredFields=\"securedfields\"}(s||(s={})),function(e){e.ACH=\"ach\",e.AliPay=\"alipay\",e.Bancontact=\"bcmc\",e.CreditCard=\"scheme\",e.Klarna=\"klarna\",e.KlarnaPayNow=\"klarna_paynow\",e.KlarnaAccount=\"klarna_account\",e.IDEAL=\"ideal\",e.GiroPay=\"giropay\",e.GooglePay=\"paywithgoogle\",e.SEPA=\"sepadirectdebit\",e.Sofort=\"directEbanking\",e.Vipps=\"vipps\",e.WeChatPayQR=\"wechatpayQR\"}(d||(d={})),function(e){e.POST=\"POST\"}(c||(c={})),function(e){e.ChallengeShopper=\"ChallengeShopper\",e.Error=\"Error\",e.IdentifyShopper=\"IdentifyShopper\"}(l||(l={})),function(e){e.CardNumber=\"encryptedCardNumber\",e.SecurityCode=\"encryptedSecurityCode\",e.ExpiryDate=\"encryptedExpiryDate\"}(p||(p={}));class g extends i{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class _ extends g{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(h||(h={}));class f extends i{constructor(e){super(function(e){switch(e){case h.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case h.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case h.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case h.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}function v(e){return Boolean(e.instrumentId)}function C(){const{navigator:e}=window;let t;return t=e.language?e.language:e.userLanguage,{color_depth:window.screen.colorDepth||24,java_enabled:\"function\"==typeof e.javaEnabled&&e.javaEnabled(),language:t,screen_height:window.screen.height,screen_width:window.screen.width,time_zone_offset:(new Date).getTimezoneOffset().toString()}}class b extends i{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class w extends i{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}const S=e=>\"object\"==typeof e&&null!==e&&\"body\"in e;class O extends i{constructor(e,t){super(t||\"Unable to proceed because the payment form contains invalid data.\"),this.details=e,this.name=\"PaymentInvalidFormError\",this.type=\"payment_invalid_form\"}}var I=function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}d((i=i.apply(e,t||[])).next())})};class P{constructor(e,t){this._paymentIntegrationService=e,this._scriptLoader=t}initialize(e){return I(this,void 0,void 0,function*(){const{adyenv2:t}=e;if(!t)throw new g('Unable to initialize payment because \"options.adyenv2\" argument is not provided.');this._paymentInitializeOptions=t;const n=this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId),{originKey:i,clientKey:a,environment:o,paymentMethodsResponse:r}=n.initializationData||{},s={key:\"\",value:\"\"};return i?(s.key=\"originKey\",s.value=i):(s.key=\"clientKey\",s.value=a||\"\"),this._adyenClient=yield this._scriptLoader.load({environment:o,locale:this._paymentIntegrationService.getState().getLocale(),[s.key]:s.value,paymentMethodsResponse:r,translations:{es:{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-AR\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-ES\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-MX\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CL\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CO\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-PE\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"}}}),this._paymentComponent=yield this._mountPaymentComponent(n),n.method!==d.CreditCard&&n.method!==d.Bancontact||(this._cardVerificationComponent=yield this._mountCardVerificationComponent()),Promise.resolve()})}execute(e,t){return I(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(e,[\"payment\"]),a=n&&n.paymentData,o=a&&a.shouldSaveInstrument,r=a&&a.shouldSetAsDefaultInstrument;if(!n)return Promise.reject(new _([\"payment\"]));this._validateCardData(),yield this._paymentIntegrationService.submitOrder(i,t);const s=this._componentState;if(!s)throw new f(h.PaymentNotInitialized);if(a&&v(a)){let e={};if(m(s)){const{encryptedCardNumber:t,encryptedSecurityCode:n,encryptedExpiryMonth:i,encryptedExpiryYear:a}=s.data.paymentMethod;e={credit_card_number_confirmation:t,expiry_month:i,expiry_year:a,verification_value:n}}if(m(s)||-1!==[\"ideal\",\"sepadirectdebit\",\"directEbanking\",\"giropay\"].indexOf(s.data.paymentMethod.type))try{return void(yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:{formattedPayload:{bigpay_token:Object.assign(Object.assign({},e),{token:a.instrumentId}),origin:window.location.origin,browser_info:C(),set_as_default_stored_instrument:r||null}}})))}catch(e){return void(yield this._processAdditionalAction(e,o,r))}}try{yield this._paymentIntegrationService.submitPayment({methodId:n.methodId,paymentData:{formattedPayload:{credit_card_token:{token:JSON.stringify(Object.assign(Object.assign({},s.data.paymentMethod),{origin:window.location.origin}))},browser_info:C(),vault_payment_instrument:o||null,set_as_default_stored_instrument:r||null}}})}catch(e){yield this._processAdditionalAction(e,o,r)}})}finalize(){return Promise.reject(new b)}deinitialize(){return this._componentState=void 0,this._paymentComponent&&(this._paymentComponent.unmount(),this._paymentComponent=void 0),this._cardVerificationComponent&&(this._cardVerificationComponent.unmount(),this._cardVerificationComponent=void 0),Promise.resolve()}_getAdyenClient(){if(!this._adyenClient)throw new f(h.PaymentNotInitialized);return this._adyenClient}_getPaymentInitializeOptions(){if(!this._paymentInitializeOptions)throw new g('\"options.adyenv2\" argument was not provided during initialization.');return this._paymentInitializeOptions}_getThreeDS2ChallengeWidgetSize(){const{additionalActionOptions:e,threeDS2Options:t}=this._getPaymentInitializeOptions();return e.widgetSize||(null==t?void 0:t.widgetSize)||\"05\"}_handleAction(e){return new Promise((t,n)=>{const{threeDS2ContainerId:i,additionalActionOptions:a}=this._getPaymentInitializeOptions(),{onBeforeLoad:o,containerId:s,onLoad:d,onComplete:c}=a,l=JSON.parse(e.action),p=this._getAdyenClient().createFromAction(l,{onAdditionalDetails:e=>{const n={methodId:l.paymentMethodType,paymentData:{nonce:JSON.stringify(e.data)}};c&&c(),t(n)},size:this._getThreeDS2ChallengeWidgetSize(),onError:e=>n(e)});o&&o(l.type===r.ThreeDS2Challenge||l.type===r.QRCode),p.mount(`#${s||i}`),d&&d(()=>{n(new w),p.unmount()})})}_mapAdyenPlaceholderData(e,t){if(!e)return{};const{firstName:n,lastName:i,address1:a,address2:o,postalCode:r,city:s,stateOrProvinceCode:d,countryCode:c}=e;return{holderName:t?`${n} ${i}`:\"\",billingAddress:{street:a,houseNumberOrName:o,postalCode:r,city:s,stateOrProvince:d,country:c}}}_mountCardVerificationComponent(){const e=this._getPaymentInitializeOptions(),t=this._getAdyenClient();let n;return new Promise((i,a)=>{var o,r,d;if(e.cardVerificationContainerId){n=t.create(s.SecuredFields,Object.assign(Object.assign({},e.options),{styles:Object.assign(Object.assign({},null===(o=e.options)||void 0===o?void 0:o.styles),{placeholder:Object.assign({color:\"transparent\",caretColor:\"#000\"},null===(d=null===(r=e.options)||void 0===r?void 0:r.styles)||void 0===d?void 0:d.placeholder)}),onChange:e=>this._updateComponentState(e),onError:t=>e.validateCardFields(t),onFieldValid:t=>e.validateCardFields(t)}));try{n.mount(`#${e.cardVerificationContainerId}`)}catch(e){a(new f(h.PaymentNotInitialized))}}i(n)})}_mountPaymentComponent(e){let t;const n=this._getPaymentInitializeOptions(),i=this._getAdyenClient();return new Promise((a,o)=>{switch(e.method){case d.CreditCard:case d.ACH:case d.Bancontact:{const a=this._paymentIntegrationService.getState().getBillingAddress(),{prefillCardHolderName:r}=e.initializationData;t=i.create(e.method,Object.assign(Object.assign({},n.options),{onChange:e=>this._updateComponentState(e),data:this._mapAdyenPlaceholderData(a,r)}));try{t.mount(`#${n.containerId}`)}catch(e){o(new f(h.PaymentNotInitialized))}break}case d.IDEAL:case d.SEPA:if(n.hasVaultedInstruments)this._updateComponentState({data:{paymentMethod:{type:e.method}}});else{t=i.create(e.method,Object.assign(Object.assign({},n.options),{onChange:e=>this._updateComponentState(e)}));try{t.mount(`#${n.containerId}`)}catch(e){o(new f(h.PaymentNotInitialized))}}break;case d.AliPay:case d.GiroPay:case d.Sofort:case d.Klarna:case d.KlarnaPayNow:case d.KlarnaAccount:case d.Vipps:case d.WeChatPayQR:this._updateComponentState({data:{paymentMethod:{type:e.method}}})}a(t)})}_processAdditionalAction(e,t,i){return I(this,void 0,void 0,function*(){if(!S(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"additional_action_required\"}))throw e;const a=yield this._handleAction(e.body.provider_data);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},a),{paymentData:Object.assign(Object.assign({},a.paymentData),{shouldSaveInstrument:t,shouldSetAsDefaultInstrument:i})}))}catch(e){return this._processAdditionalAction(e,t,i)}})}_updateComponentState(e){this._componentState=e}_validateCardData(){var e,t;const n=this._getPaymentInitializeOptions().hasVaultedInstruments?this._cardVerificationComponent:this._paymentComponent;if((null===(e=null==n?void 0:n.componentRef)||void 0===e?void 0:e.showValidation)&&n.state&&(n.componentRef.showValidation(),0===Object.keys(n.state).length||!n.state.isValid&&!n.state.issuer||\"sepadirectdebit\"===(null===(t=n.props)||void 0===t?void 0:t.type)&&n.state.data&&Object.values(n.state.data).some(e=>0===e.toString().trim().length)))throw new O(this._mapCardErrors(n.state.errors))}_mapCardErrors(e={}){const t={};return Object.keys(e).forEach(n=>{t[n]=[{message:e[n],type:n}]}),t}}const A=y(n=>new P(n,new u((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getStylesheetLoader)())),[{gateway:\"adyenv2\"}]);class j{constructor(e,t,n=window){this._scriptLoader=e,this._stylesheetLoader=t,this._window=n}load(e){var t,n,i,o,r,s;return i=this,o=void 0,s=function*(){if(yield Promise.all([this._stylesheetLoader.loadStylesheet(`https://checkoutshopper-${null!==(t=e.environment)&&void 0!==t?t:\"\"}.adyen.com/checkoutshopper/sdk/5.71.1/adyen.css`,{prepend:!1,attributes:{integrity:\"sha384-5MvB4RnzvviA3VBT4KYABZ4HXNZG5LRqREEgd41xt/pf/QvKmsj2O9GuNuywRXx9\",crossorigin:\"anonymous\"}}),this._scriptLoader.loadScript(`https://checkoutshopper-${null!==(n=e.environment)&&void 0!==n?n:\"\"}.adyen.com/checkoutshopper/sdk/5.71.1/adyen.js`,{async:!0,attributes:{integrity:\"sha384-yvY2yFNR4WqIjPqP9MzjI+gJimmaJnAvj4rLHKvgJbgFD5fMuf8zIJrFJOW8Lhhf\",crossorigin:\"anonymous\"}})]),!this._window.AdyenCheckout)throw new a;return yield this._window.AdyenCheckout(e)},new((r=void 0)||(r=Promise))(function(e,t){function n(e){try{d(s.next(e))}catch(e){t(e)}}function a(e){try{d(s.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r(function(e){e(i)})).then(n,a)}d((s=s.apply(i,o||[])).next())})}}var z=function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}d((i=i.apply(e,t||[])).next())})};class D{constructor(e,t){this._paymentIntegrationService=e,this._scriptLoader=t}initialize(e){return z(this,void 0,void 0,function*(){const{adyenv3:t}=e;if(!t)throw new g('Unable to initialize payment because \"options.adyenv3\" argument is not provided.');this._paymentInitializeOptions=t;const n=this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId),{environment:i,clientKey:a,paymentMethodsResponse:o,installmentOptions:r}=n.initializationData||{};return this._adyenClient=yield this._scriptLoader.load({paymentMethodsConfiguration:Object.assign({klarna:{useKlarnaWidget:!0},klarna_account:{useKlarnaWidget:!0},klarna_paynow:{useKlarnaWidget:!0}},r?{card:{installmentOptions:Object.assign({showInstallmentAmounts:!0},r)}}:{}),environment:i,locale:this._getLocale(),clientKey:a,paymentMethodsResponse:o,showPayButton:!1,translations:{es:{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-AR\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-ES\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-MX\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CL\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CO\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-PE\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"}}}),this._paymentComponent=yield this._mountPaymentComponent(n),n.method!==d.CreditCard&&n.method!==d.Bancontact||(this._cardVerificationComponent=yield this._mountCardVerificationComponent()),Promise.resolve()})}execute(e,t){var n;return z(this,void 0,void 0,function*(){const{payment:i}=e,a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(e,[\"payment\"]);if(!i)throw new _([\"payment\"]);const o=i.paymentData,{shouldSaveInstrument:r,shouldSetAsDefaultInstrument:s}=\"object\"!=typeof(d=o)||null===d||void 0!==d.shouldSaveInstrument&&\"boolean\"!=typeof d.shouldSaveInstrument||void 0!==d.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof d.shouldSetAsDefaultInstrument?{shouldSaveInstrument:!1,shouldSetAsDefaultInstrument:!1}:o;var d;this._validateCardData(),\"klarna\"!==i.methodId&&\"klarna_account\"!==i.methodId&&\"klarna_paynow\"!==i.methodId||null===(n=this._paymentComponent)||void 0===n||n.submit(),yield this._paymentIntegrationService.submitOrder(a,t);const c=this._componentState||{data:{paymentMethod:{type:i.methodId}}};if(o&&v(o)){let e={};if(m(c)){const{encryptedCardNumber:t,encryptedSecurityCode:n,encryptedExpiryMonth:i,encryptedExpiryYear:a}=c.data.paymentMethod;e={credit_card_number_confirmation:t,expiry_month:i,expiry_year:a,verification_value:n}}try{return void(yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},i),{paymentData:{formattedPayload:{bigpay_token:Object.assign(Object.assign({},e),{token:o.instrumentId}),origin:window.location.origin,browser_info:C(),set_as_default_stored_instrument:s||null}}})))}catch(e){return void(yield this._processAdditionalAction(e,r,s))}}let l=JSON.stringify(Object.assign(Object.assign({},c.data.paymentMethod),{type:i.methodId,origin:window.location.origin}));\"boletobancario\"===i.methodId&&function(e){var t,n;return\"string\"===(\"object\"==typeof e&&typeof e.data.socialSecurityNumber)&&\"string\"==typeof(null===(t=e.data.shopperName)||void 0===t?void 0:t.firstName)&&\"string\"==typeof(null===(n=e.data.shopperName)||void 0===n?void 0:n.lastName)}(c)&&(l=JSON.stringify(Object.assign(Object.assign({socialSecurityNumber:c.data.socialSecurityNumber},c.data.shopperName),{type:i.methodId,origin:window.location.origin})));try{yield this._paymentIntegrationService.submitPayment({methodId:i.methodId,paymentData:{formattedPayload:Object.assign(Object.assign({credit_card_token:{token:l}},m(c)&&c.data.installments?{installments:{value:c.data.installments.value,plan:c.data.installments.plan||\"regular\"}}:{}),{browser_info:C(),vault_payment_instrument:r||null,set_as_default_stored_instrument:s||null})}})}catch(e){yield this._processAdditionalAction(e,r,s)}})}finalize(){return Promise.reject(new b)}deinitialize(){return this._componentState=void 0,this._paymentComponent&&(this._paymentComponent.unmount(),this._paymentComponent=void 0),this._cardVerificationComponent&&(this._cardVerificationComponent.unmount(),this._cardVerificationComponent=void 0),Promise.resolve()}_updateComponentState(e){this._componentState=e}_getLocale(){const e=this._paymentIntegrationService.getState().getLocale();return e&&\"es\"===e.substring(0,2)?\"es\":e}_getAdyenClient(){if(!this._adyenClient)throw new f(h.PaymentNotInitialized);return this._adyenClient}_getPaymentInitializeOptions(){if(!this._paymentInitializeOptions)throw new g('\"options.adyenv3\" argument was not provided during initialization.');return this._paymentInitializeOptions}_handleAction(e){return new Promise((t,n)=>{const{additionalActionOptions:i}=this._getPaymentInitializeOptions(),{onBeforeLoad:a,containerId:r,onLoad:s,onComplete:d,widgetSize:c,onActionHandled:l}=i,p=JSON.parse(e.action),h=this._getAdyenClient().createFromAction(p,{onActionHandled:e=>{l&&\"function\"==typeof l&&\"3DS2Fingerprint\"!==e.componentType&&l()},onAdditionalDetails:e=>{const n={methodId:p.paymentMethodType,paymentData:{nonce:JSON.stringify(e.data)}};d&&\"function\"==typeof d&&d(),t(n)},challengeWindowSize:c||\"05\",onError:e=>n(e)});a&&\"function\"==typeof a&&a(p.type===o.ThreeDS2||p.type===o.QRCode||p.type===o.Sdk),this._mountElement(h,r),s&&\"function\"==typeof s&&s(()=>{n(new w),h.unmount()})})}_mapAdyenPlaceholderData(e,t){if(!e)return{};const{firstName:n,lastName:i,address1:a,address2:o,postalCode:r,city:s,stateOrProvinceCode:d,countryCode:c}=e;return{holderName:t?`${n} ${i}`:\"\",firstName:t?n:\"\",lastName:t?i:\"\",billingAddress:{street:a,houseNumberOrName:o,postalCode:r,city:s,stateOrProvince:d,country:c}}}_mountCardVerificationComponent(){const e=this._getPaymentInitializeOptions(),t=this._getAdyenClient();let n;return new Promise((i,a)=>{var o,r,d;if(e.cardVerificationContainerId){n=t.create(s.SecuredFields,Object.assign(Object.assign({},e.options),{styles:Object.assign(Object.assign({},null===(o=e.options)||void 0===o?void 0:o.styles),{placeholder:Object.assign({color:\"transparent\",caretColor:\"#000\"},null===(d=null===(r=e.options)||void 0===r?void 0:r.styles)||void 0===d?void 0:d.placeholder)}),onChange:e=>this._updateComponentState(e),onError:t=>e.validateCardFields(t),onFieldValid:t=>e.validateCardFields(t)}));try{this._mountElement(n,e.cardVerificationContainerId)}catch(e){a(new f(h.PaymentNotInitialized))}}i(n)})}_mountPaymentComponent(e){let t;const n=this._getPaymentInitializeOptions(),i=this._getAdyenClient();return new Promise((a,o)=>{const r=this._paymentIntegrationService.getState().getBillingAddress(),{prefillCardHolderName:s}=e.initializationData;t=i.create(e.method,Object.assign(Object.assign(Object.assign({},n.options),{showBrandsUnderCardNumber:!1,billingAddressRequired:!1,showEmailAddress:!1,onChange:e=>this._updateComponentState(e),onSubmit:e=>this._updateComponentState(e)}),r?{data:this._mapAdyenPlaceholderData(r,s)}:{}));try{this._mountElement(t,n.containerId)}catch(e){o(new f(h.PaymentNotInitialized))}a(t)})}_processAdditionalAction(e,t,i){return z(this,void 0,void 0,function*(){if(!S(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"additional_action_required\"}))throw e;const a=yield this._handleAction(e.body.provider_data);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},a),{paymentData:Object.assign(Object.assign({},a.paymentData),{shouldSaveInstrument:t,shouldSetAsDefaultInstrument:i})}))}catch(e){return this._processAdditionalAction(e,t,i)}})}_validateCardData(){var e;const t=this._getPaymentInitializeOptions().hasVaultedInstruments?this._cardVerificationComponent:this._paymentComponent;if((null===(e=null==t?void 0:t.componentRef)||void 0===e?void 0:e.showValidation)&&t.state&&(t.componentRef.showValidation(),0===Object.keys(t.state).length||!t.state.isValid))throw new O(this._mapCardErrors(t.state.errors))}_mapCardErrors(e={}){const t={};return Object.keys(e).forEach(n=>{t[n]=[{message:e[n],type:n}]}),t}_mountElement(e,t){document.getElementById(t)&&e.mount(`#${t}`)}}const N=y(n=>new D(n,new j((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getStylesheetLoader)())),[{gateway:\"adyenv3\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9hZHllbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQU9lLE1BQWVBLFVBQXNCQyxNQUloRCxXQUFBQyxDQUFZQyxHQ1hELElBQXFDQyxFRFk1Q0MsTUFBTUYsR0FBVyxxQ0FKckIsS0FBQUcsS0FBTyxnQkFDUCxLQUFBQyxLQUFPLFdDVHlDSCxhRGNaQSxVQ2JoQ0ksT0FBT0MsZUFDUEQsT0FBT0MsZURZUUMsS0NaZU4sR0RZZk0sS0NWUkMsVUFBWVAsRURZb0IsbUJBQTVCSCxNQUFNVyxrQkFDYlgsTUFBTVcsa0JBQWtCRixpQkFFeEJBLEtBQUtHLE1BQVEsSUFBSVosTUFBTVMsS0FBS1AsU0FBU1UsS0FFN0MsRUVmVyxNQUFNQyxVQUE0Q2QsRUFDN0QsV0FBQUUsQ0FBWUMsR0FDUkUsTUFDSUYsR0FDSSx1R0FHUk8sS0FBS0osS0FBTyxzQ0FDWkksS0FBS0gsS0FBTyxtQ0FDaEIsRSxJQ2ZRUSxFQWlDQUMsRUE0QkFDLEVBSUFDLEVBaUJBQyxFQUlBQyxFQXM4QkFDLEVDMWhDQUMsRUNJRyxNQUFNQyxFQUNqQixXQUFBckIsQ0FDWXNCLEVBQ0FDLEVBQ0FDLEVBQTZCQyxRQUY3QixLQUFBSCxjQUFBQSxFQUNBLEtBQUFDLGtCQUFBQSxFQUNBLEtBQUFDLFFBQUFBLENBQ1QsQ0FFRyxJQUFBRSxDQUFLQyxHLHFEQThCUCxTQTdCTUMsUUFBUUMsSUFBSSxDQUNkckIsS0FBS2Usa0JBQWtCTyxlQUNuQiwyQkFDNkIsUUFBekIsRUFBQUgsRUFBY0ksbUJBQVcsUUFBSSxvREFFakMsQ0FDSUMsU0FBUyxFQUNUQyxXQUFZLENBQ1JDLFVBQ0ksMEVBQ0pDLFlBQWEsZUFJekIzQixLQUFLYyxjQUFjYyxXQUNmLDJCQUM2QixRQUF6QixFQUFBVCxFQUFjSSxtQkFBVyxRQUFJLG1EQUVqQyxDQUNJTSxPQUFPLEVBQ1BKLFdBQVksQ0FDUkMsVUFDSSwwRUFDSkMsWUFBYSxrQkFNeEIzQixLQUFLZ0Is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Y2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtY2xpZW50LXVuYXZhaWxhYmxlLWVycm9yLnRzP2Y4ZWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FkeWVuLXV0aWxzL3NyYy90eXBlcy50cz9jNzVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL25vdC1pbml0aWFsaXplZC1lcnJvci50cz84YjRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hZHllbi11dGlscy9zcmMvYWR5ZW52Mi9hZHllbnYyLXNjcmlwdC1sb2FkZXIudHM/YTNkMiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3RvLXJlc29sdmFibGUtbW9kdWxlLnRzP2Q1MjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FkeWVuLXV0aWxzL3NyYy91dGlscy9pcy1jYXJkLXN0YXRlLnRzPzQ0ZDciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaW52YWxpZC1hcmd1bWVudC1lcnJvci50cz8zOTIxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy12YXVsdGVkLWluc3RydW1lbnQudHM/MTgwZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NvbW1vbi9icm93c2VyLWluZm8vZ2V0LWJyb3dzZXItaW5mby50cz84YmE0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL29yZGVyLWZpbmFsaXphdGlvbi1ub3QtcmVxdWlyZWQtZXJyb3IudHM/YjVhMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1jYW5jZWxsZWQtZXJyb3IudHM/MDg5MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pcy1yZXF1ZXN0LWVycm9yLnRzP2I0M2QiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1pbnZhbGlkLWZvcm0tZXJyb3IudHM/YzBmYiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjIvYWR5ZW52Mi1wYXltZW50LXN0cmF0ZWd5LnRzPzhlNDkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FkeWVuLXV0aWxzL3NyYy91dGlscy9pcy1hY2NvdW50LXN0YXRlLnRzP2ViNmYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FkeWVuLWludGVncmF0aW9uL3NyYy9hZHllbnYyL2NyZWF0ZS1hZHllbnYyLXBheW1lbnQtc3RyYXRlZ3kudHM/NDIwMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYWR5ZW4tdXRpbHMvc3JjL2FkeWVudjMvYWR5ZW52My1zY3JpcHQtbG9hZGVyLnRzPzYwMmYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FkeWVuLWludGVncmF0aW9uL3NyYy9hZHllbnYzL2FkeWVudjMtcGF5bWVudC1zdHJhdGVneS50cz9jM2IyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy1ob3N0ZWQtaW50cnVtZW50LWxpa2UudHM/ODc2MyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYWR5ZW4tdXRpbHMvc3JjL3V0aWxzL2lzLWJvbGV0by1zdGF0ZS50cz83MjdmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52My9jcmVhdGUtYWR5ZW52My1wYXltZW50LXN0cmF0ZWd5LnRzPzUxYTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEN1c3RvbUVycm9yIGZyb20gJy4vY3VzdG9tLWVycm9yJztcbmltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tICcuL3NldC1wcm90b3R5cGUtb2YnO1xuXG4vKipcbiAqIFRoaXMgZXJyb3IgdHlwZSBzaG91bGQgbm90IGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LiBJdCBpcyBhIGJhc2UgY2xhc3MgZm9yXG4gKiBhbGwgY3VzdG9tIGVycm9ycyB0aHJvd24gaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBDdXN0b21FcnJvciB7XG4gICAgbmFtZSA9ICdTdGFuZGFyZEVycm9yJztcbiAgICB0eXBlID0gJ3N0YW5kYXJkJztcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIG5ldy50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpLnN0YWNrO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0UHJvdG90eXBlT2Yob2JqZWN0OiBhbnksIHByb3RvdHlwZTogb2JqZWN0KSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqZWN0LCBwcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGZhaWxzXG4gKiB0byBsb2FkLCBvciBmb3Igc29tZSByZWFzb24sIGl0IGlzIGluYWNjZXNzaWJsZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGlzIG5vdCBsb2FkZWQgb3IgcmVhZHkgdG8gYmUgdXNlZC4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X21ldGhvZF9jbGllbnRfdW5hdmFpbGFibGUnO1xuICAgIH1cbn1cbiIsImV4cG9ydCBlbnVtIEFkeWVuVjNBY3Rpb25UeXBlIHtcbiAgICAvKlxuICAgICAqIFRoZSBwYXltZW50IHF1YWxpZmllcyBmb3IgM0QgU2VjdXJlIDIsIGFuZCB3aWxsIGdvIHRocm91Z2ggZWl0aGVyIHRoZSBmcmljdGlvbmxlc3NcbiAgICAgKiBvciB0aGUgY2hhbGxlbmdlIGZsb3cuXG4gICAgICogKi9cbiAgICBUaHJlZURTMkZpbmdlcnByaW50ID0gJ3RocmVlRFMyRmluZ2VycHJpbnQnLFxuXG4gICAgLypcbiAgICAgKiBUaGUgcGF5bWVudCBxdWFsaWZpZXMgZm9yIDNEIFNlY3VyZSAyLCBhbmQgdGhlIGlzc3VlciBpcyBpbml0aWF0aW5nIGEgY2hhbGxlbmdlIGZsb3cuXG4gICAgICogKi9cbiAgICBUaHJlZURTMiA9ICd0aHJlZURTMicsXG5cbiAgICAvKlxuICAgICAqIFdlIHdpbGwgaW5pdGlhdGUgYSAzRCBTZWN1cmUgMSBmYWxsYmFjaywgYmVjYXVzZSB0aGUgaXNzdWVyIGRvZXMgbm90IHN1cHBvcnQgM0QgU2VjdXJlIDIuXG4gICAgICogKi9cbiAgICBSZWRpcmVjdCA9ICdyZWRpcmVjdCcsXG5cbiAgICAvKlxuICAgICAqIFRoZSBDb21wb25lbnQgcHJlc2VudHMgdGhlIFFSIGNvZGUgYW5kIGNhbGxzIHRoZSBvbkFkZGl0aW9uYWxEZXRhaWxzIGV2ZW50LlxuICAgICAqICovXG4gICAgUVJDb2RlID0gJ3FyQ29kZScsXG5cbiAgICAvKlxuICAgICAqIFRoZSBDb21wb25lbnQgZGlzcGxheXMgdGhlIHZvdWNoZXIgd2hpY2ggdGhlIHNob3BwZXIgdXNlcyB0byBjb21wbGV0ZSB0aGUgcGF5bWVudC5cbiAgICAgKiAqL1xuICAgIFZvdWNoZXIgPSAndm91Y2hlcicsXG5cbiAgICAvKlxuICAgICAqIFRoZSBDb21wb25lbnQgZGlzcGxheXMgdGhlIHdpZGdldCB3aGljaCB0aGUgc2hvcHBlciB1c2VzIHRvIGNvbXBsZXRlIHRoZSBwYXltZW50LlxuICAgICAqICovXG4gICAgU2RrID0gJ3NkaycsXG59XG5cbmV4cG9ydCBlbnVtIEFkeWVuVjJBY3Rpb25UeXBlIHtcbiAgICAvKlxuICAgICAqIFRoZSBwYXltZW50IHF1YWxpZmllcyBmb3IgM0QgU2VjdXJlIDIsIGFuZCB3aWxsIGdvIHRocm91Z2ggZWl0aGVyIHRoZSBmcmljdGlvbmxlc3NcbiAgICAgKiBvciB0aGUgY2hhbGxlbmdlIGZsb3cuXG4gICAgICogKi9cbiAgICBUaHJlZURTMkZpbmdlcnByaW50ID0gJ3RocmVlRFMyRmluZ2VycHJpbnQnLFxuXG4gICAgLypcbiAgICAgKiBUaGUgcGF5bWVudCBxdWFsaWZpZXMgZm9yIDNEIFNlY3VyZSAyLCBhbmQgdGhlIGlzc3VlciBpcyBpbml0aWF0aW5nIGEgY2hhbGxlbmdlIGZsb3cuXG4gICAgICogKi9cbiAgICBUaHJlZURTMkNoYWxsZW5nZSA9ICd0aHJlZURTMkNoYWxsZW5nZScsXG5cbiAgICAvKlxuICAgICAqIFdlIHdpbGwgaW5pdGlhdGUgYSAzRCBTZWN1cmUgMSBmYWxsYmFjaywgYmVjYXVzZSB0aGUgaXNzdWVyIGRvZXMgbm90IHN1cHBvcnQgM0QgU2VjdXJlIDIuXG4gICAgICogKi9cbiAgICBSZWRpcmVjdCA9ICdyZWRpcmVjdCcsXG5cbiAgICAvKlxuICAgICAqIFRoZSBDb21wb25lbnQgcHJlc2VudHMgdGhlIFFSIGNvZGUgYW5kIGNhbGxzIHRoZSBvbkFkZGl0aW9uYWxEZXRhaWxzIGV2ZW50LlxuICAgICAqICovXG4gICAgUVJDb2RlID0gJ3FyQ29kZScsXG5cbiAgICAvKlxuICAgICAqIFRoZSBDb21wb25lbnQgZGlzcGxheXMgdGhlIHZvdWNoZXIgd2hpY2ggdGhlIHNob3BwZXIgdXNlcyB0byBjb21wbGV0ZSB0aGUgcGF5bWVudC5cbiAgICAgKiAqL1xuICAgIFZvdWNoZXIgPSAndm91Y2hlcicsXG59XG5cbmV4cG9ydCBlbnVtIEFkeWVuQ29tcG9uZW50VHlwZSB7XG4gICAgU2VjdXJlZEZpZWxkcyA9ICdzZWN1cmVkZmllbGRzJyxcbn1cblxuZXhwb3J0IGVudW0gQWR5ZW5QYXltZW50TWV0aG9kVHlwZSB7XG4gICAgQUNIID0gJ2FjaCcsXG4gICAgQWxpUGF5ID0gJ2FsaXBheScsXG4gICAgQmFuY29udGFjdCA9ICdiY21jJyxcbiAgICBDcmVkaXRDYXJkID0gJ3NjaGVtZScsXG4gICAgS2xhcm5hID0gJ2tsYXJuYScsXG4gICAgS2xhcm5hUGF5Tm93ID0gJ2tsYXJuYV9wYXlub3cnLFxuICAgIEtsYXJuYUFjY291bnQgPSAna2xhcm5hX2FjY291bnQnLFxuICAgIElERUFMID0gJ2lkZWFsJyxcbiAgICBHaXJvUGF5ID0gJ2dpcm9wYXknLFxuICAgIEdvb2dsZVBheSA9ICdwYXl3aXRoZ29vZ2xlJyxcbiAgICBTRVBBID0gJ3NlcGFkaXJlY3RkZWJpdCcsXG4gICAgU29mb3J0ID0gJ2RpcmVjdEViYW5raW5nJyxcbiAgICBWaXBwcyA9ICd2aXBwcycsXG4gICAgV2VDaGF0UGF5UVIgPSAnd2VjaGF0cGF5UVInLFxufVxuXG5leHBvcnQgZW51bSBIVFRQTWV0aG9kIHtcbiAgICBQT1NUID0gJ1BPU1QnLFxufVxuXG5leHBvcnQgZW51bSBSZXN1bHRDb2RlIHtcbiAgICBDaGFsbGVuZ2VTaG9wcGVyID0gJ0NoYWxsZW5nZVNob3BwZXInLFxuICAgIEVycm9yID0gJ0Vycm9yJyxcbiAgICBJZGVudGlmeVNob3BwZXIgPSAnSWRlbnRpZnlTaG9wcGVyJyxcbn1cblxuaW50ZXJmYWNlIEFkeWVuUGF5bWVudE1ldGhvZFN0YXRlIHtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBXZWNoYXREYXRhUGF5bWVudE1ldGhvZFN0YXRlIHtcbiAgICBwYXltZW50TWV0aG9kOiBBZHllblBheW1lbnRNZXRob2RTdGF0ZTtcbn1cblxuaW50ZXJmYWNlIEJvbGV0b0RhdGFQYXltZW50TWV0aG9kU3RhdGUge1xuICAgIHBheW1lbnRNZXRob2Q6IEFkeWVuUGF5bWVudE1ldGhvZFN0YXRlO1xuICAgIHNob3BwZXJOYW1lPzoge1xuICAgICAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgICAgIGxhc3ROYW1lPzogc3RyaW5nO1xuICAgIH07XG4gICAgc29jaWFsU2VjdXJpdHlOdW1iZXI/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBDYXJkUGF5bWVudE1ldGhvZFN0YXRlIGV4dGVuZHMgQWR5ZW5QYXltZW50TWV0aG9kU3RhdGUge1xuICAgIGVuY3J5cHRlZENhcmROdW1iZXI6IHN0cmluZztcbiAgICBlbmNyeXB0ZWRFeHBpcnlNb250aDogc3RyaW5nO1xuICAgIGVuY3J5cHRlZEV4cGlyeVllYXI6IHN0cmluZztcbiAgICBlbmNyeXB0ZWRTZWN1cml0eUNvZGU6IHN0cmluZztcbiAgICBob2xkZXJOYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WMkFjdGlvbiB7XG4gICAgbWV0aG9kOiBIVFRQTWV0aG9kO1xuXG4gICAgLyoqXG4gICAgICogVmFsdWUgdGhhdCB5b3UgbmVlZCB0byBzdWJtaXQgaW4geW91ciAvcGF5bWVudHMvZGV0YWlscyByZXF1ZXN0IHdoZW4gaGFuZGxpbmdcbiAgICAgKiB0aGUgcmVkaXJlY3QuXG4gICAgICovXG4gICAgcGF5bWVudERhdGE6IHN0cmluZztcblxuICAgIHBheW1lbnRNZXRob2RUeXBlOiBBZHllblBheW1lbnRNZXRob2RUeXBlO1xuXG4gICAgLypcbiAgICAgKiBUaGUgQ29tcG9uZW50IHBlcmZvcm1zIGFkZGl0aW9uYWwgZnJvbnQtZW5kIGFjdGlvbnMgZGVwZW5kaW5nIG9uIHRoZSBhY3Rpb24udHlwZS5cbiAgICAgKiBZb3VyIG5leHQgc3RlcHMgZGVwZW5kIG9uIHRoZSB0eXBlIG9mIGFjdGlvbiB0aGF0IHRoZSBDb21wb25lbnQgcGVyZm9ybXMuXG4gICAgICovXG4gICAgdHlwZTogQWR5ZW5WMkFjdGlvblR5cGU7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgSFRUUCByZXF1ZXN0IG1ldGhvZCB0aGF0IHlvdSBzaG91bGQgdXNlLiBBZnRlciB0aGUgc2hvcHBlciBjb21wbGV0ZXMgdGhlIHBheW1lbnQsXG4gICAgICogdGhleSB3aWxsIGJlIHJlZGlyZWN0ZWQgYmFjayB0byB5b3VyIHJldHVyblVSTCB1c2luZyB0aGUgc2FtZSBtZXRob2QuXG4gICAgICovXG4gICAgdXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WM0FjdGlvbiB7XG4gICAgbWV0aG9kOiBIVFRQTWV0aG9kO1xuXG4gICAgLyoqXG4gICAgICogVmFsdWUgdGhhdCB5b3UgbmVlZCB0byBzdWJtaXQgaW4geW91ciAvcGF5bWVudHMvZGV0YWlscyByZXF1ZXN0IHdoZW4gaGFuZGxpbmdcbiAgICAgKiB0aGUgcmVkaXJlY3QuXG4gICAgICovXG4gICAgcGF5bWVudERhdGE6IHN0cmluZztcblxuICAgIHBheW1lbnRNZXRob2RUeXBlOiBBZHllblBheW1lbnRNZXRob2RUeXBlO1xuXG4gICAgLypcbiAgICAgKiBUaGUgQ29tcG9uZW50IHBlcmZvcm1zIGFkZGl0aW9uYWwgZnJvbnQtZW5kIGFjdGlvbnMgZGVwZW5kaW5nIG9uIHRoZSBhY3Rpb24udHlwZS5cbiAgICAgKiBZb3VyIG5leHQgc3RlcHMgZGVwZW5kIG9uIHRoZSB0eXBlIG9mIGFjdGlvbiB0aGF0IHRoZSBDb21wb25lbnQgcGVyZm9ybXMuXG4gICAgICovXG4gICAgdHlwZTogQWR5ZW5WM0FjdGlvblR5cGU7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgSFRUUCByZXF1ZXN0IG1ldGhvZCB0aGF0IHlvdSBzaG91bGQgdXNlLiBBZnRlciB0aGUgc2hvcHBlciBjb21wbGV0ZXMgdGhlIHBheW1lbnQsXG4gICAgICogdGhleSB3aWxsIGJlIHJlZGlyZWN0ZWQgYmFjayB0byB5b3VyIHJldHVyblVSTCB1c2luZyB0aGUgc2FtZSBtZXRob2QuXG4gICAgICovXG4gICAgdXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIEFkeWVuQWN0aW9uID0gQWR5ZW5WMkFjdGlvbiB8IEFkeWVuVjNBY3Rpb247XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5BZGRpdGlvbmFsQWN0aW9uIHtcbiAgICByZXN1bHRDb2RlOiBSZXN1bHRDb2RlO1xuICAgIGFjdGlvbjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuQWRkaXRpb25hbEFjdGlvbkNhbGxiYWNrcyB7XG4gICAgLyoqXG4gICAgICogQSBjYWxsYmFjayB0aGF0IGdldHMgY2FsbGVkIGJlZm9yZSBhZHllbiBjb21wb25lbnQgaXMgbG9hZGVkXG4gICAgICovXG4gICAgb25CZWZvcmVMb2FkPyhzaG9wcGVySW50ZXJhY3Rpb24/OiBib29sZWFuKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIEEgY2FsbGJhY2sgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIGFkeWVuIGNvbXBvbmVudCBpcyBsb2FkZWRcbiAgICAgKi9cbiAgICBvbkxvYWQ/KGNhbmNlbD86ICgpID0+IHZvaWQpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogQSBjYWxsYmFjayB0aGF0IGdldHMgY2FsbGVkIHdoZW4gYWR5ZW4gY29tcG9uZW50IHZlcmlmaWNhdGlvblxuICAgICAqIGlzIGNvbXBsZXRlZFxuICAgICAqL1xuICAgIG9uQ29tcGxldGU/KCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBBIGNhbGxiYWNrIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiBhbiBhY3Rpb24sIGZvciBleGFtcGxlIGEgUVIgY29kZSBvciAzRCBTZWN1cmUgMiBhdXRoZW50aWNhdGlvbiBzY3JlZW4sIGlzIHNob3duIHRvIHRoZSBzaG9wcGVyXG4gICAgICovXG4gICAgb25BY3Rpb25IYW5kbGVkPygpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuQWRkaXRpb25hbEFjdGlvbkVycm9yUmVzcG9uc2Uge1xuICAgIHByb3ZpZGVyX2RhdGE6IEFkeWVuQWRkaXRpb25hbEFjdGlvbjtcbiAgICBlcnJvcnM6IFt7IGNvZGU6IHN0cmluZyB9XTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkFkZGl0aW9uYWxBY3Rpb25PcHRpb25zIGV4dGVuZHMgQWR5ZW5BZGRpdGlvbmFsQWN0aW9uQ2FsbGJhY2tzIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYXRpb24gdG8gaW5zZXJ0IHRoZSBhZGRpdGlvbmFsIGFjdGlvbiBjb21wb25lbnQuXG4gICAgICovXG4gICAgY29udGFpbmVySWQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFNwZWNpZnkgVGhyZWUzRFMyQ2hhbGxlbmdlIFdpZGdldCBTaXplXG4gICAgICpcbiAgICAgKiBWYWx1ZXNcbiAgICAgKiAnMDEnID0gMjUwcHggeCA0MDBweFxuICAgICAqICcwMicgPSAzOTBweCB4IDQwMHB4XG4gICAgICogJzAzJyA9IDUwMHB4IHggNjAwcHhcbiAgICAgKiAnMDQnID0gNjAwcHggeCA0MDBweFxuICAgICAqICcwNScgPSAxMDAlIHggMTAwJVxuICAgICAqL1xuICAgIHdpZGdldFNpemU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5BZGRpdGlvbmFsQWN0aW9uU3RhdGUge1xuICAgIGRhdGE6IEFkeWVuQWRkaXRpb25hbEFjdGlvbjtcbiAgICBpc1ZhbGlkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkJhc2VDYXJkQ29tcG9uZW50T3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogQXJyYXkgb2YgY2FyZCBicmFuZHMgdGhhdCB3aWxsIGJlIHJlY29nbml6ZWQgYnkgdGhlIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqL1xuICAgIGJyYW5kcz86IHN0cmluZ1tdO1xuXG4gICAgLyoqXG4gICAgICogU2V0IGEgc3R5bGUgb2JqZWN0IHRvIGN1c3RvbWl6ZSB0aGUgaW5wdXQgZmllbGRzLiBTZWUgU3R5bGluZyBTZWN1cmVkIEZpZWxkc1xuICAgICAqIGZvciBhIGxpc3Qgb2Ygc3VwcG9ydGVkIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgc3R5bGVzPzogU3R5bGVPcHRpb25zO1xuXG4gICAgc2hvd0JyYW5kc1VuZGVyQ2FyZE51bWJlcj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5Db21wb25lbnRFdmVudHMge1xuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aGVuIHRoZSBzaG9wcGVyIGVudGVycyBkYXRhIGluIHRoZSBjYXJkIGlucHV0IGZpZWxkcy5cbiAgICAgKiBIZXJlIHlvdSBoYXZlIHRoZSBvcHRpb24gdG8gb3ZlcnJpZGUgeW91ciBtYWluIEFkeWVuIENoZWNrb3V0IGNvbmZpZ3VyYXRpb24uXG4gICAgICovXG4gICAgb25DaGFuZ2U/KHN0YXRlOiBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUsIGNvbXBvbmVudDogQWR5ZW5Db21wb25lbnQpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIHNob3BwZXIgc2VsZWN0cyB0aGUgUGF5IGJ1dHRvbiBhbmQgcGF5bWVudCBkZXRhaWxzIGFyZSB2YWxpZC5cbiAgICAgKi9cbiAgICBvblN1Ym1pdD8oc3RhdGU6IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSwgY29tcG9uZW50OiBBZHllbkNvbXBvbmVudCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgaW4gY2FzZSBvZiBhbiBpbnZhbGlkIGNhcmQgbnVtYmVyLCBpbnZhbGlkIGV4cGlyeSBkYXRlLCBvclxuICAgICAqICBpbmNvbXBsZXRlIGZpZWxkLiBDYWxsZWQgYWdhaW4gd2hlbiBlcnJvcnMgYXJlIGNsZWFyZWQuXG4gICAgICovXG4gICAgb25FcnJvcj8oc3RhdGU6IEFkeWVuVmFsaWRhdGlvblN0YXRlLCBjb21wb25lbnQ6IEFkeWVuQ29tcG9uZW50KTogdm9pZDtcblxuICAgIG9uRmllbGRWYWxpZD8oc3RhdGU6IEFkeWVuVmFsaWRhdGlvblN0YXRlLCBjb21wb25lbnQ6IEFkeWVuQ29tcG9uZW50KTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkNsaWVudCB7XG4gICAgY3JlYXRlKHR5cGU6IHN0cmluZywgY29tcG9uZW50T3B0aW9ucz86IEFkeWVuQ29tcG9uZW50T3B0aW9ucyk6IEFkeWVuQ29tcG9uZW50O1xuXG4gICAgY3JlYXRlRnJvbUFjdGlvbihcbiAgICAgICAgYWN0aW9uOiBBZHllblYyQWN0aW9uIHwgQWR5ZW5WM0FjdGlvbixcbiAgICAgICAgY29tcG9uZW50T3B0aW9ucz86XG4gICAgICAgICAgICB8IFRocmVlRFMyRGV2aWNlRmluZ2VycHJpbnRDb21wb25lbnRPcHRpb25zXG4gICAgICAgICAgICB8IEFkeWVuVjNUaHJlZURTMkNoYWxsZW5nZUNvbXBvbmVudE9wdGlvbnNcbiAgICAgICAgICAgIHwgQWR5ZW5WMlRocmVlRFMyQ2hhbGxlbmdlQ29tcG9uZW50T3B0aW9ucyxcbiAgICApOiBBZHllbkNvbXBvbmVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkNvbXBvbmVudCB7XG4gICAgY29tcG9uZW50UmVmPzoge1xuICAgICAgICBzaG93VmFsaWRhdGlvbigpOiB2b2lkO1xuICAgIH07XG4gICAgcHJvcHM/OiB7XG4gICAgICAgIHR5cGU/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBzdGF0ZT86IEFkeWVuQ29tcG9uZW50U3RhdGU7XG4gICAgbW91bnQoY29udGFpbmVySWQ6IHN0cmluZyk6IEhUTUxFbGVtZW50O1xuICAgIHVubW91bnQoKTogdm9pZDtcbiAgICBzdWJtaXQoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkNvbmZpZ3VyYXRpb24ge1xuICAgIC8qXG4gICAgICogVXNlIHRlc3QsIGFuZCB0aGVuIGNoYW5nZSB0aGlzIHRvIGxpdmUgd2hlbiB5b3UncmUgcmVhZHkgdG8gYWNjZXB0IGxpdmUgcGF5bWVudHMuXG4gICAgICovXG4gICAgZW52aXJvbm1lbnQ/OiBzdHJpbmc7XG5cbiAgICAvKlxuICAgICAqIFRoZSBzaG9wcGVyJ3MgbG9jYWxlLiBUaGlzIGlzIHVzZWQgdG8gc2V0IHRoZSBsYW5ndWFnZSByZW5kZXJlZCBpbiB0aGUgQ29tcG9uZW50cy5cbiAgICAgKi9cbiAgICBsb2NhbGU/OiBzdHJpbmc7XG5cbiAgICAvKlxuICAgICAqIFRoZSBPcmlnaW4gS2V5IG9mIHlvdXIgd2Vic2l0ZS5cbiAgICAgKi9cbiAgICBvcmlnaW5LZXk/OiBzdHJpbmc7XG5cbiAgICAvKlxuICAgICAqIFRoZSBDbGllbnQgS2V5IG9mIHlvdXIgQWR5ZW4gYWNjb3VudC5cbiAgICAgKi9cbiAgICBjbGllbnRLZXk/OiBzdHJpbmc7XG5cbiAgICAvKlxuICAgICAqIFN1cHBvcnRlZCBmcm9tIENvbXBvbmVudHMgdmVyc2lvbiAzLjAuMCBhbmQgbGF0ZXIuIFRoZSBmdWxsIHBheW1lbnRNZXRob2RzIHJlc3BvbnNlLFxuICAgICAqIHJldHVybmVkIGluIHN0ZXAgMS4gV2UgcmVjb21tZW5kIHRoYXQgeW91IHBhc3MgdGhpcyBvbiB0aGUgQWR5ZW5DaGVja291dCBpbnN0YW5jZS5cbiAgICAgKiBPdGhlcndpc2UsIHlvdSBuZWVkIHRvIHBhc3MgdGhlIHNwZWNpZmljIHBheW1lbnQgbWV0aG9kIGRldGFpbHMgc2VwYXJhdGVseSBmb3IgZWFjaFxuICAgICAqIENvbXBvbmVudC5cbiAgICAgKi9cbiAgICBwYXltZW50TWV0aG9kc1Jlc3BvbnNlPzogUGF5bWVudE1ldGhvZHNSZXNwb25zZTtcblxuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyYXRpb24gZm9yIHNwZWNpZmljIHBheW1lbnQgbWV0aG9kcy5cbiAgICAgKi9cbiAgICBwYXltZW50TWV0aG9kc0NvbmZpZ3VyYXRpb24/OiB7XG4gICAgICAgIGtsYXJuYToge1xuICAgICAgICAgICAgdXNlS2xhcm5hV2lkZ2V0OiBib29sZWFuO1xuICAgICAgICB9O1xuICAgICAgICBrbGFybmFfYWNjb3VudDoge1xuICAgICAgICAgICAgdXNlS2xhcm5hV2lkZ2V0OiBib29sZWFuO1xuICAgICAgICB9O1xuICAgICAgICBrbGFybmFfcGF5bm93OiB7XG4gICAgICAgICAgICB1c2VLbGFybmFXaWRnZXQ6IGJvb2xlYW47XG4gICAgICAgIH07XG4gICAgICAgIGNhcmQ/OiB7XG4gICAgICAgICAgICBpbnN0YWxsbWVudE9wdGlvbnM/OiB7XG4gICAgICAgICAgICAgICAgY2FyZD86IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBudW1iZXJbXTtcbiAgICAgICAgICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZpc2E/OiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogbnVtYmVyW107XG4gICAgICAgICAgICAgICAgICAgIHBsYW5zPzogc3RyaW5nW107XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBtYz86IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBudW1iZXJbXTtcbiAgICAgICAgICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRpbmVycz86IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBudW1iZXJbXTtcbiAgICAgICAgICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGpjYj86IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBudW1iZXJbXTtcbiAgICAgICAgICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHNob3dJbnN0YWxsbWVudEFtb3VudHM/OiBib29sZWFuO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgc2hvd1BheUJ1dHRvbj86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBJZiB5b3VyIHNob3BwZXJzIHVzZSBhIGxhbmd1YWdlIHRoYXQgaXNuJ3Qgc3VwcG9ydGVkIGJ5IHRoZSBDb21wb25lbnRzLCB5b3UgY2FuIGNyZWF0ZSB5b3VyIG93biBsb2NhbGl6YXRpb24uXG4gICAgICogVG8gY3JlYXRlIGEgbG9jYWxpemF0aW9uOlxuICAgICAqIEFkZCBhIHRyYW5zbGF0aW9ucyBvYmplY3QgdG8geW91ciBwYXltZW50IHBhZ2UsIHNwZWNpZnlpbmc6XG4gICAgICogVGhlIGxvY2FsaXphdGlvbiB5b3Ugd2FudCB0byBjcmVhdGUuXG4gICAgICogQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGZpZWxkcyB0aGF0IGFyZSB1c2VkIGluIHRoZSBDb21wb25lbnRzLCBhcyB3ZWxsIGFzIHRoZSB0ZXh0IHlvdSB3YW50IGRpc3BsYXllZCBmb3IgZWFjaCBmaWVsZC5cbiAgICAgKlxuICAgICAqIFwiZW5cIjoge1xuICAgICAqICBcInBheW1lbnRNZXRob2RzLm1vcmVNZXRob2RzQnV0dG9uXCI6IFwiTW9yZSBwYXltZW50IG1ldGhvZHNcIixcbiAgICAgKiAgXCJwYXlCdXR0b25cIjogXCJQYXlcIixcbiAgICAgKiAgXCJzdG9yZURldGFpbHNcIjogXCJTYXZlIGZvciBteSBuZXh0IHBheW1lbnRcIixcbiAgICAgKiAgIC4uLlxuICAgICAqIH1cbiAgICAgKi9cbiAgICB0cmFuc2xhdGlvbnM/OiB7XG4gICAgICAgIFtpbmRleDogc3RyaW5nXToge1xuICAgICAgICAgICAgW2luZGV4OiBzdHJpbmddOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qXG4gICAgICogU3BlY2lmeSB0aGUgZnVuY3Rpb24gdGhhdCB5b3UgY3JlYXRlZCwgZm9yIGV4YW1wbGUsIGhhbmRsZU9uQ2hhbmdlLiBJZiB5b3Ugd2lzaFxuICAgICAqIHRvIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb24sIHlvdSBjYW4gYWxzbyBkZWZpbmUgYW4gb25DaGFuZ2UgZXZlbnQgb24gdGhlIENvbXBvbmVudFxuICAgICAqIGxldmVsLlxuICAgICAqL1xuICAgIG9uQ2hhbmdlPyhzdGF0ZTogQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlLCBjb21wb25lbnQ/OiBBZHllbkNvbXBvbmVudCk6IHZvaWQ7XG5cbiAgICBvbkFkZGl0aW9uYWxEZXRhaWxzPyhzdGF0ZTogQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlLCBjb21wb25lbnQ/OiBBZHllbkNvbXBvbmVudCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5QbGFjZWhvbGRlckRhdGEge1xuICAgIGZpcnN0TmFtZT86IHN0cmluZztcbiAgICBsYXN0TmFtZT86IHN0cmluZztcbiAgICBob2xkZXJOYW1lPzogc3RyaW5nO1xuICAgIHByZWZpbGxDYXJkSG9sZGVyTmFtZT86IGJvb2xlYW47XG4gICAgYmlsbGluZ0FkZHJlc3M/OiB7XG4gICAgICAgIHN0cmVldDogc3RyaW5nO1xuICAgICAgICBob3VzZU51bWJlck9yTmFtZTogc3RyaW5nO1xuICAgICAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgICAgIGNpdHk6IHN0cmluZztcbiAgICAgICAgc3RhdGVPclByb3ZpbmNlOiBzdHJpbmc7XG4gICAgICAgIGNvdW50cnk6IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuQ3JlZGl0Q2FyZENvbXBvbmVudE9wdGlvbnNcbiAgICBleHRlbmRzIEFkeWVuQmFzZUNhcmRDb21wb25lbnRPcHRpb25zLFxuICAgICAgICBBZHllbkNvbXBvbmVudEV2ZW50cyB7XG4gICAgLyoqXG4gICAgICogU2V0IGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBkZXRhaWxzIGFycmF5IGZvciB0eXBlOiBzY2hlbWUgZnJvbVxuICAgICAqIHRoZSAvcGF5bWVudE1ldGhvZHMgcmVzcG9uc2UuXG4gICAgICovXG4gICAgZGV0YWlscz86IElucHV0RGV0YWlsW107XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdG8gdHJ1ZSB0byBzaG93IHRoZSBjaGVja2JveCB0byBzYXZlIGNhcmQgZGV0YWlscyBmb3IgdGhlIG5leHQgcGF5bWVudC5cbiAgICAgKi9cbiAgICBlbmFibGVTdG9yZURldGFpbHM/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogU2V0IHRvIHRydWUgdG8gcmVxdWVzdCB0aGUgbmFtZSBvZiB0aGUgY2FyZCBob2xkZXIuXG4gICAgICovXG4gICAgaGFzSG9sZGVyTmFtZT86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdG8gdHJ1ZSB0byByZXF1aXJlIHRoZSBjYXJkIGhvbGRlciBuYW1lLlxuICAgICAqL1xuICAgIGhvbGRlck5hbWVSZXF1aXJlZD86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBJbmZvcm1hdGlvbiB0byBwcmVmaWxsIGZpZWxkcy5cbiAgICAgKi9cbiAgICBkYXRhPzogQWR5ZW5QbGFjZWhvbGRlckRhdGE7XG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0cyB0byBbJ21jJywndmlzYScsJ2FtZXgnXS4gQ29uZmlndXJlIHN1cHBvcnRlZCBjYXJkIHR5cGVzIHRvXG4gICAgICogZmFjaWxpdGF0ZSBicmFuZCByZWNvZ25pdGlvbiB1c2VkIGluIHRoZSBTZWN1cmVkIEZpZWxkcyBvbkJyYW5kIGNhbGxiYWNrLlxuICAgICAqIFNlZSBsaXN0IG9mIGF2YWlsYWJsZSBjYXJkIHR5cGVzLiBJZiBhIHNob3BwZXIgZW50ZXJzIGEgY2FyZCB0eXBlIG5vdFxuICAgICAqIHNwZWNpZmllZCBpbiB0aGUgR3JvdXBUeXBlcyBjb25maWd1cmF0aW9uLCB0aGUgb25CcmFuZCBjYWxsYmFjayB3aWxsIG5vdCBiZSBpbnZva2VkLlxuICAgICAqL1xuICAgIGdyb3VwVHlwZXM/OiBzdHJpbmdbXTtcblxuICAgIC8qKlxuICAgICAqIFNwZWNpZnkgdGhlIHNhbXBsZSB2YWx1ZXMgeW91IHdhbnQgdG8gYXBwZWFyIGZvciBjYXJkIGRldGFpbCBpbnB1dCBmaWVsZHMuXG4gICAgICovXG4gICAgcGxhY2Vob2xkZXJzPzogQ3JlZGl0Q2FyZFBsYWNlSG9sZGVyIHwgU2VwYVBsYWNlSG9sZGVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuQ3VzdG9tQ2FyZENvbXBvbmVudE9wdGlvbnNcbiAgICBleHRlbmRzIEFkeWVuQmFzZUNhcmRDb21wb25lbnRPcHRpb25zLFxuICAgICAgICBBZHllbkNvbXBvbmVudEV2ZW50cyB7XG4gICAgLyoqXG4gICAgICogU3BlY2lmeSBhcmlhIGF0dHJpYnV0ZXMgZm9yIHRoZSBpbnB1dCBmaWVsZHMgZm9yIHdlYiBhY2Nlc3NpYmlsaXR5LlxuICAgICAqL1xuICAgIGFyaWFMYWJlbHM/OiBDdXN0b21DYXJkQXJpYUxhYmVscztcblxuICAgIC8qKlxuICAgICAqIEF1dG9tYXRpY2FsbHkgc2hpZnQgdGhlIGZvY3VzIGZyb20gZGF0ZSBmaWVsZCB0byB0aGUgQ1ZDIGZpZWxkLlxuICAgICAqL1xuICAgIGF1dG9mb2N1cz86IGJvb2xlYW47XG59XG5cbnR5cGUgQWR5ZW5DbGllbnRDb25zdHJ1Y3RvciA9IChjb25maWd1cmF0aW9uOiBBZHllbkNvbmZpZ3VyYXRpb24pID0+IFByb21pc2U8QWR5ZW5DbGllbnQ+O1xuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuRXJyb3Ige1xuICAgIGVycm9yQ29kZTogc3RyaW5nO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllblYzSG9zdFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgQWR5ZW5DaGVja291dD86IEFkeWVuQ2xpZW50Q29uc3RydWN0b3I7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WMkhvc3RXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIEFkeWVuQ2hlY2tvdXQ/OiBuZXcgKGNvbmZpZ3VyYXRpb246IEFkeWVuQ29uZmlndXJhdGlvbikgPT4gQWR5ZW5DbGllbnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5JZGVhbENvbXBvbmVudE9wdGlvbnNcbiAgICBleHRlbmRzIEFkeWVuQmFzZUNhcmRDb21wb25lbnRPcHRpb25zLFxuICAgICAgICBBZHllbkNvbXBvbmVudEV2ZW50cyB7XG4gICAgLyoqXG4gICAgICogT3B0aW9uYWwuIFNldCB0byAqKmZhbHNlKiogdG8gcmVtb3ZlIHRoZSBiYW5rIGxvZ29zIGZyb20gdGhlIGlERUFMIGZvcm0uXG4gICAgICovXG4gICAgc2hvd0ltYWdlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkJvbGV0b0NvbXBvbmVudE9wdGlvbnMgZXh0ZW5kcyBBZHllbkNvbXBvbmVudEV2ZW50cyB7XG4gICAgcGVyc29uYWxEZXRhaWxzUmVxdWlyZWQ/OiBib29sZWFuO1xuICAgIGJpbGxpbmdBZGRyZXNzUmVxdWlyZWQ/OiBib29sZWFuO1xuICAgIHNob3dFbWFpbEFkZHJlc3M/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuU3RvcmVkUGF5bWVudE1ldGhvZCB7XG4gICAgLyoqXG4gICAgICogVGhlIGJyYW5kIG9mIHRoZSBjYXJkLlxuICAgICAqL1xuICAgIGJyYW5kPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG1vbnRoIHRoZSBjYXJkIGV4cGlyZXMuXG4gICAgICovXG4gICAgZXhwaXJ5TW9udGg/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgeWVhciB0aGUgY2FyZCBleHBpcmVzLlxuICAgICAqL1xuICAgIGV4cGlyeVllYXI/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdW5pcXVlIHBheW1lbnQgbWV0aG9kIGNvZGUuXG4gICAgICovXG4gICAgaG9sZGVyTmFtZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhpcyBzdG9yZWQgcGF5bWVudCBtZXRob2QuXG4gICAgICovXG4gICAgaWQ/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbGFzdCBmb3VyIGRpZ2l0cyBvZiB0aGUgUEFOLlxuICAgICAqL1xuICAgIGxhc3RGb3VyPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGRpc3BsYXkgbmFtZSBvZiB0aGUgc3RvcmVkIHBheW1lbnQgbWV0aG9kLlxuICAgICAqL1xuICAgIG5hbWU6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBzaG9wcGVy4oCZcyBlbWFpbCBhZGRyZXNzLlxuICAgICAqL1xuICAgIHNob3BwZXJFbWFpbD86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBzdXBwb3J0ZWQgc2hvcHBlciBpbnRlcmFjdGlvbnMgZm9yIHRoaXMgc3RvcmVkIHBheW1lbnQgbWV0aG9kLlxuICAgICAqL1xuICAgIHN1cHBvcnRlZFNob3BwZXJJbnRlcmFjdGlvbnM/OiBzdHJpbmdbXTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHBheW1lbnQgbWV0aG9kLlxuICAgICAqL1xuICAgIHR5cGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5UaHJlZURTMk9wdGlvbnMgZXh0ZW5kcyBBZHllbkFkZGl0aW9uYWxBY3Rpb25DYWxsYmFja3Mge1xuICAgIC8qKlxuICAgICAqIFNwZWNpZnkgVGhyZWUzRFMyQ2hhbGxlbmdlIFdpZGdldCBTaXplXG4gICAgICpcbiAgICAgKiBWYWx1ZXNcbiAgICAgKiAnMDEnID0gMjUwcHggeCA0MDBweFxuICAgICAqICcwMicgPSAzOTBweCB4IDQwMHB4XG4gICAgICogJzAzJyA9IDUwMHB4IHggNjAwcHhcbiAgICAgKiAnMDQnID0gNjAwcHggeCA0MDBweFxuICAgICAqICcwNScgPSAxMDAlIHggMTAwJVxuICAgICAqL1xuICAgIHdpZGdldFNpemU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFuayB7XG4gICAgLyoqXG4gICAgICogVGhlIGJhbmsgYWNjb3VudCBudW1iZXIgKHdpdGhvdXQgc2VwYXJhdG9ycykuXG4gICAgICovXG4gICAgYmFua0FjY291bnROdW1iZXI/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFuayBjaXR5LlxuICAgICAqL1xuICAgIGJhbmtDaXR5Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGxvY2F0aW9uIGlkIG9mIHRoZSBiYW5rLiBUaGUgZmllbGQgdmFsdWUgaXMgbmlsIGluIG1vc3QgY2FzZXMuXG4gICAgICovXG4gICAgYmFua0xvY2F0aW9uSWQ/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgYmFuay5cbiAgICAgKi9cbiAgICBiYW5rTmFtZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBCdXNpbmVzcyBJZGVudGlmaWVyIENvZGUgKEJJQykgaXMgdGhlIFNXSUZUIGFkZHJlc3MgYXNzaWduZWQgdG9cbiAgICAgKiBhIGJhbmsuIFRoZSBmaWVsZCB2YWx1ZSBpcyBuaWwgaW4gbW9zdCBjYXNlcy5cbiAgICAgKi9cbiAgICBiaWM/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBDb3VudHJ5IGNvZGUgd2hlcmUgdGhlIGJhbmsgaXMgbG9jYXRlZC5cbiAgICAgKiBBIHZhbGlkIHZhbHVlIGlzIGFuIElTTyB0d28tY2hhcmFjdGVyIGNvdW50cnkgY29kZSAoZS5nLiAnTkwnKS5cbiAgICAgKi9cbiAgICBjb3VudHJ5Q29kZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBJbnRlcm5hdGlvbmFsIEJhbmsgQWNjb3VudCBOdW1iZXIgKElCQU4pLlxuICAgICAqL1xuICAgIGliYW4/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgYmFuayBhY2NvdW50IGhvbGRlci4gSWYgeW91IHN1Ym1pdCBhIG5hbWUgd2l0aCBub24tTGF0aW5cbiAgICAgKiBjaGFyYWN0ZXJzLCB3ZSBhdXRvbWF0aWNhbGx5IHJlcGxhY2Ugc29tZSBvZiB0aGVtIHdpdGggY29ycmVzcG9uZGluZyBMYXRpblxuICAgICAqIGNoYXJhY3RlcnMgdG8gbWVldCB0aGUgRkFURiByZWNvbW1lbmRhdGlvbnMuIEZvciBleGFtcGxlOlxuICAgICAqIM+HMTIgaXMgY29udmVydGVkIHRvIGNoMTIuXG4gICAgICogw7xBIGlzIGNvbnZlcnRlZCB0byBldUEuXG4gICAgICogUGV0ZXIgTcO4bGxlciBpcyBjb252ZXJ0ZWQgdG8gUGV0ZXIgTWxsZXIsIGJlY2F1c2UgYmFua3MgZG9uJ3QgYWNjZXB0ICfDuCcuXG4gICAgICogQWZ0ZXIgcmVwbGFjZW1lbnQsIHRoZSBvd25lck5hbWUgbXVzdCBoYXZlIGF0IGxlYXN0IHRocmVlIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzXG4gICAgICogKEEtWiwgYS16LCAwLTkpLCBhbmQgYXQgbGVhc3Qgb25lIG9mIHRoZW0gbXVzdCBiZSBhIHZhbGlkIExhdGluIGNoYXJhY3RlclxuICAgICAqIChBLVosIGEteikuIEZvciBleGFtcGxlOlxuICAgICAqIEpvaG4xNyAtIGFsbG93ZWQuXG4gICAgICogSjE3IC0gYWxsb3dlZC5cbiAgICAgKiAxNzEgLSBub3QgYWxsb3dlZC5cbiAgICAgKiBKb2huLTcgLSBhbGxvd2VkLlxuICAgICAqL1xuICAgIG93bmVyTmFtZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBiYW5rIGFjY291bnQgaG9sZGVyJ3MgdGF4IElELlxuICAgICAqL1xuICAgIHRheElkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmQge1xuICAgIC8qKlxuICAgICAqIFRoZSBjYXJkIHZlcmlmaWNhdGlvbiBjb2RlICgxLTIwIGNoYXJhY3RlcnMpLiBEZXBlbmRpbmcgb24gdGhlIGNhcmQgYnJhbmQsIGl0XG4gICAgICogaXMga25vd24gYWxzbyBhczpcbiAgICAgKiBDVlYyL0NWQzIg4oCTIGxlbmd0aDogMyBkaWdpdHNcbiAgICAgKiBDSUQg4oCTIGxlbmd0aDogNCBkaWdpdHNcbiAgICAgKi9cbiAgICBjdmM/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2FyZCBleHBpcnkgbW9udGguIEZvcm1hdDogMiBkaWdpdHMsIHplcm8tcGFkZGVkIGZvciBzaW5nbGUgZGlnaXRzLiBGb3IgZXhhbXBsZTpcbiAgICAgKiAwMyA9IE1hcmNoXG4gICAgICogMTEgPSBOb3ZlbWJlclxuICAgICAqIFJlcXVpcmVkXG4gICAgICovXG4gICAgZXhwaXJ5TW9udGg6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBjYXJkIGV4cGlyeSB5ZWFyLiBGb3JtYXQ6IDQgZGlnaXRzLiBGb3IgZXhhbXBsZTogMjAyMFxuICAgICAqIFJlcXVpcmVkXG4gICAgICovXG4gICAgZXhwaXJ5WWVhcjogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGNhcmRob2xkZXIsIGFzIHByaW50ZWQgb24gdGhlIGNhcmQuXG4gICAgICogUmVxdWlyZWRcbiAgICAgKi9cbiAgICBob2xkZXJOYW1lOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaXNzdWUgbnVtYmVyIG9mIHRoZSBjYXJkIChmb3Igc29tZSBVSyBkZWJpdCBjYXJkcyBvbmx5KS5cbiAgICAgKi9cbiAgICBpc3N1ZU51bWJlcj86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBjYXJkIG51bWJlciAoNC0xOSBjaGFyYWN0ZXJzKS4gRG8gbm90IHVzZSBhbnkgc2VwYXJhdG9ycy4gV2hlbiB0aGlzIHZhbHVlIGlzXG4gICAgICogcmV0dXJuZWQgaW4gYSByZXNwb25zZSwgb25seSB0aGUgbGFzdCA0IGRpZ2l0cyBvZiB0aGUgY2FyZCBudW1iZXIgYXJlIHJldHVybmVkLlxuICAgICAqIFJlcXVpcmVkXG4gICAgICovXG4gICAgbnVtYmVyOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbW9udGggY29tcG9uZW50IG9mIHRoZSBzdGFydCBkYXRlIChmb3Igc29tZSBVSyBkZWJpdCBjYXJkcyBvbmx5KS5cbiAgICAgKi9cbiAgICBzdGFydE51bWJlcj86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSB5ZWFyIGNvbXBvbmVudCBvZiB0aGUgc3RhcnQgZGF0ZSAoZm9yIHNvbWUgVUsgZGViaXQgY2FyZHMgb25seSkuXG4gICAgICovXG4gICAgc3RhcnRZZWFyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRTdGF0ZSB7XG4gICAgZGF0YTogQ2FyZERhdGFQYXltZW50TWV0aG9kU3RhdGU7XG4gICAgaXNWYWxpZD86IGJvb2xlYW47XG4gICAgdmFsaWQ/OiB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfTtcbiAgICBlcnJvcnM/OiBDYXJkU3RhdGVFcnJvcnM7XG59XG5cbmludGVyZmFjZSBJZGVhbFN0YXRlRGF0YSB7XG4gICAgaXNzdWVyOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBTZXBhU3RhdGVEYXRhIHtcbiAgICBvd25lck5hbWU6IHN0cmluZztcbiAgICBpYmFuTnVtYmVyOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBDYXJkU3RhdGVEYXRhIHtcbiAgICBlbmNyeXB0ZWRDYXJkTnVtYmVyOiBzdHJpbmc7XG4gICAgZW5jcnlwdGVkRXhwaXJ5TW9udGg6IHN0cmluZztcbiAgICBlbmNyeXB0ZWRFeHBpcnlZZWFyOiBzdHJpbmc7XG4gICAgZW5jcnlwdGVkU2VjdXJpdHlDb2RlOiBzdHJpbmc7XG4gICAgaG9sZGVyTmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuQ29tcG9uZW50U3RhdGUge1xuICAgIGRhdGE/OiBDYXJkU3RhdGVEYXRhIHwgSWRlYWxTdGF0ZURhdGEgfCBTZXBhU3RhdGVEYXRhO1xuICAgIGlzc3Vlcj86IHN0cmluZztcbiAgICBpc1ZhbGlkPzogYm9vbGVhbjtcbiAgICB2YWxpZD86IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9O1xuICAgIGVycm9ycz86IENhcmRTdGF0ZUVycm9ycztcbn1cblxuaW50ZXJmYWNlIENhcmREYXRhUGF5bWVudE1ldGhvZFN0YXRlIHtcbiAgICBwYXltZW50TWV0aG9kOiBDYXJkUGF5bWVudE1ldGhvZFN0YXRlO1xuICAgIGluc3RhbGxtZW50cz86IHsgdmFsdWU6IG51bWJlcjsgcGxhbj86ICdzdHJpbmcnIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZFN0YXRlRXJyb3JzIHtcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2VjaGF0U3RhdGUge1xuICAgIGRhdGE6IFdlY2hhdERhdGFQYXltZW50TWV0aG9kU3RhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQm9sZXRvU3RhdGUge1xuICAgIGRhdGE6IEJvbGV0b0RhdGFQYXltZW50TWV0aG9kU3RhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlZGl0Q2FyZFBsYWNlSG9sZGVyIHtcbiAgICBlbmNyeXB0ZWRDYXJkTnVtYmVyPzogc3RyaW5nO1xuICAgIGVuY3J5cHRlZEV4cGlyeURhdGU/OiBzdHJpbmc7XG4gICAgZW5jcnlwdGVkU2VjdXJpdHlDb2RlOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBBY2NvdW50RGF0YVBheW1lbnRNZXRob2RTdGF0ZSB7XG4gICAgcGF5bWVudE1ldGhvZDogQWR5ZW5QYXltZW50TWV0aG9kU3RhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWNjb3VudFN0YXRlIHtcbiAgICBkYXRhOiBBY2NvdW50RGF0YVBheW1lbnRNZXRob2RTdGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDc3NQcm9wZXJ0aWVzIHtcbiAgICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xuICAgIGNhcmV0Q29sb3I/OiBzdHJpbmc7XG4gICAgY29sb3I/OiBzdHJpbmc7XG4gICAgZGlzcGxheT86IHN0cmluZztcbiAgICBmb250Pzogc3RyaW5nO1xuICAgIGZvbnRGYW1pbHk/OiBzdHJpbmc7XG4gICAgZm9udFNpemU/OiBzdHJpbmc7XG4gICAgZm9udFNpemVBZGp1c3Q/OiBzdHJpbmc7XG4gICAgZm9udFNtb290aGluZz86IHN0cmluZztcbiAgICBmb250U3RyZXRjaD86IHN0cmluZztcbiAgICBmb250U3R5bGU/OiBzdHJpbmc7XG4gICAgZm9udFZhcmlhbnQ/OiBzdHJpbmc7XG4gICAgZm9udFZhcmlhbnRBbHRlcm5hdGVzPzogc3RyaW5nO1xuICAgIGZvbnRWYXJpYW50Q2Fwcz86IHN0cmluZztcbiAgICBmb250VmFyaWFudEVhc3RBc2lhbj86IHN0cmluZztcbiAgICBmb250VmFyaWFudExpZ2F0dXJlcz86IHN0cmluZztcbiAgICBmb250VmFyaWFudE51bWVyaWM/OiBzdHJpbmc7XG4gICAgZm9udFdlaWdodD86IHN0cmluZztcbiAgICBsZXR0ZXJTcGFjaW5nPzogc3RyaW5nO1xuICAgIGxpbmVIZWlnaHQ/OiBzdHJpbmc7XG4gICAgbW96T3N4Rm9udFNtb290aGluZz86IHN0cmluZztcbiAgICBtb3pUcmFuc2l0aW9uPzogc3RyaW5nO1xuICAgIG91dGxpbmU/OiBzdHJpbmc7XG4gICAgb3BhY2l0eT86IHN0cmluZyB8IG51bWJlcjtcbiAgICBwYWRkaW5nPzogc3RyaW5nO1xuICAgIHRleHRBbGlnbj86IHN0cmluZztcbiAgICB0ZXh0U2hhZG93Pzogc3RyaW5nO1xuICAgIHRyYW5zaXRpb24/OiBzdHJpbmc7XG4gICAgd2Via2l0Rm9udFNtb290aGluZz86IHN0cmluZztcbiAgICB3ZWJraXRUcmFuc2l0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1c3RvbUNhcmRBcmlhTGFiZWwge1xuICAgIGxhYmVsPzogc3RyaW5nO1xuICAgIGlmcmFtZVRpdGxlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1c3RvbUNhcmRBcmlhTGFiZWxzIHtcbiAgICBsYW5nPzogc3RyaW5nO1xuICAgIGVuY3J5cHRlZENhcmROdW1iZXI/OiBDdXN0b21DYXJkQXJpYUxhYmVsO1xuICAgIGVuY3J5cHRlZEV4cGlyeURhdGU/OiBDdXN0b21DYXJkQXJpYUxhYmVsO1xuICAgIGVuY3J5cHRlZFNlY3VyaXR5Q29kZT86IEN1c3RvbUNhcmRBcmlhTGFiZWw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JvdXAge1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBncm91cC5cbiAgICAgKi9cbiAgICBuYW1lPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogRWNobyBkYXRhIHRvIGJlIHVzZWQgaWYgdGhlIHBheW1lbnQgbWV0aG9kIGlzIGRpc3BsYXllZCBhcyBwYXJ0IG9mIHRoaXMgZ3JvdXAuXG4gICAgICovXG4gICAgcGF5bWVudE1ldGhvZERhdGE/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdW5pcXVlIGNvZGUgb2YgdGhlIGdyb3VwLlxuICAgICAqL1xuICAgIHR5cGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5wdXREZXRhaWwge1xuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyBmb3IgdGhlIHJlcXVpcmVkIGlucHV0LlxuICAgICAqL1xuICAgIGNvbmZpZ3VyYXRpb24/OiBvYmplY3Q7XG5cbiAgICAvKipcbiAgICAgKiBJbnB1dCBkZXRhaWxzIGNhbiBhbHNvIGJlIHByb3ZpZGVkIHJlY3Vyc2l2ZWx5LlxuICAgICAqL1xuICAgIGRldGFpbHM/OiBTdWJJbnB1dERldGFpbFtdO1xuXG4gICAgLyoqXG4gICAgICogSW4gY2FzZSBvZiBhIHNlbGVjdCwgdGhlIFVSTCBmcm9tIHdoaWNoIHRvIHF1ZXJ5IHRoZSBpdGVtcy5cbiAgICAgKi9cbiAgICBpdGVtU2VhcmNoVXJsPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogSW4gY2FzZSBvZiBhIHNlbGVjdCwgdGhlIGl0ZW1zIHRvIGNob29zZSBmcm9tLlxuICAgICAqL1xuICAgIGl0ZW1zPzogSXRlbVtdO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIHRvIHByb3ZpZGUgaW4gdGhlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBrZXk/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUcnVlIGlmIHRoaXMgaW5wdXQgdmFsdWUgaXMgb3B0aW9uYWwuXG4gICAgICovXG4gICAgb3B0aW9uYWw/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgb2YgdGhlIHJlcXVpcmVkIGlucHV0LlxuICAgICAqL1xuICAgIHR5cGU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgY2FuIGJlIHByZS1maWxsZWQsIGlmIGF2YWlsYWJsZS5cbiAgICAgKi9cbiAgICB2YWx1ZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJdGVtIHtcbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgdG8gcHJvdmlkZSBpbiB0aGUgcmVzdWx0LlxuICAgICAqL1xuICAgIGlkPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGRpc3BsYXkgbmFtZS5cbiAgICAgKi9cbiAgICBuYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnRNZXRob2Qge1xuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgcG9zc2libGUgYnJhbmRzLiBGb3IgZXhhbXBsZTogdmlzYSwgbWMuXG4gICAgICovXG4gICAgYnJhbmRzPzogc3RyaW5nW107XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29uZmlndXJhdGlvbiBvZiB0aGUgcGF5bWVudCBtZXRob2QuXG4gICAgICovXG4gICAgY29uZmlndXJhdGlvbj86IG9iamVjdDtcblxuICAgIC8qKlxuICAgICAqIEFsbCBpbnB1dCBkZXRhaWxzIHRvIGJlIHByb3ZpZGVkIHRvIGNvbXBsZXRlIHRoZSBwYXltZW50IHdpdGggdGhpcyBwYXltZW50XG4gICAgICogbWV0aG9kLlxuICAgICAqL1xuICAgIGRldGFpbHM/OiBJbnB1dERldGFpbFtdO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGdyb3VwIHdoZXJlIHRoaXMgcGF5bWVudCBtZXRob2QgYmVsb25ncyB0by5cbiAgICAgKi9cbiAgICBncm91cD86IEdyb3VwO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGRpc3BsYXlhYmxlIG5hbWUgb2YgdGhpcyBwYXltZW50IG1ldGhvZC5cbiAgICAgKi9cbiAgICBuYW1lPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogRWNobyBkYXRhIHJlcXVpcmVkIHRvIHNlbmQgaW4gbmV4dCBjYWxscy5cbiAgICAgKi9cbiAgICBwYXltZW50TWV0aG9kRGF0YT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoaXMgcGF5bWVudCBtZXRob2Qgc3VwcG9ydHMgdG9rZW5pemF0aW9uIG9yIG5vdC5cbiAgICAgKi9cbiAgICBzdXBwb3J0c1JlY3VycmluZz86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdW5pcXVlIHBheW1lbnQgbWV0aG9kIGNvZGUuXG4gICAgICovXG4gICAgdHlwZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXltZW50TWV0aG9kR3JvdXAge1xuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIHRvIHN1Ym1pdCBmb3IgYW55IHBheW1lbnQgbWV0aG9kIGluIHRoaXMgZ3JvdXAuXG4gICAgICovXG4gICAgZ3JvdXBUeXBlPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGh1bWFuLXJlYWRhYmxlIG5hbWUgb2YgdGhpcyBncm91cC5cbiAgICAgKi9cbiAgICBuYW1lPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHR5cGVzIG9mIHBheW1lbnQgbWV0aG9kcyB0aGF0IGJlbG9uZyBpbiB0aGlzIGdyb3VwLlxuICAgICAqL1xuICAgIHR5cGVzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudE1ldGhvZHNSZXNwb25zZSB7XG4gICAgLyoqXG4gICAgICogR3JvdXBzIG9mIHBheW1lbnQgbWV0aG9kcy5cbiAgICAgKi9cbiAgICBncm91cHM/OiBQYXltZW50TWV0aG9kR3JvdXBbXTtcblxuICAgIC8qKlxuICAgICAqIERldGFpbGVkIGxpc3Qgb2Ygb25lLWNsaWNrIHBheW1lbnQgbWV0aG9kcy5cbiAgICAgKi9cbiAgICBvbmVDbGlja1BheW1lbnRNZXRob2RzPzogUmVjdXJyaW5nRGV0YWlsO1xuXG4gICAgLyoqXG4gICAgICogRGV0YWlsZWQgbGlzdCBvZiBwYXltZW50IG1ldGhvZHMgcmVxdWlyZWQgdG8gZ2VuZXJhdGUgcGF5bWVudCBmb3Jtcy5cbiAgICAgKi9cbiAgICBwYXltZW50TWV0aG9kcz86IFBheW1lbnRNZXRob2RbXTtcblxuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgYWxsIHN0b3JlZCBwYXltZW50IG1ldGhvZHMuXG4gICAgICovXG4gICAgc3RvcmVkUGF5bWVudE1ldGhvZHM/OiBBZHllblN0b3JlZFBheW1lbnRNZXRob2RbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWN1cnJpbmdEZXRhaWwgZXh0ZW5kcyBQYXltZW50TWV0aG9kIHtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVmZXJlbmNlIHRoYXQgdW5pcXVlbHkgaWRlbnRpZmllcyB0aGUgcmVjdXJyaW5nIGRldGFpbC5cbiAgICAgKi9cbiAgICByZWN1cnJpbmdEZXRhaWxSZWZlcmVuY2U/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBDb250YWlucyBpbmZvcm1hdGlvbiBvbiBwcmV2aW91c2x5IHN0b3JlZCBwYXltZW50IGRldGFpbHMuXG4gICAgICovXG4gICAgc3RvcmVkRGV0YWlscz86IFN0b3JlZERldGFpbHM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VwYVBsYWNlSG9sZGVyIHtcbiAgICBvd25lck5hbWU/OiBzdHJpbmc7XG4gICAgaWJhbk51bWJlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdG9yZWREZXRhaWxzIHtcbiAgICAvKipcbiAgICAgKiBUaGUgc3RvcmVkIGJhbmsgYWNjb3VudC5cbiAgICAgKi9cbiAgICBiYW5rPzogQmFuaztcblxuICAgIC8qKlxuICAgICAqIFRoZSBzdG9yZWQgY2FyZCBpbmZvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBjYXJkPzogQ2FyZDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBlbWFpbCBhc3NvY2lhdGVkIHdpdGggc3RvcmVkIHBheW1lbnQgZGV0YWlscy5cbiAgICAgKi9cbiAgICBlbWFpbEFkZHJlc3M/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3R5bGVPcHRpb25zIHtcbiAgICAvKipcbiAgICAgKiBCYXNlIHN0eWxpbmcgYXBwbGllZCB0byB0aGUgaWZyYW1lLiBBbGwgc3R5bGluZyBleHRlbmRzIGZyb20gdGhpcyBzdHlsZS5cbiAgICAgKi9cbiAgICBiYXNlPzogQ3NzUHJvcGVydGllcztcblxuICAgIC8qKlxuICAgICAqIFN0eWxpbmcgYXBwbGllZCB3aGVuIGEgZmllbGQgZmFpbHMgdmFsaWRhdGlvbi5cbiAgICAgKi9cbiAgICBlcnJvcj86IENzc1Byb3BlcnRpZXM7XG5cbiAgICAvKipcbiAgICAgKiBTdHlsaW5nIGFwcGxpZWQgdG8gdGhlIGZpZWxkJ3MgcGxhY2Vob2xkZXIgdmFsdWVzLlxuICAgICAqL1xuICAgIHBsYWNlaG9sZGVyPzogQ3NzUHJvcGVydGllcztcblxuICAgIC8qKlxuICAgICAqIFN0eWxpbmcgYXBwbGllZCBvbmNlIGEgZmllbGQgcGFzc2VzIHZhbGlkYXRpb24uXG4gICAgICovXG4gICAgdmFsaWRhdGVkPzogQ3NzUHJvcGVydGllcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJJbnB1dERldGFpbCB7XG4gICAgLyoqXG4gICAgICogQ29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzIGZvciB0aGUgcmVxdWlyZWQgaW5wdXQuXG4gICAgICovXG4gICAgY29uZmlndXJhdGlvbj86IG9iamVjdDtcblxuICAgIC8qKlxuICAgICAqIEluIGNhc2Ugb2YgYSBzZWxlY3QsIHRoZSBpdGVtcyB0byBjaG9vc2UgZnJvbS5cbiAgICAgKi9cbiAgICBpdGVtcz86IEl0ZW1bXTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB2YWx1ZSB0byBwcm92aWRlIGluIHRoZSByZXN1bHQuXG4gICAgICovXG4gICAga2V5Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiB0aGlzIGlucHV0IGlzIG9wdGlvbmFsIHRvIHByb3ZpZGUuXG4gICAgICovXG4gICAgb3B0aW9uYWw/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgb2YgdGhlIHJlcXVpcmVkIGlucHV0LlxuICAgICAqL1xuICAgIHR5cGU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgY2FuIGJlIHByZS1maWxsZWQsIGlmIGF2YWlsYWJsZS5cbiAgICAgKi9cbiAgICB2YWx1ZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllblYzVGhyZWVEUzJDaGFsbGVuZ2VDb21wb25lbnRPcHRpb25zIHtcbiAgICBjaGFsbGVuZ2VXaW5kb3dTaXplPzogc3RyaW5nO1xuICAgIG9uQWRkaXRpb25hbERldGFpbHM/KHN0YXRlOiBBZHllbkFkZGl0aW9uYWxBY3Rpb25TdGF0ZSwgY29tcG9uZW50PzogQWR5ZW5Db21wb25lbnQpOiB2b2lkO1xuICAgIG9uQWN0aW9uSGFuZGxlZD8ocnRuT2JqOiBBY3Rpb25IYW5kbGVkUmV0dXJuT2JqZWN0KTogdm9pZDtcbiAgICBvbkVycm9yKGVycm9yOiBBZHllbkVycm9yKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllblYyVGhyZWVEUzJDaGFsbGVuZ2VDb21wb25lbnRPcHRpb25zIHtcbiAgICBzaXplPzogc3RyaW5nO1xuICAgIG9uQWRkaXRpb25hbERldGFpbHM/KHN0YXRlOiBBZHllbkFkZGl0aW9uYWxBY3Rpb25TdGF0ZSwgY29tcG9uZW50PzogQWR5ZW5Db21wb25lbnQpOiB2b2lkO1xuICAgIG9uQWN0aW9uSGFuZGxlZD8ocnRuT2JqOiBBY3Rpb25IYW5kbGVkUmV0dXJuT2JqZWN0KTogdm9pZDtcbiAgICBvbkVycm9yKGVycm9yOiBBZHllbkVycm9yKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25IYW5kbGVkUmV0dXJuT2JqZWN0IHtcbiAgICBjb21wb25lbnRUeXBlOiBzdHJpbmc7XG4gICAgYWN0aW9uRGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUaHJlZURTMkRldmljZUZpbmdlcnByaW50Q29tcG9uZW50T3B0aW9ucyB7XG4gICAgb25BY3Rpb25IYW5kbGVkPyhydG5PYmo6IEFjdGlvbkhhbmRsZWRSZXR1cm5PYmplY3QpOiB2b2lkO1xuICAgIG9uQWRkaXRpb25hbERldGFpbHM/KHN0YXRlOiBBZHllbkFkZGl0aW9uYWxBY3Rpb25TdGF0ZSwgY29tcG9uZW50PzogQWR5ZW5Db21wb25lbnQpOiB2b2lkO1xuICAgIG9uRXJyb3IoZXJyb3I6IEFkeWVuRXJyb3IpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuVmFsaWRhdGlvblN0YXRlIHtcbiAgICB2YWxpZDogYm9vbGVhbjtcbiAgICBmaWVsZFR5cGU/OiBBZHllbkNhcmRGaWVsZHM7XG4gICAgZW5kRGlnaXRzPzogc3RyaW5nO1xuICAgIGVuY3J5cHRlZEZpZWxkTmFtZT86IHN0cmluZztcbiAgICBpMThuPzogc3RyaW5nO1xuICAgIGVycm9yPzogc3RyaW5nO1xuICAgIGVycm9yS2V5Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBBZHllbkNhcmRGaWVsZHMge1xuICAgIENhcmROdW1iZXIgPSAnZW5jcnlwdGVkQ2FyZE51bWJlcicsXG4gICAgU2VjdXJpdHlDb2RlID0gJ2VuY3J5cHRlZFNlY3VyaXR5Q29kZScsXG4gICAgRXhwaXJ5RGF0ZSA9ICdlbmNyeXB0ZWRFeHBpcnlEYXRlJyxcbn1cblxuZXhwb3J0IHR5cGUgQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlID0gQ2FyZFN0YXRlIHwgQm9sZXRvU3RhdGUgfCBXZWNoYXRTdGF0ZTtcblxuZXhwb3J0IHR5cGUgQWR5ZW5Db21wb25lbnRPcHRpb25zID1cbiAgICB8IEFkeWVuQ3JlZGl0Q2FyZENvbXBvbmVudE9wdGlvbnNcbiAgICB8IEFkeWVuSWRlYWxDb21wb25lbnRPcHRpb25zXG4gICAgfCBBZHllbkJvbGV0b0NvbXBvbmVudE9wdGlvbnNcbiAgICB8IEFkeWVuQ3VzdG9tQ2FyZENvbXBvbmVudE9wdGlvbnM7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WM1BheW1lbnRNZXRob2RJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIGNsaWVudEtleT86IHN0cmluZztcbiAgICBlbnZpcm9ubWVudD86IHN0cmluZztcbiAgICBwYXltZW50TWV0aG9kc1Jlc3BvbnNlPzogUGF5bWVudE1ldGhvZHNSZXNwb25zZTtcbiAgICBwcmVmaWxsQ2FyZEhvbGRlck5hbWU/OiBib29sZWFuO1xuICAgIGluc3RhbGxtZW50T3B0aW9ucz86IG51bGwgfCB7XG4gICAgICAgIGNhcmQ/OiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG51bWJlcltdO1xuICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgfTtcbiAgICAgICAgdmlzYT86IHtcbiAgICAgICAgICAgIHZhbHVlczogbnVtYmVyW107XG4gICAgICAgICAgICBwbGFucz86IHN0cmluZ1tdO1xuICAgICAgICB9O1xuICAgICAgICBtYz86IHtcbiAgICAgICAgICAgIHZhbHVlczogbnVtYmVyW107XG4gICAgICAgICAgICBwbGFucz86IHN0cmluZ1tdO1xuICAgICAgICB9O1xuICAgICAgICBkaW5lcnM/OiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG51bWJlcltdO1xuICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgfTtcbiAgICAgICAgamNiPzoge1xuICAgICAgICAgICAgdmFsdWVzOiBudW1iZXJbXTtcbiAgICAgICAgICAgIHBsYW5zPzogc3RyaW5nW107XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllblYyUGF5bWVudE1ldGhvZEluaXRpYWxpemF0aW9uRGF0YSB7XG4gICAgb3JpZ2luS2V5Pzogc3RyaW5nO1xuICAgIGNsaWVudEtleT86IHN0cmluZztcbiAgICBlbnZpcm9ubWVudD86IHN0cmluZztcbiAgICBwYXltZW50TWV0aG9kc1Jlc3BvbnNlPzogUGF5bWVudE1ldGhvZHNSZXNwb25zZTtcbiAgICBwcmVmaWxsQ2FyZEhvbGRlck5hbWU/OiBib29sZWFuO1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlIHtcbiAgICBDaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkLFxuICAgIEN1c3RvbWVyTm90SW5pdGlhbGl6ZWQsXG4gICAgUGF5bWVudE5vdEluaXRpYWxpemVkLFxuICAgIFNoaXBwaW5nTm90SW5pdGlhbGl6ZWQsXG4gICAgU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIGEgbWV0aG9kIHJlcXVpcmVzIGEgY2VydGFpbiBpbml0aWFsaXphdGlvbiBjYWxsIHRvIGJlXG4gKiBtYWRlIGZpcnN0LiBTb21lIG9iamVjdHMgY2FuIGJlIGNvbnN0cnVjdGVkIGJ1dCB0aGV5IGNhbm5vdCBiZSB1c2VkIHVudGlsIGFcbiAqIHNlcGFyYXRlIGluaXRpYWxpemF0aW9uIGNhbGwgaXMgbWFkZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW5pdGlhbGl6ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbml0aWFsaXplZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbml0aWFsaXplZCc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGN1c3RvbWVyIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHNoaXBwaW5nIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjaGVja291dCBzcGFtIHByb3RlY3Rpb24gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciwgU3R5bGVzaGVldExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgQWR5ZW5DbGllbnQsIEFkeWVuQ29uZmlndXJhdGlvbiwgQWR5ZW5WMkhvc3RXaW5kb3cgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkeWVuVjJTY3JpcHRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIF9zY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSBfc3R5bGVzaGVldExvYWRlcjogU3R5bGVzaGVldExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSBfd2luZG93OiBBZHllblYySG9zdFdpbmRvdyA9IHdpbmRvdyxcbiAgICApIHt9XG5cbiAgICBhc3luYyBsb2FkKGNvbmZpZ3VyYXRpb246IEFkeWVuQ29uZmlndXJhdGlvbik6IFByb21pc2U8QWR5ZW5DbGllbnQ+IHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgdGhpcy5fc3R5bGVzaGVldExvYWRlci5sb2FkU3R5bGVzaGVldChcbiAgICAgICAgICAgICAgICBgaHR0cHM6Ly9jaGVja291dHNob3BwZXItJHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5lbnZpcm9ubWVudCA/PyAnJ1xuICAgICAgICAgICAgICAgIH0uYWR5ZW4uY29tL2NoZWNrb3V0c2hvcHBlci9zZGsvMy4xMC4xL2FkeWVuLmNzc2AsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcmVwZW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyaXR5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaGEzODQtOG9mZ0lDWlovazVjQzVON3hlZ3FGWk9BNzNIOVJRN0gxMzQzOUpmQVpXOEdqM3FqdUtMMmlzYVREM0dNSWhERScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjcm9zc29yaWdpbjogJ2Fub255bW91cycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChcbiAgICAgICAgICAgICAgICBgaHR0cHM6Ly9jaGVja291dHNob3BwZXItJHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5lbnZpcm9ubWVudCA/PyAnJ1xuICAgICAgICAgICAgICAgIH0uYWR5ZW4uY29tL2NoZWNrb3V0c2hvcHBlci9zZGsvMy4xMC4xL2FkeWVuLmpzYCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JpdHk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NoYTM4NC13RzJ6OXpTUW82MUVJdnlYbWlGQ28rekIzeTBaQjRoc3JYVmNBTm1wUDhITHRoam9RSlFQQmg3dFpLSlNWOGpBJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyb3Nzb3JpZ2luOiAnYW5vbnltb3VzJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKSxcbiAgICAgICAgXSk7XG5cbiAgICAgICAgaWYgKCF0aGlzLl93aW5kb3cuQWR5ZW5DaGVja291dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuX3dpbmRvdy5BZHllbkNoZWNrb3V0KGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG1vZHVsZSwgeyByZXNvbHZlSWRzIH0pO1xufVxuIiwiaW1wb3J0IHsgQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlLCBDYXJkU3RhdGUgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQ2FyZFN0YXRlKHBhcmFtOiBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUpOiBwYXJhbSBpcyBDYXJkU3RhdGUge1xuICAgIHJldHVybiAoXG4gICAgICAgICh0eXBlb2YgcGFyYW0gPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICB0eXBlb2YgKHBhcmFtIGFzIENhcmRTdGF0ZSkuZGF0YS5wYXltZW50TWV0aG9kLmVuY3J5cHRlZFNlY3VyaXR5Q29kZSA9PT0gJ3N0cmluZycpIHx8XG4gICAgICAgIHR5cGVvZiAocGFyYW0gYXMgQ2FyZFN0YXRlKS5kYXRhLnBheW1lbnRNZXRob2QuZW5jcnlwdGVkRXhwaXJ5TW9udGggPT09ICdzdHJpbmcnXG4gICAgKTtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgbWV0aG9kIGlzIHVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlXG4gKiBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIGFyZ3VtZW50cyBhY2NvcmRpbmcgdG8gdGhlaXIgcmVxdWlyZW1lbnRzLFxuICogaS5lLjogaWYgYW4gYXJndW1lbnQgaXMgbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52YWxpZEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0ludmFsaWQgYXJndW1lbnRzIGhhdmUgYmVlbiBwcm92aWRlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnSW52YWxpZEFyZ3VtZW50RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnaW52YWxpZF9hcmd1bWVudCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IEludmFsaWRBcmd1bWVudEVycm9yIGZyb20gJy4vaW52YWxpZC1hcmd1bWVudC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gd2UgYXJlIHVuYWJsZSB0byBzdWJtaXQgYSBwYXltZW50IGJlY2F1c2VcbiAqIHRoZSBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcywgaS5lLjogaWYgYW4gYXJndW1lbnQgaXNcbiAqIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciBleHRlbmRzIEludmFsaWRBcmd1bWVudEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihpbnZhbGlkRmllbGRzPzogc3RyaW5nW10pIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGZvciB0aGUgb3JkZXIgYmVjYXVzZSB0aGUgcGF5bG9hZCBpcyBpbnZhbGlkLic7XG5cbiAgICAgICAgaWYgKGludmFsaWRGaWVsZHMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtpbnZhbGlkRmllbGRzLmpvaW4oXG4gICAgICAgICAgICAgICAgJywgJyxcbiAgICAgICAgICAgICl9LmA7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEZvcm1hdHRlZFBheWxvYWQsXG4gICAgRm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICcuL3BheW1lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1ZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgVmF1bHRlZEluc3RydW1lbnQge1xuICAgIHJldHVybiBCb29sZWFuKChpbnN0cnVtZW50IGFzIFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgICBCb29sZWFuKChpbnN0cnVtZW50IGFzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdHJ1bWVudCwgJ2NjTnVtYmVyJykgJiZcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0cnVtZW50LCAnY2NDdnYnKVxuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Zvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgRm9ybWF0dGVkUGF5bG9hZDxGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudD4ge1xuICAgIGNvbnN0IGZvcm1hdHRlZEluc3RydW1lbnQgPSAoaW5zdHJ1bWVudCBhcyBGb3JtYXR0ZWRQYXlsb2FkPEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50PilcbiAgICAgICAgLmZvcm1hdHRlZFBheWxvYWQ7XG5cbiAgICBpZiAoIWZvcm1hdHRlZEluc3RydW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgQm9vbGVhbihmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiAmJiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbi50b2tlbilcbiAgICApO1xufVxuIiwiaW1wb3J0IEJyb3dzZXJJbmZvIGZyb20gJy4vYnJvd3Nlci1pbmZvJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0QnJvd3NlckluZm8oKTogQnJvd3NlckluZm8ge1xuICAgIGNvbnN0IHsgbmF2aWdhdG9yIH0gPSB3aW5kb3c7XG5cbiAgICBsZXQgbGFuZ3VhZ2U6IHN0cmluZztcblxuICAgIGlmIChuYXZpZ2F0b3IubGFuZ3VhZ2UpIHtcbiAgICAgICAgbGFuZ3VhZ2UgPSBuYXZpZ2F0b3IubGFuZ3VhZ2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGFuZ3VhZ2UgPSAobmF2aWdhdG9yIGFzIGFueSkudXNlckxhbmd1YWdlO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbG9yX2RlcHRoOiB3aW5kb3cuc2NyZWVuLmNvbG9yRGVwdGggfHwgMjQsXG4gICAgICAgIGphdmFfZW5hYmxlZDogdHlwZW9mIG5hdmlnYXRvci5qYXZhRW5hYmxlZCA9PT0gJ2Z1bmN0aW9uJyA/IG5hdmlnYXRvci5qYXZhRW5hYmxlZCgpIDogZmFsc2UsXG4gICAgICAgIGxhbmd1YWdlLFxuICAgICAgICBzY3JlZW5faGVpZ2h0OiB3aW5kb3cuc2NyZWVuLmhlaWdodCxcbiAgICAgICAgc2NyZWVuX3dpZHRoOiB3aW5kb3cuc2NyZWVuLndpZHRoLFxuICAgICAgICB0aW1lX3pvbmVfb2Zmc2V0OiBuZXcgRGF0ZSgpLmdldFRpbWV6b25lT2Zmc2V0KCkudG9TdHJpbmcoKSxcbiAgICB9O1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gdGhlIHBheW1lbnQgZmxvdyBpcyBjYW5jZWxsZWQuIEl0IGNvdWxkIGJlXG4gKiBkdWUgdG8gYSBkZWxpYmVyYXRlIHVzZXIgaW50ZXJhY3Rpb24sIGkuZS46IHRoZSB1c2VyIGNsaWNrcyBvbiBhIGNhbmNlbFxuICogYnV0dG9uIHdoaWNoIGRpc21pc3NlcyB0aGUgcGF5bWVudCBtb2RhbC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdQYXltZW50IHByb2Nlc3Mgd2FzIGNhbmNlbGxlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfY2FuY2VsbGVkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8vIEhhdmUgdG8gdXNlIGBhc2AgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzM5ODcwNDQvdHlwZWd1YXJkaW5nLWFuLXVua25vd24tbmVzdGVkLW9iamVjdCBzaG91bGQgYmUgZml4ZWQgaW4gNC44K1xuY29uc3QgaXNSZXF1ZXN0RXJyb3IgPSAoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBSZXF1ZXN0RXJyb3IgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdib2R5JyBpbiBlcnJvcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzUmVxdWVzdEVycm9yO1xuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzIHtcbiAgICBba2V5OiBzdHJpbmddOiBBcnJheTx7IG1lc3NhZ2U6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50SW52YWxpZEZvcm1FcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBkZXRhaWxzOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMsIG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBmb3JtIGNvbnRhaW5zIGludmFsaWQgZGF0YS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEludmFsaWRGb3JtRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9pbnZhbGlkX2Zvcm0nO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IHNvbWUgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEFkeWVuQWN0aW9uLFxuICAgIEFkeWVuQWRkaXRpb25hbEFjdGlvbixcbiAgICBBZHllbkFkZGl0aW9uYWxBY3Rpb25TdGF0ZSxcbiAgICBBZHllbkNsaWVudCxcbiAgICBBZHllbkNvbXBvbmVudCxcbiAgICBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUsXG4gICAgQWR5ZW5Db21wb25lbnRUeXBlLFxuICAgIEFkeWVuRXJyb3IsXG4gICAgQWR5ZW5QYXltZW50TWV0aG9kVHlwZSxcbiAgICBBZHllblBsYWNlaG9sZGVyRGF0YSxcbiAgICBBZHllblYyQWN0aW9uVHlwZSxcbiAgICBBZHllblYyUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIEFkeWVuVjJQYXltZW50TWV0aG9kSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIEFkeWVuVjJTY3JpcHRMb2FkZXIsXG4gICAgQ2FyZFN0YXRlRXJyb3JzLFxuICAgIGlzQWNjb3VudFN0YXRlLFxuICAgIGlzQ2FyZFN0YXRlLFxuICAgIFdpdGhBZHllblYyUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2FkeWVuLXV0aWxzJztcbmltcG9ydCB7XG4gICAgQmlsbGluZ0FkZHJlc3MsXG4gICAgZ2V0QnJvd3NlckluZm8sXG4gICAgSG9zdGVkSW5zdHJ1bWVudCxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc1JlcXVlc3RFcnJvcixcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudCxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlbGVjdG9ycyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yLFxuICAgIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWR5ZW5WMlBheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBfYWR5ZW5DbGllbnQ/OiBBZHllbkNsaWVudDtcbiAgICBwcml2YXRlIF9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50PzogQWR5ZW5Db21wb25lbnQ7XG4gICAgcHJpdmF0ZSBfY29tcG9uZW50U3RhdGU/OiBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGU7XG4gICAgcHJpdmF0ZSBfcGF5bWVudENvbXBvbmVudD86IEFkeWVuQ29tcG9uZW50O1xuICAgIHByaXZhdGUgX3BheW1lbnRJbml0aWFsaXplT3B0aW9ucz86IEFkeWVuVjJQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBfcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBfc2NyaXB0TG9hZGVyOiBBZHllblYyU2NyaXB0TG9hZGVyLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhBZHllblYyUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGFkeWVudjIgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFhZHllbnYyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYWR5ZW52MlwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3BheW1lbnRJbml0aWFsaXplT3B0aW9ucyA9IGFkeWVudjI7XG5cbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2VcbiAgICAgICAgICAgIC5nZXRTdGF0ZSgpXG4gICAgICAgICAgICAuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QWR5ZW5WMlBheW1lbnRNZXRob2RJbml0aWFsaXphdGlvbkRhdGE+KG9wdGlvbnMubWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IG9yaWdpbktleSwgY2xpZW50S2V5LCBlbnZpcm9ubWVudCwgcGF5bWVudE1ldGhvZHNSZXNwb25zZSB9ID1cbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCBjbGllbnRTaWRlQXV0aGVudGljYXRpb24gPSB7XG4gICAgICAgICAgICBrZXk6ICcnLFxuICAgICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChvcmlnaW5LZXkpIHtcbiAgICAgICAgICAgIGNsaWVudFNpZGVBdXRoZW50aWNhdGlvbi5rZXkgPSAnb3JpZ2luS2V5JztcbiAgICAgICAgICAgIGNsaWVudFNpZGVBdXRoZW50aWNhdGlvbi52YWx1ZSA9IG9yaWdpbktleTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNsaWVudFNpZGVBdXRoZW50aWNhdGlvbi5rZXkgPSAnY2xpZW50S2V5JztcbiAgICAgICAgICAgIGNsaWVudFNpZGVBdXRoZW50aWNhdGlvbi52YWx1ZSA9IGNsaWVudEtleSB8fCAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2FkeWVuQ2xpZW50ID0gYXdhaXQgdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWQoe1xuICAgICAgICAgICAgZW52aXJvbm1lbnQsXG4gICAgICAgICAgICBsb2NhbGU6IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRMb2NhbGUoKSxcbiAgICAgICAgICAgIFtjbGllbnRTaWRlQXV0aGVudGljYXRpb24ua2V5XTogY2xpZW50U2lkZUF1dGhlbnRpY2F0aW9uLnZhbHVlLFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZHNSZXNwb25zZSxcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uczoge1xuICAgICAgICAgICAgICAgIGVzOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICAgICAgJ2VzLUFSJzogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgICAgICdlcy1FUyc6IHsgJ2NyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlJzogJ0ZlY2hhIGRlIGNhZHVjaWRhZCcgfSxcbiAgICAgICAgICAgICAgICAnZXMtTVgnOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICAgICAgJ2VzLUNMJzogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgICAgICdlcy1DTyc6IHsgJ2NyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlJzogJ0ZlY2hhIGRlIGNhZHVjaWRhZCcgfSxcbiAgICAgICAgICAgICAgICAnZXMtUEUnOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9wYXltZW50Q29tcG9uZW50ID0gYXdhaXQgdGhpcy5fbW91bnRQYXltZW50Q29tcG9uZW50KHBheW1lbnRNZXRob2QpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QubWV0aG9kID09PSBBZHllblBheW1lbnRNZXRob2RUeXBlLkNyZWRpdENhcmQgfHxcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QubWV0aG9kID09PSBBZHllblBheW1lbnRNZXRob2RUeXBlLkJhbmNvbnRhY3RcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50ID0gYXdhaXQgdGhpcy5fbW91bnRDYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0gcGF5bWVudCAmJiBwYXltZW50LnBheW1lbnREYXRhO1xuICAgICAgICBjb25zdCBzaG91bGRTYXZlSW5zdHJ1bWVudCA9XG4gICAgICAgICAgICBwYXltZW50RGF0YSAmJiAocGF5bWVudERhdGEgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2F2ZUluc3RydW1lbnQ7XG4gICAgICAgIGNvbnN0IHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPVxuICAgICAgICAgICAgcGF5bWVudERhdGEgJiYgKHBheW1lbnREYXRhIGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdmFsaWRhdGVDYXJkRGF0YSgpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFN0YXRlID0gdGhpcy5fY29tcG9uZW50U3RhdGU7XG5cbiAgICAgICAgaWYgKCFjb21wb25lbnRTdGF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXltZW50RGF0YSAmJiBpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnREYXRhKSkge1xuICAgICAgICAgICAgbGV0IGJpZ3BheVRva2VuID0ge307XG5cbiAgICAgICAgICAgIGlmIChpc0NhcmRTdGF0ZShjb21wb25lbnRTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZENhcmROdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZFNlY3VyaXR5Q29kZSxcbiAgICAgICAgICAgICAgICAgICAgZW5jcnlwdGVkRXhwaXJ5TW9udGgsXG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZEV4cGlyeVllYXIsXG4gICAgICAgICAgICAgICAgfSA9IGNvbXBvbmVudFN0YXRlLmRhdGEucGF5bWVudE1ldGhvZDtcblxuICAgICAgICAgICAgICAgIGJpZ3BheVRva2VuID0ge1xuICAgICAgICAgICAgICAgICAgICBjcmVkaXRfY2FyZF9udW1iZXJfY29uZmlybWF0aW9uOiBlbmNyeXB0ZWRDYXJkTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBleHBpcnlfbW9udGg6IGVuY3J5cHRlZEV4cGlyeU1vbnRoLFxuICAgICAgICAgICAgICAgICAgICBleHBpcnlfeWVhcjogZW5jcnlwdGVkRXhwaXJ5WWVhcixcbiAgICAgICAgICAgICAgICAgICAgdmVyaWZpY2F0aW9uX3ZhbHVlOiBlbmNyeXB0ZWRTZWN1cml0eUNvZGUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzQ2FyZFN0YXRlKGNvbXBvbmVudFN0YXRlKSB8fCBpc0FjY291bnRTdGF0ZShjb21wb25lbnRTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGF5bWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaWdwYXlfdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmJpZ3BheVRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHBheW1lbnREYXRhLmluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyX2luZm86IGdldEJyb3dzZXJJbmZvKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCB8fCBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kSWQ6IHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGl0X2NhcmRfdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jb21wb25lbnRTdGF0ZS5kYXRhLnBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyX2luZm86IGdldEJyb3dzZXJJbmZvKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6IHNob3VsZFNhdmVJbnN0cnVtZW50IHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCB8fCBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50U3RhdGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMuX3BheW1lbnRDb21wb25lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3BheW1lbnRDb21wb25lbnQudW5tb3VudCgpO1xuICAgICAgICAgICAgdGhpcy5fcGF5bWVudENvbXBvbmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50LnVubW91bnQoKTtcbiAgICAgICAgICAgIHRoaXMuX2NhcmRWZXJpZmljYXRpb25Db21wb25lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0QWR5ZW5DbGllbnQoKTogQWR5ZW5DbGllbnQge1xuICAgICAgICBpZiAoIXRoaXMuX2FkeWVuQ2xpZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkeWVuQ2xpZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpOiBBZHllblYyUGF5bWVudEluaXRpYWxpemVPcHRpb25zIHtcbiAgICAgICAgaWYgKCF0aGlzLl9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnXCJvcHRpb25zLmFkeWVudjJcIiBhcmd1bWVudCB3YXMgbm90IHByb3ZpZGVkIGR1cmluZyBpbml0aWFsaXphdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0VGhyZWVEUzJDaGFsbGVuZ2VXaWRnZXRTaXplKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHsgYWRkaXRpb25hbEFjdGlvbk9wdGlvbnMsIHRocmVlRFMyT3B0aW9ucyB9ID0gdGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IHdpZGdldFNpemUgPSBhZGRpdGlvbmFsQWN0aW9uT3B0aW9ucy53aWRnZXRTaXplIHx8IHRocmVlRFMyT3B0aW9ucz8ud2lkZ2V0U2l6ZTtcblxuICAgICAgICBpZiAoIXdpZGdldFNpemUpIHtcbiAgICAgICAgICAgIHJldHVybiAnMDUnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHdpZGdldFNpemU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlQWN0aW9uKGFkZGl0aW9uYWxBY3Rpb246IEFkeWVuQWRkaXRpb25hbEFjdGlvbik6IFByb21pc2U8UGF5bWVudD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyB0aHJlZURTMkNvbnRhaW5lcklkLCBhZGRpdGlvbmFsQWN0aW9uT3B0aW9ucyB9ID1cbiAgICAgICAgICAgICAgICB0aGlzLl9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMoKTtcbiAgICAgICAgICAgIGNvbnN0IHsgb25CZWZvcmVMb2FkLCBjb250YWluZXJJZCwgb25Mb2FkLCBvbkNvbXBsZXRlIH0gPSBhZGRpdGlvbmFsQWN0aW9uT3B0aW9ucztcbiAgICAgICAgICAgIGNvbnN0IGFkeWVuQWN0aW9uOiBBZHllbkFjdGlvbiA9IEpTT04ucGFyc2UoYWRkaXRpb25hbEFjdGlvbi5hY3Rpb24pO1xuXG4gICAgICAgICAgICBjb25zdCBhZGRpdGlvbmFsQWN0aW9uQ29tcG9uZW50ID0gdGhpcy5fZ2V0QWR5ZW5DbGllbnQoKS5jcmVhdGVGcm9tQWN0aW9uKGFkeWVuQWN0aW9uLCB7XG4gICAgICAgICAgICAgICAgb25BZGRpdGlvbmFsRGV0YWlsczogKGFkZGl0aW9uYWxBY3Rpb25TdGF0ZTogQWR5ZW5BZGRpdGlvbmFsQWN0aW9uU3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF5bWVudFBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RJZDogYWR5ZW5BY3Rpb24ucGF5bWVudE1ldGhvZFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbmNlOiBKU09OLnN0cmluZ2lmeShhZGRpdGlvbmFsQWN0aW9uU3RhdGUuZGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNpemU6IHRoaXMuX2dldFRocmVlRFMyQ2hhbGxlbmdlV2lkZ2V0U2l6ZSgpLFxuICAgICAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcjogQWR5ZW5FcnJvcikgPT4gcmVqZWN0KGVycm9yKSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAob25CZWZvcmVMb2FkKSB7XG4gICAgICAgICAgICAgICAgb25CZWZvcmVMb2FkKFxuICAgICAgICAgICAgICAgICAgICBhZHllbkFjdGlvbi50eXBlID09PSBBZHllblYyQWN0aW9uVHlwZS5UaHJlZURTMkNoYWxsZW5nZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgYWR5ZW5BY3Rpb24udHlwZSA9PT0gQWR5ZW5WMkFjdGlvblR5cGUuUVJDb2RlLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db21wb25lbnQubW91bnQoYCMke2NvbnRhaW5lcklkIHx8IHRocmVlRFMyQ29udGFpbmVySWR9YCk7XG5cbiAgICAgICAgICAgIGlmIChvbkxvYWQpIHtcbiAgICAgICAgICAgICAgICBvbkxvYWQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcigpKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbkNvbXBvbmVudC51bm1vdW50KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX21hcEFkeWVuUGxhY2Vob2xkZXJEYXRhKFxuICAgICAgICBiaWxsaW5nQWRkcmVzcz86IEJpbGxpbmdBZGRyZXNzLFxuICAgICAgICBwcmVmaWxsQ2FyZEhvbGRlck5hbWU/OiBib29sZWFuLFxuICAgICk6IEFkeWVuUGxhY2Vob2xkZXJEYXRhIHtcbiAgICAgICAgaWYgKCFiaWxsaW5nQWRkcmVzcykge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICAgICBhZGRyZXNzMTogc3RyZWV0LFxuICAgICAgICAgICAgYWRkcmVzczI6IGhvdXNlTnVtYmVyT3JOYW1lLFxuICAgICAgICAgICAgcG9zdGFsQ29kZSxcbiAgICAgICAgICAgIGNpdHksXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBzdGF0ZU9yUHJvdmluY2UsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogY291bnRyeSxcbiAgICAgICAgfSA9IGJpbGxpbmdBZGRyZXNzO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBob2xkZXJOYW1lOiBwcmVmaWxsQ2FyZEhvbGRlck5hbWUgPyBgJHtmaXJzdE5hbWV9ICR7bGFzdE5hbWV9YCA6ICcnLFxuICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3M6IHtcbiAgICAgICAgICAgICAgICBzdHJlZXQsXG4gICAgICAgICAgICAgICAgaG91c2VOdW1iZXJPck5hbWUsXG4gICAgICAgICAgICAgICAgcG9zdGFsQ29kZSxcbiAgICAgICAgICAgICAgICBjaXR5LFxuICAgICAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZSxcbiAgICAgICAgICAgICAgICBjb3VudHJ5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tb3VudENhcmRWZXJpZmljYXRpb25Db21wb25lbnQoKTogUHJvbWlzZTxBZHllbkNvbXBvbmVudD4ge1xuICAgICAgICBjb25zdCBhZHllbnYyID0gdGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IGFkeWVuQ2xpZW50ID0gdGhpcy5fZ2V0QWR5ZW5DbGllbnQoKTtcbiAgICAgICAgbGV0IGNhcmRWZXJpZmljYXRpb25Db21wb25lbnQ6IEFkeWVuQ29tcG9uZW50O1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoYWR5ZW52Mi5jYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWQpIHtcbiAgICAgICAgICAgICAgICBjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50ID0gYWR5ZW5DbGllbnQuY3JlYXRlKEFkeWVuQ29tcG9uZW50VHlwZS5TZWN1cmVkRmllbGRzLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmFkeWVudjIub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYyLm9wdGlvbnM/LnN0eWxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXRDb2xvcjogJyMwMDAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmFkeWVudjIub3B0aW9ucz8uc3R5bGVzPy5wbGFjZWhvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAoY29tcG9uZW50U3RhdGUpID0+IHRoaXMuX3VwZGF0ZUNvbXBvbmVudFN0YXRlKGNvbXBvbmVudFN0YXRlKSxcbiAgICAgICAgICAgICAgICAgICAgb25FcnJvcjogKHZhbGlkYXRlU3RhdGUpID0+IGFkeWVudjIudmFsaWRhdGVDYXJkRmllbGRzKHZhbGlkYXRlU3RhdGUpLFxuICAgICAgICAgICAgICAgICAgICBvbkZpZWxkVmFsaWQ6ICh2YWxpZGF0ZVN0YXRlKSA9PiBhZHllbnYyLnZhbGlkYXRlQ2FyZEZpZWxkcyh2YWxpZGF0ZVN0YXRlKSxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNhcmRWZXJpZmljYXRpb25Db21wb25lbnQubW91bnQoYCMke2FkeWVudjIuY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkfWApO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc29sdmUoY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX21vdW50UGF5bWVudENvbXBvbmVudChwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kKTogUHJvbWlzZTxBZHllbkNvbXBvbmVudD4ge1xuICAgICAgICBsZXQgcGF5bWVudENvbXBvbmVudDogQWR5ZW5Db21wb25lbnQ7XG4gICAgICAgIGNvbnN0IGFkeWVudjIgPSB0aGlzLl9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMoKTtcbiAgICAgICAgY29uc3QgYWR5ZW5DbGllbnQgPSB0aGlzLl9nZXRBZHllbkNsaWVudCgpO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKHBheW1lbnRNZXRob2QubWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBBZHllblBheW1lbnRNZXRob2RUeXBlLkNyZWRpdENhcmQ6XG4gICAgICAgICAgICAgICAgY2FzZSBBZHllblBheW1lbnRNZXRob2RUeXBlLkFDSDpcbiAgICAgICAgICAgICAgICBjYXNlIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUuQmFuY29udGFjdDoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRTdGF0ZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0QmlsbGluZ0FkZHJlc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBwcmVmaWxsQ2FyZEhvbGRlck5hbWUgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnRDb21wb25lbnQgPSBhZHllbkNsaWVudC5jcmVhdGUocGF5bWVudE1ldGhvZC5tZXRob2QsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmFkeWVudjIub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAoY29tcG9uZW50U3RhdGUpID0+IHRoaXMuX3VwZGF0ZUNvbXBvbmVudFN0YXRlKGNvbXBvbmVudFN0YXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuX21hcEFkeWVuUGxhY2Vob2xkZXJEYXRhKGJpbGxpbmdBZGRyZXNzLCBwcmVmaWxsQ2FyZEhvbGRlck5hbWUpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudENvbXBvbmVudC5tb3VudChgIyR7YWR5ZW52Mi5jb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5JREVBTDpcbiAgICAgICAgICAgICAgICBjYXNlIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUuU0VQQTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhZHllbnYyLmhhc1ZhdWx0ZWRJbnN0cnVtZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudENvbXBvbmVudCA9IGFkeWVuQ2xpZW50LmNyZWF0ZShwYXltZW50TWV0aG9kLm1ldGhvZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmFkeWVudjIub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGNvbXBvbmVudFN0YXRlKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVDb21wb25lbnRTdGF0ZShjb21wb25lbnRTdGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50Q29tcG9uZW50Lm1vdW50KGAjJHthZHllbnYyLmNvbnRhaW5lcklkfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RJbml0aWFsaXplZEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVDb21wb25lbnRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXltZW50TWV0aG9kLm1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5BbGlQYXk6XG4gICAgICAgICAgICAgICAgY2FzZSBBZHllblBheW1lbnRNZXRob2RUeXBlLkdpcm9QYXk6XG4gICAgICAgICAgICAgICAgY2FzZSBBZHllblBheW1lbnRNZXRob2RUeXBlLlNvZm9ydDpcbiAgICAgICAgICAgICAgICBjYXNlIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUuS2xhcm5hOlxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5LbGFybmFQYXlOb3c6XG4gICAgICAgICAgICAgICAgY2FzZSBBZHllblBheW1lbnRNZXRob2RUeXBlLktsYXJuYUFjY291bnQ6XG4gICAgICAgICAgICAgICAgY2FzZSBBZHllblBheW1lbnRNZXRob2RUeXBlLlZpcHBzOlxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5XZUNoYXRQYXlRUjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ29tcG9uZW50U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcGF5bWVudE1ldGhvZC5tZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNvbHZlKHBheW1lbnRDb21wb25lbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihcbiAgICAgICAgZXJyb3I6IHVua25vd24sXG4gICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50PzogYm9vbGVhbixcbiAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudD86IGJvb2xlYW4sXG4gICAgKTogUHJvbWlzZTxQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMgfCB2b2lkPiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFpc1JlcXVlc3RFcnJvcihlcnJvcikgfHxcbiAgICAgICAgICAgICFzb21lKGVycm9yLmJvZHkuZXJyb3JzLCB7IGNvZGU6ICdhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCcgfSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheW1lbnQgPSBhd2FpdCB0aGlzLl9oYW5kbGVBY3Rpb24oZXJyb3IuYm9keS5wcm92aWRlcl9kYXRhKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICAuLi5wYXltZW50LFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnBheW1lbnQucGF5bWVudERhdGEsXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAocGF5bWVudEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oXG4gICAgICAgICAgICAgICAgcGF5bWVudEVycm9yLFxuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdXBkYXRlQ29tcG9uZW50U3RhdGUoY29tcG9uZW50U3RhdGU6IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSkge1xuICAgICAgICB0aGlzLl9jb21wb25lbnRTdGF0ZSA9IGNvbXBvbmVudFN0YXRlO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3ZhbGlkYXRlQ2FyZERhdGEoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFkeWVudjIgPSB0aGlzLl9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMoKTtcbiAgICAgICAgY29uc3QgY2FyZENvbXBvbmVudCA9IGFkeWVudjIuaGFzVmF1bHRlZEluc3RydW1lbnRzXG4gICAgICAgICAgICA/IHRoaXMuX2NhcmRWZXJpZmljYXRpb25Db21wb25lbnRcbiAgICAgICAgICAgIDogdGhpcy5fcGF5bWVudENvbXBvbmVudDtcbiAgICAgICAgY29uc3QgaXNFbXB0eVN0cmluZyA9ICh2YWx1ZTogc3RyaW5nKSA9PiB2YWx1ZS50b1N0cmluZygpLnRyaW0oKS5sZW5ndGggPT09IDA7XG5cbiAgICAgICAgaWYgKCFjYXJkQ29tcG9uZW50Py5jb21wb25lbnRSZWY/LnNob3dWYWxpZGF0aW9uIHx8ICFjYXJkQ29tcG9uZW50LnN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjYXJkQ29tcG9uZW50LmNvbXBvbmVudFJlZi5zaG93VmFsaWRhdGlvbigpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGb3Igc29tZSByZWFzb24gYWR5ZW4gc2RrIGRvZXNuJ3QgcmV0dXJuIGlzVmFsaWQgZm9yIHBheW1lbnQgbWV0aG9kcyB3aXRoIHNlbGVjdCBmaWVsZCBpbiBmb3JtKGlEZWFsIGZvciBleGFtcGxlKVxuICAgICAgICAgKiBzbyB3ZSBuZWVkIHRvIGNoZWNrIHN0YXRlIGlzc3VlciBmaWVsZFxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgT2JqZWN0LmtleXMoY2FyZENvbXBvbmVudC5zdGF0ZSkubGVuZ3RoID09PSAwIHx8XG4gICAgICAgICAgICAoIWNhcmRDb21wb25lbnQuc3RhdGUuaXNWYWxpZCAmJiAhY2FyZENvbXBvbmVudC5zdGF0ZS5pc3N1ZXIpIHx8XG4gICAgICAgICAgICAvLyBwcmV2ZW50IGVtcHR5IHNlcGEgZmllbGRzIGZyb20gYmVpbmcgc2VudFxuICAgICAgICAgICAgKGNhcmRDb21wb25lbnQucHJvcHM/LnR5cGUgPT09ICdzZXBhZGlyZWN0ZGViaXQnICYmXG4gICAgICAgICAgICAgICAgY2FyZENvbXBvbmVudC5zdGF0ZS5kYXRhICYmXG4gICAgICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhjYXJkQ29tcG9uZW50LnN0YXRlLmRhdGEpLnNvbWUoaXNFbXB0eVN0cmluZykpXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yKHRoaXMuX21hcENhcmRFcnJvcnMoY2FyZENvbXBvbmVudC5zdGF0ZS5lcnJvcnMpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX21hcENhcmRFcnJvcnMoY2FyZFN0YXRlRXJyb3JzOiBDYXJkU3RhdGVFcnJvcnMgPSB7fSk6IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyB7XG4gICAgICAgIGNvbnN0IGVycm9yczogUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzID0ge307XG5cbiAgICAgICAgT2JqZWN0LmtleXMoY2FyZFN0YXRlRXJyb3JzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGVycm9yc1trZXldID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2FyZFN0YXRlRXJyb3JzW2tleV0sXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGtleSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGVycm9ycztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBBY2NvdW50U3RhdGUsIEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNBY2NvdW50U3RhdGUocGFyYW06IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSk6IHBhcmFtIGlzIEFjY291bnRTdGF0ZSB7XG4gICAgY29uc3QgYmFua1N1cHBvcnRlZCA9IFsnaWRlYWwnLCAnc2VwYWRpcmVjdGRlYml0JywgJ2RpcmVjdEViYW5raW5nJywgJ2dpcm9wYXknXTtcblxuICAgIHJldHVybiBiYW5rU3VwcG9ydGVkLmluZGV4T2YoKHBhcmFtIGFzIEFjY291bnRTdGF0ZSkuZGF0YS5wYXltZW50TWV0aG9kLnR5cGUpICE9PSAtMTtcbn1cbiIsImltcG9ydCB7IGdldFNjcmlwdExvYWRlciwgZ2V0U3R5bGVzaGVldExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgQWR5ZW5WMlNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYWR5ZW4tdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBBZHllblYyUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vYWR5ZW52Mi1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQWR5ZW5WMlBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxBZHllblYyUGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBBZHllblYyUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBuZXcgQWR5ZW5WMlNjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSwgZ2V0U3R5bGVzaGVldExvYWRlcigpKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUFkeWVuVjJQYXltZW50U3RyYXRlZ3ksIFt7IGdhdGV3YXk6ICdhZHllbnYyJyB9XSk7XG4iLCJpbXBvcnQgeyBTY3JpcHRMb2FkZXIsIFN0eWxlc2hlZXRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IEFkeWVuQ2xpZW50LCBBZHllbkNvbmZpZ3VyYXRpb24sIEFkeWVuVjNIb3N0V2luZG93IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZHllblYzU2NyaXB0TG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBfc2NyaXB0TG9hZGVyOiBTY3JpcHRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUgX3N0eWxlc2hlZXRMb2FkZXI6IFN0eWxlc2hlZXRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUgX3dpbmRvdzogQWR5ZW5WM0hvc3RXaW5kb3cgPSB3aW5kb3csXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgbG9hZChjb25maWd1cmF0aW9uOiBBZHllbkNvbmZpZ3VyYXRpb24pOiBQcm9taXNlPEFkeWVuQ2xpZW50PiB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIHRoaXMuX3N0eWxlc2hlZXRMb2FkZXIubG9hZFN0eWxlc2hlZXQoXG4gICAgICAgICAgICAgICAgYGh0dHBzOi8vY2hlY2tvdXRzaG9wcGVyLSR7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZW52aXJvbm1lbnQgPz8gJydcbiAgICAgICAgICAgICAgICB9LmFkeWVuLmNvbS9jaGVja291dHNob3BwZXIvc2RrLzUuNzEuMS9hZHllbi5jc3NgLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlcGVuZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVncml0eTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2hhMzg0LTVNdkI0Um56dnZpQTNWQlQ0S1lBQlo0SFhOWkc1TFJxUkVFZ2Q0MXh0L3BmL1F2S21zajJPOUd1TnV5d1JYeDknLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3Jvc3NvcmlnaW46ICdhbm9ueW1vdXMnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoXG4gICAgICAgICAgICAgICAgYGh0dHBzOi8vY2hlY2tvdXRzaG9wcGVyLSR7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZW52aXJvbm1lbnQgPz8gJydcbiAgICAgICAgICAgICAgICB9LmFkeWVuLmNvbS9jaGVja291dHNob3BwZXIvc2RrLzUuNzEuMS9hZHllbi5qc2AsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyaXR5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaGEzODQteXZZMnlGTlI0V3FJalBxUDlNempJK2dKaW1tYUpuQXZqNHJMSEt2Z0piZ0ZENWZNdWY4eklKckZKT1c4TGhoZicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjcm9zc29yaWdpbjogJ2Fub255bW91cycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICksXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGlmICghdGhpcy5fd2luZG93LkFkeWVuQ2hlY2tvdXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2hlY2tvdXQgPSBhd2FpdCB0aGlzLl93aW5kb3cuQWR5ZW5DaGVja291dChjb25maWd1cmF0aW9uKTtcblxuICAgICAgICByZXR1cm4gY2hlY2tvdXQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgc29tZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQWR5ZW5BY3Rpb24sXG4gICAgQWR5ZW5BZGRpdGlvbmFsQWN0aW9uLFxuICAgIEFkeWVuQWRkaXRpb25hbEFjdGlvblN0YXRlLFxuICAgIEFkeWVuQ2xpZW50LFxuICAgIEFkeWVuQ29tcG9uZW50LFxuICAgIEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSxcbiAgICBBZHllbkNvbXBvbmVudFR5cGUsXG4gICAgQWR5ZW5FcnJvcixcbiAgICBBZHllblBheW1lbnRNZXRob2RUeXBlLFxuICAgIEFkeWVuUGxhY2Vob2xkZXJEYXRhLFxuICAgIEFkeWVuVjNBY3Rpb25UeXBlLFxuICAgIEFkeWVuVjNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQWR5ZW5WM1BheW1lbnRNZXRob2RJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgQWR5ZW5WM1NjcmlwdExvYWRlcixcbiAgICBDYXJkU3RhdGVFcnJvcnMsXG4gICAgaXNCb2xldG9TdGF0ZSxcbiAgICBpc0NhcmRTdGF0ZSxcbiAgICBXaXRoQWR5ZW5WM1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9hZHllbi11dGlscyc7XG5pbXBvcnQge1xuICAgIEJpbGxpbmdBZGRyZXNzLFxuICAgIGdldEJyb3dzZXJJbmZvLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UsXG4gICAgaXNSZXF1ZXN0RXJyb3IsXG4gICAgaXNWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50SW52YWxpZEZvcm1FcnJvcixcbiAgICBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkeWVudjNQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgX2FkeWVuQ2xpZW50PzogQWR5ZW5DbGllbnQ7XG4gICAgcHJpdmF0ZSBfY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudD86IEFkeWVuQ29tcG9uZW50O1xuICAgIHByaXZhdGUgX2NvbXBvbmVudFN0YXRlPzogQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlO1xuICAgIHByaXZhdGUgX3BheW1lbnRDb21wb25lbnQ/OiBBZHllbkNvbXBvbmVudDtcbiAgICBwcml2YXRlIF9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM/OiBBZHllblYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgX3NjcmlwdExvYWRlcjogQWR5ZW5WM1NjcmlwdExvYWRlcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQWR5ZW5WM1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBhZHllbnYzIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghYWR5ZW52Mykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmFkeWVudjNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgPSBhZHllbnYzO1xuXG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlXG4gICAgICAgICAgICAuZ2V0U3RhdGUoKVxuICAgICAgICAgICAgLmdldFBheW1lbnRNZXRob2RPclRocm93PEFkeWVuVjNQYXltZW50TWV0aG9kSW5pdGlhbGl6YXRpb25EYXRhPihvcHRpb25zLm1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBlbnZpcm9ubWVudCwgY2xpZW50S2V5LCBwYXltZW50TWV0aG9kc1Jlc3BvbnNlLCBpbnN0YWxsbWVudE9wdGlvbnMgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICB0aGlzLl9hZHllbkNsaWVudCA9IGF3YWl0IHRoaXMuX3NjcmlwdExvYWRlci5sb2FkKHtcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2RzQ29uZmlndXJhdGlvbjoge1xuICAgICAgICAgICAgICAgIGtsYXJuYToge1xuICAgICAgICAgICAgICAgICAgICB1c2VLbGFybmFXaWRnZXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBrbGFybmFfYWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICB1c2VLbGFybmFXaWRnZXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBrbGFybmFfcGF5bm93OiB7XG4gICAgICAgICAgICAgICAgICAgIHVzZUtsYXJuYVdpZGdldDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC4uLihpbnN0YWxsbWVudE9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbGxtZW50T3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dJbnN0YWxsbWVudEFtb3VudHM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uaW5zdGFsbG1lbnRPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudmlyb25tZW50LFxuICAgICAgICAgICAgbG9jYWxlOiB0aGlzLl9nZXRMb2NhbGUoKSxcbiAgICAgICAgICAgIGNsaWVudEtleSxcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2RzUmVzcG9uc2UsXG4gICAgICAgICAgICBzaG93UGF5QnV0dG9uOiBmYWxzZSxcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uczoge1xuICAgICAgICAgICAgICAgIGVzOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICAgICAgJ2VzLUFSJzogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgICAgICdlcy1FUyc6IHsgJ2NyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlJzogJ0ZlY2hhIGRlIGNhZHVjaWRhZCcgfSxcbiAgICAgICAgICAgICAgICAnZXMtTVgnOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICAgICAgJ2VzLUNMJzogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgICAgICdlcy1DTyc6IHsgJ2NyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlJzogJ0ZlY2hhIGRlIGNhZHVjaWRhZCcgfSxcbiAgICAgICAgICAgICAgICAnZXMtUEUnOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9wYXltZW50Q29tcG9uZW50ID0gYXdhaXQgdGhpcy5fbW91bnRQYXltZW50Q29tcG9uZW50KHBheW1lbnRNZXRob2QpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QubWV0aG9kID09PSBBZHllblBheW1lbnRNZXRob2RUeXBlLkNyZWRpdENhcmQgfHxcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QubWV0aG9kID09PSBBZHllblBheW1lbnRNZXRob2RUeXBlLkJhbmNvbnRhY3RcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50ID0gYXdhaXQgdGhpcy5fbW91bnRDYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0gcGF5bWVudC5wYXltZW50RGF0YTtcblxuICAgICAgICBjb25zdCB7IHNob3VsZFNhdmVJbnN0cnVtZW50LCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IH0gPSBpc0hvc3RlZEluc3RydW1lbnRMaWtlKFxuICAgICAgICAgICAgcGF5bWVudERhdGEsXG4gICAgICAgIClcbiAgICAgICAgICAgID8gcGF5bWVudERhdGFcbiAgICAgICAgICAgIDogeyBzaG91bGRTYXZlSW5zdHJ1bWVudDogZmFsc2UsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6IGZhbHNlIH07XG5cbiAgICAgICAgdGhpcy5fdmFsaWRhdGVDYXJkRGF0YSgpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHBheW1lbnQubWV0aG9kSWQgPT09ICdrbGFybmEnIHx8XG4gICAgICAgICAgICBwYXltZW50Lm1ldGhvZElkID09PSAna2xhcm5hX2FjY291bnQnIHx8XG4gICAgICAgICAgICBwYXltZW50Lm1ldGhvZElkID09PSAna2xhcm5hX3BheW5vdydcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXltZW50Q29tcG9uZW50Py5zdWJtaXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFN0YXRlID0gdGhpcy5fY29tcG9uZW50U3RhdGUgfHwge1xuICAgICAgICAgICAgZGF0YTogeyBwYXltZW50TWV0aG9kOiB7IHR5cGU6IHBheW1lbnQubWV0aG9kSWQgfSB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChwYXltZW50RGF0YSAmJiBpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnREYXRhKSkge1xuICAgICAgICAgICAgbGV0IGJpZ3BheVRva2VuID0ge307XG5cbiAgICAgICAgICAgIGlmIChpc0NhcmRTdGF0ZShjb21wb25lbnRTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZENhcmROdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZFNlY3VyaXR5Q29kZSxcbiAgICAgICAgICAgICAgICAgICAgZW5jcnlwdGVkRXhwaXJ5TW9udGgsXG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZEV4cGlyeVllYXIsXG4gICAgICAgICAgICAgICAgfSA9IGNvbXBvbmVudFN0YXRlLmRhdGEucGF5bWVudE1ldGhvZDtcblxuICAgICAgICAgICAgICAgIGJpZ3BheVRva2VuID0ge1xuICAgICAgICAgICAgICAgICAgICBjcmVkaXRfY2FyZF9udW1iZXJfY29uZmlybWF0aW9uOiBlbmNyeXB0ZWRDYXJkTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBleHBpcnlfbW9udGg6IGVuY3J5cHRlZEV4cGlyeU1vbnRoLFxuICAgICAgICAgICAgICAgICAgICBleHBpcnlfeWVhcjogZW5jcnlwdGVkRXhwaXJ5WWVhcixcbiAgICAgICAgICAgICAgICAgICAgdmVyaWZpY2F0aW9uX3ZhbHVlOiBlbmNyeXB0ZWRTZWN1cml0eUNvZGUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXltZW50LFxuICAgICAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpZ3BheV90b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5iaWdwYXlUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHBheW1lbnREYXRhLmluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyX2luZm86IGdldEJyb3dzZXJJbmZvKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwYXltZW50VG9rZW4gPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAuLi5jb21wb25lbnRTdGF0ZS5kYXRhLnBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICB0eXBlOiBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgb3JpZ2luOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocGF5bWVudC5tZXRob2RJZCA9PT0gJ2JvbGV0b2JhbmNhcmlvJyAmJiBpc0JvbGV0b1N0YXRlKGNvbXBvbmVudFN0YXRlKSkge1xuICAgICAgICAgICAgcGF5bWVudFRva2VuID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIHNvY2lhbFNlY3VyaXR5TnVtYmVyOiBjb21wb25lbnRTdGF0ZS5kYXRhLnNvY2lhbFNlY3VyaXR5TnVtYmVyLFxuICAgICAgICAgICAgICAgIC4uLmNvbXBvbmVudFN0YXRlLmRhdGEuc2hvcHBlck5hbWUsXG4gICAgICAgICAgICAgICAgdHlwZTogcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICBvcmlnaW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkOiBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWRpdF9jYXJkX3Rva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHBheW1lbnRUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4oaXNDYXJkU3RhdGUoY29tcG9uZW50U3RhdGUpICYmIGNvbXBvbmVudFN0YXRlLmRhdGEuaW5zdGFsbG1lbnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFsbG1lbnRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjb21wb25lbnRTdGF0ZS5kYXRhLmluc3RhbGxtZW50cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhbjogY29tcG9uZW50U3RhdGUuZGF0YS5pbnN0YWxsbWVudHMucGxhbiB8fCAncmVndWxhcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXJfaW5mbzogZ2V0QnJvd3NlckluZm8oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDogc2hvdWxkU2F2ZUluc3RydW1lbnQgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OiBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oXG4gICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLl9jb21wb25lbnRTdGF0ZSA9IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAodGhpcy5fcGF5bWVudENvbXBvbmVudCkge1xuICAgICAgICAgICAgdGhpcy5fcGF5bWVudENvbXBvbmVudC51bm1vdW50KCk7XG4gICAgICAgICAgICB0aGlzLl9wYXltZW50Q29tcG9uZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2NhcmRWZXJpZmljYXRpb25Db21wb25lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhcmRWZXJpZmljYXRpb25Db21wb25lbnQudW5tb3VudCgpO1xuICAgICAgICAgICAgdGhpcy5fY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF91cGRhdGVDb21wb25lbnRTdGF0ZShjb21wb25lbnRTdGF0ZTogQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlKSB7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudFN0YXRlID0gY29tcG9uZW50U3RhdGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0TG9jYWxlKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGNvbnN0IGxvY2FsZSA9IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRMb2NhbGUoKTtcblxuICAgICAgICBpZiAobG9jYWxlICYmIGxvY2FsZS5zdWJzdHJpbmcoMCwgMikgPT09ICdlcycpIHtcbiAgICAgICAgICAgIHJldHVybiAnZXMnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxvY2FsZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRBZHllbkNsaWVudCgpOiBBZHllbkNsaWVudCB7XG4gICAgICAgIGlmICghdGhpcy5fYWR5ZW5DbGllbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fYWR5ZW5DbGllbnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk6IEFkeWVuVjNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMge1xuICAgICAgICBpZiAoIXRoaXMuX3BheW1lbnRJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdcIm9wdGlvbnMuYWR5ZW52M1wiIGFyZ3VtZW50IHdhcyBub3QgcHJvdmlkZWQgZHVyaW5nIGluaXRpYWxpemF0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BheW1lbnRJbml0aWFsaXplT3B0aW9ucztcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVBY3Rpb24oYWRkaXRpb25hbEFjdGlvbjogQWR5ZW5BZGRpdGlvbmFsQWN0aW9uKTogUHJvbWlzZTxQYXltZW50PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGFkZGl0aW9uYWxBY3Rpb25PcHRpb25zIH0gPSB0aGlzLl9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMoKTtcbiAgICAgICAgICAgIGNvbnN0IHsgb25CZWZvcmVMb2FkLCBjb250YWluZXJJZCwgb25Mb2FkLCBvbkNvbXBsZXRlLCB3aWRnZXRTaXplLCBvbkFjdGlvbkhhbmRsZWQgfSA9XG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbk9wdGlvbnM7XG4gICAgICAgICAgICBjb25zdCBhZHllbkFjdGlvbjogQWR5ZW5BY3Rpb24gPSBKU09OLnBhcnNlKGFkZGl0aW9uYWxBY3Rpb24uYWN0aW9uKTtcblxuICAgICAgICAgICAgY29uc3QgYWRkaXRpb25hbEFjdGlvbkNvbXBvbmVudCA9IHRoaXMuX2dldEFkeWVuQ2xpZW50KCkuY3JlYXRlRnJvbUFjdGlvbihhZHllbkFjdGlvbiwge1xuICAgICAgICAgICAgICAgIG9uQWN0aW9uSGFuZGxlZDogKGFkZGl0aW9uYWxBY3Rpb25TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjdGlvbkhhbmRsZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBvbkFjdGlvbkhhbmRsZWQgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25TdGF0ZS5jb21wb25lbnRUeXBlICE9PSAnM0RTMkZpbmdlcnByaW50J1xuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uSGFuZGxlZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkFkZGl0aW9uYWxEZXRhaWxzOiAoYWRkaXRpb25hbEFjdGlvblN0YXRlOiBBZHllbkFkZGl0aW9uYWxBY3Rpb25TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZElkOiBhZHllbkFjdGlvbi5wYXltZW50TWV0aG9kVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uY2U6IEpTT04uc3RyaW5naWZ5KGFkZGl0aW9uYWxBY3Rpb25TdGF0ZS5kYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUgJiYgdHlwZW9mIG9uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocGF5bWVudFBheWxvYWQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2hhbGxlbmdlV2luZG93U2l6ZTogd2lkZ2V0U2l6ZSB8fCAnMDUnLFxuICAgICAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcjogQWR5ZW5FcnJvcikgPT4gcmVqZWN0KGVycm9yKSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAob25CZWZvcmVMb2FkICYmIHR5cGVvZiBvbkJlZm9yZUxvYWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbkJlZm9yZUxvYWQoXG4gICAgICAgICAgICAgICAgICAgIGFkeWVuQWN0aW9uLnR5cGUgPT09IEFkeWVuVjNBY3Rpb25UeXBlLlRocmVlRFMyIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBhZHllbkFjdGlvbi50eXBlID09PSBBZHllblYzQWN0aW9uVHlwZS5RUkNvZGUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkeWVuQWN0aW9uLnR5cGUgPT09IEFkeWVuVjNBY3Rpb25UeXBlLlNkayxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9tb3VudEVsZW1lbnQoYWRkaXRpb25hbEFjdGlvbkNvbXBvbmVudCwgY29udGFpbmVySWQpO1xuXG4gICAgICAgICAgICBpZiAob25Mb2FkICYmIHR5cGVvZiBvbkxvYWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbkxvYWQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcigpKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbkNvbXBvbmVudC51bm1vdW50KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX21hcEFkeWVuUGxhY2Vob2xkZXJEYXRhKFxuICAgICAgICBiaWxsaW5nQWRkcmVzcz86IEJpbGxpbmdBZGRyZXNzLFxuICAgICAgICBwcmVmaWxsQ2FyZEhvbGRlck5hbWU/OiBib29sZWFuLFxuICAgICk6IEFkeWVuUGxhY2Vob2xkZXJEYXRhIHtcbiAgICAgICAgaWYgKCFiaWxsaW5nQWRkcmVzcykge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICAgICBhZGRyZXNzMTogc3RyZWV0LFxuICAgICAgICAgICAgYWRkcmVzczI6IGhvdXNlTnVtYmVyT3JOYW1lLFxuICAgICAgICAgICAgcG9zdGFsQ29kZSxcbiAgICAgICAgICAgIGNpdHksXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBzdGF0ZU9yUHJvdmluY2UsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogY291bnRyeSxcbiAgICAgICAgfSA9IGJpbGxpbmdBZGRyZXNzO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBob2xkZXJOYW1lOiBwcmVmaWxsQ2FyZEhvbGRlck5hbWUgPyBgJHtmaXJzdE5hbWV9ICR7bGFzdE5hbWV9YCA6ICcnLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBwcmVmaWxsQ2FyZEhvbGRlck5hbWUgPyBmaXJzdE5hbWUgOiAnJyxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBwcmVmaWxsQ2FyZEhvbGRlck5hbWUgPyBsYXN0TmFtZSA6ICcnLFxuICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3M6IHtcbiAgICAgICAgICAgICAgICBzdHJlZXQsXG4gICAgICAgICAgICAgICAgaG91c2VOdW1iZXJPck5hbWUsXG4gICAgICAgICAgICAgICAgcG9zdGFsQ29kZSxcbiAgICAgICAgICAgICAgICBjaXR5LFxuICAgICAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZSxcbiAgICAgICAgICAgICAgICBjb3VudHJ5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tb3VudENhcmRWZXJpZmljYXRpb25Db21wb25lbnQoKTogUHJvbWlzZTxBZHllbkNvbXBvbmVudD4ge1xuICAgICAgICBjb25zdCBhZHllbnYzID0gdGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IGFkeWVuQ2xpZW50ID0gdGhpcy5fZ2V0QWR5ZW5DbGllbnQoKTtcbiAgICAgICAgbGV0IGNhcmRWZXJpZmljYXRpb25Db21wb25lbnQ6IEFkeWVuQ29tcG9uZW50O1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoYWR5ZW52My5jYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWQpIHtcbiAgICAgICAgICAgICAgICBjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50ID0gYWR5ZW5DbGllbnQuY3JlYXRlKEFkeWVuQ29tcG9uZW50VHlwZS5TZWN1cmVkRmllbGRzLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmFkeWVudjMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYzLm9wdGlvbnM/LnN0eWxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXRDb2xvcjogJyMwMDAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmFkeWVudjMub3B0aW9ucz8uc3R5bGVzPy5wbGFjZWhvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAoY29tcG9uZW50U3RhdGUpID0+IHRoaXMuX3VwZGF0ZUNvbXBvbmVudFN0YXRlKGNvbXBvbmVudFN0YXRlKSxcbiAgICAgICAgICAgICAgICAgICAgb25FcnJvcjogKHZhbGlkYXRlU3RhdGUpID0+IGFkeWVudjMudmFsaWRhdGVDYXJkRmllbGRzKHZhbGlkYXRlU3RhdGUpLFxuICAgICAgICAgICAgICAgICAgICBvbkZpZWxkVmFsaWQ6ICh2YWxpZGF0ZVN0YXRlKSA9PiBhZHllbnYzLnZhbGlkYXRlQ2FyZEZpZWxkcyh2YWxpZGF0ZVN0YXRlKSxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdW50RWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRWZXJpZmljYXRpb25Db21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhZHllbnYzLmNhcmRWZXJpZmljYXRpb25Db250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNvbHZlKGNhcmRWZXJpZmljYXRpb25Db21wb25lbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tb3VudFBheW1lbnRDb21wb25lbnQocGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZCk6IFByb21pc2U8QWR5ZW5Db21wb25lbnQ+IHtcbiAgICAgICAgbGV0IHBheW1lbnRDb21wb25lbnQ6IEFkeWVuQ29tcG9uZW50O1xuICAgICAgICBjb25zdCBhZHllbnYzID0gdGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IGFkeWVuQ2xpZW50ID0gdGhpcy5fZ2V0QWR5ZW5DbGllbnQoKTtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0QmlsbGluZ0FkZHJlc3MoKTtcblxuICAgICAgICAgICAgY29uc3QgeyBwcmVmaWxsQ2FyZEhvbGRlck5hbWUgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgICAgICBwYXltZW50Q29tcG9uZW50ID0gYWR5ZW5DbGllbnQuY3JlYXRlKHBheW1lbnRNZXRob2QubWV0aG9kLCB7XG4gICAgICAgICAgICAgICAgLi4uYWR5ZW52My5vcHRpb25zLFxuICAgICAgICAgICAgICAgIHNob3dCcmFuZHNVbmRlckNhcmROdW1iZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNob3dFbWFpbEFkZHJlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAoY29tcG9uZW50U3RhdGUpID0+IHRoaXMuX3VwZGF0ZUNvbXBvbmVudFN0YXRlKGNvbXBvbmVudFN0YXRlKSxcbiAgICAgICAgICAgICAgICBvblN1Ym1pdDogKGNvbXBvbmVudFN0YXRlKSA9PiB0aGlzLl91cGRhdGVDb21wb25lbnRTdGF0ZShjb21wb25lbnRTdGF0ZSksXG4gICAgICAgICAgICAgICAgLi4uKGJpbGxpbmdBZGRyZXNzXG4gICAgICAgICAgICAgICAgICAgID8geyBkYXRhOiB0aGlzLl9tYXBBZHllblBsYWNlaG9sZGVyRGF0YShiaWxsaW5nQWRkcmVzcywgcHJlZmlsbENhcmRIb2xkZXJOYW1lKSB9XG4gICAgICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbW91bnRFbGVtZW50KHBheW1lbnRDb21wb25lbnQsIGFkeWVudjMuY29udGFpbmVySWQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc29sdmUocGF5bWVudENvbXBvbmVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICBlcnJvcjogdW5rbm93bixcbiAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQ/OiBib29sZWFuLFxuICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50PzogYm9vbGVhbixcbiAgICApOiBQcm9taXNlPFBheW1lbnRJbnRlZ3JhdGlvblNlbGVjdG9ycyB8IHZvaWQ+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWlzUmVxdWVzdEVycm9yKGVycm9yKSB8fFxuICAgICAgICAgICAgIXNvbWUoZXJyb3IuYm9keS5lcnJvcnMsIHsgY29kZTogJ2FkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkJyB9KVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5bWVudCA9IGF3YWl0IHRoaXMuX2hhbmRsZUFjdGlvbihlcnJvci5ib2R5LnByb3ZpZGVyX2RhdGEpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe1xuICAgICAgICAgICAgICAgIC4uLnBheW1lbnQsXG4gICAgICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGF5bWVudC5wYXltZW50RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChwYXltZW50RXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihcbiAgICAgICAgICAgICAgICBwYXltZW50RXJyb3IsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF92YWxpZGF0ZUNhcmREYXRhKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBhZHllbnYzID0gdGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IGNhcmRDb21wb25lbnQgPSBhZHllbnYzLmhhc1ZhdWx0ZWRJbnN0cnVtZW50c1xuICAgICAgICAgICAgPyB0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50XG4gICAgICAgICAgICA6IHRoaXMuX3BheW1lbnRDb21wb25lbnQ7XG5cbiAgICAgICAgaWYgKCFjYXJkQ29tcG9uZW50Py5jb21wb25lbnRSZWY/LnNob3dWYWxpZGF0aW9uIHx8ICFjYXJkQ29tcG9uZW50LnN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjYXJkQ29tcG9uZW50LmNvbXBvbmVudFJlZi5zaG93VmFsaWRhdGlvbigpO1xuXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhjYXJkQ29tcG9uZW50LnN0YXRlKS5sZW5ndGggPT09IDAgfHwgIWNhcmRDb21wb25lbnQuc3RhdGUuaXNWYWxpZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yKHRoaXMuX21hcENhcmRFcnJvcnMoY2FyZENvbXBvbmVudC5zdGF0ZS5lcnJvcnMpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX21hcENhcmRFcnJvcnMoY2FyZFN0YXRlRXJyb3JzOiBDYXJkU3RhdGVFcnJvcnMgPSB7fSk6IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyB7XG4gICAgICAgIGNvbnN0IGVycm9yczogUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzID0ge307XG5cbiAgICAgICAgT2JqZWN0LmtleXMoY2FyZFN0YXRlRXJyb3JzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGVycm9yc1trZXldID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2FyZFN0YXRlRXJyb3JzW2tleV0sXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGtleSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGVycm9ycztcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tb3VudEVsZW1lbnQoYWR5ZW5Db21wb25lbnQ6IEFkeWVuQ29tcG9uZW50LCBjb250YWluZXJJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVySWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhZHllbkNvbXBvbmVudC5tb3VudChgIyR7Y29udGFpbmVySWR9YCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSG9zdGVkSW5zdHJ1bWVudCB9IGZyb20gJy4vcGF5bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UoXG4gICAgaW5zdHJ1bWVudDogdW5rbm93bixcbik6IGluc3RydW1lbnQgaXMgSG9zdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGluc3RydW1lbnQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGluc3RydW1lbnQgIT09IG51bGwgJiZcbiAgICAgICAgKHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKSAmJlxuICAgICAgICAodHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKVxuICAgICk7XG59XG4iLCJpbXBvcnQgeyBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUsIEJvbGV0b1N0YXRlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0JvbGV0b1N0YXRlKHBhcmFtOiBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUpOiBwYXJhbSBpcyBCb2xldG9TdGF0ZSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgKHR5cGVvZiBwYXJhbSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIChwYXJhbSBhcyBCb2xldG9TdGF0ZSkuZGF0YS5zb2NpYWxTZWN1cml0eU51bWJlcikgPT09XG4gICAgICAgICAgICAnc3RyaW5nJyAmJlxuICAgICAgICB0eXBlb2YgKHBhcmFtIGFzIEJvbGV0b1N0YXRlKS5kYXRhLnNob3BwZXJOYW1lPy5maXJzdE5hbWUgPT09ICdzdHJpbmcnICYmXG4gICAgICAgIHR5cGVvZiAocGFyYW0gYXMgQm9sZXRvU3RhdGUpLmRhdGEuc2hvcHBlck5hbWU/Lmxhc3ROYW1lID09PSAnc3RyaW5nJ1xuICAgICk7XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIsIGdldFN0eWxlc2hlZXRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IEFkeWVuVjNTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2FkeWVuLXV0aWxzJztcbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQWR5ZW5WM1BheW1lbnRTdHJhdGVneSBmcm9tICcuL2FkeWVudjMtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUFkeWVuVjNQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8QWR5ZW5WM1BheW1lbnRTdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT4ge1xuICAgIHJldHVybiBuZXcgQWR5ZW5WM1BheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgbmV3IEFkeWVuVjNTY3JpcHRMb2FkZXIoZ2V0U2NyaXB0TG9hZGVyKCksIGdldFN0eWxlc2hlZXRMb2FkZXIoKSksXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVBZHllblYzUGF5bWVudFN0cmF0ZWd5LCBbeyBnYXRld2F5OiAnYWR5ZW52MycgfV0pO1xuIl0sIm5hbWVzIjpbIlN0YW5kYXJkRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInByb3RvdHlwZSIsInN1cGVyIiwibmFtZSIsInR5cGUiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInRoaXMiLCJfX3Byb3RvX18iLCJjYXB0dXJlU3RhY2tUcmFjZSIsInN0YWNrIiwiUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IiLCJBZHllblYzQWN0aW9uVHlwZSIsIkFkeWVuVjJBY3Rpb25UeXBlIiwiQWR5ZW5Db21wb25lbnRUeXBlIiwiQWR5ZW5QYXltZW50TWV0aG9kVHlwZSIsIkhUVFBNZXRob2QiLCJSZXN1bHRDb2RlIiwiQWR5ZW5DYXJkRmllbGRzIiwiTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUiLCJBZHllblYyU2NyaXB0TG9hZGVyIiwiX3NjcmlwdExvYWRlciIsIl9zdHlsZXNoZWV0TG9hZGVyIiwiX3dpbmRvdyIsIndpbmRvdyIsImxvYWQiLCJjb25maWd1cmF0aW9uIiwiUHJvbWlzZSIsImFsbCIsImxvYWRTdHlsZXNoZWV0IiwiZW52aXJvbm1lbnQiLCJwcmVwZW5kIiwiYXR0cmlidXRlcyIsImludGVncml0eSIsImNyb3Nzb3JpZ2luIiwibG9hZFNjcmlwdCIsImFzeW5jIiwiQWR5ZW5DaGVja291dCIsInRvUmVzb2x2YWJsZU1vZHVsZSIsIm1vZHVsZSIsInJlc29sdmVJZHMiLCJhc3NpZ24iLCJpc0NhcmRTdGF0ZSIsInBhcmFtIiwiZGF0YSIsInBheW1lbnRNZXRob2QiLCJlbmNyeXB0ZWRTZWN1cml0eUNvZGUiLCJlbmNyeXB0ZWRFeHBpcnlNb250aCIsIkludmFsaWRBcmd1bWVudEVycm9yIiwiUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIiwiaW52YWxpZEZpZWxkcyIsImpvaW4iLCJOb3RJbml0aWFsaXplZEVycm9yIiwic3VidHlwZSIsIkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50Tm90SW5pdGlhbGl6ZWQiLCJTaGlwcGluZ05vdEluaXRpYWxpemVkIiwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCIsImdldEVycm9yTWVzc2FnZSIsImlzVmF1bHRlZEluc3RydW1lbnQiLCJpbnN0cnVtZW50IiwiQm9vbGVhbiIsImluc3RydW1lbnRJZCIsImdldEJyb3dzZXJJbmZvIiwibmF2aWdhdG9yIiwibGFuZ3VhZ2UiLCJ1c2VyTGFuZ3VhZ2UiLCJjb2xvcl9kZXB0aCIsInNjcmVlbiIsImNvbG9yRGVwdGgiLCJqYXZhX2VuYWJsZWQiLCJqYXZhRW5hYmxlZCIsInNjcmVlbl9oZWlnaHQiLCJoZWlnaHQiLCJzY3JlZW5fd2lkdGgiLCJ3aWR0aCIsInRpbWVfem9uZV9vZmZzZXQiLCJEYXRlIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJ0b1N0cmluZyIsIk9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciIsIlBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvciIsImVycm9yIiwiUGF5bWVudEludmFsaWRGb3JtRXJyb3IiLCJkZXRhaWxzIiwiQWR5ZW5WMlBheW1lbnRTdHJhdGVneSIsIl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwiaW5pdGlhbGl6ZSIsIm9wdGlvbnMiLCJhZHllbnYyIiwiX3BheW1lbnRJbml0aWFsaXplT3B0aW9ucyIsImdldFN0YXRlIiwiZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3ciLCJtZXRob2RJZCIsIm9yaWdpbktleSIsImNsaWVudEtleSIsInBheW1lbnRNZXRob2RzUmVzcG9uc2UiLCJpbml0aWFsaXphdGlvbkRhdGEiLCJjbGllbnRTaWRlQXV0aGVudGljYXRpb24iLCJrZXkiLCJ2YWx1ZSIsIl9hZHllbkNsaWVudCIsImxvY2FsZSIsImdldExvY2FsZSIsInRyYW5zbGF0aW9ucyIsImVzIiwiX3BheW1lbnRDb21wb25lbnQiLCJfbW91bnRQYXltZW50Q29tcG9uZW50IiwibWV0aG9kIiwiQ3JlZGl0Q2FyZCIsIkJhbmNvbnRhY3QiLCJfY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCIsIl9tb3VudENhcmRWZXJpZmljYXRpb25Db21wb25lbnQiLCJyZXNvbHZlIiwiZXhlY3V0ZSIsInBheWxvYWQiLCJwYXltZW50Iiwib3JkZXIiLCJwYXltZW50RGF0YSIsInNob3VsZFNhdmVJbnN0cnVtZW50Iiwic2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCIsInJlamVjdCIsIl92YWxpZGF0ZUNhcmREYXRhIiwic3VibWl0T3JkZXIiLCJjb21wb25lbnRTdGF0ZSIsIl9jb21wb25lbnRTdGF0ZSIsImJpZ3BheVRva2VuIiwiZW5jcnlwdGVkQ2FyZE51bWJlciIsImVuY3J5cHRlZEV4cGlyeVllYXIiLCJjcmVkaXRfY2FyZF9udW1iZXJfY29uZmlybWF0aW9uIiwiZXhwaXJ5X21vbnRoIiwiZXhwaXJ5X3llYXIiLCJ2ZXJpZmljYXRpb25fdmFsdWUiLCJpbmRleE9mIiwic3VibWl0UGF5bWVudCIsImZvcm1hdHRlZFBheWxvYWQiLCJiaWdwYXlfdG9rZW4iLCJ0b2tlbiIsIm9yaWdpbiIsImxvY2F0aW9uIiwiYnJvd3Nlcl9pbmZvIiwic2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQiLCJfcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24iLCJjcmVkaXRfY2FyZF90b2tlbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJ2YXVsdF9wYXltZW50X2luc3RydW1lbnQiLCJmaW5hbGl6ZSIsImRlaW5pdGlhbGl6ZSIsInVuZGVmaW5lZCIsInVubW91bnQiLCJfZ2V0QWR5ZW5DbGllbnQiLCJfZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zIiwiX2dldFRocmVlRFMyQ2hhbGxlbmdlV2lkZ2V0U2l6ZSIsImFkZGl0aW9uYWxBY3Rpb25PcHRpb25zIiwidGhyZWVEUzJPcHRpb25zIiwid2lkZ2V0U2l6ZSIsIl9oYW5kbGVBY3Rpb24iLCJhZGRpdGlvbmFsQWN0aW9uIiwidGhyZWVEUzJDb250YWluZXJJZCIsIm9uQmVmb3JlTG9hZCIsImNvbnRhaW5lcklkIiwib25Mb2FkIiwib25Db21wbGV0ZSIsImFkeWVuQWN0aW9uIiwicGFyc2UiLCJhY3Rpb24iLCJhZGRpdGlvbmFsQWN0aW9uQ29tcG9uZW50IiwiY3JlYXRlRnJvbUFjdGlvbiIsIm9uQWRkaXRpb25hbERldGFpbHMiLCJhZGRpdGlvbmFsQWN0aW9uU3RhdGUiLCJwYXltZW50UGF5bG9hZCIsInBheW1lbnRNZXRob2RUeXBlIiwibm9uY2UiLCJzaXplIiwib25FcnJvciIsIlRocmVlRFMyQ2hhbGxlbmdlIiwiUVJDb2RlIiwibW91bnQiLCJfbWFwQWR5ZW5QbGFjZWhvbGRlckRhdGEiLCJiaWxsaW5nQWRkcmVzcyIsInByZWZpbGxDYXJkSG9sZGVyTmFtZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiYWRkcmVzczEiLCJzdHJlZXQiLCJhZGRyZXNzMiIsImhvdXNlTnVtYmVyT3JOYW1lIiwicG9zdGFsQ29kZSIsImNpdHkiLCJzdGF0ZU9yUHJvdmluY2VDb2RlIiwic3RhdGVPclByb3ZpbmNlIiwiY291bnRyeUNvZGUiLCJjb3VudHJ5IiwiaG9sZGVyTmFtZSIsImFkeWVuQ2xpZW50IiwiY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCIsImNhcmRWZXJpZmljYXRpb25Db250YWluZXJJZCIsImNyZWF0ZSIsIlNlY3VyZWRGaWVsZHMiLCJzdHlsZXMiLCJwbGFjZWhvbGRlciIsImNvbG9yIiwiY2FyZXRDb2xvciIsIm9uQ2hhbmdlIiwiX3VwZGF0ZUNvbXBvbmVudFN0YXRlIiwidmFsaWRhdGVTdGF0ZSIsInZhbGlkYXRlQ2FyZEZpZWxkcyIsIm9uRmllbGRWYWxpZCIsInBheW1lbnRDb21wb25lbnQiLCJBQ0giLCJnZXRCaWxsaW5nQWRkcmVzcyIsIklERUFMIiwiU0VQQSIsImhhc1ZhdWx0ZWRJbnN0cnVtZW50cyIsIkFsaVBheSIsIkdpcm9QYXkiLCJTb2ZvcnQiLCJLbGFybmEiLCJLbGFybmFQYXlOb3ciLCJLbGFybmFBY2NvdW50IiwiVmlwcHMiLCJXZUNoYXRQYXlRUiIsInNvbWUiLCJib2R5IiwiZXJyb3JzIiwiY29kZSIsInByb3ZpZGVyX2RhdGEiLCJwYXltZW50RXJyb3IiLCJjYXJkQ29tcG9uZW50IiwiY29tcG9uZW50UmVmIiwic2hvd1ZhbGlkYXRpb24iLCJzdGF0ZSIsImtleXMiLCJsZW5ndGgiLCJpc1ZhbGlkIiwiaXNzdWVyIiwicHJvcHMiLCJ2YWx1ZXMiLCJ0cmltIiwiX21hcENhcmRFcnJvcnMiLCJjYXJkU3RhdGVFcnJvcnMiLCJmb3JFYWNoIiwicGF5bWVudEludGVncmF0aW9uU2VydmljZSIsImdldFNjcmlwdExvYWRlciIsImdldFN0eWxlc2hlZXRMb2FkZXIiLCJnYXRld2F5IiwiQWR5ZW5WM1NjcmlwdExvYWRlciIsIkFkeWVudjNQYXltZW50U3RyYXRlZ3kiLCJhZHllbnYzIiwiaW5zdGFsbG1lbnRPcHRpb25zIiwicGF5bWVudE1ldGhvZHNDb25maWd1cmF0aW9uIiwia2xhcm5hIiwidXNlS2xhcm5hV2lkZ2V0Iiwia2xhcm5hX2FjY291bnQiLCJrbGFybmFfcGF5bm93IiwiY2FyZCIsInNob3dJbnN0YWxsbWVudEFtb3VudHMiLCJfZ2V0TG9jYWxlIiwic2hvd1BheUJ1dHRvbiIsInN1Ym1pdCIsInBheW1lbnRUb2tlbiIsInNvY2lhbFNlY3VyaXR5TnVtYmVyIiwic2hvcHBlck5hbWUiLCJpc0JvbGV0b1N0YXRlIiwiaW5zdGFsbG1lbnRzIiwicGxhbiIsInN1YnN0cmluZyIsIm9uQWN0aW9uSGFuZGxlZCIsImNvbXBvbmVudFR5cGUiLCJjaGFsbGVuZ2VXaW5kb3dTaXplIiwiVGhyZWVEUzIiLCJTZGsiLCJfbW91bnRFbGVtZW50Iiwic2hvd0JyYW5kc1VuZGVyQ2FyZE51bWJlciIsImJpbGxpbmdBZGRyZXNzUmVxdWlyZWQiLCJzaG93RW1haWxBZGRyZXNzIiwib25TdWJtaXQiLCJhZHllbkNvbXBvbmVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/adyen.js\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv2/AdyenV2CardValidation.tsx":
/*!**************************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv2/AdyenV2CardValidation.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classnames */ \"./node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar AdyenCardFields;\n(function (AdyenCardFields) {\n    AdyenCardFields[\"CardNumber\"] = \"encryptedCardNumber\";\n    AdyenCardFields[\"SecurityCode\"] = \"encryptedSecurityCode\";\n    AdyenCardFields[\"ExpiryDate\"] = \"encryptedExpiryDate\";\n})(AdyenCardFields || (AdyenCardFields = {}));\nconst getInitialValidationState = ({ shouldShowNumberField, method, }) => {\n    const validationState = {};\n    if (shouldShowNumberField) {\n        validationState[AdyenCardFields.CardNumber] = { valid: false };\n    }\n    if (method === 'scheme') {\n        validationState[AdyenCardFields.SecurityCode] = { valid: false };\n    }\n    if (method === 'bcmc') {\n        validationState[AdyenCardFields.ExpiryDate] = { valid: false };\n    }\n    return validationState;\n};\nconst isFieldInvalid = (fieldKey, fieldsValidation) => !!fieldsValidation[fieldKey] && !fieldsValidation[fieldKey].valid;\nconst AdyenV2CardValidation = ({ verificationFieldsContainerId, shouldShowNumberField, selectedInstrument, paymentMethod, cardValidationState, language, }) => {\n    const [fieldsValidation, setFieldsValidation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }));\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        var _a;\n        if (!cardValidationState) {\n            return;\n        }\n        if (cardValidationState.fieldType &&\n            (!fieldsValidation[cardValidationState.fieldType] ||\n                ((_a = fieldsValidation[cardValidationState.fieldType]) === null || _a === void 0 ? void 0 : _a.valid) !==\n                    cardValidationState.valid)) {\n            if (cardValidationState.fieldType === AdyenCardFields.CardNumber) {\n                setFieldsValidation(Object.assign(Object.assign({}, fieldsValidation), { [AdyenCardFields.CardNumber]: cardValidationState.endDigits !== (selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.last4)\n                        ? Object.assign(Object.assign({}, cardValidationState), { valid: false }) : Object.assign({}, cardValidationState) }));\n            }\n            else {\n                setFieldsValidation(Object.assign(Object.assign({}, fieldsValidation), { [cardValidationState.fieldType]: cardValidationState }));\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [cardValidationState, setFieldsValidation, selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.last4]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        if (selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken) {\n            setFieldsValidation(getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }));\n        }\n    }, [selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken, paymentMethod.method, shouldShowNumberField]);\n    const showValidationIcon = (key) => isFieldInvalid(key, fieldsValidation) && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", { className: \"adyen-checkout-input__inline-validation adyen-checkout-input__inline-validation--invalid\", style: { transform: 'none', right: '20px' } },\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"img\", { alt: \"adyen-checkout-icon\", className: \"adyen-checkout__icon\", src: \"https://checkoutshopper-test.adyen.com/checkoutshopper/images/components/field_error.svg\" })));\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null,\n        shouldShowNumberField && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"p\", null,\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"strong\", null, language === null || language === void 0 ? void 0 : language.translate('payment.instrument_trusted_shipping_address_title_text')),\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"br\", null), language === null || language === void 0 ? void 0 :\n            language.translate('payment.instrument_trusted_shipping_address_text'))),\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-ccFields\", id: verificationFieldsContainerId },\n            shouldShowNumberField && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-field', 'form-field--ccNumber', {\n                    'form-field--ccNumber--hasExpiryDate': paymentMethod.method === 'bcmc',\n                }, \n                // This div is hiding by CSS because there is an Adyen library in\n                // checkout-sdk which mounts verification fields and if is removed with JS this mounting event will be thrown an error\n                { 'form-field-ccNumber--hide': !shouldShowNumberField }) },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.CardNumber }, language === null || language === void 0 ? void 0 : language.translate('payment.credit_card_number_label')),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.CardNumber, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.CardNumber, id: AdyenCardFields.CardNumber }),\n                showValidationIcon(AdyenCardFields.CardNumber))),\n            paymentMethod.method === 'scheme' && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-field form-ccFields-field--ccCvv\" },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.SecurityCode }, language === null || language === void 0 ? void 0 : language.translate('payment.credit_card_cvv_label')),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.SecurityCode, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.SecurityCode, id: AdyenCardFields.SecurityCode }),\n                showValidationIcon(AdyenCardFields.SecurityCode))),\n            paymentMethod.method === 'bcmc' && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-field form-field--ccExpiry\" },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.ExpiryDate }, language === null || language === void 0 ? void 0 : language.translate('payment.credit_card_expiration_label')),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.ExpiryDate, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.ExpiryDate, id: AdyenCardFields.ExpiryDate }),\n                showValidationIcon(AdyenCardFields.ExpiryDate))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdyenV2CardValidation);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52Mi9BZHllblYyQ2FyZFZhbGlkYXRpb24udHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBTW9DO0FBQ3VDO0FBSTNFLElBQUssZUFJSjtBQUpELFdBQUssZUFBZTtJQUNoQixxREFBa0M7SUFDbEMseURBQXNDO0lBQ3RDLHFEQUFrQztBQUN0QyxDQUFDLEVBSkksZUFBZSxLQUFmLGVBQWUsUUFJbkI7QUFXRCxNQUFNLHlCQUF5QixHQUFHLENBQUMsRUFDL0IscUJBQXFCLEVBQ3JCLE1BQU0sR0FJVCxFQUFFLEVBQUU7SUFDRCxNQUFNLGVBQWUsR0FBcUIsRUFBRSxDQUFDO0lBRTdDLElBQUkscUJBQXFCLEVBQUUsQ0FBQztRQUN4QixlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ25FLENBQUM7SUFFRCxJQUFJLE1BQU0sS0FBSyxRQUFRLEVBQUUsQ0FBQztRQUN0QixlQUFlLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ3JFLENBQUM7SUFFRCxJQUFJLE1BQU0sS0FBSyxNQUFNLEVBQUUsQ0FBQztRQUNwQixlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ25FLENBQUM7SUFFRCxPQUFPLGVBQWUsQ0FBQztBQUMzQixDQUFDLENBQUM7QUFFRixNQUFNLGNBQWMsR0FBRyxDQUFDLFFBQXlCLEVBQUUsZ0JBQWtDLEVBQVcsRUFBRSxDQUM5RixDQUFDLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFFdEUsTUFBTSxxQkFBcUIsR0FBa0QsQ0FBQyxFQUMxRSw2QkFBNkIsRUFDN0IscUJBQXFCLEVB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QUNsQztnQkFDRCxrQkFBa0IsQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQy9DLENBQ1Q7WUFDQSxhQUFhLENBQUMsTUFBTSxLQUFLLE1BQU0sSUFBSSxDQUNoQyxvRUFBSyxTQUFTLEVBQUMsaUNBQWlDO2dCQUM1QyxzRUFBTyxPQUFPLEVBQUUsZUFBZSxDQUFDLFVBQVUsSUFDckMsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLFNBQVMsQ0FBQyxzQ0FBc0MsQ0FBQyxDQUN4RDtnQkFDUixvRUFDSSxTQUFTLEVBQUUsaURBQVUsQ0FDakIsWUFBWSxFQUNaLDhCQUE4QixFQUM5QixVQUFVLEVBQ1YsK0JBQStCLEVBQy9CO3dCQUNJLDhCQUE4QixFQUFFLGNBQWMsQ0FDMUMsZUFBZSxDQUFDLFVBQVUsRUFDMUIsZ0JBQWdCLENBQ25CO3FCQUNKLENBQ0osY0FDUyxlQUFlLENBQUMsVUFBVSxFQUNwQyxFQUFFLEVBQUUsZUFBZSxDQUFDLFVBQVUsR0FDaEM7Z0JBQ0Qsa0JBQWtCLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUM3QyxDQUNULENBQ0MsQ0FDSixDQUNULENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSxxQkFBcUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjIvQWR5ZW5WMkNhcmRWYWxpZGF0aW9uLnRzeD81OTgxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgdHlwZSBBZHllblZhbGlkYXRpb25TdGF0ZSxcbiAgICB0eXBlIENhcmRJbnN0cnVtZW50LFxuICAgIHR5cGUgTGFuZ3VhZ2VTZXJ2aWNlLFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBSZWFjdCwgeyB0eXBlIEZ1bmN0aW9uQ29tcG9uZW50LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgdHlwZSBGaWVsZHNWYWxpZGF0aW9uID0geyBba2V5IGluIEFkeWVuQ2FyZEZpZWxkc10/OiBBZHllblZhbGlkYXRpb25TdGF0ZSB9O1xuXG5lbnVtIEFkeWVuQ2FyZEZpZWxkcyB7XG4gICAgQ2FyZE51bWJlciA9ICdlbmNyeXB0ZWRDYXJkTnVtYmVyJyxcbiAgICBTZWN1cml0eUNvZGUgPSAnZW5jcnlwdGVkU2VjdXJpdHlDb2RlJyxcbiAgICBFeHBpcnlEYXRlID0gJ2VuY3J5cHRlZEV4cGlyeURhdGUnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuVjJDYXJkVmFsaWRhdGlvblByb3BzIHtcbiAgICB2ZXJpZmljYXRpb25GaWVsZHNDb250YWluZXJJZD86IHN0cmluZztcbiAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ6IGJvb2xlYW47XG4gICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDtcbiAgICBjYXJkVmFsaWRhdGlvblN0YXRlPzogQWR5ZW5WYWxpZGF0aW9uU3RhdGU7XG4gICAgc2VsZWN0ZWRJbnN0cnVtZW50PzogQ2FyZEluc3RydW1lbnQ7XG4gICAgbGFuZ3VhZ2U/OiBMYW5ndWFnZVNlcnZpY2U7XG59XG5cbmNvbnN0IGdldEluaXRpYWxWYWxpZGF0aW9uU3RhdGUgPSAoe1xuICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZCxcbiAgICBtZXRob2QsXG59OiB7XG4gICAgc2hvdWxkU2hvd051bWJlckZpZWxkOiBib29sZWFuO1xuICAgIG1ldGhvZDogc3RyaW5nO1xufSkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRpb25TdGF0ZTogRmllbGRzVmFsaWRhdGlvbiA9IHt9O1xuXG4gICAgaWYgKHNob3VsZFNob3dOdW1iZXJGaWVsZCkge1xuICAgICAgICB2YWxpZGF0aW9uU3RhdGVbQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXJdID0geyB2YWxpZDogZmFsc2UgfTtcbiAgICB9XG5cbiAgICBpZiAobWV0aG9kID09PSAnc2NoZW1lJykge1xuICAgICAgICB2YWxpZGF0aW9uU3RhdGVbQWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZV0gPSB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cblxuICAgIGlmIChtZXRob2QgPT09ICdiY21jJykge1xuICAgICAgICB2YWxpZGF0aW9uU3RhdGVbQWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGVdID0geyB2YWxpZDogZmFsc2UgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsaWRhdGlvblN0YXRlO1xufTtcblxuY29uc3QgaXNGaWVsZEludmFsaWQgPSAoZmllbGRLZXk6IEFkeWVuQ2FyZEZpZWxkcywgZmllbGRzVmFsaWRhdGlvbjogRmllbGRzVmFsaWRhdGlvbik6IGJvb2xlYW4gPT5cbiAgICAhIWZpZWxkc1ZhbGlkYXRpb25bZmllbGRLZXldICYmICFmaWVsZHNWYWxpZGF0aW9uW2ZpZWxkS2V5XS52YWxpZDtcblxuY29uc3QgQWR5ZW5WMkNhcmRWYWxpZGF0aW9uOiBGdW5jdGlvbkNvbXBvbmVudDxBZHllblYyQ2FyZFZhbGlkYXRpb25Qcm9wcz4gPSAoe1xuICAgIHZlcmlmaWNhdGlvbkZpZWxkc0NvbnRhaW5lcklkLFxuICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZCxcbiAgICBzZWxlY3RlZEluc3RydW1lbnQsXG4gICAgcGF5bWVudE1ldGhvZCxcbiAgICBjYXJkVmFsaWRhdGlvblN0YXRlLFxuICAgIGxhbmd1YWdlLFxufSkgPT4ge1xuICAgIGNvbnN0IFtmaWVsZHNWYWxpZGF0aW9uLCBzZXRGaWVsZHNWYWxpZGF0aW9uXSA9IHVzZVN0YXRlPEZpZWxkc1ZhbGlkYXRpb24+KFxuICAgICAgICBnZXRJbml0aWFsVmFsaWRhdGlvblN0YXRlKHsgc2hvdWxkU2hvd051bWJlckZpZWxkLCBtZXRob2Q6IHBheW1lbnRNZXRob2QubWV0aG9kIH0pLFxuICAgICk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWNhcmRWYWxpZGF0aW9uU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNhcmRWYWxpZGF0aW9uU3RhdGUuZmllbGRUeXBlICYmXG4gICAgICAgICAgICAoIWZpZWxkc1ZhbGlkYXRpb25bY2FyZFZhbGlkYXRpb25TdGF0ZS5maWVsZFR5cGVdIHx8XG4gICAgICAgICAgICAgICAgZmllbGRzVmFsaWRhdGlvbltjYXJkVmFsaWRhdGlvblN0YXRlLmZpZWxkVHlwZV0/LnZhbGlkICE9PVxuICAgICAgICAgICAgICAgICAgICBjYXJkVmFsaWRhdGlvblN0YXRlLnZhbGlkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlmIChjYXJkVmFsaWRhdGlvblN0YXRlLmZpZWxkVHlwZSA9PT0gQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXIpIHtcbiAgICAgICAgICAgICAgICBzZXRGaWVsZHNWYWxpZGF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgW0FkeWVuQ2FyZEZpZWxkcy5DYXJkTnVtYmVyXTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRWYWxpZGF0aW9uU3RhdGUuZW5kRGlnaXRzICE9PSBzZWxlY3RlZEluc3RydW1lbnQ/Lmxhc3Q0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7IC4uLmNhcmRWYWxpZGF0aW9uU3RhdGUsIHZhbGlkOiBmYWxzZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7IC4uLmNhcmRWYWxpZGF0aW9uU3RhdGUgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0RmllbGRzVmFsaWRhdGlvbih7XG4gICAgICAgICAgICAgICAgICAgIC4uLmZpZWxkc1ZhbGlkYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIFtjYXJkVmFsaWRhdGlvblN0YXRlLmZpZWxkVHlwZV06IGNhcmRWYWxpZGF0aW9uU3RhdGUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtjYXJkVmFsaWRhdGlvblN0YXRlLCBzZXRGaWVsZHNWYWxpZGF0aW9uLCBzZWxlY3RlZEluc3RydW1lbnQ/Lmxhc3Q0XSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoc2VsZWN0ZWRJbnN0cnVtZW50Py5iaWdwYXlUb2tlbikge1xuICAgICAgICAgICAgc2V0RmllbGRzVmFsaWRhdGlvbihcbiAgICAgICAgICAgICAgICBnZXRJbml0aWFsVmFsaWRhdGlvblN0YXRlKHsgc2hvdWxkU2hvd051bWJlckZpZWxkLCBtZXRob2Q6IHBheW1lbnRNZXRob2QubWV0aG9kIH0pLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sIFtzZWxlY3RlZEluc3RydW1lbnQ/LmJpZ3BheVRva2VuLCBwYXltZW50TWV0aG9kLm1ldGhvZCwgc2hvdWxkU2hvd051bWJlckZpZWxkXSk7XG5cbiAgICBjb25zdCBzaG93VmFsaWRhdGlvbkljb24gPSAoa2V5OiBBZHllbkNhcmRGaWVsZHMpID0+XG4gICAgICAgIGlzRmllbGRJbnZhbGlkKGtleSwgZmllbGRzVmFsaWRhdGlvbikgJiYgKFxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhZHllbi1jaGVja291dC1pbnB1dF9faW5saW5lLXZhbGlkYXRpb24gYWR5ZW4tY2hlY2tvdXQtaW5wdXRfX2lubGluZS12YWxpZGF0aW9uLS1pbnZhbGlkXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB0cmFuc2Zvcm06ICdub25lJywgcmlnaHQ6ICcyMHB4JyB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgYWx0PVwiYWR5ZW4tY2hlY2tvdXQtaWNvblwiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFkeWVuLWNoZWNrb3V0X19pY29uXCJcbiAgICAgICAgICAgICAgICAgICAgc3JjPVwiaHR0cHM6Ly9jaGVja291dHNob3BwZXItdGVzdC5hZHllbi5jb20vY2hlY2tvdXRzaG9wcGVyL2ltYWdlcy9jb21wb25lbnRzL2ZpZWxkX2Vycm9yLnN2Z1wiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICB7c2hvdWxkU2hvd051bWJlckZpZWxkICYmIChcbiAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZT8udHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50Lmluc3RydW1lbnRfdHJ1c3RlZF9zaGlwcGluZ19hZGRyZXNzX3RpdGxlX3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHJvbmc+XG5cbiAgICAgICAgICAgICAgICAgICAgPGJyIC8+XG5cbiAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlPy50cmFuc2xhdGUoJ3BheW1lbnQuaW5zdHJ1bWVudF90cnVzdGVkX3NoaXBwaW5nX2FkZHJlc3NfdGV4dCcpfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1jY0ZpZWxkc1wiIGlkPXt2ZXJpZmljYXRpb25GaWVsZHNDb250YWluZXJJZH0+XG4gICAgICAgICAgICAgICAge3Nob3VsZFNob3dOdW1iZXJGaWVsZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1maWVsZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zvcm0tZmllbGQtLWNjTnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtLWZpZWxkLS1jY051bWJlci0taGFzRXhwaXJ5RGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gJ2JjbWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBkaXYgaXMgaGlkaW5nIGJ5IENTUyBiZWNhdXNlIHRoZXJlIGlzIGFuIEFkeWVuIGxpYnJhcnkgaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVja291dC1zZGsgd2hpY2ggbW91bnRzIHZlcmlmaWNhdGlvbiBmaWVsZHMgYW5kIGlmIGlzIHJlbW92ZWQgd2l0aCBKUyB0aGlzIG1vdW50aW5nIGV2ZW50IHdpbGwgYmUgdGhyb3duIGFuIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAnZm9ybS1maWVsZC1jY051bWJlci0taGlkZSc6ICFzaG91bGRTaG93TnVtYmVyRmllbGQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPXtBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlPy50cmFuc2xhdGUoJ3BheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zvcm0taW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3B0aW1pemVkQ2hlY2tvdXQtZm9ybS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoYXMtaWNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhZHllbi1jaGVja291dF9faW5wdXQtd3JhcHBlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhZHllbi1jaGVja291dF9faW5wdXQtLWVycm9yJzogaXNGaWVsZEludmFsaWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWNzZT17QWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e0FkeWVuQ2FyZEZpZWxkcy5DYXJkTnVtYmVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtzaG93VmFsaWRhdGlvbkljb24oQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXIpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAge3BheW1lbnRNZXRob2QubWV0aG9kID09PSAnc2NoZW1lJyAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1maWVsZCBmb3JtLWNjRmllbGRzLWZpZWxkLS1jY0N2dlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9e0FkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZT8udHJhbnNsYXRlKCdwYXltZW50LmNyZWRpdF9jYXJkX2N2dl9sYWJlbCcpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29wdGltaXplZENoZWNrb3V0LWZvcm0taW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGFzLWljb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWR5ZW4tY2hlY2tvdXRfX2lucHV0LXdyYXBwZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWR5ZW4tY2hlY2tvdXRfX2lucHV0LS1lcnJvcic6IGlzRmllbGRJbnZhbGlkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWNzZT17QWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2hvd1ZhbGlkYXRpb25JY29uKEFkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGUpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIHtwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gJ2JjbWMnICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWZpZWxkIGZvcm0tZmllbGQtLWNjRXhwaXJ5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj17QWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZT8udHJhbnNsYXRlKCdwYXltZW50LmNyZWRpdF9jYXJkX2V4cGlyYXRpb25fbGFiZWwnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcHRpbWl6ZWRDaGVja291dC1mb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hhcy1pY29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC13cmFwcGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC0tZXJyb3InOiBpc0ZpZWxkSW52YWxpZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtY3NlPXtBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAge3Nob3dWYWxpZGF0aW9uSWNvbihBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFkeWVuVjJDYXJkVmFsaWRhdGlvbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv2/AdyenV2CardValidation.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv2/AdyenV2Form.tsx":
/*!****************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv2/AdyenV2Form.tsx ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-widget-integration */ \"./packages/hosted-widget-integration/src/HostedWidgetPaymentComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/contexts/checkout-context/CheckoutContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/modal/Modal.tsx\");\n\n\n\n\n\n\nconst AdyenV2Form = (_a) => {\n    var { method, containerId, initializePayment, isAccountInstrument, shouldHideInstrumentExpiryDate, validateInstrument, language, showAdditionalActionContent, cancelAdditionalActionModalFlow, additionalActionContainerId, onUnhandledError, checkoutService, checkoutState, paymentForm } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"method\", \"containerId\", \"initializePayment\", \"isAccountInstrument\", \"shouldHideInstrumentExpiryDate\", \"validateInstrument\", \"language\", \"showAdditionalActionContent\", \"cancelAdditionalActionModalFlow\", \"additionalActionContainerId\", \"onUnhandledError\", \"checkoutService\", \"checkoutState\", \"paymentForm\"]);\n    const { hidePaymentSubmitButton, disableSubmit, setFieldValue, setSubmit, setValidationSchema, } = paymentForm;\n    const customer = checkoutState.data.getCustomer();\n    const { isLoadingInstruments } = checkoutState.statuses;\n    const instruments = checkoutState.data.getInstruments(method) || [];\n    const { checkoutState: { data: { isPaymentDataRequired }, }, } = (0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__.useCheckout)();\n    const isSignedIn = customer === null || customer === void 0 ? void 0 : customer.isGuest;\n    const isInstrumentFeatureAvailable = !isSignedIn && Boolean(method.config.isVaultingEnabled);\n    const isInstrumentCardCodeRequired = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(checkoutState);\n    const isInstrumentCardNumberRequired = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(checkoutState);\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null,\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_2__[\"default\"], Object.assign({}, rest, { containerId: containerId, deinitializePayment: checkoutService.deinitializePayment, disableSubmit: disableSubmit, hideContentWhenSignedOut: true, hidePaymentSubmitButton: hidePaymentSubmitButton, initializePayment: initializePayment, instruments: instruments, isAccountInstrument: isAccountInstrument, isInstrumentCardCodeRequired: isInstrumentCardCodeRequired, isInstrumentCardNumberRequired: isInstrumentCardNumberRequired, isInstrumentFeatureAvailable: isInstrumentFeatureAvailable, isLoadingInstruments: isLoadingInstruments(), isPaymentDataRequired: isPaymentDataRequired(), isSignedIn: !isSignedIn, loadInstruments: checkoutService.loadInstruments, method: method, onUnhandledError: onUnhandledError, setFieldValue: setFieldValue, setSubmit: setSubmit, setValidationSchema: setValidationSchema, shouldHideInstrumentExpiryDate: shouldHideInstrumentExpiryDate, shouldRenderCustomInstrument: true, signOut: checkoutService.signOutCustomer, validateInstrument: validateInstrument })),\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { additionalBodyClassName: \"modal-body--center\", closeButtonLabel: language.translate('common.close_action'), isOpen: showAdditionalActionContent, onRequestClose: cancelAdditionalActionModalFlow, shouldShowCloseButton: true },\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { id: additionalActionContainerId, style: { width: '100%' } })),\n        !showAdditionalActionContent && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { id: additionalActionContainerId, style: { display: 'none' } }))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdyenV2Form);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52Mi9BZHllblYyRm9ybS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUNzRTtBQUtiO0FBSVQ7QUFJTztBQUNOO0FBNEJqRCxNQUFNLFdBQVcsR0FBNkQsQ0FBQyxFQWdCOUUsRUFBRSxFQUFFO1FBaEIwRSxFQUMzRSxNQUFNLEVBQ04sV0FBVyxFQUNYLGlCQUFpQixFQUNqQixtQkFBbUIsRUFDbkIsOEJBQThCLEVBQzlCLGtCQUFrQixFQUNsQixRQUFRLEVBQ1IsMkJBQTJCLEVBQzNCLCtCQUErQixFQUMvQiwyQkFBMkIsRUFDM0IsZ0JBQWdCLEVBQ2hCLGVBQWUsRUFDZixhQUFhLEVBQ2IsV0FBVyxPQUVkLEVBRE0sSUFBSSxxREFmb0UsaVRBZ0I5RSxDQURVO0lBRVAsTUFBTSxFQUNGLHVCQUF1QixFQUN2QixhQUFhLEVBQ2IsYUFBYSxFQUNiLFNBQVMsRUFDVCxtQkFBbUIsR0FDdEIsR0FBRyxXQUFXLENBQUM7SUFDaEIsTUFBTSxRQUFRLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNsRCxNQUFNLEVBQUUsb0JBQW9CLEVBQUUsR0FBRyxhQUFhLENBQUMsUUFBUSxDQUFDO0lBRXhELE1BQU0sV0FBVyxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUVwRSxNQUFNLEVBQ0YsYUFBYSxFQUFFLEVBQ1gsSUFBSSxFQUFFLEVBQUUscUJBQXFCLEVBQUUsR0FDbEMsR0FDSixHQUFHLDBGQUFXLEVBQUUsQ0FBQztJQUNsQixNQUFNLFVBQVUsR0FBRyxRQUFRLGFBQVIsUUFBUSx1QkFBUixRQUFRLENBQUUsT0FBTyxDQUFDO0lBQ3JDLE1BQU0sNEJBQTRCLEdBQUcsQ0FBQyxVQUFVLElBQUksT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUM3RixNQUFNLDRCQUE0QixHQUFHLGtGQUFvQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3pGLE1BQU0sOEJBQThCLEdBQUcsa0ZBQXNDLENBQUMsYUFBYSxDQUFDLENBQUM7SUFFN0YsT0FBTyxDQUNIO1FBQ0ksMkRBQUMsdUZBQTRCLG9CQUNyQixJQUFJLElBQ1IsV0FBVyxFQUFFLFdBQVcsRUFDeEIsbUJBQW1CLEVBQUUsZUFBZSxDQUFDLG1CQUFtQixFQUN4RCxhQUFhLEVBQUUsYUFBYSxFQUM1Qix3QkFBd0IsUUFDeEIsdUJBQXVCLEVBQUUsdUJBQXVCLEVBQ2hELGlCQUFpQixFQUFFLGlCQUFpQixFQUNwQyxXQUFXLEVBQUUsV0FBVyxFQUN4QixtQkFBbUIsRUFBRSxtQkFBbUIsRUFDeEMsNEJBQTRCLEVBQUUsNEJBQTRCLEVBQzFELDhCQUE4QixFQUFFLDhCQUE4QixFQUM5RCw0QkFBNEIsRUFBRSw0QkFBNEIsRUFDMUQsb0JBQW9CLEVBQUUsb0JBQW9CLEVBQUUsRUFDNUMscUJBQXFCLEVBQUUscUJBQXFCLEVBQUUsRUFDOUMsVUFBVSxFQUFFLENBQUMsVUFBVSxFQUN2QixlQUFlLEVBQUUsZUFBZSxDQUFDLGVBQWUsRUFDaEQsTUFBTSxFQUFFLE1BQU0sRUFDZCxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFDbEMsYUFBYSxFQUFFLGFBQWEsRUFDNUIsU0FBUyxFQUFFLFNBQVMsRUFDcEIsbUJBQW1CLEVBQUUsbUJBQW1CLEVBQ3hDLDhCQUE4QixFQUFFLDhCQUE4QixFQUM5RCw0QkFBNEIsUUFDNUIsT0FBTyxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQ3hDLGtCQUFrQixFQUFFLGtCQUFrQixJQUN4QztRQUNGLDJEQUFDLGdFQUFLLElBQ0YsdUJBQXVCLEVBQUMsb0JBQW9CLEVBQzVDLGdCQUFnQixFQUFFLFFBQVEsQ0FBQyxTQUFTLENBQUMscUJBQXFCLENBQUMsRUFDM0QsTUFBTSxFQUFFLDJCQUEyQixFQUNuQyxjQUFjLEVBQUUsK0JBQStCLEVBQy9DLHFCQUFxQixFQUFFLElBQUk7WUFFM0Isb0VBQUssRUFBRSxFQUFFLDJCQUEyQixFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBSSxDQUM5RDtRQUNQLENBQUMsMkJBQTJCLElBQUksQ0FDN0Isb0VBQUssRUFBRSxFQUFFLDJCQUEyQixFQUFFLEtBQUssRUFBRSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsR0FBSSxDQUN2RSxDQUNGLENBQ04sQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLFdBQVcsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjIvQWR5ZW5WMkZvcm0udHN4P2EyNjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBDYXJkSW5zdHJ1bWVudCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsnO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHR5cGUgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQge1xuICAgIHR5cGUgSG9zdGVkV2lkZ2V0Q29tcG9uZW50UHJvcHMsXG4gICAgSG9zdGVkV2lkZ2V0UGF5bWVudENvbXBvbmVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2hvc3RlZC13aWRnZXQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHtcbiAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkU2VsZWN0b3IsXG4gICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkU2VsZWN0b3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9pbnN0cnVtZW50LXV0aWxzJztcbmltcG9ydCB7XG4gICAgdHlwZSBQYXltZW50TWV0aG9kUHJvcHMsXG4gICAgdXNlQ2hlY2tvdXQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC91aSc7XG5cbmV4cG9ydCB0eXBlIEFkeWVuVjJGb3JtUHJvcHMgPSBPbWl0PFxuICAgIEhvc3RlZFdpZGdldENvbXBvbmVudFByb3BzLFxuICAgIHwgJ29uU2lnbk91dCdcbiAgICB8ICdpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlJ1xuICAgIHwgJ2luc3RydW1lbnRzJ1xuICAgIHwgJ2lzTG9hZGluZ0luc3RydW1lbnRzJ1xuICAgIHwgJ2lzUGF5bWVudERhdGFSZXF1aXJlZCdcbiAgICB8ICdpc1NpZ25lZEluJ1xuICAgIHwgJ2lzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWQnXG4gICAgfCAnaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkJ1xuICAgIHwgJ2xvYWRJbnN0cnVtZW50cydcbiAgICB8ICdzaWduT3V0J1xuICAgIHwgJ2RlaW5pdGlhbGl6ZVBheW1lbnQnXG4+ICYge1xuICAgIGNvbnRhaW5lcklkOiBzdHJpbmc7XG4gICAgaXNBY2NvdW50SW5zdHJ1bWVudDogYm9vbGVhbjtcbiAgICBzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGU6IGJvb2xlYW47XG4gICAgdmFsaWRhdGVJbnN0cnVtZW50OiAoXG4gICAgICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZDogYm9vbGVhbixcbiAgICAgICAgc2VsZWN0ZWRJbnN0cnVtZW50OiBDYXJkSW5zdHJ1bWVudCxcbiAgICApID0+IFJlYWN0Tm9kZTtcbiAgICBzaG93QWRkaXRpb25hbEFjdGlvbkNvbnRlbnQ6IGJvb2xlYW47XG4gICAgY2FuY2VsQWRkaXRpb25hbEFjdGlvbk1vZGFsRmxvdzogKCkgPT4gdm9pZDtcbiAgICBhZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWQ6IHN0cmluZztcbn07XG5cbmNvbnN0IEFkeWVuVjJGb3JtOiBGdW5jdGlvbkNvbXBvbmVudDxBZHllblYyRm9ybVByb3BzICYgUGF5bWVudE1ldGhvZFByb3BzPiA9ICh7XG4gICAgbWV0aG9kLFxuICAgIGNvbnRhaW5lcklkLFxuICAgIGluaXRpYWxpemVQYXltZW50LFxuICAgIGlzQWNjb3VudEluc3RydW1lbnQsXG4gICAgc2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlLFxuICAgIHZhbGlkYXRlSW5zdHJ1bWVudCxcbiAgICBsYW5ndWFnZSxcbiAgICBzaG93QWRkaXRpb25hbEFjdGlvbkNvbnRlbnQsXG4gICAgY2FuY2VsQWRkaXRpb25hbEFjdGlvbk1vZGFsRmxvdyxcbiAgICBhZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWQsXG4gICAgb25VbmhhbmRsZWRFcnJvcixcbiAgICBjaGVja291dFNlcnZpY2UsXG4gICAgY2hlY2tvdXRTdGF0ZSxcbiAgICBwYXltZW50Rm9ybSxcbiAgICAuLi5yZXN0XG59KSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgICBoaWRlUGF5bWVudFN1Ym1pdEJ1dHRvbixcbiAgICAgICAgZGlzYWJsZVN1Ym1pdCxcbiAgICAgICAgc2V0RmllbGRWYWx1ZSxcbiAgICAgICAgc2V0U3VibWl0LFxuICAgICAgICBzZXRWYWxpZGF0aW9uU2NoZW1hLFxuICAgIH0gPSBwYXltZW50Rm9ybTtcbiAgICBjb25zdCBjdXN0b21lciA9IGNoZWNrb3V0U3RhdGUuZGF0YS5nZXRDdXN0b21lcigpO1xuICAgIGNvbnN0IHsgaXNMb2FkaW5nSW5zdHJ1bWVudHMgfSA9IGNoZWNrb3V0U3RhdGUuc3RhdHVzZXM7XG5cbiAgICBjb25zdCBpbnN0cnVtZW50cyA9IGNoZWNrb3V0U3RhdGUuZGF0YS5nZXRJbnN0cnVtZW50cyhtZXRob2QpIHx8IFtdO1xuXG4gICAgY29uc3Qge1xuICAgICAgICBjaGVja291dFN0YXRlOiB7XG4gICAgICAgICAgICBkYXRhOiB7IGlzUGF5bWVudERhdGFSZXF1aXJlZCB9LFxuICAgICAgICB9LFxuICAgIH0gPSB1c2VDaGVja291dCgpO1xuICAgIGNvbnN0IGlzU2lnbmVkSW4gPSBjdXN0b21lcj8uaXNHdWVzdDtcbiAgICBjb25zdCBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlID0gIWlzU2lnbmVkSW4gJiYgQm9vbGVhbihtZXRob2QuY29uZmlnLmlzVmF1bHRpbmdFbmFibGVkKTtcbiAgICBjb25zdCBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkID0gaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpO1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCA9IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPD5cbiAgICAgICAgICAgIDxIb3N0ZWRXaWRnZXRQYXltZW50Q29tcG9uZW50XG4gICAgICAgICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgICAgICAgICAgY29udGFpbmVySWQ9e2NvbnRhaW5lcklkfVxuICAgICAgICAgICAgICAgIGRlaW5pdGlhbGl6ZVBheW1lbnQ9e2NoZWNrb3V0U2VydmljZS5kZWluaXRpYWxpemVQYXltZW50fVxuICAgICAgICAgICAgICAgIGRpc2FibGVTdWJtaXQ9e2Rpc2FibGVTdWJtaXR9XG4gICAgICAgICAgICAgICAgaGlkZUNvbnRlbnRXaGVuU2lnbmVkT3V0XG4gICAgICAgICAgICAgICAgaGlkZVBheW1lbnRTdWJtaXRCdXR0b249e2hpZGVQYXltZW50U3VibWl0QnV0dG9ufVxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVQYXltZW50PXtpbml0aWFsaXplUGF5bWVudH1cbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50cz17aW5zdHJ1bWVudHN9XG4gICAgICAgICAgICAgICAgaXNBY2NvdW50SW5zdHJ1bWVudD17aXNBY2NvdW50SW5zdHJ1bWVudH1cbiAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkPXtpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkfVxuICAgICAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZD17aXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkfVxuICAgICAgICAgICAgICAgIGlzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGU9e2lzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGV9XG4gICAgICAgICAgICAgICAgaXNMb2FkaW5nSW5zdHJ1bWVudHM9e2lzTG9hZGluZ0luc3RydW1lbnRzKCl9XG4gICAgICAgICAgICAgICAgaXNQYXltZW50RGF0YVJlcXVpcmVkPXtpc1BheW1lbnREYXRhUmVxdWlyZWQoKX1cbiAgICAgICAgICAgICAgICBpc1NpZ25lZEluPXshaXNTaWduZWRJbn1cbiAgICAgICAgICAgICAgICBsb2FkSW5zdHJ1bWVudHM9e2NoZWNrb3V0U2VydmljZS5sb2FkSW5zdHJ1bWVudHN9XG4gICAgICAgICAgICAgICAgbWV0aG9kPXttZXRob2R9XG4gICAgICAgICAgICAgICAgb25VbmhhbmRsZWRFcnJvcj17b25VbmhhbmRsZWRFcnJvcn1cbiAgICAgICAgICAgICAgICBzZXRGaWVsZFZhbHVlPXtzZXRGaWVsZFZhbHVlfVxuICAgICAgICAgICAgICAgIHNldFN1Ym1pdD17c2V0U3VibWl0fVxuICAgICAgICAgICAgICAgIHNldFZhbGlkYXRpb25TY2hlbWE9e3NldFZhbGlkYXRpb25TY2hlbWF9XG4gICAgICAgICAgICAgICAgc2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlPXtzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGV9XG4gICAgICAgICAgICAgICAgc2hvdWxkUmVuZGVyQ3VzdG9tSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgIHNpZ25PdXQ9e2NoZWNrb3V0U2VydmljZS5zaWduT3V0Q3VzdG9tZXJ9XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVJbnN0cnVtZW50PXt2YWxpZGF0ZUluc3RydW1lbnR9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPE1vZGFsXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbEJvZHlDbGFzc05hbWU9XCJtb2RhbC1ib2R5LS1jZW50ZXJcIlxuICAgICAgICAgICAgICAgIGNsb3NlQnV0dG9uTGFiZWw9e2xhbmd1YWdlLnRyYW5zbGF0ZSgnY29tbW9uLmNsb3NlX2FjdGlvbicpfVxuICAgICAgICAgICAgICAgIGlzT3Blbj17c2hvd0FkZGl0aW9uYWxBY3Rpb25Db250ZW50fVxuICAgICAgICAgICAgICAgIG9uUmVxdWVzdENsb3NlPXtjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93fVxuICAgICAgICAgICAgICAgIHNob3VsZFNob3dDbG9zZUJ1dHRvbj17dHJ1ZX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPXthZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWR9IHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0gLz5cbiAgICAgICAgICAgIDwvTW9kYWw+XG4gICAgICAgICAgICB7IXNob3dBZGRpdGlvbmFsQWN0aW9uQ29udGVudCAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBpZD17YWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkfSBzdHlsZT17eyBkaXNwbGF5OiAnbm9uZScgfX0gLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgIDwvPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBZHllblYyRm9ybTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv2/AdyenV2Form.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv2/AdyenV2PaymentMethod.tsx":
/*!*************************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv2/AdyenV2PaymentMethod.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdyenV2PaymentMethodType: () => (/* binding */ AdyenV2PaymentMethodType),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_adyen__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/adyen */ \"../checkout-sdk-js/dist/esm/integrations/adyen.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/locale */ \"./packages/locale/src/LocaleProvider.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/contexts/checkout-context/CheckoutContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/contexts/payment-form-context/PaymentFormContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/form/contexts/FormContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/loading/LoadingOverlay.tsx\");\n/* harmony import */ var _AdyenV2CardValidation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./AdyenV2CardValidation */ \"./packages/adyen-integration/src/adyenv2/AdyenV2CardValidation.tsx\");\n/* harmony import */ var _AdyenV2Form__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./AdyenV2Form */ \"./packages/adyen-integration/src/adyenv2/AdyenV2Form.tsx\");\n\n\n\n\n\n\n\n\nvar AdyenV2PaymentMethodType;\n(function (AdyenV2PaymentMethodType) {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV2PaymentMethodType[\"scheme\"] = \"scheme\";\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV2PaymentMethodType[\"bcmc\"] = \"bcmc\";\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV2PaymentMethodType[\"ideal\"] = \"ideal\";\n})(AdyenV2PaymentMethodType || (AdyenV2PaymentMethodType = {}));\nconst AdyenV2PaymentMethod = (_a) => {\n    var { checkoutService, checkoutState, paymentForm, method, language } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"checkoutService\", \"checkoutState\", \"paymentForm\", \"method\", \"language\"]);\n    const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)({\n        shouldShowModal: true,\n    });\n    const [showAdditionalActionContent, setShowAdditionalActionContent] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [cardValidationState, setCardValidationState] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n    const containerId = `adyen-${method.id}-component-field`;\n    const additionalActionContainerId = `adyen-${method.id}-additional-action-component-field`;\n    const cardVerificationContainerId = `adyen-${method.id}-tsv-component-field`;\n    const threeDS2ContainerId = `adyen-${method.id}-additional-action-component-field`;\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n    const component = method.id;\n    const shouldHideInstrumentExpiryDate = component === AdyenV2PaymentMethodType.bcmc;\n    const onBeforeLoad = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((shopperInteraction) => {\n        ref.current.shouldShowModal = shopperInteraction;\n        setShowAdditionalActionContent(ref.current.shouldShowModal);\n    }, []);\n    const onComplete = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setShowAdditionalActionContent(false);\n        ref.current.cancelAdditionalAction = undefined;\n    }, []);\n    const onLoad = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((cancel) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        ref.current.cancelAdditionalAction = cancel;\n    }, []);\n    const cancelAdditionalActionModalFlow = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setShowAdditionalActionContent(false);\n        if (ref.current.cancelAdditionalAction) {\n            ref.current.cancelAdditionalAction();\n            ref.current.cancelAdditionalAction = undefined;\n        }\n    }, []);\n    const initializeAdyenPayment = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((options, selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        const selectedInstrumentId = selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken;\n        const adyenOptions = {\n            [AdyenV2PaymentMethodType.scheme]: {\n                hasHolderName: true,\n                holderNameRequired: true,\n            },\n            [AdyenV2PaymentMethodType.bcmc]: {\n                hasHolderName: false,\n            },\n            [AdyenV2PaymentMethodType.ideal]: {\n                showImage: true,\n            },\n        };\n        return checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_adyen__WEBPACK_IMPORTED_MODULE_1__.createAdyenV2PaymentStrategy], adyenv2: {\n                cardVerificationContainerId: selectedInstrumentId && cardVerificationContainerId,\n                containerId,\n                hasVaultedInstruments: !!selectedInstrumentId,\n                options: adyenOptions[component],\n                threeDS2ContainerId,\n                additionalActionOptions: {\n                    widgetSize: '05',\n                    containerId: additionalActionContainerId,\n                    onBeforeLoad,\n                    onComplete,\n                    onLoad,\n                },\n                shouldShowNumberField: ref.current.shouldShowNumberField,\n                validateCardFields: (state) => {\n                    setCardValidationState(state);\n                },\n            } }));\n    }), [\n        component,\n        cardVerificationContainerId,\n        containerId,\n        additionalActionContainerId,\n        threeDS2ContainerId,\n        onBeforeLoad,\n        onComplete,\n        onLoad,\n        checkoutService,\n    ]);\n    const validateInstrument = (shouldShowNumberField, selectedInstrument) => {\n        ref.current.shouldShowNumberField = shouldShowNumberField;\n        return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_AdyenV2CardValidation__WEBPACK_IMPORTED_MODULE_9__[\"default\"], { cardValidationState: cardValidationState, language: language, paymentMethod: method, selectedInstrument: selectedInstrument, shouldShowNumberField: shouldShowNumberField, verificationFieldsContainerId: cardVerificationContainerId }));\n    };\n    const isAccountInstrument = () => {\n        switch (method.method) {\n            case 'directEbanking':\n            case 'giropay':\n            case 'ideal':\n            case 'sepadirectdebit':\n                return true;\n            default:\n                return false;\n        }\n    };\n    const isLoading = checkoutState.statuses.isLoadingInstruments() ||\n        checkoutState.statuses.isLoadingPaymentMethod(method.id);\n    const formContextProps = {\n        isSubmitted: paymentForm.isSubmitted(),\n        setSubmitted: paymentForm.setSubmitted,\n    };\n    return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].Provider, { value: formContextProps },\n        react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Provider, { value: { checkoutState, checkoutService } },\n            react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_3__[\"default\"], { checkoutService: checkoutService },\n                react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__.PaymentFormContext.Provider, { value: { paymentForm } },\n                    react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__[\"default\"], { hideContentWhenLoading: true, isLoading: isLoading },\n                        react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_AdyenV2Form__WEBPACK_IMPORTED_MODULE_10__[\"default\"], Object.assign({}, rest, { additionalActionContainerId: additionalActionContainerId, cancelAdditionalActionModalFlow: cancelAdditionalActionModalFlow, checkoutService: checkoutService, checkoutState: checkoutState, containerId: containerId, initializePayment: initializeAdyenPayment, isAccountInstrument: isAccountInstrument(), language: language, method: method, paymentForm: paymentForm, shouldHideInstrumentExpiryDate: shouldHideInstrumentExpiryDate, showAdditionalActionContent: showAdditionalActionContent, validateInstrument: validateInstrument }))))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(AdyenV2PaymentMethod, [{ gateway: 'adyenv2' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52Mi9BZHllblYyUGF5bWVudE1ldGhvZC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTzRGO0FBQ1A7QUFHdkI7QUFPUDtBQUNnQjtBQUVYO0FBQ3BCO0FBUXhDLElBQVksd0JBT1g7QUFQRCxXQUFZLHdCQUF3QjtJQUNoQyxnRUFBZ0U7SUFDaEUsNkNBQWlCO0lBQ2pCLGdFQUFnRTtJQUNoRSx5Q0FBYTtJQUNiLGdFQUFnRTtJQUNoRSwyQ0FBZTtBQUNuQixDQUFDLEVBUFcsd0JBQXdCLEtBQXhCLHdCQUF3QixRQU9uQztBQVFELE1BQU0sb0JBQW9CLEdBQTBDLENBQUMsRUFPcEUsRUFBRSxFQUFFO1FBUGdFLEVBQ2pFLGVBQWUsRUFDZixhQUFhLEVBQ2IsV0FBVyxFQUNYLE1BQU0sRUFDTixRQUFRLE9BRVgsRUFETSxJQUFJLHFEQU4wRCx5RUFPcEUsQ0FEVTtJQUVQLE1BQU0sR0FBRyxHQUFHLDZDQUFNLENBQXdCO1FBQ3RDLGVBQWUsRUFBRSxJQUFJO0tBQ3hCLENBQUMsQ0FBQztJQUNILE1BQU0sQ0FBQywyQkFBMkIsRUFBRSw4QkFBOEIsQ0FBQyxHQUFHLCtDQUFRLENBQVUsS0FBSyxDQUFDLENBQUM7SUFDL0YsTUFBTSxDQUFDLG1CQUFtQixFQUFFLHNCQUFzQixDQUFDLEdBQUcsK0NBQVEsRUFBd0IsQ0FBQztJQUN2RixNQUFNLFdBQVcsR0FBRyxTQUFTLE1BQU0sQ0FBQyxFQUFFLGtCQUFrQixDQUFDO0lBQ3pELE1BQU0sMkJBQTJCLEdBQUcsU0FBUyxNQUFNLENBQUMsRUFBRSxvQ0FBb0MsQ0FBQztJQUMzRixNQUFNLDJCQUEyQixHQUFHLFNBQVMsTUFBTSxDQUFDLEVBQUUsc0JBQXNCLENBQUM7SUFDN0UsTUFBTSxtQkFBbUIsR0FBRyxTQUFTLE1BQU0sQ0FBQyxFQUFFLG9DQUFvQyxDQUFDO0lBQ25GLHlFQUF5RTtJQUN6RSxNQUFNLFNBQVMsR0FBRyxNQUFN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O1lBQy9ELDJEQUFDLG9FQUFjLElBQUMsZUFBZSxFQUFFLGVBQWU7Z0JBQzVDLDJEQUFDLDZGQUFrQixDQUFDLFFBQVEsSUFBQyxLQUFLLEVBQUUsRUFBRSxXQUFXLEVBQUU7b0JBQy9DLDJEQUFDLGdFQUFjLElBQUMsc0JBQXNCLFFBQUMsU0FBUyxFQUFFLFNBQVM7d0JBQ3ZELDJEQUFDLHFEQUFXLG9CQUNKLElBQUksSUFDUiwyQkFBMkIsRUFBRSwyQkFBMkIsRUFDeEQsK0JBQStCLEVBQUUsK0JBQStCLEVBQ2hFLGVBQWUsRUFBRSxlQUFlLEVBQ2hDLGFBQWEsRUFBRSxhQUFhLEVBQzVCLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLGlCQUFpQixFQUFFLHNCQUFzQixFQUN6QyxtQkFBbUIsRUFBRSxtQkFBbUIsRUFBRSxFQUMxQyxRQUFRLEVBQUUsUUFBUSxFQUNsQixNQUFNLEVBQUUsTUFBTSxFQUNkLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLDhCQUE4QixFQUFFLDhCQUE4QixFQUM5RCwyQkFBMkIsRUFBRSwyQkFBMkIsRUFDeEQsa0JBQWtCLEVBQUUsa0JBQWtCLElBQ3hDLENBQ1csQ0FDUyxDQUNqQixDQUNNLENBQ1IsQ0FDMUIsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLHlGQUFxQixDQUNoQyxvQkFBb0IsRUFDcEIsQ0FBQyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUMzQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52Mi9BZHllblYyUGF5bWVudE1ldGhvZC50c3g/MDhmYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIHR5cGUgQWR5ZW5DcmVkaXRDYXJkQ29tcG9uZW50T3B0aW9ucyxcbiAgICB0eXBlIEFkeWVuSWRlYWxDb21wb25lbnRPcHRpb25zLFxuICAgIHR5cGUgQWR5ZW5WYWxpZGF0aW9uU3RhdGUsXG4gICAgdHlwZSBDYXJkSW5zdHJ1bWVudCxcbiAgICB0eXBlIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgeyBjcmVhdGVBZHllblYyUGF5bWVudFN0cmF0ZWd5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9pbnRlZ3JhdGlvbnMvYWR5ZW4nO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyB0eXBlIEhvc3RlZFdpZGdldENvbXBvbmVudFByb3BzIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2hvc3RlZC13aWRnZXQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHsgTG9jYWxlUHJvdmlkZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvbG9jYWxlJztcbmltcG9ydCB7XG4gICAgQ2hlY2tvdXRDb250ZXh0LFxuICAgIFBheW1lbnRGb3JtQ29udGV4dCxcbiAgICB0eXBlIFBheW1lbnRNZXRob2RQcm9wcyxcbiAgICB0eXBlIFBheW1lbnRNZXRob2RSZXNvbHZlSWQsXG4gICAgdG9SZXNvbHZhYmxlQ29tcG9uZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgRm9ybUNvbnRleHQsIExvYWRpbmdPdmVybGF5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3VpJztcblxuaW1wb3J0IEFkeWVuVjJDYXJkVmFsaWRhdGlvbiBmcm9tICcuL0FkeWVuVjJDYXJkVmFsaWRhdGlvbic7XG5pbXBvcnQgQWR5ZW5WMkZvcm0gZnJvbSAnLi9BZHllblYyRm9ybSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5PcHRpb25zIHtcbiAgICBzY2hlbWU6IEFkeWVuQ3JlZGl0Q2FyZENvbXBvbmVudE9wdGlvbnM7XG4gICAgYmNtYzogQWR5ZW5DcmVkaXRDYXJkQ29tcG9uZW50T3B0aW9ucztcbiAgICBpZGVhbDogQWR5ZW5JZGVhbENvbXBvbmVudE9wdGlvbnM7XG59XG5cbmV4cG9ydCBlbnVtIEFkeWVuVjJQYXltZW50TWV0aG9kVHlwZSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICAgIHNjaGVtZSA9ICdzY2hlbWUnLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgICBiY21jID0gJ2JjbWMnLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgICBpZGVhbCA9ICdpZGVhbCcsXG59XG5cbmludGVyZmFjZSBBZHllblBheW1lbnRNZXRob2RSZWYge1xuICAgIHNob3VsZFNob3dNb2RhbDogYm9vbGVhbjtcbiAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ/OiBib29sZWFuO1xuICAgIGNhbmNlbEFkZGl0aW9uYWxBY3Rpb24/KCk6IHZvaWQ7XG59XG5cbmNvbnN0IEFkeWVuVjJQYXltZW50TWV0aG9kOiBGdW5jdGlvbkNvbXBvbmVudDxQYXltZW50TWV0aG9kUHJvcHM+ID0gKHtcbiAgICBjaGVja291dFNlcnZpY2UsXG4gICAgY2hlY2tvdXRTdGF0ZSxcbiAgICBwYXltZW50Rm9ybSxcbiAgICBtZXRob2QsXG4gICAgbGFuZ3VhZ2UsXG4gICAgLi4ucmVzdFxufSkgPT4ge1xuICAgIGNvbnN0IHJlZiA9IHVzZVJlZjxBZHllblBheW1lbnRNZXRob2RSZWY+KHtcbiAgICAgICAgc2hvdWxkU2hvd01vZGFsOiB0cnVlLFxuICAgIH0pO1xuICAgIGNvbnN0IFtzaG93QWRkaXRpb25hbEFjdGlvbkNvbnRlbnQsIHNldFNob3dBZGRpdGlvbmFsQWN0aW9uQ29udGVudF0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gICAgY29uc3QgW2NhcmRWYWxpZGF0aW9uU3RhdGUsIHNldENhcmRWYWxpZGF0aW9uU3RhdGVdID0gdXNlU3RhdGU8QWR5ZW5WYWxpZGF0aW9uU3RhdGU+KCk7XG4gICAgY29uc3QgY29udGFpbmVySWQgPSBgYWR5ZW4tJHttZXRob2QuaWR9LWNvbXBvbmVudC1maWVsZGA7XG4gICAgY29uc3QgYWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkID0gYGFkeWVuLSR7bWV0aG9kLmlkfS1hZGRpdGlvbmFsLWFjdGlvbi1jb21wb25lbnQtZmllbGRgO1xuICAgIGNvbnN0IGNhcmRWZXJpZmljYXRpb25Db250YWluZXJJZCA9IGBhZHllbi0ke21ldGhvZC5pZH0tdHN2LWNvbXBvbmVudC1maWVsZGA7XG4gICAgY29uc3QgdGhyZWVEUzJDb250YWluZXJJZCA9IGBhZHllbi0ke21ldGhvZC5pZH0tYWRkaXRpb25hbC1hY3Rpb24tY29tcG9uZW50LWZpZWxkYDtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zXG4gICAgY29uc3QgY29tcG9uZW50ID0gbWV0aG9kLmlkIGFzIEFkeWVuVjJQYXltZW50TWV0aG9kVHlwZTtcbiAgICBjb25zdCBzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGUgPSBjb21wb25lbnQgPT09IEFkeWVuVjJQYXltZW50TWV0aG9kVHlwZS5iY21jO1xuXG4gICAgY29uc3Qgb25CZWZvcmVMb2FkID0gdXNlQ2FsbGJhY2soKHNob3BwZXJJbnRlcmFjdGlvbjogYm9vbGVhbikgPT4ge1xuICAgICAgICByZWYuY3VycmVudC5zaG91bGRTaG93TW9kYWwgPSBzaG9wcGVySW50ZXJhY3Rpb247XG5cbiAgICAgICAgc2V0U2hvd0FkZGl0aW9uYWxBY3Rpb25Db250ZW50KHJlZi5jdXJyZW50LnNob3VsZFNob3dNb2RhbCk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3Qgb25Db21wbGV0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgc2V0U2hvd0FkZGl0aW9uYWxBY3Rpb25Db250ZW50KGZhbHNlKTtcbiAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBvbkxvYWQgPSB1c2VDYWxsYmFjaygoY2FuY2VsPzogYW55KSA9PiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbiA9IGNhbmNlbDtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBzZXRTaG93QWRkaXRpb25hbEFjdGlvbkNvbnRlbnQoZmFsc2UpO1xuXG4gICAgICAgIGlmIChyZWYuY3VycmVudC5jYW5jZWxBZGRpdGlvbmFsQWN0aW9uKSB7XG4gICAgICAgICAgICByZWYuY3VycmVudC5jYW5jZWxBZGRpdGlvbmFsQWN0aW9uKCk7XG4gICAgICAgICAgICByZWYuY3VycmVudC5jYW5jZWxBZGRpdGlvbmFsQWN0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgaW5pdGlhbGl6ZUFkeWVuUGF5bWVudDogSG9zdGVkV2lkZ2V0Q29tcG9uZW50UHJvcHNbJ2luaXRpYWxpemVQYXltZW50J10gPSB1c2VDYWxsYmFjayhcbiAgICAgICAgYXN5bmMgKG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucywgc2VsZWN0ZWRJbnN0cnVtZW50OiBDYXJkSW5zdHJ1bWVudCkgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS1jb25kaXRpb25cbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5zdHJ1bWVudElkID0gc2VsZWN0ZWRJbnN0cnVtZW50Py5iaWdwYXlUb2tlbjtcbiAgICAgICAgICAgIGNvbnN0IGFkeWVuT3B0aW9uczogQWR5ZW5PcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIFtBZHllblYyUGF5bWVudE1ldGhvZFR5cGUuc2NoZW1lXToge1xuICAgICAgICAgICAgICAgICAgICBoYXNIb2xkZXJOYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBob2xkZXJOYW1lUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbQWR5ZW5WMlBheW1lbnRNZXRob2RUeXBlLmJjbWNdOiB7XG4gICAgICAgICAgICAgICAgICAgIGhhc0hvbGRlck5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW0FkeWVuVjJQYXltZW50TWV0aG9kVHlwZS5pZGVhbF06IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0ltYWdlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gY2hlY2tvdXRTZXJ2aWNlLmluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGludGVncmF0aW9uczogW2NyZWF0ZUFkeWVuVjJQYXltZW50U3RyYXRlZ3ldLFxuICAgICAgICAgICAgICAgIGFkeWVudjI6IHtcbiAgICAgICAgICAgICAgICAgICAgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbnN0cnVtZW50SWQgJiYgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgaGFzVmF1bHRlZEluc3RydW1lbnRzOiAhIXNlbGVjdGVkSW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBhZHllbk9wdGlvbnNbY29tcG9uZW50XSxcbiAgICAgICAgICAgICAgICAgICAgdGhyZWVEUzJDb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbk9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldFNpemU6ICcwNScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogYWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25CZWZvcmVMb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTG9hZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2hvd051bWJlckZpZWxkOiByZWYuY3VycmVudC5zaG91bGRTaG93TnVtYmVyRmllbGQsXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQ2FyZEZpZWxkczogKHN0YXRlOiBBZHllblZhbGlkYXRpb25TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q2FyZFZhbGlkYXRpb25TdGF0ZShzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBbXG4gICAgICAgICAgICBjb21wb25lbnQsXG4gICAgICAgICAgICBjYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWQsXG4gICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZCxcbiAgICAgICAgICAgIHRocmVlRFMyQ29udGFpbmVySWQsXG4gICAgICAgICAgICBvbkJlZm9yZUxvYWQsXG4gICAgICAgICAgICBvbkNvbXBsZXRlLFxuICAgICAgICAgICAgb25Mb2FkLFxuICAgICAgICAgICAgY2hlY2tvdXRTZXJ2aWNlLFxuICAgICAgICBdLFxuICAgICk7XG5cbiAgICBjb25zdCB2YWxpZGF0ZUluc3RydW1lbnQgPSAoXG4gICAgICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZDogYm9vbGVhbixcbiAgICAgICAgc2VsZWN0ZWRJbnN0cnVtZW50OiBDYXJkSW5zdHJ1bWVudCxcbiAgICApID0+IHtcbiAgICAgICAgcmVmLmN1cnJlbnQuc2hvdWxkU2hvd051bWJlckZpZWxkID0gc2hvdWxkU2hvd051bWJlckZpZWxkO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8QWR5ZW5WMkNhcmRWYWxpZGF0aW9uXG4gICAgICAgICAgICAgICAgY2FyZFZhbGlkYXRpb25TdGF0ZT17Y2FyZFZhbGlkYXRpb25TdGF0ZX1cbiAgICAgICAgICAgICAgICBsYW5ndWFnZT17bGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZD17bWV0aG9kfVxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5zdHJ1bWVudD17c2VsZWN0ZWRJbnN0cnVtZW50fVxuICAgICAgICAgICAgICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZD17c2hvdWxkU2hvd051bWJlckZpZWxkfVxuICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbkZpZWxkc0NvbnRhaW5lcklkPXtjYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWR9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH07XG5cbiAgICBjb25zdCBpc0FjY291bnRJbnN0cnVtZW50ID0gKCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKG1ldGhvZC5tZXRob2QpIHtcbiAgICAgICAgICAgIGNhc2UgJ2RpcmVjdEViYW5raW5nJzpcbiAgICAgICAgICAgIGNhc2UgJ2dpcm9wYXknOlxuICAgICAgICAgICAgY2FzZSAnaWRlYWwnOlxuICAgICAgICAgICAgY2FzZSAnc2VwYWRpcmVjdGRlYml0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgaXNMb2FkaW5nID1cbiAgICAgICAgY2hlY2tvdXRTdGF0ZS5zdGF0dXNlcy5pc0xvYWRpbmdJbnN0cnVtZW50cygpIHx8XG4gICAgICAgIGNoZWNrb3V0U3RhdGUuc3RhdHVzZXMuaXNMb2FkaW5nUGF5bWVudE1ldGhvZChtZXRob2QuaWQpO1xuXG4gICAgY29uc3QgZm9ybUNvbnRleHRQcm9wcyA9IHtcbiAgICAgICAgaXNTdWJtaXR0ZWQ6IHBheW1lbnRGb3JtLmlzU3VibWl0dGVkKCksXG4gICAgICAgIHNldFN1Ym1pdHRlZDogcGF5bWVudEZvcm0uc2V0U3VibWl0dGVkLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8Rm9ybUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Zvcm1Db250ZXh0UHJvcHN9PlxuICAgICAgICAgICAgPENoZWNrb3V0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBjaGVja291dFN0YXRlLCBjaGVja291dFNlcnZpY2UgfX0+XG4gICAgICAgICAgICAgICAgPExvY2FsZVByb3ZpZGVyIGNoZWNrb3V0U2VydmljZT17Y2hlY2tvdXRTZXJ2aWNlfT5cbiAgICAgICAgICAgICAgICAgICAgPFBheW1lbnRGb3JtQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBwYXltZW50Rm9ybSB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMb2FkaW5nT3ZlcmxheSBoaWRlQ29udGVudFdoZW5Mb2FkaW5nIGlzTG9hZGluZz17aXNMb2FkaW5nfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWR5ZW5WMkZvcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZD17YWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93PXtjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja291dFNlcnZpY2U9e2NoZWNrb3V0U2VydmljZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tvdXRTdGF0ZT17Y2hlY2tvdXRTdGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ9e2NvbnRhaW5lcklkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplUGF5bWVudD17aW5pdGlhbGl6ZUFkeWVuUGF5bWVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBY2NvdW50SW5zdHJ1bWVudD17aXNBY2NvdW50SW5zdHJ1bWVudCgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZT17bGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZD17bWV0aG9kfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50Rm9ybT17cGF5bWVudEZvcm19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZEhpZGVJbnN0cnVtZW50RXhwaXJ5RGF0ZT17c2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWRkaXRpb25hbEFjdGlvbkNvbnRlbnQ9e3Nob3dBZGRpdGlvbmFsQWN0aW9uQ29udGVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVJbnN0cnVtZW50PXt2YWxpZGF0ZUluc3RydW1lbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvTG9hZGluZ092ZXJsYXk+XG4gICAgICAgICAgICAgICAgICAgIDwvUGF5bWVudEZvcm1Db250ZXh0LlByb3ZpZGVyPlxuICAgICAgICAgICAgICAgIDwvTG9jYWxlUHJvdmlkZXI+XG4gICAgICAgICAgICA8L0NoZWNrb3V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgPC9Gb3JtQ29udGV4dC5Qcm92aWRlcj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlQ29tcG9uZW50PFBheW1lbnRNZXRob2RQcm9wcywgUGF5bWVudE1ldGhvZFJlc29sdmVJZD4oXG4gICAgQWR5ZW5WMlBheW1lbnRNZXRob2QsXG4gICAgW3sgZ2F0ZXdheTogJ2FkeWVudjInIH1dLFxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv2/AdyenV2PaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv3/AdyenV3CardValidation.tsx":
/*!**************************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv3/AdyenV3CardValidation.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classnames */ \"./node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/locale */ \"./packages/locale/src/TranslatedString.tsx\");\n\n\n\nvar AdyenCardFields;\n(function (AdyenCardFields) {\n    AdyenCardFields[\"CardNumber\"] = \"encryptedCardNumber\";\n    AdyenCardFields[\"SecurityCode\"] = \"encryptedSecurityCode\";\n    AdyenCardFields[\"ExpiryDate\"] = \"encryptedExpiryDate\";\n})(AdyenCardFields || (AdyenCardFields = {}));\nconst getInitialValidationState = ({ shouldShowNumberField, method, }) => {\n    const validationState = {};\n    if (shouldShowNumberField) {\n        validationState[AdyenCardFields.CardNumber] = { valid: false };\n    }\n    if (method === 'scheme') {\n        validationState[AdyenCardFields.SecurityCode] = { valid: false };\n    }\n    if (method === 'bcmc') {\n        validationState[AdyenCardFields.ExpiryDate] = { valid: false };\n    }\n    return validationState;\n};\nconst isFieldInvalid = (fieldKey, fieldsValidation) => !!fieldsValidation[fieldKey] && !fieldsValidation[fieldKey].valid;\nconst AdyenV3CardValidation = ({ verificationFieldsContainerId, shouldShowNumberField, selectedInstrument, paymentMethod, cardValidationState, }) => {\n    const [fieldsValidation, setFieldsValidation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }));\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        var _a;\n        if (!cardValidationState) {\n            return;\n        }\n        if (cardValidationState.fieldType &&\n            (!fieldsValidation[cardValidationState.fieldType] ||\n                ((_a = fieldsValidation[cardValidationState.fieldType]) === null || _a === void 0 ? void 0 : _a.valid) !==\n                    cardValidationState.valid)) {\n            if (cardValidationState.fieldType === AdyenCardFields.CardNumber) {\n                setFieldsValidation(Object.assign(Object.assign({}, fieldsValidation), { [AdyenCardFields.CardNumber]: cardValidationState.endDigits !== (selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.last4)\n                        ? Object.assign(Object.assign({}, cardValidationState), { valid: false }) : Object.assign({}, cardValidationState) }));\n            }\n            else {\n                setFieldsValidation(Object.assign(Object.assign({}, fieldsValidation), { [cardValidationState.fieldType]: cardValidationState }));\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [cardValidationState, setFieldsValidation, selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.last4]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        if (selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken) {\n            setFieldsValidation(getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }));\n        }\n    }, [selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken, paymentMethod.method, shouldShowNumberField]);\n    const showValidationIcon = (key) => isFieldInvalid(key, fieldsValidation) && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", { className: \"adyen-checkout-input__inline-validation adyen-checkout-input__inline-validation--invalid\", style: { transform: 'none', right: '20px' } },\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"img\", { alt: \"adyen-checkout-icon\", className: \"adyen-checkout__icon\", src: \"https://checkoutshopper-test.adyen.com/checkoutshopper/images/components/field_error.svg\" })));\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null,\n        shouldShowNumberField && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"p\", null,\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"strong\", null,\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.instrument_trusted_shipping_address_title_text\" })),\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"br\", null),\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.instrument_trusted_shipping_address_text\" }))),\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-ccFields\", id: verificationFieldsContainerId },\n            shouldShowNumberField && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-field', 'form-field--ccNumber', {\n                    'form-field--ccNumber--hasExpiryDate': paymentMethod.method === 'bcmc',\n                }, \n                // This div is hiding by CSS because there is an Adyen library in\n                // checkout-sdk which mounts verification fields and if is removed with JS this mounting event will be thrown an error\n                { 'form-field-ccNumber--hide': !shouldShowNumberField }) },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.CardNumber },\n                    react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.credit_card_number_label\" })),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.CardNumber, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.CardNumber, id: AdyenCardFields.CardNumber }),\n                showValidationIcon(AdyenCardFields.CardNumber))),\n            paymentMethod.method === 'scheme' && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-field form-ccFields-field--ccCvv\" },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.SecurityCode },\n                    react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.credit_card_cvv_label\" })),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.SecurityCode, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.SecurityCode, id: AdyenCardFields.SecurityCode }),\n                showValidationIcon(AdyenCardFields.SecurityCode))),\n            paymentMethod.method === 'bcmc' && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-field form-field--ccExpiry\" },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.ExpiryDate },\n                    react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.credit_card_expiration_label\" })),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.ExpiryDate, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.ExpiryDate, id: AdyenCardFields.ExpiryDate }),\n                showValidationIcon(AdyenCardFields.ExpiryDate))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdyenV3CardValidation);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52My9BZHllblYzQ2FyZFZhbGlkYXRpb24udHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUtvQztBQUN1QztBQUVYO0FBSWhFLElBQUssZUFJSjtBQUpELFdBQUssZUFBZTtJQUNoQixxREFBa0M7SUFDbEMseURBQXNDO0lBQ3RDLHFEQUFrQztBQUN0QyxDQUFDLEVBSkksZUFBZSxLQUFmLGVBQWUsUUFJbkI7QUFVRCxNQUFNLHlCQUF5QixHQUFHLENBQUMsRUFDL0IscUJBQXFCLEVBQ3JCLE1BQU0sR0FJVCxFQUFFLEVBQUU7SUFDRCxNQUFNLGVBQWUsR0FBcUIsRUFBRSxDQUFDO0lBRTdDLElBQUkscUJBQXFCLEVBQUUsQ0FBQztRQUN4QixlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ25FLENBQUM7SUFFRCxJQUFJLE1BQU0sS0FBSyxRQUFRLEVBQUUsQ0FBQztRQUN0QixlQUFlLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ3JFLENBQUM7SUFFRCxJQUFJLE1BQU0sS0FBSyxNQUFNLEVBQUUsQ0FBQztRQUNwQixlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ25FLENBQUM7SUFFRCxPQUFPLGVBQWUsQ0FBQztBQUMzQixDQUFDLENBQUM7QUFFRixNQUFNLGNBQWMsR0FBRyxDQUFDLFFBQXlCLEVBQUUsZ0JBQWtDLEVBQVcsRUFBRSxDQUM5RixDQUFDLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFFdEUsTUFBTSxxQkFBcUIsR0FBa0QsQ0FBQyxFQUMxRSw2QkFBNkIsRUFDN0IscUJB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WUFDQSxhQUFhLENBQUMsTUFBTSxLQUFLLE1BQU0sSUFBSSxDQUNoQyxvRUFBSyxTQUFTLEVBQUMsaUNBQWlDO2dCQUM1QyxzRUFBTyxPQUFPLEVBQUUsZUFBZSxDQUFDLFVBQVU7b0JBQ3RDLDJEQUFDLG9FQUFnQixJQUFDLEVBQUUsRUFBQyxzQ0FBc0MsR0FBRyxDQUMxRDtnQkFDUixvRUFDSSxTQUFTLEVBQUUsaURBQVUsQ0FDakIsWUFBWSxFQUNaLDhCQUE4QixFQUM5QixVQUFVLEVBQ1YsK0JBQStCLEVBQy9CO3dCQUNJLDhCQUE4QixFQUFFLGNBQWMsQ0FDMUMsZUFBZSxDQUFDLFVBQVUsRUFDMUIsZ0JBQWdCLENBQ25CO3FCQUNKLENBQ0osY0FDUyxlQUFlLENBQUMsVUFBVSxFQUNwQyxFQUFFLEVBQUUsZUFBZSxDQUFDLFVBQVUsR0FDaEM7Z0JBQ0Qsa0JBQWtCLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUM3QyxDQUNULENBQ0MsQ0FDSixDQUNULENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSxxQkFBcUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjMvQWR5ZW5WM0NhcmRWYWxpZGF0aW9uLnRzeD9kZjgzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgdHlwZSBBZHllblZhbGlkYXRpb25TdGF0ZSxcbiAgICB0eXBlIENhcmRJbnN0cnVtZW50LFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBSZWFjdCwgeyB0eXBlIEZ1bmN0aW9uQ29tcG9uZW50LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBUcmFuc2xhdGVkU3RyaW5nIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2xvY2FsZSc7XG5cbmV4cG9ydCB0eXBlIEZpZWxkc1ZhbGlkYXRpb24gPSB7IFtrZXkgaW4gQWR5ZW5DYXJkRmllbGRzXT86IEFkeWVuVmFsaWRhdGlvblN0YXRlIH07XG5cbmVudW0gQWR5ZW5DYXJkRmllbGRzIHtcbiAgICBDYXJkTnVtYmVyID0gJ2VuY3J5cHRlZENhcmROdW1iZXInLFxuICAgIFNlY3VyaXR5Q29kZSA9ICdlbmNyeXB0ZWRTZWN1cml0eUNvZGUnLFxuICAgIEV4cGlyeURhdGUgPSAnZW5jcnlwdGVkRXhwaXJ5RGF0ZScsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WM0NhcmRWYWxpZGF0aW9uUHJvcHMge1xuICAgIHZlcmlmaWNhdGlvbkZpZWxkc0NvbnRhaW5lcklkPzogc3RyaW5nO1xuICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZDogYm9vbGVhbjtcbiAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kO1xuICAgIGNhcmRWYWxpZGF0aW9uU3RhdGU/OiBBZHllblZhbGlkYXRpb25TdGF0ZTtcbiAgICBzZWxlY3RlZEluc3RydW1lbnQ/OiBDYXJkSW5zdHJ1bWVudDtcbn1cblxuY29uc3QgZ2V0SW5pdGlhbFZhbGlkYXRpb25TdGF0ZSA9ICh7XG4gICAgc2hvdWxkU2hvd051bWJlckZpZWxkLFxuICAgIG1ldGhvZCxcbn06IHtcbiAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ6IGJvb2xlYW47XG4gICAgbWV0aG9kOiBzdHJpbmc7XG59KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdGlvblN0YXRlOiBGaWVsZHNWYWxpZGF0aW9uID0ge307XG5cbiAgICBpZiAoc2hvdWxkU2hvd051bWJlckZpZWxkKSB7XG4gICAgICAgIHZhbGlkYXRpb25TdGF0ZVtBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcl0gPSB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cblxuICAgIGlmIChtZXRob2QgPT09ICdzY2hlbWUnKSB7XG4gICAgICAgIHZhbGlkYXRpb25TdGF0ZVtBZHllbkNhcmRGaWVsZHMuU2VjdXJpdHlDb2RlXSA9IHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxuXG4gICAgaWYgKG1ldGhvZCA9PT0gJ2JjbWMnKSB7XG4gICAgICAgIHZhbGlkYXRpb25TdGF0ZVtBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZV0gPSB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cblxuICAgIHJldHVybiB2YWxpZGF0aW9uU3RhdGU7XG59O1xuXG5jb25zdCBpc0ZpZWxkSW52YWxpZCA9IChmaWVsZEtleTogQWR5ZW5DYXJkRmllbGRzLCBmaWVsZHNWYWxpZGF0aW9uOiBGaWVsZHNWYWxpZGF0aW9uKTogYm9vbGVhbiA9PlxuICAgICEhZmllbGRzVmFsaWRhdGlvbltmaWVsZEtleV0gJiYgIWZpZWxkc1ZhbGlkYXRpb25bZmllbGRLZXldLnZhbGlkO1xuXG5jb25zdCBBZHllblYzQ2FyZFZhbGlkYXRpb246IEZ1bmN0aW9uQ29tcG9uZW50PEFkeWVuVjNDYXJkVmFsaWRhdGlvblByb3BzPiA9ICh7XG4gICAgdmVyaWZpY2F0aW9uRmllbGRzQ29udGFpbmVySWQsXG4gICAgc2hvdWxkU2hvd051bWJlckZpZWxkLFxuICAgIHNlbGVjdGVkSW5zdHJ1bWVudCxcbiAgICBwYXltZW50TWV0aG9kLFxuICAgIGNhcmRWYWxpZGF0aW9uU3RhdGUsXG59KSA9PiB7XG4gICAgY29uc3QgW2ZpZWxkc1ZhbGlkYXRpb24sIHNldEZpZWxkc1ZhbGlkYXRpb25dID0gdXNlU3RhdGU8RmllbGRzVmFsaWRhdGlvbj4oXG4gICAgICAgIGdldEluaXRpYWxWYWxpZGF0aW9uU3RhdGUoeyBzaG91bGRTaG93TnVtYmVyRmllbGQsIG1ldGhvZDogcGF5bWVudE1ldGhvZC5tZXRob2QgfSksXG4gICAgKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FyZFZhbGlkYXRpb25TdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2FyZFZhbGlkYXRpb25TdGF0ZS5maWVsZFR5cGUgJiZcbiAgICAgICAgICAgICghZmllbGRzVmFsaWRhdGlvbltjYXJkVmFsaWRhdGlvblN0YXRlLmZpZWxkVHlwZV0gfHxcbiAgICAgICAgICAgICAgICBmaWVsZHNWYWxpZGF0aW9uW2NhcmRWYWxpZGF0aW9uU3RhdGUuZmllbGRUeXBlXT8udmFsaWQgIT09XG4gICAgICAgICAgICAgICAgICAgIGNhcmRWYWxpZGF0aW9uU3RhdGUudmFsaWQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgaWYgKGNhcmRWYWxpZGF0aW9uU3RhdGUuZmllbGRUeXBlID09PSBBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcikge1xuICAgICAgICAgICAgICAgIHNldEZpZWxkc1ZhbGlkYXRpb24oe1xuICAgICAgICAgICAgICAgICAgICAuLi5maWVsZHNWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBbQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXJdOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZFZhbGlkYXRpb25TdGF0ZS5lbmREaWdpdHMgIT09IHNlbGVjdGVkSW5zdHJ1bWVudD8ubGFzdDRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHsgLi4uY2FyZFZhbGlkYXRpb25TdGF0ZSwgdmFsaWQ6IGZhbHNlIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHsgLi4uY2FyZFZhbGlkYXRpb25TdGF0ZSB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRGaWVsZHNWYWxpZGF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgW2NhcmRWYWxpZGF0aW9uU3RhdGUuZmllbGRUeXBlXTogY2FyZFZhbGlkYXRpb25TdGF0ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgfSwgW2NhcmRWYWxpZGF0aW9uU3RhdGUsIHNldEZpZWxkc1ZhbGlkYXRpb24sIHNlbGVjdGVkSW5zdHJ1bWVudD8ubGFzdDRdKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChzZWxlY3RlZEluc3RydW1lbnQ/LmJpZ3BheVRva2VuKSB7XG4gICAgICAgICAgICBzZXRGaWVsZHNWYWxpZGF0aW9uKFxuICAgICAgICAgICAgICAgIGdldEluaXRpYWxWYWxpZGF0aW9uU3RhdGUoeyBzaG91bGRTaG93TnVtYmVyRmllbGQsIG1ldGhvZDogcGF5bWVudE1ldGhvZC5tZXRob2QgfSksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSwgW3NlbGVjdGVkSW5zdHJ1bWVudD8uYmlncGF5VG9rZW4sIHBheW1lbnRNZXRob2QubWV0aG9kLCBzaG91bGRTaG93TnVtYmVyRmllbGRdKTtcblxuICAgIGNvbnN0IHNob3dWYWxpZGF0aW9uSWNvbiA9IChrZXk6IEFkeWVuQ2FyZEZpZWxkcykgPT5cbiAgICAgICAgaXNGaWVsZEludmFsaWQoa2V5LCBmaWVsZHNWYWxpZGF0aW9uKSAmJiAoXG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFkeWVuLWNoZWNrb3V0LWlucHV0X19pbmxpbmUtdmFsaWRhdGlvbiBhZHllbi1jaGVja291dC1pbnB1dF9faW5saW5lLXZhbGlkYXRpb24tLWludmFsaWRcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHRyYW5zZm9ybTogJ25vbmUnLCByaWdodDogJzIwcHgnIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICBhbHQ9XCJhZHllbi1jaGVja291dC1pY29uXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWR5ZW4tY2hlY2tvdXRfX2ljb25cIlxuICAgICAgICAgICAgICAgICAgICBzcmM9XCJodHRwczovL2NoZWNrb3V0c2hvcHBlci10ZXN0LmFkeWVuLmNvbS9jaGVja291dHNob3BwZXIvaW1hZ2VzL2NvbXBvbmVudHMvZmllbGRfZXJyb3Iuc3ZnXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIHtzaG91bGRTaG93TnVtYmVyRmllbGQgJiYgKFxuICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZWRTdHJpbmcgaWQ9XCJwYXltZW50Lmluc3RydW1lbnRfdHJ1c3RlZF9zaGlwcGluZ19hZGRyZXNzX3RpdGxlX3RleHRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3N0cm9uZz5cblxuICAgICAgICAgICAgICAgICAgICA8YnIgLz5cblxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlZFN0cmluZyBpZD1cInBheW1lbnQuaW5zdHJ1bWVudF90cnVzdGVkX3NoaXBwaW5nX2FkZHJlc3NfdGV4dFwiIC8+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWNjRmllbGRzXCIgaWQ9e3ZlcmlmaWNhdGlvbkZpZWxkc0NvbnRhaW5lcklkfT5cbiAgICAgICAgICAgICAgICB7c2hvdWxkU2hvd051bWJlckZpZWxkICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtLWZpZWxkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1maWVsZC0tY2NOdW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zvcm0tZmllbGQtLWNjTnVtYmVyLS1oYXNFeHBpcnlEYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QubWV0aG9kID09PSAnYmNtYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGRpdiBpcyBoaWRpbmcgYnkgQ1NTIGJlY2F1c2UgdGhlcmUgaXMgYW4gQWR5ZW4gbGlicmFyeSBpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrb3V0LXNkayB3aGljaCBtb3VudHMgdmVyaWZpY2F0aW9uIGZpZWxkcyBhbmQgaWYgaXMgcmVtb3ZlZCB3aXRoIEpTIHRoaXMgbW91bnRpbmcgZXZlbnQgd2lsbCBiZSB0aHJvd24gYW4gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ICdmb3JtLWZpZWxkLWNjTnVtYmVyLS1oaWRlJzogIXNob3VsZFNob3dOdW1iZXJGaWVsZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9e0FkeWVuQ2FyZEZpZWxkcy5DYXJkTnVtYmVyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlZFN0cmluZyBpZD1cInBheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcHRpbWl6ZWRDaGVja291dC1mb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hhcy1pY29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC13cmFwcGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC0tZXJyb3InOiBpc0ZpZWxkSW52YWxpZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtY3NlPXtBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAge3Nob3dWYWxpZGF0aW9uSWNvbihBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcil9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAge3BheW1lbnRNZXRob2QubWV0aG9kID09PSAnc2NoZW1lJyAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1maWVsZCBmb3JtLWNjRmllbGRzLWZpZWxkLS1jY0N2dlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9e0FkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVkU3RyaW5nIGlkPVwicGF5bWVudC5jcmVkaXRfY2FyZF9jdnZfbGFiZWxcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29wdGltaXplZENoZWNrb3V0LWZvcm0taW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGFzLWljb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWR5ZW4tY2hlY2tvdXRfX2lucHV0LXdyYXBwZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWR5ZW4tY2hlY2tvdXRfX2lucHV0LS1lcnJvcic6IGlzRmllbGRJbnZhbGlkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWNzZT17QWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2hvd1ZhbGlkYXRpb25JY29uKEFkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGUpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIHtwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gJ2JjbWMnICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWZpZWxkIGZvcm0tZmllbGQtLWNjRXhwaXJ5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj17QWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVkU3RyaW5nIGlkPVwicGF5bWVudC5jcmVkaXRfY2FyZF9leHBpcmF0aW9uX2xhYmVsXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcHRpbWl6ZWRDaGVja291dC1mb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hhcy1pY29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC13cmFwcGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC0tZXJyb3InOiBpc0ZpZWxkSW52YWxpZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtY3NlPXtBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAge3Nob3dWYWxpZGF0aW9uSWNvbihBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFkeWVuVjNDYXJkVmFsaWRhdGlvbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv3/AdyenV3CardValidation.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv3/AdyenV3Form.tsx":
/*!****************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv3/AdyenV3Form.tsx ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UntrustedShippingCardVerificationType: () => (/* binding */ UntrustedShippingCardVerificationType),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-widget-integration */ \"./packages/hosted-widget-integration/src/HostedWidgetPaymentComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/contexts/payment-form-context/PaymentFormContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/modal/Modal.tsx\");\n\n\n\n\n\n\nvar UntrustedShippingCardVerificationType;\n(function (UntrustedShippingCardVerificationType) {\n    UntrustedShippingCardVerificationType[\"CVV\"] = \"cvv\";\n    UntrustedShippingCardVerificationType[\"PAN\"] = \"pan\";\n})(UntrustedShippingCardVerificationType || (UntrustedShippingCardVerificationType = {}));\nconst AdyenV3Form = (_a) => {\n    var { method, containerId, initializePayment, isAccountInstrument, shouldHideInstrumentExpiryDate, validateInstrument, language, shouldRenderAdditionalActionContentModal, isModalVisible, cancelAdditionalActionModalFlow, additionalActionContainerId, checkoutState, checkoutService, onUnhandledError } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"method\", \"containerId\", \"initializePayment\", \"isAccountInstrument\", \"shouldHideInstrumentExpiryDate\", \"validateInstrument\", \"language\", \"shouldRenderAdditionalActionContentModal\", \"isModalVisible\", \"cancelAdditionalActionModalFlow\", \"additionalActionContainerId\", \"checkoutState\", \"checkoutService\", \"onUnhandledError\"]);\n    const { paymentForm } = (0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__.usePaymentFormContext)();\n    const customer = checkoutState.data.getCustomer();\n    const { isLoadingInstruments } = checkoutState.statuses;\n    const { isPaymentDataRequired } = checkoutState.data;\n    const instruments = checkoutState.data.getInstruments(method) || [];\n    const isSignedIn = customer === null || customer === void 0 ? void 0 : customer.isGuest;\n    const isInstrumentFeatureAvailable = !isSignedIn && Boolean(method.config.isVaultingEnabled);\n    const isInstrumentCardCodeRequired = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(checkoutState);\n    const isInstrumentCardNumberRequired = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(checkoutState);\n    const { hidePaymentSubmitButton, disableSubmit, setFieldValue, setSubmit, setValidationSchema, } = paymentForm;\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null,\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_2__[\"default\"], Object.assign({}, rest, { containerId: containerId, deinitializePayment: checkoutService.deinitializePayment, disableSubmit: disableSubmit, hideContentWhenSignedOut: true, hidePaymentSubmitButton: hidePaymentSubmitButton, initializePayment: initializePayment, instruments: instruments, isAccountInstrument: isAccountInstrument, isInstrumentCardCodeRequired: isInstrumentCardCodeRequired, isInstrumentCardNumberRequired: isInstrumentCardNumberRequired, isInstrumentFeatureAvailable: isInstrumentFeatureAvailable, isLoadingInstruments: isLoadingInstruments(), isPaymentDataRequired: isPaymentDataRequired(), isSignedIn: !isSignedIn, loadInstruments: checkoutService.loadInstruments, method: method, onUnhandledError: onUnhandledError, setFieldValue: setFieldValue, setSubmit: setSubmit, setValidationSchema: setValidationSchema, shouldHideInstrumentExpiryDate: shouldHideInstrumentExpiryDate, shouldRenderCustomInstrument: true, signOut: checkoutService.signOutCustomer, validateInstrument: validateInstrument })),\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { additionalBodyClassName: \"modal-body--center\", closeButtonLabel: language.translate('common.close_action'), isOpen: shouldRenderAdditionalActionContentModal, onRequestClose: cancelAdditionalActionModalFlow, shouldShowCloseButton: true, style: !isModalVisible && method.id === 'scheme'\n                ? {\n                    overlay: {\n                        display: 'none',\n                    },\n                }\n                : {} },\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { id: additionalActionContainerId, style: { width: '100%' } })),\n        !shouldRenderAdditionalActionContentModal && react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { id: additionalActionContainerId })));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdyenV3Form);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52My9BZHllblYzRm9ybS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFDc0U7QUFNYjtBQUlUO0FBSU87QUFDTjtBQUVqRCxJQUFZLHFDQUdYO0FBSEQsV0FBWSxxQ0FBcUM7SUFDN0Msb0RBQVc7SUFDWCxvREFBVztBQUNmLENBQUMsRUFIVyxxQ0FBcUMsS0FBckMscUNBQXFDLFFBR2hEO0FBNkJELE1BQU0sV0FBVyxHQUE2RCxDQUFDLEVBZ0I5RSxFQUFFLEVBQUU7UUFoQjBFLEVBQzNFLE1BQU0sRUFDTixXQUFXLEVBQ1gsaUJBQWlCLEVBQ2pCLG1CQUFtQixFQUNuQiw4QkFBOEIsRUFDOUIsa0JBQWtCLEVBQ2xCLFFBQVEsRUFDUix3Q0FBd0MsRUFDeEMsY0FBYyxFQUNkLCtCQUErQixFQUMvQiwyQkFBMkIsRUFDM0IsYUFBYSxFQUNiLGVBQWUsRUFDZixnQkFBZ0IsT0FFbkIsRUFETSxJQUFJLHFEQWZvRSxpVUFnQjlFLENBRFU7SUFFUCxNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsb0dBQXFCLEVBQUUsQ0FBQztJQUNoRCxNQUFNLFFBQVEsR0FBRyxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ2xELE1BQU0sRUFBRSxvQkFBb0IsRUFBRSxHQUFHLGFBQWEsQ0FBQyxRQUFRLENBQUM7SUFDeEQsTUFBTSxFQUFFLHFCQUFxQixFQUFFLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQztJQUNyRCxNQUFNLFdBQVcsR0FBRyxhQUFhLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDcEUsTUFBTSxVQUFVLEdBQUcsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLE9BQU8sQ0FBQztJQUNyQyxNQUFNLDRCQUE0QixHQUFHLENBQUMsVUFBVSxJQUFJLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDN0YsTUFBTSw0QkFBNEIsR0FBRyxrRkFBb0MsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUN6RixNQUFNLDhCQUE4QixHQUFHLGtGQUFzQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBRTdGLE1BQU0sRUFDRix1QkFBdUIsRUFDdkIsYUFBYSxFQUNiLGFBQWEsRUFDYixTQUFTLEVBQ1QsbUJBQW1CLEdBQ3RCLEdBQUcsV0FBVyxDQUFDO0lBRWhCLE9BQU8sQ0FDSDtRQUNJLDJEQUFDLHVGQUE0QixvQkFDckIsSUFBSSxJQUNSLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLG1CQUFtQixFQUFFLGVBQWUsQ0FBQyxtQkFBbUIsRUFDeEQsYUFBYSxFQUFFLGFBQWEsRUFDNUIsd0JBQXdCLFFBQ3hCLHVCQUF1QixFQUFFLHVCQUF1QixFQUNoRCxpQkFBaUIsRUFBRSxpQkFBaUIsRUFDcEMsV0FBVyxFQUFFLFdBQVcsRUFDeEIsbUJBQW1CLEVBQUUsbUJBQW1CLEVBQ3hDLDRCQUE0QixFQUFFLDRCQUE0QixFQUMxRCw4QkFBOEIsRUFBRSw4QkFBOEIsRUFDOUQsNEJBQTRCLEVBQUUsNEJBQTRCLEVBQzFELG9CQUFvQixFQUFFLG9CQUFvQixFQUFFLEVBQzVDLHFCQUFxQixFQUFFLHFCQUFxQixFQUFFLEVBQzlDLFVBQVUsRUFBRSxDQUFDLFVBQVUsRUFDdkIsZUFBZSxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQ2hELE1BQU0sRUFBRSxNQUFNLEVBQ2QsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQ2xDLGFBQWEsRUFBRSxhQUFhLEVBQzVCLFNBQVMsRUFBRSxTQUFTLEVBQ3BCLG1CQUFtQixFQUFFLG1CQUFtQixFQUN4Qyw4QkFBOEIsRUFBRSw4QkFBOEIsRUFDOUQsNEJBQTRCLFFBQzVCLE9BQU8sRUFBRSxlQUFlLENBQUMsZUFBZSxFQUN4QyxrQkFBa0IsRUFBRSxrQkFBa0IsSUFDeEM7UUFDRiwyREFBQyxnRUFBSyxJQUNGLHVCQUF1QixFQUFDLG9CQUFvQixFQUM1QyxnQkFBZ0IsRUFBRSxRQUFRLENBQUMsU0FBUyxDQUFDLHFCQUFxQixDQUFDLEVBQzNELE1BQU0sRUFBRSx3Q0FBd0MsRUFDaEQsY0FBYyxFQUFFLCtCQUErQixFQUMvQyxxQkFBcUIsRUFBRSxJQUFJLEVBQzNCLEtBQUssRUFDRCxDQUFDLGNBQWMsSUFBSSxNQUFNLENBQUMsRUFBRSxLQUFLLFFBQVE7Z0JBQ3JDLENBQUMsQ0FBQztvQkFDSSxPQUFPLEVBQUU7d0JBQ0wsT0FBTyxFQUFFLE1BQU07cUJBQ2xCO2lCQUNKO2dCQUNILENBQUMsQ0FBQyxFQUFFO1lBR1osb0VBQUssRUFBRSxFQUFFLDJCQUEyQixFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBSSxDQUM5RDtRQUNQLENBQUMsd0NBQXdDLElBQUksb0VBQUssRUFBRSxFQUFFLDJCQUEyQixHQUFJLENBQ3ZGLENBQ04sQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLFdBQVcsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjMvQWR5ZW5WM0Zvcm0udHN4PzRkZTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBDYXJkSW5zdHJ1bWVudCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsnO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHR5cGUgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdHlwZSBPbWl0IH0gZnJvbSAndXRpbGl0eS10eXBlcyc7XG5cbmltcG9ydCB7XG4gICAgdHlwZSBIb3N0ZWRXaWRnZXRDb21wb25lbnRQcm9wcyxcbiAgICBIb3N0ZWRXaWRnZXRQYXltZW50Q29tcG9uZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaG9zdGVkLXdpZGdldC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRTZWxlY3RvcixcbiAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3Rvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2luc3RydW1lbnQtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICB0eXBlIFBheW1lbnRNZXRob2RQcm9wcyxcbiAgICB1c2VQYXltZW50Rm9ybUNvbnRleHQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC91aSc7XG5cbmV4cG9ydCBlbnVtIFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUge1xuICAgIENWViA9ICdjdnYnLFxuICAgIFBBTiA9ICdwYW4nLFxufVxuXG5leHBvcnQgdHlwZSBBZHllblYzRm9ybVByb3BzID0gT21pdDxcbiAgICBIb3N0ZWRXaWRnZXRDb21wb25lbnRQcm9wcyxcbiAgICB8ICdvblNpZ25PdXQnXG4gICAgfCAnaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZSdcbiAgICB8ICdpbnN0cnVtZW50cydcbiAgICB8ICdpc0xvYWRpbmdJbnN0cnVtZW50cydcbiAgICB8ICdpc1BheW1lbnREYXRhUmVxdWlyZWQnXG4gICAgfCAnaXNTaWduZWRJbidcbiAgICB8ICdpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkJ1xuICAgIHwgJ2lzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCdcbiAgICB8ICdsb2FkSW5zdHJ1bWVudHMnXG4gICAgfCAnc2lnbk91dCdcbiAgICB8ICdkZWluaXRpYWxpemVQYXltZW50J1xuPiAmIHtcbiAgICBjb250YWluZXJJZDogc3RyaW5nO1xuICAgIGlzQWNjb3VudEluc3RydW1lbnQ6IGJvb2xlYW47XG4gICAgc2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlOiBib29sZWFuO1xuICAgIHZhbGlkYXRlSW5zdHJ1bWVudDogKFxuICAgICAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ6IGJvb2xlYW4sXG4gICAgICAgIHNlbGVjdGVkSW5zdHJ1bWVudDogQ2FyZEluc3RydW1lbnQsXG4gICAgKSA9PiBSZWFjdE5vZGU7XG4gICAgc2hvdWxkUmVuZGVyQWRkaXRpb25hbEFjdGlvbkNvbnRlbnRNb2RhbDogYm9vbGVhbjtcbiAgICBpc01vZGFsVmlzaWJsZTogYm9vbGVhbjtcbiAgICBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93OiAoKSA9PiB2b2lkO1xuICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZDogc3RyaW5nO1xufTtcblxuY29uc3QgQWR5ZW5WM0Zvcm06IEZ1bmN0aW9uQ29tcG9uZW50PEFkeWVuVjNGb3JtUHJvcHMgJiBQYXltZW50TWV0aG9kUHJvcHM+ID0gKHtcbiAgICBtZXRob2QsXG4gICAgY29udGFpbmVySWQsXG4gICAgaW5pdGlhbGl6ZVBheW1lbnQsXG4gICAgaXNBY2NvdW50SW5zdHJ1bWVudCxcbiAgICBzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGUsXG4gICAgdmFsaWRhdGVJbnN0cnVtZW50LFxuICAgIGxhbmd1YWdlLFxuICAgIHNob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWwsXG4gICAgaXNNb2RhbFZpc2libGUsXG4gICAgY2FuY2VsQWRkaXRpb25hbEFjdGlvbk1vZGFsRmxvdyxcbiAgICBhZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWQsXG4gICAgY2hlY2tvdXRTdGF0ZSxcbiAgICBjaGVja291dFNlcnZpY2UsXG4gICAgb25VbmhhbmRsZWRFcnJvcixcbiAgICAuLi5yZXN0XG59KSA9PiB7XG4gICAgY29uc3QgeyBwYXltZW50Rm9ybSB9ID0gdXNlUGF5bWVudEZvcm1Db250ZXh0KCk7XG4gICAgY29uc3QgY3VzdG9tZXIgPSBjaGVja291dFN0YXRlLmRhdGEuZ2V0Q3VzdG9tZXIoKTtcbiAgICBjb25zdCB7IGlzTG9hZGluZ0luc3RydW1lbnRzIH0gPSBjaGVja291dFN0YXRlLnN0YXR1c2VzO1xuICAgIGNvbnN0IHsgaXNQYXltZW50RGF0YVJlcXVpcmVkIH0gPSBjaGVja291dFN0YXRlLmRhdGE7XG4gICAgY29uc3QgaW5zdHJ1bWVudHMgPSBjaGVja291dFN0YXRlLmRhdGEuZ2V0SW5zdHJ1bWVudHMobWV0aG9kKSB8fCBbXTtcbiAgICBjb25zdCBpc1NpZ25lZEluID0gY3VzdG9tZXI/LmlzR3Vlc3Q7XG4gICAgY29uc3QgaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZSA9ICFpc1NpZ25lZEluICYmIEJvb2xlYW4obWV0aG9kLmNvbmZpZy5pc1ZhdWx0aW5nRW5hYmxlZCk7XG4gICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCA9IGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRTZWxlY3RvcihjaGVja291dFN0YXRlKTtcbiAgICBjb25zdCBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWQgPSBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3RvcihjaGVja291dFN0YXRlKTtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgaGlkZVBheW1lbnRTdWJtaXRCdXR0b24sXG4gICAgICAgIGRpc2FibGVTdWJtaXQsXG4gICAgICAgIHNldEZpZWxkVmFsdWUsXG4gICAgICAgIHNldFN1Ym1pdCxcbiAgICAgICAgc2V0VmFsaWRhdGlvblNjaGVtYSxcbiAgICB9ID0gcGF5bWVudEZvcm07XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgICAgPEhvc3RlZFdpZGdldFBheW1lbnRDb21wb25lbnRcbiAgICAgICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgICAgICAgICBjb250YWluZXJJZD17Y29udGFpbmVySWR9XG4gICAgICAgICAgICAgICAgZGVpbml0aWFsaXplUGF5bWVudD17Y2hlY2tvdXRTZXJ2aWNlLmRlaW5pdGlhbGl6ZVBheW1lbnR9XG4gICAgICAgICAgICAgICAgZGlzYWJsZVN1Ym1pdD17ZGlzYWJsZVN1Ym1pdH1cbiAgICAgICAgICAgICAgICBoaWRlQ29udGVudFdoZW5TaWduZWRPdXRcbiAgICAgICAgICAgICAgICBoaWRlUGF5bWVudFN1Ym1pdEJ1dHRvbj17aGlkZVBheW1lbnRTdWJtaXRCdXR0b259XG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZVBheW1lbnQ9e2luaXRpYWxpemVQYXltZW50fVxuICAgICAgICAgICAgICAgIGluc3RydW1lbnRzPXtpbnN0cnVtZW50c31cbiAgICAgICAgICAgICAgICBpc0FjY291bnRJbnN0cnVtZW50PXtpc0FjY291bnRJbnN0cnVtZW50fVxuICAgICAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWQ9e2lzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkPXtpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZT17aXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZX1cbiAgICAgICAgICAgICAgICBpc0xvYWRpbmdJbnN0cnVtZW50cz17aXNMb2FkaW5nSW5zdHJ1bWVudHMoKX1cbiAgICAgICAgICAgICAgICBpc1BheW1lbnREYXRhUmVxdWlyZWQ9e2lzUGF5bWVudERhdGFSZXF1aXJlZCgpfVxuICAgICAgICAgICAgICAgIGlzU2lnbmVkSW49eyFpc1NpZ25lZElufVxuICAgICAgICAgICAgICAgIGxvYWRJbnN0cnVtZW50cz17Y2hlY2tvdXRTZXJ2aWNlLmxvYWRJbnN0cnVtZW50c31cbiAgICAgICAgICAgICAgICBtZXRob2Q9e21ldGhvZH1cbiAgICAgICAgICAgICAgICBvblVuaGFuZGxlZEVycm9yPXtvblVuaGFuZGxlZEVycm9yfVxuICAgICAgICAgICAgICAgIHNldEZpZWxkVmFsdWU9e3NldEZpZWxkVmFsdWV9XG4gICAgICAgICAgICAgICAgc2V0U3VibWl0PXtzZXRTdWJtaXR9XG4gICAgICAgICAgICAgICAgc2V0VmFsaWRhdGlvblNjaGVtYT17c2V0VmFsaWRhdGlvblNjaGVtYX1cbiAgICAgICAgICAgICAgICBzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGU9e3Nob3VsZEhpZGVJbnN0cnVtZW50RXhwaXJ5RGF0ZX1cbiAgICAgICAgICAgICAgICBzaG91bGRSZW5kZXJDdXN0b21JbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgc2lnbk91dD17Y2hlY2tvdXRTZXJ2aWNlLnNpZ25PdXRDdXN0b21lcn1cbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUluc3RydW1lbnQ9e3ZhbGlkYXRlSW5zdHJ1bWVudH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8TW9kYWxcbiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsQm9keUNsYXNzTmFtZT1cIm1vZGFsLWJvZHktLWNlbnRlclwiXG4gICAgICAgICAgICAgICAgY2xvc2VCdXR0b25MYWJlbD17bGFuZ3VhZ2UudHJhbnNsYXRlKCdjb21tb24uY2xvc2VfYWN0aW9uJyl9XG4gICAgICAgICAgICAgICAgaXNPcGVuPXtzaG91bGRSZW5kZXJBZGRpdGlvbmFsQWN0aW9uQ29udGVudE1vZGFsfVxuICAgICAgICAgICAgICAgIG9uUmVxdWVzdENsb3NlPXtjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93fVxuICAgICAgICAgICAgICAgIHNob3VsZFNob3dDbG9zZUJ1dHRvbj17dHJ1ZX1cbiAgICAgICAgICAgICAgICBzdHlsZT17XG4gICAgICAgICAgICAgICAgICAgICFpc01vZGFsVmlzaWJsZSAmJiBtZXRob2QuaWQgPT09ICdzY2hlbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9e2FkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZH0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fSAvPlxuICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgICAgIHshc2hvdWxkUmVuZGVyQWRkaXRpb25hbEFjdGlvbkNvbnRlbnRNb2RhbCAmJiA8ZGl2IGlkPXthZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWR9IC8+fVxuICAgICAgICA8Lz5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQWR5ZW5WM0Zvcm07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv3/AdyenV3Form.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv3/AdyenV3PaymentMethod.tsx":
/*!*************************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv3/AdyenV3PaymentMethod.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdyenV3PaymentMethodType: () => (/* binding */ AdyenV3PaymentMethodType),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_adyen__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/adyen */ \"../checkout-sdk-js/dist/esm/integrations/adyen.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/locale */ \"./packages/locale/src/LocaleProvider.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/contexts/checkout-context/CheckoutContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/contexts/payment-form-context/PaymentFormContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/form/contexts/FormContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/loading/LoadingOverlay.tsx\");\n/* harmony import */ var _AdyenV3CardValidation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./AdyenV3CardValidation */ \"./packages/adyen-integration/src/adyenv3/AdyenV3CardValidation.tsx\");\n/* harmony import */ var _AdyenV3Form__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./AdyenV3Form */ \"./packages/adyen-integration/src/adyenv3/AdyenV3Form.tsx\");\n\n\n\n\n\n\n\n\nvar AdyenV3PaymentMethodType;\n(function (AdyenV3PaymentMethodType) {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV3PaymentMethodType[\"scheme\"] = \"scheme\";\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV3PaymentMethodType[\"bcmc\"] = \"bcmc\";\n})(AdyenV3PaymentMethodType || (AdyenV3PaymentMethodType = {}));\nconst AdyenV3PaymentMethod = (_a) => {\n    var { checkoutService, checkoutState, paymentForm, method, language, onUnhandledError } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"checkoutService\", \"checkoutState\", \"paymentForm\", \"method\", \"language\", \"onUnhandledError\"]);\n    const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)({\n        shouldShowModal: true,\n    });\n    const [shouldRenderAdditionalActionContentModal, setShouldRenderAdditionalActionContentModal] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [isAdditionalActionContentModalVisible, setIsAdditionalActionContentModalVisible] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [cardValidationState, setCardValidationState] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n    const containerId = `adyen-${method.id}-component-field`;\n    const additionalActionContainerId = `adyen-${method.id}-additional-action-component-field`;\n    const cardVerificationContainerId = `adyen-${method.id}-tsv-component-field`;\n    const component = method.id;\n    const shouldHideInstrumentExpiryDate = component === AdyenV3PaymentMethodType.bcmc;\n    const onBeforeLoad = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((shopperInteraction) => {\n        ref.current.shouldShowModal = shopperInteraction;\n        setShouldRenderAdditionalActionContentModal(ref.current.shouldShowModal);\n    }, []);\n    const onComplete = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setIsAdditionalActionContentModalVisible(false);\n        setShouldRenderAdditionalActionContentModal(false);\n        ref.current.cancelAdditionalAction = undefined;\n    }, []);\n    const onActionHandled = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setIsAdditionalActionContentModalVisible(true);\n    }, []);\n    const onLoad = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((cancel) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        ref.current.cancelAdditionalAction = cancel;\n    }, []);\n    const cancelAdditionalActionModalFlow = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setIsAdditionalActionContentModalVisible(false);\n        setShouldRenderAdditionalActionContentModal(false);\n        if (ref.current.cancelAdditionalAction) {\n            ref.current.cancelAdditionalAction();\n            ref.current.cancelAdditionalAction = undefined;\n        }\n    }, []);\n    const initializeAdyenPayment = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((options, selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        const adyenOptions = {\n            [AdyenV3PaymentMethodType.scheme]: {\n                hasHolderName: true,\n                holderNameRequired: true,\n            },\n        };\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        const selectedInstrumentId = selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken;\n        return checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_adyen__WEBPACK_IMPORTED_MODULE_1__.createAdyenV3PaymentStrategy], adyenv3: {\n                cardVerificationContainerId: selectedInstrumentId && cardVerificationContainerId,\n                containerId,\n                hasVaultedInstruments: !!selectedInstrumentId,\n                options: adyenOptions[component],\n                additionalActionOptions: {\n                    widgetSize: '05',\n                    containerId: additionalActionContainerId,\n                    onBeforeLoad,\n                    onComplete,\n                    onLoad,\n                    onActionHandled,\n                },\n                shouldShowNumberField: ref.current.shouldShowNumberField,\n                validateCardFields: (state) => {\n                    setCardValidationState(state);\n                },\n            } }));\n    }), [\n        component,\n        cardVerificationContainerId,\n        containerId,\n        additionalActionContainerId,\n        onBeforeLoad,\n        onComplete,\n        onLoad,\n        onActionHandled,\n        checkoutService,\n    ]);\n    const validateInstrument = (shouldShowNumberField, selectedInstrument) => {\n        ref.current.shouldShowNumberField = shouldShowNumberField;\n        return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_AdyenV3CardValidation__WEBPACK_IMPORTED_MODULE_9__[\"default\"], { cardValidationState: cardValidationState, paymentMethod: method, selectedInstrument: selectedInstrument, shouldShowNumberField: shouldShowNumberField, verificationFieldsContainerId: cardVerificationContainerId }));\n    };\n    const isAccountInstrument = () => {\n        switch (method.method) {\n            case 'directEbanking':\n            case 'giropay':\n            case 'ideal':\n            case 'sepadirectdebit':\n                return true;\n            default:\n                return false;\n        }\n    };\n    const isLoading = checkoutState.statuses.isLoadingInstruments() ||\n        checkoutState.statuses.isLoadingPaymentMethod(method.id);\n    const formContextProps = {\n        isSubmitted: paymentForm.isSubmitted(),\n        setSubmitted: paymentForm.setSubmitted,\n    };\n    return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].Provider, { value: formContextProps },\n        react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Provider, { value: { checkoutState, checkoutService } },\n            react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_3__[\"default\"], { checkoutService: checkoutService },\n                react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__.PaymentFormContext.Provider, { value: { paymentForm } },\n                    react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__[\"default\"], { hideContentWhenLoading: true, isLoading: isLoading },\n                        react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_AdyenV3Form__WEBPACK_IMPORTED_MODULE_10__[\"default\"], Object.assign({}, rest, { additionalActionContainerId: additionalActionContainerId, cancelAdditionalActionModalFlow: cancelAdditionalActionModalFlow, checkoutService: checkoutService, checkoutState: checkoutState, containerId: containerId, hideContentWhenSignedOut: true, initializePayment: initializeAdyenPayment, isAccountInstrument: isAccountInstrument(), isModalVisible: isAdditionalActionContentModalVisible, language: language, method: method, onUnhandledError: onUnhandledError, paymentForm: paymentForm, shouldHideInstrumentExpiryDate: shouldHideInstrumentExpiryDate, shouldRenderAdditionalActionContentModal: shouldRenderAdditionalActionContentModal, validateInstrument: validateInstrument }))))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(AdyenV3PaymentMethod, [{ gateway: 'adyenv3' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52My9BZHllblYzUGF5bWVudE1ldGhvZC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTTRGO0FBQ1A7QUFHdkI7QUFPUDtBQUNnQjtBQUVYO0FBQ3BCO0FBTXhDLElBQVksd0JBS1g7QUFMRCxXQUFZLHdCQUF3QjtJQUNoQyxnRUFBZ0U7SUFDaEUsNkNBQWlCO0lBQ2pCLGdFQUFnRTtJQUNoRSx5Q0FBYTtBQUNqQixDQUFDLEVBTFcsd0JBQXdCLEtBQXhCLHdCQUF3QixRQUtuQztBQVFELE1BQU0sb0JBQW9CLEdBQTBDLENBQUMsRUFRcEUsRUFBRSxFQUFFO1FBUmdFLEVBQ2pFLGVBQWUsRUFDZixhQUFhLEVBQ2IsV0FBVyxFQUNYLE1BQU0sRUFDTixRQUFRLEVBQ1IsZ0JBQWdCLE9BRW5CLEVBRE0sSUFBSSxxREFQMEQsNkZBUXBFLENBRFU7SUFFUCxNQUFNLEdBQUcsR0FBRyw2Q0FBTSxDQUF3QjtRQUN0QyxlQUFlLEVBQUUsSUFBSTtLQUN4QixDQUFDLENBQUM7SUFFSCxNQUFNLENBQUMsd0NBQXdDLEVBQUUsMkNBQTJDLENBQUMsR0FDekYsK0NBQVEsQ0FBVSxLQUFLLENBQUMsQ0FBQztJQUM3QixNQUFNLENBQUMscUNBQXFDLEVBQUUsd0NBQXdDLENBQUMsR0FDbkYsK0NBQVEsQ0FBVSxLQUFLLENBQUMsQ0FBQztJQUM3QixNQUFNLENBQUMsbUJBQW1CLEVBQUUsc0JBQXNCLENBQUMsR0FBRywrQ0FBUSxFQUF3QixDQUFDO0lBQ3ZGLE1BQU0sV0FBVyxHQUFHLFNBQVMsTUFBTSxDQUFDLEVBQUUsa0JBQWtCLENBQUM7SUFDekQsTUFBTSwyQkFBMkIsR0FBRyxTQUFTLE1BQU0sQ0FBQyxFQUFFLG9DQUFvQyxDQUFDO0lBQzNGLE1BQU0sMkJBQTJCLEdBQUcsU0FBUyxNQUFNLENBQUMsRUFBRSxzQkFBc0IsQ0FBQztJQUM3RSxNQUFNLFNBQVMsR0FBRyxNQUFNLENBQUMs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QUFlLEVBQUU7WUFDL0QsMkRBQUMsb0VBQWMsSUFBQyxlQUFlLEVBQUUsZUFBZTtnQkFDNUMsMkRBQUMsNkZBQWtCLENBQUMsUUFBUSxJQUFDLEtBQUssRUFBRSxFQUFFLFdBQVcsRUFBRTtvQkFDL0MsMkRBQUMsZ0VBQWMsSUFBQyxzQkFBc0IsUUFBQyxTQUFTLEVBQUUsU0FBUzt3QkFDdkQsMkRBQUMscURBQVcsb0JBQ0osSUFBSSxJQUNSLDJCQUEyQixFQUFFLDJCQUEyQixFQUN4RCwrQkFBK0IsRUFBRSwrQkFBK0IsRUFDaEUsZUFBZSxFQUFFLGVBQWUsRUFDaEMsYUFBYSxFQUFFLGFBQWEsRUFDNUIsV0FBVyxFQUFFLFdBQVcsRUFDeEIsd0JBQXdCLFFBQ3hCLGlCQUFpQixFQUFFLHNCQUFzQixFQUN6QyxtQkFBbUIsRUFBRSxtQkFBbUIsRUFBRSxFQUMxQyxjQUFjLEVBQUUscUNBQXFDLEVBQ3JELFFBQVEsRUFBRSxRQUFRLEVBQ2xCLE1BQU0sRUFBRSxNQUFNLEVBQ2QsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQ2xDLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLDhCQUE4QixFQUFFLDhCQUE4QixFQUM5RCx3Q0FBd0MsRUFDcEMsd0NBQXdDLEVBRTVDLGtCQUFrQixFQUFFLGtCQUFrQixJQUN4QyxDQUNXLENBQ1MsQ0FDakIsQ0FDTSxDQUNSLENBQzFCLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSx5RkFBcUIsQ0FDaEMsb0JBQW9CLEVBQ3BCLENBQUMsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FDM0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjMvQWR5ZW5WM1BheW1lbnRNZXRob2QudHN4PzQ1ZTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICB0eXBlIEFkeWVuQ3JlZGl0Q2FyZENvbXBvbmVudE9wdGlvbnMsXG4gICAgdHlwZSBBZHllblZhbGlkYXRpb25TdGF0ZSxcbiAgICB0eXBlIENhcmRJbnN0cnVtZW50LFxuICAgIHR5cGUgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrJztcbmltcG9ydCB7IGNyZWF0ZUFkeWVuVjNQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2ludGVncmF0aW9ucy9hZHllbic7XG5pbXBvcnQgUmVhY3QsIHsgdHlwZSBGdW5jdGlvbkNvbXBvbmVudCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IHR5cGUgSG9zdGVkV2lkZ2V0Q29tcG9uZW50UHJvcHMgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaG9zdGVkLXdpZGdldC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQgeyBMb2NhbGVQcm92aWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9sb2NhbGUnO1xuaW1wb3J0IHtcbiAgICBDaGVja291dENvbnRleHQsXG4gICAgUGF5bWVudEZvcm1Db250ZXh0LFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZFByb3BzLFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZFJlc29sdmVJZCxcbiAgICB0b1Jlc29sdmFibGVDb21wb25lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBGb3JtQ29udGV4dCwgTG9hZGluZ092ZXJsYXkgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvdWknO1xuXG5pbXBvcnQgQWR5ZW5WM0NhcmRWYWxpZGF0aW9uIGZyb20gJy4vQWR5ZW5WM0NhcmRWYWxpZGF0aW9uJztcbmltcG9ydCBBZHllblYzRm9ybSBmcm9tICcuL0FkeWVuVjNGb3JtJztcblxuZXhwb3J0IGludGVyZmFjZSBBZHllbk9wdGlvbnMge1xuICAgIFtrZXk6IHN0cmluZ106IEFkeWVuQ3JlZGl0Q2FyZENvbXBvbmVudE9wdGlvbnM7XG59XG5cbmV4cG9ydCBlbnVtIEFkeWVuVjNQYXltZW50TWV0aG9kVHlwZSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICAgIHNjaGVtZSA9ICdzY2hlbWUnLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgICBiY21jID0gJ2JjbWMnLFxufVxuXG5pbnRlcmZhY2UgQWR5ZW5QYXltZW50TWV0aG9kUmVmIHtcbiAgICBzaG91bGRTaG93TW9kYWw6IGJvb2xlYW47XG4gICAgc2hvdWxkU2hvd051bWJlckZpZWxkPzogYm9vbGVhbjtcbiAgICBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uPygpOiB2b2lkO1xufVxuXG5jb25zdCBBZHllblYzUGF5bWVudE1ldGhvZDogRnVuY3Rpb25Db21wb25lbnQ8UGF5bWVudE1ldGhvZFByb3BzPiA9ICh7XG4gICAgY2hlY2tvdXRTZXJ2aWNlLFxuICAgIGNoZWNrb3V0U3RhdGUsXG4gICAgcGF5bWVudEZvcm0sXG4gICAgbWV0aG9kLFxuICAgIGxhbmd1YWdlLFxuICAgIG9uVW5oYW5kbGVkRXJyb3IsXG4gICAgLi4ucmVzdFxufSkgPT4ge1xuICAgIGNvbnN0IHJlZiA9IHVzZVJlZjxBZHllblBheW1lbnRNZXRob2RSZWY+KHtcbiAgICAgICAgc2hvdWxkU2hvd01vZGFsOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgY29uc3QgW3Nob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWwsIHNldFNob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxdID1cbiAgICAgICAgdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICAgIGNvbnN0IFtpc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlLCBzZXRJc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlXSA9XG4gICAgICAgIHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgICBjb25zdCBbY2FyZFZhbGlkYXRpb25TdGF0ZSwgc2V0Q2FyZFZhbGlkYXRpb25TdGF0ZV0gPSB1c2VTdGF0ZTxBZHllblZhbGlkYXRpb25TdGF0ZT4oKTtcbiAgICBjb25zdCBjb250YWluZXJJZCA9IGBhZHllbi0ke21ldGhvZC5pZH0tY29tcG9uZW50LWZpZWxkYDtcbiAgICBjb25zdCBhZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWQgPSBgYWR5ZW4tJHttZXRob2QuaWR9LWFkZGl0aW9uYWwtYWN0aW9uLWNvbXBvbmVudC1maWVsZGA7XG4gICAgY29uc3QgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkID0gYGFkeWVuLSR7bWV0aG9kLmlkfS10c3YtY29tcG9uZW50LWZpZWxkYDtcbiAgICBjb25zdCBjb21wb25lbnQgPSBtZXRob2QuaWQ7XG4gICAgY29uc3Qgc2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlID0gY29tcG9uZW50ID09PSBBZHllblYzUGF5bWVudE1ldGhvZFR5cGUuYmNtYztcblxuICAgIGNvbnN0IG9uQmVmb3JlTG9hZCA9IHVzZUNhbGxiYWNrKChzaG9wcGVySW50ZXJhY3Rpb246IGJvb2xlYW4pID0+IHtcbiAgICAgICAgcmVmLmN1cnJlbnQuc2hvdWxkU2hvd01vZGFsID0gc2hvcHBlckludGVyYWN0aW9uO1xuXG4gICAgICAgIHNldFNob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWwocmVmLmN1cnJlbnQuc2hvdWxkU2hvd01vZGFsKTtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBvbkNvbXBsZXRlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBzZXRJc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgc2V0U2hvdWxkUmVuZGVyQWRkaXRpb25hbEFjdGlvbkNvbnRlbnRNb2RhbChmYWxzZSk7XG4gICAgICAgIHJlZi5jdXJyZW50LmNhbmNlbEFkZGl0aW9uYWxBY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3Qgb25BY3Rpb25IYW5kbGVkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBzZXRJc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlKHRydWUpO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IG9uTG9hZCA9IHVzZUNhbGxiYWNrKChjYW5jZWw/OiBhbnkpID0+IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgICByZWYuY3VycmVudC5jYW5jZWxBZGRpdGlvbmFsQWN0aW9uID0gY2FuY2VsO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGNhbmNlbEFkZGl0aW9uYWxBY3Rpb25Nb2RhbEZsb3cgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIHNldElzQWRkaXRpb25hbEFjdGlvbkNvbnRlbnRNb2RhbFZpc2libGUoZmFsc2UpO1xuICAgICAgICBzZXRTaG91bGRSZW5kZXJBZGRpdGlvbmFsQWN0aW9uQ29udGVudE1vZGFsKGZhbHNlKTtcblxuICAgICAgICBpZiAocmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbikge1xuICAgICAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbigpO1xuICAgICAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGluaXRpYWxpemVBZHllblBheW1lbnQ6IEhvc3RlZFdpZGdldENvbXBvbmVudFByb3BzWydpbml0aWFsaXplUGF5bWVudCddID0gdXNlQ2FsbGJhY2soXG4gICAgICAgIGFzeW5jIChvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHNlbGVjdGVkSW5zdHJ1bWVudDogQ2FyZEluc3RydW1lbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFkeWVuT3B0aW9uczogQWR5ZW5PcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIFtBZHllblYzUGF5bWVudE1ldGhvZFR5cGUuc2NoZW1lXToge1xuICAgICAgICAgICAgICAgICAgICBoYXNIb2xkZXJOYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBob2xkZXJOYW1lUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvblxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbnN0cnVtZW50SWQgPSBzZWxlY3RlZEluc3RydW1lbnQ/LmJpZ3BheVRva2VuO1xuXG4gICAgICAgICAgICByZXR1cm4gY2hlY2tvdXRTZXJ2aWNlLmluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGludGVncmF0aW9uczogW2NyZWF0ZUFkeWVuVjNQYXltZW50U3RyYXRlZ3ldLFxuICAgICAgICAgICAgICAgIGFkeWVudjM6IHtcbiAgICAgICAgICAgICAgICAgICAgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbnN0cnVtZW50SWQgJiYgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgaGFzVmF1bHRlZEluc3RydW1lbnRzOiAhIXNlbGVjdGVkSW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBhZHllbk9wdGlvbnNbY29tcG9uZW50XSxcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbk9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldFNpemU6ICcwNScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogYWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25CZWZvcmVMb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTG9hZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uSGFuZGxlZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2hvd051bWJlckZpZWxkOiByZWYuY3VycmVudC5zaG91bGRTaG93TnVtYmVyRmllbGQsXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQ2FyZEZpZWxkczogKHN0YXRlOiBBZHllblZhbGlkYXRpb25TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q2FyZFZhbGlkYXRpb25TdGF0ZShzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBbXG4gICAgICAgICAgICBjb21wb25lbnQsXG4gICAgICAgICAgICBjYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWQsXG4gICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZCxcbiAgICAgICAgICAgIG9uQmVmb3JlTG9hZCxcbiAgICAgICAgICAgIG9uQ29tcGxldGUsXG4gICAgICAgICAgICBvbkxvYWQsXG4gICAgICAgICAgICBvbkFjdGlvbkhhbmRsZWQsXG4gICAgICAgICAgICBjaGVja291dFNlcnZpY2UsXG4gICAgICAgIF0sXG4gICAgKTtcblxuICAgIGNvbnN0IHZhbGlkYXRlSW5zdHJ1bWVudCA9IChcbiAgICAgICAgc2hvdWxkU2hvd051bWJlckZpZWxkOiBib29sZWFuLFxuICAgICAgICBzZWxlY3RlZEluc3RydW1lbnQ6IENhcmRJbnN0cnVtZW50LFxuICAgICkgPT4ge1xuICAgICAgICByZWYuY3VycmVudC5zaG91bGRTaG93TnVtYmVyRmllbGQgPSBzaG91bGRTaG93TnVtYmVyRmllbGQ7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxBZHllblYzQ2FyZFZhbGlkYXRpb25cbiAgICAgICAgICAgICAgICBjYXJkVmFsaWRhdGlvblN0YXRlPXtjYXJkVmFsaWRhdGlvblN0YXRlfVxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q9e21ldGhvZH1cbiAgICAgICAgICAgICAgICBzZWxlY3RlZEluc3RydW1lbnQ9e3NlbGVjdGVkSW5zdHJ1bWVudH1cbiAgICAgICAgICAgICAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ9e3Nob3VsZFNob3dOdW1iZXJGaWVsZH1cbiAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25GaWVsZHNDb250YWluZXJJZD17Y2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaXNBY2NvdW50SW5zdHJ1bWVudCA9ICgpID0+IHtcbiAgICAgICAgc3dpdGNoIChtZXRob2QubWV0aG9kKSB7XG4gICAgICAgICAgICBjYXNlICdkaXJlY3RFYmFua2luZyc6XG4gICAgICAgICAgICBjYXNlICdnaXJvcGF5JzpcbiAgICAgICAgICAgIGNhc2UgJ2lkZWFsJzpcbiAgICAgICAgICAgIGNhc2UgJ3NlcGFkaXJlY3RkZWJpdCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGlzTG9hZGluZyA9XG4gICAgICAgIGNoZWNrb3V0U3RhdGUuc3RhdHVzZXMuaXNMb2FkaW5nSW5zdHJ1bWVudHMoKSB8fFxuICAgICAgICBjaGVja291dFN0YXRlLnN0YXR1c2VzLmlzTG9hZGluZ1BheW1lbnRNZXRob2QobWV0aG9kLmlkKTtcblxuICAgIGNvbnN0IGZvcm1Db250ZXh0UHJvcHMgPSB7XG4gICAgICAgIGlzU3VibWl0dGVkOiBwYXltZW50Rm9ybS5pc1N1Ym1pdHRlZCgpLFxuICAgICAgICBzZXRTdWJtaXR0ZWQ6IHBheW1lbnRGb3JtLnNldFN1Ym1pdHRlZCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPEZvcm1Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXtmb3JtQ29udGV4dFByb3BzfT5cbiAgICAgICAgICAgIDxDaGVja291dENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgY2hlY2tvdXRTdGF0ZSwgY2hlY2tvdXRTZXJ2aWNlIH19PlxuICAgICAgICAgICAgICAgIDxMb2NhbGVQcm92aWRlciBjaGVja291dFNlcnZpY2U9e2NoZWNrb3V0U2VydmljZX0+XG4gICAgICAgICAgICAgICAgICAgIDxQYXltZW50Rm9ybUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgcGF5bWVudEZvcm0gfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TG9hZGluZ092ZXJsYXkgaGlkZUNvbnRlbnRXaGVuTG9hZGluZyBpc0xvYWRpbmc9e2lzTG9hZGluZ30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFkeWVuVjNGb3JtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsuLi5yZXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWQ9e2FkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQWRkaXRpb25hbEFjdGlvbk1vZGFsRmxvdz17Y2FuY2VsQWRkaXRpb25hbEFjdGlvbk1vZGFsRmxvd31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tvdXRTZXJ2aWNlPXtjaGVja291dFNlcnZpY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrb3V0U3RhdGU9e2NoZWNrb3V0U3RhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkPXtjb250YWluZXJJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUNvbnRlbnRXaGVuU2lnbmVkT3V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemVQYXltZW50PXtpbml0aWFsaXplQWR5ZW5QYXltZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FjY291bnRJbnN0cnVtZW50PXtpc0FjY291bnRJbnN0cnVtZW50KCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTW9kYWxWaXNpYmxlPXtpc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZT17bGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZD17bWV0aG9kfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVuaGFuZGxlZEVycm9yPXtvblVuaGFuZGxlZEVycm9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50Rm9ybT17cGF5bWVudEZvcm19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZEhpZGVJbnN0cnVtZW50RXhwaXJ5RGF0ZT17c2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRSZW5kZXJBZGRpdGlvbmFsQWN0aW9uQ29udGVudE1vZGFsPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUluc3RydW1lbnQ9e3ZhbGlkYXRlSW5zdHJ1bWVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Mb2FkaW5nT3ZlcmxheT5cbiAgICAgICAgICAgICAgICAgICAgPC9QYXltZW50Rm9ybUNvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgPC9Mb2NhbGVQcm92aWRlcj5cbiAgICAgICAgICAgIDwvQ2hlY2tvdXRDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgICA8L0Zvcm1Db250ZXh0LlByb3ZpZGVyPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVDb21wb25lbnQ8UGF5bWVudE1ldGhvZFByb3BzLCBQYXltZW50TWV0aG9kUmVzb2x2ZUlkPihcbiAgICBBZHllblYzUGF5bWVudE1ldGhvZCxcbiAgICBbeyBnYXRld2F5OiAnYWR5ZW52MycgfV0sXG4pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv3/AdyenV3PaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/index.ts":
/*!*************************************************!*\
  !*** ./packages/adyen-integration/src/index.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdyenV2PaymentMethod: () => (/* reexport safe */ _adyenv2_AdyenV2PaymentMethod__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   AdyenV3PaymentMethod: () => (/* reexport safe */ _adyenv3_AdyenV3PaymentMethod__WEBPACK_IMPORTED_MODULE_1__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _adyenv2_AdyenV2PaymentMethod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adyenv2/AdyenV2PaymentMethod */ \"./packages/adyen-integration/src/adyenv2/AdyenV2PaymentMethod.tsx\");\n/* harmony import */ var _adyenv3_AdyenV3PaymentMethod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./adyenv3/AdyenV3PaymentMethod */ \"./packages/adyen-integration/src/adyenv3/AdyenV3PaymentMethod.tsx\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpRjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvaW5kZXgudHM/ZTYxNyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBkZWZhdWx0IGFzIEFkeWVuVjJQYXltZW50TWV0aG9kIH0gZnJvbSAnLi9hZHllbnYyL0FkeWVuVjJQYXltZW50TWV0aG9kJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQWR5ZW5WM1BheW1lbnRNZXRob2QgfSBmcm9tICcuL2FkeWVudjMvQWR5ZW5WM1BheW1lbnRNZXRob2QnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/index.ts\n\n}");

/***/ })

}]);
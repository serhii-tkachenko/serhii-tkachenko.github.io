"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["hosted-credit-card-payment-method"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/cybersource.js":
/*!***************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/cybersource.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCyberSourcePaymentStrategy: () => (/* binding */ j),\n/* harmony export */   createCyberSourceV2PaymentStrategy: () => (/* binding */ V)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nvar s={};function c(e){return Boolean(e.instrumentId)}s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const d=e=>\"object\"==typeof e&&null!==e&&\"body\"in e;var u,l,h=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};class m{constructor(e,t){this._paymentIntegrationService=e,this._cardinalClient=t}prepare(e){return h(this,void 0,void 0,function*(){yield this._cardinalClient.load(e.id,e.config.testMode),yield this._cardinalClient.configure(yield this._getClientToken(e))})}start(e,t,n,r){return h(this,void 0,void 0,function*(){const{getCardInstrument:a,getPaymentMethodOrThrow:s}=this._paymentIntegrationService.getState(),{payment:{methodId:u=\"\",paymentData:l={}}={}}=t,h=c(l)&&a(l.instrumentId),m=h?h.iin:r&&r.getBin();m&&(yield this._cardinalClient.runBinProcess(m));try{return yield e((0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)(t,{payment:{paymentData:{threeDSecure:{token:s(u).clientToken}}}}),n)}catch(e){if(!d(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"}))throw e;const n=yield this._cardinalClient.getThreeDSecureData(e.body.three_ds_result,this._getOrderData());if(!r)return void(yield this._paymentIntegrationService.submitPayment((0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)(t.payment,{paymentData:{threeDSecure:n}})));yield r.submit((0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)(t.payment,{paymentData:{threeDSecure:n}}))}})}_getClientToken(e){return h(this,void 0,void 0,function*(){return e.clientToken?e.clientToken:(yield this._paymentIntegrationService.loadPaymentMethod(e.id),this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.id).clientToken||\"\")})}_getOrderData(){const e=this._paymentIntegrationService.getState(),t=e.getBillingAddressOrThrow(),n=e.getShippingAddress(),i=e.getCheckoutOrThrow(),r=e.getOrderOrThrow();return{billingAddress:t,shippingAddress:n,currencyCode:i.cart.currency.code,id:r.orderId.toString(),amount:i.cart.cartAmount}}}class p extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(u||(u={}));class y extends p{constructor(e){super(function(e){switch(e){case u.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case u.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case u.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case u.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case u.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case u.MissingCheckoutConfig:case u.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case u.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case u.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case u.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case u.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case u.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case u.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class g extends p{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(l||(l={}));class b extends p{constructor(e){super(function(e){switch(e){case l.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case l.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case l.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case l.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}const f=[100004,1010,1011,1020];var _,v,C,w,S,P,I;!function(e){e.SetupCompleted=\"payments.setupComplete\",e.Validated=\"payments.validated\"}(_||(_={})),function(e){e.Init=\"init\",e.Complete=\"complete\",e.Confirm=\"confirm\"}(v||(v={})),function(e){e.Success=\"SUCCESS\",e.NoAction=\"NOACTION\",e.Failure=\"FAILURE\",e.Error=\"ERROR\"}(C||(C={})),function(e){e.CCA=\"CCA\",e.Paypal=\"Paypal\",e.Wallet=\"Wallet\",e.VisaCheckout=\"VisaCheckout\",e.ApplePay=\"ApplePay\",e.DiscoverWallet=\"DiscoverWallet\"}(w||(w={})),function(e){e.BinProcess=\"bin.process\"}(S||(S={})),function(e){e.CCA=\"cca\"}(P||(P={})),function(e){e.Yes=\"Y\",e.No=\"N\"}(I||(I={}));class M{constructor(e){this._scriptLoader=e,this._provider=\"\",this._testMode=!1,this._configurationToken=\"\"}load(e,t=!1){return this._provider=e,this._testMode=t,this._sdk||(this._sdk=this._scriptLoader.load(e,t)),this._sdk.then(lodash__WEBPACK_IMPORTED_MODULE_1__.noop)}configure(e){if(this._configurationToken){if(this._configurationToken===e)return Promise.resolve();this._sdk=this._scriptLoader.load(`${this._provider}.${Date.now()}`,this._testMode)}return this._getClientSDK().then(n=>new Promise((i,r)=>{n.on(_.SetupCompleted,()=>{n.off(_.SetupCompleted),n.off(_.Validated),this._configurationToken=e,i()}),n.on(_.Validated,e=>{n.off(_.SetupCompleted),n.off(_.Validated),e.ActionCode===C.Error&&((0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)(f,e.ErrorNumber)&&r(new y(u.MissingPaymentMethod)),r(new g(e.ErrorDescription)))}),n.setup(v.Init,{jwt:e})}))}runBinProcess(e){return this._getClientSDK().then(t=>t.trigger(S.BinProcess,e).catch(lodash__WEBPACK_IMPORTED_MODULE_1__.noop)).then(e=>{if(!e||!e.Status)throw new b(l.PaymentNotInitialized)})}getThreeDSecureData(e,t){return this._getClientSDK().then(n=>new Promise((i,r)=>{n.on(_.Validated,(e,t)=>{if(n.off(_.Validated),!t)return r(new g(e.ErrorDescription?e.ErrorDescription:\"An error was encountered while processing the transaction.\"));if(!e.ActionCode)return i({token:t});switch(e.ActionCode){case C.Success:return i({token:t});case C.NoAction:return e.ErrorNumber>0?r(new g(e.ErrorDescription)):e.Payment&&e.Payment.ExtendedData&&e.Payment.ExtendedData.SignatureVerification===I.Yes?i({token:t}):r(new g(\"Transaction signature could not be validated.\"));case C.Failure:return r(new g(\"User failed authentication or an error was encountered while processing the transaction.\"));case C.Error:return r(new g(e.ErrorDescription))}});const o={AcsUrl:e.acs_url,Payload:e.merchant_data},a=this._mapToPartialOrder(t,e.payer_auth_request);n.continue(P.CCA,o,a)}))}_mapToPartialOrder(e,t){const n={BillingAddress:this._mapToCardinalAddress(e.billingAddress)};return e.paymentData&&(n.Account=this._mapToCardinalAccount(e.paymentData)),e.billingAddress.email&&(n.Email1=e.billingAddress.email),e.shippingAddress&&(n.ShippingAddress=this._mapToCardinalAddress(e.shippingAddress)),{Consumer:n,OrderDetails:{OrderNumber:e.id,Amount:e.amount,CurrencyCode:e.currencyCode,OrderChannel:\"S\",TransactionId:t}}}_mapToCardinalAccount(e){return{AccountNumber:Number(e.ccNumber),ExpirationMonth:Number(e.ccExpiry.month),ExpirationYear:Number(e.ccExpiry.year),NameOnAccount:e.ccName,CardCode:Number(e.ccCvv)}}_mapToCardinalAddress(e){const t={FirstName:e.firstName,LastName:e.lastName,Address1:e.address1,City:e.city,State:e.stateOrProvince,PostalCode:e.postalCode,CountryCode:e.countryCode};return e.address2&&(t.Address2=e.address2),e.phone&&(t.Phone1=e.phone),t}_getClientSDK(){if(!this._sdk)throw new b(l.PaymentNotInitialized);return this._sdk}}class O extends p{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class A{constructor(e,t=window){this._scriptLoader=e,this._window=t}load(e,t){const n=t?\"https://songbirdstag.cardinalcommerce.com/edge/v1/songbird.js\":\"https://songbird.cardinalcommerce.com/edge/v1/songbird.js\";return this._scriptLoader.loadScript(`${n}?v=${e}`).then(()=>{if(!this._window.Cardinal)throw new O;return this._window.Cardinal})}}function x(e,t){return console.log(\"resolveIds\",t),Object.assign(e,{resolveIds:t})}class k extends p{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class D extends p{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class E extends k{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}var N=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})},T=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class z{constructor(e){this._paymentIntegrationService=e}execute(e,t){var n,i;return this._isHostedPaymentFormEnabled(null===(n=e.payment)||void 0===n?void 0:n.methodId,null===(i=e.payment)||void 0===i?void 0:i.gatewayId)&&this._shouldRenderHostedForm?this._executeWithHostedForm(e,t):this._executeWithoutHostedForm(e,t)}initialize(e){if(!this._isHostedPaymentFormEnabled(null==e?void 0:e.methodId,null==e?void 0:e.gatewayId)||!this._isHostedFieldAvailable(e))return this._shouldRenderHostedForm=!1,Promise.resolve();const t=e&&e.creditCard&&e.creditCard.form,n=this._paymentIntegrationService.getState(),{paymentSettings:{bigpayBaseUrl:i=\"\"}={}}=n.getStoreConfigOrThrow();if(!t)throw new k;const r=this._paymentIntegrationService.createHostedForm(i,t);return r.attach().then(()=>(this._shouldRenderHostedForm=!0,this._hostedForm=r,Promise.resolve()))}deinitialize(){return this._hostedForm&&this._hostedForm.detach(),Promise.resolve()}finalize(){return Promise.reject(new D)}_executeWithoutHostedForm(e,t){return N(this,void 0,void 0,function*(){const{payment:n}=e,i=T(e,[\"payment\"]),r=n&&n.paymentData;if(!n||!r)throw new E([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:r}))})}_executeWithHostedForm(e,t){return N(this,void 0,void 0,function*(){const{payment:n}=e,i=T(e,[\"payment\"]),r=this._hostedForm;if(!r)throw new b(l.PaymentNotInitialized);if(!n||!n.methodId)throw new E([\"payment.methodId\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield r.validate().then(()=>r.submit(n))})}_isHostedPaymentFormEnabled(e,t){return!!e&&!0===this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t).config.isHostedFormEnabled}_isHostedFieldAvailable(e){return!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.values)(e&&e.creditCard&&e.creditCard.form.fields).every(lodash__WEBPACK_IMPORTED_MODULE_1__.isNil)}}var F=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};class U extends z{constructor(e,t){super(e),this._threeDSecureFlow=t}initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return F(this,void 0,void 0,function*(){yield t.initialize.call(this,e);const{getPaymentMethodOrThrow:n}=this._paymentIntegrationService.getState(),i=n(e.methodId);i.config.is3dsEnabled&&(yield this._threeDSecureFlow.prepare(i))})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return F(this,void 0,void 0,function*(){const{payment:{methodId:i=\"\"}={}}=e,{getPaymentMethodOrThrow:r}=this._paymentIntegrationService.getState();return r(i).config.is3dsEnabled?this._threeDSecureFlow.start(n.execute.bind(this),e,t,this._hostedForm):n.execute.call(this,e,t)})}}const j=x(t=>new U(t,new m(t,new M(new A((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())))),[{id:\"cybersource\"}]);var B=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};class H{constructor(e,t){this._paymentIntegrationService=e,this._cardinalClient=t}prepare(e){return B(this,void 0,void 0,function*(){yield this._cardinalClient.load(e.id,e.config.testMode)})}start(e,t,n,i){var r,a,s,c;return B(this,void 0,void 0,function*(){const{getCardInstrument:u}=this._paymentIntegrationService.getState(),{payment:l={methodId:\"\"}}=t,{paymentData:h={}}=l;try{return yield e(t,n)}catch(e){if(d(e)&&\"additional_action_required\"===(null===(r=e.body)||void 0===r?void 0:r.status)){const t=null===(s=null===(a=e.body.additional_action_required)||void 0===a?void 0:a.data)||void 0===s?void 0:s.token,n=null===(c=e.body.three_ds_result)||void 0===c?void 0:c.payer_auth_request;yield this._cardinalClient.configure(t);const r=this._getBin(h,u,i);r&&(yield this._cardinalClient.runBinProcess(r));try{return yield this._submitPayment(l,{xid:n},i)}catch(e){if(d(e)&&(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"})){const t=e.body.three_ds_result,n=null==t?void 0:t.payer_auth_request;return yield this._cardinalClient.getThreeDSecureData(t,this._getOrderData()),this._submitPayment(l,{token:n},i)}throw e}}throw e}})}_getOrderData(){const e=this._paymentIntegrationService.getState(),t=e.getBillingAddressOrThrow(),n=e.getShippingAddress(),{cart:{currency:{code:i},cartAmount:r}}=e.getCheckoutOrThrow();return{billingAddress:t,shippingAddress:n,currencyCode:i,id:e.getOrderOrThrow().orderId.toString(),amount:r}}_submitPayment(e,t,n){return B(this,void 0,void 0,function*(){const r=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)({},e,{paymentData:{threeDSecure:t}});n||(yield this._paymentIntegrationService.submitPayment(r)),yield null==n?void 0:n.submit(r)})}_getBin(e,t,n){const i=c(e)&&t(e.instrumentId),r=function(e){const t=e;return!c(t)&&\"string\"==typeof t.ccName&&\"string\"==typeof t.ccNumber&&\"object\"==typeof t.ccExpiry&&\"string\"==typeof t.ccExpiry.month&&\"string\"==typeof t.ccExpiry.year}(e)&&e.ccNumber,o=n?n.getBin():r;return(i?i.iin:o)||\"\"}}var q=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};class R extends z{constructor(e,t){super(e),this._threeDSecureFlow=t}initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return q(this,void 0,void 0,function*(){yield t.initialize.call(this,e);const{getPaymentMethodOrThrow:n}=this._paymentIntegrationService.getState(),i=n(e.methodId);i.config.is3dsEnabled&&(yield this._threeDSecureFlow.prepare(i))})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return q(this,void 0,void 0,function*(){const{payment:{methodId:i=\"\"}={}}=e,{getPaymentMethodOrThrow:r}=this._paymentIntegrationService.getState();return r(i).config.is3dsEnabled?this._threeDSecureFlow.start(n.execute.bind(this),e,t,this._hostedForm):n.execute.call(this,e,t)})}}const V=x(t=>new R(t,new H(t,new M(new A((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())))),[{id:\"cybersourcev2\"},{id:\"bnz\"},{id:\"barclays\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9jeWJlcnNvdXJjZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNBLElBQUlBLEVBQXNCLENBQUMsRUNPWixTQUFTQyxFQUNwQkMsR0FFQSxPQUFPQyxRQUFTRCxFQUFpQ0UsYUFDckQsQ0NYQUosRUFBb0JLLEVBQUksQ0FBQ0MsRUFBU0MsS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYUCxFQUFvQlMsRUFBRUYsRUFBWUMsS0FBU1IsRUFBb0JTLEVBQUVILEVBQVNFLElBQzVFRSxPQUFPQyxlQUFlTCxFQUFTRSxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsTUNKM0VSLEVBQW9CUyxFQUFJLENBQUNLLEVBQUtDLElBQVVMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEdDR2xGLE1BSUEsRUFKd0JJLEdBQ0ksaUJBQVZBLEdBQWdDLE9BQVZBLEdBQWtCLFNBQVVBLEUsSUNGeERDLEVDQUFDLEUsa1NDYUcsTUFBTUMsRUFDakIsV0FBQUMsQ0FDWUMsRUFDQUMsR0FEQSxLQUFBRCwyQkFBQUEsRUFDQSxLQUFBQyxnQkFBQUEsQ0FDVCxDQUVHLE9BQUFDLENBQVFDLEcsOENBQ0pDLEtBQUtILGdCQUFnQkksS0FBS0YsRUFBT0csR0FBSUgsRUFBT0ksT0FBT0MsZ0JBQ25ESixLQUFLSCxnQkFBZ0JRLGdCQUFnQkwsS0FBS00sZ0JBQWdCUCxHQUNwRSxFLENBRU0sS0FBQVEsQ0FDRkMsRUFDQUMsRUFDQUMsRUFDQUMsRyx3Q0FFQSxNQUFNLGtCQUFFQyxFQUFpQix3QkFBRUMsR0FDdkJiLEtBQUtKLDJCQUEyQmtCLFlBRTVCQyxTQUFTLFNBQUVDLEVBQVcsR0FBRSxZQUFFQyxFQUFjLENBQUMsR0FBTSxDQUFDLEdBQU1SLEVBQ3hEbkMsRUFDRkQsRUFBb0I0QyxJQUFnQkwsRUFBa0JLLEVBQVl6QyxjQUNoRTBDLEVBQU01QyxFQUFhQSxFQUFXNkMsSUFBTVIsR0FBY0Es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UUssU0FBUyxTQUFFQyxFQUFXLElBQU8sQ0FBQyxHQUFNUCxHQUN0Qyx3QkFBRUksR0FBNEJiLEtBQUtKLDJCQUEyQmtCLFdBR3BFLE9BRnNCRCxFQUF3QkcsR0FFNUJiLE9BQU8rTyxhQUNkbFAsS0FBS2dQLGtCQUFrQnpPLE1BQzFCLEVBQU1DLFFBQVEyTyxLQUFLblAsTUFDbkJTLEVBQ0FDLEVBQ0FWLEtBQUtvTyxhQUlOLEVBQU01TixRQUFPLFVBQUNDLEVBQVNDLEVBQ2xDLEUsRUM3QkosTUFZQSxFQUFlOEwsRUFYWDRDLEdBRU8sSUFBSWdCLEVBQ1BoQixFQUNBLElBQUlFLEVBQ0FGLEVBQ0EsSUFBSXhKLEVBQWUsSUFBSXNHLEVBQXFCbUQsMkVBQUFBLE9BS2MsQ0FDbEUsQ0FBRW5QLEdBQUksaUJBQ04sQ0FBRUEsR0FBSSxPQUNOLENBQUVBLEdBQUksYyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ib290c3RyYXA/ZmZjYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaXMtdmF1bHRlZC1pbnN0cnVtZW50LnRzPzE4MGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnM/OTk0YyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQ/OWVhNCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pcy1yZXF1ZXN0LWVycm9yLnRzP2I0M2QiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbWlzc2luZy1kYXRhLWVycm9yLnRzP2I3ZGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbm90LWluaXRpYWxpemVkLWVycm9yLnRzPzhiNGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2NhcmRpbmFsLWludGVncmF0aW9uL3NyYy9jYXJkaW5hbC10aHJlZS1kLXNlY3VyZS1mbG93LnRzP2JjMzkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtZmFpbGVkLWVycm9yLnRzPzA3ZGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2NhcmRpbmFsLWludGVncmF0aW9uL3NyYy9jYXJkaW5hbC50cz81YmZjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jYXJkaW5hbC1pbnRlZ3JhdGlvbi9zcmMvY2FyZGluYWwtY2xpZW50LnRzPzIyMTciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtY2xpZW50LXVuYXZhaWxhYmxlLWVycm9yLnRzP2Y4ZWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2NhcmRpbmFsLWludGVncmF0aW9uL3NyYy9jYXJkaW5hbC1zY3JpcHQtbG9hZGVyLnRzPzNiYjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2ludmFsaWQtYXJndW1lbnQtZXJyb3IudHM/MzkyMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9vcmRlci1maW5hbGl6YXRpb24tbm90LXJlcXVpcmVkLWVycm9yLnRzP2I1YTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1hcmd1bWVudC1pbnZhbGlkLWVycm9yLnRzP2E1MDEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2NyZWRpdC1jYXJkLWludGVncmF0aW9uL3NyYy9jcmVkaXQtY2FyZC1wYXltZW50LXN0cmF0ZWd5LnRzPzI4OWYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2N5YmVyc291cmNlLWludGVncmF0aW9uL3NyYy9jeWJlcnNvdXJjZS9jeWJlcnNvdXJjZS1wYXltZW50LXN0cmF0ZWd5LnRzPzNmYjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2N5YmVyc291cmNlLWludGVncmF0aW9uL3NyYy9jeWJlcnNvdXJjZS9jcmVhdGUtY3liZXJzb3VyY2UtcGF5bWVudC1zdHJhdGVneS50cz9mMzQ2Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jYXJkaW5hbC1pbnRlZ3JhdGlvbi9zcmMvY2FyZGluYWwtdGhyZWUtZC1zZWN1cmUtZmxvdy12Mi50cz85M2QwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy1jcmVkaXQtY2FyZC1pbnN0cnVtZW50LnRzPzQwMWQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2N5YmVyc291cmNlLWludGVncmF0aW9uL3NyYy9jeWJlcnNvdXJjZXYyL2N5YmVyc291cmNldjItcGF5bWVudC1zdHJhdGVneS50cz8wODEyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jeWJlcnNvdXJjZS1pbnRlZ3JhdGlvbi9zcmMvY3liZXJzb3VyY2V2Mi9jcmVhdGUtY3liZXJzb3VyY2V2Mi1wYXltZW50LXN0cmF0ZWd5LnRzP2M2ZTYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsImltcG9ydCB7XG4gICAgRm9ybWF0dGVkUGF5bG9hZCxcbiAgICBGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJy4vcGF5bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIEJvb2xlYW4oKGluc3RydW1lbnQgYXMgVmF1bHRlZEluc3RydW1lbnQpLmluc3RydW1lbnRJZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0hvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQge1xuICAgIHJldHVybiAoXG4gICAgICAgIEJvb2xlYW4oKGluc3RydW1lbnQgYXMgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQpLmluc3RydW1lbnRJZCkgJiZcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0cnVtZW50LCAnY2NOdW1iZXInKSAmJlxuICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RydW1lbnQsICdjY0N2dicpXG4gICAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBGb3JtYXR0ZWRQYXlsb2FkPEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50PiB7XG4gICAgY29uc3QgZm9ybWF0dGVkSW5zdHJ1bWVudCA9IChpbnN0cnVtZW50IGFzIEZvcm1hdHRlZFBheWxvYWQ8Rm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQ+KVxuICAgICAgICAuZm9ybWF0dGVkUGF5bG9hZDtcblxuICAgIGlmICghZm9ybWF0dGVkSW5zdHJ1bWVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuID09PSAnc3RyaW5nJyB8fFxuICAgICAgICBCb29sZWFuKGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuICYmIGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuLnRva2VuKVxuICAgICk7XG59XG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vLyBIYXZlIHRvIHVzZSBgYXNgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzczOTg3MDQ0L3R5cGVndWFyZGluZy1hbi11bmtub3duLW5lc3RlZC1vYmplY3Qgc2hvdWxkIGJlIGZpeGVkIGluIDQuOCtcbmNvbnN0IGlzUmVxdWVzdEVycm9yID0gKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVxdWVzdEVycm9yID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnYm9keScgaW4gZXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpc1JlcXVlc3RFcnJvcjtcbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBNaXNzaW5nRGF0YUVycm9yVHlwZSB7XG4gICAgTWlzc2luZ0JpbGxpbmdBZGRyZXNzLFxuICAgIE1pc3NpbmdDYXJ0LFxuICAgIE1pc3NpbmdDaGVja291dCxcbiAgICBNaXNzaW5nQ29uc2lnbm1lbnRzLFxuICAgIE1pc3NpbmdDdXN0b21lcixcbiAgICBNaXNzaW5nQ2hlY2tvdXRDb25maWcsXG4gICAgTWlzc2luZ09yZGVyLFxuICAgIE1pc3NpbmdPcmRlckNvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXJJZCxcbiAgICBNaXNzaW5nUGF5bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudElkLFxuICAgIE1pc3NpbmdQYXltZW50SW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICBNaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsLFxuICAgIE1pc3NpbmdQYXltZW50U3RhdHVzLFxuICAgIE1pc3NpbmdQYXltZW50VG9rZW4sXG4gICAgTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIHdoZW4gZGF0YSB0aGF0IGlzIGV4cGVjdGVkIHRvIGV4aXN0IGlzIG1pc3NpbmcuIFVzdWFsbHkgaXRcbiAqIGlzIGR1ZSB0byB0aGUgZmFjdCB0aGF0IGNlcnRhaW4gZGF0YSBoYXMgbm90IGJlZW4gcmV0cmlldmVkIGZyb20gb3Igc2F2ZWQgdG9cbiAqIHRoZSBzZXJ2ZXIgeWV0LiBBbmQgc3VjaCBkYXRhIGlzIHJlcXVpcmVkIHRvIHBlcmZvcm0gY2VydGFpbiBhY3Rpb25zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXNzaW5nRGF0YUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ01pc3NpbmdEYXRhRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbWlzc2luZ19kYXRhJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjYXJ0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDb25zaWdubWVudHM6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ3VzdG9tZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY3VzdG9tZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOlxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlckNvbmZpZzpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSB0b2tlbiByZXF1aXJlZCB0byBzdWJtaXQgYSBwYXltZW50IGlzIG1pc3NpbmcuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBOb3RJbml0aWFsaXplZEVycm9yVHlwZSB7XG4gICAgQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZCxcbiAgICBDdXN0b21lck5vdEluaXRpYWxpemVkLFxuICAgIFBheW1lbnROb3RJbml0aWFsaXplZCxcbiAgICBTaGlwcGluZ05vdEluaXRpYWxpemVkLFxuICAgIFNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIG1ldGhvZCByZXF1aXJlcyBhIGNlcnRhaW4gaW5pdGlhbGl6YXRpb24gY2FsbCB0byBiZVxuICogbWFkZSBmaXJzdC4gU29tZSBvYmplY3RzIGNhbiBiZSBjb25zdHJ1Y3RlZCBidXQgdGhleSBjYW5ub3QgYmUgdXNlZCB1bnRpbCBhXG4gKiBzZXBhcmF0ZSBpbml0aWFsaXphdGlvbiBjYWxsIGlzIG1hZGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdEluaXRpYWxpemVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTm90SW5pdGlhbGl6ZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdub3RfaW5pdGlhbGl6ZWQnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5DdXN0b21lck5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjdXN0b21lciBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TaGlwcGluZ05vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBzaGlwcGluZyBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2hlY2tvdXQgc3BhbSBwcm90ZWN0aW9uIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBtZXJnZSwgc29tZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgSG9zdGVkRm9ybSxcbiAgICBpc1JlcXVlc3RFcnJvcixcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQ2FyZGluYWxDbGllbnQsIHsgQ2FyZGluYWxPcmRlckRhdGEgfSBmcm9tICcuL2NhcmRpbmFsLWNsaWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmRpbmFsVGhyZWVEU2VjdXJlRmxvdyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgX2NhcmRpbmFsQ2xpZW50OiBDYXJkaW5hbENsaWVudCxcbiAgICApIHt9XG5cbiAgICBhc3luYyBwcmVwYXJlKG1ldGhvZDogUGF5bWVudE1ldGhvZCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLl9jYXJkaW5hbENsaWVudC5sb2FkKG1ldGhvZC5pZCwgbWV0aG9kLmNvbmZpZy50ZXN0TW9kZSk7XG4gICAgICAgIGF3YWl0IHRoaXMuX2NhcmRpbmFsQ2xpZW50LmNvbmZpZ3VyZShhd2FpdCB0aGlzLl9nZXRDbGllbnRUb2tlbihtZXRob2QpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzdGFydChcbiAgICAgICAgZXhlY3V0ZTogUGF5bWVudFN0cmF0ZWd5WydleGVjdXRlJ10sXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgICAgIGhvc3RlZEZvcm0/OiBIb3N0ZWRGb3JtLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGdldENhcmRJbnN0cnVtZW50LCBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyB9ID1cbiAgICAgICAgICAgIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICBjb25zdCB7IHBheW1lbnQ6IHsgbWV0aG9kSWQgPSAnJywgcGF5bWVudERhdGEgPSB7fSB9ID0ge30gfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IGluc3RydW1lbnQgPVxuICAgICAgICAgICAgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkgJiYgZ2V0Q2FyZEluc3RydW1lbnQocGF5bWVudERhdGEuaW5zdHJ1bWVudElkKTtcbiAgICAgICAgY29uc3QgYmluID0gaW5zdHJ1bWVudCA/IGluc3RydW1lbnQuaWluIDogaG9zdGVkRm9ybSAmJiBob3N0ZWRGb3JtLmdldEJpbigpO1xuXG4gICAgICAgIGlmIChiaW4pIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2NhcmRpbmFsQ2xpZW50LnJ1bkJpblByb2Nlc3MoYmluKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZShcbiAgICAgICAgICAgICAgICBtZXJnZShwYXlsb2FkLCB7XG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyZWVEU2VjdXJlOiB7IHRva2VuOiBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCkuY2xpZW50VG9rZW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIWlzUmVxdWVzdEVycm9yKGVycm9yKSB8fFxuICAgICAgICAgICAgICAgICFzb21lKGVycm9yLmJvZHkuZXJyb3JzLCB7IGNvZGU6ICd0aHJlZV9kX3NlY3VyZV9yZXF1aXJlZCcgfSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0aHJlZURTZWN1cmUgPSBhd2FpdCB0aGlzLl9jYXJkaW5hbENsaWVudC5nZXRUaHJlZURTZWN1cmVEYXRhKFxuICAgICAgICAgICAgICAgIGVycm9yLmJvZHkudGhyZWVfZHNfcmVzdWx0LFxuICAgICAgICAgICAgICAgIHRoaXMuX2dldE9yZGVyRGF0YSgpLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKCFob3N0ZWRGb3JtKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KFxuICAgICAgICAgICAgICAgICAgICBtZXJnZShwYXlsb2FkLnBheW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7IHRocmVlRFNlY3VyZSB9LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBob3N0ZWRGb3JtLnN1Ym1pdChcbiAgICAgICAgICAgICAgICBtZXJnZShwYXlsb2FkLnBheW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudERhdGE6IHsgdGhyZWVEU2VjdXJlIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfZ2V0Q2xpZW50VG9rZW4obWV0aG9kOiBQYXltZW50TWV0aG9kKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgaWYgKG1ldGhvZC5jbGllbnRUb2tlbikge1xuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZC5jbGllbnRUb2tlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kLmlkKTtcblxuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgIC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2QuaWQpO1xuXG4gICAgICAgIHJldHVybiBwYXltZW50TWV0aG9kLmNsaWVudFRva2VuIHx8ICcnO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldE9yZGVyRGF0YSgpOiBDYXJkaW5hbE9yZGVyRGF0YSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRTaGlwcGluZ0FkZHJlc3MoKTtcbiAgICAgICAgY29uc3QgY2hlY2tvdXQgPSBzdGF0ZS5nZXRDaGVja291dE9yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBzdGF0ZS5nZXRPcmRlck9yVGhyb3coKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3MsXG4gICAgICAgICAgICBzaGlwcGluZ0FkZHJlc3MsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGU6IGNoZWNrb3V0LmNhcnQuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgIGlkOiBvcmRlci5vcmRlcklkLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBhbW91bnQ6IGNoZWNrb3V0LmNhcnQuY2FydEFtb3VudCxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQgQ3VzdG9tRXJyb3IgZnJvbSAnLi9jdXN0b20tZXJyb3InO1xuaW1wb3J0IHNldFByb3RvdHlwZU9mIGZyb20gJy4vc2V0LXByb3RvdHlwZS1vZic7XG5cbi8qKlxuICogVGhpcyBlcnJvciB0eXBlIHNob3VsZCBub3QgYmUgY29uc3RydWN0ZWQgZGlyZWN0bHkuIEl0IGlzIGEgYmFzZSBjbGFzcyBmb3JcbiAqIGFsbCBjdXN0b20gZXJyb3JzIHRocm93biBpbiB0aGlzIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkRXJyb3IgZXh0ZW5kcyBFcnJvciBpbXBsZW1lbnRzIEN1c3RvbUVycm9yIHtcbiAgICBuYW1lID0gJ1N0YW5kYXJkRXJyb3InO1xuICAgIHR5cGUgPSAnc3RhbmRhcmQnO1xuXG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICBzZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgbmV3LnRhcmdldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YWNrID0gbmV3IEVycm9yKHRoaXMubWVzc2FnZSkuc3RhY2s7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihvYmplY3Q6IGFueSwgcHJvdG90eXBlOiBvYmplY3QpIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmplY3QsIHByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqZWN0O1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBwYXltZW50IG1ldGhvZCBleHBlcmllbmNlcyBzb21lIGtpbmQgb2ZcbiAqIGZhaWx1cmUgKGkuZS46IGl0cyBjbGllbnQgbGlicmFyeSByZXR1cm5zIGEgcmVqZWN0ZWQgcHJvbWlzZSkuIEFuZCB0aGVyZSBpc1xuICogbm8gb3RoZXIgZXJyb3IgdHlwZSB0aGF0IGlzIG1vcmUgc3BlY2lmaWMgdGhhbiB0aGlzIG9uZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBoYXMgdGhyb3duIGFuIHVuZXhwZWN0ZWQgZXJyb3IuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfbWV0aG9kX2NsaWVudF9pbnZhbGlkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBUaHJlZURTZWN1cmUsIFRocmVlRFNlY3VyZVRva2VuIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBjb25zdCBDYXJkaW5hbFNpZ25hdHVyZVZhbGlkYXRpb25FcnJvcnMgPSBbMTAwMDA0LCAxMDEwLCAxMDExLCAxMDIwXTtcblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbFNESyB7XG4gICAgY29uZmlndXJlKHBhcmFtczogQ2FyZGluYWxDb25maWd1cmF0aW9uKTogdm9pZDtcbiAgICBvbihwYXJhbXM6IENhcmRpbmFsRXZlbnRUeXBlLCBjYWxsYmFjazogQ2FyZGluYWxFdmVudE1hcFtDYXJkaW5hbEV2ZW50VHlwZV0pOiB2b2lkO1xuICAgIG9mZihwYXJhbXM6IENhcmRpbmFsRXZlbnRUeXBlKTogdm9pZDtcbiAgICBzZXR1cDxLIGV4dGVuZHMga2V5b2YgQ2FyZGluYWxJbml0aWFsaXphdGlvbkRhdGFNYXA+KFxuICAgICAgICBpbml0aWFsaXphdGlvblR5cGU6IEssXG4gICAgICAgIGluaXRpYWxpemF0aW9uRGF0YTogQ2FyZGluYWxJbml0aWFsaXphdGlvbkRhdGFNYXBbS10sXG4gICAgKTogdm9pZDtcbiAgICB0cmlnZ2VyKFxuICAgICAgICBldmVudDogQ2FyZGluYWxUcmlnZ2VyRXZlbnRzLFxuICAgICAgICBkYXRhPzogc3RyaW5nLFxuICAgICk6IFByb21pc2U8Q2FyZGluYWxCaW5Qcm9jZXNzUmVzcG9uc2UgfCB2b2lkPjtcbiAgICBjb250aW51ZShcbiAgICAgICAgcGF5bWVudEJyYW5kOiBDYXJkaW5hbFBheW1lbnRCcmFuZCxcbiAgICAgICAgY29udGludWVPYmplY3Q6IENhcmRpbmFsQ29udGludWUsXG4gICAgICAgIG9yZGVyOiBDYXJkaW5hbFBhcnRpYWxPcmRlcixcbiAgICApOiB2b2lkO1xuICAgIHN0YXJ0KHBheW1lbnRCcmFuZDogQ2FyZGluYWxQYXltZW50QnJhbmQsIG9yZGVyOiBDYXJkaW5hbFBhcnRpYWxPcmRlciwgand0Pzogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgQ2FyZGluYWw/OiBDYXJkaW5hbFNESztcbn1cblxuZXhwb3J0IGVudW0gQ2FyZGluYWxFdmVudFR5cGUge1xuICAgIFNldHVwQ29tcGxldGVkID0gJ3BheW1lbnRzLnNldHVwQ29tcGxldGUnLFxuICAgIFZhbGlkYXRlZCA9ICdwYXltZW50cy52YWxpZGF0ZWQnLFxufVxuXG5leHBvcnQgdHlwZSBzZXR1cENvbXBsZXRlRm4gPSAoc2V0dXBDb21wbGV0ZURhdGE6IENhcmRpbmFsU2V0dXBDb21wbGV0ZWREYXRhKSA9PiB2b2lkO1xuZXhwb3J0IHR5cGUgdmFsaWRhdGVkRm4gPSAoZGF0YTogQ2FyZGluYWxWYWxpZGF0ZWREYXRhLCBqd3Q/OiBzdHJpbmcpID0+IHZvaWQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxFdmVudE1hcCB7XG4gICAgW0NhcmRpbmFsRXZlbnRUeXBlLlNldHVwQ29tcGxldGVkXTogc2V0dXBDb21wbGV0ZUZuO1xuICAgIFtDYXJkaW5hbEV2ZW50VHlwZS5WYWxpZGF0ZWRdOiB2YWxpZGF0ZWRGbjtcbn1cblxuZXhwb3J0IHR5cGUgQ2FyZGluYWxDb25maWd1cmF0aW9uID0gUGFydGlhbDx7XG4gICAgbG9nZ2luZzoge1xuICAgICAgICBsZXZlbDogc3RyaW5nO1xuICAgIH07XG4gICAgcGF5bWVudDoge1xuICAgICAgICB2aWV3OiBzdHJpbmc7XG4gICAgICAgIGZyYW1ld29yazogc3RyaW5nO1xuICAgICAgICBkaXNwbGF5TG9hZGluZzogYm9vbGVhbjtcbiAgICB9O1xufT47XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxTZXR1cENvbXBsZXRlZERhdGEge1xuICAgIHNlc3Npb25JZDogc3RyaW5nO1xuICAgIG1vZHVsZXM6IENhcmRpbmFsTW9kdWxlU3RhdGVbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbE1vZHVsZVN0YXRlIHtcbiAgICBsb2FkZWQ6IGJvb2xlYW47XG4gICAgbW9kdWxlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIENhcmRpbmFsSW5pdGlhbGl6YXRpb25UeXBlIHtcbiAgICBJbml0ID0gJ2luaXQnLFxuICAgIENvbXBsZXRlID0gJ2NvbXBsZXRlJyxcbiAgICBDb25maXJtID0gJ2NvbmZpcm0nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsSW5pdGlhbGl6YXRpb25EYXRhTWFwIHtcbiAgICBbQ2FyZGluYWxJbml0aWFsaXphdGlvblR5cGUuSW5pdF06IENhcmRpbmFsSW5pdFR5cGVEYXRhO1xuICAgIFtDYXJkaW5hbEluaXRpYWxpemF0aW9uVHlwZS5Db21wbGV0ZV06IENhcmRpbmFsQ29tcGxldGVUeXBlRGF0YTtcbiAgICBbQ2FyZGluYWxJbml0aWFsaXphdGlvblR5cGUuQ29uZmlybV06IENhcmRpbmFsQ29uZmlybVR5cGVEYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsSW5pdFR5cGVEYXRhIHtcbiAgICBqd3Q6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbENvbXBsZXRlVHlwZURhdGEge1xuICAgIFN0YXR1czogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsQ29uZmlybVR5cGVEYXRhIHtcbiAgICBqd3Q6IHN0cmluZztcbiAgICBjYXJkaW5hbFJlc3BvbnNlSnd0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxWYWxpZGF0ZWREYXRhIHtcbiAgICBBY3Rpb25Db2RlPzogQ2FyZGluYWxWYWxpZGF0ZWRBY3Rpb247XG4gICAgRXJyb3JEZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIEVycm9yTnVtYmVyOiBudW1iZXI7XG4gICAgVmFsaWRhdGVkPzogYm9vbGVhbjtcbiAgICBQYXltZW50PzogQ2FyZGluYWxQYXltZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsUGF5bWVudCB7XG4gICAgRXh0ZW5kZWREYXRhPzogQ2FyZGluYWxDQ0FFeHRlbmRlZERhdGE7XG4gICAgUHJvY2Vzc29yVHJhbnNhY3Rpb25JZDogc3RyaW5nO1xuICAgIFR5cGU6IENhcmRpbmFsUGF5bWVudFR5cGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxCaW5Qcm9jZXNzUmVzcG9uc2Uge1xuICAgIFN0YXR1czogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbENvbnRpbnVlIHtcbiAgICBBY3NVcmw6IHN0cmluZztcbiAgICBQYXlsb2FkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxQYXJ0aWFsT3JkZXIge1xuICAgIE9yZGVyRGV0YWlsczogQ2FyZGluYWxPcmRlckRldGFpbHM7XG4gICAgQ29uc3VtZXI/OiBDYXJkaW5hbENvbnN1bWVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsQ29uc3VtZXIge1xuICAgIEVtYWlsMT86IHN0cmluZztcbiAgICBFbWFpbDI/OiBzdHJpbmc7XG4gICAgU2hpcHBpbmdBZGRyZXNzPzogQ2FyZGluYWxBZGRyZXNzO1xuICAgIEJpbGxpbmdBZGRyZXNzPzogQ2FyZGluYWxBZGRyZXNzO1xuICAgIEFjY291bnQ/OiBDYXJkaW5hbEFjY291bnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxBY2NvdW50IHtcbiAgICBBY2NvdW50TnVtYmVyOiBudW1iZXI7XG4gICAgRXhwaXJhdGlvbk1vbnRoOiBudW1iZXI7XG4gICAgRXhwaXJhdGlvblllYXI6IG51bWJlcjtcbiAgICBOYW1lT25BY2NvdW50OiBzdHJpbmc7XG4gICAgQ2FyZENvZGU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbEFkZHJlc3Mge1xuICAgIEZ1bGxOYW1lPzogc3RyaW5nO1xuICAgIEZpcnN0TmFtZTogc3RyaW5nO1xuICAgIE1pZGRsZU5hbWU/OiBzdHJpbmc7XG4gICAgTGFzdE5hbWU6IHN0cmluZztcbiAgICBBZGRyZXNzMTogc3RyaW5nO1xuICAgIEFkZHJlc3MyPzogc3RyaW5nO1xuICAgIEFkZHJlc3MzPzogc3RyaW5nO1xuICAgIENpdHk6IHN0cmluZztcbiAgICBTdGF0ZTogc3RyaW5nO1xuICAgIFBvc3RhbENvZGU6IHN0cmluZztcbiAgICBDb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIFBob25lMT86IHN0cmluZztcbiAgICBQaG9uZTI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxPcmRlckRldGFpbHMge1xuICAgIE9yZGVyTnVtYmVyOiBzdHJpbmc7XG4gICAgQW1vdW50OiBudW1iZXI7XG4gICAgQ3VycmVuY3lDb2RlOiBzdHJpbmc7XG4gICAgT3JkZXJEZXNjcmlwdGlvbj86IHN0cmluZztcbiAgICBPcmRlckNoYW5uZWw6IHN0cmluZztcbiAgICBUcmFuc2FjdGlvbklkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBDYXJkaW5hbENDQUV4dGVuZGVkRGF0YSA9IFBhcnRpYWw8e1xuICAgIENBVlY6IHN0cmluZztcbiAgICBFQ0lGbGFnOiBzdHJpbmc7XG4gICAgUEFSZXNTdGF0dXM6IHN0cmluZztcbiAgICBTaWduYXR1cmVWZXJpZmljYXRpb246IHN0cmluZztcbiAgICBYSUQ6IHN0cmluZztcbiAgICBVQ0FGSW5kaWNhdG9yOiBzdHJpbmc7XG4gICAgQ2hhbGxlbmdlQ2FuY2VsOiBzdHJpbmc7XG59PjtcblxuZXhwb3J0IGVudW0gQ2FyZGluYWxWYWxpZGF0ZWRBY3Rpb24ge1xuICAgIFN1Y2Nlc3MgPSAnU1VDQ0VTUycsXG4gICAgTm9BY3Rpb24gPSAnTk9BQ1RJT04nLFxuICAgIEZhaWx1cmUgPSAnRkFJTFVSRScsXG4gICAgRXJyb3IgPSAnRVJST1InLFxufVxuXG5leHBvcnQgZW51bSBDYXJkaW5hbFBheW1lbnRUeXBlIHtcbiAgICBDQ0EgPSAnQ0NBJyxcbiAgICBQYXlwYWwgPSAnUGF5cGFsJyxcbiAgICBXYWxsZXQgPSAnV2FsbGV0JyxcbiAgICBWaXNhQ2hlY2tvdXQgPSAnVmlzYUNoZWNrb3V0JyxcbiAgICBBcHBsZVBheSA9ICdBcHBsZVBheScsXG4gICAgRGlzY292ZXJXYWxsZXQgPSAnRGlzY292ZXJXYWxsZXQnLFxufVxuXG5leHBvcnQgZW51bSBDYXJkaW5hbFRyaWdnZXJFdmVudHMge1xuICAgIEJpblByb2Nlc3MgPSAnYmluLnByb2Nlc3MnLFxufVxuXG5leHBvcnQgZW51bSBDYXJkaW5hbFBheW1lbnRCcmFuZCB7XG4gICAgQ0NBID0gJ2NjYScsXG59XG5cbmV4cG9ydCBlbnVtIENhcmRpbmFsU2lnbmF0dXJlVmVyaWZpY2F0aW9uIHtcbiAgICBZZXMgPSAnWScsXG4gICAgTm8gPSAnTicsXG59XG5cbmV4cG9ydCB0eXBlIENhcmRpbmFsVGhyZWVEU2VjdXJlVG9rZW4gPSBQaWNrPFRocmVlRFNlY3VyZSwgJ3hpZCc+IHwgVGhyZWVEU2VjdXJlVG9rZW47XG4iLCJpbXBvcnQgeyBpbmNsdWRlcywgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQWRkcmVzcyxcbiAgICBCaWxsaW5nQWRkcmVzcyxcbiAgICBDcmVkaXRDYXJkSW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yLFxuICAgIFRocmVlRFNlY3VyZVRva2VuLFxuICAgIFRocmVlRHNSZXN1bHQsXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIENhcmRpbmFsQWNjb3VudCxcbiAgICBDYXJkaW5hbEFkZHJlc3MsXG4gICAgQ2FyZGluYWxDb25zdW1lcixcbiAgICBDYXJkaW5hbEV2ZW50VHlwZSxcbiAgICBDYXJkaW5hbEluaXRpYWxpemF0aW9uVHlwZSxcbiAgICBDYXJkaW5hbFBhcnRpYWxPcmRlcixcbiAgICBDYXJkaW5hbFBheW1lbnRCcmFuZCxcbiAgICBDYXJkaW5hbFNESyxcbiAgICBDYXJkaW5hbFNpZ25hdHVyZVZhbGlkYXRpb25FcnJvcnMsXG4gICAgQ2FyZGluYWxTaWduYXR1cmVWZXJpZmljYXRpb24sXG4gICAgQ2FyZGluYWxUcmlnZ2VyRXZlbnRzLFxuICAgIENhcmRpbmFsVmFsaWRhdGVkQWN0aW9uLFxuICAgIENhcmRpbmFsVmFsaWRhdGVkRGF0YSxcbn0gZnJvbSAnLi9jYXJkaW5hbCc7XG5pbXBvcnQgQ2FyZGluYWxTY3JpcHRMb2FkZXIgZnJvbSAnLi9jYXJkaW5hbC1zY3JpcHQtbG9hZGVyJztcblxuZXhwb3J0IHR5cGUgQ2FyZGluYWxTdXBwb3J0ZWRQYXltZW50SW5zdHJ1bWVudCA9IENyZWRpdENhcmRJbnN0cnVtZW50IHwgVmF1bHRlZEluc3RydW1lbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxPcmRlckRhdGEge1xuICAgIGJpbGxpbmdBZGRyZXNzOiBCaWxsaW5nQWRkcmVzcztcbiAgICBzaGlwcGluZ0FkZHJlc3M/OiBBZGRyZXNzO1xuICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nO1xuICAgIGlkOiBzdHJpbmc7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgcGF5bWVudERhdGE/OiBDcmVkaXRDYXJkSW5zdHJ1bWVudDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZGluYWxDbGllbnQge1xuICAgIHByaXZhdGUgX3Byb3ZpZGVyID0gJyc7XG4gICAgcHJpdmF0ZSBfdGVzdE1vZGUgPSBmYWxzZTtcbiAgICBwcml2YXRlIF9zZGs/OiBQcm9taXNlPENhcmRpbmFsU0RLPjtcbiAgICBwcml2YXRlIF9jb25maWd1cmF0aW9uVG9rZW4gPSAnJztcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX3NjcmlwdExvYWRlcjogQ2FyZGluYWxTY3JpcHRMb2FkZXIpIHt9XG5cbiAgICBsb2FkKHByb3ZpZGVyOiBzdHJpbmcsIHRlc3RNb2RlID0gZmFsc2UpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5fcHJvdmlkZXIgPSBwcm92aWRlcjtcbiAgICAgICAgdGhpcy5fdGVzdE1vZGUgPSB0ZXN0TW9kZTtcblxuICAgICAgICBpZiAoIXRoaXMuX3Nkaykge1xuICAgICAgICAgICAgdGhpcy5fc2RrID0gdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWQocHJvdmlkZXIsIHRlc3RNb2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9zZGsudGhlbihub29wKTtcbiAgICB9XG5cbiAgICBjb25maWd1cmUoY2xpZW50VG9rZW46IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5fY29uZmlndXJhdGlvblRva2VuKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29uZmlndXJhdGlvblRva2VuID09PSBjbGllbnRUb2tlbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fc2RrID0gdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWQoYCR7dGhpcy5fcHJvdmlkZXJ9LiR7RGF0ZS5ub3coKX1gLCB0aGlzLl90ZXN0TW9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q2xpZW50U0RLKCkudGhlbihcbiAgICAgICAgICAgIChjbGllbnQpID0+XG4gICAgICAgICAgICAgICAgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjbGllbnQub24oQ2FyZGluYWxFdmVudFR5cGUuU2V0dXBDb21wbGV0ZWQsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudC5vZmYoQ2FyZGluYWxFdmVudFR5cGUuU2V0dXBDb21wbGV0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50Lm9mZihDYXJkaW5hbEV2ZW50VHlwZS5WYWxpZGF0ZWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb25maWd1cmF0aW9uVG9rZW4gPSBjbGllbnRUb2tlbjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjbGllbnQub24oQ2FyZGluYWxFdmVudFR5cGUuVmFsaWRhdGVkLCAoZGF0YTogQ2FyZGluYWxWYWxpZGF0ZWREYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQub2ZmKENhcmRpbmFsRXZlbnRUeXBlLlNldHVwQ29tcGxldGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudC5vZmYoQ2FyZGluYWxFdmVudFR5cGUuVmFsaWRhdGVkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkYXRhLkFjdGlvbkNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENhcmRpbmFsVmFsaWRhdGVkQWN0aW9uLkVycm9yOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZXMoQ2FyZGluYWxTaWduYXR1cmVWYWxpZGF0aW9uRXJyb3JzLCBkYXRhLkVycm9yTnVtYmVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBNaXNzaW5nRGF0YUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKGRhdGEuRXJyb3JEZXNjcmlwdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY2xpZW50LnNldHVwKENhcmRpbmFsSW5pdGlhbGl6YXRpb25UeXBlLkluaXQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGp3dDogY2xpZW50VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJ1bkJpblByb2Nlc3MoYmluTnVtYmVyOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENsaWVudFNESygpXG4gICAgICAgICAgICAudGhlbigoY2xpZW50KSA9PlxuICAgICAgICAgICAgICAgIGNsaWVudC50cmlnZ2VyKENhcmRpbmFsVHJpZ2dlckV2ZW50cy5CaW5Qcm9jZXNzLCBiaW5OdW1iZXIpLmNhdGNoKG5vb3ApLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0IHx8ICFyZXN1bHQuU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0VGhyZWVEU2VjdXJlRGF0YShcbiAgICAgICAgdGhyZWVEU2VjdXJlRGF0YTogVGhyZWVEc1Jlc3VsdCxcbiAgICAgICAgb3JkZXJEYXRhOiBDYXJkaW5hbE9yZGVyRGF0YSxcbiAgICApOiBQcm9taXNlPFRocmVlRFNlY3VyZVRva2VuPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRDbGllbnRTREsoKS50aGVuKChjbGllbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxUaHJlZURTZWN1cmVUb2tlbj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsaWVudC5vbihcbiAgICAgICAgICAgICAgICAgICAgQ2FyZGluYWxFdmVudFR5cGUuVmFsaWRhdGVkLFxuICAgICAgICAgICAgICAgICAgICAoZGF0YTogQ2FyZGluYWxWYWxpZGF0ZWREYXRhLCBqd3Q/OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudC5vZmYoQ2FyZGluYWxFdmVudFR5cGUuVmFsaWRhdGVkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFqd3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5FcnJvckRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBkYXRhLkVycm9yRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdBbiBlcnJvciB3YXMgZW5jb3VudGVyZWQgd2hpbGUgcHJvY2Vzc2luZyB0aGUgdHJhbnNhY3Rpb24uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEuQWN0aW9uQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgdG9rZW46IGp3dCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkYXRhLkFjdGlvbkNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENhcmRpbmFsVmFsaWRhdGVkQWN0aW9uLlN1Y2Nlc3M6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgdG9rZW46IGp3dCB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ2FyZGluYWxWYWxpZGF0ZWRBY3Rpb24uTm9BY3Rpb246XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLkVycm9yTnVtYmVyID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKGRhdGEuRXJyb3JEZXNjcmlwdGlvbiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWRhdGEuUGF5bWVudCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWRhdGEuUGF5bWVudC5FeHRlbmRlZERhdGEgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuUGF5bWVudC5FeHRlbmRlZERhdGEuU2lnbmF0dXJlVmVyaWZpY2F0aW9uICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhcmRpbmFsU2lnbmF0dXJlVmVyaWZpY2F0aW9uLlllc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1RyYW5zYWN0aW9uIHNpZ25hdHVyZSBjb3VsZCBub3QgYmUgdmFsaWRhdGVkLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHRva2VuOiBqd3QgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENhcmRpbmFsVmFsaWRhdGVkQWN0aW9uLkZhaWx1cmU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVc2VyIGZhaWxlZCBhdXRoZW50aWNhdGlvbiBvciBhbiBlcnJvciB3YXMgZW5jb3VudGVyZWQgd2hpbGUgcHJvY2Vzc2luZyB0aGUgdHJhbnNhY3Rpb24uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENhcmRpbmFsVmFsaWRhdGVkQWN0aW9uLkVycm9yOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoZGF0YS5FcnJvckRlc2NyaXB0aW9uKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRpbnVlT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgICAgICBBY3NVcmw6IHRocmVlRFNlY3VyZURhdGEuYWNzX3VybCxcbiAgICAgICAgICAgICAgICAgICAgUGF5bG9hZDogdGhyZWVEU2VjdXJlRGF0YS5tZXJjaGFudF9kYXRhLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0aWFsT3JkZXIgPSB0aGlzLl9tYXBUb1BhcnRpYWxPcmRlcihcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJEYXRhLFxuICAgICAgICAgICAgICAgICAgICB0aHJlZURTZWN1cmVEYXRhLnBheWVyX2F1dGhfcmVxdWVzdCxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY2xpZW50LmNvbnRpbnVlKENhcmRpbmFsUGF5bWVudEJyYW5kLkNDQSwgY29udGludWVPYmplY3QsIHBhcnRpYWxPcmRlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbWFwVG9QYXJ0aWFsT3JkZXIoXG4gICAgICAgIG9yZGVyRGF0YTogQ2FyZGluYWxPcmRlckRhdGEsXG4gICAgICAgIHRyYW5zYWN0aW9uSWQ6IHN0cmluZyxcbiAgICApOiBDYXJkaW5hbFBhcnRpYWxPcmRlciB7XG4gICAgICAgIGNvbnN0IGNvbnN1bWVyOiBDYXJkaW5hbENvbnN1bWVyID0ge1xuICAgICAgICAgICAgQmlsbGluZ0FkZHJlc3M6IHRoaXMuX21hcFRvQ2FyZGluYWxBZGRyZXNzKG9yZGVyRGF0YS5iaWxsaW5nQWRkcmVzcyksXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG9yZGVyRGF0YS5wYXltZW50RGF0YSkge1xuICAgICAgICAgICAgY29uc3VtZXIuQWNjb3VudCA9IHRoaXMuX21hcFRvQ2FyZGluYWxBY2NvdW50KG9yZGVyRGF0YS5wYXltZW50RGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3JkZXJEYXRhLmJpbGxpbmdBZGRyZXNzLmVtYWlsKSB7XG4gICAgICAgICAgICBjb25zdW1lci5FbWFpbDEgPSBvcmRlckRhdGEuYmlsbGluZ0FkZHJlc3MuZW1haWw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3JkZXJEYXRhLnNoaXBwaW5nQWRkcmVzcykge1xuICAgICAgICAgICAgY29uc3VtZXIuU2hpcHBpbmdBZGRyZXNzID0gdGhpcy5fbWFwVG9DYXJkaW5hbEFkZHJlc3Mob3JkZXJEYXRhLnNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgQ29uc3VtZXI6IGNvbnN1bWVyLFxuICAgICAgICAgICAgT3JkZXJEZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgT3JkZXJOdW1iZXI6IG9yZGVyRGF0YS5pZCxcbiAgICAgICAgICAgICAgICBBbW91bnQ6IG9yZGVyRGF0YS5hbW91bnQsXG4gICAgICAgICAgICAgICAgQ3VycmVuY3lDb2RlOiBvcmRlckRhdGEuY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIE9yZGVyQ2hhbm5lbDogJ1MnLFxuICAgICAgICAgICAgICAgIFRyYW5zYWN0aW9uSWQ6IHRyYW5zYWN0aW9uSWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgX21hcFRvQ2FyZGluYWxBY2NvdW50KHBheW1lbnREYXRhOiBDcmVkaXRDYXJkSW5zdHJ1bWVudCk6IENhcmRpbmFsQWNjb3VudCB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBBY2NvdW50TnVtYmVyOiBOdW1iZXIocGF5bWVudERhdGEuY2NOdW1iZXIpLFxuICAgICAgICAgICAgRXhwaXJhdGlvbk1vbnRoOiBOdW1iZXIocGF5bWVudERhdGEuY2NFeHBpcnkubW9udGgpLFxuICAgICAgICAgICAgRXhwaXJhdGlvblllYXI6IE51bWJlcihwYXltZW50RGF0YS5jY0V4cGlyeS55ZWFyKSxcbiAgICAgICAgICAgIE5hbWVPbkFjY291bnQ6IHBheW1lbnREYXRhLmNjTmFtZSxcbiAgICAgICAgICAgIENhcmRDb2RlOiBOdW1iZXIocGF5bWVudERhdGEuY2NDdnYpLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgX21hcFRvQ2FyZGluYWxBZGRyZXNzKGFkZHJlc3M6IEFkZHJlc3MpOiBDYXJkaW5hbEFkZHJlc3Mge1xuICAgICAgICBjb25zdCBjYXJkaW5hbEFkZHJlc3M6IENhcmRpbmFsQWRkcmVzcyA9IHtcbiAgICAgICAgICAgIEZpcnN0TmFtZTogYWRkcmVzcy5maXJzdE5hbWUsXG4gICAgICAgICAgICBMYXN0TmFtZTogYWRkcmVzcy5sYXN0TmFtZSxcbiAgICAgICAgICAgIEFkZHJlc3MxOiBhZGRyZXNzLmFkZHJlc3MxLFxuICAgICAgICAgICAgQ2l0eTogYWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgU3RhdGU6IGFkZHJlc3Muc3RhdGVPclByb3ZpbmNlLFxuICAgICAgICAgICAgUG9zdGFsQ29kZTogYWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgQ291bnRyeUNvZGU6IGFkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGFkZHJlc3MuYWRkcmVzczIpIHtcbiAgICAgICAgICAgIGNhcmRpbmFsQWRkcmVzcy5BZGRyZXNzMiA9IGFkZHJlc3MuYWRkcmVzczI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWRkcmVzcy5waG9uZSkge1xuICAgICAgICAgICAgY2FyZGluYWxBZGRyZXNzLlBob25lMSA9IGFkZHJlc3MucGhvbmU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2FyZGluYWxBZGRyZXNzO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldENsaWVudFNESygpOiBQcm9taXNlPENhcmRpbmFsU0RLPiB7XG4gICAgICAgIGlmICghdGhpcy5fc2RrKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3NkaztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBmYWlsc1xuICogdG8gbG9hZCwgb3IgZm9yIHNvbWUgcmVhc29uLCBpdCBpcyBpbmFjY2Vzc2libGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IENhcmRpbmFsU0RLLCBDYXJkaW5hbFdpbmRvdyB9IGZyb20gJy4vY2FyZGluYWwnO1xuXG5jb25zdCBTREtfVEVTVF9VUkwgPSAnaHR0cHM6Ly9zb25nYmlyZHN0YWcuY2FyZGluYWxjb21tZXJjZS5jb20vZWRnZS92MS9zb25nYmlyZC5qcyc7XG5jb25zdCBTREtfUFJPRF9VUkwgPSAnaHR0cHM6Ly9zb25nYmlyZC5jYXJkaW5hbGNvbW1lcmNlLmNvbS9lZGdlL3YxL3NvbmdiaXJkLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZGluYWxTY3JpcHRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX3NjcmlwdExvYWRlcjogU2NyaXB0TG9hZGVyLCBwcml2YXRlIF93aW5kb3c6IENhcmRpbmFsV2luZG93ID0gd2luZG93KSB7fVxuXG4gICAgbG9hZChwcm92aWRlcjogc3RyaW5nLCB0ZXN0TW9kZT86IGJvb2xlYW4pOiBQcm9taXNlPENhcmRpbmFsU0RLPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IHRlc3RNb2RlID8gU0RLX1RFU1RfVVJMIDogU0RLX1BST0RfVVJMO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChgJHt1cmx9P3Y9JHtwcm92aWRlcn1gKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fd2luZG93LkNhcmRpbmFsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93aW5kb3cuQ2FyZGluYWw7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIGNvbnNvbGUubG9nKCdyZXNvbHZlSWRzJywgcmVzb2x2ZUlkcyk7XG5cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2R1bGUsIHsgcmVzb2x2ZUlkcyB9KTtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgbWV0aG9kIGlzIHVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlXG4gKiBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIGFyZ3VtZW50cyBhY2NvcmRpbmcgdG8gdGhlaXIgcmVxdWlyZW1lbnRzLFxuICogaS5lLjogaWYgYW4gYXJndW1lbnQgaXMgbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52YWxpZEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0ludmFsaWQgYXJndW1lbnRzIGhhdmUgYmVlbiBwcm92aWRlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnSW52YWxpZEFyZ3VtZW50RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnaW52YWxpZF9hcmd1bWVudCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IEludmFsaWRBcmd1bWVudEVycm9yIGZyb20gJy4vaW52YWxpZC1hcmd1bWVudC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gd2UgYXJlIHVuYWJsZSB0byBzdWJtaXQgYSBwYXltZW50IGJlY2F1c2VcbiAqIHRoZSBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcywgaS5lLjogaWYgYW4gYXJndW1lbnQgaXNcbiAqIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciBleHRlbmRzIEludmFsaWRBcmd1bWVudEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihpbnZhbGlkRmllbGRzPzogc3RyaW5nW10pIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGZvciB0aGUgb3JkZXIgYmVjYXVzZSB0aGUgcGF5bG9hZCBpcyBpbnZhbGlkLic7XG5cbiAgICAgICAgaWYgKGludmFsaWRGaWVsZHMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtpbnZhbGlkRmllbGRzLmpvaW4oXG4gICAgICAgICAgICAgICAgJywgJyxcbiAgICAgICAgICAgICl9LmA7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc05pbCwgdmFsdWVzIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBIb3N0ZWRGb3JtLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBXaXRoQ3JlZGl0Q2FyZFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyB9IGZyb20gJy4vY3JlZGl0LWNhcmQtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcm90ZWN0ZWQgX2hvc3RlZEZvcm0/OiBIb3N0ZWRGb3JtO1xuICAgIHByb3RlY3RlZCBfc2hvdWxkUmVuZGVySG9zdGVkRm9ybT86IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpIHt9XG5cbiAgICBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKFxuICAgICAgICAgICAgcGF5bG9hZC5wYXltZW50Py5tZXRob2RJZCxcbiAgICAgICAgICAgIHBheWxvYWQucGF5bWVudD8uZ2F0ZXdheUlkLFxuICAgICAgICApICYmIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm1cbiAgICAgICAgICAgID8gdGhpcy5fZXhlY3V0ZVdpdGhIb3N0ZWRGb3JtKHBheWxvYWQsIG9wdGlvbnMpXG4gICAgICAgICAgICA6IHRoaXMuX2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybShwYXlsb2FkLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aENyZWRpdENhcmRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICF0aGlzLl9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChvcHRpb25zPy5tZXRob2RJZCwgb3B0aW9ucz8uZ2F0ZXdheUlkKSB8fFxuICAgICAgICAgICAgIXRoaXMuX2lzSG9zdGVkRmllbGRBdmFpbGFibGUob3B0aW9ucylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvcm1PcHRpb25zID0gb3B0aW9ucyAmJiBvcHRpb25zLmNyZWRpdENhcmQgJiYgb3B0aW9ucy5jcmVkaXRDYXJkLmZvcm07XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRTZXR0aW5nczogeyBiaWdwYXlCYXNlVXJsOiBob3N0ID0gJycgfSA9IHt9IH0gPVxuICAgICAgICAgICAgc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFmb3JtT3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmb3JtID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVIb3N0ZWRGb3JtKGhvc3QsIGZvcm1PcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gZm9ybS5hdHRhY2goKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm0gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybSA9IGZvcm07XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5faG9zdGVkRm9ybSkge1xuICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybS5kZXRhY2goKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIF9leGVjdXRlV2l0aG91dEhvc3RlZEZvcm0oXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0gcGF5bWVudCAmJiBwYXltZW50LnBheW1lbnREYXRhO1xuXG4gICAgICAgIGlmICghcGF5bWVudCB8fCAhcGF5bWVudERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50LnBheW1lbnREYXRhJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHsgLi4ucGF5bWVudCwgcGF5bWVudERhdGEgfSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIF9leGVjdXRlV2l0aEhvc3RlZEZvcm0oXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9ob3N0ZWRGb3JtO1xuXG4gICAgICAgIGlmICghZm9ybSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5bWVudCB8fCAhcGF5bWVudC5tZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQubWV0aG9kSWQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBhd2FpdCBmb3JtLnZhbGlkYXRlKCkudGhlbigoKSA9PiBmb3JtLnN1Ym1pdChwYXltZW50KSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIF9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChtZXRob2RJZD86IHN0cmluZywgZ2F0ZXdheUlkPzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQsIGdhdGV3YXlJZCk7XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRNZXRob2QuY29uZmlnLmlzSG9zdGVkRm9ybUVuYWJsZWQgPT09IHRydWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNIb3N0ZWRGaWVsZEF2YWlsYWJsZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhDcmVkaXRDYXJkUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIXZhbHVlcyhvcHRpb25zICYmIG9wdGlvbnMuY3JlZGl0Q2FyZCAmJiBvcHRpb25zLmNyZWRpdENhcmQuZm9ybS5maWVsZHMpLmV2ZXJ5KFxuICAgICAgICAgICAgaXNOaWwsXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9jYXJkaW5hbC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQgeyBDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9jcmVkaXQtY2FyZC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3liZXJTb3VyY2VQYXltZW50U3RyYXRlZ3kgZXh0ZW5kcyBDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgX3RocmVlRFNlY3VyZUZsb3c6IENhcmRpbmFsVGhyZWVEU2VjdXJlRmxvdyxcbiAgICApIHtcbiAgICAgICAgc3VwZXIoX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpO1xuICAgIH1cblxuICAgIGFzeW5jIGluaXRpYWxpemUob3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUob3B0aW9ucyk7XG5cbiAgICAgICAgY29uc3QgeyBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyB9ID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cob3B0aW9ucy5tZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKHBheW1lbnRNZXRob2QuY29uZmlnLmlzM2RzRW5hYmxlZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fdGhyZWVEU2VjdXJlRmxvdy5wcmVwYXJlKHBheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudDogeyBtZXRob2RJZCA9ICcnIH0gPSB7fSB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgeyBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyB9ID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmIChwYXltZW50TWV0aG9kLmNvbmZpZy5pczNkc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aHJlZURTZWN1cmVGbG93LnN0YXJ0KFxuICAgICAgICAgICAgICAgIHN1cGVyLmV4ZWN1dGUuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZShwYXlsb2FkLCBvcHRpb25zKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgQ2FyZGluYWxDbGllbnQsXG4gICAgQ2FyZGluYWxTY3JpcHRMb2FkZXIsXG4gICAgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2NhcmRpbmFsLWludGVncmF0aW9uJztcbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQ3liZXJTb3VyY2VQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9jeWJlcnNvdXJjZS1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQ3liZXJTb3VyY2VQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8Q3liZXJTb3VyY2VQYXltZW50U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICByZXR1cm4gbmV3IEN5YmVyU291cmNlUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBuZXcgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93KFxuICAgICAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgICAgIG5ldyBDYXJkaW5hbENsaWVudChuZXcgQ2FyZGluYWxTY3JpcHRMb2FkZXIoZ2V0U2NyaXB0TG9hZGVyKCkpKSxcbiAgICAgICAgKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUN5YmVyU291cmNlUGF5bWVudFN0cmF0ZWd5LCBbeyBpZDogJ2N5YmVyc291cmNlJyB9XSk7XG4iLCJpbXBvcnQgeyBtZXJnZSwgc29tZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgSG9zdGVkRm9ybSxcbiAgICBpc0NyZWRpdENhcmRJbnN0cnVtZW50LFxuICAgIGlzUmVxdWVzdEVycm9yLFxuICAgIGlzVmF1bHRlZEluc3RydW1lbnQsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBDYXJkaW5hbFRocmVlRFNlY3VyZVRva2VuIH0gZnJvbSAnLi9jYXJkaW5hbCc7XG5pbXBvcnQgQ2FyZGluYWxDbGllbnQsIHsgQ2FyZGluYWxPcmRlckRhdGEgfSBmcm9tICcuL2NhcmRpbmFsLWNsaWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmRpbmFsVGhyZWVEU2VjdXJlRmxvd1YyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBfcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBfY2FyZGluYWxDbGllbnQ6IENhcmRpbmFsQ2xpZW50LFxuICAgICkge31cblxuICAgIGFzeW5jIHByZXBhcmUobWV0aG9kOiBQYXltZW50TWV0aG9kKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuX2NhcmRpbmFsQ2xpZW50LmxvYWQobWV0aG9kLmlkLCBtZXRob2QuY29uZmlnLnRlc3RNb2RlKTtcbiAgICB9XG5cbiAgICBhc3luYyBzdGFydChcbiAgICAgICAgZXhlY3V0ZTogUGF5bWVudFN0cmF0ZWd5WydleGVjdXRlJ10sXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgICAgIGhvc3RlZEZvcm0/OiBIb3N0ZWRGb3JtLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGdldENhcmRJbnN0cnVtZW50IH0gPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCA9IHsgbWV0aG9kSWQ6ICcnIH0gfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudERhdGEgPSB7fSB9ID0gcGF5bWVudDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGUocGF5bG9hZCwgb3B0aW9ucyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoaXNSZXF1ZXN0RXJyb3IoZXJyb3IpICYmIGVycm9yLmJvZHk/LnN0YXR1cyA9PT0gJ2FkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuID0gZXJyb3IuYm9keS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZD8uZGF0YT8udG9rZW47XG4gICAgICAgICAgICAgICAgY29uc3QgeGlkID0gZXJyb3IuYm9keS50aHJlZV9kc19yZXN1bHQ/LnBheWVyX2F1dGhfcmVxdWVzdDtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX2NhcmRpbmFsQ2xpZW50LmNvbmZpZ3VyZSh0b2tlbik7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBiaW4gPSB0aGlzLl9nZXRCaW4ocGF5bWVudERhdGEsIGdldENhcmRJbnN0cnVtZW50LCBob3N0ZWRGb3JtKTtcblxuICAgICAgICAgICAgICAgIGlmIChiaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fY2FyZGluYWxDbGllbnQucnVuQmluUHJvY2VzcyhiaW4pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9zdWJtaXRQYXltZW50KHBheW1lbnQsIHsgeGlkIH0sIGhvc3RlZEZvcm0pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1JlcXVlc3RFcnJvcihlcnIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzb21lKGVyci5ib2R5LmVycm9ycywgeyBjb2RlOiAndGhyZWVfZF9zZWN1cmVfcmVxdWlyZWQnIH0pXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGhyZWVEc1Jlc3VsdCA9IGVyci5ib2R5LnRocmVlX2RzX3Jlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRocmVlRHNUb2tlbiA9IHRocmVlRHNSZXN1bHQ/LnBheWVyX2F1dGhfcmVxdWVzdDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fY2FyZGluYWxDbGllbnQuZ2V0VGhyZWVEU2VjdXJlRGF0YShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJlZURzUmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2dldE9yZGVyRGF0YSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1Ym1pdFBheW1lbnQocGF5bWVudCwgeyB0b2tlbjogdGhyZWVEc1Rva2VuIH0sIGhvc3RlZEZvcm0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRPcmRlckRhdGEoKTogQ2FyZGluYWxPcmRlckRhdGEge1xuICAgICAgICBjb25zdCBzdG9yZSA9IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdG9yZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID0gc3RvcmUuZ2V0U2hpcHBpbmdBZGRyZXNzKCk7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNhcnQ6IHtcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogeyBjb2RlOiBjdXJyZW5jeUNvZGUgfSxcbiAgICAgICAgICAgICAgICBjYXJ0QW1vdW50OiBhbW91bnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9ID0gc3RvcmUuZ2V0Q2hlY2tvdXRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGlkID0gc3RvcmUuZ2V0T3JkZXJPclRocm93KCkub3JkZXJJZC50b1N0cmluZygpO1xuXG4gICAgICAgIHJldHVybiB7IGJpbGxpbmdBZGRyZXNzLCBzaGlwcGluZ0FkZHJlc3MsIGN1cnJlbmN5Q29kZSwgaWQsIGFtb3VudCB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX3N1Ym1pdFBheW1lbnQoXG4gICAgICAgIHBheW1lbnQ6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5LFxuICAgICAgICB0aHJlZURTZWN1cmU6IENhcmRpbmFsVGhyZWVEU2VjdXJlVG9rZW4sXG4gICAgICAgIGhvc3RlZEZvcm0/OiBIb3N0ZWRGb3JtLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IG1lcmdlKHt9LCBwYXltZW50LCB7IHBheW1lbnREYXRhOiB7IHRocmVlRFNlY3VyZSB9IH0pO1xuXG4gICAgICAgIGlmICghaG9zdGVkRm9ybSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IGhvc3RlZEZvcm0/LnN1Ym1pdChwYXltZW50UGF5bG9hZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0QmluKFxuICAgICAgICBwYXltZW50RGF0YTogTm9uTnVsbGFibGU8T3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ10+LFxuICAgICAgICBnZXRDYXJkSW5zdHJ1bWVudDogUGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzWydnZXRDYXJkSW5zdHJ1bWVudCddLFxuICAgICAgICBob3N0ZWRGb3JtPzogSG9zdGVkRm9ybSxcbiAgICApOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBpbnN0cnVtZW50ID1cbiAgICAgICAgICAgIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpICYmIGdldENhcmRJbnN0cnVtZW50KHBheW1lbnREYXRhLmluc3RydW1lbnRJZCk7XG4gICAgICAgIGNvbnN0IGNjTnVtYmVyID0gaXNDcmVkaXRDYXJkSW5zdHJ1bWVudChwYXltZW50RGF0YSkgJiYgcGF5bWVudERhdGEuY2NOdW1iZXI7XG4gICAgICAgIGNvbnN0IGhvc3RlZEZvcm1CaW4gPSBob3N0ZWRGb3JtID8gaG9zdGVkRm9ybS5nZXRCaW4oKSA6IGNjTnVtYmVyO1xuICAgICAgICBjb25zdCBiaW4gPSBpbnN0cnVtZW50ID8gaW5zdHJ1bWVudC5paW4gOiBob3N0ZWRGb3JtQmluO1xuXG4gICAgICAgIHJldHVybiBiaW4gfHwgJyc7XG4gICAgfVxufVxuIiwiaW1wb3J0IGlzVmF1bHRlZEluc3RydW1lbnQgZnJvbSAnLi9pcy12YXVsdGVkLWluc3RydW1lbnQnO1xuaW1wb3J0IHsgQ3JlZGl0Q2FyZEluc3RydW1lbnQgfSBmcm9tICcuL3BheW1lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0NyZWRpdENhcmRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IHVua25vd24sXG4pOiBpbnN0cnVtZW50IGlzIENyZWRpdENhcmRJbnN0cnVtZW50IHtcbiAgICBjb25zdCBjYXJkID0gaW5zdHJ1bWVudCBhcyBDcmVkaXRDYXJkSW5zdHJ1bWVudDtcblxuICAgIHJldHVybiAoXG4gICAgICAgICFpc1ZhdWx0ZWRJbnN0cnVtZW50KGNhcmQpICYmXG4gICAgICAgIHR5cGVvZiBjYXJkLmNjTmFtZSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgdHlwZW9mIGNhcmQuY2NOdW1iZXIgPT09ICdzdHJpbmcnICYmXG4gICAgICAgIHR5cGVvZiBjYXJkLmNjRXhwaXJ5ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB0eXBlb2YgY2FyZC5jY0V4cGlyeS5tb250aCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgdHlwZW9mIGNhcmQuY2NFeHBpcnkueWVhciA9PT0gJ3N0cmluZydcbiAgICApO1xufVxuIiwiaW1wb3J0IHsgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93VjIgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2NhcmRpbmFsLWludGVncmF0aW9uJztcbmltcG9ydCB7IENyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2NyZWRpdC1jYXJkLWludGVncmF0aW9uJztcbmltcG9ydCB7XG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDeWJlclNvdXJjZVYyUGF5bWVudFN0cmF0ZWd5IGV4dGVuZHMgQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIF9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIF90aHJlZURTZWN1cmVGbG93OiBDYXJkaW5hbFRocmVlRFNlY3VyZUZsb3dWMixcbiAgICApIHtcbiAgICAgICAgc3VwZXIoX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpO1xuICAgIH1cblxuICAgIGFzeW5jIGluaXRpYWxpemUob3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUob3B0aW9ucyk7XG5cbiAgICAgICAgY29uc3QgeyBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyB9ID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cob3B0aW9ucy5tZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKHBheW1lbnRNZXRob2QuY29uZmlnLmlzM2RzRW5hYmxlZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fdGhyZWVEU2VjdXJlRmxvdy5wcmVwYXJlKHBheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudDogeyBtZXRob2RJZCA9ICcnIH0gPSB7fSB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgeyBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyB9ID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmIChwYXltZW50TWV0aG9kLmNvbmZpZy5pczNkc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aHJlZURTZWN1cmVGbG93LnN0YXJ0KFxuICAgICAgICAgICAgICAgIHN1cGVyLmV4ZWN1dGUuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZShwYXlsb2FkLCBvcHRpb25zKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgQ2FyZGluYWxDbGllbnQsXG4gICAgQ2FyZGluYWxTY3JpcHRMb2FkZXIsXG4gICAgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93VjIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvY2FyZGluYWwtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBDeWJlclNvdXJjZVYyUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vY3liZXJzb3VyY2V2Mi1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQ3liZXJTb3VyY2VWMlBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxDeWJlclNvdXJjZVYyUGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBDeWJlclNvdXJjZVYyUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBuZXcgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93VjIoXG4gICAgICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgbmV3IENhcmRpbmFsQ2xpZW50KG5ldyBDYXJkaW5hbFNjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSkpLFxuICAgICAgICApLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQ3liZXJTb3VyY2VWMlBheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdjeWJlcnNvdXJjZXYyJyB9LFxuICAgIHsgaWQ6ICdibnonIH0sXG4gICAgeyBpZDogJ2JhcmNsYXlzJyB9LFxuXSk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImlzVmF1bHRlZEluc3RydW1lbnQiLCJpbnN0cnVtZW50IiwiQm9vbGVhbiIsImluc3RydW1lbnRJZCIsImQiLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZXJyb3IiLCJNaXNzaW5nRGF0YUVycm9yVHlwZSIsIk5vdEluaXRpYWxpemVkRXJyb3JUeXBlIiwiQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93IiwiY29uc3RydWN0b3IiLCJfcGF5bWVudEludGVncmF0aW9uU2VydmljZSIsIl9jYXJkaW5hbENsaWVudCIsInByZXBhcmUiLCJtZXRob2QiLCJ0aGlzIiwibG9hZCIsImlkIiwiY29uZmlnIiwidGVzdE1vZGUiLCJjb25maWd1cmUiLCJfZ2V0Q2xpZW50VG9rZW4iLCJzdGFydCIsImV4ZWN1dGUiLCJwYXlsb2FkIiwib3B0aW9ucyIsImhvc3RlZEZvcm0iLCJnZXRDYXJkSW5zdHJ1bWVudCIsImdldFBheW1lbnRNZXRob2RPclRocm93IiwiZ2V0U3RhdGUiLCJwYXltZW50IiwibWV0aG9kSWQiLCJwYXltZW50RGF0YSIsImJpbiIsImlpbiIsImdldEJpbiIsInJ1bkJpblByb2Nlc3MiLCJtZXJnZSIsInRocmVlRFNlY3VyZSIsInRva2VuIiwiY2xpZW50VG9rZW4iLCJzb21lIiwiYm9keSIsImVycm9ycyIsImNvZGUiLCJnZXRUaHJlZURTZWN1cmVEYXRhIiwidGhyZWVfZHNfcmVzdWx0IiwiX2dldE9yZGVyRGF0YSIsInN1Ym1pdFBheW1lbnQiLCJzdWJtaXQiLCJsb2FkUGF5bWVudE1ldGhvZCIsInN0YXRlIiwiYmlsbGluZ0FkZHJlc3MiLCJnZXRCaWxsaW5nQWRkcmVzc09yVGhyb3ciLCJzaGlwcGluZ0FkZHJlc3MiLCJnZXRTaGlwcGluZ0FkZHJlc3MiLCJjaGVja291dCIsImdldENoZWNrb3V0T3JUaHJvdyIsIm9yZGVyIiwiZ2V0T3JkZXJPclRocm93IiwiY3VycmVuY3lDb2RlIiwiY2FydCIsImN1cnJlbmN5Iiwib3JkZXJJZCIsInRvU3RyaW5nIiwiYW1vdW50IiwiY2FydEFtb3VudCIsIlN0YW5kYXJkRXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJzdXBlciIsIm5hbWUiLCJ0eXBlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJjYXB0dXJlU3RhY2tUcmFjZSIsInN0YWNrIiwiTWlzc2luZ0RhdGFFcnJvciIsInN1YnR5cGUiLCJNaXNzaW5nQmlsbGluZ0FkZHJlc3MiLCJNaXNzaW5nQ2FydCIsIk1pc3NpbmdDb25zaWdubWVudHMiLCJNaXNzaW5nQ2hlY2tvdXQiLCJNaXNzaW5nQ3VzdG9tZXIiLCJNaXNzaW5nQ2hlY2tvdXRDb25maWciLCJNaXNzaW5nT3JkZXJDb25maWciLCJNaXNzaW5nT3JkZXIiLCJNaXNzaW5nT3JkZXJJZCIsIk1pc3NpbmdQYXltZW50IiwiTWlzc2luZ1BheW1lbnRUb2tlbiIsIk1pc3NpbmdQYXltZW50TWV0aG9kIiwiTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyIsImdldEVycm9yTWVzc2FnZSIsIlBheW1lbnRNZXRob2RGYWlsZWRFcnJvciIsIk5vdEluaXRpYWxpemVkRXJyb3IiLCJDdXN0b21lck5vdEluaXRpYWxpemVkIiwiUGF5bWVudE5vdEluaXRpYWxpemVkIiwiU2hpcHBpbmdOb3RJbml0aWFsaXplZCIsIlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQiLCJDYXJkaW5hbFNpZ25hdHVyZVZhbGlkYXRpb25FcnJvcnMiLCJDYXJkaW5hbEV2ZW50VHlwZSIsIkNhcmRpbmFsSW5pdGlhbGl6YXRpb25UeXBlIiwiQ2FyZGluYWxWYWxpZGF0ZWRBY3Rpb24iLCJDYXJkaW5hbFBheW1lbnRUeXBlIiwiQ2FyZGluYWxUcmlnZ2VyRXZlbnRzIiwiQ2FyZGluYWxQYXltZW50QnJhbmQiLCJDYXJkaW5hbFNpZ25hdHVyZVZlcmlmaWNhdGlvbiIsIkNhcmRpbmFsQ2xpZW50IiwiX3NjcmlwdExvYWRlciIsIl9wcm92aWRlciIsIl90ZXN0TW9kZSIsIl9jb25maWd1cmF0aW9uVG9rZW4iLCJwcm92aWRlciIsIl9zZGsiLCJ0aGVuIiwibm9vcCIsIlByb21pc2UiLCJyZXNvbHZlIiwiRGF0ZSIsIm5vdyIsIl9nZXRDbGllbnRTREsiLCJjbGllbnQiLCJyZWplY3QiLCJvbiIsIlNldHVwQ29tcGxldGVkIiwib2ZmIiwiVmFsaWRhdGVkIiwiZGF0YSIsIkFjdGlvbkNvZGUiLCJpbmNsdWRlcyIsIkVycm9yTnVtYmVyIiwiRXJyb3JEZXNjcmlwdGlvbiIsInNldHVwIiwiSW5pdCIsImp3dCIsImJpbk51bWJlciIsInRyaWdnZXIiLCJCaW5Qcm9jZXNzIiwiY2F0Y2giLCJyZXN1bHQiLCJTdGF0dXMiLCJ0aHJlZURTZWN1cmVEYXRhIiwib3JkZXJEYXRhIiwiU3VjY2VzcyIsIk5vQWN0aW9uIiwiUGF5bWVudCIsIkV4dGVuZGVkRGF0YSIsIlNpZ25hdHVyZVZlcmlmaWNhdGlvbiIsIlllcyIsIkZhaWx1cmUiLCJjb250aW51ZU9iamVjdCIsIkFjc1VybCIsImFjc191cmwiLCJQYXlsb2FkIiwibWVyY2hhbnRfZGF0YSIsInBhcnRpYWxPcmRlciIsIl9tYXBUb1BhcnRpYWxPcmRlciIsInBheWVyX2F1dGhfcmVxdWVzdCIsImNvbnRpbnVlIiwiQ0NBIiwidHJhbnNhY3Rpb25JZCIsImNvbnN1bWVyIiwiQmlsbGluZ0FkZHJlc3MiLCJfbWFwVG9DYXJkaW5hbEFkZHJlc3MiLCJBY2NvdW50IiwiX21hcFRvQ2FyZGluYWxBY2NvdW50IiwiZW1haWwiLCJFbWFpbDEiLCJTaGlwcGluZ0FkZHJlc3MiLCJDb25zdW1lciIsIk9yZGVyRGV0YWlscyIsIk9yZGVyTnVtYmVyIiwiQW1vdW50IiwiQ3VycmVuY3lDb2RlIiwiT3JkZXJDaGFubmVsIiwiVHJhbnNhY3Rpb25JZCIsIkFjY291bnROdW1iZXIiLCJOdW1iZXIiLCJjY051bWJlciIsIkV4cGlyYXRpb25Nb250aCIsImNjRXhwaXJ5IiwibW9udGgiLCJFeHBpcmF0aW9uWWVhciIsInllYXIiLCJOYW1lT25BY2NvdW50IiwiY2NOYW1lIiwiQ2FyZENvZGUiLCJjY0N2diIsImFkZHJlc3MiLCJjYXJkaW5hbEFkZHJlc3MiLCJGaXJzdE5hbWUiLCJmaXJzdE5hbWUiLCJMYXN0TmFtZSIsImxhc3ROYW1lIiwiQWRkcmVzczEiLCJhZGRyZXNzMSIsIkNpdHkiLCJjaXR5IiwiU3RhdGUiLCJzdGF0ZU9yUHJvdmluY2UiLCJQb3N0YWxDb2RlIiwicG9zdGFsQ29kZSIsIkNvdW50cnlDb2RlIiwiY291bnRyeUNvZGUiLCJhZGRyZXNzMiIsIkFkZHJlc3MyIiwicGhvbmUiLCJQaG9uZTEiLCJQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciIsIkNhcmRpbmFsU2NyaXB0TG9hZGVyIiwiX3dpbmRvdyIsIndpbmRvdyIsInVybCIsImxvYWRTY3JpcHQiLCJDYXJkaW5hbCIsInRvUmVzb2x2YWJsZU1vZHVsZSIsIm1vZHVsZSIsInJlc29sdmVJZHMiLCJjb25zb2xlIiwibG9nIiwiYXNzaWduIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IiLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiam9pbiIsIkNyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kiLCJfaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQiLCJnYXRld2F5SWQiLCJfc2hvdWxkUmVuZGVySG9zdGVkRm9ybSIsIl9leGVjdXRlV2l0aEhvc3RlZEZvcm0iLCJfZXhlY3V0ZVdpdGhvdXRIb3N0ZWRGb3JtIiwiaW5pdGlhbGl6ZSIsIl9pc0hvc3RlZEZpZWxkQXZhaWxhYmxlIiwiZm9ybU9wdGlvbnMiLCJjcmVkaXRDYXJkIiwiZm9ybSIsInBheW1lbnRTZXR0aW5ncyIsImJpZ3BheUJhc2VVcmwiLCJob3N0IiwiZ2V0U3RvcmVDb25maWdPclRocm93IiwiY3JlYXRlSG9zdGVkRm9ybSIsImF0dGFjaCIsIl9ob3N0ZWRGb3JtIiwiZGVpbml0aWFsaXplIiwiZGV0YWNoIiwiZmluYWxpemUiLCJzdWJtaXRPcmRlciIsInZhbGlkYXRlIiwiaXNIb3N0ZWRGb3JtRW5hYmxlZCIsInZhbHVlcyIsImZpZWxkcyIsImV2ZXJ5IiwiaXNOaWwiLCJDeWJlclNvdXJjZVBheW1lbnRTdHJhdGVneSIsIl90aHJlZURTZWN1cmVGbG93IiwicGF5bWVudE1ldGhvZCIsImlzM2RzRW5hYmxlZCIsImJpbmQiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwiZ2V0U2NyaXB0TG9hZGVyIiwiQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93VjIiLCJzdGF0dXMiLCJhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCIsInhpZCIsIl9nZXRCaW4iLCJfc3VibWl0UGF5bWVudCIsImVyciIsInRocmVlRHNSZXN1bHQiLCJ0aHJlZURzVG9rZW4iLCJzdG9yZSIsInBheW1lbnRQYXlsb2FkIiwiY2FyZCIsImlzQ3JlZGl0Q2FyZEluc3RydW1lbnQiLCJob3N0ZWRGb3JtQmluIiwiQ3liZXJTb3VyY2VWMlBheW1lbnRTdHJhdGVneSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/cybersource.js\n\n}");

/***/ }),

/***/ "../checkout-sdk-js/dist/esm/integrations/sagepay.js":
/*!***********************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/sagepay.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSagePayPaymentStrategy: () => (/* binding */ _)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"../checkout-sdk-js/node_modules/@bigcommerce/form-poster/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nvar r;class s extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class a extends s{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class o extends s{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class d extends a{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(r||(r={}));class c extends s{constructor(e){super(function(e){switch(e){case r.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case r.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case r.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case r.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}var u,l=function(e,t,i,n){return new(i||(i=Promise))(function(r,s){function a(e){try{d(n.next(e))}catch(e){s(e)}}function o(e){try{d(n.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,o)}d((n=n.apply(e,t||[])).next())})},h=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class m{constructor(e){this._paymentIntegrationService=e}execute(e,t){var i,n;return this._isHostedPaymentFormEnabled(null===(i=e.payment)||void 0===i?void 0:i.methodId,null===(n=e.payment)||void 0===n?void 0:n.gatewayId)&&this._shouldRenderHostedForm?this._executeWithHostedForm(e,t):this._executeWithoutHostedForm(e,t)}initialize(e){if(!this._isHostedPaymentFormEnabled(null==e?void 0:e.methodId,null==e?void 0:e.gatewayId)||!this._isHostedFieldAvailable(e))return this._shouldRenderHostedForm=!1,Promise.resolve();const t=e&&e.creditCard&&e.creditCard.form,i=this._paymentIntegrationService.getState(),{paymentSettings:{bigpayBaseUrl:n=\"\"}={}}=i.getStoreConfigOrThrow();if(!t)throw new a;const r=this._paymentIntegrationService.createHostedForm(n,t);return r.attach().then(()=>(this._shouldRenderHostedForm=!0,this._hostedForm=r,Promise.resolve()))}deinitialize(){return this._hostedForm&&this._hostedForm.detach(),Promise.resolve()}finalize(){return Promise.reject(new o)}_executeWithoutHostedForm(e,t){return l(this,void 0,void 0,function*(){const{payment:i}=e,n=h(e,[\"payment\"]),r=i&&i.paymentData;if(!i||!r)throw new d([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(n,t),yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},i),{paymentData:r}))})}_executeWithHostedForm(e,t){return l(this,void 0,void 0,function*(){const{payment:i}=e,n=h(e,[\"payment\"]),s=this._hostedForm;if(!s)throw new c(r.PaymentNotInitialized);if(!i||!i.methodId)throw new d([\"payment.methodId\"]);yield this._paymentIntegrationService.submitOrder(n,t),yield s.validate().then(()=>s.submit(i))})}_isHostedPaymentFormEnabled(e,t){return!!e&&!0===this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t).config.isHostedFormEnabled}_isHostedFieldAvailable(e){return!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.values)(e&&e.creditCard&&e.creditCard.form.fields).every(lodash__WEBPACK_IMPORTED_MODULE_1__.isNil)}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(u||(u={}));class g extends s{constructor(e){super(function(e){switch(e){case u.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case u.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case u.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case u.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case u.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case u.MissingCheckoutConfig:case u.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case u.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case u.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case u.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case u.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case u.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case u.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}function p(){const{navigator:e}=window;let t;return t=e.language?e.language:e.userLanguage,{color_depth:window.screen.colorDepth||24,java_enabled:\"function\"==typeof e.javaEnabled&&e.javaEnabled(),language:t,screen_height:window.screen.height,screen_width:window.screen.width,time_zone_offset:(new Date).getTimezoneOffset().toString()}}var y;!function(e){e.ACKNOWLEDGE=\"ACKNOWLEDGE\",e.FINALIZE=\"FINALIZE\",e.INITIALIZE=\"INITIALIZE\"}(y||(y={}));const b=y;class f extends m{constructor(e,t){super(e),this.paymentIntegrationService=e,this._formPoster=t}execute(e,t){const{payment:n}=e;if(!n)throw new c(r.PaymentNotInitialized);const{paymentData:s}=n;if(!s)throw new g(u.MissingPayment);if(this._isThreeDSTwoExperimentOn()){const t=Object.assign(Object.assign({},s),{browser_info:p()});e.payment&&(e.payment.paymentData=t)}return super.execute(e,t).catch(e=>(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)&&(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"})?new Promise(()=>{let t;t=this._isThreeDSTwoExperimentOn()&&!e.body.three_ds_result.merchant_data?{creq:e.body.three_ds_result.payer_auth_request}:{PaReq:e.body.three_ds_result.payer_auth_request,TermUrl:e.body.three_ds_result.callback_url,MD:e.body.three_ds_result.merchant_data},this._formPoster.postForm(e.body.three_ds_result.acs_url,t,void 0,\"_top\")}):Promise.reject(e))}finalize(e){const t=this.paymentIntegrationService.getState();return t.getOrder()&&t.getPaymentStatus()===b.FINALIZE&&this.paymentIntegrationService.finalizeOrder(e),super.finalize()}_isThreeDSTwoExperimentOn(){return!0===this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features[\"INT-4994.Opayo_3DS2\"]}}const _=(v=t=>new f(t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__.createFormPoster)()),I=[{id:\"sagepay\"}],console.log(\"resolveIds\",I),Object.assign(v,{resolveIds:I}));var v,I;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9zYWdlcGF5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQSxJQ0NZQSxFQ0tHLE1BQWVDLFVBQXNCQyxNQUloRCxXQUFBQyxDQUFZQyxHQ1hELElBQXFDQyxFRFk1Q0MsTUFBTUYsR0FBVyxxQ0FKckIsS0FBQUcsS0FBTyxnQkFDUCxLQUFBQyxLQUFPLFdDVHlDSCxhRGNaQSxVQ2JoQ0ksT0FBT0MsZUFDUEQsT0FBT0MsZURZUUMsS0NaZU4sR0RZZk0sS0NWUkMsVUFBWVAsRURZb0IsbUJBQTVCSCxNQUFNVyxrQkFDYlgsTUFBTVcsa0JBQWtCRixpQkFFeEJBLEtBQUtHLE1BQVEsSUFBSVosTUFBTVMsS0FBS1AsU0FBU1UsS0FFN0MsRUVkVyxNQUFNQyxVQUE2QmQsRUFDOUMsV0FBQUUsQ0FBWUMsR0FDUkUsTUFBTUYsR0FBVyx5Q0FFakJPLEtBQUtKLEtBQU8sdUJBQ1pJLEtBQUtILEtBQU8sa0JBQ2hCLEVDUFcsTUFBTVEsVUFBMENmLEVBQzNELFdBQUFFLEdBQ0lHLE1BQU0sa0VBRU5LLEtBQUtKLEtBQU8sb0NBQ1pJLEtBQUtILEtBQU8saUNBQ2hCLEVDTFcsTUFBTVMsVUFBb0NGLEVBQ3JELFdBQUFaLENBQVllLEdBQ1IsSUFBSWQsRUFBVSx5RUFFVmMsSUFDQWQsRUFBVSxHQUFHQSw0REFBa0VjLEVBQWNDLEtBQ3pGLFVBSVJiLE1BQU1GLEdBRU5PLEtBQUtKLEtBQU8sNkJBQ2hCLEdMbEJKLFNBQVlQLEdBQ1IsbUVBQ0EsdURBQ0EscURBQ0EsdURBQ0Esa0VBQ0gsQ0FORCxDQUFZQSxJQUFBQSxFQUF1QixLQWFwQixNQUFNb0IsVUFBNEJuQixFQUM3QyxXQUFBRSxDQUFtQmtCLEdBQ2ZmLE1BT1IsU0FBeUJFLEdBQ3JCLE9BQVFBLEdBQ0osS0FBS1IsRUFBd0JzQix1QkFDekIsTUFBTyxvRkFFWCxLQUFLdEIsRUFBd0J1QixzQkFDekIsTUFBTyxtRkFFWCxLQUFLdkIsRUFBd0J3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QmpHLE9BQ0FrRyxFQUNBLFVBdEJHdkYsUUFBUWtCLE9BQU9zRCxHQTBCbEMsQ0FFQSxRQUFBdkQsQ0FBUzNCLEdBQ0wsTUFBTWUsRUFBUXBDLEtBQUtpRywwQkFBMEI1RCxXQU83QyxPQU5jRCxFQUFNbUYsWUFFUG5GLEVBQU1vRixxQkFBdUIsRUFBbUJDLFVBQ3pEekgsS0FBS2lHLDBCQUEwQnlCLGNBQWNyRyxHQUcxQzFCLE1BQU1xRCxVQUNqQixDQUVRLHlCQUFBbUQsR0FDSixPQUU2QyxJQUR6Q25HLEtBQUtpRywwQkFBMEI1RCxXQUFXSSx3QkFBd0JrRixpQkFDN0RDLFNBQVMsc0JBRXRCLEVFekZKLE1BTUEsR0NaSUMsRURPQTVCLEdBRU8sSUFBSUQsRUFBdUJDLEVBQTJCNkIsMEVBQUFBLElDUjdEQyxFRFc0RCxDQUFDLENBQUVDLEdBQUksWUNUbkVDLFFBQVFDLElBQUksYUFBY0gsR0FFbkJqSSxPQUFPcUksT0FBT04sRUFBUSxDQUFFRSxnQkFOcEIsSUFDWEYsRUFDQUUsRSIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ib290c3RyYXA/ZmZjYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW5pdGlhbGl6ZWQtZXJyb3IudHM/OGI0ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zdGFuZGFyZC1lcnJvci50cz84YTAzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3NldC1wcm90b3R5cGUtb2YudHM/ODQ1YSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pbnZhbGlkLWFyZ3VtZW50LWVycm9yLnRzPzM5MjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvb3JkZXItZmluYWxpemF0aW9uLW5vdC1yZXF1aXJlZC1lcnJvci50cz9iNWExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL21pc3NpbmctZGF0YS1lcnJvci50cz9iN2RjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jcmVkaXQtY2FyZC1pbnRlZ3JhdGlvbi9zcmMvY3JlZGl0LWNhcmQtcGF5bWVudC1zdHJhdGVneS50cz8yODlmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL2Jyb3dzZXItaW5mby9nZXQtYnJvd3Nlci1pbmZvLnRzPzhiYTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L3BheW1lbnQtc3RhdHVzLXR5cGVzLnRzPzBiODAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3NhZ2VwYXktaW50ZWdyYXRpb24vc3JjL3NhZ2UtcGF5LXBheW1lbnQtc3RyYXRlZ3kudHM/YTY2MSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pcy1yZXF1ZXN0LWVycm9yLnRzP2I0M2QiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3NhZ2VwYXktaW50ZWdyYXRpb24vc3JjL2NyZWF0ZS1zYWdlLXBheS1wYXltZW50LXN0cmF0ZWd5LnRzPzdkM2UiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUge1xuICAgIENoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQsXG4gICAgQ3VzdG9tZXJOb3RJbml0aWFsaXplZCxcbiAgICBQYXltZW50Tm90SW5pdGlhbGl6ZWQsXG4gICAgU2hpcHBpbmdOb3RJbml0aWFsaXplZCxcbiAgICBTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgYSBtZXRob2QgcmVxdWlyZXMgYSBjZXJ0YWluIGluaXRpYWxpemF0aW9uIGNhbGwgdG8gYmVcbiAqIG1hZGUgZmlyc3QuIFNvbWUgb2JqZWN0cyBjYW4gYmUgY29uc3RydWN0ZWQgYnV0IHRoZXkgY2Fubm90IGJlIHVzZWQgdW50aWwgYVxuICogc2VwYXJhdGUgaW5pdGlhbGl6YXRpb24gY2FsbCBpcyBtYWRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RJbml0aWFsaXplZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdEluaXRpYWxpemVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm90X2luaXRpYWxpemVkJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuQ3VzdG9tZXJOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY3VzdG9tZXIgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgc2hpcHBpbmcgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNoZWNrb3V0IHNwYW0gcHJvdGVjdGlvbiBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBjb21wb25lbnQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IEN1c3RvbUVycm9yIGZyb20gJy4vY3VzdG9tLWVycm9yJztcbmltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tICcuL3NldC1wcm90b3R5cGUtb2YnO1xuXG4vKipcbiAqIFRoaXMgZXJyb3IgdHlwZSBzaG91bGQgbm90IGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LiBJdCBpcyBhIGJhc2UgY2xhc3MgZm9yXG4gKiBhbGwgY3VzdG9tIGVycm9ycyB0aHJvd24gaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBDdXN0b21FcnJvciB7XG4gICAgbmFtZSA9ICdTdGFuZGFyZEVycm9yJztcbiAgICB0eXBlID0gJ3N0YW5kYXJkJztcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIG5ldy50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpLnN0YWNrO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0UHJvdG90eXBlT2Yob2JqZWN0OiBhbnksIHByb3RvdHlwZTogb2JqZWN0KSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqZWN0LCBwcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgbWV0aG9kIGlzIHVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlXG4gKiBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIGFyZ3VtZW50cyBhY2NvcmRpbmcgdG8gdGhlaXIgcmVxdWlyZW1lbnRzLFxuICogaS5lLjogaWYgYW4gYXJndW1lbnQgaXMgbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52YWxpZEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0ludmFsaWQgYXJndW1lbnRzIGhhdmUgYmVlbiBwcm92aWRlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnSW52YWxpZEFyZ3VtZW50RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnaW52YWxpZF9hcmd1bWVudCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IEludmFsaWRBcmd1bWVudEVycm9yIGZyb20gJy4vaW52YWxpZC1hcmd1bWVudC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gd2UgYXJlIHVuYWJsZSB0byBzdWJtaXQgYSBwYXltZW50IGJlY2F1c2VcbiAqIHRoZSBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcywgaS5lLjogaWYgYW4gYXJndW1lbnQgaXNcbiAqIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciBleHRlbmRzIEludmFsaWRBcmd1bWVudEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihpbnZhbGlkRmllbGRzPzogc3RyaW5nW10pIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGZvciB0aGUgb3JkZXIgYmVjYXVzZSB0aGUgcGF5bG9hZCBpcyBpbnZhbGlkLic7XG5cbiAgICAgICAgaWYgKGludmFsaWRGaWVsZHMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtpbnZhbGlkRmllbGRzLmpvaW4oXG4gICAgICAgICAgICAgICAgJywgJyxcbiAgICAgICAgICAgICl9LmA7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTWlzc2luZ0RhdGFFcnJvclR5cGUge1xuICAgIE1pc3NpbmdCaWxsaW5nQWRkcmVzcyxcbiAgICBNaXNzaW5nQ2FydCxcbiAgICBNaXNzaW5nQ2hlY2tvdXQsXG4gICAgTWlzc2luZ0NvbnNpZ25tZW50cyxcbiAgICBNaXNzaW5nQ3VzdG9tZXIsXG4gICAgTWlzc2luZ0NoZWNrb3V0Q29uZmlnLFxuICAgIE1pc3NpbmdPcmRlcixcbiAgICBNaXNzaW5nT3JkZXJDb25maWcsXG4gICAgTWlzc2luZ09yZGVySWQsXG4gICAgTWlzc2luZ1BheW1lbnQsXG4gICAgTWlzc2luZ1BheW1lbnRJZCxcbiAgICBNaXNzaW5nUGF5bWVudEluc3RydW1lbnQsXG4gICAgTWlzc2luZ1BheW1lbnRNZXRob2QsXG4gICAgTWlzc2luZ1BheW1lbnRSZWRpcmVjdFVybCxcbiAgICBNaXNzaW5nUGF5bWVudFN0YXR1cyxcbiAgICBNaXNzaW5nUGF5bWVudFRva2VuLFxuICAgIE1pc3NpbmdTaGlwcGluZ0FkZHJlc3MsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciB3aGVuIGRhdGEgdGhhdCBpcyBleHBlY3RlZCB0byBleGlzdCBpcyBtaXNzaW5nLiBVc3VhbGx5IGl0XG4gKiBpcyBkdWUgdG8gdGhlIGZhY3QgdGhhdCBjZXJ0YWluIGRhdGEgaGFzIG5vdCBiZWVuIHJldHJpZXZlZCBmcm9tIG9yIHNhdmVkIHRvXG4gKiB0aGUgc2VydmVyIHlldC4gQW5kIHN1Y2ggZGF0YSBpcyByZXF1aXJlZCB0byBwZXJmb3JtIGNlcnRhaW4gYWN0aW9ucy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlzc2luZ0RhdGFFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdNaXNzaW5nRGF0YUVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ21pc3NpbmdfZGF0YSc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTWlzc2luZ0RhdGFFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdCaWxsaW5nQWRkcmVzczpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBiaWxsaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NhcnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2FydCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ29uc2lnbm1lbnRzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbnNpZ25tZW50cyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2hlY2tvdXQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0N1c3RvbWVyOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGN1c3RvbWVyIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dENvbmZpZzpcbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJDb25maWc6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uZmlndXJhdGlvbiBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgSUQgaXMgdW5hdmFpbGFibGUgb3Igbm90IGdlbmVyYXRlZCB5ZXQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgdG9rZW4gcmVxdWlyZWQgdG8gc3VibWl0IGEgcGF5bWVudCBpcyBtaXNzaW5nLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IG1ldGhvZCBkYXRhIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBwcm9wZXJseSBjb25maWd1cmVkLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nU2hpcHBpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHNoaXBwaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc05pbCwgdmFsdWVzIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBIb3N0ZWRGb3JtLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBXaXRoQ3JlZGl0Q2FyZFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyB9IGZyb20gJy4vY3JlZGl0LWNhcmQtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcm90ZWN0ZWQgX2hvc3RlZEZvcm0/OiBIb3N0ZWRGb3JtO1xuICAgIHByb3RlY3RlZCBfc2hvdWxkUmVuZGVySG9zdGVkRm9ybT86IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpIHt9XG5cbiAgICBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKFxuICAgICAgICAgICAgcGF5bG9hZC5wYXltZW50Py5tZXRob2RJZCxcbiAgICAgICAgICAgIHBheWxvYWQucGF5bWVudD8uZ2F0ZXdheUlkLFxuICAgICAgICApICYmIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm1cbiAgICAgICAgICAgID8gdGhpcy5fZXhlY3V0ZVdpdGhIb3N0ZWRGb3JtKHBheWxvYWQsIG9wdGlvbnMpXG4gICAgICAgICAgICA6IHRoaXMuX2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybShwYXlsb2FkLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aENyZWRpdENhcmRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICF0aGlzLl9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChvcHRpb25zPy5tZXRob2RJZCwgb3B0aW9ucz8uZ2F0ZXdheUlkKSB8fFxuICAgICAgICAgICAgIXRoaXMuX2lzSG9zdGVkRmllbGRBdmFpbGFibGUob3B0aW9ucylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvcm1PcHRpb25zID0gb3B0aW9ucyAmJiBvcHRpb25zLmNyZWRpdENhcmQgJiYgb3B0aW9ucy5jcmVkaXRDYXJkLmZvcm07XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRTZXR0aW5nczogeyBiaWdwYXlCYXNlVXJsOiBob3N0ID0gJycgfSA9IHt9IH0gPVxuICAgICAgICAgICAgc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFmb3JtT3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmb3JtID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVIb3N0ZWRGb3JtKGhvc3QsIGZvcm1PcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gZm9ybS5hdHRhY2goKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm0gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybSA9IGZvcm07XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5faG9zdGVkRm9ybSkge1xuICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybS5kZXRhY2goKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIF9leGVjdXRlV2l0aG91dEhvc3RlZEZvcm0oXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0gcGF5bWVudCAmJiBwYXltZW50LnBheW1lbnREYXRhO1xuXG4gICAgICAgIGlmICghcGF5bWVudCB8fCAhcGF5bWVudERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50LnBheW1lbnREYXRhJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHsgLi4ucGF5bWVudCwgcGF5bWVudERhdGEgfSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIF9leGVjdXRlV2l0aEhvc3RlZEZvcm0oXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9ob3N0ZWRGb3JtO1xuXG4gICAgICAgIGlmICghZm9ybSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5bWVudCB8fCAhcGF5bWVudC5tZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQubWV0aG9kSWQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBhd2FpdCBmb3JtLnZhbGlkYXRlKCkudGhlbigoKSA9PiBmb3JtLnN1Ym1pdChwYXltZW50KSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIF9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChtZXRob2RJZD86IHN0cmluZywgZ2F0ZXdheUlkPzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQsIGdhdGV3YXlJZCk7XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRNZXRob2QuY29uZmlnLmlzSG9zdGVkRm9ybUVuYWJsZWQgPT09IHRydWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNIb3N0ZWRGaWVsZEF2YWlsYWJsZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhDcmVkaXRDYXJkUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIXZhbHVlcyhvcHRpb25zICYmIG9wdGlvbnMuY3JlZGl0Q2FyZCAmJiBvcHRpb25zLmNyZWRpdENhcmQuZm9ybS5maWVsZHMpLmV2ZXJ5KFxuICAgICAgICAgICAgaXNOaWwsXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IEJyb3dzZXJJbmZvIGZyb20gJy4vYnJvd3Nlci1pbmZvJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0QnJvd3NlckluZm8oKTogQnJvd3NlckluZm8ge1xuICAgIGNvbnN0IHsgbmF2aWdhdG9yIH0gPSB3aW5kb3c7XG5cbiAgICBsZXQgbGFuZ3VhZ2U6IHN0cmluZztcblxuICAgIGlmIChuYXZpZ2F0b3IubGFuZ3VhZ2UpIHtcbiAgICAgICAgbGFuZ3VhZ2UgPSBuYXZpZ2F0b3IubGFuZ3VhZ2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGFuZ3VhZ2UgPSAobmF2aWdhdG9yIGFzIGFueSkudXNlckxhbmd1YWdlO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbG9yX2RlcHRoOiB3aW5kb3cuc2NyZWVuLmNvbG9yRGVwdGggfHwgMjQsXG4gICAgICAgIGphdmFfZW5hYmxlZDogdHlwZW9mIG5hdmlnYXRvci5qYXZhRW5hYmxlZCA9PT0gJ2Z1bmN0aW9uJyA/IG5hdmlnYXRvci5qYXZhRW5hYmxlZCgpIDogZmFsc2UsXG4gICAgICAgIGxhbmd1YWdlLFxuICAgICAgICBzY3JlZW5faGVpZ2h0OiB3aW5kb3cuc2NyZWVuLmhlaWdodCxcbiAgICAgICAgc2NyZWVuX3dpZHRoOiB3aW5kb3cuc2NyZWVuLndpZHRoLFxuICAgICAgICB0aW1lX3pvbmVfb2Zmc2V0OiBuZXcgRGF0ZSgpLmdldFRpbWV6b25lT2Zmc2V0KCkudG9TdHJpbmcoKSxcbiAgICB9O1xufVxuIiwiZW51bSBQYXltZW50U3RhdHVzVHlwZXMge1xuICAgIEFDS05PV0xFREdFID0gJ0FDS05PV0xFREdFJyxcbiAgICBGSU5BTElaRSA9ICdGSU5BTElaRScsXG4gICAgSU5JVElBTElaRSA9ICdJTklUSUFMSVpFJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgUGF5bWVudFN0YXR1c1R5cGVzO1xuIiwiaW1wb3J0IHsgRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5pbXBvcnQgeyBzb21lIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHtcbiAgICBnZXRCcm93c2VySW5mbyxcbiAgICBpc1JlcXVlc3RFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RhdHVzVHlwZXMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTYWdlUGF5UGF5bWVudFN0cmF0ZWd5IGV4dGVuZHMgQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBfZm9ybVBvc3RlcjogRm9ybVBvc3RlcixcbiAgICApIHtcbiAgICAgICAgc3VwZXIocGF5bWVudEludGVncmF0aW9uU2VydmljZSk7XG4gICAgfVxuXG4gICAgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCB9ID0gcGF5bG9hZDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IHBheW1lbnREYXRhIH0gPSBwYXltZW50O1xuXG4gICAgICAgIGlmICghcGF5bWVudERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9pc1RocmVlRFNUd29FeHBlcmltZW50T24oKSkge1xuICAgICAgICAgICAgY29uc3QgbmV3UGF5bWVudERhdGEgPSB7XG4gICAgICAgICAgICAgICAgLi4ucGF5bWVudERhdGEsXG4gICAgICAgICAgICAgICAgYnJvd3Nlcl9pbmZvOiBnZXRCcm93c2VySW5mbygpLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHBheWxvYWQucGF5bWVudCkge1xuICAgICAgICAgICAgICAgIHBheWxvYWQucGF5bWVudC5wYXltZW50RGF0YSA9IG5ld1BheW1lbnREYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1cGVyLmV4ZWN1dGUocGF5bG9hZCwgb3B0aW9ucykuY2F0Y2goKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICFpc1JlcXVlc3RFcnJvcihlcnJvcikgfHxcbiAgICAgICAgICAgICAgICAhc29tZShlcnJvci5ib2R5LmVycm9ycywgeyBjb2RlOiAndGhyZWVfZF9zZWN1cmVfcmVxdWlyZWQnIH0pXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBwYXlsb2FkO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzVGhyZWVEU1R3b0V4cGVyaW1lbnRPbigpICYmICFlcnJvci5ib2R5LnRocmVlX2RzX3Jlc3VsdC5tZXJjaGFudF9kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVxOiBlcnJvci5ib2R5LnRocmVlX2RzX3Jlc3VsdC5wYXllcl9hdXRoX3JlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFBhUmVxOiBlcnJvci5ib2R5LnRocmVlX2RzX3Jlc3VsdC5wYXllcl9hdXRoX3JlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXJtVXJsOiBlcnJvci5ib2R5LnRocmVlX2RzX3Jlc3VsdC5jYWxsYmFja191cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICBNRDogZXJyb3IuYm9keS50aHJlZV9kc19yZXN1bHQubWVyY2hhbnRfZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9mb3JtUG9zdGVyLnBvc3RGb3JtKFxuICAgICAgICAgICAgICAgICAgICBlcnJvci5ib2R5LnRocmVlX2RzX3Jlc3VsdC5hY3NfdXJsLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICdfdG9wJyxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZpbmFsaXplKG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBzdGF0ZS5nZXRPcmRlcigpO1xuXG4gICAgICAgIGlmIChvcmRlciAmJiBzdGF0ZS5nZXRQYXltZW50U3RhdHVzKCkgPT09IFBheW1lbnRTdGF0dXNUeXBlcy5GSU5BTElaRSkge1xuICAgICAgICAgICAgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmZpbmFsaXplT3JkZXIob3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VwZXIuZmluYWxpemUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9pc1RocmVlRFNUd29FeHBlcmltZW50T24oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzXG4gICAgICAgICAgICAgICAgLmZlYXR1cmVzWydJTlQtNDk5NC5PcGF5b18zRFMyJ10gPT09IHRydWVcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8vIEhhdmUgdG8gdXNlIGBhc2AgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzM5ODcwNDQvdHlwZWd1YXJkaW5nLWFuLXVua25vd24tbmVzdGVkLW9iamVjdCBzaG91bGQgYmUgZml4ZWQgaW4gNC44K1xuY29uc3QgaXNSZXF1ZXN0RXJyb3IgPSAoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBSZXF1ZXN0RXJyb3IgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdib2R5JyBpbiBlcnJvcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzUmVxdWVzdEVycm9yO1xuIiwiaW1wb3J0IHsgY3JlYXRlRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5cbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgU2FnZVBheVBheW1lbnRTdHJhdGVneSBmcm9tICcuL3NhZ2UtcGF5LXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVTYWdlUGF5UGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFNhZ2VQYXlQYXltZW50U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICByZXR1cm4gbmV3IFNhZ2VQYXlQYXltZW50U3RyYXRlZ3kocGF5bWVudEludGVncmF0aW9uU2VydmljZSwgY3JlYXRlRm9ybVBvc3RlcigpKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVTYWdlUGF5UGF5bWVudFN0cmF0ZWd5LCBbeyBpZDogJ3NhZ2VwYXknIH1dKTtcbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIGNvbnNvbGUubG9nKCdyZXNvbHZlSWRzJywgcmVzb2x2ZUlkcyk7XG5cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2R1bGUsIHsgcmVzb2x2ZUlkcyB9KTtcbn1cbiJdLCJuYW1lcyI6WyJOb3RJbml0aWFsaXplZEVycm9yVHlwZSIsIlN0YW5kYXJkRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInByb3RvdHlwZSIsInN1cGVyIiwibmFtZSIsInR5cGUiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInRoaXMiLCJfX3Byb3RvX18iLCJjYXB0dXJlU3RhY2tUcmFjZSIsInN0YWNrIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IiLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiam9pbiIsIk5vdEluaXRpYWxpemVkRXJyb3IiLCJzdWJ0eXBlIiwiQ3VzdG9tZXJOb3RJbml0aWFsaXplZCIsIlBheW1lbnROb3RJbml0aWFsaXplZCIsIlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQiLCJTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkIiwiZ2V0RXJyb3JNZXNzYWdlIiwiTWlzc2luZ0RhdGFFcnJvclR5cGUiLCJDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IiwiX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJleGVjdXRlIiwicGF5bG9hZCIsIm9wdGlvbnMiLCJfaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQiLCJwYXltZW50IiwibWV0aG9kSWQiLCJnYXRld2F5SWQiLCJfc2hvdWxkUmVuZGVySG9zdGVkRm9ybSIsIl9leGVjdXRlV2l0aEhvc3RlZEZvcm0iLCJfZXhlY3V0ZVdpdGhvdXRIb3N0ZWRGb3JtIiwiaW5pdGlhbGl6ZSIsIl9pc0hvc3RlZEZpZWxkQXZhaWxhYmxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJmb3JtT3B0aW9ucyIsImNyZWRpdENhcmQiLCJmb3JtIiwic3RhdGUiLCJnZXRTdGF0ZSIsInBheW1lbnRTZXR0aW5ncyIsImJpZ3BheUJhc2VVcmwiLCJob3N0IiwiZ2V0U3RvcmVDb25maWdPclRocm93IiwiY3JlYXRlSG9zdGVkRm9ybSIsImF0dGFjaCIsInRoZW4iLCJfaG9zdGVkRm9ybSIsImRlaW5pdGlhbGl6ZSIsImRldGFjaCIsImZpbmFsaXplIiwicmVqZWN0Iiwib3JkZXIiLCJwYXltZW50RGF0YSIsInN1Ym1pdE9yZGVyIiwic3VibWl0UGF5bWVudCIsInZhbGlkYXRlIiwic3VibWl0IiwiZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3ciLCJjb25maWciLCJpc0hvc3RlZEZvcm1FbmFibGVkIiwidmFsdWVzIiwiZmllbGRzIiwiZXZlcnkiLCJpc05pbCIsIk1pc3NpbmdEYXRhRXJyb3IiLCJNaXNzaW5nQmlsbGluZ0FkZHJlc3MiLCJNaXNzaW5nQ2FydCIsIk1pc3NpbmdDb25zaWdubWVudHMiLCJNaXNzaW5nQ2hlY2tvdXQiLCJNaXNzaW5nQ3VzdG9tZXIiLCJNaXNzaW5nQ2hlY2tvdXRDb25maWciLCJNaXNzaW5nT3JkZXJDb25maWciLCJNaXNzaW5nT3JkZXIiLCJNaXNzaW5nT3JkZXJJZCIsIk1pc3NpbmdQYXltZW50IiwiTWlzc2luZ1BheW1lbnRUb2tlbiIsIk1pc3NpbmdQYXltZW50TWV0aG9kIiwiTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyIsImdldEJyb3dzZXJJbmZvIiwibmF2aWdhdG9yIiwid2luZG93IiwibGFuZ3VhZ2UiLCJ1c2VyTGFuZ3VhZ2UiLCJjb2xvcl9kZXB0aCIsInNjcmVlbiIsImNvbG9yRGVwdGgiLCJqYXZhX2VuYWJsZWQiLCJqYXZhRW5hYmxlZCIsInNjcmVlbl9oZWlnaHQiLCJoZWlnaHQiLCJzY3JlZW5fd2lkdGgiLCJ3aWR0aCIsInRpbWVfem9uZV9vZmZzZXQiLCJEYXRlIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJ0b1N0cmluZyIsIlBheW1lbnRTdGF0dXNUeXBlcyIsIlNhZ2VQYXlQYXltZW50U3RyYXRlZ3kiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwiX2Zvcm1Qb3N0ZXIiLCJfaXNUaHJlZURTVHdvRXhwZXJpbWVudE9uIiwibmV3UGF5bWVudERhdGEiLCJicm93c2VyX2luZm8iLCJjYXRjaCIsImVycm9yIiwic29tZSIsImJvZHkiLCJlcnJvcnMiLCJjb2RlIiwidGhyZWVfZHNfcmVzdWx0IiwibWVyY2hhbnRfZGF0YSIsImNyZXEiLCJwYXllcl9hdXRoX3JlcXVlc3QiLCJQYVJlcSIsIlRlcm1VcmwiLCJjYWxsYmFja191cmwiLCJNRCIsInBvc3RGb3JtIiwiYWNzX3VybCIsInVuZGVmaW5lZCIsImdldE9yZGVyIiwiZ2V0UGF5bWVudFN0YXR1cyIsIkZJTkFMSVpFIiwiZmluYWxpemVPcmRlciIsImNoZWNrb3V0U2V0dGluZ3MiLCJmZWF0dXJlcyIsIm1vZHVsZSIsImNyZWF0ZUZvcm1Qb3N0ZXIiLCJyZXNvbHZlSWRzIiwiaWQiLCJjb25zb2xlIiwibG9nIiwiYXNzaWduIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/sagepay.js\n\n}");

/***/ }),

/***/ "./packages/core/src/app/payment/paymentMethod/HostedCreditCardPaymentMethod.tsx":
/*!***************************************************************************************!*\
  !*** ./packages/core/src/app/payment/paymentMethod/HostedCreditCardPaymentMethod.tsx ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_credit_card__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/credit-card */ \"../checkout-sdk-js/dist/esm/integrations/credit-card.js\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_cybersource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/cybersource */ \"../checkout-sdk-js/dist/esm/integrations/cybersource.js\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_sagepay__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/sagepay */ \"../checkout-sdk-js/dist/esm/integrations/sagepay.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _hostedCreditCard__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../hostedCreditCard */ \"./packages/core/src/app/payment/hostedCreditCard/withHostedCreditCardFieldset.tsx\");\n/* harmony import */ var _CreditCardPaymentMethod__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./CreditCardPaymentMethod */ \"./packages/core/src/app/payment/paymentMethod/CreditCardPaymentMethod.tsx\");\n\n\n\n\n\n\n\nconst HostedCreditCardPaymentMethod = (_a) => {\n    var { getHostedFormOptions, getHostedStoredCardValidationFieldset, hostedFieldset, hostedStoredCardValidationSchema, hostedValidationSchema, initializePayment } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"getHostedFormOptions\", \"getHostedStoredCardValidationFieldset\", \"hostedFieldset\", \"hostedStoredCardValidationSchema\", \"hostedValidationSchema\", \"initializePayment\"]);\n    const initializeHostedCreditCardPayment = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)((options, selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        var _a;\n        return initializePayment(Object.assign(Object.assign({}, options), { integrations: [\n                ...(_a = options.integrations) !== null && _a !== void 0 ? _a : [],\n                _bigcommerce_checkout_sdk_integrations_credit_card__WEBPACK_IMPORTED_MODULE_1__.createCreditCardPaymentStrategy,\n                _bigcommerce_checkout_sdk_integrations_cybersource__WEBPACK_IMPORTED_MODULE_2__.createCyberSourcePaymentStrategy,\n                _bigcommerce_checkout_sdk_integrations_cybersource__WEBPACK_IMPORTED_MODULE_2__.createCyberSourceV2PaymentStrategy,\n                _bigcommerce_checkout_sdk_integrations_sagepay__WEBPACK_IMPORTED_MODULE_3__.createSagePayPaymentStrategy,\n            ], creditCard: getHostedFormOptions && {\n                form: yield getHostedFormOptions(selectedInstrument),\n            } }));\n    }), [getHostedFormOptions, initializePayment]);\n    return (react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_CreditCardPaymentMethod__WEBPACK_IMPORTED_MODULE_6__[\"default\"], Object.assign({}, rest, { cardFieldset: hostedFieldset, cardValidationSchema: hostedValidationSchema, getStoredCardValidationFieldset: getHostedStoredCardValidationFieldset, initializePayment: initializeHostedCreditCardPayment, storedCardValidationSchema: hostedStoredCardValidationSchema })));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_hostedCreditCard__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(HostedCreditCardPaymentMethod));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9jb3JlL3NyYy9hcHAvcGF5bWVudC9wYXltZW50TWV0aG9kL0hvc3RlZENyZWRpdENhcmRQYXltZW50TWV0aG9kLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXFHO0FBQ3FDO0FBQzVDO0FBQzNCO0FBS3RDO0FBRTBFO0FBVXZHLE1BQU0sNkJBQTZCLEdBRS9CLENBQUMsRUFRSixFQUFFLEVBQUU7UUFSQSxFQUNELG9CQUFvQixFQUNwQixxQ0FBcUMsRUFDckMsY0FBYyxFQUNkLGdDQUFnQyxFQUNoQyxzQkFBc0IsRUFDdEIsaUJBQWlCLE9BRXBCLEVBRE0sSUFBSSxxREFQTixzS0FRSixDQURVO0lBRVAsTUFBTSxpQ0FBaUMsR0FDbkMsa0RBQVcsQ0FDUCxDQUFPLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxFQUFFLENBQUM7O1FBQ25DLE9BQU8saUJBQWlCLGlDQUNqQixPQUFPLEtBQ1YsWUFBWSxFQUFFO2dCQUNWLEdBQUcsYUFBTyxDQUFDLFlBQVksbUNBQUksRUFBRTtnQkFDN0IsK0dBQStCO2dCQUMvQixnSEFBZ0M7Z0JBQ2hDLGtIQUFrQztnQkFDbEMsd0dBQTRCO2FBQy9CLEVBQ0QsVUFBVSxFQUFFLG9CQUFvQixJQUFJO2dCQUNoQyxJQUFJLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQyxrQkFBa0IsQ0FBQzthQUN2RCxJQUNILENBQUM7SUFDUCxDQUFDLEdBQ0QsQ0FBQyxvQkFBb0IsRUFBRSxpQkFBaUIsQ0FBQyxDQUM1QyxDQUFDO0lBRU4sT0FBTyxDQUNILDJEQUFDLGdFQUF1QixvQkFDaEIsSUFBSSxJQUNSLFlBQVksRUFBRSxjQUFjLEVBQzVCLG9CQUFvQixFQUFFLHNCQUFzQixFQUM1QywrQkFBK0IsRUFBRSxxQ0FBcUMsRUFDdEUsaUJBQWlCLEVBQUUsaUNBQWlDLEVBQ3BELDBCQUEwQixFQUFFLGdDQUFnQyxJQUM5RCxDQUNMLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSw2REFBNEIsQ0FBQyw2QkFBNkIsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9jb3JlL3NyYy9hcHAvcGF5bWVudC9wYXltZW50TWV0aG9kL0hvc3RlZENyZWRpdENhcmRQYXltZW50TWV0aG9kLnRzeD83NzE3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2ludGVncmF0aW9ucy9jcmVkaXQtY2FyZCc7XG5pbXBvcnQgeyBjcmVhdGVDeWJlclNvdXJjZVBheW1lbnRTdHJhdGVneSwgY3JlYXRlQ3liZXJTb3VyY2VWMlBheW1lbnRTdHJhdGVneSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvaW50ZWdyYXRpb25zL2N5YmVyc291cmNlJztcbmltcG9ydCB7IGNyZWF0ZVNhZ2VQYXlQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2ludGVncmF0aW9ucy9zYWdlcGF5JztcbmltcG9ydCBSZWFjdCwgeyB0eXBlIEZ1bmN0aW9uQ29tcG9uZW50LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHtcbiAgICB3aXRoSG9zdGVkQ3JlZGl0Q2FyZEZpZWxkc2V0LFxuICAgIHR5cGUgV2l0aEluamVjdGVkSG9zdGVkQ3JlZGl0Q2FyZEZpZWxkc2V0UHJvcHMsXG59IGZyb20gJy4uL2hvc3RlZENyZWRpdENhcmQnO1xuXG5pbXBvcnQgQ3JlZGl0Q2FyZFBheW1lbnRNZXRob2QsIHsgdHlwZSBDcmVkaXRDYXJkUGF5bWVudE1ldGhvZFByb3BzIH0gZnJvbSAnLi9DcmVkaXRDYXJkUGF5bWVudE1ldGhvZCc7XG5cbmV4cG9ydCB0eXBlIEhvc3RlZENyZWRpdENhcmRQYXltZW50TWV0aG9kUHJvcHMgPSBPbWl0PFxuICAgIENyZWRpdENhcmRQYXltZW50TWV0aG9kUHJvcHMsXG4gICAgfCAnY2FyZEZpZWxkc2V0J1xuICAgIHwgJ2NhcmRWYWxpZGF0aW9uU2NoZW1hJ1xuICAgIHwgJ3N0b3JlZENhcmRWYWxpZGF0aW9uU2NoZW1hJ1xuICAgIHwgJ2dldFN0b3JlZENhcmRWYWxpZGF0aW9uRmllbGRzZXQnXG4+O1xuXG5jb25zdCBIb3N0ZWRDcmVkaXRDYXJkUGF5bWVudE1ldGhvZDogRnVuY3Rpb25Db21wb25lbnQ8XG4gICAgSG9zdGVkQ3JlZGl0Q2FyZFBheW1lbnRNZXRob2RQcm9wcyAmIFdpdGhJbmplY3RlZEhvc3RlZENyZWRpdENhcmRGaWVsZHNldFByb3BzXG4+ID0gKHtcbiAgICBnZXRIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICBnZXRIb3N0ZWRTdG9yZWRDYXJkVmFsaWRhdGlvbkZpZWxkc2V0LFxuICAgIGhvc3RlZEZpZWxkc2V0LFxuICAgIGhvc3RlZFN0b3JlZENhcmRWYWxpZGF0aW9uU2NoZW1hLFxuICAgIGhvc3RlZFZhbGlkYXRpb25TY2hlbWEsXG4gICAgaW5pdGlhbGl6ZVBheW1lbnQsXG4gICAgLi4ucmVzdFxufSkgPT4ge1xuICAgIGNvbnN0IGluaXRpYWxpemVIb3N0ZWRDcmVkaXRDYXJkUGF5bWVudDogQ3JlZGl0Q2FyZFBheW1lbnRNZXRob2RQcm9wc1snaW5pdGlhbGl6ZVBheW1lbnQnXSA9XG4gICAgICAgIHVzZUNhbGxiYWNrKFxuICAgICAgICAgICAgYXN5bmMgKG9wdGlvbnMsIHNlbGVjdGVkSW5zdHJ1bWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbml0aWFsaXplUGF5bWVudCh7XG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucy5pbnRlZ3JhdGlvbnMgPz8gW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5LFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ3liZXJTb3VyY2VQYXltZW50U3RyYXRlZ3ksXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVDeWJlclNvdXJjZVYyUGF5bWVudFN0cmF0ZWd5LFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2FnZVBheVBheW1lbnRTdHJhdGVneSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgY3JlZGl0Q2FyZDogZ2V0SG9zdGVkRm9ybU9wdGlvbnMgJiYge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybTogYXdhaXQgZ2V0SG9zdGVkRm9ybU9wdGlvbnMoc2VsZWN0ZWRJbnN0cnVtZW50KSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbZ2V0SG9zdGVkRm9ybU9wdGlvbnMsIGluaXRpYWxpemVQYXltZW50XSxcbiAgICAgICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxDcmVkaXRDYXJkUGF5bWVudE1ldGhvZFxuICAgICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgICAgICBjYXJkRmllbGRzZXQ9e2hvc3RlZEZpZWxkc2V0fVxuICAgICAgICAgICAgY2FyZFZhbGlkYXRpb25TY2hlbWE9e2hvc3RlZFZhbGlkYXRpb25TY2hlbWF9XG4gICAgICAgICAgICBnZXRTdG9yZWRDYXJkVmFsaWRhdGlvbkZpZWxkc2V0PXtnZXRIb3N0ZWRTdG9yZWRDYXJkVmFsaWRhdGlvbkZpZWxkc2V0fVxuICAgICAgICAgICAgaW5pdGlhbGl6ZVBheW1lbnQ9e2luaXRpYWxpemVIb3N0ZWRDcmVkaXRDYXJkUGF5bWVudH1cbiAgICAgICAgICAgIHN0b3JlZENhcmRWYWxpZGF0aW9uU2NoZW1hPXtob3N0ZWRTdG9yZWRDYXJkVmFsaWRhdGlvblNjaGVtYX1cbiAgICAgICAgLz5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aEhvc3RlZENyZWRpdENhcmRGaWVsZHNldChIb3N0ZWRDcmVkaXRDYXJkUGF5bWVudE1ldGhvZCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/core/src/app/payment/paymentMethod/HostedCreditCardPaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/hosted-credit-card-integration/src/HostedCreditCardPaymentMethod.tsx":
/*!***************************************************************************************!*\
  !*** ./packages/hosted-credit-card-integration/src/HostedCreditCardPaymentMethod.tsx ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components */ \"./packages/hosted-credit-card-integration/src/components/HostedCreditCardComponent.tsx\");\n\n\n\nconst HostedCreditCardPaymentMethod = ({ method, checkoutService, checkoutState, paymentForm, language, onUnhandledError, }) => {\n    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { checkoutService: checkoutService, checkoutState: checkoutState, language: language, method: method, onUnhandledError: onUnhandledError, paymentForm: paymentForm }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(HostedCreditCardPaymentMethod, [\n    {\n        id: 'hosted-credit-card',\n    },\n    { id: 'credit_card', gateway: 'bluesnapdirect' },\n    { id: 'credit_card', gateway: 'checkoutcom' },\n    { id: 'tdonlinemart' },\n]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9ob3N0ZWQtY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24vc3JjL0hvc3RlZENyZWRpdENhcmRQYXltZW50TWV0aG9kLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFzRDtBQU1DO0FBRUU7QUFFekQsTUFBTSw2QkFBNkIsR0FBMEMsQ0FBQyxFQUMxRSxNQUFNLEVBQ04sZUFBZSxFQUNmLGFBQWEsRUFDYixXQUFXLEVBQ1gsUUFBUSxFQUNSLGdCQUFnQixHQUNuQixFQUFFLEVBQUU7SUFDRCxPQUFPLENBQ0gsMkRBQUMsbURBQXlCLElBQ3RCLGVBQWUsRUFBRSxlQUFlLEVBQ2hDLGFBQWEsRUFBRSxhQUFhLEVBQzVCLFFBQVEsRUFBRSxRQUFRLEVBQ2xCLE1BQU0sRUFBRSxNQUFNLEVBQ2QsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQ2xDLFdBQVcsRUFBRSxXQUFXLEdBQzFCLENBQ0wsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLHlGQUFxQixDQUNoQyw2QkFBNkIsRUFDN0I7SUFDSTtRQUNJLEVBQUUsRUFBRSxvQkFBb0I7S0FDM0I7SUFDRCxFQUFFLEVBQUUsRUFBRSxhQUFhLEVBQUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFO0lBQ2hELEVBQUUsRUFBRSxFQUFFLGFBQWEsRUFBRSxPQUFPLEVBQUUsYUFBYSxFQUFFO0lBRTdDLEVBQUUsRUFBRSxFQUFFLGNBQWMsRUFBRTtDQUN6QixDQUNKLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL3BhY2thZ2VzL2hvc3RlZC1jcmVkaXQtY2FyZC1pbnRlZ3JhdGlvbi9zcmMvSG9zdGVkQ3JlZGl0Q2FyZFBheW1lbnRNZXRob2QudHN4PzJkODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7XG4gICAgdHlwZSBQYXltZW50TWV0aG9kUHJvcHMsXG4gICAgdHlwZSBQYXltZW50TWV0aG9kUmVzb2x2ZUlkLFxuICAgIHRvUmVzb2x2YWJsZUNvbXBvbmVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgSG9zdGVkQ3JlZGl0Q2FyZENvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cyc7XG5cbmNvbnN0IEhvc3RlZENyZWRpdENhcmRQYXltZW50TWV0aG9kOiBGdW5jdGlvbkNvbXBvbmVudDxQYXltZW50TWV0aG9kUHJvcHM+ID0gKHtcbiAgICBtZXRob2QsXG4gICAgY2hlY2tvdXRTZXJ2aWNlLFxuICAgIGNoZWNrb3V0U3RhdGUsXG4gICAgcGF5bWVudEZvcm0sXG4gICAgbGFuZ3VhZ2UsXG4gICAgb25VbmhhbmRsZWRFcnJvcixcbn0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8SG9zdGVkQ3JlZGl0Q2FyZENvbXBvbmVudFxuICAgICAgICAgICAgY2hlY2tvdXRTZXJ2aWNlPXtjaGVja291dFNlcnZpY2V9XG4gICAgICAgICAgICBjaGVja291dFN0YXRlPXtjaGVja291dFN0YXRlfVxuICAgICAgICAgICAgbGFuZ3VhZ2U9e2xhbmd1YWdlfVxuICAgICAgICAgICAgbWV0aG9kPXttZXRob2R9XG4gICAgICAgICAgICBvblVuaGFuZGxlZEVycm9yPXtvblVuaGFuZGxlZEVycm9yfVxuICAgICAgICAgICAgcGF5bWVudEZvcm09e3BheW1lbnRGb3JtfVxuICAgICAgICAvPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVDb21wb25lbnQ8UGF5bWVudE1ldGhvZFByb3BzLCBQYXltZW50TWV0aG9kUmVzb2x2ZUlkPihcbiAgICBIb3N0ZWRDcmVkaXRDYXJkUGF5bWVudE1ldGhvZCxcbiAgICBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnaG9zdGVkLWNyZWRpdC1jYXJkJyxcbiAgICAgICAgfSxcbiAgICAgICAgeyBpZDogJ2NyZWRpdF9jYXJkJywgZ2F0ZXdheTogJ2JsdWVzbmFwZGlyZWN0JyB9LFxuICAgICAgICB7IGlkOiAnY3JlZGl0X2NhcmQnLCBnYXRld2F5OiAnY2hlY2tvdXRjb20nIH0sXG5cbiAgICAgICAgeyBpZDogJ3Rkb25saW5lbWFydCcgfSxcbiAgICBdLFxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/hosted-credit-card-integration/src/HostedCreditCardPaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/hosted-credit-card-integration/src/hooks/useHostedCreditCard.tsx":
/*!***********************************************************************************!*\
  !*** ./packages/hosted-credit-card-integration/src/hooks/useHostedCreditCard.tsx ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useHostedCreditCard: () => (/* binding */ useHostedCreditCard)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/creditCard/getCreditCardInputStyles/getCreditCardInputStyles.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components */ \"./packages/hosted-credit-card-integration/src/components/HostedCreditCardValidation/HostedCreditCardValidation.tsx\");\n\n\n\n\n\nconst useHostedCreditCard = ({ checkoutState, method, language, paymentForm, }) => {\n    const { setFieldTouched, setFieldValue, setSubmitted, submitForm } = paymentForm;\n    const { config } = method;\n    const { cardCode: requireCardCode } = config;\n    const isCardCodeRequired = requireCardCode || requireCardCode === null;\n    const isInstrumentCardCodeRequiredProp = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(checkoutState);\n    const isInstrumentCardNumberRequiredProp = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(checkoutState);\n    const getHostedFieldId = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((name) => {\n        return `${(0,lodash__WEBPACK_IMPORTED_MODULE_1__.compact)([method.gateway, method.id]).join('-')}-${name}`;\n    }, [method]);\n    const [focusedFieldType, setFocusedFieldType] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n    const getHostedStoredCardValidationFieldset = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((selectedInstrument) => {\n        const isInstrumentCardNumberRequired = selectedInstrument\n            ? isInstrumentCardNumberRequiredProp(selectedInstrument, method)\n            : false;\n        const isInstrumentCardCodeRequired = selectedInstrument\n            ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n            : false;\n        return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { cardCodeId: isInstrumentCardCodeRequired ? getHostedFieldId('ccCvv') : undefined, cardNumberId: isInstrumentCardNumberRequired\n                ? getHostedFieldId('ccNumber')\n                : undefined, focusedFieldType: focusedFieldType }));\n    }, [\n        focusedFieldType,\n        getHostedFieldId,\n        isInstrumentCardCodeRequiredProp,\n        isInstrumentCardNumberRequiredProp,\n        method,\n    ]);\n    const getHostedFormOptions = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        const styleProps = ['color', 'fontFamily', 'fontSize', 'fontWeight'];\n        const isInstrumentCardNumberRequired = selectedInstrument\n            ? isInstrumentCardNumberRequiredProp(selectedInstrument, method)\n            : false;\n        const isInstrumentCardCodeRequired = selectedInstrument\n            ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n            : false;\n        let styleContainerId;\n        if (selectedInstrument) {\n            if (isInstrumentCardCodeRequired) {\n                styleContainerId = getHostedFieldId('ccCvv');\n            }\n            else if (isInstrumentCardNumberRequired) {\n                styleContainerId = getHostedFieldId('ccNumber');\n            }\n        }\n        else {\n            styleContainerId = getHostedFieldId('ccNumber');\n        }\n        return {\n            fields: selectedInstrument\n                ? {\n                    cardCodeVerification: isInstrumentCardCodeRequired && selectedInstrument\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_cvv_label'),\n                            containerId: getHostedFieldId('ccCvv'),\n                            instrumentId: selectedInstrument.bigpayToken,\n                        }\n                        : undefined,\n                    cardNumberVerification: isInstrumentCardNumberRequired && selectedInstrument\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_number_label'),\n                            containerId: getHostedFieldId('ccNumber'),\n                            instrumentId: selectedInstrument.bigpayToken,\n                        }\n                        : undefined,\n                }\n                : {\n                    cardCode: isCardCodeRequired\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_cvv_label'),\n                            containerId: getHostedFieldId('ccCvv'),\n                        }\n                        : undefined,\n                    cardExpiry: {\n                        accessibilityLabel: language.translate('payment.credit_card_expiration_label'),\n                        containerId: getHostedFieldId('ccExpiry'),\n                        placeholder: language.translate('payment.credit_card_expiration_placeholder_text'),\n                    },\n                    cardName: {\n                        accessibilityLabel: language.translate('payment.credit_card_name_label'),\n                        containerId: getHostedFieldId('ccName'),\n                    },\n                    cardNumber: {\n                        accessibilityLabel: language.translate('payment.credit_card_number_label'),\n                        containerId: getHostedFieldId('ccNumber'),\n                    },\n                },\n            styles: styleContainerId\n                ? {\n                    default: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(styleContainerId, styleProps),\n                    error: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(styleContainerId, styleProps, _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__.CreditCardInputStylesType.Error),\n                    focus: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(styleContainerId, styleProps, _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__.CreditCardInputStylesType.Focus),\n                }\n                : {},\n            onBlur: ({ fieldType }) => {\n                if (focusedFieldType === fieldType) {\n                    setFocusedFieldType(undefined);\n                }\n            },\n            onCardTypeChange: ({ cardType }) => {\n                setFieldValue('hostedForm.cardType', cardType);\n            },\n            onEnter: () => {\n                setSubmitted(true);\n                submitForm();\n            },\n            onFocus: ({ fieldType }) => {\n                setFocusedFieldType(fieldType);\n            },\n            onValidate: ({ errors = {} }) => {\n                (0,lodash__WEBPACK_IMPORTED_MODULE_1__.forIn)(errors, (fieldErrors = [], fieldType) => {\n                    var _a, _b;\n                    const errorKey = `hostedForm.errors.${fieldType}`;\n                    setFieldValue(errorKey, (_b = (_a = fieldErrors[0]) === null || _a === void 0 ? void 0 : _a.type) !== null && _b !== void 0 ? _b : '');\n                    if (fieldErrors[0]) {\n                        setFieldTouched(errorKey);\n                    }\n                });\n            },\n        };\n    }), [\n        focusedFieldType,\n        getHostedFieldId,\n        isCardCodeRequired,\n        isInstrumentCardCodeRequiredProp,\n        isInstrumentCardNumberRequiredProp,\n        language,\n        method,\n        setFieldTouched,\n        setFieldValue,\n        setSubmitted,\n        submitForm,\n    ]);\n    return { getHostedStoredCardValidationFieldset, getHostedFormOptions };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9ob3N0ZWQtY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24vc3JjL2hvb2tzL3VzZUhvc3RlZENyZWRpdENhcmQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBT3dDO0FBQzZCO0FBT3JCO0FBR1c7QUFTcEQsTUFBTSxtQkFBbUIsR0FBRyxDQUFDLEVBQ2hDLGFBQWEsRUFDYixNQUFNLEVBQ04sUUFBUSxFQUNSLFdBQVcsR0FDUSxFQUFFLEVBQUU7SUFDdkIsTUFBTSxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxHQUFHLFdBQVcsQ0FBQztJQUNqRixNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDO0lBQzFCLE1BQU0sRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFLEdBQUcsTUFBTSxDQUFDO0lBRTdDLE1BQU0sa0JBQWtCLEdBQUcsZUFBZSxJQUFJLGVBQWUsS0FBSyxJQUFJLENBQUM7SUFDdkUsTUFBTSxnQ0FBZ0MsR0FBRyxrRkFBb0MsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUM3RixNQUFNLGtDQUFrQyxHQUNwQyxrRkFBc0MsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUUxRCxNQUFNLGdCQUFnQixHQUE2QixrREFBVyxDQUMxRCxDQUFDLElBQUksRUFBRSxFQUFFO1FBQ0wsT0FBTyxHQUFHLCtDQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQztJQUN2RSxDQUFDLEVBQ0QsQ0FBQyxNQUFNLENBQUMsQ0FDWCxDQUFDO0lBRUYsTUFBTSxDQUFDLGdCQUFnQixFQUFFLG1CQUFtQixDQUFDLEdBQUcsK0NBQVEsRUFBVSxDQUFDO0lBRW5FLE1BQU0scUNBQXFDLEdBQ3ZDLGtEQUFXLENBQ1AsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFO1FBQ25CLE1BQU0sOEJBQThC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LENBQUMsQ0FBQztZQUNuRCxDQUFDO1lBQ0QsT0FBTyxFQUFFLEdBQUcsRUFBRTtnQkFDVixZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ25CLFVBQVUsRUFBRSxDQUFDO1lBQ2pCLENBQUM7WUFDRCxPQUFPLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUU7Z0JBQ3ZCLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ25DLENBQUM7WUFDRCxVQUFVLEVBQUUsQ0FBQyxFQUFFLE1BQU0sR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFO2dCQUM1Qiw2Q0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLFdBQVcsR0FBRyxFQUFFLEVBQUUsU0FBUyxFQUFFLEVBQUU7O29CQUMxQyxNQUFNLFFBQVEsR0FBRyxxQkFBcUIsU0FBUyxFQUFFLENBQUM7b0JBRWxELGFBQWEsQ0FBQyxRQUFRLEVBQUUsdUJBQVcsQ0FBQyxDQUFDLENBQUMsMENBQUUsSUFBSSxtQ0FBSSxFQUFFLENBQUMsQ0FBQztvQkFFcEQsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQzt3QkFDakIsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUM5QixDQUFDO2dCQUNMLENBQUMsQ0FBQyxDQUFDO1lBQ1AsQ0FBQztTQUNKLENBQUM7SUFDTixDQUFDLEdBQ0Q7UUFDSSxnQkFBZ0I7UUFDaEIsZ0JBQWdCO1FBQ2hCLGtCQUFrQjtRQUNsQixnQ0FBZ0M7UUFDaEMsa0NBQWtDO1FBQ2xDLFFBQVE7UUFDUixNQUFNO1FBQ04sZUFBZTtRQUNmLGFBQWE7UUFDYixZQUFZO1FBQ1osVUFBVTtLQUNiLENBQ0osQ0FBQztJQUVGLE9BQU8sRUFBRSxxQ0FBcUMsRUFBRSxvQkFBb0IsRUFBRSxDQUFDO0FBQzNFLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvaG9zdGVkLWNyZWRpdC1jYXJkLWludGVncmF0aW9uL3NyYy9ob29rcy91c2VIb3N0ZWRDcmVkaXRDYXJkLnRzeD8zZmMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgdHlwZSBDYXJkSW5zdHJ1bWVudCxcbiAgICB0eXBlIENoZWNrb3V0U2VsZWN0b3JzLFxuICAgIHR5cGUgTGFuZ3VhZ2VTZXJ2aWNlLFxuICAgIHR5cGUgTGVnYWN5SG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgdHlwZSBQYXltZW50TWV0aG9kLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrJztcbmltcG9ydCB7IGNvbXBhY3QsIGZvckluIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBSZWFjdCwgeyB0eXBlIFJlYWN0Tm9kZSwgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQge1xuICAgIENyZWRpdENhcmRJbnB1dFN0eWxlc1R5cGUsXG4gICAgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzLFxuICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRTZWxlY3RvcixcbiAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3Rvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2luc3RydW1lbnQtdXRpbHMnO1xuaW1wb3J0IHsgdHlwZSBQYXltZW50Rm9ybVNlcnZpY2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBIb3N0ZWRDcmVkaXRDYXJkVmFsaWRhdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFVzZUhvc3RlZEZvcm1PcHRpb25zIHtcbiAgICBjaGVja291dFN0YXRlOiBDaGVja291dFNlbGVjdG9ycztcbiAgICBsYW5ndWFnZTogTGFuZ3VhZ2VTZXJ2aWNlO1xuICAgIG1ldGhvZDogUGF5bWVudE1ldGhvZDtcbiAgICBwYXltZW50Rm9ybTogUGF5bWVudEZvcm1TZXJ2aWNlO1xufVxuXG5leHBvcnQgY29uc3QgdXNlSG9zdGVkQ3JlZGl0Q2FyZCA9ICh7XG4gICAgY2hlY2tvdXRTdGF0ZSxcbiAgICBtZXRob2QsXG4gICAgbGFuZ3VhZ2UsXG4gICAgcGF5bWVudEZvcm0sXG59OiBVc2VIb3N0ZWRGb3JtT3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHsgc2V0RmllbGRUb3VjaGVkLCBzZXRGaWVsZFZhbHVlLCBzZXRTdWJtaXR0ZWQsIHN1Ym1pdEZvcm0gfSA9IHBheW1lbnRGb3JtO1xuICAgIGNvbnN0IHsgY29uZmlnIH0gPSBtZXRob2Q7XG4gICAgY29uc3QgeyBjYXJkQ29kZTogcmVxdWlyZUNhcmRDb2RlIH0gPSBjb25maWc7XG5cbiAgICBjb25zdCBpc0NhcmRDb2RlUmVxdWlyZWQgPSByZXF1aXJlQ2FyZENvZGUgfHwgcmVxdWlyZUNhcmRDb2RlID09PSBudWxsO1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRQcm9wID0gaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpO1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFByb3AgPVxuICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3RvcihjaGVja291dFN0YXRlKTtcblxuICAgIGNvbnN0IGdldEhvc3RlZEZpZWxkSWQ6IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZyA9IHVzZUNhbGxiYWNrKFxuICAgICAgICAobmFtZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGAke2NvbXBhY3QoW21ldGhvZC5nYXRld2F5LCBtZXRob2QuaWRdKS5qb2luKCctJyl9LSR7bmFtZX1gO1xuICAgICAgICB9LFxuICAgICAgICBbbWV0aG9kXSxcbiAgICApO1xuXG4gICAgY29uc3QgW2ZvY3VzZWRGaWVsZFR5cGUsIHNldEZvY3VzZWRGaWVsZFR5cGVdID0gdXNlU3RhdGU8c3RyaW5nPigpO1xuXG4gICAgY29uc3QgZ2V0SG9zdGVkU3RvcmVkQ2FyZFZhbGlkYXRpb25GaWVsZHNldDogKHNlbGVjdGVkSW5zdHJ1bWVudDogQ2FyZEluc3RydW1lbnQpID0+IFJlYWN0Tm9kZSA9XG4gICAgICAgIHVzZUNhbGxiYWNrKFxuICAgICAgICAgICAgKHNlbGVjdGVkSW5zdHJ1bWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCA9IHNlbGVjdGVkSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgICAgICA/IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFByb3Aoc2VsZWN0ZWRJbnN0cnVtZW50LCBtZXRob2QpXG4gICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCA9IHNlbGVjdGVkSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgICAgICA/IGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRQcm9wKHNlbGVjdGVkSW5zdHJ1bWVudCwgbWV0aG9kKVxuICAgICAgICAgICAgICAgICAgICA6IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPEhvc3RlZENyZWRpdENhcmRWYWxpZGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkQ29kZUlkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkID8gZ2V0SG9zdGVkRmllbGRJZCgnY2NDdnYnKSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlcklkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRIb3N0ZWRGaWVsZElkKCdjY051bWJlcicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1c2VkRmllbGRUeXBlPXtmb2N1c2VkRmllbGRUeXBlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIGZvY3VzZWRGaWVsZFR5cGUsXG4gICAgICAgICAgICAgICAgZ2V0SG9zdGVkRmllbGRJZCxcbiAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkUHJvcCxcbiAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRQcm9wLFxuICAgICAgICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICk7XG5cbiAgICBjb25zdCBnZXRIb3N0ZWRGb3JtT3B0aW9ucyA9IHVzZUNhbGxiYWNrKFxuICAgICAgICBhc3luYyAoc2VsZWN0ZWRJbnN0cnVtZW50OiBDYXJkSW5zdHJ1bWVudCk6IFByb21pc2U8TGVnYWN5SG9zdGVkRm9ybU9wdGlvbnM+ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlUHJvcHMgPSBbJ2NvbG9yJywgJ2ZvbnRGYW1pbHknLCAnZm9udFNpemUnLCAnZm9udFdlaWdodCddO1xuICAgICAgICAgICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkID0gc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgPyBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRQcm9wKHNlbGVjdGVkSW5zdHJ1bWVudCwgbWV0aG9kKVxuICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkID0gc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgPyBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkUHJvcChzZWxlY3RlZEluc3RydW1lbnQsIG1ldGhvZClcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHN0eWxlQ29udGFpbmVySWQ7XG5cbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEluc3RydW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lcklkID0gZ2V0SG9zdGVkRmllbGRJZCgnY2NDdnYnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lcklkID0gZ2V0SG9zdGVkRmllbGRJZCgnY2NOdW1iZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0eWxlQ29udGFpbmVySWQgPSBnZXRIb3N0ZWRGaWVsZElkKCdjY051bWJlcicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkczogc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkQ29kZVZlcmlmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWQgJiYgc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50LmNyZWRpdF9jYXJkX2N2dl9sYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogZ2V0SG9zdGVkRmllbGRJZCgnY2NDdnYnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQ6IHNlbGVjdGVkSW5zdHJ1bWVudC5iaWdwYXlUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlclZlcmlmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCAmJiBzZWxlY3RlZEluc3RydW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY051bWJlcicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZDogc2VsZWN0ZWRJbnN0cnVtZW50LmJpZ3BheVRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRDb2RlOiBpc0NhcmRDb2RlUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfY3Z2X2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogZ2V0SG9zdGVkRmllbGRJZCgnY2NDdnYnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRFeHBpcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbDogbGFuZ3VhZ2UudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50LmNyZWRpdF9jYXJkX2V4cGlyYXRpb25fbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY0V4cGlyeScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGF5bWVudC5jcmVkaXRfY2FyZF9leHBpcmF0aW9uX3BsYWNlaG9sZGVyX3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbDogbGFuZ3VhZ2UudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50LmNyZWRpdF9jYXJkX25hbWVfbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY05hbWUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogZ2V0SG9zdGVkRmllbGRJZCgnY2NOdW1iZXInKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN0eWxlczogc3R5bGVDb250YWluZXJJZFxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYXdhaXQgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzKHN0eWxlQ29udGFpbmVySWQsIHN0eWxlUHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYXdhaXQgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVDb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlUHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRDYXJkSW5wdXRTdHlsZXNUeXBlLkVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1czogYXdhaXQgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVDb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlUHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRDYXJkSW5wdXRTdHlsZXNUeXBlLkZvY3VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgICAgICAgICBvbkJsdXI6ICh7IGZpZWxkVHlwZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb2N1c2VkRmllbGRUeXBlID09PSBmaWVsZFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZvY3VzZWRGaWVsZFR5cGUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25DYXJkVHlwZUNoYW5nZTogKHsgY2FyZFR5cGUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRGaWVsZFZhbHVlKCdob3N0ZWRGb3JtLmNhcmRUeXBlJywgY2FyZFR5cGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25FbnRlcjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRTdWJtaXR0ZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdEZvcm0oKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uRm9jdXM6ICh7IGZpZWxkVHlwZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldEZvY3VzZWRGaWVsZFR5cGUoZmllbGRUeXBlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uVmFsaWRhdGU6ICh7IGVycm9ycyA9IHt9IH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ySW4oZXJyb3JzLCAoZmllbGRFcnJvcnMgPSBbXSwgZmllbGRUeXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvcktleSA9IGBob3N0ZWRGb3JtLmVycm9ycy4ke2ZpZWxkVHlwZX1gO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRGaWVsZFZhbHVlKGVycm9yS2V5LCBmaWVsZEVycm9yc1swXT8udHlwZSA/PyAnJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZEVycm9yc1swXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEZpZWxkVG91Y2hlZChlcnJvcktleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBbXG4gICAgICAgICAgICBmb2N1c2VkRmllbGRUeXBlLFxuICAgICAgICAgICAgZ2V0SG9zdGVkRmllbGRJZCxcbiAgICAgICAgICAgIGlzQ2FyZENvZGVSZXF1aXJlZCxcbiAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRQcm9wLFxuICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkUHJvcCxcbiAgICAgICAgICAgIGxhbmd1YWdlLFxuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgc2V0RmllbGRUb3VjaGVkLFxuICAgICAgICAgICAgc2V0RmllbGRWYWx1ZSxcbiAgICAgICAgICAgIHNldFN1Ym1pdHRlZCxcbiAgICAgICAgICAgIHN1Ym1pdEZvcm0sXG4gICAgICAgIF0sXG4gICAgKTtcblxuICAgIHJldHVybiB7IGdldEhvc3RlZFN0b3JlZENhcmRWYWxpZGF0aW9uRmllbGRzZXQsIGdldEhvc3RlZEZvcm1PcHRpb25zIH07XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/hosted-credit-card-integration/src/hooks/useHostedCreditCard.tsx\n\n}");

/***/ }),

/***/ "./packages/hosted-credit-card-integration/src/index.ts":
/*!**************************************************************!*\
  !*** ./packages/hosted-credit-card-integration/src/index.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HostedCreditCardComponent: () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_5__[\"default\"]),\n/* harmony export */   HostedCreditCardFieldset: () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   HostedCreditCardPaymentMethod: () => (/* reexport safe */ _HostedCreditCardPaymentMethod__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   HostedCreditCardValidation: () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_2__[\"default\"]),\n/* harmony export */   getHostedCreditCardValidationSchema: () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_4__[\"default\"]),\n/* harmony export */   getHostedInstrumentValidationSchema: () => (/* reexport safe */ _components__WEBPACK_IMPORTED_MODULE_3__[\"default\"]),\n/* harmony export */   useHostedCreditCard: () => (/* reexport safe */ _hooks__WEBPACK_IMPORTED_MODULE_6__.useHostedCreditCard)\n/* harmony export */ });\n/* harmony import */ var _HostedCreditCardPaymentMethod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./HostedCreditCardPaymentMethod */ \"./packages/hosted-credit-card-integration/src/HostedCreditCardPaymentMethod.tsx\");\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components */ \"./packages/hosted-credit-card-integration/src/components/HostedCreditCardFieldset/HostedCreditCardFieldset.tsx\");\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components */ \"./packages/hosted-credit-card-integration/src/components/HostedCreditCardValidation/HostedCreditCardValidation.tsx\");\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components */ \"./packages/hosted-credit-card-integration/src/components/getHostedInstrumentValidationSchema/getHostedInstrumentValidationSchema.ts\");\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components */ \"./packages/hosted-credit-card-integration/src/components/getHostedCreditCardValidationSchema/getHostedCreditCardValidationSchema.ts\");\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components */ \"./packages/hosted-credit-card-integration/src/components/HostedCreditCardComponent.tsx\");\n/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./hooks */ \"./packages/hosted-credit-card-integration/src/hooks/useHostedCreditCard.tsx\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9ob3N0ZWQtY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24vc3JjL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJGO0FBT3JFO0FBQ3dCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9ob3N0ZWQtY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24vc3JjL2luZGV4LnRzPzUzYjYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgZGVmYXVsdCBhcyBIb3N0ZWRDcmVkaXRDYXJkUGF5bWVudE1ldGhvZCB9IGZyb20gJy4vSG9zdGVkQ3JlZGl0Q2FyZFBheW1lbnRNZXRob2QnO1xuZXhwb3J0IHtcbiAgICBIb3N0ZWRDcmVkaXRDYXJkQ29tcG9uZW50LFxuICAgIEhvc3RlZENyZWRpdENhcmRGaWVsZHNldCxcbiAgICBIb3N0ZWRDcmVkaXRDYXJkVmFsaWRhdGlvbixcbiAgICBnZXRIb3N0ZWRJbnN0cnVtZW50VmFsaWRhdGlvblNjaGVtYSxcbiAgICBnZXRIb3N0ZWRDcmVkaXRDYXJkVmFsaWRhdGlvblNjaGVtYSxcbn0gZnJvbSAnLi9jb21wb25lbnRzJztcbmV4cG9ydCB7IHVzZUhvc3RlZENyZWRpdENhcmQgfSBmcm9tICcuL2hvb2tzJztcbmV4cG9ydCB7IEhvc3RlZENyZWRpdENhcmRGaWVsZHNldFZhbHVlcywgSG9zdGVkQ3JlZGl0Q2FyZFZhbGlkYXRpb25WYWx1ZXMgfSBmcm9tICcuL3R5cGVzJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/hosted-credit-card-integration/src/index.ts\n\n}");

/***/ })

}]);
"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["worldpay-credit-card-payment-method"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/worldpayaccess.js":
/*!******************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/worldpayaccess.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createWorldpayAccessPaymentStrategy: () => (/* binding */ _)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\nvar o;class r extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class a extends r{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class s extends r{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class d extends a{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(o||(o={}));class c extends r{constructor(e){super(function(e){switch(e){case o.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case o.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case o.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case o.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}var u=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})},l=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};class m{constructor(e){this._paymentIntegrationService=e}execute(e,t){var n,i;return this._isHostedPaymentFormEnabled(null===(n=e.payment)||void 0===n?void 0:n.methodId,null===(i=e.payment)||void 0===i?void 0:i.gatewayId)&&this._shouldRenderHostedForm?this._executeWithHostedForm(e,t):this._executeWithoutHostedForm(e,t)}initialize(e){if(!this._isHostedPaymentFormEnabled(null==e?void 0:e.methodId,null==e?void 0:e.gatewayId)||!this._isHostedFieldAvailable(e))return this._shouldRenderHostedForm=!1,Promise.resolve();const t=e&&e.creditCard&&e.creditCard.form,n=this._paymentIntegrationService.getState(),{paymentSettings:{bigpayBaseUrl:i=\"\"}={}}=n.getStoreConfigOrThrow();if(!t)throw new a;const o=this._paymentIntegrationService.createHostedForm(i,t);return o.attach().then(()=>(this._shouldRenderHostedForm=!0,this._hostedForm=o,Promise.resolve()))}deinitialize(){return this._hostedForm&&this._hostedForm.detach(),Promise.resolve()}finalize(){return Promise.reject(new s)}_executeWithoutHostedForm(e,t){return u(this,void 0,void 0,function*(){const{payment:n}=e,i=l(e,[\"payment\"]),o=n&&n.paymentData;if(!n||!o)throw new d([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:o}))})}_executeWithHostedForm(e,t){return u(this,void 0,void 0,function*(){const{payment:n}=e,i=l(e,[\"payment\"]),r=this._hostedForm;if(!r)throw new c(o.PaymentNotInitialized);if(!n||!n.methodId)throw new d([\"payment.methodId\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield r.validate().then(()=>r.submit(n))})}_isHostedPaymentFormEnabled(e,t){return!!e&&!0===this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t).config.isHostedFormEnabled}_isHostedFieldAvailable(t){return!(0,lodash__WEBPACK_IMPORTED_MODULE_0__.values)(t&&t.creditCard&&t.creditCard.form.fields).every(lodash__WEBPACK_IMPORTED_MODULE_0__.isNil)}}const h=e=>\"object\"==typeof e&&null!==e&&\"body\"in e;var p=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};const y=\"Payment cannot continue\";let f;class v extends m{initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return p(this,void 0,void 0,function*(){if(this._initializeOptions=e&&e.worldpay,!this._initializeOptions)throw new c(o.PaymentNotInitialized);return t.initialize.call(this,e)})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return p(this,void 0,void 0,function*(){const{payment:i}=e;if(f=this._submitAdditionalAction(),!i)throw new d([\"payment\"]);try{return yield n.execute.call(this,e,t)}catch(e){return this._processAdditionalAction(e,i)}})}_processAdditionalAction(e,i){return p(this,void 0,void 0,function*(){return h(e)&&(0,lodash__WEBPACK_IMPORTED_MODULE_0__.some)(e.body.errors,{code:\"additional_action_required\"})?new Promise((r,a)=>{const s=e=>p(this,void 0,void 0,function*(){if(\"string\"!=typeof e.data||!this._isValidJsonWithSessionId(e.data))return a(new Error(y));window.removeEventListener(\"message\",s),d.remove();const u=JSON.parse(e.data),l=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.merge)({},i,{paymentData:{threeDSecure:{token:u.SessionId}}});try{r(yield f(l))}catch(e){if(!h(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_0__.some)(e.body.errors,{code:\"three_d_secure_required\"}))return a(e);if(!this._initializeOptions)return a(new c(o.PaymentNotInitialized));const{onLoad:t}=this._initializeOptions,i=this._createIframe(e.body.three_ds_result);try{t(i,()=>a(new Error(\"Payment was cancelled\")))}catch(e){a(new Error(y))}}});let d;window.addEventListener(\"message\",s);try{d=this._createHiddenIframe(e.body)}catch(e){throw window.removeEventListener(\"message\",s),new Error(y)}}):Promise.reject(e)})}_createHiddenIframe(e){const t=document.createElement(\"iframe\");if(document.body.appendChild(t),!t.contentWindow)throw new Error;t.id=\"worldpay_hosted_hidden_payment_page\",t.height=\"0px\",t.width=\"0px\";const n=document.createElement(\"form\"),i=\"collectionForm\";n.id=i,n.name=\"devicedata\",n.method=\"post\";const o=e.additional_action_required.data.redirect_url;n.action=o;const r=document.createElement(\"input\");r.name=\"Bin\",r.type=\"hidden\",r.value=e.provider_data.source_id,n.appendChild(r);const a=document.createElement(\"input\");a.name=\"JWT\",a.type=\"hidden\",a.value=e.provider_data.data,n.appendChild(a);const s=document.createElement(\"button\");s.type=\"submit\",s.id=\"btnsubmit\",n.appendChild(s),navigator.userAgent.match(\"Firefox\")?t.srcdoc=n.outerHTML:t.contentWindow.document.body.appendChild(n);const d=document.createElement(\"script\");return d.innerHTML=`\\n            document.getElementById('${i}').submit();\\n        `,t.contentWindow.document.body.appendChild(d),t}_createIframe(e){const t=document.createElement(\"form\");t.id=\"challengeForm\",t.method=\"POST\",t.action=e.acs_url;const n=document.createElement(\"input\");n.name=\"JWT\",n.type=\"hidden\",n.value=e.payer_auth_request,t.appendChild(n);const i=document.createElement(\"input\");i.name=\"MD\",i.type=\"hidden\",i.value=`merchantSessionId=${e.merchant_data}`,t.appendChild(i);const o=document.createElement(\"script\");o.type=\"text/javascript\",o.innerHTML=\"window.onload = function() { document.getElementById('challengeForm').submit(); }\";const r=document.createElement(\"iframe\");return r.name=\"worldpay_hosted_payment_page\",r.height=\"400\",r.width=\"100%\",r.srcdoc=`${t.outerHTML} ${o.outerHTML}`,r}_submitAdditionalAction(){if(this._shouldRenderHostedForm){if(!this._hostedForm)throw new c(o.PaymentNotInitialized);const e=this._hostedForm;return t=>p(this,void 0,void 0,function*(){yield e.submit(t)})}return e=>p(this,void 0,void 0,function*(){yield this._paymentIntegrationService.submitPayment(e)})}_isValidJsonWithSessionId(e){try{return!!JSON.parse(e).SessionId}catch(e){return!1}}}const _=(b=e=>new v(e),w=[{id:\"worldpayaccess\"}],console.log(\"resolveIds\",w),Object.assign(b,{resolveIds:w}));var b,w;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy93b3JsZHBheWFjY2Vzcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQSxJQ0NZQSxFQ0tHLE1BQWVDLFVBQXNCQyxNQUloRCxXQUFBQyxDQUFZQyxHQ1hELElBQXFDQyxFRFk1Q0MsTUFBTUYsR0FBVyxxQ0FKckIsS0FBQUcsS0FBTyxnQkFDUCxLQUFBQyxLQUFPLFdDVHlDSCxhRGNaQSxVQ2JoQ0ksT0FBT0MsZUFDUEQsT0FBT0MsZURZUUMsS0NaZU4sR0RZZk0sS0NWUkMsVUFBWVAsRURZb0IsbUJBQTVCSCxNQUFNVyxrQkFDYlgsTUFBTVcsa0JBQWtCRixpQkFFeEJBLEtBQUtHLE1BQVEsSUFBSVosTUFBTVMsS0FBS1AsU0FBU1UsS0FFN0MsRUVkVyxNQUFNQyxVQUE2QmQsRUFDOUMsV0FBQUUsQ0FBWUMsR0FDUkUsTUFBTUYsR0FBVyx5Q0FFakJPLEtBQUtKLEtBQU8sdUJBQ1pJLEtBQUtILEtBQU8sa0JBQ2hCLEVDUFcsTUFBTVEsVUFBMENmLEVBQzNELFdBQUFFLEdBQ0lHLE1BQU0sa0VBRU5LLEtBQUtKLEtBQU8sb0NBQ1pJLEtBQUtILEtBQU8saUNBQ2hCLEVDTFcsTUFBTVMsVUFBb0NGLEVBQ3JELFdBQUFaLENBQVllLEdBQ1IsSUFBSWQsRUFBVSx5RUFFVmMsSUFDQWQsRUFBVSxHQUFHQSw0REFBa0VjLEVBQWNDLEtBQ3pGLFVBSVJiLE1BQU1GLEdBRU5PLEtBQUtKLEtBQU8sNkJBQ2hCLEdMbEJKLFNBQVlQLEdBQ1IsbUVBQ0EsdURBQ0EscURBQ0EsdURBQ0Esa0VBQ0gsQ0FORCxDQUFZQSxJQUFBQSxFQUF1QixLQWFwQixNQUFNb0IsVUFBNEJuQixFQUM3QyxXQUFBRSxDQUFtQmtCLEdBQ2ZmLE1BT1IsU0FBeUJFLEdBQ3JCLE9BQVFBLEdBQ0osS0FBS1IsRUFBd0JzQix1QkFDekIsTUFBTyxvRkFFWCxLQUFLdEIsRUFBd0J1QixzQkFDekIsTUFBTyxtRkFFWCxLQUFLdkIs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c0csRUFBT00sT0FBUyxNQUNoQk4sRUFBT08sTUFBUSxPQUNmUCxFQUFPdUIsT0FBUyxHQUFHdkYsRUFBS3dGLGFBQWFDLEVBQU9ELFlBRXJDeEIsQ0FDWCxDQUVRLHVCQUFBOUIsR0FDSixHQUFJcEUsS0FBS3lCLHdCQUF5QixDQUM5QixJQUFLekIsS0FBSzRDLFlBQ04sTUFBTSxJQUFJbkMsRUFBb0JwQixFQUF3QnVCLHVCQUcxRCxNQUFNcUgsRUFBYWpJLEtBQUs0QyxZQUV4QixPQUFjd0MsR0FBNEMsdUNBQ2hENkMsRUFBVzNFLE9BQU84QixFQUM1QixFLENBR0osT0FBY0EsR0FBNEMsdUNBQ2hEcEYsS0FBS2lCLDJCQUEyQm1DLGNBQWNnQyxFQUN4RCxFQUNKLENBRVEseUJBQUFQLENBQTBCcUQsR0FDOUIsSUFHSSxRQUZhaEQsS0FBS0MsTUFBTStDLEdBRWYxQyxTLENBS1gsTUFBT1MsR0FDTCxPQUFPLEMsQ0FFZixFQ3ZQSixNQU1BLEdDVklrQyxFREtBQyxHQUVPLElBQUksRUFBNkJBLEdDTnhDQyxFRFNtRSxDQUFDLENBQUU5QixHQUFJLG1CQ1AxRStCLFFBQVFDLElBQUksYUFBY0YsR0FFbkJ2SSxPQUFPMEksT0FBT0wsRUFBUSxDQUFFRSxnQkFOcEIsSUFDWEYsRUFDQUUsRSIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ib290c3RyYXA/ZmZjYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW5pdGlhbGl6ZWQtZXJyb3IudHM/OGI0ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zdGFuZGFyZC1lcnJvci50cz84YTAzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3NldC1wcm90b3R5cGUtb2YudHM/ODQ1YSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pbnZhbGlkLWFyZ3VtZW50LWVycm9yLnRzPzM5MjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvb3JkZXItZmluYWxpemF0aW9uLW5vdC1yZXF1aXJlZC1lcnJvci50cz9iNWExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jcmVkaXQtY2FyZC1pbnRlZ3JhdGlvbi9zcmMvY3JlZGl0LWNhcmQtcGF5bWVudC1zdHJhdGVneS50cz8yODlmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2lzLXJlcXVlc3QtZXJyb3IudHM/YjQzZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvd29ybGRwYXlhY2Nlc3MtaW50ZWdyYXRpb24vc3JjL3dvcmxkcGF5YWNjZXNzLXBheW1lbnQtc3RyYXRlZ3kudHM/NjQyYSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvd29ybGRwYXlhY2Nlc3MtaW50ZWdyYXRpb24vc3JjL2NyZWF0ZS13b3JsZHBheWFjY2Vzcy1wYXltZW50LXN0cmF0ZWd5LnRzPzYzNWUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUge1xuICAgIENoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQsXG4gICAgQ3VzdG9tZXJOb3RJbml0aWFsaXplZCxcbiAgICBQYXltZW50Tm90SW5pdGlhbGl6ZWQsXG4gICAgU2hpcHBpbmdOb3RJbml0aWFsaXplZCxcbiAgICBTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgYSBtZXRob2QgcmVxdWlyZXMgYSBjZXJ0YWluIGluaXRpYWxpemF0aW9uIGNhbGwgdG8gYmVcbiAqIG1hZGUgZmlyc3QuIFNvbWUgb2JqZWN0cyBjYW4gYmUgY29uc3RydWN0ZWQgYnV0IHRoZXkgY2Fubm90IGJlIHVzZWQgdW50aWwgYVxuICogc2VwYXJhdGUgaW5pdGlhbGl6YXRpb24gY2FsbCBpcyBtYWRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RJbml0aWFsaXplZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdEluaXRpYWxpemVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm90X2luaXRpYWxpemVkJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuQ3VzdG9tZXJOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY3VzdG9tZXIgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgc2hpcHBpbmcgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNoZWNrb3V0IHNwYW0gcHJvdGVjdGlvbiBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBjb21wb25lbnQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IEN1c3RvbUVycm9yIGZyb20gJy4vY3VzdG9tLWVycm9yJztcbmltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tICcuL3NldC1wcm90b3R5cGUtb2YnO1xuXG4vKipcbiAqIFRoaXMgZXJyb3IgdHlwZSBzaG91bGQgbm90IGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LiBJdCBpcyBhIGJhc2UgY2xhc3MgZm9yXG4gKiBhbGwgY3VzdG9tIGVycm9ycyB0aHJvd24gaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBDdXN0b21FcnJvciB7XG4gICAgbmFtZSA9ICdTdGFuZGFyZEVycm9yJztcbiAgICB0eXBlID0gJ3N0YW5kYXJkJztcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIG5ldy50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpLnN0YWNrO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0UHJvdG90eXBlT2Yob2JqZWN0OiBhbnksIHByb3RvdHlwZTogb2JqZWN0KSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqZWN0LCBwcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgbWV0aG9kIGlzIHVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlXG4gKiBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIGFyZ3VtZW50cyBhY2NvcmRpbmcgdG8gdGhlaXIgcmVxdWlyZW1lbnRzLFxuICogaS5lLjogaWYgYW4gYXJndW1lbnQgaXMgbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52YWxpZEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0ludmFsaWQgYXJndW1lbnRzIGhhdmUgYmVlbiBwcm92aWRlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnSW52YWxpZEFyZ3VtZW50RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnaW52YWxpZF9hcmd1bWVudCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IEludmFsaWRBcmd1bWVudEVycm9yIGZyb20gJy4vaW52YWxpZC1hcmd1bWVudC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gd2UgYXJlIHVuYWJsZSB0byBzdWJtaXQgYSBwYXltZW50IGJlY2F1c2VcbiAqIHRoZSBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcywgaS5lLjogaWYgYW4gYXJndW1lbnQgaXNcbiAqIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciBleHRlbmRzIEludmFsaWRBcmd1bWVudEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihpbnZhbGlkRmllbGRzPzogc3RyaW5nW10pIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGZvciB0aGUgb3JkZXIgYmVjYXVzZSB0aGUgcGF5bG9hZCBpcyBpbnZhbGlkLic7XG5cbiAgICAgICAgaWYgKGludmFsaWRGaWVsZHMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtpbnZhbGlkRmllbGRzLmpvaW4oXG4gICAgICAgICAgICAgICAgJywgJyxcbiAgICAgICAgICAgICl9LmA7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc05pbCwgdmFsdWVzIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBIb3N0ZWRGb3JtLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBXaXRoQ3JlZGl0Q2FyZFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyB9IGZyb20gJy4vY3JlZGl0LWNhcmQtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcm90ZWN0ZWQgX2hvc3RlZEZvcm0/OiBIb3N0ZWRGb3JtO1xuICAgIHByb3RlY3RlZCBfc2hvdWxkUmVuZGVySG9zdGVkRm9ybT86IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpIHt9XG5cbiAgICBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKFxuICAgICAgICAgICAgcGF5bG9hZC5wYXltZW50Py5tZXRob2RJZCxcbiAgICAgICAgICAgIHBheWxvYWQucGF5bWVudD8uZ2F0ZXdheUlkLFxuICAgICAgICApICYmIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm1cbiAgICAgICAgICAgID8gdGhpcy5fZXhlY3V0ZVdpdGhIb3N0ZWRGb3JtKHBheWxvYWQsIG9wdGlvbnMpXG4gICAgICAgICAgICA6IHRoaXMuX2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybShwYXlsb2FkLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aENyZWRpdENhcmRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICF0aGlzLl9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChvcHRpb25zPy5tZXRob2RJZCwgb3B0aW9ucz8uZ2F0ZXdheUlkKSB8fFxuICAgICAgICAgICAgIXRoaXMuX2lzSG9zdGVkRmllbGRBdmFpbGFibGUob3B0aW9ucylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvcm1PcHRpb25zID0gb3B0aW9ucyAmJiBvcHRpb25zLmNyZWRpdENhcmQgJiYgb3B0aW9ucy5jcmVkaXRDYXJkLmZvcm07XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRTZXR0aW5nczogeyBiaWdwYXlCYXNlVXJsOiBob3N0ID0gJycgfSA9IHt9IH0gPVxuICAgICAgICAgICAgc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFmb3JtT3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmb3JtID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVIb3N0ZWRGb3JtKGhvc3QsIGZvcm1PcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gZm9ybS5hdHRhY2goKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm0gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybSA9IGZvcm07XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5faG9zdGVkRm9ybSkge1xuICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybS5kZXRhY2goKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIF9leGVjdXRlV2l0aG91dEhvc3RlZEZvcm0oXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0gcGF5bWVudCAmJiBwYXltZW50LnBheW1lbnREYXRhO1xuXG4gICAgICAgIGlmICghcGF5bWVudCB8fCAhcGF5bWVudERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50LnBheW1lbnREYXRhJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHsgLi4ucGF5bWVudCwgcGF5bWVudERhdGEgfSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIF9leGVjdXRlV2l0aEhvc3RlZEZvcm0oXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9ob3N0ZWRGb3JtO1xuXG4gICAgICAgIGlmICghZm9ybSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5bWVudCB8fCAhcGF5bWVudC5tZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQubWV0aG9kSWQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBhd2FpdCBmb3JtLnZhbGlkYXRlKCkudGhlbigoKSA9PiBmb3JtLnN1Ym1pdChwYXltZW50KSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIF9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChtZXRob2RJZD86IHN0cmluZywgZ2F0ZXdheUlkPzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQsIGdhdGV3YXlJZCk7XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRNZXRob2QuY29uZmlnLmlzSG9zdGVkRm9ybUVuYWJsZWQgPT09IHRydWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNIb3N0ZWRGaWVsZEF2YWlsYWJsZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhDcmVkaXRDYXJkUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIXZhbHVlcyhvcHRpb25zICYmIG9wdGlvbnMuY3JlZGl0Q2FyZCAmJiBvcHRpb25zLmNyZWRpdENhcmQuZm9ybS5maWVsZHMpLmV2ZXJ5KFxuICAgICAgICAgICAgaXNOaWwsXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vLyBIYXZlIHRvIHVzZSBgYXNgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzczOTg3MDQ0L3R5cGVndWFyZGluZy1hbi11bmtub3duLW5lc3RlZC1vYmplY3Qgc2hvdWxkIGJlIGZpeGVkIGluIDQuOCtcbmNvbnN0IGlzUmVxdWVzdEVycm9yID0gKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVxdWVzdEVycm9yID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnYm9keScgaW4gZXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpc1JlcXVlc3RFcnJvcjtcbiIsImltcG9ydCB7IG1lcmdlLCBzb21lIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHtcbiAgICBpc1JlcXVlc3RFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5LFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgV2l0aFdvcmxkcGF5QWNjZXNzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFdvcmxkcGF5QWNjZXNzM0RTT3B0aW9ucyxcbiAgICBXb3JsZHBheUFjY2Vzc0FkZGl0aW9uYWxBY3Rpb24sXG4gICAgV29ybGRwYXlBY2Nlc3NQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vd29ybGRwYXlhY2Nlc3MtcGF5bWVudC1vcHRpb25zJztcblxuY29uc3QgSUZSQU1FX05BTUUgPSAnd29ybGRwYXlfaG9zdGVkX3BheW1lbnRfcGFnZSc7XG5jb25zdCBJRlJBTUVfSElEREVOX05BTUUgPSAnd29ybGRwYXlfaG9zdGVkX2hpZGRlbl9wYXltZW50X3BhZ2UnO1xuY29uc3QgUEFZTUVOVF9DQU5OT1RfQ09OVElOVUUgPSAnUGF5bWVudCBjYW5ub3QgY29udGludWUnO1xuXG5sZXQgc3VibWl0OiAocGF5bWVudFBheWxvYWQ6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5KSA9PiBQcm9taXNlPHZvaWQ+O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXb3JsZHBheUFjY2Vzc1BheW1lbnRTdHJhdGVneSBleHRlbmRzIENyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgX2luaXRpYWxpemVPcHRpb25zPzogV29ybGRwYXlBY2Nlc3NQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFdvcmxkcGF5QWNjZXNzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLl9pbml0aWFsaXplT3B0aW9ucyA9IG9wdGlvbnMgJiYgb3B0aW9ucy53b3JsZHBheTtcblxuICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1cGVyLmluaXRpYWxpemUob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShcbiAgICAgICAgb3JkZXJSZXF1ZXN0OiBPcmRlclJlcXVlc3RCb2R5LFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQgfSA9IG9yZGVyUmVxdWVzdDtcblxuICAgICAgICBzdWJtaXQgPSB0aGlzLl9zdWJtaXRBZGRpdGlvbmFsQWN0aW9uKCk7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc3VwZXIuZXhlY3V0ZShvcmRlclJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGVycm9yLCBwYXltZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICBlcnJvcjogdW5rbm93bixcbiAgICAgICAgcGF5bWVudDogT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFpc1JlcXVlc3RFcnJvcihlcnJvcikgfHxcbiAgICAgICAgICAgICFzb21lKGVycm9yLmJvZHkuZXJyb3JzLCB7IGNvZGU6ICdhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCcgfSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VFdmVudCA9IGFzeW5jIChldmVudDogTWVzc2FnZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBldmVudC5kYXRhICE9PSAnc3RyaW5nJyB8fCAhdGhpcy5faXNWYWxpZEpzb25XaXRoU2Vzc2lvbklkKGV2ZW50LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKFBBWU1FTlRfQ0FOTk9UX0NPTlRJTlVFKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBtZXNzYWdlRXZlbnQpO1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgICAgICAgICBpZnJhbWVIaWRkZW4ucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IG1lcmdlKHt9LCBwYXltZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7IHRocmVlRFNlY3VyZTogeyB0b2tlbjogZGF0YS5TZXNzaW9uSWQgfSB9LFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhd2FpdCBzdWJtaXQocGF5bWVudFBheWxvYWQpKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChzdWJtaXRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAhaXNSZXF1ZXN0RXJyb3Ioc3VibWl0RXJyb3IpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhc29tZShzdWJtaXRFcnJvci5ib2R5LmVycm9ycywgeyBjb2RlOiAndGhyZWVfZF9zZWN1cmVfcmVxdWlyZWQnIH0pXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChzdWJtaXRFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCksXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBvbkxvYWQgfSA9IHRoaXMuX2luaXRpYWxpemVPcHRpb25zO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lID0gdGhpcy5fY3JlYXRlSWZyYW1lKHN1Ym1pdEVycm9yLmJvZHkudGhyZWVfZHNfcmVzdWx0KTtcblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25Mb2FkKGZyYW1lLCAoKSA9PiByZWplY3QobmV3IEVycm9yKCdQYXltZW50IHdhcyBjYW5jZWxsZWQnKSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChvbkxvYWRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihQQVlNRU5UX0NBTk5PVF9DT05USU5VRSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBtZXNzYWdlRXZlbnQpO1xuXG4gICAgICAgICAgICBsZXQgaWZyYW1lSGlkZGVuOiBIVE1MSUZyYW1lRWxlbWVudDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZnJhbWVIaWRkZW4gPSB0aGlzLl9jcmVhdGVIaWRkZW5JZnJhbWUoZXJyb3IuYm9keSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBtZXNzYWdlRXZlbnQpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihQQVlNRU5UX0NBTk5PVF9DT05USU5VRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NyZWF0ZUhpZGRlbklmcmFtZShib2R5OiBXb3JsZHBheUFjY2Vzc0FkZGl0aW9uYWxBY3Rpb24pOiBIVE1MSUZyYW1lRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblxuICAgICAgICBpZiAoIWlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmcmFtZS5pZCA9IElGUkFNRV9ISURERU5fTkFNRTtcbiAgICAgICAgaWZyYW1lLmhlaWdodCA9ICcwcHgnO1xuICAgICAgICBpZnJhbWUud2lkdGggPSAnMHB4JztcblxuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgICAgICBjb25zdCBmb3JtSWQgPSAnY29sbGVjdGlvbkZvcm0nO1xuXG4gICAgICAgIGZvcm0uaWQgPSBmb3JtSWQ7XG4gICAgICAgIGZvcm0ubmFtZSA9ICdkZXZpY2VkYXRhJztcbiAgICAgICAgZm9ybS5tZXRob2QgPSAncG9zdCc7XG5cbiAgICAgICAgY29uc3QgdXJsID0gYm9keS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZC5kYXRhLnJlZGlyZWN0X3VybDtcblxuICAgICAgICBmb3JtLmFjdGlvbiA9IHVybDtcblxuICAgICAgICBjb25zdCBpbnB1dEJpbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cbiAgICAgICAgaW5wdXRCaW4ubmFtZSA9ICdCaW4nO1xuICAgICAgICBpbnB1dEJpbi50eXBlID0gJ2hpZGRlbic7XG4gICAgICAgIGlucHV0QmluLnZhbHVlID0gYm9keS5wcm92aWRlcl9kYXRhLnNvdXJjZV9pZDtcbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dEJpbik7XG5cbiAgICAgICAgY29uc3QgaW5wdXRKV1QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuXG4gICAgICAgIGlucHV0SldULm5hbWUgPSAnSldUJztcbiAgICAgICAgaW5wdXRKV1QudHlwZSA9ICdoaWRkZW4nO1xuICAgICAgICBpbnB1dEpXVC52YWx1ZSA9IGJvZHkucHJvdmlkZXJfZGF0YS5kYXRhO1xuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGlucHV0SldUKTtcblxuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcblxuICAgICAgICBidXR0b24udHlwZSA9ICdzdWJtaXQnO1xuICAgICAgICBidXR0b24uaWQgPSAnYnRuc3VibWl0JztcbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChidXR0b24pO1xuXG4gICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKCdGaXJlZm94JykpIHtcbiAgICAgICAgICAgIGlmcmFtZS5zcmNkb2MgPSBmb3JtLm91dGVySFRNTDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuICAgICAgICBzY3JpcHQuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJyR7Zm9ybUlkfScpLnN1Ym1pdCgpO1xuICAgICAgICBgO1xuICAgICAgICBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG5cbiAgICAgICAgcmV0dXJuIGlmcmFtZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9jcmVhdGVJZnJhbWUoZGF0YTogV29ybGRwYXlBY2Nlc3MzRFNPcHRpb25zKTogSFRNTElGcmFtZUVsZW1lbnQge1xuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuXG4gICAgICAgIGZvcm0uaWQgPSAnY2hhbGxlbmdlRm9ybSc7XG4gICAgICAgIGZvcm0ubWV0aG9kID0gJ1BPU1QnO1xuICAgICAgICBmb3JtLmFjdGlvbiA9IGRhdGEuYWNzX3VybDtcblxuICAgICAgICBjb25zdCBpbnB1dEpXVCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cbiAgICAgICAgaW5wdXRKV1QubmFtZSA9ICdKV1QnO1xuICAgICAgICBpbnB1dEpXVC50eXBlID0gJ2hpZGRlbic7XG4gICAgICAgIGlucHV0SldULnZhbHVlID0gZGF0YS5wYXllcl9hdXRoX3JlcXVlc3Q7XG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoaW5wdXRKV1QpO1xuXG4gICAgICAgIGNvbnN0IG1lcmNoYW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcblxuICAgICAgICBtZXJjaGFudC5uYW1lID0gJ01EJztcbiAgICAgICAgbWVyY2hhbnQudHlwZSA9ICdoaWRkZW4nO1xuICAgICAgICBtZXJjaGFudC52YWx1ZSA9IGBtZXJjaGFudFNlc3Npb25JZD0ke2RhdGEubWVyY2hhbnRfZGF0YX1gO1xuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKG1lcmNoYW50KTtcblxuICAgICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuICAgICAgICBzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICAgICAgICBzY3JpcHQuaW5uZXJIVE1MID1cbiAgICAgICAgICAgIFwid2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhbGxlbmdlRm9ybScpLnN1Ym1pdCgpOyB9XCI7XG5cbiAgICAgICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG5cbiAgICAgICAgaWZyYW1lLm5hbWUgPSBJRlJBTUVfTkFNRTtcbiAgICAgICAgaWZyYW1lLmhlaWdodCA9ICc0MDAnO1xuICAgICAgICBpZnJhbWUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGlmcmFtZS5zcmNkb2MgPSBgJHtmb3JtLm91dGVySFRNTH0gJHtzY3JpcHQub3V0ZXJIVE1MfWA7XG5cbiAgICAgICAgcmV0dXJuIGlmcmFtZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9zdWJtaXRBZGRpdGlvbmFsQWN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5fc2hvdWxkUmVuZGVySG9zdGVkRm9ybSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9ob3N0ZWRGb3JtKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaG9zdGVkRm9ybSA9IHRoaXMuX2hvc3RlZEZvcm07XG5cbiAgICAgICAgICAgIHJldHVybiBhc3luYyAocGF5bWVudFBheWxvYWQ6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5KSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaG9zdGVkRm9ybS5zdWJtaXQocGF5bWVudFBheWxvYWQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhc3luYyAocGF5bWVudFBheWxvYWQ6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5KSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocGF5bWVudFBheWxvYWQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgX2lzVmFsaWRKc29uV2l0aFNlc3Npb25JZChzdHI6IHN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2Uoc3RyKTtcblxuICAgICAgICAgICAgaWYgKGRhdGEuU2Vzc2lvbklkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBXb3JsZHBheUFjY2Vzc1BheW1ldFN0cmF0ZWd5IGZyb20gJy4vd29ybGRwYXlhY2Nlc3MtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVdvcmxkcGF5QWNjZXNzUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFdvcmxkcGF5QWNjZXNzUGF5bWV0U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICByZXR1cm4gbmV3IFdvcmxkcGF5QWNjZXNzUGF5bWV0U3RyYXRlZ3kocGF5bWVudEludGVncmF0aW9uU2VydmljZSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlV29ybGRwYXlBY2Nlc3NQYXltZW50U3RyYXRlZ3ksIFt7IGlkOiAnd29ybGRwYXlhY2Nlc3MnIH1dKTtcbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIGNvbnNvbGUubG9nKCdyZXNvbHZlSWRzJywgcmVzb2x2ZUlkcyk7XG5cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2R1bGUsIHsgcmVzb2x2ZUlkcyB9KTtcbn1cbiJdLCJuYW1lcyI6WyJOb3RJbml0aWFsaXplZEVycm9yVHlwZSIsIlN0YW5kYXJkRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInByb3RvdHlwZSIsInN1cGVyIiwibmFtZSIsInR5cGUiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInRoaXMiLCJfX3Byb3RvX18iLCJjYXB0dXJlU3RhY2tUcmFjZSIsInN0YWNrIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IiLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiam9pbiIsIk5vdEluaXRpYWxpemVkRXJyb3IiLCJzdWJ0eXBlIiwiQ3VzdG9tZXJOb3RJbml0aWFsaXplZCIsIlBheW1lbnROb3RJbml0aWFsaXplZCIsIlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQiLCJTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkIiwiZ2V0RXJyb3JNZXNzYWdlIiwiQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSIsIl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwiZXhlY3V0ZSIsInBheWxvYWQiLCJvcHRpb25zIiwiX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkIiwicGF5bWVudCIsIm1ldGhvZElkIiwiZ2F0ZXdheUlkIiwiX3Nob3VsZFJlbmRlckhvc3RlZEZvcm0iLCJfZXhlY3V0ZVdpdGhIb3N0ZWRGb3JtIiwiX2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybSIsImluaXRpYWxpemUiLCJfaXNIb3N0ZWRGaWVsZEF2YWlsYWJsZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZm9ybU9wdGlvbnMiLCJjcmVkaXRDYXJkIiwiZm9ybSIsInN0YXRlIiwiZ2V0U3RhdGUiLCJwYXltZW50U2V0dGluZ3MiLCJiaWdwYXlCYXNlVXJsIiwiaG9zdCIsImdldFN0b3JlQ29uZmlnT3JUaHJvdyIsImNyZWF0ZUhvc3RlZEZvcm0iLCJhdHRhY2giLCJ0aGVuIiwiX2hvc3RlZEZvcm0iLCJkZWluaXRpYWxpemUiLCJkZXRhY2giLCJmaW5hbGl6ZSIsInJlamVjdCIsIm9yZGVyIiwicGF5bWVudERhdGEiLCJzdWJtaXRPcmRlciIsInN1Ym1pdFBheW1lbnQiLCJ2YWxpZGF0ZSIsInN1Ym1pdCIsImdldFBheW1lbnRNZXRob2RPclRocm93IiwiY29uZmlnIiwiaXNIb3N0ZWRGb3JtRW5hYmxlZCIsInZhbHVlcyIsImZpZWxkcyIsImV2ZXJ5IiwiaXNOaWwiLCJlcnJvciIsIlBBWU1FTlRfQ0FOTk9UX0NPTlRJTlVFIiwiV29ybGRwYXlBY2Nlc3NQYXltZW50U3RyYXRlZ3kiLCJfaW5pdGlhbGl6ZU9wdGlvbnMiLCJ3b3JsZHBheSIsIm9yZGVyUmVxdWVzdCIsIl9zdWJtaXRBZGRpdGlvbmFsQWN0aW9uIiwiX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uIiwic29tZSIsImJvZHkiLCJlcnJvcnMiLCJjb2RlIiwibWVzc2FnZUV2ZW50IiwiZXZlbnQiLCJkYXRhIiwiX2lzVmFsaWRKc29uV2l0aFNlc3Npb25JZCIsIndpbmRvdyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpZnJhbWVIaWRkZW4iLCJyZW1vdmUiLCJKU09OIiwicGFyc2UiLCJwYXltZW50UGF5bG9hZCIsIm1lcmdlIiwidGhyZWVEU2VjdXJlIiwidG9rZW4iLCJTZXNzaW9uSWQiLCJzdWJtaXRFcnJvciIsIm9uTG9hZCIsImZyYW1lIiwiX2NyZWF0ZUlmcmFtZSIsInRocmVlX2RzX3Jlc3VsdCIsIm9uTG9hZEVycm9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jcmVhdGVIaWRkZW5JZnJhbWUiLCJlIiwiaWZyYW1lIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJjb250ZW50V2luZG93IiwiaWQiLCJoZWlnaHQiLCJ3aWR0aCIsImZvcm1JZCIsIm1ldGhvZCIsInVybCIsImFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkIiwicmVkaXJlY3RfdXJsIiwiYWN0aW9uIiwiaW5wdXRCaW4iLCJ2YWx1ZSIsInByb3ZpZGVyX2RhdGEiLCJzb3VyY2VfaWQiLCJpbnB1dEpXVCIsImJ1dHRvbiIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIm1hdGNoIiwic3JjZG9jIiwib3V0ZXJIVE1MIiwic2NyaXB0IiwiaW5uZXJIVE1MIiwiYWNzX3VybCIsInBheWVyX2F1dGhfcmVxdWVzdCIsIm1lcmNoYW50IiwibWVyY2hhbnRfZGF0YSIsImhvc3RlZEZvcm0iLCJzdHIiLCJtb2R1bGUiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwicmVzb2x2ZUlkcyIsImNvbnNvbGUiLCJsb2ciLCJhc3NpZ24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/worldpayaccess.js\n\n}");

/***/ }),

/***/ "./packages/hosted-credit-card-integration/src/hooks/useHostedCreditCard.tsx":
/*!***********************************************************************************!*\
  !*** ./packages/hosted-credit-card-integration/src/hooks/useHostedCreditCard.tsx ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useHostedCreditCard: () => (/* binding */ useHostedCreditCard)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/creditCard/getCreditCardInputStyles/getCreditCardInputStyles.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components */ \"./packages/hosted-credit-card-integration/src/components/HostedCreditCardValidation/HostedCreditCardValidation.tsx\");\n\n\n\n\n\nconst useHostedCreditCard = ({ checkoutState, method, language, paymentForm, }) => {\n    const { setFieldTouched, setFieldValue, setSubmitted, submitForm } = paymentForm;\n    const { config } = method;\n    const { cardCode: requireCardCode } = config;\n    const isCardCodeRequired = requireCardCode || requireCardCode === null;\n    const isInstrumentCardCodeRequiredProp = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(checkoutState);\n    const isInstrumentCardNumberRequiredProp = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(checkoutState);\n    const getHostedFieldId = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((name) => {\n        return `${(0,lodash__WEBPACK_IMPORTED_MODULE_1__.compact)([method.gateway, method.id]).join('-')}-${name}`;\n    }, [method]);\n    const [focusedFieldType, setFocusedFieldType] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n    const getHostedStoredCardValidationFieldset = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((selectedInstrument) => {\n        const isInstrumentCardNumberRequired = selectedInstrument\n            ? isInstrumentCardNumberRequiredProp(selectedInstrument, method)\n            : false;\n        const isInstrumentCardCodeRequired = selectedInstrument\n            ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n            : false;\n        return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { cardCodeId: isInstrumentCardCodeRequired ? getHostedFieldId('ccCvv') : undefined, cardNumberId: isInstrumentCardNumberRequired\n                ? getHostedFieldId('ccNumber')\n                : undefined, focusedFieldType: focusedFieldType }));\n    }, [\n        focusedFieldType,\n        getHostedFieldId,\n        isInstrumentCardCodeRequiredProp,\n        isInstrumentCardNumberRequiredProp,\n        method,\n    ]);\n    const getHostedFormOptions = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        const styleProps = ['color', 'fontFamily', 'fontSize', 'fontWeight'];\n        const isInstrumentCardNumberRequired = selectedInstrument\n            ? isInstrumentCardNumberRequiredProp(selectedInstrument, method)\n            : false;\n        const isInstrumentCardCodeRequired = selectedInstrument\n            ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n            : false;\n        let styleContainerId;\n        if (selectedInstrument) {\n            if (isInstrumentCardCodeRequired) {\n                styleContainerId = getHostedFieldId('ccCvv');\n            }\n            else if (isInstrumentCardNumberRequired) {\n                styleContainerId = getHostedFieldId('ccNumber');\n            }\n        }\n        else {\n            styleContainerId = getHostedFieldId('ccNumber');\n        }\n        return {\n            fields: selectedInstrument\n                ? {\n                    cardCodeVerification: isInstrumentCardCodeRequired && selectedInstrument\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_cvv_label'),\n                            containerId: getHostedFieldId('ccCvv'),\n                            instrumentId: selectedInstrument.bigpayToken,\n                        }\n                        : undefined,\n                    cardNumberVerification: isInstrumentCardNumberRequired && selectedInstrument\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_number_label'),\n                            containerId: getHostedFieldId('ccNumber'),\n                            instrumentId: selectedInstrument.bigpayToken,\n                        }\n                        : undefined,\n                }\n                : {\n                    cardCode: isCardCodeRequired\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_cvv_label'),\n                            containerId: getHostedFieldId('ccCvv'),\n                        }\n                        : undefined,\n                    cardExpiry: {\n                        accessibilityLabel: language.translate('payment.credit_card_expiration_label'),\n                        containerId: getHostedFieldId('ccExpiry'),\n                        placeholder: language.translate('payment.credit_card_expiration_placeholder_text'),\n                    },\n                    cardName: {\n                        accessibilityLabel: language.translate('payment.credit_card_name_label'),\n                        containerId: getHostedFieldId('ccName'),\n                    },\n                    cardNumber: {\n                        accessibilityLabel: language.translate('payment.credit_card_number_label'),\n                        containerId: getHostedFieldId('ccNumber'),\n                    },\n                },\n            styles: styleContainerId\n                ? {\n                    default: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(styleContainerId, styleProps),\n                    error: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(styleContainerId, styleProps, _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__.CreditCardInputStylesType.Error),\n                    focus: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(styleContainerId, styleProps, _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__.CreditCardInputStylesType.Focus),\n                }\n                : {},\n            onBlur: ({ fieldType }) => {\n                if (focusedFieldType === fieldType) {\n                    setFocusedFieldType(undefined);\n                }\n            },\n            onCardTypeChange: ({ cardType }) => {\n                setFieldValue('hostedForm.cardType', cardType);\n            },\n            onEnter: () => {\n                setSubmitted(true);\n                submitForm();\n            },\n            onFocus: ({ fieldType }) => {\n                setFocusedFieldType(fieldType);\n            },\n            onValidate: ({ errors = {} }) => {\n                (0,lodash__WEBPACK_IMPORTED_MODULE_1__.forIn)(errors, (fieldErrors = [], fieldType) => {\n                    var _a, _b;\n                    const errorKey = `hostedForm.errors.${fieldType}`;\n                    setFieldValue(errorKey, (_b = (_a = fieldErrors[0]) === null || _a === void 0 ? void 0 : _a.type) !== null && _b !== void 0 ? _b : '');\n                    if (fieldErrors[0]) {\n                        setFieldTouched(errorKey);\n                    }\n                });\n            },\n        };\n    }), [\n        focusedFieldType,\n        getHostedFieldId,\n        isCardCodeRequired,\n        isInstrumentCardCodeRequiredProp,\n        isInstrumentCardNumberRequiredProp,\n        language,\n        method,\n        setFieldTouched,\n        setFieldValue,\n        setSubmitted,\n        submitForm,\n    ]);\n    return { getHostedStoredCardValidationFieldset, getHostedFormOptions };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9ob3N0ZWQtY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24vc3JjL2hvb2tzL3VzZUhvc3RlZENyZWRpdENhcmQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBT3dDO0FBQzZCO0FBT3JCO0FBR1c7QUFTcEQsTUFBTSxtQkFBbUIsR0FBRyxDQUFDLEVBQ2hDLGFBQWEsRUFDYixNQUFNLEVBQ04sUUFBUSxFQUNSLFdBQVcsR0FDUSxFQUFFLEVBQUU7SUFDdkIsTUFBTSxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxHQUFHLFdBQVcsQ0FBQztJQUNqRixNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDO0lBQzFCLE1BQU0sRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFLEdBQUcsTUFBTSxDQUFDO0lBRTdDLE1BQU0sa0JBQWtCLEdBQUcsZUFBZSxJQUFJLGVBQWUsS0FBSyxJQUFJLENBQUM7SUFDdkUsTUFBTSxnQ0FBZ0MsR0FBRyxrRkFBb0MsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUM3RixNQUFNLGtDQUFrQyxHQUNwQyxrRkFBc0MsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUUxRCxNQUFNLGdCQUFnQixHQUE2QixrREFBVyxDQUMxRCxDQUFDLElBQUksRUFBRSxFQUFFO1FBQ0wsT0FBTyxHQUFHLCtDQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQztJQUN2RSxDQUFDLEVBQ0QsQ0FBQyxNQUFNLENBQUMsQ0FDWCxDQUFDO0lBRUYsTUFBTSxDQUFDLGdCQUFnQixFQUFFLG1CQUFtQixDQUFDLEdBQUcsK0NBQVEsRUFBVSxDQUFDO0lBRW5FLE1BQU0scUNBQXFDLEdBQ3ZDLGtEQUFXLENBQ1AsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFO1FBQ25CLE1BQU0sOEJBQThC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LENBQUMsQ0FBQztZQUNuRCxDQUFDO1lBQ0QsT0FBTyxFQUFFLEdBQUcsRUFBRTtnQkFDVixZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ25CLFVBQVUsRUFBRSxDQUFDO1lBQ2pCLENBQUM7WUFDRCxPQUFPLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUU7Z0JBQ3ZCLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ25DLENBQUM7WUFDRCxVQUFVLEVBQUUsQ0FBQyxFQUFFLE1BQU0sR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFO2dCQUM1Qiw2Q0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLFdBQVcsR0FBRyxFQUFFLEVBQUUsU0FBUyxFQUFFLEVBQUU7O29CQUMxQyxNQUFNLFFBQVEsR0FBRyxxQkFBcUIsU0FBUyxFQUFFLENBQUM7b0JBRWxELGFBQWEsQ0FBQyxRQUFRLEVBQUUsdUJBQVcsQ0FBQyxDQUFDLENBQUMsMENBQUUsSUFBSSxtQ0FBSSxFQUFFLENBQUMsQ0FBQztvQkFFcEQsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQzt3QkFDakIsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUM5QixDQUFDO2dCQUNMLENBQUMsQ0FBQyxDQUFDO1lBQ1AsQ0FBQztTQUNKLENBQUM7SUFDTixDQUFDLEdBQ0Q7UUFDSSxnQkFBZ0I7UUFDaEIsZ0JBQWdCO1FBQ2hCLGtCQUFrQjtRQUNsQixnQ0FBZ0M7UUFDaEMsa0NBQWtDO1FBQ2xDLFFBQVE7UUFDUixNQUFNO1FBQ04sZUFBZTtRQUNmLGFBQWE7UUFDYixZQUFZO1FBQ1osVUFBVTtLQUNiLENBQ0osQ0FBQztJQUVGLE9BQU8sRUFBRSxxQ0FBcUMsRUFBRSxvQkFBb0IsRUFBRSxDQUFDO0FBQzNFLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvaG9zdGVkLWNyZWRpdC1jYXJkLWludGVncmF0aW9uL3NyYy9ob29rcy91c2VIb3N0ZWRDcmVkaXRDYXJkLnRzeD8zZmMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgdHlwZSBDYXJkSW5zdHJ1bWVudCxcbiAgICB0eXBlIENoZWNrb3V0U2VsZWN0b3JzLFxuICAgIHR5cGUgTGFuZ3VhZ2VTZXJ2aWNlLFxuICAgIHR5cGUgTGVnYWN5SG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgdHlwZSBQYXltZW50TWV0aG9kLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrJztcbmltcG9ydCB7IGNvbXBhY3QsIGZvckluIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBSZWFjdCwgeyB0eXBlIFJlYWN0Tm9kZSwgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQge1xuICAgIENyZWRpdENhcmRJbnB1dFN0eWxlc1R5cGUsXG4gICAgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzLFxuICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRTZWxlY3RvcixcbiAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3Rvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2luc3RydW1lbnQtdXRpbHMnO1xuaW1wb3J0IHsgdHlwZSBQYXltZW50Rm9ybVNlcnZpY2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBIb3N0ZWRDcmVkaXRDYXJkVmFsaWRhdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFVzZUhvc3RlZEZvcm1PcHRpb25zIHtcbiAgICBjaGVja291dFN0YXRlOiBDaGVja291dFNlbGVjdG9ycztcbiAgICBsYW5ndWFnZTogTGFuZ3VhZ2VTZXJ2aWNlO1xuICAgIG1ldGhvZDogUGF5bWVudE1ldGhvZDtcbiAgICBwYXltZW50Rm9ybTogUGF5bWVudEZvcm1TZXJ2aWNlO1xufVxuXG5leHBvcnQgY29uc3QgdXNlSG9zdGVkQ3JlZGl0Q2FyZCA9ICh7XG4gICAgY2hlY2tvdXRTdGF0ZSxcbiAgICBtZXRob2QsXG4gICAgbGFuZ3VhZ2UsXG4gICAgcGF5bWVudEZvcm0sXG59OiBVc2VIb3N0ZWRGb3JtT3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHsgc2V0RmllbGRUb3VjaGVkLCBzZXRGaWVsZFZhbHVlLCBzZXRTdWJtaXR0ZWQsIHN1Ym1pdEZvcm0gfSA9IHBheW1lbnRGb3JtO1xuICAgIGNvbnN0IHsgY29uZmlnIH0gPSBtZXRob2Q7XG4gICAgY29uc3QgeyBjYXJkQ29kZTogcmVxdWlyZUNhcmRDb2RlIH0gPSBjb25maWc7XG5cbiAgICBjb25zdCBpc0NhcmRDb2RlUmVxdWlyZWQgPSByZXF1aXJlQ2FyZENvZGUgfHwgcmVxdWlyZUNhcmRDb2RlID09PSBudWxsO1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRQcm9wID0gaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpO1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFByb3AgPVxuICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3RvcihjaGVja291dFN0YXRlKTtcblxuICAgIGNvbnN0IGdldEhvc3RlZEZpZWxkSWQ6IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZyA9IHVzZUNhbGxiYWNrKFxuICAgICAgICAobmFtZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGAke2NvbXBhY3QoW21ldGhvZC5nYXRld2F5LCBtZXRob2QuaWRdKS5qb2luKCctJyl9LSR7bmFtZX1gO1xuICAgICAgICB9LFxuICAgICAgICBbbWV0aG9kXSxcbiAgICApO1xuXG4gICAgY29uc3QgW2ZvY3VzZWRGaWVsZFR5cGUsIHNldEZvY3VzZWRGaWVsZFR5cGVdID0gdXNlU3RhdGU8c3RyaW5nPigpO1xuXG4gICAgY29uc3QgZ2V0SG9zdGVkU3RvcmVkQ2FyZFZhbGlkYXRpb25GaWVsZHNldDogKHNlbGVjdGVkSW5zdHJ1bWVudDogQ2FyZEluc3RydW1lbnQpID0+IFJlYWN0Tm9kZSA9XG4gICAgICAgIHVzZUNhbGxiYWNrKFxuICAgICAgICAgICAgKHNlbGVjdGVkSW5zdHJ1bWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCA9IHNlbGVjdGVkSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgICAgICA/IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFByb3Aoc2VsZWN0ZWRJbnN0cnVtZW50LCBtZXRob2QpXG4gICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCA9IHNlbGVjdGVkSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgICAgICA/IGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRQcm9wKHNlbGVjdGVkSW5zdHJ1bWVudCwgbWV0aG9kKVxuICAgICAgICAgICAgICAgICAgICA6IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPEhvc3RlZENyZWRpdENhcmRWYWxpZGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkQ29kZUlkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkID8gZ2V0SG9zdGVkRmllbGRJZCgnY2NDdnYnKSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlcklkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRIb3N0ZWRGaWVsZElkKCdjY051bWJlcicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1c2VkRmllbGRUeXBlPXtmb2N1c2VkRmllbGRUeXBlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIGZvY3VzZWRGaWVsZFR5cGUsXG4gICAgICAgICAgICAgICAgZ2V0SG9zdGVkRmllbGRJZCxcbiAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkUHJvcCxcbiAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRQcm9wLFxuICAgICAgICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICk7XG5cbiAgICBjb25zdCBnZXRIb3N0ZWRGb3JtT3B0aW9ucyA9IHVzZUNhbGxiYWNrKFxuICAgICAgICBhc3luYyAoc2VsZWN0ZWRJbnN0cnVtZW50OiBDYXJkSW5zdHJ1bWVudCk6IFByb21pc2U8TGVnYWN5SG9zdGVkRm9ybU9wdGlvbnM+ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlUHJvcHMgPSBbJ2NvbG9yJywgJ2ZvbnRGYW1pbHknLCAnZm9udFNpemUnLCAnZm9udFdlaWdodCddO1xuICAgICAgICAgICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkID0gc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgPyBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRQcm9wKHNlbGVjdGVkSW5zdHJ1bWVudCwgbWV0aG9kKVxuICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkID0gc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgPyBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkUHJvcChzZWxlY3RlZEluc3RydW1lbnQsIG1ldGhvZClcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHN0eWxlQ29udGFpbmVySWQ7XG5cbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEluc3RydW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lcklkID0gZ2V0SG9zdGVkRmllbGRJZCgnY2NDdnYnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lcklkID0gZ2V0SG9zdGVkRmllbGRJZCgnY2NOdW1iZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0eWxlQ29udGFpbmVySWQgPSBnZXRIb3N0ZWRGaWVsZElkKCdjY051bWJlcicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkczogc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkQ29kZVZlcmlmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWQgJiYgc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50LmNyZWRpdF9jYXJkX2N2dl9sYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogZ2V0SG9zdGVkRmllbGRJZCgnY2NDdnYnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQ6IHNlbGVjdGVkSW5zdHJ1bWVudC5iaWdwYXlUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlclZlcmlmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCAmJiBzZWxlY3RlZEluc3RydW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY051bWJlcicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZDogc2VsZWN0ZWRJbnN0cnVtZW50LmJpZ3BheVRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRDb2RlOiBpc0NhcmRDb2RlUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfY3Z2X2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogZ2V0SG9zdGVkRmllbGRJZCgnY2NDdnYnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRFeHBpcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbDogbGFuZ3VhZ2UudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50LmNyZWRpdF9jYXJkX2V4cGlyYXRpb25fbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY0V4cGlyeScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGF5bWVudC5jcmVkaXRfY2FyZF9leHBpcmF0aW9uX3BsYWNlaG9sZGVyX3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbDogbGFuZ3VhZ2UudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50LmNyZWRpdF9jYXJkX25hbWVfbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY05hbWUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogZ2V0SG9zdGVkRmllbGRJZCgnY2NOdW1iZXInKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN0eWxlczogc3R5bGVDb250YWluZXJJZFxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYXdhaXQgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzKHN0eWxlQ29udGFpbmVySWQsIHN0eWxlUHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYXdhaXQgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVDb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlUHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRDYXJkSW5wdXRTdHlsZXNUeXBlLkVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1czogYXdhaXQgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVDb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlUHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRDYXJkSW5wdXRTdHlsZXNUeXBlLkZvY3VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgICAgICAgICBvbkJsdXI6ICh7IGZpZWxkVHlwZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb2N1c2VkRmllbGRUeXBlID09PSBmaWVsZFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZvY3VzZWRGaWVsZFR5cGUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25DYXJkVHlwZUNoYW5nZTogKHsgY2FyZFR5cGUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRGaWVsZFZhbHVlKCdob3N0ZWRGb3JtLmNhcmRUeXBlJywgY2FyZFR5cGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25FbnRlcjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRTdWJtaXR0ZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdEZvcm0oKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uRm9jdXM6ICh7IGZpZWxkVHlwZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldEZvY3VzZWRGaWVsZFR5cGUoZmllbGRUeXBlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uVmFsaWRhdGU6ICh7IGVycm9ycyA9IHt9IH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ySW4oZXJyb3JzLCAoZmllbGRFcnJvcnMgPSBbXSwgZmllbGRUeXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvcktleSA9IGBob3N0ZWRGb3JtLmVycm9ycy4ke2ZpZWxkVHlwZX1gO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRGaWVsZFZhbHVlKGVycm9yS2V5LCBmaWVsZEVycm9yc1swXT8udHlwZSA/PyAnJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZEVycm9yc1swXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEZpZWxkVG91Y2hlZChlcnJvcktleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBbXG4gICAgICAgICAgICBmb2N1c2VkRmllbGRUeXBlLFxuICAgICAgICAgICAgZ2V0SG9zdGVkRmllbGRJZCxcbiAgICAgICAgICAgIGlzQ2FyZENvZGVSZXF1aXJlZCxcbiAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRQcm9wLFxuICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkUHJvcCxcbiAgICAgICAgICAgIGxhbmd1YWdlLFxuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgc2V0RmllbGRUb3VjaGVkLFxuICAgICAgICAgICAgc2V0RmllbGRWYWx1ZSxcbiAgICAgICAgICAgIHNldFN1Ym1pdHRlZCxcbiAgICAgICAgICAgIHN1Ym1pdEZvcm0sXG4gICAgICAgIF0sXG4gICAgKTtcblxuICAgIHJldHVybiB7IGdldEhvc3RlZFN0b3JlZENhcmRWYWxpZGF0aW9uRmllbGRzZXQsIGdldEhvc3RlZEZvcm1PcHRpb25zIH07XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/hosted-credit-card-integration/src/hooks/useHostedCreditCard.tsx\n\n}");

/***/ }),

/***/ "./packages/worldpay-access-integration/src/WorldpayCreditCardPaymentMethod.tsx":
/*!**************************************************************************************!*\
  !*** ./packages/worldpay-access-integration/src/WorldpayCreditCardPaymentMethod.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_worldpayaccess__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/worldpayaccess */ \"../checkout-sdk-js/dist/esm/integrations/worldpayaccess.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _bigcommerce_checkout_credit_card_integration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/credit-card-integration */ \"./packages/credit-card-integration/src/CreditCardPaymentMethodContainer.tsx\");\n/* harmony import */ var _bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-credit-card-integration */ \"./packages/hosted-credit-card-integration/src/hooks/useHostedCreditCard.tsx\");\n/* harmony import */ var _bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-credit-card-integration */ \"./packages/hosted-credit-card-integration/src/components/getHostedInstrumentValidationSchema/getHostedInstrumentValidationSchema.ts\");\n/* harmony import */ var _bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-credit-card-integration */ \"./packages/hosted-credit-card-integration/src/components/getHostedCreditCardValidationSchema/getHostedCreditCardValidationSchema.ts\");\n/* harmony import */ var _bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-credit-card-integration */ \"./packages/hosted-credit-card-integration/src/components/HostedCreditCardFieldset/HostedCreditCardFieldset.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/creditCard/getCreditCardInputStyles/getCreditCardInputStyles.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/creditCard/CreditCardCustomerCodeField.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/modal/Modal.tsx\");\n\n\n\n\n\n\n\n\n\nconst WorldpayCreditCardPaymentMethod = (_a) => {\n    var { language, paymentForm, checkoutState, checkoutService, method } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"language\", \"paymentForm\", \"checkoutState\", \"checkoutService\", \"method\"]);\n    const [threeDSecureVerification, setThreeDSecureVerification] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();\n    const [focusedFieldType, setFocusedFieldType] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();\n    const { getHostedStoredCardValidationFieldset } = (0,_bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_5__.useHostedCreditCard)({\n        checkoutState,\n        method,\n        language,\n        paymentForm,\n    });\n    const { setFieldTouched, setFieldValue, setSubmitted, submitForm } = paymentForm;\n    const isInstrumentCardCodeRequiredProp = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(checkoutState);\n    const isInstrumentCardNumberRequiredProp = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(checkoutState);\n    const { config: { cardCode }, } = method;\n    const isCardCodeRequired = cardCode || cardCode === null;\n    const getHostedFieldId = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((name) => {\n        return `${(0,lodash__WEBPACK_IMPORTED_MODULE_2__.compact)([method.gateway, method.id]).join('-')}-${name}`;\n    }, [method]);\n    const hostedStoredCardValidationSchema = (0,_bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_6__[\"default\"])({ language });\n    const ref = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)({\n        paymentPageContentRef: (0,react__WEBPACK_IMPORTED_MODULE_3__.createRef)(),\n    });\n    const getHostedFormOptions = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        const styleProps = ['color', 'fontFamily', 'fontSize', 'fontWeight'];\n        const isInstrumentCardNumberRequired = selectedInstrument\n            ? isInstrumentCardNumberRequiredProp(selectedInstrument)\n            : false;\n        const isInstrumentCardCodeRequired = selectedInstrument\n            ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n            : false;\n        const styleContainerId = selectedInstrument\n            ? isInstrumentCardCodeRequired\n                ? getHostedFieldId('ccCvv')\n                : undefined\n            : getHostedFieldId('ccNumber');\n        return {\n            fields: selectedInstrument\n                ? {\n                    cardCodeVerification: isInstrumentCardCodeRequired && selectedInstrument\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_cvv_label'),\n                            containerId: getHostedFieldId('ccCvv'),\n                            instrumentId: selectedInstrument.bigpayToken,\n                        }\n                        : undefined,\n                    cardNumberVerification: isInstrumentCardNumberRequired && selectedInstrument\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_number_label'),\n                            containerId: getHostedFieldId('ccNumber'),\n                            instrumentId: selectedInstrument.bigpayToken,\n                        }\n                        : undefined,\n                }\n                : {\n                    cardCode: isCardCodeRequired\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_cvv_label'),\n                            containerId: getHostedFieldId('ccCvv'),\n                        }\n                        : undefined,\n                    cardExpiry: {\n                        accessibilityLabel: language.translate('payment.credit_card_expiration_label'),\n                        containerId: getHostedFieldId('ccExpiry'),\n                        placeholder: language.translate('payment.credit_card_expiration_placeholder_text'),\n                    },\n                    cardName: {\n                        accessibilityLabel: language.translate('payment.credit_card_name_label'),\n                        containerId: getHostedFieldId('ccName'),\n                    },\n                    cardNumber: {\n                        accessibilityLabel: language.translate('payment.credit_card_number_label'),\n                        containerId: getHostedFieldId('ccNumber'),\n                    },\n                },\n            styles: styleContainerId\n                ? {\n                    default: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(styleContainerId, styleProps),\n                    error: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(styleContainerId, styleProps, _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__.CreditCardInputStylesType.Error),\n                    focus: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(styleContainerId, styleProps, _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__.CreditCardInputStylesType.Focus),\n                }\n                : {},\n            onBlur: ({ fieldType }) => {\n                if (focusedFieldType === fieldType) {\n                    setFocusedFieldType(undefined);\n                }\n            },\n            onCardTypeChange: ({ cardType }) => {\n                setFieldValue('hostedForm.cardType', cardType);\n            },\n            onEnter: () => {\n                setSubmitted(true);\n                submitForm();\n            },\n            onFocus: ({ fieldType }) => {\n                setFocusedFieldType(fieldType);\n            },\n            onValidate: ({ errors = {} }) => {\n                (0,lodash__WEBPACK_IMPORTED_MODULE_2__.forIn)(errors, (fieldErrors = [], fieldType) => {\n                    var _a, _b;\n                    const errorKey = `hostedForm.errors.${fieldType}`;\n                    setFieldValue(errorKey, (_b = (_a = fieldErrors[0]) === null || _a === void 0 ? void 0 : _a.type) !== null && _b !== void 0 ? _b : '');\n                    if (fieldErrors[0]) {\n                        setFieldTouched(errorKey);\n                    }\n                });\n            },\n        };\n    }), [\n        focusedFieldType,\n        getHostedFieldId,\n        isCardCodeRequired,\n        isInstrumentCardCodeRequiredProp,\n        isInstrumentCardNumberRequiredProp,\n        language,\n        method,\n        setFieldValue,\n        setFieldTouched,\n        setFocusedFieldType,\n        setSubmitted,\n        submitForm,\n    ]);\n    const cancelWorldpayModalFlow = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n        setThreeDSecureVerification(undefined);\n        if (ref.current.cancelThreeDSecureVerification) {\n            ref.current.cancelThreeDSecureVerification();\n            ref.current.cancelThreeDSecureVerification = undefined;\n        }\n    }, []);\n    const initializeWorldpayPayment = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((options, selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        return checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_worldpayaccess__WEBPACK_IMPORTED_MODULE_1__.createWorldpayAccessPaymentStrategy], creditCard: {\n                form: getHostedFormOptions && (yield getHostedFormOptions(selectedInstrument)),\n            }, worldpay: {\n                onLoad(content, cancel) {\n                    setThreeDSecureVerification(content);\n                    ref.current.cancelThreeDSecureVerification = cancel;\n                },\n            } }));\n    }), [checkoutService, getHostedFormOptions]);\n    const hostedValidationSchema = (0,_bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_7__[\"default\"])({ language });\n    const appendPaymentPageContent = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n        var _a;\n        if (threeDSecureVerification) {\n            (_a = ref.current.paymentPageContentRef.current) === null || _a === void 0 ? void 0 : _a.appendChild(threeDSecureVerification);\n        }\n    }, [threeDSecureVerification]);\n    return (react__WEBPACK_IMPORTED_MODULE_3___default().createElement((react__WEBPACK_IMPORTED_MODULE_3___default().Fragment), null,\n        react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_credit_card_integration__WEBPACK_IMPORTED_MODULE_4__[\"default\"], Object.assign({}, rest, { cardFieldset: react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_8__[\"default\"], { additionalFields: method.config.requireCustomerCode && (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_10__[\"default\"], { name: \"ccCustomerCode\" })), cardCodeId: isCardCodeRequired ? getHostedFieldId('ccCvv') : undefined, cardExpiryId: getHostedFieldId('ccExpiry'), cardNameId: getHostedFieldId('ccName'), cardNumberId: getHostedFieldId('ccNumber'), focusedFieldType: focusedFieldType }), cardValidationSchema: hostedValidationSchema, checkoutService: checkoutService, checkoutState: checkoutState, deinitializePayment: checkoutService.deinitializePayment, getStoredCardValidationFieldset: getHostedStoredCardValidationFieldset, initializePayment: initializeWorldpayPayment, language: language, method: method, paymentForm: paymentForm, storedCardValidationSchema: hostedStoredCardValidationSchema })),\n        react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_14__[\"default\"], { isOpen: !!threeDSecureVerification, onAfterOpen: appendPaymentPageContent, onRequestClose: cancelWorldpayModalFlow, shouldShowCloseButton: true },\n            react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { ref: ref.current.paymentPageContentRef }))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(WorldpayCreditCardPaymentMethod, [{ id: 'worldpayaccess' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy93b3JsZHBheS1hY2Nlc3MtaW50ZWdyYXRpb24vc3JjL1dvcmxkcGF5Q3JlZGl0Q2FyZFBheW1lbnRNZXRob2QudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLNEc7QUFDcEU7QUFRekI7QUFFa0Y7QUFNbkM7QUFPZDtBQUtPO0FBQ047QUFPakQsTUFBTSwrQkFBK0IsR0FBMEMsQ0FBQyxFQU8vRSxFQUFFLEVBQUU7UUFQMkUsRUFDNUUsUUFBUSxFQUNSLFdBQVcsRUFDWCxhQUFhLEVBQ2IsZUFBZSxFQUNmLE1BQU0sT0FFVCxFQURNLElBQUkscURBTnFFLHlFQU8vRSxDQURVO0lBRVAsTUFBTSxDQUFDLHdCQUF3QixFQUFFLDJCQUEyQixDQUFDLEdBQUcsK0NBQVEsRUFBZSxDQUFDO0lBQ3hGLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxtQkFBbUIsQ0FBQyxHQUFHLCtDQUFRLEVBQVUsQ0FBQztJQUNuRSxNQUFNLEVBQUUscUNBQXFDLEVBQUUsR0FBRyx5R0FBbUIsQ0FBQztRQUNsRSxhQUFhO1FBQ2IsTUFBTTtRQUNOLFFBQVE7UUFDUixXQUFXO0tBQ2QsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxHQUFHLFdBQVcsQ0FBQztJQUVqRixNQUFNLGdDQUFnQyxHQUFHLG1GQUFvQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQzdGLE1BQU0sa0NBQWtDLEdBQ3BDLG1GQUFzQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBRTFELE1BQU0sRUFDRixNQUFNLEVBQUUsRUFBRSxRQUFRLEVBQUUsR0FDdkIsR0FBRyxNQUFNLENBQUM7SUFDWCxNQUFNLGtCQUFrQixHQUFHLFFBQVEsSUFBSSxRQUFRLEtBQUssSUFBSSxDQUFDO0lBQ3pELE1BQU0sZ0JBQWdCLEdBQTZCLGtEQUFXLENBQzFELENBQUMsSUFBSSxFQUFFLEVBQUU7UUFDTCxPQUFPLEdBQUcsK0NBQU8s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QWUsQ0FBQyxtQkFBbUIsRUFDeEQsK0JBQStCLEVBQUUscUNBQXFDLEVBQ3RFLGlCQUFpQixFQUFFLHlCQUF5QixFQUM1QyxRQUFRLEVBQUUsUUFBUSxFQUNsQixNQUFNLEVBQUUsTUFBTSxFQUNkLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLDBCQUEwQixFQUFFLGdDQUFnQyxJQUM5RDtRQUNGLDJEQUFDLGlFQUFLLElBQ0YsTUFBTSxFQUFFLENBQUMsQ0FBQyx3QkFBd0IsRUFDbEMsV0FBVyxFQUFFLHdCQUF3QixFQUNyQyxjQUFjLEVBQUUsdUJBQXVCLEVBQ3ZDLHFCQUFxQixFQUFFLElBQUk7WUFFM0Isb0VBQUssR0FBRyxFQUFFLEdBQUcsQ0FBQyxPQUFPLENBQUMscUJBQXFCLEdBQUksQ0FDM0MsQ0FDVCxDQUNOLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSwwRkFBcUIsQ0FDaEMsK0JBQStCLEVBQy9CLENBQUMsRUFBRSxFQUFFLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQyxDQUM3QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy93b3JsZHBheS1hY2Nlc3MtaW50ZWdyYXRpb24vc3JjL1dvcmxkcGF5Q3JlZGl0Q2FyZFBheW1lbnRNZXRob2QudHN4PzRhMjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICB0eXBlIENhcmRJbnN0cnVtZW50LFxuICAgIHR5cGUgTGVnYWN5SG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgdHlwZSBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsnO1xuaW1wb3J0IHsgY3JlYXRlV29ybGRwYXlBY2Nlc3NQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2ludGVncmF0aW9ucy93b3JsZHBheWFjY2Vzcyc7XG5pbXBvcnQgeyBjb21wYWN0LCBmb3JJbiB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHtcbiAgICBjcmVhdGVSZWYsXG4gICAgdHlwZSBGdW5jdGlvbkNvbXBvbmVudCxcbiAgICB0eXBlIFJlZk9iamVjdCxcbiAgICB1c2VDYWxsYmFjayxcbiAgICB1c2VSZWYsXG4gICAgdXNlU3RhdGUsXG59IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgQ3JlZGl0Q2FyZFBheW1lbnRNZXRob2RDb21wb25lbnQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHtcbiAgICBnZXRIb3N0ZWRDcmVkaXRDYXJkVmFsaWRhdGlvblNjaGVtYSxcbiAgICBnZXRIb3N0ZWRJbnN0cnVtZW50VmFsaWRhdGlvblNjaGVtYSxcbiAgICBIb3N0ZWRDcmVkaXRDYXJkRmllbGRzZXQsXG4gICAgdXNlSG9zdGVkQ3JlZGl0Q2FyZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2hvc3RlZC1jcmVkaXQtY2FyZC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIENyZWRpdENhcmRDdXN0b21lckNvZGVGaWVsZCxcbiAgICBDcmVkaXRDYXJkSW5wdXRTdHlsZXNUeXBlLFxuICAgIGdldENyZWRpdENhcmRJbnB1dFN0eWxlcyxcbiAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkU2VsZWN0b3IsXG4gICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkU2VsZWN0b3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9pbnN0cnVtZW50LXV0aWxzJztcbmltcG9ydCB7XG4gICAgdHlwZSBQYXltZW50TWV0aG9kUHJvcHMsXG4gICAgdHlwZSBQYXltZW50TWV0aG9kUmVzb2x2ZUlkLFxuICAgIHRvUmVzb2x2YWJsZUNvbXBvbmVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IE1vZGFsIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3VpJztcblxuaW50ZXJmYWNlIFdvcmxkcGF5UGF5bWVudE1ldGhvZFJlZiB7XG4gICAgcGF5bWVudFBhZ2VDb250ZW50UmVmOiBSZWZPYmplY3Q8SFRNTERpdkVsZW1lbnQ+O1xuICAgIGNhbmNlbFRocmVlRFNlY3VyZVZlcmlmaWNhdGlvbj8oKTogdm9pZDtcbn1cblxuY29uc3QgV29ybGRwYXlDcmVkaXRDYXJkUGF5bWVudE1ldGhvZDogRnVuY3Rpb25Db21wb25lbnQ8UGF5bWVudE1ldGhvZFByb3BzPiA9ICh7XG4gICAgbGFuZ3VhZ2UsXG4gICAgcGF5bWVudEZvcm0sXG4gICAgY2hlY2tvdXRTdGF0ZSxcbiAgICBjaGVja291dFNlcnZpY2UsXG4gICAgbWV0aG9kLFxuICAgIC4uLnJlc3Rcbn0pID0+IHtcbiAgICBjb25zdCBbdGhyZWVEU2VjdXJlVmVyaWZpY2F0aW9uLCBzZXRUaHJlZURTZWN1cmVWZXJpZmljYXRpb25dID0gdXNlU3RhdGU8SFRNTEVsZW1lbnQ+KCk7XG4gICAgY29uc3QgW2ZvY3VzZWRGaWVsZFR5cGUsIHNldEZvY3VzZWRGaWVsZFR5cGVdID0gdXNlU3RhdGU8c3RyaW5nPigpO1xuICAgIGNvbnN0IHsgZ2V0SG9zdGVkU3RvcmVkQ2FyZFZhbGlkYXRpb25GaWVsZHNldCB9ID0gdXNlSG9zdGVkQ3JlZGl0Q2FyZCh7XG4gICAgICAgIGNoZWNrb3V0U3RhdGUsXG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgIHBheW1lbnRGb3JtLFxuICAgIH0pO1xuICAgIGNvbnN0IHsgc2V0RmllbGRUb3VjaGVkLCBzZXRGaWVsZFZhbHVlLCBzZXRTdWJtaXR0ZWQsIHN1Ym1pdEZvcm0gfSA9IHBheW1lbnRGb3JtO1xuXG4gICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFByb3AgPSBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkU2VsZWN0b3IoY2hlY2tvdXRTdGF0ZSk7XG4gICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkUHJvcCA9XG4gICAgICAgIGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpO1xuXG4gICAgY29uc3Qge1xuICAgICAgICBjb25maWc6IHsgY2FyZENvZGUgfSxcbiAgICB9ID0gbWV0aG9kO1xuICAgIGNvbnN0IGlzQ2FyZENvZGVSZXF1aXJlZCA9IGNhcmRDb2RlIHx8IGNhcmRDb2RlID09PSBudWxsO1xuICAgIGNvbnN0IGdldEhvc3RlZEZpZWxkSWQ6IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZyA9IHVzZUNhbGxiYWNrKFxuICAgICAgICAobmFtZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGAke2NvbXBhY3QoW21ldGhvZC5nYXRld2F5LCBtZXRob2QuaWRdKS5qb2luKCctJyl9LSR7bmFtZX1gO1xuICAgICAgICB9LFxuICAgICAgICBbbWV0aG9kXSxcbiAgICApO1xuXG4gICAgY29uc3QgaG9zdGVkU3RvcmVkQ2FyZFZhbGlkYXRpb25TY2hlbWEgPSBnZXRIb3N0ZWRJbnN0cnVtZW50VmFsaWRhdGlvblNjaGVtYSh7IGxhbmd1YWdlIH0pO1xuXG4gICAgY29uc3QgcmVmID0gdXNlUmVmPFdvcmxkcGF5UGF5bWVudE1ldGhvZFJlZj4oe1xuICAgICAgICBwYXltZW50UGFnZUNvbnRlbnRSZWY6IGNyZWF0ZVJlZigpLFxuICAgIH0pO1xuICAgIGNvbnN0IGdldEhvc3RlZEZvcm1PcHRpb25zOiAoXG4gICAgICAgIHNlbGVjdGVkSW5zdHJ1bWVudD86IENhcmRJbnN0cnVtZW50LFxuICAgICkgPT4gUHJvbWlzZTxMZWdhY3lIb3N0ZWRGb3JtT3B0aW9ucz4gPSB1c2VDYWxsYmFjayhcbiAgICAgICAgYXN5bmMgKHNlbGVjdGVkSW5zdHJ1bWVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVQcm9wcyA9IFsnY29sb3InLCAnZm9udEZhbWlseScsICdmb250U2l6ZScsICdmb250V2VpZ2h0J107XG4gICAgICAgICAgICBjb25zdCBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWQgPSBzZWxlY3RlZEluc3RydW1lbnRcbiAgICAgICAgICAgICAgICA/IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFByb3Aoc2VsZWN0ZWRJbnN0cnVtZW50KVxuICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkID0gc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgPyBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkUHJvcChzZWxlY3RlZEluc3RydW1lbnQsIG1ldGhvZClcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVDb250YWluZXJJZCA9IHNlbGVjdGVkSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgID8gaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICA/IGdldEhvc3RlZEZpZWxkSWQoJ2NjQ3Z2JylcbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA6IGdldEhvc3RlZEZpZWxkSWQoJ2NjTnVtYmVyJyk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBzZWxlY3RlZEluc3RydW1lbnRcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRDb2RlVmVyaWZpY2F0aW9uOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCAmJiBzZWxlY3RlZEluc3RydW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfY3Z2X2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY0N2dicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZDogc2VsZWN0ZWRJbnN0cnVtZW50LmJpZ3BheVRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkTnVtYmVyVmVyaWZpY2F0aW9uOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkICYmIHNlbGVjdGVkSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbDogbGFuZ3VhZ2UudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGF5bWVudC5jcmVkaXRfY2FyZF9udW1iZXJfbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IGdldEhvc3RlZEZpZWxkSWQoJ2NjTnVtYmVyJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkOiBzZWxlY3RlZEluc3RydW1lbnQuYmlncGF5VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZENvZGU6IGlzQ2FyZENvZGVSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGF5bWVudC5jcmVkaXRfY2FyZF9jdnZfbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY0N2dicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZEV4cGlyeToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfZXhwaXJhdGlvbl9sYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IGdldEhvc3RlZEZpZWxkSWQoJ2NjRXhwaXJ5JyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogbGFuZ3VhZ2UudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50LmNyZWRpdF9jYXJkX2V4cGlyYXRpb25fcGxhY2Vob2xkZXJfdGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkTmFtZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfbmFtZV9sYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IGdldEhvc3RlZEZpZWxkSWQoJ2NjTmFtZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkTnVtYmVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGF5bWVudC5jcmVkaXRfY2FyZF9udW1iZXJfbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY051bWJlcicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBzdHlsZUNvbnRhaW5lcklkXG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBhd2FpdCBnZXRDcmVkaXRDYXJkSW5wdXRTdHlsZXMoc3R5bGVDb250YWluZXJJZCwgc3R5bGVQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBhd2FpdCBnZXRDcmVkaXRDYXJkSW5wdXRTdHlsZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVQcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWRpdENhcmRJbnB1dFN0eWxlc1R5cGUuRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzOiBhd2FpdCBnZXRDcmVkaXRDYXJkSW5wdXRTdHlsZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVQcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWRpdENhcmRJbnB1dFN0eWxlc1R5cGUuRm9jdXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHt9LFxuICAgICAgICAgICAgICAgIG9uQmx1cjogKHsgZmllbGRUeXBlIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvY3VzZWRGaWVsZFR5cGUgPT09IGZpZWxkVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Rm9jdXNlZEZpZWxkVHlwZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNhcmRUeXBlQ2hhbmdlOiAoeyBjYXJkVHlwZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldEZpZWxkVmFsdWUoJ2hvc3RlZEZvcm0uY2FyZFR5cGUnLCBjYXJkVHlwZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkVudGVyOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldFN1Ym1pdHRlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0Rm9ybSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25Gb2N1czogKHsgZmllbGRUeXBlIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Rm9jdXNlZEZpZWxkVHlwZShmaWVsZFR5cGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25WYWxpZGF0ZTogKHsgZXJyb3JzID0ge30gfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBmb3JJbihlcnJvcnMsIChmaWVsZEVycm9ycyA9IFtdLCBmaWVsZFR5cGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yS2V5ID0gYGhvc3RlZEZvcm0uZXJyb3JzLiR7ZmllbGRUeXBlfWA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZpZWxkVmFsdWUoZXJyb3JLZXksIGZpZWxkRXJyb3JzWzBdPy50eXBlID8/ICcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkRXJyb3JzWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RmllbGRUb3VjaGVkKGVycm9yS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIGZvY3VzZWRGaWVsZFR5cGUsXG4gICAgICAgICAgICBnZXRIb3N0ZWRGaWVsZElkLFxuICAgICAgICAgICAgaXNDYXJkQ29kZVJlcXVpcmVkLFxuICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFByb3AsXG4gICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRQcm9wLFxuICAgICAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICBzZXRGaWVsZFZhbHVlLFxuICAgICAgICAgICAgc2V0RmllbGRUb3VjaGVkLFxuICAgICAgICAgICAgc2V0Rm9jdXNlZEZpZWxkVHlwZSxcbiAgICAgICAgICAgIHNldFN1Ym1pdHRlZCxcbiAgICAgICAgICAgIHN1Ym1pdEZvcm0sXG4gICAgICAgIF0sXG4gICAgKTtcbiAgICBjb25zdCBjYW5jZWxXb3JsZHBheU1vZGFsRmxvdyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgc2V0VGhyZWVEU2VjdXJlVmVyaWZpY2F0aW9uKHVuZGVmaW5lZCk7XG5cbiAgICAgICAgaWYgKHJlZi5jdXJyZW50LmNhbmNlbFRocmVlRFNlY3VyZVZlcmlmaWNhdGlvbikge1xuICAgICAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsVGhyZWVEU2VjdXJlVmVyaWZpY2F0aW9uKCk7XG4gICAgICAgICAgICByZWYuY3VycmVudC5jYW5jZWxUaHJlZURTZWN1cmVWZXJpZmljYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9LCBbXSk7XG4gICAgY29uc3QgaW5pdGlhbGl6ZVdvcmxkcGF5UGF5bWVudCA9IHVzZUNhbGxiYWNrKFxuICAgICAgICBhc3luYyAob3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCBzZWxlY3RlZEluc3RydW1lbnQ6IENhcmRJbnN0cnVtZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tvdXRTZXJ2aWNlLmluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGludGVncmF0aW9uczogW2NyZWF0ZVdvcmxkcGF5QWNjZXNzUGF5bWVudFN0cmF0ZWd5XSxcbiAgICAgICAgICAgICAgICBjcmVkaXRDYXJkOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm06IGdldEhvc3RlZEZvcm1PcHRpb25zICYmIChhd2FpdCBnZXRIb3N0ZWRGb3JtT3B0aW9ucyhzZWxlY3RlZEluc3RydW1lbnQpKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHdvcmxkcGF5OiB7XG4gICAgICAgICAgICAgICAgICAgIG9uTG9hZChjb250ZW50OiBIVE1MSUZyYW1lRWxlbWVudCwgY2FuY2VsOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaHJlZURTZWN1cmVWZXJpZmljYXRpb24oY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWYuY3VycmVudC5jYW5jZWxUaHJlZURTZWN1cmVWZXJpZmljYXRpb24gPSBjYW5jZWw7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBbY2hlY2tvdXRTZXJ2aWNlLCBnZXRIb3N0ZWRGb3JtT3B0aW9uc10sXG4gICAgKTtcbiAgICBjb25zdCBob3N0ZWRWYWxpZGF0aW9uU2NoZW1hID0gZ2V0SG9zdGVkQ3JlZGl0Q2FyZFZhbGlkYXRpb25TY2hlbWEoeyBsYW5ndWFnZSB9KTtcblxuICAgIGNvbnN0IGFwcGVuZFBheW1lbnRQYWdlQ29udGVudCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgaWYgKHRocmVlRFNlY3VyZVZlcmlmaWNhdGlvbikge1xuICAgICAgICAgICAgcmVmLmN1cnJlbnQucGF5bWVudFBhZ2VDb250ZW50UmVmLmN1cnJlbnQ/LmFwcGVuZENoaWxkKHRocmVlRFNlY3VyZVZlcmlmaWNhdGlvbik7XG4gICAgICAgIH1cbiAgICB9LCBbdGhyZWVEU2VjdXJlVmVyaWZpY2F0aW9uXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgICAgPENyZWRpdENhcmRQYXltZW50TWV0aG9kQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgICAgICAgICAgY2FyZEZpZWxkc2V0PXtcbiAgICAgICAgICAgICAgICAgICAgPEhvc3RlZENyZWRpdENhcmRGaWVsZHNldFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbEZpZWxkcz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kLmNvbmZpZy5yZXF1aXJlQ3VzdG9tZXJDb2RlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENyZWRpdENhcmRDdXN0b21lckNvZGVGaWVsZCBuYW1lPVwiY2NDdXN0b21lckNvZGVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRDb2RlSWQ9e2lzQ2FyZENvZGVSZXF1aXJlZCA/IGdldEhvc3RlZEZpZWxkSWQoJ2NjQ3Z2JykgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkRXhwaXJ5SWQ9e2dldEhvc3RlZEZpZWxkSWQoJ2NjRXhwaXJ5Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkTmFtZUlkPXtnZXRIb3N0ZWRGaWVsZElkKCdjY05hbWUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmROdW1iZXJJZD17Z2V0SG9zdGVkRmllbGRJZCgnY2NOdW1iZXInKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzZWRGaWVsZFR5cGU9e2ZvY3VzZWRGaWVsZFR5cGV9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhcmRWYWxpZGF0aW9uU2NoZW1hPXtob3N0ZWRWYWxpZGF0aW9uU2NoZW1hfVxuICAgICAgICAgICAgICAgIGNoZWNrb3V0U2VydmljZT17Y2hlY2tvdXRTZXJ2aWNlfVxuICAgICAgICAgICAgICAgIGNoZWNrb3V0U3RhdGU9e2NoZWNrb3V0U3RhdGV9XG4gICAgICAgICAgICAgICAgZGVpbml0aWFsaXplUGF5bWVudD17Y2hlY2tvdXRTZXJ2aWNlLmRlaW5pdGlhbGl6ZVBheW1lbnR9XG4gICAgICAgICAgICAgICAgZ2V0U3RvcmVkQ2FyZFZhbGlkYXRpb25GaWVsZHNldD17Z2V0SG9zdGVkU3RvcmVkQ2FyZFZhbGlkYXRpb25GaWVsZHNldH1cbiAgICAgICAgICAgICAgICBpbml0aWFsaXplUGF5bWVudD17aW5pdGlhbGl6ZVdvcmxkcGF5UGF5bWVudH1cbiAgICAgICAgICAgICAgICBsYW5ndWFnZT17bGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgbWV0aG9kPXttZXRob2R9XG4gICAgICAgICAgICAgICAgcGF5bWVudEZvcm09e3BheW1lbnRGb3JtfVxuICAgICAgICAgICAgICAgIHN0b3JlZENhcmRWYWxpZGF0aW9uU2NoZW1hPXtob3N0ZWRTdG9yZWRDYXJkVmFsaWRhdGlvblNjaGVtYX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8TW9kYWxcbiAgICAgICAgICAgICAgICBpc09wZW49eyEhdGhyZWVEU2VjdXJlVmVyaWZpY2F0aW9ufVxuICAgICAgICAgICAgICAgIG9uQWZ0ZXJPcGVuPXthcHBlbmRQYXltZW50UGFnZUNvbnRlbnR9XG4gICAgICAgICAgICAgICAgb25SZXF1ZXN0Q2xvc2U9e2NhbmNlbFdvcmxkcGF5TW9kYWxGbG93fVxuICAgICAgICAgICAgICAgIHNob3VsZFNob3dDbG9zZUJ1dHRvbj17dHJ1ZX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj17cmVmLmN1cnJlbnQucGF5bWVudFBhZ2VDb250ZW50UmVmfSAvPlxuICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgPC8+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZUNvbXBvbmVudDxQYXltZW50TWV0aG9kUHJvcHMsIFBheW1lbnRNZXRob2RSZXNvbHZlSWQ+KFxuICAgIFdvcmxkcGF5Q3JlZGl0Q2FyZFBheW1lbnRNZXRob2QsXG4gICAgW3sgaWQ6ICd3b3JsZHBheWFjY2VzcycgfV0sXG4pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/worldpay-access-integration/src/WorldpayCreditCardPaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/worldpay-access-integration/src/index.ts":
/*!***********************************************************!*\
  !*** ./packages/worldpay-access-integration/src/index.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WorldpayCreditCardPaymentMethod: () => (/* reexport safe */ _WorldpayCreditCardPaymentMethod__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _WorldpayCreditCardPaymentMethod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WorldpayCreditCardPaymentMethod */ \"./packages/worldpay-access-integration/src/WorldpayCreditCardPaymentMethod.tsx\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy93b3JsZHBheS1hY2Nlc3MtaW50ZWdyYXRpb24vc3JjL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy93b3JsZHBheS1hY2Nlc3MtaW50ZWdyYXRpb24vc3JjL2luZGV4LnRzPzgzOTYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgZGVmYXVsdCBhcyBXb3JsZHBheUNyZWRpdENhcmRQYXltZW50TWV0aG9kIH0gZnJvbSAnLi9Xb3JsZHBheUNyZWRpdENhcmRQYXltZW50TWV0aG9kJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/worldpay-access-integration/src/index.ts\n\n}");

/***/ })

}]);
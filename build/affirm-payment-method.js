"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["affirm-payment-method"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/affirm.js":
/*!**********************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/affirm.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAffirmPaymentStrategy: () => (/* binding */ b)\n/* harmony export */ });\nvar e,t;class i extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(e||(e={}));class n extends i{constructor(t){super(function(t){switch(t){case e.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case e.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case e.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case e.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case e.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case e.MissingCheckoutConfig:case e.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case e.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case e.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case e.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case e.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case e.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case e.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(t)),this.subtype=t,this.name=\"MissingDataError\",this.type=\"missing_data\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(t||(t={}));class s extends i{constructor(e){super(function(e){switch(e){case t.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case t.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case t.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case t.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}class r extends i{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class a extends r{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}class o extends i{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class c extends i{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}const d={body:{},headers:{},status:0};class u extends i{constructor(e,{message:t,errors:i}={}){const{body:n,headers:s,status:r}=e||d;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=n,this.headers=s,this.status=r,this.errors=i||[]}}class l extends u{constructor(e){super(e,{message:\"There is a problem processing your payment. Please try again later.\"}),this.name=\"PaymentMethodInvalidError\",this.type=\"payment_method_invalid\"}}class m{constructor(e){this._decimalPlaces=e}toInteger(e){return Math.round(e*Math.pow(10,this._decimalPlaces))}}var h,p=function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function o(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,o)}c((n=n.apply(e,t||[])).next())})};class g{constructor(e,t){this.paymentIntegrationService=e,this.affirmScriptLoader=t}initialize(t){return p(this,void 0,void 0,function*(){yield this.paymentIntegrationService.loadPaymentMethod(t.methodId);const i=this.paymentIntegrationService.getState(),{clientToken:s,config:{testMode:r}}=i.getPaymentMethodOrThrow(t.methodId);if(!s)throw new n(e.MissingPaymentMethod);this.affirm=yield this.affirmScriptLoader.load(s,r)})}execute(e,i){var n;return p(this,void 0,void 0,function*(){const r=null===(n=e.payment)||void 0===n?void 0:n.methodId,{useStoreCredit:o}=e;if(!this.affirm)throw new s(t.PaymentNotInitialized);if(!r)throw new a([\"payment.methodId\"]);yield this.paymentIntegrationService.submitOrder({useStoreCredit:o},i);const c={methodId:r,paymentData:{nonce:(yield this.initializeAffirmCheckout()).checkout_token}};yield this.paymentIntegrationService.submitPayment(c)})}deinitialize(){return this.affirm&&(this.affirm=void 0),Promise.resolve()}finalize(){return Promise.reject(new o)}initializeAffirmCheckout(){var e;return null===(e=this.affirm)||void 0===e||e.checkout(this.getCheckoutInformation()),new Promise((e,t)=>{var i,n;null===(i=this.affirm)||void 0===i||i.checkout.open({onFail:e=>{\"canceled\"===e.reason?t(new c):t(new l)},onSuccess:t=>{e(t)}}),null===(n=this.affirm)||void 0===n||n.ui.error.on(\"close\",()=>{t(new c)})})}getCheckoutInformation(){const t=this.paymentIntegrationService.getState(),i=t.getStoreConfig(),s=t.getConsignments(),r=t.getOrder(),a=t.getCart();if(!i)throw new n(e.MissingCheckoutConfig);if(!r)throw new n(e.MissingCheckout);const o=new m(r.currency.decimalPlaces),c=this.getBillingAddress(),d=this.getShippingAddress(),u=((e,t)=>!!e&&(!!e.lineItems.physicalItems.some(e=>e.isShippingRequired)||!(!t||!e.lineItems.customItems)&&e.lineItems.customItems.length>0))(a,i)&&d?d:c;return{merchant:{user_confirmation_url:i.links.checkoutLink,user_cancel_url:i.links.checkoutLink,user_confirmation_url_action:\"POST\"},shipping:u,billing:c,items:this.getItems(o,r),metadata:{shipping_type:this.getShippingType(s),mode:\"modal\",platform_type:\"BigCommerce\",platform_version:\"\",platform_affirm:\"\"},discounts:this.getDiscounts(o,r),order_id:r.orderId?r.orderId.toString():\"\",shipping_amount:o.toInteger(r.shippingCostTotal),tax_amount:o.toInteger(r.taxTotal),total:o.toInteger(r.orderAmount)}}getShippingType(e){if(!e)return\"\";const t=e[0];return(null==t?void 0:t.selectedShippingOption)?t.selectedShippingOption.type:\"\"}getBillingAddress(){const t=this.paymentIntegrationService.getState().getBillingAddress();if(!t)throw new n(e.MissingBillingAddress);return{name:{first:t.firstName,last:t.lastName,full:`${t.firstName} ${t.lastName}`},address:{line1:t.address1,line2:t.address2,city:t.city,state:t.stateOrProvinceCode,zipcode:t.postalCode,country:t.countryCode},phone_number:t.phone,email:t.email}}getShippingAddress(){const e=this.paymentIntegrationService.getState().getShippingAddress();if(e)return{name:{first:e.firstName,last:e.lastName,full:`${e.firstName} ${e.lastName}`},address:{line1:e.address1,line2:e.address2,city:e.city,state:e.stateOrProvinceCode,zipcode:e.postalCode,country:e.countryCode},phone_number:e.phone}}getItems(e,t){const i=[];return t.lineItems.physicalItems.forEach(t=>{i.push({display_name:t.name,sku:t.sku,unit_price:e.toInteger(t.salePrice),qty:t.quantity,item_image_url:t.imageUrl,item_url:t.url,categories:this.getCategories(t.categories)})}),t.lineItems.digitalItems.forEach(t=>{i.push({display_name:t.name,sku:t.sku,unit_price:e.toInteger(t.salePrice),qty:t.quantity,item_image_url:t.imageUrl,item_url:t.url,categories:this.getCategories(t.categories)})}),t.lineItems.giftCertificates.forEach(t=>{i.push({display_name:t.name,sku:\"\",unit_price:e.toInteger(t.amount),qty:1,item_image_url:\"\",item_url:\"\"})}),t.lineItems.customItems&&t.lineItems.customItems.forEach(t=>{i.push({display_name:t.name,sku:t.sku,unit_price:e.toInteger(t.listPrice),qty:t.quantity,item_image_url:\"\",item_url:\"\"})}),i}getDiscounts(e,t){const i={};return t.coupons.forEach(t=>{t.discountedAmount>0&&(i[t.code]={discount_amount:e.toInteger(t.discountedAmount),discount_display_name:t.displayName})}),t.discountAmount>0&&(i.DISCOUNTED_AMOUNT={discount_amount:e.toInteger(t.discountAmount),discount_display_name:\"discount\"}),i}getCategories(e){return e?e.map(e=>e.map(e=>e.name)):[[]]}}class f extends i{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}!function(e){e.PROD=\"//cdn1.affirm.com/js/v2/affirm.js\",e.SANDBOX=\"//cdn1-sandbox.affirm.com/js/v2/affirm.js\"}(h||(h={}));class y{constructor(e=window){this.affirmWindow=e}load(e=\"\",t){const i=t?h.SANDBOX:h.PROD;if(function(e,t,i,n,s,r,a){const o=e[i]||{},c=document.createElement(r),d=document.getElementsByTagName(r)[0],u=function(e,t,i){return function(){e[t]._.push([i,arguments])}};o[n]=u(o,n,\"set\");const l=o[n];o[s]={},o[s]._=[],l._=[],o._=[],o[s][a]=u(o,s,a),o.jsReady=function(){o._.push([a,arguments])};let m=0;for(const e=\"set add save post open empty reset on off trigger ready setProduct\".split(\" \");m<e.length;m++)l[e[m]]=u(o,n,e[m]);let h=0;for(const e=[\"get\",\"token\",\"url\",\"items\"];h<e.length;h++)l[e[h]]=function(){};c.async=!0,c.src=t[r],d.parentNode&&d.parentNode.insertBefore(c,d),delete t[r],l(t),e[i]=o}(window,{public_api_key:e,script:i},\"affirm\",\"checkout\",\"ui\",\"script\",\"ready\"),!this.affirmWindow.affirm)throw new f;return Promise.resolve(this.affirmWindow.affirm)}}const b=(I=e=>new g(e,new y),_=[{id:\"affirm\"}],Object.assign(I,{resolveIds:_}));var I,_;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9hZmZpcm0uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUNBLElDQ1lBLEVDQUFDLEVDS0csTUFBZUMsVUFBc0JDLE1BSWhELFdBQUFDLENBQVlDLEdDWEQsSUFBcUNDLEVEWTVDQyxNQUFNRixHQUFXLHFDQUpyQixLQUFBRyxLQUFPLGdCQUNQLEtBQUFDLEtBQU8sV0NUeUNILGFEY1pBLFVDYmhDSSxPQUFPQyxlQUNQRCxPQUFPQyxlRFlRQyxLQ1plTixHRFlmTSxLQ1ZSQyxVQUFZUCxFRFlvQixtQkFBNUJILE1BQU1XLGtCQUNiWCxNQUFNVyxrQkFBa0JGLGlCQUV4QkEsS0FBS0csTUFBUSxJQUFJWixNQUFNUyxLQUFLUCxTQUFTVSxLQUU3QyxHRm5CSixTQUFZZixHQUNSLHFEQUNBLGlDQUNBLHlDQUNBLGlEQUNBLHlDQUNBLHFEQUNBLG1DQUNBLCtDQUNBLHVDQUNBLHVDQUNBLDRDQUNBLDREQUNBLG9EQUNBLDhEQUNBLG9EQUNBLGtEQUNBLHVEQUNILENBbEJELENBQVlBLElBQUFBLEVBQW9CLEtBeUJqQixNQUFNZ0IsVUFBeUJkLEVBQzFDLFdBQUFFLENBQW1CYSxHQUNmVixNQU9SLFNBQXlCRSxHQUNyQixPQUFRQSxHQUNKLEtBQUtULEVBQXFCa0Isc0JBQ3RCLE1BQU8saUVBRVgsS0FBS2xCLEVBQXFCbUIsWUFDdEIsTUFBTyxzREFFWCxLQUFLbkIsRUFBcUJvQixvQkFDdEIsTUFBTyw4REFFWCxLQUFLcEIsRUFBcUJxQixnQkFDdEIsTUFBTywwREFFWCxLQUFLckIsRUFBcUJzQixnQkFDdEIsTUFBTywwREFFWCxLQUFLdEIsRUFBcUJ1QixzQkFDMUIsS0FBS3ZCLEVBQXFCd0IsbUJBQ3RCLE1BQU8sK0RBRVgsS0FBS3hCLEVBQXFCeUIsYUFDdEIsTUFBTyx1REFFWCxLQUFLekIsRUFBcUIwQixlQUN0QixNQUFPLDBFQUVYLEtBQUsxQixFQUFxQjJCLGVBQ3RCLE1BQU8seURBRVgsS0FB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aGVja291dC1zZGsvd2VicGFjay9ib290c3RyYXA/ZmZjYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9taXNzaW5nLWRhdGEtZXJyb3IudHM/YjdkYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW5pdGlhbGl6ZWQtZXJyb3IudHM/OGI0ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zdGFuZGFyZC1lcnJvci50cz84YTAzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3NldC1wcm90b3R5cGUtb2YudHM/ODQ1YSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pbnZhbGlkLWFyZ3VtZW50LWVycm9yLnRzPzM5MjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1hcmd1bWVudC1pbnZhbGlkLWVycm9yLnRzP2E1MDEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvb3JkZXItZmluYWxpemF0aW9uLW5vdC1yZXF1aXJlZC1lcnJvci50cz9iNWExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWNhbmNlbGxlZC1lcnJvci50cz8wODkwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3JlcXVlc3QtZXJyb3IudHM/Yzg0MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1pbnZhbGlkLWVycm9yLnRzPzNhZGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vdXRpbGl0eS9hbW91bnQtdHJhbnNmb3JtZXIudHM/MWQ3OCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYWZmaXJtLWludGVncmF0aW9uL3NyYy9hZmZpcm0udHM/YjlkZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYWZmaXJtLWludGVncmF0aW9uL3NyYy9hZmZpcm0tcGF5bWVudC1zdHJhdGVneS50cz9mNTk1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvc2hpcHBpbmcvaXRlbXMtcmVxdWlyZS1zaGlwcGluZy50cz83ZDg3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWNsaWVudC11bmF2YWlsYWJsZS1lcnJvci50cz9mOGVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hZmZpcm0taW50ZWdyYXRpb24vc3JjL2FmZmlybS1zY3JpcHQtbG9hZGVyLnRzP2FlYTciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FmZmlybS1pbnRlZ3JhdGlvbi9zcmMvYWZmaXJtSnMudHM/NjJhNCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYWZmaXJtLWludGVncmF0aW9uL3NyYy9jcmVhdGUtYWZmaXJtLXBheW1lbnQtc3RyYXRlZ3kudHM/YWVmYiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3RvLXJlc29sdmFibGUtbW9kdWxlLnRzP2Q1MjAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBNaXNzaW5nRGF0YUVycm9yVHlwZSB7XG4gICAgTWlzc2luZ0JpbGxpbmdBZGRyZXNzLFxuICAgIE1pc3NpbmdDYXJ0LFxuICAgIE1pc3NpbmdDaGVja291dCxcbiAgICBNaXNzaW5nQ29uc2lnbm1lbnRzLFxuICAgIE1pc3NpbmdDdXN0b21lcixcbiAgICBNaXNzaW5nQ2hlY2tvdXRDb25maWcsXG4gICAgTWlzc2luZ09yZGVyLFxuICAgIE1pc3NpbmdPcmRlckNvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXJJZCxcbiAgICBNaXNzaW5nUGF5bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudElkLFxuICAgIE1pc3NpbmdQYXltZW50SW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICBNaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsLFxuICAgIE1pc3NpbmdQYXltZW50U3RhdHVzLFxuICAgIE1pc3NpbmdQYXltZW50VG9rZW4sXG4gICAgTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIHdoZW4gZGF0YSB0aGF0IGlzIGV4cGVjdGVkIHRvIGV4aXN0IGlzIG1pc3NpbmcuIFVzdWFsbHkgaXRcbiAqIGlzIGR1ZSB0byB0aGUgZmFjdCB0aGF0IGNlcnRhaW4gZGF0YSBoYXMgbm90IGJlZW4gcmV0cmlldmVkIGZyb20gb3Igc2F2ZWQgdG9cbiAqIHRoZSBzZXJ2ZXIgeWV0LiBBbmQgc3VjaCBkYXRhIGlzIHJlcXVpcmVkIHRvIHBlcmZvcm0gY2VydGFpbiBhY3Rpb25zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXNzaW5nRGF0YUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ01pc3NpbmdEYXRhRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbWlzc2luZ19kYXRhJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjYXJ0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDb25zaWdubWVudHM6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ3VzdG9tZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY3VzdG9tZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOlxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlckNvbmZpZzpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSB0b2tlbiByZXF1aXJlZCB0byBzdWJtaXQgYSBwYXltZW50IGlzIG1pc3NpbmcuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBOb3RJbml0aWFsaXplZEVycm9yVHlwZSB7XG4gICAgQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZCxcbiAgICBDdXN0b21lck5vdEluaXRpYWxpemVkLFxuICAgIFBheW1lbnROb3RJbml0aWFsaXplZCxcbiAgICBTaGlwcGluZ05vdEluaXRpYWxpemVkLFxuICAgIFNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIG1ldGhvZCByZXF1aXJlcyBhIGNlcnRhaW4gaW5pdGlhbGl6YXRpb24gY2FsbCB0byBiZVxuICogbWFkZSBmaXJzdC4gU29tZSBvYmplY3RzIGNhbiBiZSBjb25zdHJ1Y3RlZCBidXQgdGhleSBjYW5ub3QgYmUgdXNlZCB1bnRpbCBhXG4gKiBzZXBhcmF0ZSBpbml0aWFsaXphdGlvbiBjYWxsIGlzIG1hZGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdEluaXRpYWxpemVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTm90SW5pdGlhbGl6ZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdub3RfaW5pdGlhbGl6ZWQnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5DdXN0b21lck5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjdXN0b21lciBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TaGlwcGluZ05vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBzaGlwcGluZyBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2hlY2tvdXQgc3BhbSBwcm90ZWN0aW9uIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgQ3VzdG9tRXJyb3IgZnJvbSAnLi9jdXN0b20tZXJyb3InO1xuaW1wb3J0IHNldFByb3RvdHlwZU9mIGZyb20gJy4vc2V0LXByb3RvdHlwZS1vZic7XG5cbi8qKlxuICogVGhpcyBlcnJvciB0eXBlIHNob3VsZCBub3QgYmUgY29uc3RydWN0ZWQgZGlyZWN0bHkuIEl0IGlzIGEgYmFzZSBjbGFzcyBmb3JcbiAqIGFsbCBjdXN0b20gZXJyb3JzIHRocm93biBpbiB0aGlzIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkRXJyb3IgZXh0ZW5kcyBFcnJvciBpbXBsZW1lbnRzIEN1c3RvbUVycm9yIHtcbiAgICBuYW1lID0gJ1N0YW5kYXJkRXJyb3InO1xuICAgIHR5cGUgPSAnc3RhbmRhcmQnO1xuXG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICBzZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgbmV3LnRhcmdldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YWNrID0gbmV3IEVycm9yKHRoaXMubWVzc2FnZSkuc3RhY2s7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihvYmplY3Q6IGFueSwgcHJvdG90eXBlOiBvYmplY3QpIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmplY3QsIHByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqZWN0O1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBtZXRob2QgaXMgdW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGVcbiAqIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgYXJndW1lbnRzIGFjY29yZGluZyB0byB0aGVpciByZXF1aXJlbWVudHMsXG4gKiBpLmUuOiBpZiBhbiBhcmd1bWVudCBpcyBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnSW52YWxpZCBhcmd1bWVudHMgaGF2ZSBiZWVuIHByb3ZpZGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkQXJndW1lbnRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdpbnZhbGlkX2FyZ3VtZW50JztcbiAgICB9XG59XG4iLCJpbXBvcnQgSW52YWxpZEFyZ3VtZW50RXJyb3IgZnJvbSAnLi9pbnZhbGlkLWFyZ3VtZW50LWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB3ZSBhcmUgdW5hYmxlIHRvIHN1Ym1pdCBhIHBheW1lbnQgYmVjYXVzZVxuICogdGhlIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzLCBpLmUuOiBpZiBhbiBhcmd1bWVudCBpc1xuICogbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIGV4dGVuZHMgSW52YWxpZEFyZ3VtZW50RXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGludmFsaWRGaWVsZHM/OiBzdHJpbmdbXSkge1xuICAgICAgICBsZXQgbWVzc2FnZSA9ICdVbmFibGUgdG8gc3VibWl0IHBheW1lbnQgZm9yIHRoZSBvcmRlciBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIGludmFsaWQuJztcblxuICAgICAgICBpZiAoaW52YWxpZEZpZWxkcykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IE1ha2Ugc3VyZSB0aGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgcHJvdmlkZWQgY29ycmVjdGx5OiAke2ludmFsaWRGaWVsZHMuam9pbihcbiAgICAgICAgICAgICAgICAnLCAnLFxuICAgICAgICAgICAgKX0uYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHRyeWluZyB0byBtYWtlIGFuIG9yZGVyIGZpbmFsaXphdGlvbiByZXF1ZXN0IGZvciBhXG4gKiBwYXltZW50IG1ldGhvZCB0aGF0IGRvZXMgbm90IHJlcXVpcmUgc3VjaCBwcm9jZWR1cmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBwYXltZW50IGZsb3cgaXMgY2FuY2VsbGVkLiBJdCBjb3VsZCBiZVxuICogZHVlIHRvIGEgZGVsaWJlcmF0ZSB1c2VyIGludGVyYWN0aW9uLCBpLmUuOiB0aGUgdXNlciBjbGlja3Mgb24gYSBjYW5jZWxcbiAqIGJ1dHRvbiB3aGljaCBkaXNtaXNzZXMgdGhlIHBheW1lbnQgbW9kYWwuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnUGF5bWVudCBwcm9jZXNzIHdhcyBjYW5jZWxsZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X2NhbmNlbGxlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuY29uc3QgREVGQVVMVF9SRVNQT05TRSA9IHtcbiAgICBib2R5OiB7fSxcbiAgICBoZWFkZXJzOiB7fSxcbiAgICBzdGF0dXM6IDAsXG59O1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHVuYWJsZSB0byBtYWtlIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyLiBJdCB3cmFwc1xuICogYW55IHNlcnZlciByZXNwb25zZSBpbnRvIGEgSlMgZXJyb3Igb2JqZWN0LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXF1ZXN0RXJyb3I8VEJvZHkgPSBhbnk+IGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgYm9keTogVEJvZHkgfCB7fTtcbiAgICBoZWFkZXJzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAgIGVycm9yczogQXJyYXk8eyBjb2RlOiBzdHJpbmc7IG1lc3NhZ2U/OiBzdHJpbmcgfT47XG4gICAgc3RhdHVzOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcmVzcG9uc2U/OiBSZXNwb25zZTxUQm9keSB8IHt9PixcbiAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIGVycm9ycyxcbiAgICAgICAgfToge1xuICAgICAgICAgICAgbWVzc2FnZT86IHN0cmluZztcbiAgICAgICAgICAgIGVycm9ycz86IEFycmF5PHsgY29kZTogc3RyaW5nOyBtZXNzYWdlPzogc3RyaW5nIH0+O1xuICAgICAgICB9ID0ge30sXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSwgaGVhZGVycywgc3RhdHVzIH0gPSByZXNwb25zZSB8fCBERUZBVUxUX1JFU1BPTlNFO1xuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdSZXF1ZXN0RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncmVxdWVzdCc7XG4gICAgICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycyB8fCBbXTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCBSZXF1ZXN0RXJyb3IgZnJvbSAnLi9yZXF1ZXN0LWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB1bmFibGUgdG8gc3VjY2Vzc2Z1bGx5IHN1Ym1pdCBhIHNlcnZlciByZXF1ZXN0XG4gKiB1c2luZyBhIHBheW1lbnQgbWV0aG9kIGJlY2F1c2UgdGhlIG1ldGhvZCBoYXMgaW52YWxpZCBjb25maWd1cmF0aW9uIG9yIGlzIGluXG4gKiBhbiBpbnZhbGlkIHN0YXRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yPFQgPSBhbnk+IGV4dGVuZHMgUmVxdWVzdEVycm9yPFQ+IHtcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZT86IFJlc3BvbnNlPFQ+KSB7XG4gICAgICAgIHN1cGVyKHJlc3BvbnNlLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiAnVGhlcmUgaXMgYSBwcm9ibGVtIHByb2Nlc3NpbmcgeW91ciBwYXltZW50LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kSW52YWxpZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfbWV0aG9kX2ludmFsaWQnO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFtb3VudFRyYW5zZm9ybWVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9kZWNpbWFsUGxhY2VzOiBudW1iZXIpIHt9XG5cbiAgICB0b0ludGVnZXIoYW1vdW50OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChhbW91bnQgKiAxMCAqKiB0aGlzLl9kZWNpbWFsUGxhY2VzKTtcbiAgICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIEFmZmlybSB7XG4gICAgY2hlY2tvdXQ6IEFmZmlybUNoZWNrb3V0O1xuICAgIHVpOiB7XG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICBvbihldmVudDogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQ7XG4gICAgICAgIH07XG4gICAgICAgIHJlYWR5KGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZDtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFmZmlybUNoZWNrb3V0IHtcbiAgICAob3B0aW9uczogQWZmaXJtUmVxdWVzdERhdGEpOiB2b2lkO1xuICAgIG9wZW4obW9kYWxPcHRpb25zOiBBZmZpcm1DYWxsYmFjayk6IHZvaWQ7XG4gICAgaW5pdCgpOiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgQWZmaXJtQ2FsbGJhY2sge1xuICAgIG9uRmFpbChvbkZhaWw6IEFmZmlybUZhaWxSZXNwb25zZSk6IHZvaWQ7XG4gICAgb25TdWNjZXNzKHN1Y2Nlc3M6IEFmZmlybVN1Y2Nlc3NSZXNwb25zZSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWZmaXJtSG9zdFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgYWZmaXJtPzogQWZmaXJtO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFmZmlybVN1Y2Nlc3NSZXNwb25zZSB7XG4gICAgY2hlY2tvdXRfdG9rZW46IHN0cmluZztcbiAgICBjcmVhdGVkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWZmaXJtRmFpbFJlc3BvbnNlIHtcbiAgICByZWFzb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZmZpcm1SZXF1ZXN0RGF0YSB7XG4gICAgbWVyY2hhbnQ6IHtcbiAgICAgICAgdXNlcl9jb25maXJtYXRpb25fdXJsOiBzdHJpbmc7XG4gICAgICAgIHVzZXJfY2FuY2VsX3VybDogc3RyaW5nO1xuICAgICAgICB1c2VyX2NvbmZpcm1hdGlvbl91cmxfYWN0aW9uPzogc3RyaW5nO1xuICAgICAgICBuYW1lPzogc3RyaW5nO1xuICAgIH07XG4gICAgc2hpcHBpbmc6IEFmZmlybUFkZHJlc3M7XG4gICAgYmlsbGluZz86IEFmZmlybUFkZHJlc3M7XG4gICAgaXRlbXM6IEFmZmlybUl0ZW1bXTtcbiAgICBkaXNjb3VudHM6IEFmZmlybURpc2NvdW50O1xuICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIHNoaXBwaW5nX3R5cGU6IHN0cmluZztcbiAgICAgICAgZW50aXR5X25hbWU/OiBzdHJpbmc7XG4gICAgICAgIHdlYmhvb2tfc2Vzc2lvbl9pZD86IHN0cmluZztcbiAgICAgICAgbW9kZT86IHN0cmluZztcbiAgICAgICAgcGxhdGZvcm1fdHlwZTogc3RyaW5nO1xuICAgICAgICBwbGF0Zm9ybV92ZXJzaW9uOiBzdHJpbmc7XG4gICAgICAgIHBsYXRmb3JtX2FmZmlybTogc3RyaW5nO1xuICAgIH07XG4gICAgb3JkZXJfaWQ/OiBzdHJpbmc7XG4gICAgc2hpcHBpbmdfYW1vdW50OiBudW1iZXI7XG4gICAgdGF4X2Ftb3VudDogbnVtYmVyO1xuICAgIHRvdGFsOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWZmaXJtSXRlbSB7XG4gICAgZGlzcGxheV9uYW1lOiBzdHJpbmc7XG4gICAgc2t1OiBzdHJpbmc7XG4gICAgdW5pdF9wcmljZTogbnVtYmVyO1xuICAgIHF0eTogbnVtYmVyO1xuICAgIGl0ZW1faW1hZ2VfdXJsOiBzdHJpbmc7XG4gICAgaXRlbV91cmw6IHN0cmluZztcbiAgICBjYXRlZ29yaWVzPzogc3RyaW5nW11bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZmZpcm1EaXNjb3VudCB7XG4gICAgW2tleTogc3RyaW5nXToge1xuICAgICAgICBkaXNjb3VudF9hbW91bnQ6IG51bWJlcjtcbiAgICAgICAgZGlzY291bnRfZGlzcGxheV9uYW1lOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZmZpcm1BZGRyZXNzIHtcbiAgICBuYW1lOiB7XG4gICAgICAgIGZpcnN0OiBzdHJpbmc7XG4gICAgICAgIGxhc3Q6IHN0cmluZztcbiAgICAgICAgZnVsbD86IHN0cmluZztcbiAgICB9O1xuICAgIGFkZHJlc3M6IHtcbiAgICAgICAgbGluZTE6IHN0cmluZztcbiAgICAgICAgbGluZTI/OiBzdHJpbmc7XG4gICAgICAgIGNpdHk6IHN0cmluZztcbiAgICAgICAgc3RhdGU6IHN0cmluZztcbiAgICAgICAgemlwY29kZTogc3RyaW5nO1xuICAgICAgICBjb3VudHJ5Pzogc3RyaW5nO1xuICAgIH07XG4gICAgcGhvbmVfbnVtYmVyPzogc3RyaW5nO1xuICAgIGVtYWlsPzogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBBRkZJUk1fU0NSSVBUUyB7XG4gICAgUFJPRCA9ICcvL2NkbjEuYWZmaXJtLmNvbS9qcy92Mi9hZmZpcm0uanMnLFxuICAgIFNBTkRCT1ggPSAnLy9jZG4xLXNhbmRib3guYWZmaXJtLmNvbS9qcy92Mi9hZmZpcm0uanMnLFxufVxuIiwiaW1wb3J0IHtcbiAgICBBbW91bnRUcmFuc2Zvcm1lcixcbiAgICBDb25zaWdubWVudCxcbiAgICBpdGVtc1JlcXVpcmVTaGlwcGluZyxcbiAgICBMaW5lSXRlbUNhdGVnb3J5LFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlcixcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgQWZmaXJtLFxuICAgIEFmZmlybUFkZHJlc3MsXG4gICAgQWZmaXJtRGlzY291bnQsXG4gICAgQWZmaXJtRmFpbFJlc3BvbnNlLFxuICAgIEFmZmlybUl0ZW0sXG4gICAgQWZmaXJtUmVxdWVzdERhdGEsXG4gICAgQWZmaXJtU3VjY2Vzc1Jlc3BvbnNlLFxufSBmcm9tICcuL2FmZmlybSc7XG5pbXBvcnQgQWZmaXJtU2NyaXB0TG9hZGVyIGZyb20gJy4vYWZmaXJtLXNjcmlwdC1sb2FkZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZmZpcm1QYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgYWZmaXJtPzogQWZmaXJtO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBhZmZpcm1TY3JpcHRMb2FkZXI6IEFmZmlybVNjcmlwdExvYWRlcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2Qob3B0aW9ucy5tZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjbGllbnRUb2tlbixcbiAgICAgICAgICAgIGNvbmZpZzogeyB0ZXN0TW9kZSB9LFxuICAgICAgICB9ID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cob3B0aW9ucy5tZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFjbGllbnRUb2tlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hZmZpcm0gPSBhd2FpdCB0aGlzLmFmZmlybVNjcmlwdExvYWRlci5sb2FkKGNsaWVudFRva2VuLCB0ZXN0TW9kZSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IG1ldGhvZElkID0gcGF5bG9hZC5wYXltZW50Py5tZXRob2RJZDtcbiAgICAgICAgY29uc3QgeyB1c2VTdG9yZUNyZWRpdCB9ID0gcGF5bG9hZDtcblxuICAgICAgICBpZiAoIXRoaXMuYWZmaXJtKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQubWV0aG9kSWQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoeyB1c2VTdG9yZUNyZWRpdCB9LCBvcHRpb25zKTtcblxuICAgICAgICBjb25zdCBhZmZpcm1DaGVja291dCA9IGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUFmZmlybUNoZWNrb3V0KCk7XG5cbiAgICAgICAgY29uc3QgcGF5bWVudFBheWxvYWQgPSB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7IG5vbmNlOiBhZmZpcm1DaGVja291dC5jaGVja291dF90b2tlbiB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLmFmZmlybSkge1xuICAgICAgICAgICAgdGhpcy5hZmZpcm0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZUFmZmlybUNoZWNrb3V0KCk6IFByb21pc2U8QWZmaXJtU3VjY2Vzc1Jlc3BvbnNlPiB7XG4gICAgICAgIHRoaXMuYWZmaXJtPy5jaGVja291dCh0aGlzLmdldENoZWNrb3V0SW5mb3JtYXRpb24oKSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWZmaXJtPy5jaGVja291dC5vcGVuKHtcbiAgICAgICAgICAgICAgICBvbkZhaWw6IChmYWlsT2JqZWN0OiBBZmZpcm1GYWlsUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhaWxPYmplY3QucmVhc29uID09PSAnY2FuY2VsZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcigpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25TdWNjZXNzOiAoc3VjY2Vzc09iamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHN1Y2Nlc3NPYmplY3QpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYWZmaXJtPy51aS5lcnJvci5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDaGVja291dEluZm9ybWF0aW9uKCk6IEFmZmlybVJlcXVlc3REYXRhIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY29uZmlnID0gc3RhdGUuZ2V0U3RvcmVDb25maWcoKTtcbiAgICAgICAgY29uc3QgY29uc2lnbm1lbnRzID0gc3RhdGUuZ2V0Q29uc2lnbm1lbnRzKCk7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gc3RhdGUuZ2V0T3JkZXIoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnQoKTtcblxuICAgICAgICBpZiAoIWNvbmZpZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghb3JkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhbW91bnRUcmFuc2Zvcm1lciA9IG5ldyBBbW91bnRUcmFuc2Zvcm1lcihvcmRlci5jdXJyZW5jeS5kZWNpbWFsUGxhY2VzKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSB0aGlzLmdldEJpbGxpbmdBZGRyZXNzKCk7XG5cbiAgICAgICAgY29uc3QgcmV0cmlldmVkU2hpcHBpbmdBZGRyZXNzID0gdGhpcy5nZXRTaGlwcGluZ0FkZHJlc3MoKTtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID1cbiAgICAgICAgICAgIGl0ZW1zUmVxdWlyZVNoaXBwaW5nKGNhcnQsIGNvbmZpZykgJiYgcmV0cmlldmVkU2hpcHBpbmdBZGRyZXNzXG4gICAgICAgICAgICAgICAgPyByZXRyaWV2ZWRTaGlwcGluZ0FkZHJlc3NcbiAgICAgICAgICAgICAgICA6IGJpbGxpbmdBZGRyZXNzO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXJjaGFudDoge1xuICAgICAgICAgICAgICAgIHVzZXJfY29uZmlybWF0aW9uX3VybDogY29uZmlnLmxpbmtzLmNoZWNrb3V0TGluayxcbiAgICAgICAgICAgICAgICB1c2VyX2NhbmNlbF91cmw6IGNvbmZpZy5saW5rcy5jaGVja291dExpbmssXG4gICAgICAgICAgICAgICAgdXNlcl9jb25maXJtYXRpb25fdXJsX2FjdGlvbjogJ1BPU1QnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNoaXBwaW5nOiBzaGlwcGluZ0FkZHJlc3MsXG4gICAgICAgICAgICBiaWxsaW5nOiBiaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgICAgIGl0ZW1zOiB0aGlzLmdldEl0ZW1zKGFtb3VudFRyYW5zZm9ybWVyLCBvcmRlciksXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgIHNoaXBwaW5nX3R5cGU6IHRoaXMuZ2V0U2hpcHBpbmdUeXBlKGNvbnNpZ25tZW50cyksXG4gICAgICAgICAgICAgICAgbW9kZTogJ21vZGFsJyxcbiAgICAgICAgICAgICAgICBwbGF0Zm9ybV90eXBlOiAnQmlnQ29tbWVyY2UnLFxuICAgICAgICAgICAgICAgIHBsYXRmb3JtX3ZlcnNpb246ICcnLFxuICAgICAgICAgICAgICAgIHBsYXRmb3JtX2FmZmlybTogJycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGlzY291bnRzOiB0aGlzLmdldERpc2NvdW50cyhhbW91bnRUcmFuc2Zvcm1lciwgb3JkZXIpLFxuICAgICAgICAgICAgb3JkZXJfaWQ6IG9yZGVyLm9yZGVySWQgPyBvcmRlci5vcmRlcklkLnRvU3RyaW5nKCkgOiAnJyxcbiAgICAgICAgICAgIHNoaXBwaW5nX2Ftb3VudDogYW1vdW50VHJhbnNmb3JtZXIudG9JbnRlZ2VyKG9yZGVyLnNoaXBwaW5nQ29zdFRvdGFsKSxcbiAgICAgICAgICAgIHRheF9hbW91bnQ6IGFtb3VudFRyYW5zZm9ybWVyLnRvSW50ZWdlcihvcmRlci50YXhUb3RhbCksXG4gICAgICAgICAgICB0b3RhbDogYW1vdW50VHJhbnNmb3JtZXIudG9JbnRlZ2VyKG9yZGVyLm9yZGVyQW1vdW50KSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFNoaXBwaW5nVHlwZShjb25zaWdubWVudHM/OiBDb25zaWdubWVudFtdKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKCFjb25zaWdubWVudHMpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbnNpZ25tZW50ID0gY29uc2lnbm1lbnRzWzBdO1xuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktY29uZGl0aW9uXG4gICAgICAgIHJldHVybiBjb25zaWdubWVudD8uc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiA/IGNvbnNpZ25tZW50LnNlbGVjdGVkU2hpcHBpbmdPcHRpb24udHlwZSA6ICcnO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QmlsbGluZ0FkZHJlc3MoKTogQWZmaXJtQWRkcmVzcyB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3MoKTtcblxuICAgICAgICBpZiAoIWJpbGxpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYmlsbGluZ0luZm9ybWF0aW9uID0ge1xuICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgIGZpcnN0OiBiaWxsaW5nQWRkcmVzcy5maXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgbGFzdDogYmlsbGluZ0FkZHJlc3MubGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgZnVsbDogYCR7YmlsbGluZ0FkZHJlc3MuZmlyc3ROYW1lfSAke2JpbGxpbmdBZGRyZXNzLmxhc3ROYW1lfWAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkcmVzczoge1xuICAgICAgICAgICAgICAgIGxpbmUxOiBiaWxsaW5nQWRkcmVzcy5hZGRyZXNzMSxcbiAgICAgICAgICAgICAgICBsaW5lMjogYmlsbGluZ0FkZHJlc3MuYWRkcmVzczIsXG4gICAgICAgICAgICAgICAgY2l0eTogYmlsbGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYmlsbGluZ0FkZHJlc3Muc3RhdGVPclByb3ZpbmNlQ29kZSxcbiAgICAgICAgICAgICAgICB6aXBjb2RlOiBiaWxsaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgICAgIGNvdW50cnk6IGJpbGxpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBob25lX251bWJlcjogYmlsbGluZ0FkZHJlc3MucGhvbmUsXG4gICAgICAgICAgICBlbWFpbDogYmlsbGluZ0FkZHJlc3MuZW1haWwsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGJpbGxpbmdJbmZvcm1hdGlvbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFNoaXBwaW5nQWRkcmVzcygpOiBBZmZpcm1BZGRyZXNzIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID0gc3RhdGUuZ2V0U2hpcHBpbmdBZGRyZXNzKCk7XG5cbiAgICAgICAgaWYgKCFzaGlwcGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNoaXBwaW5nSW5mb3JtYXRpb24gPSB7XG4gICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgICAgZmlyc3Q6IHNoaXBwaW5nQWRkcmVzcy5maXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgbGFzdDogc2hpcHBpbmdBZGRyZXNzLmxhc3ROYW1lLFxuICAgICAgICAgICAgICAgIGZ1bGw6IGAke3NoaXBwaW5nQWRkcmVzcy5maXJzdE5hbWV9ICR7c2hpcHBpbmdBZGRyZXNzLmxhc3ROYW1lfWAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkcmVzczoge1xuICAgICAgICAgICAgICAgIGxpbmUxOiBzaGlwcGluZ0FkZHJlc3MuYWRkcmVzczEsXG4gICAgICAgICAgICAgICAgbGluZTI6IHNoaXBwaW5nQWRkcmVzcy5hZGRyZXNzMixcbiAgICAgICAgICAgICAgICBjaXR5OiBzaGlwcGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogc2hpcHBpbmdBZGRyZXNzLnN0YXRlT3JQcm92aW5jZUNvZGUsXG4gICAgICAgICAgICAgICAgemlwY29kZTogc2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICAgICAgY291bnRyeTogc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBob25lX251bWJlcjogc2hpcHBpbmdBZGRyZXNzLnBob25lLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzaGlwcGluZ0luZm9ybWF0aW9uO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SXRlbXMoYW1vdW50VHJhbnNmb3JtZXI6IEFtb3VudFRyYW5zZm9ybWVyLCBvcmRlcjogT3JkZXIpOiBBZmZpcm1JdGVtW10ge1xuICAgICAgICBjb25zdCBpdGVtczogQWZmaXJtSXRlbVtdID0gW107XG5cbiAgICAgICAgb3JkZXIubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgICAgZGlzcGxheV9uYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgc2t1OiBpdGVtLnNrdSxcbiAgICAgICAgICAgICAgICB1bml0X3ByaWNlOiBhbW91bnRUcmFuc2Zvcm1lci50b0ludGVnZXIoaXRlbS5zYWxlUHJpY2UpLFxuICAgICAgICAgICAgICAgIHF0eTogaXRlbS5xdWFudGl0eSxcbiAgICAgICAgICAgICAgICBpdGVtX2ltYWdlX3VybDogaXRlbS5pbWFnZVVybCxcbiAgICAgICAgICAgICAgICBpdGVtX3VybDogaXRlbS51cmwsXG4gICAgICAgICAgICAgICAgY2F0ZWdvcmllczogdGhpcy5nZXRDYXRlZ29yaWVzKGl0ZW0uY2F0ZWdvcmllcyksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgb3JkZXIubGluZUl0ZW1zLmRpZ2l0YWxJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5X25hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICBza3U6IGl0ZW0uc2t1LFxuICAgICAgICAgICAgICAgIHVuaXRfcHJpY2U6IGFtb3VudFRyYW5zZm9ybWVyLnRvSW50ZWdlcihpdGVtLnNhbGVQcmljZSksXG4gICAgICAgICAgICAgICAgcXR5OiBpdGVtLnF1YW50aXR5LFxuICAgICAgICAgICAgICAgIGl0ZW1faW1hZ2VfdXJsOiBpdGVtLmltYWdlVXJsLFxuICAgICAgICAgICAgICAgIGl0ZW1fdXJsOiBpdGVtLnVybCxcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzOiB0aGlzLmdldENhdGVnb3JpZXMoaXRlbS5jYXRlZ29yaWVzKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBvcmRlci5saW5lSXRlbXMuZ2lmdENlcnRpZmljYXRlcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5X25hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICBza3U6ICcnLFxuICAgICAgICAgICAgICAgIHVuaXRfcHJpY2U6IGFtb3VudFRyYW5zZm9ybWVyLnRvSW50ZWdlcihpdGVtLmFtb3VudCksXG4gICAgICAgICAgICAgICAgcXR5OiAxLFxuICAgICAgICAgICAgICAgIGl0ZW1faW1hZ2VfdXJsOiAnJyxcbiAgICAgICAgICAgICAgICBpdGVtX3VybDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG9yZGVyLmxpbmVJdGVtcy5jdXN0b21JdGVtcykge1xuICAgICAgICAgICAgb3JkZXIubGluZUl0ZW1zLmN1c3RvbUl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9uYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHNrdTogaXRlbS5za3UsXG4gICAgICAgICAgICAgICAgICAgIHVuaXRfcHJpY2U6IGFtb3VudFRyYW5zZm9ybWVyLnRvSW50ZWdlcihpdGVtLmxpc3RQcmljZSksXG4gICAgICAgICAgICAgICAgICAgIHF0eTogaXRlbS5xdWFudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbV9pbWFnZV91cmw6ICcnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtX3VybDogJycsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpdGVtcztcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldERpc2NvdW50cyhhbW91bnRUcmFuc2Zvcm1lcjogQW1vdW50VHJhbnNmb3JtZXIsIG9yZGVyOiBPcmRlcik6IEFmZmlybURpc2NvdW50IHtcbiAgICAgICAgY29uc3QgZGlzY291bnRzOiBBZmZpcm1EaXNjb3VudCA9IHt9O1xuXG4gICAgICAgIG9yZGVyLmNvdXBvbnMuZm9yRWFjaCgobGluZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGxpbmUuZGlzY291bnRlZEFtb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICBkaXNjb3VudHNbbGluZS5jb2RlXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgZGlzY291bnRfYW1vdW50OiBhbW91bnRUcmFuc2Zvcm1lci50b0ludGVnZXIobGluZS5kaXNjb3VudGVkQW1vdW50KSxcbiAgICAgICAgICAgICAgICAgICAgZGlzY291bnRfZGlzcGxheV9uYW1lOiBsaW5lLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChvcmRlci5kaXNjb3VudEFtb3VudCA+IDApIHtcbiAgICAgICAgICAgIGRpc2NvdW50cy5ESVNDT1VOVEVEX0FNT1VOVCA9IHtcbiAgICAgICAgICAgICAgICBkaXNjb3VudF9hbW91bnQ6IGFtb3VudFRyYW5zZm9ybWVyLnRvSW50ZWdlcihvcmRlci5kaXNjb3VudEFtb3VudCksXG4gICAgICAgICAgICAgICAgZGlzY291bnRfZGlzcGxheV9uYW1lOiAnZGlzY291bnQnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkaXNjb3VudHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDYXRlZ29yaWVzKGNhdGVnb3JpZXM/OiBMaW5lSXRlbUNhdGVnb3J5W11bXSk6IHN0cmluZ1tdW10ge1xuICAgICAgICBpZiAoIWNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBbW11dO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNhdGVnb3JpZXMubWFwKChjYXRlZ29yeVRyZWUpID0+IGNhdGVnb3J5VHJlZS5tYXAoKGNhdGVnb3J5KSA9PiBjYXRlZ29yeS5uYW1lKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ2FydCB9IGZyb20gJy4uL2NhcnQnO1xuaW1wb3J0IHsgU3RvcmVDb25maWcgfSBmcm9tICcuLi9jb25maWcnO1xuXG5jb25zdCBpdGVtc1JlcXVpcmVTaGlwcGluZyA9IChjYXJ0PzogQ2FydCwgY29uZmlnPzogU3RvcmVDb25maWcpID0+IHtcbiAgICBpZiAoIWNhcnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLnNvbWUoKGxpbmVJdGVtKSA9PiBsaW5lSXRlbS5pc1NoaXBwaW5nUmVxdWlyZWQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChjb25maWcgJiYgY2FydC5saW5lSXRlbXMuY3VzdG9tSXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIGNhcnQubGluZUl0ZW1zLmN1c3RvbUl0ZW1zLmxlbmd0aCA+IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaXRlbXNSZXF1aXJlU2hpcHBpbmc7XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBmYWlsc1xuICogdG8gbG9hZCwgb3IgZm9yIHNvbWUgcmVhc29uLCBpdCBpcyBpbmFjY2Vzc2libGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBBZmZpcm0sIEFGRklSTV9TQ1JJUFRTLCBBZmZpcm1Ib3N0V2luZG93IH0gZnJvbSAnLi9hZmZpcm0nO1xuaW1wb3J0IGxvYWRBZmZpcm1KUyBmcm9tICcuL2FmZmlybUpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWZmaXJtU2NyaXB0TG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgYWZmaXJtV2luZG93OiBBZmZpcm1Ib3N0V2luZG93ID0gd2luZG93KSB7fVxuXG4gICAgbG9hZChhcGlrZXkgPSAnJywgdGVzdE1vZGU/OiBib29sZWFuKTogUHJvbWlzZTxBZmZpcm0+IHtcbiAgICAgICAgY29uc3Qgc2NyaXB0VVJJID0gdGVzdE1vZGUgPyBBRkZJUk1fU0NSSVBUUy5TQU5EQk9YIDogQUZGSVJNX1NDUklQVFMuUFJPRDtcblxuICAgICAgICBsb2FkQWZmaXJtSlMoYXBpa2V5LCBzY3JpcHRVUkkpO1xuXG4gICAgICAgIGlmICghdGhpcy5hZmZpcm1XaW5kb3cuYWZmaXJtKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5hZmZpcm1XaW5kb3cuYWZmaXJtKTtcbiAgICB9XG59XG4iLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItcmVzdC1wYXJhbXMgKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvbiAqL1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsICovXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnQgKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcyAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcGx1c3BsdXMgKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtYXNzZXJ0aW9ucyAqL1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXNoYWRvdyAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZXJzY29yZS1kYW5nbGUgKi9cbi8qKlxuICogVXNlZCB0aGlzIGFwcHJvYWNoIGFzIEFmZmlybSB1c2VzIHNuaXBwZWQgZm9yIGluaXRpYWxpemluZy4gUGxlYXNlIHJlZmVyIHRvIEFmZmlybSBkb2N1bWVudGF0aW9uIGluOiBodHRwczovL2RvY3MuYWZmaXJtLmNvbS9JbnRlZ3JhdGVfQWZmaXJtL0RpcmVjdF9BUEkjMS5fQWRkX0FmZmlybS5qc1xuICovXG5pbXBvcnQgeyBBZmZpcm0sIEFmZmlybUhvc3RXaW5kb3cgfSBmcm9tICcuL2FmZmlybSc7XG5cbmludGVyZmFjZSBBZmZpcm1Db25maWcge1xuICAgIHB1YmxpY19hcGlfa2V5OiBzdHJpbmc7XG4gICAgc2NyaXB0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxvYWRBZmZpcm1KUyhhcGlLZXk6IHN0cmluZywgc2NyaXB0VVJMOiBzdHJpbmcpIHtcbiAgICBjb25zdCBfQUZGSVJNX0NPTkZJRzogQWZmaXJtQ29uZmlnID0ge1xuICAgICAgICBwdWJsaWNfYXBpX2tleTogYXBpS2V5LFxuICAgICAgICBzY3JpcHQ6IHNjcmlwdFVSTCxcbiAgICB9O1xuXG4gICAgKGZ1bmN0aW9uIGZvbyhcbiAgICAgICAgbTogQWZmaXJtSG9zdFdpbmRvdyB8IGFueSxcbiAgICAgICAgZzogQWZmaXJtQ29uZmlnLFxuICAgICAgICBuOiAnYWZmaXJtJyxcbiAgICAgICAgZDogJ2NoZWNrb3V0JyxcbiAgICAgICAgYTogJ3VpJyxcbiAgICAgICAgZTogJ3NjcmlwdCcsXG4gICAgICAgIGg6ICdyZWFkeScsXG4gICAgICAgIGM6ICdqc1JlYWR5JyxcbiAgICApIHtcbiAgICAgICAgY29uc3QgYiA9IG1bbl0gfHwge307XG4gICAgICAgIGNvbnN0IGsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO1xuICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSlbMF07XG4gICAgICAgIGNvbnN0IGwgPSBmdW5jdGlvbiBiYXIoYTogQWZmaXJtIHwgYW55LCBiOiBrZXlvZiBBZmZpcm0sIGM6IHN0cmluZykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGJheigpIHtcbiAgICAgICAgICAgICAgICBhW2JdLl8ucHVzaChbYywgYXJndW1lbnRzXSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIGJbZF0gPSBsKGIsIGQsICdzZXQnKTtcblxuICAgICAgICBjb25zdCBmID0gYltkXTtcblxuICAgICAgICBiW2FdID0ge307XG4gICAgICAgIGJbYV0uXyA9IFtdO1xuICAgICAgICBmLl8gPSBbXTtcbiAgICAgICAgYi5fID0gW107XG4gICAgICAgIGJbYV1baF0gPSBsKGIsIGEsIGgpO1xuXG4gICAgICAgIGJbY10gPSBmdW5jdGlvbiBxdXgoKSB7XG4gICAgICAgICAgICBiLl8ucHVzaChbaCwgYXJndW1lbnRzXSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IGExID0gMDtcblxuICAgICAgICBmb3IgKFxuICAgICAgICAgICAgY29uc3QgYzEgPSAnc2V0IGFkZCBzYXZlIHBvc3Qgb3BlbiBlbXB0eSByZXNldCBvbiBvZmYgdHJpZ2dlciByZWFkeSBzZXRQcm9kdWN0Jy5zcGxpdChcbiAgICAgICAgICAgICAgICAnICcsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYTEgPCBjMS5sZW5ndGg7XG4gICAgICAgICAgICBhMSsrXG4gICAgICAgICkge1xuICAgICAgICAgICAgZltjMVthMV1dID0gbChiLCBkLCBjMVthMV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGEyID0gMDtcblxuICAgICAgICBmb3IgKGNvbnN0IGMyID0gWydnZXQnLCAndG9rZW4nLCAndXJsJywgJ2l0ZW1zJ107IGEyIDwgYzIubGVuZ3RoOyBhMisrKSB7XG4gICAgICAgICAgICBmW2MyW2EyXV0gPSBmdW5jdGlvbiBmb29iYXIoKSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGsuYXN5bmMgPSAhMDtcbiAgICAgICAgay5zcmMgPSBnW2VdO1xuXG4gICAgICAgIGlmIChwLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIHAucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaywgcCk7XG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgKGcgYXMgUGFydGlhbDxBZmZpcm1Db25maWc+KVtlXTtcbiAgICAgICAgZihnKTtcbiAgICAgICAgbVtuXSA9IGI7XG4gICAgfSkod2luZG93LCBfQUZGSVJNX0NPTkZJRywgJ2FmZmlybScsICdjaGVja291dCcsICd1aScsICdzY3JpcHQnLCAncmVhZHknLCAnanNSZWFkeScpO1xufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBBZmZpcm1QYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9hZmZpcm0tcGF5bWVudC1zdHJhdGVneSc7XG5pbXBvcnQgQWZmaXJtU2NyaXB0TG9hZGVyIGZyb20gJy4vYWZmaXJtLXNjcmlwdC1sb2FkZXInO1xuXG5jb25zdCBjcmVhdGVBZmZpcm1QYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8QWZmaXJtUGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBBZmZpcm1QYXltZW50U3RyYXRlZ3kocGF5bWVudEludGVncmF0aW9uU2VydmljZSwgbmV3IEFmZmlybVNjcmlwdExvYWRlcigpKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVBZmZpcm1QYXltZW50U3RyYXRlZ3ksIFt7IGlkOiAnYWZmaXJtJyB9XSk7XG4iLCJpbXBvcnQgUmVzb2x2YWJsZU1vZHVsZSBmcm9tICcuL3Jlc29sdmFibGUtbW9kdWxlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9SZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPihcbiAgICBtb2R1bGU6IFRNb2R1bGUsXG4gICAgcmVzb2x2ZUlkczogVElkZW50aWZpZXJbXSxcbik6IFJlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+IHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2R1bGUsIHsgcmVzb2x2ZUlkcyB9KTtcbn1cbiJdLCJuYW1lcyI6WyJNaXNzaW5nRGF0YUVycm9yVHlwZSIsIk5vdEluaXRpYWxpemVkRXJyb3JUeXBlIiwiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwicHJvdG90eXBlIiwic3VwZXIiLCJuYW1lIiwidHlwZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwidGhpcyIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJNaXNzaW5nRGF0YUVycm9yIiwic3VidHlwZSIsIk1pc3NpbmdCaWxsaW5nQWRkcmVzcyIsIk1pc3NpbmdDYXJ0IiwiTWlzc2luZ0NvbnNpZ25tZW50cyIsIk1pc3NpbmdDaGVja291dCIsIk1pc3NpbmdDdXN0b21lciIsIk1pc3NpbmdDaGVja291dENvbmZpZyIsIk1pc3NpbmdPcmRlckNvbmZpZyIsIk1pc3NpbmdPcmRlciIsIk1pc3NpbmdPcmRlcklkIiwiTWlzc2luZ1BheW1lbnQiLCJNaXNzaW5nUGF5bWVudFRva2VuIiwiTWlzc2luZ1BheW1lbnRNZXRob2QiLCJNaXNzaW5nU2hpcHBpbmdBZGRyZXNzIiwiZ2V0RXJyb3JNZXNzYWdlIiwiTm90SW5pdGlhbGl6ZWRFcnJvciIsIkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50Tm90SW5pdGlhbGl6ZWQiLCJTaGlwcGluZ05vdEluaXRpYWxpemVkIiwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCIsIkludmFsaWRBcmd1bWVudEVycm9yIiwiUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIiwiaW52YWxpZEZpZWxkcyIsImpvaW4iLCJPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IiLCJQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IiLCJERUZBVUxUX1JFU1BPTlNFIiwiYm9keSIsImhlYWRlcnMiLCJzdGF0dXMiLCJSZXF1ZXN0RXJyb3IiLCJyZXNwb25zZSIsImVycm9ycyIsIlBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IiLCJBbW91bnRUcmFuc2Zvcm1lciIsIl9kZWNpbWFsUGxhY2VzIiwidG9JbnRlZ2VyIiwiYW1vdW50IiwiTWF0aCIsInJvdW5kIiwiQUZGSVJNX1NDUklQVFMiLCJBZmZpcm1QYXltZW50U3RyYXRlZ3kiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwiYWZmaXJtU2NyaXB0TG9hZGVyIiwiaW5pdGlhbGl6ZSIsIm9wdGlvbnMiLCJsb2FkUGF5bWVudE1ldGhvZCIsIm1ldGhvZElkIiwic3RhdGUiLCJnZXRTdGF0ZSIsImNsaWVudFRva2VuIiwiY29uZmlnIiwidGVzdE1vZGUiLCJnZXRQYXltZW50TWV0aG9kT3JUaHJvdyIsImFmZmlybSIsImxvYWQiLCJleGVjdXRlIiwicGF5bG9hZCIsInBheW1lbnQiLCJ1c2VTdG9yZUNyZWRpdCIsInN1Ym1pdE9yZGVyIiwicGF5bWVudFBheWxvYWQiLCJwYXltZW50RGF0YSIsIm5vbmNlIiwiaW5pdGlhbGl6ZUFmZmlybUNoZWNrb3V0IiwiY2hlY2tvdXRfdG9rZW4iLCJzdWJtaXRQYXltZW50IiwiZGVpbml0aWFsaXplIiwidW5kZWZpbmVkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJmaW5hbGl6ZSIsInJlamVjdCIsImNoZWNrb3V0IiwiZ2V0Q2hlY2tvdXRJbmZvcm1hdGlvbiIsIm9wZW4iLCJvbkZhaWwiLCJmYWlsT2JqZWN0IiwicmVhc29uIiwib25TdWNjZXNzIiwic3VjY2Vzc09iamVjdCIsInVpIiwiZXJyb3IiLCJvbiIsImdldFN0b3JlQ29uZmlnIiwiY29uc2lnbm1lbnRzIiwiZ2V0Q29uc2lnbm1lbnRzIiwib3JkZXIiLCJnZXRPcmRlciIsImNhcnQiLCJnZXRDYXJ0IiwiYW1vdW50VHJhbnNmb3JtZXIiLCJjdXJyZW5jeSIsImRlY2ltYWxQbGFjZXMiLCJiaWxsaW5nQWRkcmVzcyIsImdldEJpbGxpbmdBZGRyZXNzIiwicmV0cmlldmVkU2hpcHBpbmdBZGRyZXNzIiwiZ2V0U2hpcHBpbmdBZGRyZXNzIiwic2hpcHBpbmdBZGRyZXNzIiwibGluZUl0ZW1zIiwicGh5c2ljYWxJdGVtcyIsInNvbWUiLCJsaW5lSXRlbSIsImlzU2hpcHBpbmdSZXF1aXJlZCIsImN1c3RvbUl0ZW1zIiwibGVuZ3RoIiwibWVyY2hhbnQiLCJ1c2VyX2NvbmZpcm1hdGlvbl91cmwiLCJsaW5rcyIsImNoZWNrb3V0TGluayIsInVzZXJfY2FuY2VsX3VybCIsInVzZXJfY29uZmlybWF0aW9uX3VybF9hY3Rpb24iLCJzaGlwcGluZyIsImJpbGxpbmciLCJpdGVtcyIsImdldEl0ZW1zIiwibWV0YWRhdGEiLCJzaGlwcGluZ190eXBlIiwiZ2V0U2hpcHBpbmdUeXBlIiwibW9kZSIsInBsYXRmb3JtX3R5cGUiLCJwbGF0Zm9ybV92ZXJzaW9uIiwicGxhdGZvcm1fYWZmaXJtIiwiZGlzY291bnRzIiwiZ2V0RGlzY291bnRzIiwib3JkZXJfaWQiLCJvcmRlcklkIiwidG9TdHJpbmciLCJzaGlwcGluZ19hbW91bnQiLCJzaGlwcGluZ0Nvc3RUb3RhbCIsInRheF9hbW91bnQiLCJ0YXhUb3RhbCIsInRvdGFsIiwib3JkZXJBbW91bnQiLCJjb25zaWdubWVudCIsInNlbGVjdGVkU2hpcHBpbmdPcHRpb24iLCJmaXJzdCIsImZpcnN0TmFtZSIsImxhc3QiLCJsYXN0TmFtZSIsImZ1bGwiLCJhZGRyZXNzIiwibGluZTEiLCJhZGRyZXNzMSIsImxpbmUyIiwiYWRkcmVzczIiLCJjaXR5Iiwic3RhdGVPclByb3ZpbmNlQ29kZSIsInppcGNvZGUiLCJwb3N0YWxDb2RlIiwiY291bnRyeSIsImNvdW50cnlDb2RlIiwicGhvbmVfbnVtYmVyIiwicGhvbmUiLCJlbWFpbCIsImZvckVhY2giLCJpdGVtIiwicHVzaCIsImRpc3BsYXlfbmFtZSIsInNrdSIsInVuaXRfcHJpY2UiLCJzYWxlUHJpY2UiLCJxdHkiLCJxdWFudGl0eSIsIml0ZW1faW1hZ2VfdXJsIiwiaW1hZ2VVcmwiLCJpdGVtX3VybCIsInVybCIsImNhdGVnb3JpZXMiLCJnZXRDYXRlZ29yaWVzIiwiZGlnaXRhbEl0ZW1zIiwiZ2lmdENlcnRpZmljYXRlcyIsImxpc3RQcmljZSIsImNvdXBvbnMiLCJsaW5lIiwiZGlzY291bnRlZEFtb3VudCIsImNvZGUiLCJkaXNjb3VudF9hbW91bnQiLCJkaXNjb3VudF9kaXNwbGF5X25hbWUiLCJkaXNwbGF5TmFtZSIsImRpc2NvdW50QW1vdW50IiwiRElTQ09VTlRFRF9BTU9VTlQiLCJtYXAiLCJjYXRlZ29yeVRyZWUiLCJjYXRlZ29yeSIsIlBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIiwiQWZmaXJtU2NyaXB0TG9hZGVyIiwiYWZmaXJtV2luZG93Iiwid2luZG93IiwiYXBpa2V5Iiwic2NyaXB0VVJJIiwiU0FOREJPWCIsIlBST0QiLCJtIiwiZyIsIm4iLCJkIiwiYSIsImUiLCJoIiwiYiIsImsiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJwIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsIiwiYyIsIl8iLCJhcmd1bWVudHMiLCJmIiwiYTEiLCJjMSIsInNwbGl0IiwiYTIiLCJjMiIsImFzeW5jIiwic3JjIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsInB1YmxpY19hcGlfa2V5Iiwic2NyaXB0IiwibW9kdWxlIiwicmVzb2x2ZUlkcyIsImlkIiwiYXNzaWduIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/affirm.js\n\n}");

/***/ }),

/***/ "./packages/affirm-integration/src/AffirmPaymentMethod.tsx":
/*!*****************************************************************!*\
  !*** ./packages/affirm-integration/src/AffirmPaymentMethod.tsx ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_affirm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/affirm */ \"../checkout-sdk-js/dist/esm/integrations/affirm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _bigcommerce_checkout_hosted_payment_integration__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-payment-integration */ \"./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/locale */ \"./packages/locale/src/TranslatedString.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n\n\n\n\n\n\nconst AffirmPaymentMethod = (_a) => {\n    var { checkoutService } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"checkoutService\"]);\n    const description = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_4__[\"default\"], { id: \"payment.affirm_body_text\" }), []);\n    const initializeAffirmPayment = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((options) => {\n        return checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_affirm__WEBPACK_IMPORTED_MODULE_1__.createAffirmPaymentStrategy] }));\n    }, [checkoutService]);\n    return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_hosted_payment_integration__WEBPACK_IMPORTED_MODULE_3__[\"default\"], Object.assign({}, rest, { checkoutService: checkoutService, deinitializePayment: checkoutService.deinitializePayment, description: description, initializePayment: initializeAffirmPayment })));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(AffirmPaymentMethod, [{ id: 'affirm' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZmZpcm0taW50ZWdyYXRpb24vc3JjL0FmZmlybVBheW1lbnRNZXRob2QudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUM0RjtBQUNoQjtBQUVjO0FBQzFCO0FBS1Q7QUFFdkQsTUFBTSxtQkFBbUIsR0FBMEMsQ0FBQyxFQUduRSxFQUFFLEVBQUU7UUFIK0QsRUFDaEUsZUFBZSxPQUVsQixFQURNLElBQUkscURBRnlELG1CQUduRSxDQURVO0lBRVAsTUFBTSxXQUFXLEdBQUcsOENBQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQywyREFBQyxvRUFBZ0IsSUFBQyxFQUFFLEVBQUMsMEJBQTBCLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUUxRixNQUFNLHVCQUF1QixHQUFHLGtEQUFXLENBQ3ZDLENBQUMsT0FBaUMsRUFBRSxFQUFFO1FBQ2xDLE9BQU8sZUFBZSxDQUFDLGlCQUFpQixpQ0FDakMsT0FBTyxLQUNWLFlBQVksRUFBRSxDQUFDLHNHQUEyQixDQUFDLElBQzdDLENBQUM7SUFDUCxDQUFDLEVBQ0QsQ0FBQyxlQUFlLENBQUMsQ0FDcEIsQ0FBQztJQUVGLE9BQU8sQ0FDSCwyREFBQyx3RkFBc0Isb0JBQ2YsSUFBSSxJQUNSLGVBQWUsRUFBRSxlQUFlLEVBQ2hDLG1CQUFtQixFQUFFLGVBQWUsQ0FBQyxtQkFBbUIsRUFDeEQsV0FBVyxFQUFFLFdBQVcsRUFDeEIsaUJBQWlCLEVBQUUsdUJBQXVCLElBQzVDLENBQ0wsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLHlGQUFxQixDQUNoQyxtQkFBbUIsRUFDbkIsQ0FBQyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUNyQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9hZmZpcm0taW50ZWdyYXRpb24vc3JjL0FmZmlybVBheW1lbnRNZXRob2QudHN4P2M5ZmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrJztcbmltcG9ydCB7IGNyZWF0ZUFmZmlybVBheW1lbnRTdHJhdGVneSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvaW50ZWdyYXRpb25zL2FmZmlybSc7XG5pbXBvcnQgUmVhY3QsIHsgdHlwZSBGdW5jdGlvbkNvbXBvbmVudCwgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEhvc3RlZFBheW1lbnRDb21wb25lbnQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaG9zdGVkLXBheW1lbnQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHsgVHJhbnNsYXRlZFN0cmluZyB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9sb2NhbGUnO1xuaW1wb3J0IHtcbiAgICB0eXBlIFBheW1lbnRNZXRob2RQcm9wcyxcbiAgICB0eXBlIFBheW1lbnRNZXRob2RSZXNvbHZlSWQsXG4gICAgdG9SZXNvbHZhYmxlQ29tcG9uZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5jb25zdCBBZmZpcm1QYXltZW50TWV0aG9kOiBGdW5jdGlvbkNvbXBvbmVudDxQYXltZW50TWV0aG9kUHJvcHM+ID0gKHtcbiAgICBjaGVja291dFNlcnZpY2UsXG4gICAgLi4ucmVzdFxufSkgPT4ge1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdXNlTWVtbygoKSA9PiA8VHJhbnNsYXRlZFN0cmluZyBpZD1cInBheW1lbnQuYWZmaXJtX2JvZHlfdGV4dFwiIC8+LCBbXSk7XG5cbiAgICBjb25zdCBpbml0aWFsaXplQWZmaXJtUGF5bWVudCA9IHVzZUNhbGxiYWNrKFxuICAgICAgICAob3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tvdXRTZXJ2aWNlLmluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGludGVncmF0aW9uczogW2NyZWF0ZUFmZmlybVBheW1lbnRTdHJhdGVneV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgW2NoZWNrb3V0U2VydmljZV0sXG4gICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxIb3N0ZWRQYXltZW50Q29tcG9uZW50XG4gICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgICAgIGNoZWNrb3V0U2VydmljZT17Y2hlY2tvdXRTZXJ2aWNlfVxuICAgICAgICAgICAgZGVpbml0aWFsaXplUGF5bWVudD17Y2hlY2tvdXRTZXJ2aWNlLmRlaW5pdGlhbGl6ZVBheW1lbnR9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17ZGVzY3JpcHRpb259XG4gICAgICAgICAgICBpbml0aWFsaXplUGF5bWVudD17aW5pdGlhbGl6ZUFmZmlybVBheW1lbnR9XG4gICAgICAgIC8+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZUNvbXBvbmVudDxQYXltZW50TWV0aG9kUHJvcHMsIFBheW1lbnRNZXRob2RSZXNvbHZlSWQ+KFxuICAgIEFmZmlybVBheW1lbnRNZXRob2QsXG4gICAgW3sgaWQ6ICdhZmZpcm0nIH1dLFxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/affirm-integration/src/AffirmPaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/affirm-integration/src/index.ts":
/*!**************************************************!*\
  !*** ./packages/affirm-integration/src/index.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AffirmPaymentMethod: () => (/* reexport safe */ _AffirmPaymentMethod__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _AffirmPaymentMethod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AffirmPaymentMethod */ \"./packages/affirm-integration/src/AffirmPaymentMethod.tsx\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZmZpcm0taW50ZWdyYXRpb24vc3JjL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXVFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9hZmZpcm0taW50ZWdyYXRpb24vc3JjL2luZGV4LnRzP2FkMTIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgZGVmYXVsdCBhcyBBZmZpcm1QYXltZW50TWV0aG9kIH0gZnJvbSAnLi9BZmZpcm1QYXltZW50TWV0aG9kJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/affirm-integration/src/index.ts\n\n}");

/***/ }),

/***/ "./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx":
/*!***************************************************************************************!*\
  !*** ./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/memoize */ \"./node_modules/@bigcommerce/memoize/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isAccountInstrument/isAccountInstrument.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentFeatureAvailable/isInstrumentFeatureAvailable.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/storedInstrument/AccountInstrumentFieldset/AccountInstrumentFieldset.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/storedInstrument/StoreInstrumentFieldset/StoreInstrumentFieldset.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/loading/LoadingOverlay.tsx\");\n\n\n\n\n\n\nfunction getHostedPaymentMethodDerivedProps(props) {\n    const filterAccountInstruments = (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_1__.memoizeOne)((instruments = []) => instruments.filter(_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"]));\n    const filterTrustedInstruments = (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_1__.memoizeOne)((instruments = []) => instruments.filter(({ trustedShippingAddress }) => trustedShippingAddress));\n    const { checkoutService, checkoutState, isUsingMultiShipping = false, method } = props;\n    const { data: { getCart, getConfig, getCustomer, getInstruments, isPaymentDataRequired, isPaymentDataSubmitted, }, statuses: { isLoadingInstruments }, } = checkoutState;\n    const cart = getCart();\n    const config = getConfig();\n    const customer = getCustomer();\n    if (!config || !cart || !customer) {\n        throw new Error('Unable to get checkout');\n    }\n    const currentMethodInstruments = filterAccountInstruments(getInstruments(method));\n    const trustedInstruments = filterTrustedInstruments(currentMethodInstruments);\n    return {\n        instruments: trustedInstruments,\n        isNewAddress: trustedInstruments.length === 0 && currentMethodInstruments.length > 0,\n        isInstrumentFeatureAvailable: !isPaymentDataSubmitted(method.id, method.gateway) &&\n            (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({\n                config,\n                customer,\n                isUsingMultiShipping,\n                paymentMethod: method,\n            }),\n        isLoadingInstruments: isLoadingInstruments(),\n        isPaymentDataRequired: isPaymentDataRequired(),\n        loadInstruments: checkoutService.loadInstruments,\n    };\n}\nconst HostedPaymentMethodComponent = (props) => {\n    const { description, isInitializing = false, initializePayment, method, onUnhandledError = lodash__WEBPACK_IMPORTED_MODULE_2__.noop, deinitializePayment, } = props;\n    const [isAddingNewInstrument, setIsAddingNewInstrument] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const [selectedInstrument, setSelectedInstrument] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();\n    const derivedProps = getHostedPaymentMethodDerivedProps(props);\n    const { isLoadingInstruments, instruments, isNewAddress, isInstrumentFeatureAvailable: isInstrumentFeatureAvailableProp, loadInstruments, } = derivedProps;\n    const getDefaultInstrument = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n        if (isAddingNewInstrument || !instruments.length) {\n            return;\n        }\n        return (0,lodash__WEBPACK_IMPORTED_MODULE_2__.find)(instruments, { defaultInstrument: true }) || instruments[0];\n    }, [isAddingNewInstrument, instruments]);\n    const handleUseNewInstrument = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n        setIsAddingNewInstrument(true);\n        setSelectedInstrument(undefined);\n    }, []);\n    const handleSelectInstrument = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((id) => {\n        setIsAddingNewInstrument(false);\n        setSelectedInstrument((0,lodash__WEBPACK_IMPORTED_MODULE_2__.find)(instruments, { bigpayToken: id }));\n    }, [instruments]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        const initializePaymentAsync = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n            try {\n                yield initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                });\n                if (isInstrumentFeatureAvailableProp) {\n                    yield loadInstruments();\n                }\n            }\n            catch (error) {\n                onUnhandledError(error);\n            }\n        });\n        void initializePaymentAsync();\n        return () => {\n            const deinitializePaymentAsync = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n                try {\n                    yield deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                }\n                catch (error) {\n                    onUnhandledError(error);\n                }\n            });\n            void deinitializePaymentAsync();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    const currentSelectedInstrument = selectedInstrument || getDefaultInstrument();\n    const isLoading = isInitializing || isLoadingInstruments;\n    const shouldShowInstrumentFieldset = isInstrumentFeatureAvailableProp && (instruments.length > 0 || isNewAddress);\n    if (!description && !isInstrumentFeatureAvailableProp) {\n        return null;\n    }\n    return (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__[\"default\"], { hideContentWhenLoading: true, isLoading: isLoading },\n        react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: \"paymentMethod paymentMethod--hosted\" },\n            description,\n            shouldShowInstrumentFieldset && (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { instruments: instruments, onSelectInstrument: handleSelectInstrument, onUseNewInstrument: handleUseNewInstrument, selectedInstrument: currentSelectedInstrument })),\n            isInstrumentFeatureAvailableProp && (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_7__[\"default\"], { instrumentId: currentSelectedInstrument && currentSelectedInstrument.bigpayToken, instruments: instruments, isAccountInstrument: true })))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HostedPaymentMethodComponent);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9ob3N0ZWQtcGF5bWVudC1pbnRlZ3JhdGlvbi9zcmMvY29tcG9uZW50cy9Ib3N0ZWRQYXltZW50Q29tcG9uZW50LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBVWtEO0FBQ2Q7QUFDNEM7QUFPaEM7QUFFVTtBQXlCMUQsU0FBUyxrQ0FBa0MsQ0FDdkMsS0FBa0M7SUFFbEMsTUFBTSx3QkFBd0IsR0FBRyxnRUFBVSxDQUFDLENBQUMsY0FBbUMsRUFBRSxFQUFFLEVBQUUsQ0FDbEYsV0FBVyxDQUFDLE1BQU0sQ0FBQyw4RUFBbUIsQ0FBQyxDQUMxQyxDQUFDO0lBQ0YsTUFBTSx3QkFBd0IsR0FBRyxnRUFBVSxDQUFDLENBQUMsY0FBbUMsRUFBRSxFQUFFLEVBQUUsQ0FDbEYsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsc0JBQXNCLEVBQUUsRUFBRSxFQUFFLENBQUMsc0JBQXNCLENBQUMsQ0FDN0UsQ0FBQztJQUNGLE1BQU0sRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLG9CQUFvQixHQUFHLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUM7SUFFdkYsTUFBTSxFQUNGLElBQUksRUFBRSxFQUNGLE9BQU8sRUFDUCxTQUFTLEVBQ1QsV0FBVyxFQUNYLGNBQWMsRUFDZCxxQkFBcUIsRUFDckIsc0JBQXNCLEdBQ3pCLEVBQ0QsUUFBUSxFQUFFLEVBQUUsb0JBQW9CLEVBQUUsR0FDckMsR0FBRyxhQUFhLENBQUM7SUFFbEIsTUFBTSxJQUFJLEdBQUcsT0FBTyxFQUFFLENBQUM7SUFDdkIsTUFBTSxNQUFNLEdBQUcsU0FBUyxFQUFFLENBQUM7SUFDM0IsTUFBTSxRQUFRLEdBQUcsV0FBVyxFQUFFLENBQUM7SUFFL0IsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2hDLE1BQU0sSUFBSSxLQUFLLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lB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QVcsRUFDeEIsa0JBQWtCLEVBQUUsc0JBQXNCLEVBQzFDLGtCQUFrQixFQUFFLHNCQUFzQixFQUMxQyxrQkFBa0IsRUFBRSx5QkFBeUIsR0FDL0MsQ0FDTDtZQUVBLGdDQUFnQyxJQUFJLENBQ2pDLDJEQUFDLDhFQUF1QixJQUNwQixZQUFZLEVBQ1IseUJBQXlCLElBQUkseUJBQXlCLENBQUMsV0FBVyxFQUV0RSxXQUFXLEVBQUUsV0FBVyxFQUN4QixtQkFBbUIsRUFBRSxJQUFJLEdBQzNCLENBQ0wsQ0FDQyxDQUNPLENBQ3BCLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSw0QkFBNEIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvaG9zdGVkLXBheW1lbnQtaW50ZWdyYXRpb24vc3JjL2NvbXBvbmVudHMvSG9zdGVkUGF5bWVudENvbXBvbmVudC50c3g/YWUyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIHR5cGUgQWNjb3VudEluc3RydW1lbnQsXG4gICAgdHlwZSBDaGVja291dFNlbGVjdG9ycyxcbiAgICB0eXBlIENoZWNrb3V0U2VydmljZSxcbiAgICB0eXBlIExhbmd1YWdlU2VydmljZSxcbiAgICB0eXBlIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICB0eXBlIFBheW1lbnRJbnN0cnVtZW50LFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZCxcbiAgICB0eXBlIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgeyBtZW1vaXplT25lIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL21lbW9pemUnO1xuaW1wb3J0IHsgZmluZCwgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgdHlwZSBSZWFjdE5vZGUsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQge1xuICAgIEFjY291bnRJbnN0cnVtZW50RmllbGRzZXQsXG4gICAgaXNBY2NvdW50SW5zdHJ1bWVudCxcbiAgICBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlLFxuICAgIFN0b3JlSW5zdHJ1bWVudEZpZWxkc2V0LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaW5zdHJ1bWVudC11dGlscyc7XG5pbXBvcnQgeyB0eXBlIFBheW1lbnRGb3JtU2VydmljZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nT3ZlcmxheSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC91aSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSG9zdGVkUGF5bWVudENvbXBvbmVudFByb3BzIHtcbiAgICBjaGVja291dFNlcnZpY2U6IENoZWNrb3V0U2VydmljZTtcbiAgICBjaGVja291dFN0YXRlOiBDaGVja291dFNlbGVjdG9ycztcbiAgICBkZXNjcmlwdGlvbj86IFJlYWN0Tm9kZTtcbiAgICBpc0luaXRpYWxpemluZz86IGJvb2xlYW47XG4gICAgaXNVc2luZ011bHRpU2hpcHBpbmc/OiBib29sZWFuO1xuICAgIGxhbmd1YWdlOiBMYW5ndWFnZVNlcnZpY2U7XG4gICAgbWV0aG9kOiBQYXltZW50TWV0aG9kO1xuICAgIHBheW1lbnRGb3JtOiBQYXltZW50Rm9ybVNlcnZpY2U7XG4gICAgZGVpbml0aWFsaXplUGF5bWVudChvcHRpb25zOiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPENoZWNrb3V0U2VsZWN0b3JzPjtcbiAgICBpbml0aWFsaXplUGF5bWVudChvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMpOiBQcm9taXNlPENoZWNrb3V0U2VsZWN0b3JzPjtcbiAgICBvblVuaGFuZGxlZEVycm9yPyhlcnJvcjogRXJyb3IpOiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgSG9zdGVkUGF5bWVudENvbXBvbmVudERlcml2ZWRQcm9wcyB7XG4gICAgaW5zdHJ1bWVudHM6IEFjY291bnRJbnN0cnVtZW50W107XG4gICAgaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZTogYm9vbGVhbjtcbiAgICBpc0xvYWRpbmdJbnN0cnVtZW50czogYm9vbGVhbjtcbiAgICBpc05ld0FkZHJlc3M6IGJvb2xlYW47XG4gICAgaXNQYXltZW50RGF0YVJlcXVpcmVkOiBib29sZWFuO1xuICAgIGxvYWRJbnN0cnVtZW50cygpOiBQcm9taXNlPENoZWNrb3V0U2VsZWN0b3JzPjtcbn1cblxuZnVuY3Rpb24gZ2V0SG9zdGVkUGF5bWVudE1ldGhvZERlcml2ZWRQcm9wcyhcbiAgICBwcm9wczogSG9zdGVkUGF5bWVudENvbXBvbmVudFByb3BzLFxuKTogSG9zdGVkUGF5bWVudENvbXBvbmVudERlcml2ZWRQcm9wcyB7XG4gICAgY29uc3QgZmlsdGVyQWNjb3VudEluc3RydW1lbnRzID0gbWVtb2l6ZU9uZSgoaW5zdHJ1bWVudHM6IFBheW1lbnRJbnN0cnVtZW50W10gPSBbXSkgPT5cbiAgICAgICAgaW5zdHJ1bWVudHMuZmlsdGVyKGlzQWNjb3VudEluc3RydW1lbnQpLFxuICAgICk7XG4gICAgY29uc3QgZmlsdGVyVHJ1c3RlZEluc3RydW1lbnRzID0gbWVtb2l6ZU9uZSgoaW5zdHJ1bWVudHM6IEFjY291bnRJbnN0cnVtZW50W10gPSBbXSkgPT5cbiAgICAgICAgaW5zdHJ1bWVudHMuZmlsdGVyKCh7IHRydXN0ZWRTaGlwcGluZ0FkZHJlc3MgfSkgPT4gdHJ1c3RlZFNoaXBwaW5nQWRkcmVzcyksXG4gICAgKTtcbiAgICBjb25zdCB7IGNoZWNrb3V0U2VydmljZSwgY2hlY2tvdXRTdGF0ZSwgaXNVc2luZ011bHRpU2hpcHBpbmcgPSBmYWxzZSwgbWV0aG9kIH0gPSBwcm9wcztcblxuICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZ2V0Q2FydCxcbiAgICAgICAgICAgIGdldENvbmZpZyxcbiAgICAgICAgICAgIGdldEN1c3RvbWVyLFxuICAgICAgICAgICAgZ2V0SW5zdHJ1bWVudHMsXG4gICAgICAgICAgICBpc1BheW1lbnREYXRhUmVxdWlyZWQsXG4gICAgICAgICAgICBpc1BheW1lbnREYXRhU3VibWl0dGVkLFxuICAgICAgICB9LFxuICAgICAgICBzdGF0dXNlczogeyBpc0xvYWRpbmdJbnN0cnVtZW50cyB9LFxuICAgIH0gPSBjaGVja291dFN0YXRlO1xuXG4gICAgY29uc3QgY2FydCA9IGdldENhcnQoKTtcbiAgICBjb25zdCBjb25maWcgPSBnZXRDb25maWcoKTtcbiAgICBjb25zdCBjdXN0b21lciA9IGdldEN1c3RvbWVyKCk7XG5cbiAgICBpZiAoIWNvbmZpZyB8fCAhY2FydCB8fCAhY3VzdG9tZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZ2V0IGNoZWNrb3V0Jyk7XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudE1ldGhvZEluc3RydW1lbnRzID0gZmlsdGVyQWNjb3VudEluc3RydW1lbnRzKGdldEluc3RydW1lbnRzKG1ldGhvZCkpO1xuICAgIGNvbnN0IHRydXN0ZWRJbnN0cnVtZW50cyA9IGZpbHRlclRydXN0ZWRJbnN0cnVtZW50cyhjdXJyZW50TWV0aG9kSW5zdHJ1bWVudHMpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5zdHJ1bWVudHM6IHRydXN0ZWRJbnN0cnVtZW50cyxcbiAgICAgICAgaXNOZXdBZGRyZXNzOiB0cnVzdGVkSW5zdHJ1bWVudHMubGVuZ3RoID09PSAwICYmIGN1cnJlbnRNZXRob2RJbnN0cnVtZW50cy5sZW5ndGggPiAwLFxuICAgICAgICBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlOlxuICAgICAgICAgICAgIWlzUGF5bWVudERhdGFTdWJtaXR0ZWQobWV0aG9kLmlkLCBtZXRob2QuZ2F0ZXdheSkgJiZcbiAgICAgICAgICAgIGlzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGUoe1xuICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICBjdXN0b21lcixcbiAgICAgICAgICAgICAgICBpc1VzaW5nTXVsdGlTaGlwcGluZyxcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBtZXRob2QsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgaXNMb2FkaW5nSW5zdHJ1bWVudHM6IGlzTG9hZGluZ0luc3RydW1lbnRzKCksXG4gICAgICAgIGlzUGF5bWVudERhdGFSZXF1aXJlZDogaXNQYXltZW50RGF0YVJlcXVpcmVkKCksXG4gICAgICAgIGxvYWRJbnN0cnVtZW50czogY2hlY2tvdXRTZXJ2aWNlLmxvYWRJbnN0cnVtZW50cyxcbiAgICB9O1xufVxuXG5jb25zdCBIb3N0ZWRQYXltZW50TWV0aG9kQ29tcG9uZW50OiBSZWFjdC5GQzxIb3N0ZWRQYXltZW50Q29tcG9uZW50UHJvcHM+ID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgaXNJbml0aWFsaXppbmcgPSBmYWxzZSxcbiAgICAgICAgaW5pdGlhbGl6ZVBheW1lbnQsXG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgb25VbmhhbmRsZWRFcnJvciA9IG5vb3AsXG4gICAgICAgIGRlaW5pdGlhbGl6ZVBheW1lbnQsXG4gICAgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgW2lzQWRkaW5nTmV3SW5zdHJ1bWVudCwgc2V0SXNBZGRpbmdOZXdJbnN0cnVtZW50XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbc2VsZWN0ZWRJbnN0cnVtZW50LCBzZXRTZWxlY3RlZEluc3RydW1lbnRdID0gdXNlU3RhdGU8QWNjb3VudEluc3RydW1lbnQgfCB1bmRlZmluZWQ+KCk7XG5cbiAgICBjb25zdCBkZXJpdmVkUHJvcHMgPSBnZXRIb3N0ZWRQYXltZW50TWV0aG9kRGVyaXZlZFByb3BzKHByb3BzKTtcbiAgICBjb25zdCB7XG4gICAgICAgIGlzTG9hZGluZ0luc3RydW1lbnRzLFxuICAgICAgICBpbnN0cnVtZW50cyxcbiAgICAgICAgaXNOZXdBZGRyZXNzLFxuICAgICAgICBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlOiBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlUHJvcCxcbiAgICAgICAgbG9hZEluc3RydW1lbnRzLFxuICAgIH0gPSBkZXJpdmVkUHJvcHM7XG5cbiAgICBjb25zdCBnZXREZWZhdWx0SW5zdHJ1bWVudCA9IHVzZUNhbGxiYWNrKCgpOiBBY2NvdW50SW5zdHJ1bWVudCB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICAgIGlmIChpc0FkZGluZ05ld0luc3RydW1lbnQgfHwgIWluc3RydW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZpbmQoaW5zdHJ1bWVudHMsIHsgZGVmYXVsdEluc3RydW1lbnQ6IHRydWUgfSkgfHwgaW5zdHJ1bWVudHNbMF07XG4gICAgfSwgW2lzQWRkaW5nTmV3SW5zdHJ1bWVudCwgaW5zdHJ1bWVudHNdKTtcblxuICAgIGNvbnN0IGhhbmRsZVVzZU5ld0luc3RydW1lbnQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIHNldElzQWRkaW5nTmV3SW5zdHJ1bWVudCh0cnVlKTtcbiAgICAgICAgc2V0U2VsZWN0ZWRJbnN0cnVtZW50KHVuZGVmaW5lZCk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgaGFuZGxlU2VsZWN0SW5zdHJ1bWVudCA9IHVzZUNhbGxiYWNrKFxuICAgICAgICAoaWQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgc2V0SXNBZGRpbmdOZXdJbnN0cnVtZW50KGZhbHNlKTtcbiAgICAgICAgICAgIHNldFNlbGVjdGVkSW5zdHJ1bWVudChmaW5kKGluc3RydW1lbnRzLCB7IGJpZ3BheVRva2VuOiBpZCB9KSk7XG4gICAgICAgIH0sXG4gICAgICAgIFtpbnN0cnVtZW50c10sXG4gICAgKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGluaXRpYWxpemVQYXltZW50QXN5bmMgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkOiBtZXRob2QuZ2F0ZXdheSxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQ6IG1ldGhvZC5pZCxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlUHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsb2FkSW5zdHJ1bWVudHMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIG9uVW5oYW5kbGVkRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZvaWQgaW5pdGlhbGl6ZVBheW1lbnRBc3luYygpO1xuXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkZWluaXRpYWxpemVQYXltZW50QXN5bmMgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGVpbml0aWFsaXplUGF5bWVudCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYXRld2F5SWQ6IG1ldGhvZC5nYXRld2F5LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQ6IG1ldGhvZC5pZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgb25VbmhhbmRsZWRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdm9pZCBkZWluaXRpYWxpemVQYXltZW50QXN5bmMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZEluc3RydW1lbnQgPSBzZWxlY3RlZEluc3RydW1lbnQgfHwgZ2V0RGVmYXVsdEluc3RydW1lbnQoKTtcbiAgICBjb25zdCBpc0xvYWRpbmcgPSBpc0luaXRpYWxpemluZyB8fCBpc0xvYWRpbmdJbnN0cnVtZW50cztcbiAgICBjb25zdCBzaG91bGRTaG93SW5zdHJ1bWVudEZpZWxkc2V0ID1cbiAgICAgICAgaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZVByb3AgJiYgKGluc3RydW1lbnRzLmxlbmd0aCA+IDAgfHwgaXNOZXdBZGRyZXNzKTtcblxuICAgIGlmICghZGVzY3JpcHRpb24gJiYgIWlzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGVQcm9wKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDxMb2FkaW5nT3ZlcmxheSBoaWRlQ29udGVudFdoZW5Mb2FkaW5nIGlzTG9hZGluZz17aXNMb2FkaW5nfT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudE1ldGhvZCBwYXltZW50TWV0aG9kLS1ob3N0ZWRcIj5cbiAgICAgICAgICAgICAgICB7ZGVzY3JpcHRpb259XG5cbiAgICAgICAgICAgICAgICB7c2hvdWxkU2hvd0luc3RydW1lbnRGaWVsZHNldCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxBY2NvdW50SW5zdHJ1bWVudEZpZWxkc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50cz17aW5zdHJ1bWVudHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdEluc3RydW1lbnQ9e2hhbmRsZVNlbGVjdEluc3RydW1lbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblVzZU5ld0luc3RydW1lbnQ9e2hhbmRsZVVzZU5ld0luc3RydW1lbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEluc3RydW1lbnQ9e2N1cnJlbnRTZWxlY3RlZEluc3RydW1lbnR9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgIHtpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlUHJvcCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxTdG9yZUluc3RydW1lbnRGaWVsZHNldFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRJbnN0cnVtZW50ICYmIGN1cnJlbnRTZWxlY3RlZEluc3RydW1lbnQuYmlncGF5VG9rZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnRzPXtpbnN0cnVtZW50c31cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQWNjb3VudEluc3RydW1lbnQ9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0xvYWRpbmdPdmVybGF5PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBIb3N0ZWRQYXltZW50TWV0aG9kQ29tcG9uZW50O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx\n\n}");

/***/ }),

/***/ "./packages/instrument-utils/src/guards/isInstrumentFeatureAvailable/isInstrumentFeatureAvailable.ts":
/*!***********************************************************************************************************!*\
  !*** ./packages/instrument-utils/src/guards/isInstrumentFeatureAvailable/isInstrumentFeatureAvailable.ts ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ isInstrumentFeatureAvailable)\n/* harmony export */ });\nfunction isInstrumentFeatureAvailable({ config, customer, isUsingMultiShipping, paymentMethod, }) {\n    if (!config.checkoutSettings.isCardVaultingEnabled ||\n        !paymentMethod.config.isVaultingEnabled ||\n        customer.isGuest ||\n        isUsingMultiShipping) {\n        return false;\n    }\n    return true;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9pbnN0cnVtZW50LXV0aWxzL3NyYy9ndWFyZHMvaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZS9pc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFTZSxTQUFTLDRCQUE0QixDQUFDLEVBQ2pELE1BQU0sRUFDTixRQUFRLEVBQ1Isb0JBQW9CLEVBQ3BCLGFBQWEsR0FDbUI7SUFDaEMsSUFDSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxxQkFBcUI7UUFDOUMsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLGlCQUFpQjtRQUN2QyxRQUFRLENBQUMsT0FBTztRQUNoQixvQkFBb0IsRUFDdEIsQ0FBQztRQUNDLE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFFRCxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9pbnN0cnVtZW50LXV0aWxzL3NyYy9ndWFyZHMvaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZS9pc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlLnRzP2I1YTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBDdXN0b21lciwgdHlwZSBQYXltZW50TWV0aG9kLCB0eXBlIFN0b3JlQ29uZmlnIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZVN0YXRlIHtcbiAgICBjb25maWc6IFN0b3JlQ29uZmlnO1xuICAgIGN1c3RvbWVyOiBDdXN0b21lcjtcbiAgICBpc1VzaW5nTXVsdGlTaGlwcGluZzogYm9vbGVhbjtcbiAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlKHtcbiAgICBjb25maWcsXG4gICAgY3VzdG9tZXIsXG4gICAgaXNVc2luZ011bHRpU2hpcHBpbmcsXG4gICAgcGF5bWVudE1ldGhvZCxcbn06IElzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGVTdGF0ZSk6IGJvb2xlYW4ge1xuICAgIGlmIChcbiAgICAgICAgIWNvbmZpZy5jaGVja291dFNldHRpbmdzLmlzQ2FyZFZhdWx0aW5nRW5hYmxlZCB8fFxuICAgICAgICAhcGF5bWVudE1ldGhvZC5jb25maWcuaXNWYXVsdGluZ0VuYWJsZWQgfHxcbiAgICAgICAgY3VzdG9tZXIuaXNHdWVzdCB8fFxuICAgICAgICBpc1VzaW5nTXVsdGlTaGlwcGluZ1xuICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/instrument-utils/src/guards/isInstrumentFeatureAvailable/isInstrumentFeatureAvailable.ts\n\n}");

/***/ })

}]);
"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["worldpay-credit-card-payment-method"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/worldpayaccess.js":
/*!******************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/worldpayaccess.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createWorldpayAccessPaymentStrategy: () => (/* binding */ _)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\nvar o;class r extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class a extends r{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class s extends r{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class d extends a{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(o||(o={}));class c extends r{constructor(e){super(function(e){switch(e){case o.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case o.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case o.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case o.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}var u=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})},l=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};class m{constructor(e){this._paymentIntegrationService=e}execute(e,t){var n,i;return this._isHostedPaymentFormEnabled(null===(n=e.payment)||void 0===n?void 0:n.methodId,null===(i=e.payment)||void 0===i?void 0:i.gatewayId)&&this._shouldRenderHostedForm?this._executeWithHostedForm(e,t):this._executeWithoutHostedForm(e,t)}initialize(e){if(!this._isHostedPaymentFormEnabled(null==e?void 0:e.methodId,null==e?void 0:e.gatewayId)||!this._isHostedFieldAvailable(e))return this._shouldRenderHostedForm=!1,Promise.resolve();const t=e&&e.creditCard&&e.creditCard.form,n=this._paymentIntegrationService.getState(),{paymentSettings:{bigpayBaseUrl:i=\"\"}={}}=n.getStoreConfigOrThrow();if(!t)throw new a;const o=this._paymentIntegrationService.createHostedForm(i,t);return o.attach().then(()=>(this._shouldRenderHostedForm=!0,this._hostedForm=o,Promise.resolve()))}deinitialize(){return this._hostedForm&&this._hostedForm.detach(),Promise.resolve()}finalize(){return Promise.reject(new s)}_executeWithoutHostedForm(e,t){return u(this,void 0,void 0,function*(){const{payment:n}=e,i=l(e,[\"payment\"]),o=n&&n.paymentData;if(!n||!o)throw new d([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:o}))})}_executeWithHostedForm(e,t){return u(this,void 0,void 0,function*(){const{payment:n}=e,i=l(e,[\"payment\"]),r=this._hostedForm;if(!r)throw new c(o.PaymentNotInitialized);if(!n||!n.methodId)throw new d([\"payment.methodId\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield r.validate().then(()=>r.submit(n))})}_isHostedPaymentFormEnabled(e,t){return!!e&&!0===this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t).config.isHostedFormEnabled}_isHostedFieldAvailable(t){return!(0,lodash__WEBPACK_IMPORTED_MODULE_0__.values)(t&&t.creditCard&&t.creditCard.form.fields).every(lodash__WEBPACK_IMPORTED_MODULE_0__.isNil)}}const h=e=>\"object\"==typeof e&&null!==e&&\"body\"in e;var p=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})};const y=\"Payment cannot continue\";let f;class v extends m{initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return p(this,void 0,void 0,function*(){if(this._initializeOptions=e&&e.worldpay,!this._initializeOptions)throw new c(o.PaymentNotInitialized);return t.initialize.call(this,e)})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return p(this,void 0,void 0,function*(){const{payment:i}=e;if(f=this._submitAdditionalAction(),!i)throw new d([\"payment\"]);try{return yield n.execute.call(this,e,t)}catch(e){return this._processAdditionalAction(e,i)}})}_processAdditionalAction(e,i){return p(this,void 0,void 0,function*(){return h(e)&&(0,lodash__WEBPACK_IMPORTED_MODULE_0__.some)(e.body.errors,{code:\"additional_action_required\"})?new Promise((r,a)=>{const s=e=>p(this,void 0,void 0,function*(){if(\"string\"!=typeof e.data||!this._isValidJsonWithSessionId(e.data))return a(new Error(y));window.removeEventListener(\"message\",s),d.remove();const u=JSON.parse(e.data),l=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.merge)({},i,{paymentData:{threeDSecure:{token:u.SessionId}}});try{r(yield f(l))}catch(e){if(!h(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_0__.some)(e.body.errors,{code:\"three_d_secure_required\"}))return a(e);if(!this._initializeOptions)return a(new c(o.PaymentNotInitialized));const{onLoad:t}=this._initializeOptions,i=this._createIframe(e.body.three_ds_result);try{t(i,()=>a(new Error(\"Payment was cancelled\")))}catch(e){a(new Error(y))}}});let d;window.addEventListener(\"message\",s);try{d=this._createHiddenIframe(e.body)}catch(e){throw window.removeEventListener(\"message\",s),new Error(y)}}):Promise.reject(e)})}_createHiddenIframe(e){const t=document.createElement(\"iframe\");if(document.body.appendChild(t),!t.contentWindow)throw new Error;t.id=\"worldpay_hosted_hidden_payment_page\",t.height=\"0px\",t.width=\"0px\";const n=document.createElement(\"form\"),i=\"collectionForm\";n.id=i,n.name=\"devicedata\",n.method=\"post\";const o=e.additional_action_required.data.redirect_url;n.action=o;const r=document.createElement(\"input\");r.name=\"Bin\",r.type=\"hidden\",r.value=e.provider_data.source_id,n.appendChild(r);const a=document.createElement(\"input\");a.name=\"JWT\",a.type=\"hidden\",a.value=e.provider_data.data,n.appendChild(a);const s=document.createElement(\"button\");s.type=\"submit\",s.id=\"btnsubmit\",n.appendChild(s),navigator.userAgent.match(\"Firefox\")?t.srcdoc=n.outerHTML:t.contentWindow.document.body.appendChild(n);const d=document.createElement(\"script\");return d.innerHTML=`\\n            document.getElementById('${i}').submit();\\n        `,t.contentWindow.document.body.appendChild(d),t}_createIframe(e){const t=document.createElement(\"form\");t.id=\"challengeForm\",t.method=\"POST\",t.action=e.acs_url;const n=document.createElement(\"input\");n.name=\"JWT\",n.type=\"hidden\",n.value=e.payer_auth_request,t.appendChild(n);const i=document.createElement(\"input\");i.name=\"MD\",i.type=\"hidden\",i.value=`merchantSessionId=${e.merchant_data}`,t.appendChild(i);const o=document.createElement(\"script\");o.type=\"text/javascript\",o.innerHTML=\"window.onload = function() { document.getElementById('challengeForm').submit(); }\";const r=document.createElement(\"iframe\");return r.name=\"worldpay_hosted_payment_page\",r.height=\"400\",r.width=\"100%\",r.srcdoc=`${t.outerHTML} ${o.outerHTML}`,r}_submitAdditionalAction(){if(this._shouldRenderHostedForm){if(!this._hostedForm)throw new c(o.PaymentNotInitialized);const e=this._hostedForm;return t=>p(this,void 0,void 0,function*(){yield e.submit(t)})}return e=>p(this,void 0,void 0,function*(){yield this._paymentIntegrationService.submitPayment(e)})}_isValidJsonWithSessionId(e){try{return!!JSON.parse(e).SessionId}catch(e){return!1}}}const _=(b=e=>new v(e),w=[{id:\"worldpayaccess\"}],Object.assign(b,{resolveIds:w}));var b,w;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy93b3JsZHBheWFjY2Vzcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQSxJQ0NZQSxFQ0tHLE1BQWVDLFVBQXNCQyxNQUloRCxXQUFBQyxDQUFZQyxHQ1hELElBQXFDQyxFRFk1Q0MsTUFBTUYsR0FBVyxxQ0FKckIsS0FBQUcsS0FBTyxnQkFDUCxLQUFBQyxLQUFPLFdDVHlDSCxhRGNaQSxVQ2JoQ0ksT0FBT0MsZUFDUEQsT0FBT0MsZURZUUMsS0NaZU4sR0RZZk0sS0NWUkMsVUFBWVAsRURZb0IsbUJBQTVCSCxNQUFNVyxrQkFDYlgsTUFBTVcsa0JBQWtCRixpQkFFeEJBLEtBQUtHLE1BQVEsSUFBSVosTUFBTVMsS0FBS1AsU0FBU1UsS0FFN0MsRUVkVyxNQUFNQyxVQUE2QmQsRUFDOUMsV0FBQUUsQ0FBWUMsR0FDUkUsTUFBTUYsR0FBVyx5Q0FFakJPLEtBQUtKLEtBQU8sdUJBQ1pJLEtBQUtILEtBQU8sa0JBQ2hCLEVDUFcsTUFBTVEsVUFBMENmLEVBQzNELFdBQUFFLEdBQ0lHLE1BQU0sa0VBRU5LLEtBQUtKLEtBQU8sb0NBQ1pJLEtBQUtILEtBQU8saUNBQ2hCLEVDTFcsTUFBTVMsVUFBb0NGLEVBQ3JELFdBQUFaLENBQVllLEdBQ1IsSUFBSWQsRUFBVSx5RUFFVmMsSUFDQWQsRUFBVSxHQUFHQSw0REFBa0VjLEVBQWNDLEtBQ3pGLFVBSVJiLE1BQU1GLEdBRU5PLEtBQUtKLEtBQU8sNkJBQ2hCLEdMbEJKLFNBQVlQLEdBQ1IsbUVBQ0EsdURBQ0EscURBQ0EsdURBQ0Esa0VBQ0gsQ0FORCxDQUFZQSxJQUFBQSxFQUF1QixLQWFwQixNQUFNb0IsVUFBNEJuQixFQUM3QyxXQUFBRSxDQUFtQmtCLEdBQ2ZmLE1BT1IsU0FBeUJFLEdBQ3JCLE9BQVFBLEdBQ0osS0FBS1IsRUFBd0JzQix1QkFDekIsTUFBTyxvRkFFWCxLQUFLdEIsRUFBd0J1QixzQkFDekIsTUFBTyxtRkFFWCxLQUFLdkIs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c0csRUFBT00sT0FBUyxNQUNoQk4sRUFBT08sTUFBUSxPQUNmUCxFQUFPdUIsT0FBUyxHQUFHdkYsRUFBS3dGLGFBQWFDLEVBQU9ELFlBRXJDeEIsQ0FDWCxDQUVRLHVCQUFBOUIsR0FDSixHQUFJcEUsS0FBS3lCLHdCQUF5QixDQUM5QixJQUFLekIsS0FBSzRDLFlBQ04sTUFBTSxJQUFJbkMsRUFBb0JwQixFQUF3QnVCLHVCQUcxRCxNQUFNcUgsRUFBYWpJLEtBQUs0QyxZQUV4QixPQUFjd0MsR0FBNEMsdUNBQ2hENkMsRUFBVzNFLE9BQU84QixFQUM1QixFLENBR0osT0FBY0EsR0FBNEMsdUNBQ2hEcEYsS0FBS2lCLDJCQUEyQm1DLGNBQWNnQyxFQUN4RCxFQUNKLENBRVEseUJBQUFQLENBQTBCcUQsR0FDOUIsSUFHSSxRQUZhaEQsS0FBS0MsTUFBTStDLEdBRWYxQyxTLENBS1gsTUFBT1MsR0FDTCxPQUFPLEMsQ0FFZixFQ3ZQSixNQU1BLEdDVklrQyxFREtBQyxHQUVPLElBQUksRUFBNkJBLEdDTnhDQyxFRFNtRSxDQUFDLENBQUU5QixHQUFJLG1CQ1BuRXpHLE9BQU93SSxPQUFPSCxFQUFRLENBQUVFLGdCQUpwQixJQUNYRixFQUNBRSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL2Jvb3RzdHJhcD9mZmNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL25vdC1pbml0aWFsaXplZC1lcnJvci50cz84YjRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3N0YW5kYXJkLWVycm9yLnRzPzhhMDMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc2V0LXByb3RvdHlwZS1vZi50cz84NDVhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2ludmFsaWQtYXJndW1lbnQtZXJyb3IudHM/MzkyMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9vcmRlci1maW5hbGl6YXRpb24tbm90LXJlcXVpcmVkLWVycm9yLnRzP2I1YTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1hcmd1bWVudC1pbnZhbGlkLWVycm9yLnRzP2E1MDEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2NyZWRpdC1jYXJkLWludGVncmF0aW9uL3NyYy9jcmVkaXQtY2FyZC1wYXltZW50LXN0cmF0ZWd5LnRzPzI4OWYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaXMtcmVxdWVzdC1lcnJvci50cz9iNDNkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy93b3JsZHBheWFjY2Vzcy1pbnRlZ3JhdGlvbi9zcmMvd29ybGRwYXlhY2Nlc3MtcGF5bWVudC1zdHJhdGVneS50cz82NDJhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy93b3JsZHBheWFjY2Vzcy1pbnRlZ3JhdGlvbi9zcmMvY3JlYXRlLXdvcmxkcGF5YWNjZXNzLXBheW1lbnQtc3RyYXRlZ3kudHM/NjM1ZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3RvLXJlc29sdmFibGUtbW9kdWxlLnRzP2Q1MjAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBOb3RJbml0aWFsaXplZEVycm9yVHlwZSB7XG4gICAgQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZCxcbiAgICBDdXN0b21lck5vdEluaXRpYWxpemVkLFxuICAgIFBheW1lbnROb3RJbml0aWFsaXplZCxcbiAgICBTaGlwcGluZ05vdEluaXRpYWxpemVkLFxuICAgIFNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIG1ldGhvZCByZXF1aXJlcyBhIGNlcnRhaW4gaW5pdGlhbGl6YXRpb24gY2FsbCB0byBiZVxuICogbWFkZSBmaXJzdC4gU29tZSBvYmplY3RzIGNhbiBiZSBjb25zdHJ1Y3RlZCBidXQgdGhleSBjYW5ub3QgYmUgdXNlZCB1bnRpbCBhXG4gKiBzZXBhcmF0ZSBpbml0aWFsaXphdGlvbiBjYWxsIGlzIG1hZGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdEluaXRpYWxpemVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTm90SW5pdGlhbGl6ZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdub3RfaW5pdGlhbGl6ZWQnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5DdXN0b21lck5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjdXN0b21lciBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TaGlwcGluZ05vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBzaGlwcGluZyBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2hlY2tvdXQgc3BhbSBwcm90ZWN0aW9uIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgQ3VzdG9tRXJyb3IgZnJvbSAnLi9jdXN0b20tZXJyb3InO1xuaW1wb3J0IHNldFByb3RvdHlwZU9mIGZyb20gJy4vc2V0LXByb3RvdHlwZS1vZic7XG5cbi8qKlxuICogVGhpcyBlcnJvciB0eXBlIHNob3VsZCBub3QgYmUgY29uc3RydWN0ZWQgZGlyZWN0bHkuIEl0IGlzIGEgYmFzZSBjbGFzcyBmb3JcbiAqIGFsbCBjdXN0b20gZXJyb3JzIHRocm93biBpbiB0aGlzIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkRXJyb3IgZXh0ZW5kcyBFcnJvciBpbXBsZW1lbnRzIEN1c3RvbUVycm9yIHtcbiAgICBuYW1lID0gJ1N0YW5kYXJkRXJyb3InO1xuICAgIHR5cGUgPSAnc3RhbmRhcmQnO1xuXG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICBzZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgbmV3LnRhcmdldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YWNrID0gbmV3IEVycm9yKHRoaXMubWVzc2FnZSkuc3RhY2s7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihvYmplY3Q6IGFueSwgcHJvdG90eXBlOiBvYmplY3QpIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmplY3QsIHByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqZWN0O1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBtZXRob2QgaXMgdW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGVcbiAqIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgYXJndW1lbnRzIGFjY29yZGluZyB0byB0aGVpciByZXF1aXJlbWVudHMsXG4gKiBpLmUuOiBpZiBhbiBhcmd1bWVudCBpcyBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnSW52YWxpZCBhcmd1bWVudHMgaGF2ZSBiZWVuIHByb3ZpZGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkQXJndW1lbnRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdpbnZhbGlkX2FyZ3VtZW50JztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB0cnlpbmcgdG8gbWFrZSBhbiBvcmRlciBmaW5hbGl6YXRpb24gcmVxdWVzdCBmb3IgYVxuICogcGF5bWVudCBtZXRob2QgdGhhdCBkb2VzIG5vdCByZXF1aXJlIHN1Y2ggcHJvY2VkdXJlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJ1RoZSBjdXJyZW50IG9yZGVyIGRvZXMgbm90IG5lZWQgdG8gYmUgZmluYWxpemVkIGF0IHRoaXMgc3RhZ2UuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ09yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdvcmRlcl9maW5hbGl6YXRpb25fbm90X3JlcXVpcmVkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgSW52YWxpZEFyZ3VtZW50RXJyb3IgZnJvbSAnLi9pbnZhbGlkLWFyZ3VtZW50LWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB3ZSBhcmUgdW5hYmxlIHRvIHN1Ym1pdCBhIHBheW1lbnQgYmVjYXVzZVxuICogdGhlIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzLCBpLmUuOiBpZiBhbiBhcmd1bWVudCBpc1xuICogbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIGV4dGVuZHMgSW52YWxpZEFyZ3VtZW50RXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGludmFsaWRGaWVsZHM/OiBzdHJpbmdbXSkge1xuICAgICAgICBsZXQgbWVzc2FnZSA9ICdVbmFibGUgdG8gc3VibWl0IHBheW1lbnQgZm9yIHRoZSBvcmRlciBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIGludmFsaWQuJztcblxuICAgICAgICBpZiAoaW52YWxpZEZpZWxkcykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IE1ha2Ugc3VyZSB0aGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgcHJvdmlkZWQgY29ycmVjdGx5OiAke2ludmFsaWRGaWVsZHMuam9pbihcbiAgICAgICAgICAgICAgICAnLCAnLFxuICAgICAgICAgICAgKX0uYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGlzTmlsLCB2YWx1ZXMgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEhvc3RlZEZvcm0sXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IFdpdGhDcmVkaXRDYXJkUGF5bWVudEluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnLi9jcmVkaXQtY2FyZC1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByb3RlY3RlZCBfaG9zdGVkRm9ybT86IEhvc3RlZEZvcm07XG4gICAgcHJvdGVjdGVkIF9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtPzogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBfcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSkge31cblxuICAgIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQoXG4gICAgICAgICAgICBwYXlsb2FkLnBheW1lbnQ/Lm1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bG9hZC5wYXltZW50Py5nYXRld2F5SWQsXG4gICAgICAgICkgJiYgdGhpcy5fc2hvdWxkUmVuZGVySG9zdGVkRm9ybVxuICAgICAgICAgICAgPyB0aGlzLl9leGVjdXRlV2l0aEhvc3RlZEZvcm0ocGF5bG9hZCwgb3B0aW9ucylcbiAgICAgICAgICAgIDogdGhpcy5fZXhlY3V0ZVdpdGhvdXRIb3N0ZWRGb3JtKHBheWxvYWQsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQ3JlZGl0Q2FyZFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXRoaXMuX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKG9wdGlvbnM/Lm1ldGhvZElkLCBvcHRpb25zPy5nYXRld2F5SWQpIHx8XG4gICAgICAgICAgICAhdGhpcy5faXNIb3N0ZWRGaWVsZEF2YWlsYWJsZShvcHRpb25zKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm0gPSBmYWxzZTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm9ybU9wdGlvbnMgPSBvcHRpb25zICYmIG9wdGlvbnMuY3JlZGl0Q2FyZCAmJiBvcHRpb25zLmNyZWRpdENhcmQuZm9ybTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudFNldHRpbmdzOiB7IGJpZ3BheUJhc2VVcmw6IGhvc3QgPSAnJyB9ID0ge30gfSA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKTtcblxuICAgICAgICBpZiAoIWZvcm1PcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUhvc3RlZEZvcm0oaG9zdCwgZm9ybU9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBmb3JtLmF0dGFjaCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fc2hvdWxkUmVuZGVySG9zdGVkRm9ybSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9ob3N0ZWRGb3JtID0gZm9ybTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLl9ob3N0ZWRGb3JtKSB7XG4gICAgICAgICAgICB0aGlzLl9ob3N0ZWRGb3JtLmRldGFjaCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgX2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybShcbiAgICAgICAgcGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgcGF5bWVudERhdGEgPSBwYXltZW50ICYmIHBheW1lbnQucGF5bWVudERhdGE7XG5cbiAgICAgICAgaWYgKCFwYXltZW50IHx8ICFwYXltZW50RGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQucGF5bWVudERhdGEnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoeyAuLi5wYXltZW50LCBwYXltZW50RGF0YSB9KTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgX2V4ZWN1dGVXaXRoSG9zdGVkRm9ybShcbiAgICAgICAgcGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgZm9ybSA9IHRoaXMuX2hvc3RlZEZvcm07XG5cbiAgICAgICAgaWYgKCFmb3JtKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXltZW50IHx8ICFwYXltZW50Lm1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudC5tZXRob2RJZCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIGF3YWl0IGZvcm0udmFsaWRhdGUoKS50aGVuKCgpID0+IGZvcm0uc3VibWl0KHBheW1lbnQpKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKG1ldGhvZElkPzogc3RyaW5nLCBnYXRld2F5SWQ/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCwgZ2F0ZXdheUlkKTtcblxuICAgICAgICByZXR1cm4gcGF5bWVudE1ldGhvZC5jb25maWcuaXNIb3N0ZWRGb3JtRW5hYmxlZCA9PT0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9pc0hvc3RlZEZpZWxkQXZhaWxhYmxlKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aENyZWRpdENhcmRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhdmFsdWVzKG9wdGlvbnMgJiYgb3B0aW9ucy5jcmVkaXRDYXJkICYmIG9wdGlvbnMuY3JlZGl0Q2FyZC5mb3JtLmZpZWxkcykuZXZlcnkoXG4gICAgICAgICAgICBpc05pbCxcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8vIEhhdmUgdG8gdXNlIGBhc2AgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzM5ODcwNDQvdHlwZWd1YXJkaW5nLWFuLXVua25vd24tbmVzdGVkLW9iamVjdCBzaG91bGQgYmUgZml4ZWQgaW4gNC44K1xuY29uc3QgaXNSZXF1ZXN0RXJyb3IgPSAoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBSZXF1ZXN0RXJyb3IgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdib2R5JyBpbiBlcnJvcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzUmVxdWVzdEVycm9yO1xuIiwiaW1wb3J0IHsgbWVyZ2UsIHNvbWUgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9jcmVkaXQtY2FyZC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIGlzUmVxdWVzdEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBXaXRoV29ybGRwYXlBY2Nlc3NQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgV29ybGRwYXlBY2Nlc3MzRFNPcHRpb25zLFxuICAgIFdvcmxkcGF5QWNjZXNzQWRkaXRpb25hbEFjdGlvbixcbiAgICBXb3JsZHBheUFjY2Vzc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi93b3JsZHBheWFjY2Vzcy1wYXltZW50LW9wdGlvbnMnO1xuXG5jb25zdCBJRlJBTUVfTkFNRSA9ICd3b3JsZHBheV9ob3N0ZWRfcGF5bWVudF9wYWdlJztcbmNvbnN0IElGUkFNRV9ISURERU5fTkFNRSA9ICd3b3JsZHBheV9ob3N0ZWRfaGlkZGVuX3BheW1lbnRfcGFnZSc7XG5jb25zdCBQQVlNRU5UX0NBTk5PVF9DT05USU5VRSA9ICdQYXltZW50IGNhbm5vdCBjb250aW51ZSc7XG5cbmxldCBzdWJtaXQ6IChwYXltZW50UGF5bG9hZDogT3JkZXJQYXltZW50UmVxdWVzdEJvZHkpID0+IFByb21pc2U8dm9pZD47XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdvcmxkcGF5QWNjZXNzUGF5bWVudFN0cmF0ZWd5IGV4dGVuZHMgQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBfaW5pdGlhbGl6ZU9wdGlvbnM/OiBXb3JsZHBheUFjY2Vzc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucztcblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoV29ybGRwYXlBY2Nlc3NQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVPcHRpb25zID0gb3B0aW9ucyAmJiBvcHRpb25zLndvcmxkcGF5O1xuXG4gICAgICAgIGlmICghdGhpcy5faW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VwZXIuaW5pdGlhbGl6ZShvcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKFxuICAgICAgICBvcmRlclJlcXVlc3Q6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCB9ID0gb3JkZXJSZXF1ZXN0O1xuXG4gICAgICAgIHN1Ym1pdCA9IHRoaXMuX3N1Ym1pdEFkZGl0aW9uYWxBY3Rpb24oKTtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzdXBlci5leGVjdXRlKG9yZGVyUmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZXJyb3IsIHBheW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oXG4gICAgICAgIGVycm9yOiB1bmtub3duLFxuICAgICAgICBwYXltZW50OiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWlzUmVxdWVzdEVycm9yKGVycm9yKSB8fFxuICAgICAgICAgICAgIXNvbWUoZXJyb3IuYm9keS5lcnJvcnMsIHsgY29kZTogJ2FkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkJyB9KVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUV2ZW50ID0gYXN5bmMgKGV2ZW50OiBNZXNzYWdlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50LmRhdGEgIT09ICdzdHJpbmcnIHx8ICF0aGlzLl9pc1ZhbGlkSnNvbldpdGhTZXNzaW9uSWQoZXZlbnQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoUEFZTUVOVF9DQU5OT1RfQ09OVElOVUUpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG1lc3NhZ2VFdmVudCk7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICAgICAgICAgIGlmcmFtZUhpZGRlbi5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gbWVyZ2Uoe30sIHBheW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudERhdGE6IHsgdGhyZWVEU2VjdXJlOiB7IHRva2VuOiBkYXRhLlNlc3Npb25JZCB9IH0sXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGF3YWl0IHN1Ym1pdChwYXltZW50UGF5bG9hZCkpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHN1Ym1pdEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICFpc1JlcXVlc3RFcnJvcihzdWJtaXRFcnJvcikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICFzb21lKHN1Ym1pdEVycm9yLmJvZHkuZXJyb3JzLCB7IGNvZGU6ICd0aHJlZV9kX3NlY3VyZV9yZXF1aXJlZCcgfSlcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KHN1Ym1pdEVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5faW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG9uTG9hZCB9ID0gdGhpcy5faW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhbWUgPSB0aGlzLl9jcmVhdGVJZnJhbWUoc3VibWl0RXJyb3IuYm9keS50aHJlZV9kc19yZXN1bHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkxvYWQoZnJhbWUsICgpID0+IHJlamVjdChuZXcgRXJyb3IoJ1BheW1lbnQgd2FzIGNhbmNlbGxlZCcpKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKG9uTG9hZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFBBWU1FTlRfQ0FOTk9UX0NPTlRJTlVFKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG1lc3NhZ2VFdmVudCk7XG5cbiAgICAgICAgICAgIGxldCBpZnJhbWVIaWRkZW46IEhUTUxJRnJhbWVFbGVtZW50O1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmcmFtZUhpZGRlbiA9IHRoaXMuX2NyZWF0ZUhpZGRlbklmcmFtZShlcnJvci5ib2R5KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG1lc3NhZ2VFdmVudCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFBBWU1FTlRfQ0FOTk9UX0NPTlRJTlVFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY3JlYXRlSGlkZGVuSWZyYW1lKGJvZHk6IFdvcmxkcGF5QWNjZXNzQWRkaXRpb25hbEFjdGlvbik6IEhUTUxJRnJhbWVFbGVtZW50IHtcbiAgICAgICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuXG4gICAgICAgIGlmICghaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWZyYW1lLmlkID0gSUZSQU1FX0hJRERFTl9OQU1FO1xuICAgICAgICBpZnJhbWUuaGVpZ2h0ID0gJzBweCc7XG4gICAgICAgIGlmcmFtZS53aWR0aCA9ICcwcHgnO1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gICAgICAgIGNvbnN0IGZvcm1JZCA9ICdjb2xsZWN0aW9uRm9ybSc7XG5cbiAgICAgICAgZm9ybS5pZCA9IGZvcm1JZDtcbiAgICAgICAgZm9ybS5uYW1lID0gJ2RldmljZWRhdGEnO1xuICAgICAgICBmb3JtLm1ldGhvZCA9ICdwb3N0JztcblxuICAgICAgICBjb25zdCB1cmwgPSBib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkLmRhdGEucmVkaXJlY3RfdXJsO1xuXG4gICAgICAgIGZvcm0uYWN0aW9uID0gdXJsO1xuXG4gICAgICAgIGNvbnN0IGlucHV0QmluID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcblxuICAgICAgICBpbnB1dEJpbi5uYW1lID0gJ0Jpbic7XG4gICAgICAgIGlucHV0QmluLnR5cGUgPSAnaGlkZGVuJztcbiAgICAgICAgaW5wdXRCaW4udmFsdWUgPSBib2R5LnByb3ZpZGVyX2RhdGEuc291cmNlX2lkO1xuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGlucHV0QmluKTtcblxuICAgICAgICBjb25zdCBpbnB1dEpXVCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cbiAgICAgICAgaW5wdXRKV1QubmFtZSA9ICdKV1QnO1xuICAgICAgICBpbnB1dEpXVC50eXBlID0gJ2hpZGRlbic7XG4gICAgICAgIGlucHV0SldULnZhbHVlID0gYm9keS5wcm92aWRlcl9kYXRhLmRhdGE7XG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoaW5wdXRKV1QpO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuXG4gICAgICAgIGJ1dHRvbi50eXBlID0gJ3N1Ym1pdCc7XG4gICAgICAgIGJ1dHRvbi5pZCA9ICdidG5zdWJtaXQnO1xuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cbiAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goJ0ZpcmVmb3gnKSkge1xuICAgICAgICAgICAgaWZyYW1lLnNyY2RvYyA9IGZvcm0ub3V0ZXJIVE1MO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG4gICAgICAgIHNjcmlwdC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnJHtmb3JtSWR9Jykuc3VibWl0KCk7XG4gICAgICAgIGA7XG4gICAgICAgIGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcblxuICAgICAgICByZXR1cm4gaWZyYW1lO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NyZWF0ZUlmcmFtZShkYXRhOiBXb3JsZHBheUFjY2VzczNEU09wdGlvbnMpOiBIVE1MSUZyYW1lRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG5cbiAgICAgICAgZm9ybS5pZCA9ICdjaGFsbGVuZ2VGb3JtJztcbiAgICAgICAgZm9ybS5tZXRob2QgPSAnUE9TVCc7XG4gICAgICAgIGZvcm0uYWN0aW9uID0gZGF0YS5hY3NfdXJsO1xuXG4gICAgICAgIGNvbnN0IGlucHV0SldUID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcblxuICAgICAgICBpbnB1dEpXVC5uYW1lID0gJ0pXVCc7XG4gICAgICAgIGlucHV0SldULnR5cGUgPSAnaGlkZGVuJztcbiAgICAgICAgaW5wdXRKV1QudmFsdWUgPSBkYXRhLnBheWVyX2F1dGhfcmVxdWVzdDtcbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dEpXVCk7XG5cbiAgICAgICAgY29uc3QgbWVyY2hhbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuXG4gICAgICAgIG1lcmNoYW50Lm5hbWUgPSAnTUQnO1xuICAgICAgICBtZXJjaGFudC50eXBlID0gJ2hpZGRlbic7XG4gICAgICAgIG1lcmNoYW50LnZhbHVlID0gYG1lcmNoYW50U2Vzc2lvbklkPSR7ZGF0YS5tZXJjaGFudF9kYXRhfWA7XG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQobWVyY2hhbnQpO1xuXG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG4gICAgICAgIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gICAgICAgIHNjcmlwdC5pbm5lckhUTUwgPVxuICAgICAgICAgICAgXCJ3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFsbGVuZ2VGb3JtJykuc3VibWl0KCk7IH1cIjtcblxuICAgICAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcblxuICAgICAgICBpZnJhbWUubmFtZSA9IElGUkFNRV9OQU1FO1xuICAgICAgICBpZnJhbWUuaGVpZ2h0ID0gJzQwMCc7XG4gICAgICAgIGlmcmFtZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgaWZyYW1lLnNyY2RvYyA9IGAke2Zvcm0ub3V0ZXJIVE1MfSAke3NjcmlwdC5vdXRlckhUTUx9YDtcblxuICAgICAgICByZXR1cm4gaWZyYW1lO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3N1Ym1pdEFkZGl0aW9uYWxBY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLl9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2hvc3RlZEZvcm0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBob3N0ZWRGb3JtID0gdGhpcy5faG9zdGVkRm9ybTtcblxuICAgICAgICAgICAgcmV0dXJuIGFzeW5jIChwYXltZW50UGF5bG9hZDogT3JkZXJQYXltZW50UmVxdWVzdEJvZHkpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBob3N0ZWRGb3JtLnN1Ym1pdChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFzeW5jIChwYXltZW50UGF5bG9hZDogT3JkZXJQYXltZW50UmVxdWVzdEJvZHkpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNWYWxpZEpzb25XaXRoU2Vzc2lvbklkKHN0cjogc3RyaW5nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShzdHIpO1xuXG4gICAgICAgICAgICBpZiAoZGF0YS5TZXNzaW9uSWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFdvcmxkcGF5QWNjZXNzUGF5bWV0U3RyYXRlZ3kgZnJvbSAnLi93b3JsZHBheWFjY2Vzcy1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlV29ybGRwYXlBY2Nlc3NQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8V29ybGRwYXlBY2Nlc3NQYXltZXRTdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT4ge1xuICAgIHJldHVybiBuZXcgV29ybGRwYXlBY2Nlc3NQYXltZXRTdHJhdGVneShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVXb3JsZHBheUFjY2Vzc1BheW1lbnRTdHJhdGVneSwgW3sgaWQ6ICd3b3JsZHBheWFjY2VzcycgfV0pO1xuIiwiaW1wb3J0IFJlc29sdmFibGVNb2R1bGUgZnJvbSAnLi9yZXNvbHZhYmxlLW1vZHVsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4oXG4gICAgbW9kdWxlOiBUTW9kdWxlLFxuICAgIHJlc29sdmVJZHM6IFRJZGVudGlmaWVyW10sXG4pOiBSZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPiB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obW9kdWxlLCB7IHJlc29sdmVJZHMgfSk7XG59XG4iXSwibmFtZXMiOlsiTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUiLCJTdGFuZGFyZEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJwcm90b3R5cGUiLCJzdXBlciIsIm5hbWUiLCJ0eXBlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJ0aGlzIiwiX19wcm90b19fIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJzdGFjayIsIkludmFsaWRBcmd1bWVudEVycm9yIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIiwiaW52YWxpZEZpZWxkcyIsImpvaW4iLCJOb3RJbml0aWFsaXplZEVycm9yIiwic3VidHlwZSIsIkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50Tm90SW5pdGlhbGl6ZWQiLCJTaGlwcGluZ05vdEluaXRpYWxpemVkIiwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCIsImdldEVycm9yTWVzc2FnZSIsIkNyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kiLCJfcGF5bWVudEludGVncmF0aW9uU2VydmljZSIsImV4ZWN1dGUiLCJwYXlsb2FkIiwib3B0aW9ucyIsIl9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZCIsInBheW1lbnQiLCJtZXRob2RJZCIsImdhdGV3YXlJZCIsIl9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtIiwiX2V4ZWN1dGVXaXRoSG9zdGVkRm9ybSIsIl9leGVjdXRlV2l0aG91dEhvc3RlZEZvcm0iLCJpbml0aWFsaXplIiwiX2lzSG9zdGVkRmllbGRBdmFpbGFibGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsImZvcm1PcHRpb25zIiwiY3JlZGl0Q2FyZCIsImZvcm0iLCJzdGF0ZSIsImdldFN0YXRlIiwicGF5bWVudFNldHRpbmdzIiwiYmlncGF5QmFzZVVybCIsImhvc3QiLCJnZXRTdG9yZUNvbmZpZ09yVGhyb3ciLCJjcmVhdGVIb3N0ZWRGb3JtIiwiYXR0YWNoIiwidGhlbiIsIl9ob3N0ZWRGb3JtIiwiZGVpbml0aWFsaXplIiwiZGV0YWNoIiwiZmluYWxpemUiLCJyZWplY3QiLCJvcmRlciIsInBheW1lbnREYXRhIiwic3VibWl0T3JkZXIiLCJzdWJtaXRQYXltZW50IiwidmFsaWRhdGUiLCJzdWJtaXQiLCJnZXRQYXltZW50TWV0aG9kT3JUaHJvdyIsImNvbmZpZyIsImlzSG9zdGVkRm9ybUVuYWJsZWQiLCJ2YWx1ZXMiLCJmaWVsZHMiLCJldmVyeSIsImlzTmlsIiwiZXJyb3IiLCJQQVlNRU5UX0NBTk5PVF9DT05USU5VRSIsIldvcmxkcGF5QWNjZXNzUGF5bWVudFN0cmF0ZWd5IiwiX2luaXRpYWxpemVPcHRpb25zIiwid29ybGRwYXkiLCJvcmRlclJlcXVlc3QiLCJfc3VibWl0QWRkaXRpb25hbEFjdGlvbiIsIl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbiIsInNvbWUiLCJib2R5IiwiZXJyb3JzIiwiY29kZSIsIm1lc3NhZ2VFdmVudCIsImV2ZW50IiwiZGF0YSIsIl9pc1ZhbGlkSnNvbldpdGhTZXNzaW9uSWQiLCJ3aW5kb3ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaWZyYW1lSGlkZGVuIiwicmVtb3ZlIiwiSlNPTiIsInBhcnNlIiwicGF5bWVudFBheWxvYWQiLCJtZXJnZSIsInRocmVlRFNlY3VyZSIsInRva2VuIiwiU2Vzc2lvbklkIiwic3VibWl0RXJyb3IiLCJvbkxvYWQiLCJmcmFtZSIsIl9jcmVhdGVJZnJhbWUiLCJ0aHJlZV9kc19yZXN1bHQiLCJvbkxvYWRFcnJvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY3JlYXRlSGlkZGVuSWZyYW1lIiwiZSIsImlmcmFtZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiY29udGVudFdpbmRvdyIsImlkIiwiaGVpZ2h0Iiwid2lkdGgiLCJmb3JtSWQiLCJtZXRob2QiLCJ1cmwiLCJhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCIsInJlZGlyZWN0X3VybCIsImFjdGlvbiIsImlucHV0QmluIiwidmFsdWUiLCJwcm92aWRlcl9kYXRhIiwic291cmNlX2lkIiwiaW5wdXRKV1QiLCJidXR0b24iLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJtYXRjaCIsInNyY2RvYyIsIm91dGVySFRNTCIsInNjcmlwdCIsImlubmVySFRNTCIsImFjc191cmwiLCJwYXllcl9hdXRoX3JlcXVlc3QiLCJtZXJjaGFudCIsIm1lcmNoYW50X2RhdGEiLCJob3N0ZWRGb3JtIiwic3RyIiwibW9kdWxlIiwicGF5bWVudEludGVncmF0aW9uU2VydmljZSIsInJlc29sdmVJZHMiLCJhc3NpZ24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/worldpayaccess.js\n\n}");

/***/ }),

/***/ "./packages/hosted-credit-card-integration/src/hooks/useHostedCreditCard.tsx":
/*!***********************************************************************************!*\
  !*** ./packages/hosted-credit-card-integration/src/hooks/useHostedCreditCard.tsx ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useHostedCreditCard: () => (/* binding */ useHostedCreditCard)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/creditCard/getCreditCardInputStyles/getCreditCardInputStyles.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components */ \"./packages/hosted-credit-card-integration/src/components/HostedCreditCardValidation/HostedCreditCardValidation.tsx\");\n\n\n\n\n\nconst useHostedCreditCard = ({ checkoutState, method, language, paymentForm, }) => {\n    const { setFieldTouched, setFieldValue, setSubmitted, submitForm } = paymentForm;\n    const { config } = method;\n    const { cardCode: requireCardCode } = config;\n    const isCardCodeRequired = requireCardCode || requireCardCode === null;\n    const isInstrumentCardCodeRequiredProp = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(checkoutState);\n    const isInstrumentCardNumberRequiredProp = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(checkoutState);\n    const getHostedFieldId = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((name) => {\n        return `${(0,lodash__WEBPACK_IMPORTED_MODULE_1__.compact)([method.gateway, method.id]).join('-')}-${name}`;\n    }, [method]);\n    const [focusedFieldType, setFocusedFieldType] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n    const getHostedStoredCardValidationFieldset = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((selectedInstrument) => {\n        const isInstrumentCardNumberRequired = selectedInstrument\n            ? isInstrumentCardNumberRequiredProp(selectedInstrument, method)\n            : false;\n        const isInstrumentCardCodeRequired = selectedInstrument\n            ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n            : false;\n        return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { cardCodeId: isInstrumentCardCodeRequired ? getHostedFieldId('ccCvv') : undefined, cardNumberId: isInstrumentCardNumberRequired\n                ? getHostedFieldId('ccNumber')\n                : undefined, focusedFieldType: focusedFieldType }));\n    }, [\n        focusedFieldType,\n        getHostedFieldId,\n        isInstrumentCardCodeRequiredProp,\n        isInstrumentCardNumberRequiredProp,\n        method,\n    ]);\n    const getHostedFormOptions = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        const styleProps = ['color', 'fontFamily', 'fontSize', 'fontWeight'];\n        const isInstrumentCardNumberRequired = selectedInstrument\n            ? isInstrumentCardNumberRequiredProp(selectedInstrument, method)\n            : false;\n        const isInstrumentCardCodeRequired = selectedInstrument\n            ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n            : false;\n        let styleContainerId;\n        if (selectedInstrument) {\n            if (isInstrumentCardCodeRequired) {\n                styleContainerId = getHostedFieldId('ccCvv');\n            }\n            else if (isInstrumentCardNumberRequired) {\n                styleContainerId = getHostedFieldId('ccNumber');\n            }\n        }\n        else {\n            styleContainerId = getHostedFieldId('ccNumber');\n        }\n        return {\n            fields: selectedInstrument\n                ? {\n                    cardCodeVerification: isInstrumentCardCodeRequired && selectedInstrument\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_cvv_label'),\n                            containerId: getHostedFieldId('ccCvv'),\n                            instrumentId: selectedInstrument.bigpayToken,\n                        }\n                        : undefined,\n                    cardNumberVerification: isInstrumentCardNumberRequired && selectedInstrument\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_number_label'),\n                            containerId: getHostedFieldId('ccNumber'),\n                            instrumentId: selectedInstrument.bigpayToken,\n                        }\n                        : undefined,\n                }\n                : {\n                    cardCode: isCardCodeRequired\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_cvv_label'),\n                            containerId: getHostedFieldId('ccCvv'),\n                        }\n                        : undefined,\n                    cardExpiry: {\n                        accessibilityLabel: language.translate('payment.credit_card_expiration_label'),\n                        containerId: getHostedFieldId('ccExpiry'),\n                        placeholder: language.translate('payment.credit_card_expiration_placeholder_text'),\n                    },\n                    cardName: {\n                        accessibilityLabel: language.translate('payment.credit_card_name_label'),\n                        containerId: getHostedFieldId('ccName'),\n                    },\n                    cardNumber: {\n                        accessibilityLabel: language.translate('payment.credit_card_number_label'),\n                        containerId: getHostedFieldId('ccNumber'),\n                    },\n                },\n            styles: styleContainerId\n                ? {\n                    default: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(styleContainerId, styleProps),\n                    error: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(styleContainerId, styleProps, _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__.CreditCardInputStylesType.Error),\n                    focus: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(styleContainerId, styleProps, _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__.CreditCardInputStylesType.Focus),\n                }\n                : {},\n            onBlur: ({ fieldType }) => {\n                if (focusedFieldType === fieldType) {\n                    setFocusedFieldType(undefined);\n                }\n            },\n            onCardTypeChange: ({ cardType }) => {\n                setFieldValue('hostedForm.cardType', cardType);\n            },\n            onEnter: () => {\n                setSubmitted(true);\n                submitForm();\n            },\n            onFocus: ({ fieldType }) => {\n                setFocusedFieldType(fieldType);\n            },\n            onValidate: ({ errors = {} }) => {\n                (0,lodash__WEBPACK_IMPORTED_MODULE_1__.forIn)(errors, (fieldErrors = [], fieldType) => {\n                    var _a, _b;\n                    const errorKey = `hostedForm.errors.${fieldType}`;\n                    setFieldValue(errorKey, (_b = (_a = fieldErrors[0]) === null || _a === void 0 ? void 0 : _a.type) !== null && _b !== void 0 ? _b : '');\n                    if (fieldErrors[0]) {\n                        setFieldTouched(errorKey);\n                    }\n                });\n            },\n        };\n    }), [\n        focusedFieldType,\n        getHostedFieldId,\n        isCardCodeRequired,\n        isInstrumentCardCodeRequiredProp,\n        isInstrumentCardNumberRequiredProp,\n        language,\n        method,\n        setFieldTouched,\n        setFieldValue,\n        setSubmitted,\n        submitForm,\n    ]);\n    return { getHostedStoredCardValidationFieldset, getHostedFormOptions };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9ob3N0ZWQtY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24vc3JjL2hvb2tzL3VzZUhvc3RlZENyZWRpdENhcmQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBT3dDO0FBQzZCO0FBT3JCO0FBR1c7QUFTcEQsTUFBTSxtQkFBbUIsR0FBRyxDQUFDLEVBQ2hDLGFBQWEsRUFDYixNQUFNLEVBQ04sUUFBUSxFQUNSLFdBQVcsR0FDUSxFQUFFLEVBQUU7SUFDdkIsTUFBTSxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxHQUFHLFdBQVcsQ0FBQztJQUNqRixNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDO0lBQzFCLE1BQU0sRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFLEdBQUcsTUFBTSxDQUFDO0lBRTdDLE1BQU0sa0JBQWtCLEdBQUcsZUFBZSxJQUFJLGVBQWUsS0FBSyxJQUFJLENBQUM7SUFDdkUsTUFBTSxnQ0FBZ0MsR0FBRyxrRkFBb0MsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUM3RixNQUFNLGtDQUFrQyxHQUNwQyxrRkFBc0MsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUUxRCxNQUFNLGdCQUFnQixHQUE2QixrREFBVyxDQUMxRCxDQUFDLElBQUksRUFBRSxFQUFFO1FBQ0wsT0FBTyxHQUFHLCtDQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQztJQUN2RSxDQUFDLEVBQ0QsQ0FBQyxNQUFNLENBQUMsQ0FDWCxDQUFDO0lBRUYsTUFBTSxDQUFDLGdCQUFnQixFQUFFLG1CQUFtQixDQUFDLEdBQUcsK0NBQVEsRUFBVSxDQUFDO0lBRW5FLE1BQU0scUNBQXFDLEdBQ3ZDLGtEQUFXLENBQ1AsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFO1FBQ25CLE1BQU0sOEJBQThC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LENBQUMsQ0FBQztZQUNuRCxDQUFDO1lBQ0QsT0FBTyxFQUFFLEdBQUcsRUFBRTtnQkFDVixZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ25CLFVBQVUsRUFBRSxDQUFDO1lBQ2pCLENBQUM7WUFDRCxPQUFPLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUU7Z0JBQ3ZCLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ25DLENBQUM7WUFDRCxVQUFVLEVBQUUsQ0FBQyxFQUFFLE1BQU0sR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFO2dCQUM1Qiw2Q0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLFdBQVcsR0FBRyxFQUFFLEVBQUUsU0FBUyxFQUFFLEVBQUU7O29CQUMxQyxNQUFNLFFBQVEsR0FBRyxxQkFBcUIsU0FBUyxFQUFFLENBQUM7b0JBRWxELGFBQWEsQ0FBQyxRQUFRLEVBQUUsdUJBQVcsQ0FBQyxDQUFDLENBQUMsMENBQUUsSUFBSSxtQ0FBSSxFQUFFLENBQUMsQ0FBQztvQkFFcEQsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQzt3QkFDakIsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUM5QixDQUFDO2dCQUNMLENBQUMsQ0FBQyxDQUFDO1lBQ1AsQ0FBQztTQUNKLENBQUM7SUFDTixDQUFDLEdBQ0Q7UUFDSSxnQkFBZ0I7UUFDaEIsZ0JBQWdCO1FBQ2hCLGtCQUFrQjtRQUNsQixnQ0FBZ0M7UUFDaEMsa0NBQWtDO1FBQ2xDLFFBQVE7UUFDUixNQUFNO1FBQ04sZUFBZTtRQUNmLGFBQWE7UUFDYixZQUFZO1FBQ1osVUFBVTtLQUNiLENBQ0osQ0FBQztJQUVGLE9BQU8sRUFBRSxxQ0FBcUMsRUFBRSxvQkFBb0IsRUFBRSxDQUFDO0FBQzNFLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvaG9zdGVkLWNyZWRpdC1jYXJkLWludGVncmF0aW9uL3NyYy9ob29rcy91c2VIb3N0ZWRDcmVkaXRDYXJkLnRzeD8zZmMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgdHlwZSBDYXJkSW5zdHJ1bWVudCxcbiAgICB0eXBlIENoZWNrb3V0U2VsZWN0b3JzLFxuICAgIHR5cGUgTGFuZ3VhZ2VTZXJ2aWNlLFxuICAgIHR5cGUgTGVnYWN5SG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgdHlwZSBQYXltZW50TWV0aG9kLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrJztcbmltcG9ydCB7IGNvbXBhY3QsIGZvckluIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBSZWFjdCwgeyB0eXBlIFJlYWN0Tm9kZSwgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQge1xuICAgIENyZWRpdENhcmRJbnB1dFN0eWxlc1R5cGUsXG4gICAgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzLFxuICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRTZWxlY3RvcixcbiAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3Rvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2luc3RydW1lbnQtdXRpbHMnO1xuaW1wb3J0IHsgdHlwZSBQYXltZW50Rm9ybVNlcnZpY2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBIb3N0ZWRDcmVkaXRDYXJkVmFsaWRhdGlvbiB9IGZyb20gJy4uL2NvbXBvbmVudHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFVzZUhvc3RlZEZvcm1PcHRpb25zIHtcbiAgICBjaGVja291dFN0YXRlOiBDaGVja291dFNlbGVjdG9ycztcbiAgICBsYW5ndWFnZTogTGFuZ3VhZ2VTZXJ2aWNlO1xuICAgIG1ldGhvZDogUGF5bWVudE1ldGhvZDtcbiAgICBwYXltZW50Rm9ybTogUGF5bWVudEZvcm1TZXJ2aWNlO1xufVxuXG5leHBvcnQgY29uc3QgdXNlSG9zdGVkQ3JlZGl0Q2FyZCA9ICh7XG4gICAgY2hlY2tvdXRTdGF0ZSxcbiAgICBtZXRob2QsXG4gICAgbGFuZ3VhZ2UsXG4gICAgcGF5bWVudEZvcm0sXG59OiBVc2VIb3N0ZWRGb3JtT3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHsgc2V0RmllbGRUb3VjaGVkLCBzZXRGaWVsZFZhbHVlLCBzZXRTdWJtaXR0ZWQsIHN1Ym1pdEZvcm0gfSA9IHBheW1lbnRGb3JtO1xuICAgIGNvbnN0IHsgY29uZmlnIH0gPSBtZXRob2Q7XG4gICAgY29uc3QgeyBjYXJkQ29kZTogcmVxdWlyZUNhcmRDb2RlIH0gPSBjb25maWc7XG5cbiAgICBjb25zdCBpc0NhcmRDb2RlUmVxdWlyZWQgPSByZXF1aXJlQ2FyZENvZGUgfHwgcmVxdWlyZUNhcmRDb2RlID09PSBudWxsO1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRQcm9wID0gaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpO1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFByb3AgPVxuICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3RvcihjaGVja291dFN0YXRlKTtcblxuICAgIGNvbnN0IGdldEhvc3RlZEZpZWxkSWQ6IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZyA9IHVzZUNhbGxiYWNrKFxuICAgICAgICAobmFtZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGAke2NvbXBhY3QoW21ldGhvZC5nYXRld2F5LCBtZXRob2QuaWRdKS5qb2luKCctJyl9LSR7bmFtZX1gO1xuICAgICAgICB9LFxuICAgICAgICBbbWV0aG9kXSxcbiAgICApO1xuXG4gICAgY29uc3QgW2ZvY3VzZWRGaWVsZFR5cGUsIHNldEZvY3VzZWRGaWVsZFR5cGVdID0gdXNlU3RhdGU8c3RyaW5nPigpO1xuXG4gICAgY29uc3QgZ2V0SG9zdGVkU3RvcmVkQ2FyZFZhbGlkYXRpb25GaWVsZHNldDogKHNlbGVjdGVkSW5zdHJ1bWVudDogQ2FyZEluc3RydW1lbnQpID0+IFJlYWN0Tm9kZSA9XG4gICAgICAgIHVzZUNhbGxiYWNrKFxuICAgICAgICAgICAgKHNlbGVjdGVkSW5zdHJ1bWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCA9IHNlbGVjdGVkSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgICAgICA/IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFByb3Aoc2VsZWN0ZWRJbnN0cnVtZW50LCBtZXRob2QpXG4gICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCA9IHNlbGVjdGVkSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgICAgICA/IGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRQcm9wKHNlbGVjdGVkSW5zdHJ1bWVudCwgbWV0aG9kKVxuICAgICAgICAgICAgICAgICAgICA6IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPEhvc3RlZENyZWRpdENhcmRWYWxpZGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkQ29kZUlkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkID8gZ2V0SG9zdGVkRmllbGRJZCgnY2NDdnYnKSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlcklkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRIb3N0ZWRGaWVsZElkKCdjY051bWJlcicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1c2VkRmllbGRUeXBlPXtmb2N1c2VkRmllbGRUeXBlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIGZvY3VzZWRGaWVsZFR5cGUsXG4gICAgICAgICAgICAgICAgZ2V0SG9zdGVkRmllbGRJZCxcbiAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkUHJvcCxcbiAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRQcm9wLFxuICAgICAgICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICk7XG5cbiAgICBjb25zdCBnZXRIb3N0ZWRGb3JtT3B0aW9ucyA9IHVzZUNhbGxiYWNrKFxuICAgICAgICBhc3luYyAoc2VsZWN0ZWRJbnN0cnVtZW50OiBDYXJkSW5zdHJ1bWVudCk6IFByb21pc2U8TGVnYWN5SG9zdGVkRm9ybU9wdGlvbnM+ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlUHJvcHMgPSBbJ2NvbG9yJywgJ2ZvbnRGYW1pbHknLCAnZm9udFNpemUnLCAnZm9udFdlaWdodCddO1xuICAgICAgICAgICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkID0gc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgPyBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRQcm9wKHNlbGVjdGVkSW5zdHJ1bWVudCwgbWV0aG9kKVxuICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkID0gc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgPyBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkUHJvcChzZWxlY3RlZEluc3RydW1lbnQsIG1ldGhvZClcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHN0eWxlQ29udGFpbmVySWQ7XG5cbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEluc3RydW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lcklkID0gZ2V0SG9zdGVkRmllbGRJZCgnY2NDdnYnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lcklkID0gZ2V0SG9zdGVkRmllbGRJZCgnY2NOdW1iZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0eWxlQ29udGFpbmVySWQgPSBnZXRIb3N0ZWRGaWVsZElkKCdjY051bWJlcicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkczogc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkQ29kZVZlcmlmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWQgJiYgc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50LmNyZWRpdF9jYXJkX2N2dl9sYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogZ2V0SG9zdGVkRmllbGRJZCgnY2NDdnYnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQ6IHNlbGVjdGVkSW5zdHJ1bWVudC5iaWdwYXlUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlclZlcmlmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCAmJiBzZWxlY3RlZEluc3RydW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY051bWJlcicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZDogc2VsZWN0ZWRJbnN0cnVtZW50LmJpZ3BheVRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRDb2RlOiBpc0NhcmRDb2RlUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfY3Z2X2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogZ2V0SG9zdGVkRmllbGRJZCgnY2NDdnYnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRFeHBpcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbDogbGFuZ3VhZ2UudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50LmNyZWRpdF9jYXJkX2V4cGlyYXRpb25fbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY0V4cGlyeScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGF5bWVudC5jcmVkaXRfY2FyZF9leHBpcmF0aW9uX3BsYWNlaG9sZGVyX3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbDogbGFuZ3VhZ2UudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50LmNyZWRpdF9jYXJkX25hbWVfbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY05hbWUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogZ2V0SG9zdGVkRmllbGRJZCgnY2NOdW1iZXInKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN0eWxlczogc3R5bGVDb250YWluZXJJZFxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYXdhaXQgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzKHN0eWxlQ29udGFpbmVySWQsIHN0eWxlUHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYXdhaXQgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVDb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlUHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRDYXJkSW5wdXRTdHlsZXNUeXBlLkVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1czogYXdhaXQgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVDb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlUHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRDYXJkSW5wdXRTdHlsZXNUeXBlLkZvY3VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgICAgICAgICBvbkJsdXI6ICh7IGZpZWxkVHlwZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb2N1c2VkRmllbGRUeXBlID09PSBmaWVsZFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZvY3VzZWRGaWVsZFR5cGUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25DYXJkVHlwZUNoYW5nZTogKHsgY2FyZFR5cGUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRGaWVsZFZhbHVlKCdob3N0ZWRGb3JtLmNhcmRUeXBlJywgY2FyZFR5cGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25FbnRlcjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRTdWJtaXR0ZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdEZvcm0oKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uRm9jdXM6ICh7IGZpZWxkVHlwZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldEZvY3VzZWRGaWVsZFR5cGUoZmllbGRUeXBlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uVmFsaWRhdGU6ICh7IGVycm9ycyA9IHt9IH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ySW4oZXJyb3JzLCAoZmllbGRFcnJvcnMgPSBbXSwgZmllbGRUeXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvcktleSA9IGBob3N0ZWRGb3JtLmVycm9ycy4ke2ZpZWxkVHlwZX1gO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRGaWVsZFZhbHVlKGVycm9yS2V5LCBmaWVsZEVycm9yc1swXT8udHlwZSA/PyAnJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZEVycm9yc1swXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEZpZWxkVG91Y2hlZChlcnJvcktleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBbXG4gICAgICAgICAgICBmb2N1c2VkRmllbGRUeXBlLFxuICAgICAgICAgICAgZ2V0SG9zdGVkRmllbGRJZCxcbiAgICAgICAgICAgIGlzQ2FyZENvZGVSZXF1aXJlZCxcbiAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRQcm9wLFxuICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkUHJvcCxcbiAgICAgICAgICAgIGxhbmd1YWdlLFxuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgc2V0RmllbGRUb3VjaGVkLFxuICAgICAgICAgICAgc2V0RmllbGRWYWx1ZSxcbiAgICAgICAgICAgIHNldFN1Ym1pdHRlZCxcbiAgICAgICAgICAgIHN1Ym1pdEZvcm0sXG4gICAgICAgIF0sXG4gICAgKTtcblxuICAgIHJldHVybiB7IGdldEhvc3RlZFN0b3JlZENhcmRWYWxpZGF0aW9uRmllbGRzZXQsIGdldEhvc3RlZEZvcm1PcHRpb25zIH07XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/hosted-credit-card-integration/src/hooks/useHostedCreditCard.tsx\n\n}");

/***/ }),

/***/ "./packages/worldpay-access-integration/src/WorldpayCreditCardPaymentMethod.tsx":
/*!**************************************************************************************!*\
  !*** ./packages/worldpay-access-integration/src/WorldpayCreditCardPaymentMethod.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_worldpayaccess__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/worldpayaccess */ \"../checkout-sdk-js/dist/esm/integrations/worldpayaccess.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _bigcommerce_checkout_credit_card_integration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/credit-card-integration */ \"./packages/credit-card-integration/src/CreditCardPaymentMethodContainer.tsx\");\n/* harmony import */ var _bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-credit-card-integration */ \"./packages/hosted-credit-card-integration/src/hooks/useHostedCreditCard.tsx\");\n/* harmony import */ var _bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-credit-card-integration */ \"./packages/hosted-credit-card-integration/src/components/getHostedInstrumentValidationSchema/getHostedInstrumentValidationSchema.ts\");\n/* harmony import */ var _bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-credit-card-integration */ \"./packages/hosted-credit-card-integration/src/components/getHostedCreditCardValidationSchema/getHostedCreditCardValidationSchema.ts\");\n/* harmony import */ var _bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-credit-card-integration */ \"./packages/hosted-credit-card-integration/src/components/HostedCreditCardFieldset/HostedCreditCardFieldset.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/creditCard/getCreditCardInputStyles/getCreditCardInputStyles.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/creditCard/CreditCardCustomerCodeField.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/modal/Modal.tsx\");\n\n\n\n\n\n\n\n\n\nconst WorldpayCreditCardPaymentMethod = (_a) => {\n    var { language, paymentForm, checkoutState, checkoutService, method } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"language\", \"paymentForm\", \"checkoutState\", \"checkoutService\", \"method\"]);\n    const [threeDSecureVerification, setThreeDSecureVerification] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();\n    const [focusedFieldType, setFocusedFieldType] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();\n    const { getHostedStoredCardValidationFieldset } = (0,_bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_5__.useHostedCreditCard)({\n        checkoutState,\n        method,\n        language,\n        paymentForm,\n    });\n    const { setFieldTouched, setFieldValue, setSubmitted, submitForm } = paymentForm;\n    const isInstrumentCardCodeRequiredProp = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(checkoutState);\n    const isInstrumentCardNumberRequiredProp = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(checkoutState);\n    const { config: { cardCode }, } = method;\n    const isCardCodeRequired = cardCode || cardCode === null;\n    const getHostedFieldId = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((name) => {\n        return `${(0,lodash__WEBPACK_IMPORTED_MODULE_2__.compact)([method.gateway, method.id]).join('-')}-${name}`;\n    }, [method]);\n    const hostedStoredCardValidationSchema = (0,_bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_6__[\"default\"])({ language });\n    const ref = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)({\n        paymentPageContentRef: (0,react__WEBPACK_IMPORTED_MODULE_3__.createRef)(),\n    });\n    const getHostedFormOptions = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        const styleProps = ['color', 'fontFamily', 'fontSize', 'fontWeight'];\n        const isInstrumentCardNumberRequired = selectedInstrument\n            ? isInstrumentCardNumberRequiredProp(selectedInstrument)\n            : false;\n        const isInstrumentCardCodeRequired = selectedInstrument\n            ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n            : false;\n        const styleContainerId = selectedInstrument\n            ? isInstrumentCardCodeRequired\n                ? getHostedFieldId('ccCvv')\n                : undefined\n            : getHostedFieldId('ccNumber');\n        return {\n            fields: selectedInstrument\n                ? {\n                    cardCodeVerification: isInstrumentCardCodeRequired && selectedInstrument\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_cvv_label'),\n                            containerId: getHostedFieldId('ccCvv'),\n                            instrumentId: selectedInstrument.bigpayToken,\n                        }\n                        : undefined,\n                    cardNumberVerification: isInstrumentCardNumberRequired && selectedInstrument\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_number_label'),\n                            containerId: getHostedFieldId('ccNumber'),\n                            instrumentId: selectedInstrument.bigpayToken,\n                        }\n                        : undefined,\n                }\n                : {\n                    cardCode: isCardCodeRequired\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_cvv_label'),\n                            containerId: getHostedFieldId('ccCvv'),\n                        }\n                        : undefined,\n                    cardExpiry: {\n                        accessibilityLabel: language.translate('payment.credit_card_expiration_label'),\n                        containerId: getHostedFieldId('ccExpiry'),\n                        placeholder: language.translate('payment.credit_card_expiration_placeholder_text'),\n                    },\n                    cardName: {\n                        accessibilityLabel: language.translate('payment.credit_card_name_label'),\n                        containerId: getHostedFieldId('ccName'),\n                    },\n                    cardNumber: {\n                        accessibilityLabel: language.translate('payment.credit_card_number_label'),\n                        containerId: getHostedFieldId('ccNumber'),\n                    },\n                },\n            styles: styleContainerId\n                ? {\n                    default: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(styleContainerId, styleProps),\n                    error: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(styleContainerId, styleProps, _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__.CreditCardInputStylesType.Error),\n                    focus: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(styleContainerId, styleProps, _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__.CreditCardInputStylesType.Focus),\n                }\n                : {},\n            onBlur: ({ fieldType }) => {\n                if (focusedFieldType === fieldType) {\n                    setFocusedFieldType(undefined);\n                }\n            },\n            onCardTypeChange: ({ cardType }) => {\n                setFieldValue('hostedForm.cardType', cardType);\n            },\n            onEnter: () => {\n                setSubmitted(true);\n                submitForm();\n            },\n            onFocus: ({ fieldType }) => {\n                setFocusedFieldType(fieldType);\n            },\n            onValidate: ({ errors = {} }) => {\n                (0,lodash__WEBPACK_IMPORTED_MODULE_2__.forIn)(errors, (fieldErrors = [], fieldType) => {\n                    var _a, _b;\n                    const errorKey = `hostedForm.errors.${fieldType}`;\n                    setFieldValue(errorKey, (_b = (_a = fieldErrors[0]) === null || _a === void 0 ? void 0 : _a.type) !== null && _b !== void 0 ? _b : '');\n                    if (fieldErrors[0]) {\n                        setFieldTouched(errorKey);\n                    }\n                });\n            },\n        };\n    }), [\n        focusedFieldType,\n        getHostedFieldId,\n        isCardCodeRequired,\n        isInstrumentCardCodeRequiredProp,\n        isInstrumentCardNumberRequiredProp,\n        language,\n        method,\n        setFieldValue,\n        setFieldTouched,\n        setFocusedFieldType,\n        setSubmitted,\n        submitForm,\n    ]);\n    const cancelWorldpayModalFlow = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n        setThreeDSecureVerification(undefined);\n        if (ref.current.cancelThreeDSecureVerification) {\n            ref.current.cancelThreeDSecureVerification();\n            ref.current.cancelThreeDSecureVerification = undefined;\n        }\n    }, []);\n    const initializeWorldpayPayment = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((options, selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        return checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_worldpayaccess__WEBPACK_IMPORTED_MODULE_1__.createWorldpayAccessPaymentStrategy], creditCard: {\n                form: getHostedFormOptions && (yield getHostedFormOptions(selectedInstrument)),\n            }, worldpay: {\n                onLoad(content, cancel) {\n                    setThreeDSecureVerification(content);\n                    ref.current.cancelThreeDSecureVerification = cancel;\n                },\n            } }));\n    }), [checkoutService, getHostedFormOptions]);\n    const hostedValidationSchema = (0,_bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_7__[\"default\"])({ language });\n    const appendPaymentPageContent = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n        var _a;\n        if (threeDSecureVerification) {\n            (_a = ref.current.paymentPageContentRef.current) === null || _a === void 0 ? void 0 : _a.appendChild(threeDSecureVerification);\n        }\n    }, [threeDSecureVerification]);\n    return (react__WEBPACK_IMPORTED_MODULE_3___default().createElement((react__WEBPACK_IMPORTED_MODULE_3___default().Fragment), null,\n        react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_credit_card_integration__WEBPACK_IMPORTED_MODULE_4__[\"default\"], Object.assign({}, rest, { cardFieldset: react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_8__[\"default\"], { additionalFields: method.config.requireCustomerCode && (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_10__[\"default\"], { name: \"ccCustomerCode\" })), cardCodeId: isCardCodeRequired ? getHostedFieldId('ccCvv') : undefined, cardExpiryId: getHostedFieldId('ccExpiry'), cardNameId: getHostedFieldId('ccName'), cardNumberId: getHostedFieldId('ccNumber'), focusedFieldType: focusedFieldType }), cardValidationSchema: hostedValidationSchema, checkoutService: checkoutService, checkoutState: checkoutState, deinitializePayment: checkoutService.deinitializePayment, getStoredCardValidationFieldset: getHostedStoredCardValidationFieldset, initializePayment: initializeWorldpayPayment, language: language, method: method, paymentForm: paymentForm, storedCardValidationSchema: hostedStoredCardValidationSchema })),\n        react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_14__[\"default\"], { isOpen: !!threeDSecureVerification, onAfterOpen: appendPaymentPageContent, onRequestClose: cancelWorldpayModalFlow, shouldShowCloseButton: true },\n            react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { ref: ref.current.paymentPageContentRef }))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(WorldpayCreditCardPaymentMethod, [{ id: 'worldpayaccess' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy93b3JsZHBheS1hY2Nlc3MtaW50ZWdyYXRpb24vc3JjL1dvcmxkcGF5Q3JlZGl0Q2FyZFBheW1lbnRNZXRob2QudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLNEc7QUFDcEU7QUFRekI7QUFFa0Y7QUFNbkM7QUFPZDtBQUtPO0FBQ047QUFPakQsTUFBTSwrQkFBK0IsR0FBMEMsQ0FBQyxFQU8vRSxFQUFFLEVBQUU7UUFQMkUsRUFDNUUsUUFBUSxFQUNSLFdBQVcsRUFDWCxhQUFhLEVBQ2IsZUFBZSxFQUNmLE1BQU0sT0FFVCxFQURNLElBQUkscURBTnFFLHlFQU8vRSxDQURVO0lBRVAsTUFBTSxDQUFDLHdCQUF3QixFQUFFLDJCQUEyQixDQUFDLEdBQUcsK0NBQVEsRUFBZSxDQUFDO0lBQ3hGLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxtQkFBbUIsQ0FBQyxHQUFHLCtDQUFRLEVBQVUsQ0FBQztJQUNuRSxNQUFNLEVBQUUscUNBQXFDLEVBQUUsR0FBRyx5R0FBbUIsQ0FBQztRQUNsRSxhQUFhO1FBQ2IsTUFBTTtRQUNOLFFBQVE7UUFDUixXQUFXO0tBQ2QsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxHQUFHLFdBQVcsQ0FBQztJQUVqRixNQUFNLGdDQUFnQyxHQUFHLG1GQUFvQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQzdGLE1BQU0sa0NBQWtDLEdBQ3BDLG1GQUFzQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBRTFELE1BQU0sRUFDRixNQUFNLEVBQUUsRUFBRSxRQUFRLEVBQUUsR0FDdkIsR0FBRyxNQUFNLENBQUM7SUFDWCxNQUFNLGtCQUFrQixHQUFHLFFBQVEsSUFBSSxRQUFRLEtBQUssSUFBSSxDQUFDO0lBQ3pELE1BQU0sZ0JBQWdCLEdBQTZCLGtEQUFXLENBQzFELENBQUMsSUFBSSxFQUFFLEVBQUU7UUFDTCxPQUFPLEdBQUcsK0NBQU8s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QWUsQ0FBQyxtQkFBbUIsRUFDeEQsK0JBQStCLEVBQUUscUNBQXFDLEVBQ3RFLGlCQUFpQixFQUFFLHlCQUF5QixFQUM1QyxRQUFRLEVBQUUsUUFBUSxFQUNsQixNQUFNLEVBQUUsTUFBTSxFQUNkLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLDBCQUEwQixFQUFFLGdDQUFnQyxJQUM5RDtRQUNGLDJEQUFDLGlFQUFLLElBQ0YsTUFBTSxFQUFFLENBQUMsQ0FBQyx3QkFBd0IsRUFDbEMsV0FBVyxFQUFFLHdCQUF3QixFQUNyQyxjQUFjLEVBQUUsdUJBQXVCLEVBQ3ZDLHFCQUFxQixFQUFFLElBQUk7WUFFM0Isb0VBQUssR0FBRyxFQUFFLEdBQUcsQ0FBQyxPQUFPLENBQUMscUJBQXFCLEdBQUksQ0FDM0MsQ0FDVCxDQUNOLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSwwRkFBcUIsQ0FDaEMsK0JBQStCLEVBQy9CLENBQUMsRUFBRSxFQUFFLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQyxDQUM3QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy93b3JsZHBheS1hY2Nlc3MtaW50ZWdyYXRpb24vc3JjL1dvcmxkcGF5Q3JlZGl0Q2FyZFBheW1lbnRNZXRob2QudHN4PzRhMjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICB0eXBlIENhcmRJbnN0cnVtZW50LFxuICAgIHR5cGUgTGVnYWN5SG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgdHlwZSBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsnO1xuaW1wb3J0IHsgY3JlYXRlV29ybGRwYXlBY2Nlc3NQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2ludGVncmF0aW9ucy93b3JsZHBheWFjY2Vzcyc7XG5pbXBvcnQgeyBjb21wYWN0LCBmb3JJbiB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHtcbiAgICBjcmVhdGVSZWYsXG4gICAgdHlwZSBGdW5jdGlvbkNvbXBvbmVudCxcbiAgICB0eXBlIFJlZk9iamVjdCxcbiAgICB1c2VDYWxsYmFjayxcbiAgICB1c2VSZWYsXG4gICAgdXNlU3RhdGUsXG59IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgQ3JlZGl0Q2FyZFBheW1lbnRNZXRob2RDb21wb25lbnQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHtcbiAgICBnZXRIb3N0ZWRDcmVkaXRDYXJkVmFsaWRhdGlvblNjaGVtYSxcbiAgICBnZXRIb3N0ZWRJbnN0cnVtZW50VmFsaWRhdGlvblNjaGVtYSxcbiAgICBIb3N0ZWRDcmVkaXRDYXJkRmllbGRzZXQsXG4gICAgdXNlSG9zdGVkQ3JlZGl0Q2FyZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2hvc3RlZC1jcmVkaXQtY2FyZC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIENyZWRpdENhcmRDdXN0b21lckNvZGVGaWVsZCxcbiAgICBDcmVkaXRDYXJkSW5wdXRTdHlsZXNUeXBlLFxuICAgIGdldENyZWRpdENhcmRJbnB1dFN0eWxlcyxcbiAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkU2VsZWN0b3IsXG4gICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkU2VsZWN0b3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9pbnN0cnVtZW50LXV0aWxzJztcbmltcG9ydCB7XG4gICAgdHlwZSBQYXltZW50TWV0aG9kUHJvcHMsXG4gICAgdHlwZSBQYXltZW50TWV0aG9kUmVzb2x2ZUlkLFxuICAgIHRvUmVzb2x2YWJsZUNvbXBvbmVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IE1vZGFsIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3VpJztcblxuaW50ZXJmYWNlIFdvcmxkcGF5UGF5bWVudE1ldGhvZFJlZiB7XG4gICAgcGF5bWVudFBhZ2VDb250ZW50UmVmOiBSZWZPYmplY3Q8SFRNTERpdkVsZW1lbnQ+O1xuICAgIGNhbmNlbFRocmVlRFNlY3VyZVZlcmlmaWNhdGlvbj8oKTogdm9pZDtcbn1cblxuY29uc3QgV29ybGRwYXlDcmVkaXRDYXJkUGF5bWVudE1ldGhvZDogRnVuY3Rpb25Db21wb25lbnQ8UGF5bWVudE1ldGhvZFByb3BzPiA9ICh7XG4gICAgbGFuZ3VhZ2UsXG4gICAgcGF5bWVudEZvcm0sXG4gICAgY2hlY2tvdXRTdGF0ZSxcbiAgICBjaGVja291dFNlcnZpY2UsXG4gICAgbWV0aG9kLFxuICAgIC4uLnJlc3Rcbn0pID0+IHtcbiAgICBjb25zdCBbdGhyZWVEU2VjdXJlVmVyaWZpY2F0aW9uLCBzZXRUaHJlZURTZWN1cmVWZXJpZmljYXRpb25dID0gdXNlU3RhdGU8SFRNTEVsZW1lbnQ+KCk7XG4gICAgY29uc3QgW2ZvY3VzZWRGaWVsZFR5cGUsIHNldEZvY3VzZWRGaWVsZFR5cGVdID0gdXNlU3RhdGU8c3RyaW5nPigpO1xuICAgIGNvbnN0IHsgZ2V0SG9zdGVkU3RvcmVkQ2FyZFZhbGlkYXRpb25GaWVsZHNldCB9ID0gdXNlSG9zdGVkQ3JlZGl0Q2FyZCh7XG4gICAgICAgIGNoZWNrb3V0U3RhdGUsXG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgIHBheW1lbnRGb3JtLFxuICAgIH0pO1xuICAgIGNvbnN0IHsgc2V0RmllbGRUb3VjaGVkLCBzZXRGaWVsZFZhbHVlLCBzZXRTdWJtaXR0ZWQsIHN1Ym1pdEZvcm0gfSA9IHBheW1lbnRGb3JtO1xuXG4gICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFByb3AgPSBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkU2VsZWN0b3IoY2hlY2tvdXRTdGF0ZSk7XG4gICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkUHJvcCA9XG4gICAgICAgIGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpO1xuXG4gICAgY29uc3Qge1xuICAgICAgICBjb25maWc6IHsgY2FyZENvZGUgfSxcbiAgICB9ID0gbWV0aG9kO1xuICAgIGNvbnN0IGlzQ2FyZENvZGVSZXF1aXJlZCA9IGNhcmRDb2RlIHx8IGNhcmRDb2RlID09PSBudWxsO1xuICAgIGNvbnN0IGdldEhvc3RlZEZpZWxkSWQ6IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZyA9IHVzZUNhbGxiYWNrKFxuICAgICAgICAobmFtZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGAke2NvbXBhY3QoW21ldGhvZC5nYXRld2F5LCBtZXRob2QuaWRdKS5qb2luKCctJyl9LSR7bmFtZX1gO1xuICAgICAgICB9LFxuICAgICAgICBbbWV0aG9kXSxcbiAgICApO1xuXG4gICAgY29uc3QgaG9zdGVkU3RvcmVkQ2FyZFZhbGlkYXRpb25TY2hlbWEgPSBnZXRIb3N0ZWRJbnN0cnVtZW50VmFsaWRhdGlvblNjaGVtYSh7IGxhbmd1YWdlIH0pO1xuXG4gICAgY29uc3QgcmVmID0gdXNlUmVmPFdvcmxkcGF5UGF5bWVudE1ldGhvZFJlZj4oe1xuICAgICAgICBwYXltZW50UGFnZUNvbnRlbnRSZWY6IGNyZWF0ZVJlZigpLFxuICAgIH0pO1xuICAgIGNvbnN0IGdldEhvc3RlZEZvcm1PcHRpb25zOiAoXG4gICAgICAgIHNlbGVjdGVkSW5zdHJ1bWVudD86IENhcmRJbnN0cnVtZW50LFxuICAgICkgPT4gUHJvbWlzZTxMZWdhY3lIb3N0ZWRGb3JtT3B0aW9ucz4gPSB1c2VDYWxsYmFjayhcbiAgICAgICAgYXN5bmMgKHNlbGVjdGVkSW5zdHJ1bWVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVQcm9wcyA9IFsnY29sb3InLCAnZm9udEZhbWlseScsICdmb250U2l6ZScsICdmb250V2VpZ2h0J107XG4gICAgICAgICAgICBjb25zdCBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWQgPSBzZWxlY3RlZEluc3RydW1lbnRcbiAgICAgICAgICAgICAgICA/IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFByb3Aoc2VsZWN0ZWRJbnN0cnVtZW50KVxuICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkID0gc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgPyBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkUHJvcChzZWxlY3RlZEluc3RydW1lbnQsIG1ldGhvZClcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVDb250YWluZXJJZCA9IHNlbGVjdGVkSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgID8gaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICA/IGdldEhvc3RlZEZpZWxkSWQoJ2NjQ3Z2JylcbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA6IGdldEhvc3RlZEZpZWxkSWQoJ2NjTnVtYmVyJyk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBzZWxlY3RlZEluc3RydW1lbnRcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRDb2RlVmVyaWZpY2F0aW9uOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCAmJiBzZWxlY3RlZEluc3RydW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfY3Z2X2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY0N2dicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZDogc2VsZWN0ZWRJbnN0cnVtZW50LmJpZ3BheVRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkTnVtYmVyVmVyaWZpY2F0aW9uOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkICYmIHNlbGVjdGVkSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbDogbGFuZ3VhZ2UudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGF5bWVudC5jcmVkaXRfY2FyZF9udW1iZXJfbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IGdldEhvc3RlZEZpZWxkSWQoJ2NjTnVtYmVyJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkOiBzZWxlY3RlZEluc3RydW1lbnQuYmlncGF5VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZENvZGU6IGlzQ2FyZENvZGVSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGF5bWVudC5jcmVkaXRfY2FyZF9jdnZfbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY0N2dicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZEV4cGlyeToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfZXhwaXJhdGlvbl9sYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IGdldEhvc3RlZEZpZWxkSWQoJ2NjRXhwaXJ5JyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogbGFuZ3VhZ2UudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50LmNyZWRpdF9jYXJkX2V4cGlyYXRpb25fcGxhY2Vob2xkZXJfdGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkTmFtZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfbmFtZV9sYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IGdldEhvc3RlZEZpZWxkSWQoJ2NjTmFtZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkTnVtYmVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGF5bWVudC5jcmVkaXRfY2FyZF9udW1iZXJfbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY051bWJlcicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBzdHlsZUNvbnRhaW5lcklkXG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBhd2FpdCBnZXRDcmVkaXRDYXJkSW5wdXRTdHlsZXMoc3R5bGVDb250YWluZXJJZCwgc3R5bGVQcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBhd2FpdCBnZXRDcmVkaXRDYXJkSW5wdXRTdHlsZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVQcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWRpdENhcmRJbnB1dFN0eWxlc1R5cGUuRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzOiBhd2FpdCBnZXRDcmVkaXRDYXJkSW5wdXRTdHlsZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVQcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWRpdENhcmRJbnB1dFN0eWxlc1R5cGUuRm9jdXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHt9LFxuICAgICAgICAgICAgICAgIG9uQmx1cjogKHsgZmllbGRUeXBlIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvY3VzZWRGaWVsZFR5cGUgPT09IGZpZWxkVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Rm9jdXNlZEZpZWxkVHlwZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNhcmRUeXBlQ2hhbmdlOiAoeyBjYXJkVHlwZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldEZpZWxkVmFsdWUoJ2hvc3RlZEZvcm0uY2FyZFR5cGUnLCBjYXJkVHlwZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkVudGVyOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldFN1Ym1pdHRlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0Rm9ybSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25Gb2N1czogKHsgZmllbGRUeXBlIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Rm9jdXNlZEZpZWxkVHlwZShmaWVsZFR5cGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25WYWxpZGF0ZTogKHsgZXJyb3JzID0ge30gfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBmb3JJbihlcnJvcnMsIChmaWVsZEVycm9ycyA9IFtdLCBmaWVsZFR5cGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yS2V5ID0gYGhvc3RlZEZvcm0uZXJyb3JzLiR7ZmllbGRUeXBlfWA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZpZWxkVmFsdWUoZXJyb3JLZXksIGZpZWxkRXJyb3JzWzBdPy50eXBlID8/ICcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkRXJyb3JzWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RmllbGRUb3VjaGVkKGVycm9yS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIGZvY3VzZWRGaWVsZFR5cGUsXG4gICAgICAgICAgICBnZXRIb3N0ZWRGaWVsZElkLFxuICAgICAgICAgICAgaXNDYXJkQ29kZVJlcXVpcmVkLFxuICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFByb3AsXG4gICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRQcm9wLFxuICAgICAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICBzZXRGaWVsZFZhbHVlLFxuICAgICAgICAgICAgc2V0RmllbGRUb3VjaGVkLFxuICAgICAgICAgICAgc2V0Rm9jdXNlZEZpZWxkVHlwZSxcbiAgICAgICAgICAgIHNldFN1Ym1pdHRlZCxcbiAgICAgICAgICAgIHN1Ym1pdEZvcm0sXG4gICAgICAgIF0sXG4gICAgKTtcbiAgICBjb25zdCBjYW5jZWxXb3JsZHBheU1vZGFsRmxvdyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgc2V0VGhyZWVEU2VjdXJlVmVyaWZpY2F0aW9uKHVuZGVmaW5lZCk7XG5cbiAgICAgICAgaWYgKHJlZi5jdXJyZW50LmNhbmNlbFRocmVlRFNlY3VyZVZlcmlmaWNhdGlvbikge1xuICAgICAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsVGhyZWVEU2VjdXJlVmVyaWZpY2F0aW9uKCk7XG4gICAgICAgICAgICByZWYuY3VycmVudC5jYW5jZWxUaHJlZURTZWN1cmVWZXJpZmljYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9LCBbXSk7XG4gICAgY29uc3QgaW5pdGlhbGl6ZVdvcmxkcGF5UGF5bWVudCA9IHVzZUNhbGxiYWNrKFxuICAgICAgICBhc3luYyAob3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCBzZWxlY3RlZEluc3RydW1lbnQ6IENhcmRJbnN0cnVtZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tvdXRTZXJ2aWNlLmluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGludGVncmF0aW9uczogW2NyZWF0ZVdvcmxkcGF5QWNjZXNzUGF5bWVudFN0cmF0ZWd5XSxcbiAgICAgICAgICAgICAgICBjcmVkaXRDYXJkOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm06IGdldEhvc3RlZEZvcm1PcHRpb25zICYmIChhd2FpdCBnZXRIb3N0ZWRGb3JtT3B0aW9ucyhzZWxlY3RlZEluc3RydW1lbnQpKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHdvcmxkcGF5OiB7XG4gICAgICAgICAgICAgICAgICAgIG9uTG9hZChjb250ZW50OiBIVE1MSUZyYW1lRWxlbWVudCwgY2FuY2VsOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaHJlZURTZWN1cmVWZXJpZmljYXRpb24oY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWYuY3VycmVudC5jYW5jZWxUaHJlZURTZWN1cmVWZXJpZmljYXRpb24gPSBjYW5jZWw7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBbY2hlY2tvdXRTZXJ2aWNlLCBnZXRIb3N0ZWRGb3JtT3B0aW9uc10sXG4gICAgKTtcbiAgICBjb25zdCBob3N0ZWRWYWxpZGF0aW9uU2NoZW1hID0gZ2V0SG9zdGVkQ3JlZGl0Q2FyZFZhbGlkYXRpb25TY2hlbWEoeyBsYW5ndWFnZSB9KTtcblxuICAgIGNvbnN0IGFwcGVuZFBheW1lbnRQYWdlQ29udGVudCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgaWYgKHRocmVlRFNlY3VyZVZlcmlmaWNhdGlvbikge1xuICAgICAgICAgICAgcmVmLmN1cnJlbnQucGF5bWVudFBhZ2VDb250ZW50UmVmLmN1cnJlbnQ/LmFwcGVuZENoaWxkKHRocmVlRFNlY3VyZVZlcmlmaWNhdGlvbik7XG4gICAgICAgIH1cbiAgICB9LCBbdGhyZWVEU2VjdXJlVmVyaWZpY2F0aW9uXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgICAgPENyZWRpdENhcmRQYXltZW50TWV0aG9kQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgICAgICAgICAgY2FyZEZpZWxkc2V0PXtcbiAgICAgICAgICAgICAgICAgICAgPEhvc3RlZENyZWRpdENhcmRGaWVsZHNldFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbEZpZWxkcz17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kLmNvbmZpZy5yZXF1aXJlQ3VzdG9tZXJDb2RlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENyZWRpdENhcmRDdXN0b21lckNvZGVGaWVsZCBuYW1lPVwiY2NDdXN0b21lckNvZGVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRDb2RlSWQ9e2lzQ2FyZENvZGVSZXF1aXJlZCA/IGdldEhvc3RlZEZpZWxkSWQoJ2NjQ3Z2JykgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkRXhwaXJ5SWQ9e2dldEhvc3RlZEZpZWxkSWQoJ2NjRXhwaXJ5Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkTmFtZUlkPXtnZXRIb3N0ZWRGaWVsZElkKCdjY05hbWUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmROdW1iZXJJZD17Z2V0SG9zdGVkRmllbGRJZCgnY2NOdW1iZXInKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzZWRGaWVsZFR5cGU9e2ZvY3VzZWRGaWVsZFR5cGV9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhcmRWYWxpZGF0aW9uU2NoZW1hPXtob3N0ZWRWYWxpZGF0aW9uU2NoZW1hfVxuICAgICAgICAgICAgICAgIGNoZWNrb3V0U2VydmljZT17Y2hlY2tvdXRTZXJ2aWNlfVxuICAgICAgICAgICAgICAgIGNoZWNrb3V0U3RhdGU9e2NoZWNrb3V0U3RhdGV9XG4gICAgICAgICAgICAgICAgZGVpbml0aWFsaXplUGF5bWVudD17Y2hlY2tvdXRTZXJ2aWNlLmRlaW5pdGlhbGl6ZVBheW1lbnR9XG4gICAgICAgICAgICAgICAgZ2V0U3RvcmVkQ2FyZFZhbGlkYXRpb25GaWVsZHNldD17Z2V0SG9zdGVkU3RvcmVkQ2FyZFZhbGlkYXRpb25GaWVsZHNldH1cbiAgICAgICAgICAgICAgICBpbml0aWFsaXplUGF5bWVudD17aW5pdGlhbGl6ZVdvcmxkcGF5UGF5bWVudH1cbiAgICAgICAgICAgICAgICBsYW5ndWFnZT17bGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgbWV0aG9kPXttZXRob2R9XG4gICAgICAgICAgICAgICAgcGF5bWVudEZvcm09e3BheW1lbnRGb3JtfVxuICAgICAgICAgICAgICAgIHN0b3JlZENhcmRWYWxpZGF0aW9uU2NoZW1hPXtob3N0ZWRTdG9yZWRDYXJkVmFsaWRhdGlvblNjaGVtYX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8TW9kYWxcbiAgICAgICAgICAgICAgICBpc09wZW49eyEhdGhyZWVEU2VjdXJlVmVyaWZpY2F0aW9ufVxuICAgICAgICAgICAgICAgIG9uQWZ0ZXJPcGVuPXthcHBlbmRQYXltZW50UGFnZUNvbnRlbnR9XG4gICAgICAgICAgICAgICAgb25SZXF1ZXN0Q2xvc2U9e2NhbmNlbFdvcmxkcGF5TW9kYWxGbG93fVxuICAgICAgICAgICAgICAgIHNob3VsZFNob3dDbG9zZUJ1dHRvbj17dHJ1ZX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj17cmVmLmN1cnJlbnQucGF5bWVudFBhZ2VDb250ZW50UmVmfSAvPlxuICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgPC8+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZUNvbXBvbmVudDxQYXltZW50TWV0aG9kUHJvcHMsIFBheW1lbnRNZXRob2RSZXNvbHZlSWQ+KFxuICAgIFdvcmxkcGF5Q3JlZGl0Q2FyZFBheW1lbnRNZXRob2QsXG4gICAgW3sgaWQ6ICd3b3JsZHBheWFjY2VzcycgfV0sXG4pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/worldpay-access-integration/src/WorldpayCreditCardPaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/worldpay-access-integration/src/index.ts":
/*!***********************************************************!*\
  !*** ./packages/worldpay-access-integration/src/index.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WorldpayCreditCardPaymentMethod: () => (/* reexport safe */ _WorldpayCreditCardPaymentMethod__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _WorldpayCreditCardPaymentMethod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WorldpayCreditCardPaymentMethod */ \"./packages/worldpay-access-integration/src/WorldpayCreditCardPaymentMethod.tsx\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy93b3JsZHBheS1hY2Nlc3MtaW50ZWdyYXRpb24vc3JjL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy93b3JsZHBheS1hY2Nlc3MtaW50ZWdyYXRpb24vc3JjL2luZGV4LnRzPzgzOTYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgZGVmYXVsdCBhcyBXb3JsZHBheUNyZWRpdENhcmRQYXltZW50TWV0aG9kIH0gZnJvbSAnLi9Xb3JsZHBheUNyZWRpdENhcmRQYXltZW50TWV0aG9kJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/worldpay-access-integration/src/index.ts\n\n}");

/***/ })

}]);
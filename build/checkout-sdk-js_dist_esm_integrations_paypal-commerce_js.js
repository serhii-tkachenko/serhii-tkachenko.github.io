"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["checkout-sdk-js_dist_esm_integrations_paypal-commerce_js"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/paypal-commerce.js":
/*!*******************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/paypal-commerce.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPayPalCommerceAlternativeMethodsButtonStrategy: () => (/* binding */ mt),\n/* harmony export */   createPayPalCommerceAlternativeMethodsPaymentStrategy: () => (/* binding */ je),\n/* harmony export */   createPayPalCommerceButtonStrategy: () => (/* binding */ rt),\n/* harmony export */   createPayPalCommerceCreditButtonStrategy: () => (/* binding */ dt),\n/* harmony export */   createPayPalCommerceCreditCardsPaymentStrategy: () => (/* binding */ Ke),\n/* harmony export */   createPayPalCommerceCreditCustomerStrategy: () => (/* binding */ $),\n/* harmony export */   createPayPalCommerceCreditPaymentStrategy: () => (/* binding */ ze),\n/* harmony export */   createPayPalCommerceCustomerStrategy: () => (/* binding */ V),\n/* harmony export */   createPayPalCommerceFastlaneCustomerStrategy: () => (/* binding */ ue),\n/* harmony export */   createPayPalCommerceFastlanePaymentStrategy: () => (/* binding */ it),\n/* harmony export */   createPayPalCommercePaymentStrategy: () => (/* binding */ ke),\n/* harmony export */   createPayPalCommerceRatePayPaymentStrategy: () => (/* binding */ Ze),\n/* harmony export */   createPayPalCommerceVenmoButtonStrategy: () => (/* binding */ pt),\n/* harmony export */   createPayPalCommerceVenmoCustomerStrategy: () => (/* binding */ G),\n/* harmony export */   createPayPalCommerceVenmoPaymentStrategy: () => (/* binding */ De)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"../checkout-sdk-js/node_modules/@bigcommerce/form-poster/lib/index.js\");\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"../checkout-sdk-js/node_modules/@bigcommerce/request-sender/esm/index.js\");\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\nvar l,c={};function p(e,t){return console.log(\"resolveIds\",t),Object.assign(e,{resolveIds:t})}c.d=(e,t)=>{for(var i in t)c.o(t,i)&&!c.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class u extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class h extends u{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(l||(l={}));class m extends u{constructor(e){super(function(e){switch(e){case l.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case l.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case l.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case l.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case l.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case l.MissingCheckoutConfig:case l.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case l.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case l.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case l.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case l.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case l.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case l.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class y extends u{constructor(e){super(e||\"An unexpected error has occurred during buy now cart creation process. Please try again later.\"),this.name=\"BuyNowCartCreationError\",this.type=\"buy_now_cart_creation_error\"}}const g={body:{},headers:{},status:0};class v extends u{constructor(e,{message:t,errors:i}={}){const{body:n,headers:o,status:r}=e||g;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=n,this.headers=o,this.status=r,this.errors=i||[]}}var f,S,I,C,b,w,P,O;!function(e){e.BuyNow=\"BUY_NOW\"}(f||(f={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(S||(S={})),function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(I||(I={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(C||(C={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(b||(b={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(w||(w={})),function(e){e.OXXO=\"oxxo\"}(P||(P={})),function(e){e.Approved=\"APPROVED\",e.Created=\"CREATED\",e.PayerActionRequired=\"PAYER_ACTION_REQUIRED\",e.PollingStop=\"POLLING_STOP\",e.PollingError=\"POLLING_ERROR\"}(O||(O={}));var k=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class A{constructor(e,t,i,n){this.formPoster=e,this.paymentIntegrationService=t,this.paypalCommerceRequestSender=i,this.paypalCommerceScriptLoader=n}loadPayPalSdk(e,t,i,n){return k(this,void 0,void 0,function*(){const o=this.paymentIntegrationService.getState(),r=t||o.getCartOrThrow().currency.code,a=o.getPaymentMethodOrThrow(e);return this.paypalSdk=yield this.paypalCommerceScriptLoader.getPayPalSDK(a,r,i,n),this.paypalSdk})}getPayPalSdkOrThrow(){if(!this.paypalSdk)throw new h;return this.paypalSdk}createBuyNowCartOrThrow(e){return k(this,void 0,void 0,function*(){const t=e.getBuyNowCartRequestBody();if(!t)throw new m(l.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(t)}catch(e){throw new y}})}createOrder(e,t){return k(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n}=yield this.paypalCommerceRequestSender.createOrder(e,Object.assign({cartId:i},t));return n})}createOrderCardFields(e,t){return k(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n,setupToken:o}=yield this.paypalCommerceRequestSender.createOrder(e,Object.assign({cartId:i},t));return Object.assign({orderId:n},o?{setupToken:o}:{})})}updateOrder(){return k(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getConsignmentsOrThrow()[0];try{yield this.paypalCommerceRequestSender.updateOrder({availableShippingOptions:i.availableShippingOptions,cartId:t.id,selectedShippingOption:i.selectedShippingOption})}catch(e){throw new v}})}getOrderStatus(e,t){return k(this,void 0,void 0,function*(){try{const{status:i}=yield this.paypalCommerceRequestSender.getOrderStatus(e,t);return i}catch(e){throw new v}})}tokenizePayment(e,t){const i=this.paymentIntegrationService.getState().getCartOrThrow();if(!t)throw new m(l.MissingOrderId);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",action:\"set_external_checkout\",provider:e,order_id:t},i.source===f.BuyNow&&{cart_id:i.id}))}submitPayment(e,t,i){return k(this,void 0,void 0,function*(){const n={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:e,paypal_account:{order_id:t}}};yield this.paymentIntegrationService.submitPayment(Object.assign({methodId:e,paymentData:n},i?{gatewayId:i}:{}))})}getShippingOptionOrThrow(e){const t=this.paymentIntegrationService.getState().getConsignmentsOrThrow()[0],i=t.availableShippingOptions||[],n=i.find(e=>e.isRecommended),o=(e?i.find(t=>t.id===e):i.find(e=>{var i;return e.id===(null===(i=t.selectedShippingOption)||void 0===i?void 0:i.id)}))||n||i[0];if(!o)throw new Error(\"Your order can't be shipped to this address\");return o}getAddress(e){return{firstName:(null==e?void 0:e.firstName)||\"\",lastName:(null==e?void 0:e.lastName)||\"\",email:(null==e?void 0:e.email)||\"\",phone:(null==e?void 0:e.phone)||\"\",company:\"\",address1:(null==e?void 0:e.address1)||\"\",address2:(null==e?void 0:e.address2)||\"\",city:(null==e?void 0:e.city)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",stateOrProvince:\"\",stateOrProvinceCode:(null==e?void 0:e.stateOrProvinceCode)||\"\",customFields:[]}}getBillingAddressFromOrderDetails({payer:e}){var t,i;return this.getAddress({firstName:e.name.given_name,lastName:e.name.surname,email:e.email_address,address1:e.address.address_line_1,address2:e.address.address_line_2,city:e.address.admin_area_2,countryCode:e.address.country_code,postalCode:e.address.postal_code,stateOrProvinceCode:e.address.admin_area_1,phone:null===(i=null===(t=e.phone)||void 0===t?void 0:t.phone_number)||void 0===i?void 0:i.national_number})}getShippingAddressFromOrderDetails(e){const{payer:t,purchase_units:i}=e,{address:n,name:{full_name:o}}=i[0].shipping,[r,...a]=o.split(\" \");return this.getAddress({firstName:r,lastName:a.join(\" \"),email:t.email_address,address1:n.address_line_1,address2:n.address_line_2,city:n.admin_area_2,countryCode:n.country_code,postalCode:n.postal_code,stateOrProvinceCode:n.admin_area_1})}getValidButtonStyle(e){const{color:t,height:i,label:n,shape:o}=e||{},a={color:t&&b[t]?t:void 0,height:this.getValidHeight(i),label:n&&C[n]?n:void 0,shape:o&&w[o]?o:void 0};return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(a,lodash__WEBPACK_IMPORTED_MODULE_3__.isNil)}getValidHeight(e){return e&&\"number\"==typeof e?e>55?55:e<25?25:e:40}removeElement(e){const t=e&&document.getElementById(e);t&&(t.style.display=\"none\")}}const E=\"This API endpoint is for internal use only and may change in the future\";var T;!function(e){e.Json=\"application/json\",e.JsonV1=\"application/vnd.bc.v1+json\"}(T||(T={}));const z=T,F={\"X-Checkout-SDK-Version\":\"1.819.0\"};var B=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class D{constructor(e){this.requestSender=e}createOrder(e,t){return B(this,void 0,void 0,function*(){const i=`/api/storefront/payment/${e}`,n=t,o=Object.assign({\"X-API-INTERNAL\":E,\"Content-Type\":z.Json},F);return(yield this.requestSender.post(i,{headers:o,body:n})).body})}updateOrder(e){return B(this,void 0,void 0,function*(){const t=e,i=Object.assign({\"X-API-INTERNAL\":E,\"Content-Type\":z.Json},F);return(yield this.requestSender.put(\"/api/storefront/initialization/paypalcommerce\",{headers:i,body:t})).body})}getOrderStatus(e=\"paypalcommerce\",t){return B(this,void 0,void 0,function*(){const i=`/api/storefront/initialization/${e}`,n=Object.assign({\"X-API-INTERNAL\":E,\"Content-Type\":z.Json},F);return(yield this.requestSender.get(i,Object.assign({headers:n},t))).body})}}var M=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class x{constructor(e){this.scriptLoader=e,this.window=window}getPayPalSDK(e,t,i,n){return M(this,void 0,void 0,function*(){const o=this.getPayPalSdkScriptConfigOrThrow(e,t,i);return this.loadPayPalSDK(o,n)})}loadPayPalSDK(e,t=!1){return M(this,void 0,void 0,function*(){if(!this.window.paypal||t){const t=this.transformConfig(e.options),i=this.transformConfig(e.attributes),n=`https://www.paypal.com/sdk/js?${new URLSearchParams(t).toString()}`;yield this.scriptLoader.loadScript(n,{async:!0,attributes:i})}if(!this.window.paypal)throw new h;return this.window.paypal})}getPayPalSdkScriptConfigOrThrow(e,t,i=!0){const{id:n,clientToken:o,initializationData:r}=e;if(!(null==r?void 0:r.clientId))throw new m(l.MissingPaymentMethod);const{intent:a,clientId:s,merchantId:d,buyerCountry:c,attributionId:p,isVenmoEnabled:u,isHostedCheckoutEnabled:h,isPayPalCreditAvailable:y,isDeveloperModeApplicable:g,availableAlternativePaymentMethods:v=[],enabledAlternativePaymentMethods:f=[],isGooglePayEnabled:S}=r,I=h||i,C=\"paypalcommercecreditcards\"===n,b=C?[\"card\"]:[],w=y?[\"credit\",\"paylater\"]:[],P=i||!I,O=u?[\"venmo\"]:[],k=P?f:[],A=S?[\"googlepay\"]:[],E=i?[\"card-fields\"]:[],T=[...C?[]:[\"card\"],...y?[]:[\"credit\",\"paylater\"],...u?[]:[\"venmo\"],...P?v.filter(e=>!f.includes(e)):v],z=[...b,...w,...O,...k];return{options:Object.assign({\"client-id\":s,\"merchant-id\":d,\"enable-funding\":z.length>0?z:void 0,\"disable-funding\":T.length>0?T:void 0,commit:I,components:[\"buttons\",\"hosted-fields\",\"payment-fields\",\"legal\",...A,...E],currency:t,intent:a},g&&{\"buyer-country\":c}),attributes:{\"data-partner-attribution-id\":p,\"data-client-token\":o}}}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}const N=i=>{const{getHost:o}=i.getState();return new A((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__.createFormPoster)(),i,new D((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_1__.createRequestSender)({host:o()})),new x((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__.getScriptLoader)()))};class U extends u{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}var j=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class _{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return j(this,void 0,void 0,function*(){const{paypalcommerce:t,methodId:i}=e;if(!i)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new U('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');if(!t.container)throw new U('Unable to initialize payment because \"options.paypalcommerce.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new U('Unable to initialize payment because \"options.paypalcommerce.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.paypalCommerceIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return j(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signInCustomer(e,t),Promise.resolve()})}signOut(e){return j(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){var i,n;const{container:o,onClick:r,onComplete:a}=t,s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:l,paymentButtonStyles:c,isAppSwitchEnabled:p}=d.initializationData||{},{checkoutTopButtonStyles:u}=c||{},h=Object.assign(Object.assign(Object.assign({},this.isPaypalCommerceAppSwitchEnabled(e)&&{appSwitchWhenAvailable:!0}),{createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommerce\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)}),r&&{onClick:()=>r()}),m=Object.assign(Object.assign({},!p&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,a)}),y=Object.assign(Object.assign({fundingSource:s.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},u),{height:36}))},h),l&&m),g=s.Buttons(y);g.isEligible()?(null===(i=g.hasReturned)||void 0===i?void 0:i.call(g))&&this.isPaypalCommerceAppSwitchEnabled(e)?null===(n=g.resume)||void 0===n||n.call(g):g.render(`#${o}`):this.paypalCommerceIntegrationService.removeElement(o)}onHostedCheckoutApprove(e,t,i,n){return j(this,void 0,void 0,function*(){if(!e.orderID)throw new m(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return j(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return j(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}isPaypalCommerceAppSwitchEnabled(e){var t;return(null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)||!1}}const V=p(e=>new _(e,N(e)),[{id:\"paypalcommerce\"}]);var R=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class L{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return R(this,void 0,void 0,function*(){const{paypalcommercecredit:t,methodId:i}=e;if(!i)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new U('Unable to initialize payment because \"options.paypalcommercecredit\" argument is not provided.');if(!t.container)throw new U('Unable to initialize payment because \"options.paypalcommercecredit.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new U('Unable to initialize payment because \"options.paypalcommercecredit.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.paypalCommerceIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return R(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return R(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onComplete:n,onClick:o}=t,r=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d,isAppSwitchEnabled:l}=a.initializationData||{},{checkoutTopButtonStyles:c}=d||{},p=Object.assign({createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecredit\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)},o&&{onClick:()=>o()}),u=Object.assign(Object.assign({},!l&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,n)}),h=[r.FUNDING.PAYLATER,r.FUNDING.CREDIT];let m=!1;h.forEach(e=>{if(!m){const t=Object.assign(Object.assign({fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},c),{height:36}))},p),s&&u),n=r.Buttons(t);n.isEligible()&&(n.render(`#${i}`),m=!0)}}),m||this.paypalCommerceIntegrationService.removeElement(i)}onHostedCheckoutApprove(e,t,i,n){return R(this,void 0,void 0,function*(){if(!e.orderID)throw new m(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return R(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return R(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const $=p(e=>new L(e,N(e)),[{id:\"paypalcommercecredit\"}]);var q=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class H{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){return q(this,void 0,void 0,function*(){const{paypalcommercevenmo:t,methodId:i}=e;if(!i)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new U('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');if(!t.container)throw new U('Unable to initialize payment because \"options.paypalcommercevenmo.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new U('Unable to initialize payment because \"options.paypalcommercevenmo.onClick\" argument is not a function.');this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.paypalCommerceIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return q(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return q(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onClick:n}=t,o=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:a}=r.initializationData||{},{checkoutTopButtonStyles:s}=a||{},d=Object.assign({fundingSource:o.FUNDING.VENMO,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},s),{height:36})),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmo\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)},n&&{onClick:()=>n()}),l=o.Buttons(d);l.isEligible()?l.render(`#${i}`):this.paypalCommerceIntegrationService.removeElement(i)}}const G=p(e=>new H(e,N(e)),[{id:\"paypalcommercevenmo\"}]);var Y,W,K,J,X,Z,Q,ee,te=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ie{constructor(e){this.scriptLoader=e,this.window=window}getPayPalFastlaneSdk(e,t,i){return te(this,void 0,void 0,function*(){if(!this.window.paypalFastlaneSdk){const n=this.getPayPalFastlaneSdkConfiguration(e,t,i);if(yield this.loadPayPalSdk(n),!this.window.paypalFastlaneSdk)throw new h}return this.window.paypalFastlaneSdk})}getPayPalGooglePaySdk(e,t,i,n){return te(this,void 0,void 0,function*(){if(!this.window.paypalGooglePay||n){const n=this.getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i);yield this.loadPayPalSdk(n)}if(!this.window.paypalGooglePay)throw new h;return this.window.paypalGooglePay})}getPayPalApmsSdk(e,t){return te(this,void 0,void 0,function*(){if(!this.window.paypalApms){const i=this.getPayPalApmSdkConfiguration(e,t);if(yield this.loadPayPalSdk(i),!this.window.paypalApms)throw new h}return this.window.paypalApms})}getPayPalMessages(e,t){return te(this,void 0,void 0,function*(){if(!this.window.paypalMessages){const i=this.getPayPalSdkMessagesConfiguration(e,t);yield this.loadPayPalSdk(i)}if(!this.window.paypalMessages)throw new h;return this.window.paypalMessages})}loadPayPalSdk({options:e,attributes:t}){return te(this,void 0,void 0,function*(){const i=this.transformConfig(e),n=this.transformConfig(t),o=`https://www.paypal.com/sdk/js?${new URLSearchParams(i).toString()}`;yield this.scriptLoader.loadScript(o,{async:!0,attributes:n})})}getPayPalFastlaneSdkConfiguration(e,t,i){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new m(l.MissingPaymentMethod);const{intent:r,clientId:a,merchantId:s,attributionId:d}=o;return{options:{\"client-id\":a,\"merchant-id\":s,commit:!0,components:[\"fastlane\",\"buttons\",\"payment-fields\",\"hosted-fields\",\"three-domain-secure\"],currency:t,intent:r},attributes:{\"data-client-metadata-id\":i.replace(/-/g,\"\"),\"data-namespace\":\"paypalFastlaneSdk\",\"data-partner-attribution-id\":d,\"data-sdk-client-token\":n}}}getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i=!0){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new m(l.MissingPaymentMethod);const{intent:r,clientId:a,merchantId:s,buyerCountry:d,attributionId:c,isHostedCheckoutEnabled:p,isDeveloperModeApplicable:u}=o,h=p||i;return{options:Object.assign({\"client-id\":a,\"merchant-id\":s,commit:h,components:[\"googlepay\"],currency:t,intent:r},u&&{\"buyer-country\":d}),attributes:{\"data-partner-attribution-id\":c,\"data-client-token\":n,\"data-namespace\":\"paypalGooglePay\"}}}getPayPalApmSdkConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new m(l.MissingPaymentMethod);const{intent:n,clientId:o,merchantId:r,buyerCountry:a,attributionId:s,isDeveloperModeApplicable:d,availableAlternativePaymentMethods:c=[],enabledAlternativePaymentMethods:p=[]}=i,u=p,h=c.filter(e=>!p.includes(e));return{options:Object.assign({\"client-id\":o,\"merchant-id\":r,\"enable-funding\":u.length>0?u:void 0,\"disable-funding\":h.length>0?h:void 0,commit:!0,components:[\"buttons\",\"payment-fields\"],currency:t,intent:n},d&&{\"buyer-country\":a}),attributes:{\"data-partner-attribution-id\":s,\"data-namespace\":\"paypalApms\"}}}getPayPalSdkMessagesConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new m(l.MissingPaymentMethod);const{clientId:n,merchantId:o,attributionId:r,isDeveloperModeApplicable:a,buyerCountry:s}=i;return{options:Object.assign({\"client-id\":n,\"merchant-id\":o,components:[\"messages\"],currency:t},a&&{\"buyer-country\":s}),attributes:{\"data-namespace\":\"paypalMessages\",\"data-partner-attribution-id\":r}}}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}function ne(){return new ie((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__.createScriptLoader)())}!function(e){e.CVV=\"cvv\",e.PAN=\"pan\"}(Y||(Y={}));class oe{static get(e){const t=`${encodeURIComponent(`${e}`)}=`,i=document.cookie;let n=null;const o=i.indexOf(t);if(o>-1){let e=i.indexOf(\";\",o);-1===e&&(e=i.length),n=decodeURIComponent(i.substring(o+t.length,e))}return n}static set(e,t,i={secure:!0}){let n=`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;const{expires:o,path:r,domain:a,secure:s}=i;if(o)n+=`; expires=${o.toUTCString()}`;else{const e=new Date,t=60;e.setTime(e.getTime()+60*t*1e3),n+=`; expires=${e.toUTCString()}`}r&&(n+=`; path=${r}`),a&&(n+=`; domain=${a}`),s&&(n+=\"; secure\"),document.cookie=n}static remove(e,t){oe.set(e,\"\",Object.assign({expires:new Date(0)},t))}}!function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(W||(W={})),function(e){e.Succeeded=\"succeeded\",e.Cancelled=\"cancelled\",e.Errored=\"errored\"}(K||(K={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(J||(J={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(X||(X={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(Z||(Z={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(Q||(Q={})),function(e){e.SUCCEEDED=\"succeeded\",e.FAILED=\"failed\",e.CANCELED=\"canceled\",e.UNRECOGNIZED=\"unrecognized\"}(ee||(ee={}));var re=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ae{constructor(){this.window=window}initializePayPalFastlane(e,t,i){return re(this,void 0,void 0,function*(){if(t&&(window.localStorage.setItem(\"fastlaneEnv\",\"sandbox\"),window.localStorage.setItem(\"axoEnv\",\"sandbox\")),!this.window.paypalFastlane){const t={root:{backgroundColorPrimary:\"transparent\"}};this.window.paypalFastlane=yield e.Fastlane({styles:i||t})}return this.window.paypalFastlane})}getPayPalFastlaneOrThrow(){if(!this.window.paypalFastlane)throw new h;return this.window.paypalFastlane}lookupCustomerOrThrow(e){return re(this,void 0,void 0,function*(){return this.getPayPalFastlaneOrThrow().identity.lookupCustomerByEmail(e)})}triggerAuthenticationFlowOrThrow(e){return re(this,void 0,void 0,function*(){return e?this.getPayPalFastlaneOrThrow().identity.triggerAuthenticationFlow(e):{}})}updateStorageSessionId(e){const t=new Date;t.setDate(t.getDate()+14);const i={expires:t,secure:!0};oe.set(\"bc-fastlane-sessionId\",e,i)}removeStorageSessionId(){oe.remove(\"bc-fastlane-sessionId\")}getStorageSessionId(){return oe.get(\"bc-fastlane-sessionId\")||\"\"}mapPayPalFastlaneProfileToBcCustomerData(e,t){var i,n,o;const{authenticationState:r,profileData:a}=t,s=null===(o=null===(n=null===(i=null==a?void 0:a.card)||void 0===i?void 0:i.paymentSource)||void 0===n?void 0:n.card)||void 0===o?void 0:o.billingAddress,d=null==a?void 0:a.shippingAddress,l=null==a?void 0:a.name,c=null==a?void 0:a.card,p=d?this.mapPayPalToBcAddress(d.address,d.name,d.phoneNumber):void 0,u=s&&l?this.mapPayPalToBcAddress(s,l,null==d?void 0:d.phoneNumber):void 0,h=c?this.mapPayPalToBcInstrument(e,c):[],m=this.filterAddresses([p,u]);return{authenticationState:r||ee.UNRECOGNIZED,addresses:m,billingAddress:u,shippingAddress:p,instruments:h}}mapPayPalToBcInstrument(e,t){const{id:i,paymentSource:n}=t,{brand:o,expiry:r,lastDigits:a}=n.card,[s,d]=r.split(\"-\");return[{bigpayToken:i,brand:o,defaultInstrument:!1,expiryMonth:d,expiryYear:s,iin:\"\",last4:a,method:e,provider:e,trustedShippingAddress:!1,untrustedShippingCardVerificationMode:Y.PAN,type:\"card\"}]}mapBcToPayPalAddress(e){return{company:(null==e?void 0:e.company)||\"\",addressLine1:(null==e?void 0:e.address1)||\"\",addressLine2:(null==e?void 0:e.address2)||\"\",adminArea1:(null==e?void 0:e.stateOrProvinceCode)||(null==e?void 0:e.stateOrProvince)||\"\",adminArea2:(null==e?void 0:e.city)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\"}}mapPayPalToBcAddress(e,t,i,n){const[o,r]=t.fullName.split(\" \"),a=(null==i?void 0:i.nationalNumber)||\"\",s=(null==i?void 0:i.countryCode)||\"\";return{id:Date.now(),type:\"paypal-address\",firstName:t.firstName||o||\"\",lastName:t.lastName||r||\"\",company:e.company||\"\",address1:e.addressLine1,address2:e.addressLine2||\"\",city:e.adminArea2,stateOrProvince:e.adminArea1,stateOrProvinceCode:e.adminArea1,country:e.countryCode||\"\",countryCode:e.countryCode||\"\",postalCode:e.postalCode,phone:s+a,customFields:n||[]}}filterAddresses(e){return e.reduce((e,t)=>t?e.some(e=>this.isEqualAddresses(e,t))?e:[...e,t]:e,[])}isEqualAddresses(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.isEqual)(this.normalizeAddress(e),this.normalizeAddress(t))}normalizeAddress(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omit)(e,[\"id\",\"phone\"])}}function se(){return new ae}function de(e){return\"string\"!=typeof e}function le(e,t){if(t||e)return function(e){var t,i;const n={},o=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.root,de),r=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.input,de),a=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.toggle,de),s=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(t=e.text)||void 0===t?void 0:t.body,de),l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(i=e.text)||void 0===i?void 0:i.caption,de),c=e.branding;return Object.keys(o).length&&(n.root=o),Object.keys(r).length&&(n.input=r),Object.keys(a).length&&(n.toggle=a),Object.keys(s).length&&(n.text={},n.text.body=s),Object.keys(l).length&&(n.text=Object.assign({},n.text),n.text.caption=l),c&&(n.branding=c),n}(function(e,t){var i,n,o,r,a,s,d,l,c,p,u,h,m,y,g,v,f,S,I,C,b,w;return{root:{backgroundColorPrimary:(null==e?void 0:e.fastlaneRootSettingsBackgroundColor)||(null===(i=null==t?void 0:t.root)||void 0===i?void 0:i.backgroundColorPrimary),errorColor:(null==e?void 0:e.fastlaneRootSettingsErrorColor)||(null===(n=null==t?void 0:t.root)||void 0===n?void 0:n.errorColor),fontFamily:(null==e?void 0:e.fastlaneRootSettingsFontFamily)||(null===(o=null==t?void 0:t.root)||void 0===o?void 0:o.fontFamily),fontSizeBase:(null==e?void 0:e.fastlaneRootSettingsFontSize)||(null===(r=null==t?void 0:t.root)||void 0===r?void 0:r.fontSizeBase),padding:(null==e?void 0:e.fastlaneRootSettingsPadding)||(null===(a=null==t?void 0:t.root)||void 0===a?void 0:a.padding),primaryColor:(null==e?void 0:e.fastlaneRootSettingsPrimaryColor)||(null===(s=null==t?void 0:t.root)||void 0===s?void 0:s.primaryColor)},input:{borderRadius:(null==e?void 0:e.fastlaneInputSettingsBorderRadius)||(null===(d=null==t?void 0:t.input)||void 0===d?void 0:d.borderRadius),borderColor:(null==e?void 0:e.fastlaneInputSettingsBorderColor)||(null===(l=null==t?void 0:t.input)||void 0===l?void 0:l.borderColor),focusBorderColor:(null==e?void 0:e.fastlaneInputSettingsFocusBorderBase)||(null===(c=null==t?void 0:t.input)||void 0===c?void 0:c.focusBorderColor),backgroundColor:(null==e?void 0:e.fastlaneInputSettingsBackgroundColor)||(null===(p=null==t?void 0:t.input)||void 0===p?void 0:p.backgroundColor),borderWidth:(null==e?void 0:e.fastlaneInputSettingsBorderWidth)||(null===(u=null==t?void 0:t.input)||void 0===u?void 0:u.borderWidth),textColorBase:(null==e?void 0:e.fastlaneInputSettingsTextColorBase)||(null===(h=null==t?void 0:t.input)||void 0===h?void 0:h.textColorBase)},toggle:{colorPrimary:(null==e?void 0:e.fastlaneToggleSettingsColorPrimary)||(null===(m=null==t?void 0:t.toggle)||void 0===m?void 0:m.colorPrimary),colorSecondary:(null==e?void 0:e.fastlaneToggleSettingsColorSecondary)||(null===(y=null==t?void 0:t.toggle)||void 0===y?void 0:y.colorSecondary)},text:{body:{color:(null==e?void 0:e.fastlaneTextBodySettingsColor)||(null===(v=null===(g=null==t?void 0:t.text)||void 0===g?void 0:g.body)||void 0===v?void 0:v.color),fontSize:(null==e?void 0:e.fastlaneTextBodySettingsFontSize)||(null===(S=null===(f=null==t?void 0:t.text)||void 0===f?void 0:f.body)||void 0===S?void 0:S.fontSize)},caption:{color:(null==e?void 0:e.fastlaneTextCaptionSettingsColor)||(null===(C=null===(I=null==t?void 0:t.text)||void 0===I?void 0:I.caption)||void 0===C?void 0:C.color),fontSize:(null==e?void 0:e.fastlaneTextCaptionSettingsFontSize)||(null===(w=null===(b=null==t?void 0:t.text)||void 0===b?void 0:b.caption)||void 0===w?void 0:w.fontSize)}},branding:(null==e?void 0:e.fastlaneBrandingSettings)||(null==t?void 0:t.branding)}}(e,t))}var ce=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class pe{constructor(e,t,i){this.paymentIntegrationService=e,this.paypalCommerceSdk=t,this.paypalCommerceFastlaneUtils=i}initialize(e){var t;return ce(this,void 0,void 0,function*(){const{methodId:i,paypalcommercefastlane:n}=e;if(!i)throw new U('Unable to proceed because \"methodId\" argument is not provided.');try{yield this.paymentIntegrationService.loadPaymentMethod(i);const e=this.paymentIntegrationService.getState(),o=e.getCartOrThrow(),r=e.getPaymentMethodOrThrow(i),a=!!(null===(t=r.initializationData)||void 0===t?void 0:t.isDeveloperModeApplicable),s=yield this.paypalCommerceSdk.getPayPalFastlaneSdk(r,o.currency.code,o.id);yield this.paypalCommerceFastlaneUtils.initializePayPalFastlane(s,a,this.getFastlaneStyles(i,n))}catch(e){}return Promise.resolve()})}deinitialize(){return ce(this,void 0,void 0,function*(){return Promise.resolve()})}signIn(e,t){return ce(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return ce(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){return ce(this,void 0,void 0,function*(){const{checkoutPaymentMethodExecuted:t,continueWithCheckoutCallback:i,methodId:n}=e||{};if(!n)throw new U('Unable to proceed because \"methodId\" argument is not provided.');if(\"function\"!=typeof i)throw new U('Unable to proceed because \"continueWithCheckoutCallback\" argument is not provided and it must be a function.');if(this.paymentIntegrationService.getState().getCustomerOrThrow().isGuest){t&&\"function\"==typeof t&&t();try{yield this.runPayPalAuthenticationFlowOrThrow(n)}catch(e){}}i()})}runPayPalAuthenticationFlowOrThrow(e){return ce(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow().id,n=t.getCustomer(),o=t.getBillingAddress(),r=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:a}=yield this.paypalCommerceFastlaneUtils.lookupCustomerOrThrow(r),s=yield this.paypalCommerceFastlaneUtils.triggerAuthenticationFlowOrThrow(a),d=s.authenticationState===ee.CANCELED;yield this.updateCustomerDataState(e,s),d?this.paypalCommerceFastlaneUtils.removeStorageSessionId():this.paypalCommerceFastlaneUtils.updateStorageSessionId(i)})}updateCustomerDataState(e,t){var i;return ce(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getCartOrThrow(),{authenticationState:o,addresses:r,billingAddress:a,shippingAddress:s,instruments:d}=this.paypalCommerceFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,t);if(yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:o,addresses:r,instruments:d}),a&&(yield this.paymentIntegrationService.updateBillingAddress(a)),s&&n.lineItems.physicalItems.length>0){const t=yield this.paymentIntegrationService.updateShippingAddress(s),n=t.getPaymentMethodOrThrow(e),{isFastlaneShippingOptionAutoSelectEnabled:o}=n.initializationData||{},r=t.getConsignments()||[],a=(null===(i=r[0])||void 0===i?void 0:i.availableShippingOptions)||[],d=a[0],l=a.find(e=>e.isRecommended);if((l||d)&&o){const e=(null==l?void 0:l.id)||d.id;yield this.paymentIntegrationService.selectShippingOption(e)}}})}getFastlaneStyles(e,t){const i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{fastlaneStyles:n,isFastlaneStylingEnabled:o}=i.initializationData||{};return le(o?n:{},null==t?void 0:t.styles)}}const ue=p(e=>new pe(e,ne(),se()),[{id:\"paypalcommerceacceleratedcheckout\"},{id:\"paypalcommercecreditcards\"}]),he={size:70,color:\"#d9d9d9\",backgroundColor:\"#ffffff\"},me=\"embedded-checkout-loading-indicator-rotation\";class ye{constructor(e){this.styles=Object.assign(Object.assign({},he),e&&e.styles),this.containerStyles=Object.assign({},e&&e.containerStyles),this.defineAnimation(),this.container=this.buildContainer(),this.indicator=this.buildIndicator(),this.container.appendChild(this.indicator)}show(e){if(e){const t=document.getElementById(e);if(!t)throw new Error(\"Unable to attach the loading indicator because the parent ID is not valid.\");t.appendChild(this.container)}this.container.style.visibility=\"visible\",this.container.style.opacity=\"1\"}hide(){const e=()=>{this.container.style.visibility=\"hidden\",this.container.removeEventListener(\"transitionend\",e)};this.container.addEventListener(\"transitionend\",e),this.container.style.opacity=\"0\"}buildContainer(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.bottom=\"0\",e.style.left=\"0\",e.style.height=\"100%\",e.style.width=\"100%\",e.style.position=\"absolute\",e.style.right=\"0\",e.style.top=\"0\",e.style.transition=\"all 250ms ease-out\",e.style.opacity=\"0\",this.setStyleAttribute(e,this.containerStyles),e}buildIndicator(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.width=`${this.styles.size}px`,e.style.height=`${this.styles.size}px`,e.style.borderRadius=`${this.styles.size}px`,e.style.border=\"solid 1px\",e.style.borderColor=`${this.styles.backgroundColor} ${this.styles.backgroundColor} ${this.styles.color} ${this.styles.color}`,e.style.margin=\"0 auto\",e.style.position=\"absolute\",e.style.left=\"0\",e.style.right=\"0\",e.style.top=\"50%\",e.style.transform=\"translateY(-50%) rotate(0deg)\",e.style.transformStyle=\"preserve-3d\",e.style.animation=`${me} 500ms infinite cubic-bezier(0.69, 0.31, 0.56, 0.83)`,e}setStyleAttribute(e,t){Object.keys(t).forEach(i=>{e.style.setProperty(i,t[i])})}defineAnimation(){var e;if(document.getElementById(me))return;const t=document.createElement(\"style\");t.id=me,null===(e=document.head)||void 0===e||e.appendChild(t),t.sheet instanceof CSSStyleSheet&&t.sheet.insertRule(`\\n                @keyframes ${me} {\\n                    0% { transform: translateY(-50%) rotate(0deg); }\\n                    100% { transform: translateY(-50%) rotate(360deg); }\\n                }\\n            `,0)}}const ge={\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"};class ve extends U{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}class fe extends v{constructor(e){super(e,{message:\"There is a problem processing your payment. Please try again later.\"}),this.name=\"PaymentMethodInvalidError\",this.type=\"payment_method_invalid\"}}class Se extends u{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}function Ie(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}function Ce(e){return Boolean(e.instrumentId)}const be=function({styles:e}){const t={};return e.color&&(t.color=e.color),e.layout&&(t.layout=e.layout),(e[\"logo-type\"]||e[\"logo-position\"])&&(t.logo={},e[\"logo-type\"]&&(t.logo.type=e[\"logo-type\"]),e[\"logo-position\"]&&(t.logo.position=e[\"logo-position\"])),e.ratio&&(t.ratio=e.ratio),(e[\"text-color\"]||e[\"text-size\"])&&(t.text={},e[\"text-color\"]&&(t.text.color=e[\"text-color\"]),e[\"text-size\"]&&(t.text.size=+e[\"text-size\"])),t};function we(e){return\"object\"==typeof e&&null!==e&&\"bigpayToken\"in e&&\"defaultInstrument\"in e&&\"provider\"in e&&\"trustedShippingAddress\"in e&&\"method\"in e&&\"type\"in e}var Pe=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Oe{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=i,this.loadingIndicator=n}initialize(e){var t;return Pe(this,void 0,void 0,function*(){const{methodId:i,paypalcommerce:n}=e||{};if(this.paypalcommerce=n,!i)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new U('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(i);const o=this.paymentIntegrationService.getState(),r=o.getPaymentMethodOrThrow(i),{container:a,bannerContainerId:s}=n,{orderId:d,paypalBNPLConfiguration:l=[],isPayPalCreditAvailable:c}=r.initializationData||{};if(void 0!==s){if(!document.getElementById(s))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=null==l?void 0:l.find(({id:e})=>\"checkout\"===e);if(c||!(null==e?void 0:e.status))return;const t=yield this.paypalCommerceSdk.getPayPalMessages(r,o.getCartOrThrow().currency.code);return t&&\"function\"==typeof(null==t?void 0:t.Messages)?this.renderMessages(t,s,e):void console.error(\"[BC PayPalCommerce PayLater]: banner could not be rendered, due to issues with loading PayPal SDK\")}d?this.orderId=null===(t=r.initializationData)||void 0===t?void 0:t.orderId:(this.loadingIndicatorContainer=null==a?void 0:a.split(\"#\")[1],yield this.paypalCommerceIntegrationService.loadPayPalSdk(i),n.onInit&&\"function\"==typeof n.onInit&&n.onInit(()=>this.renderButton(i,n)),(void 0===n.shouldRenderPayPalButtonOnInitialization||n.shouldRenderPayPalButtonOnInitialization)&&this.renderButton(i,n))})}execute(e,t){var i,n;return Pe(this,void 0,void 0,function*(){const{payment:o}=e,r=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{onError:a}=this.paypalcommerce||{};if(!o)throw new ve([\"payment\"]);const{methodId:s,paymentData:d}=o;if(this.isPayPalVaultedInstrumentPaymentData(d)&&!this.orderId&&(this.orderId=yield this.createOrder()),!this.orderId)throw new fe;const l=this.isPayPalVaultedInstrumentPaymentData(d)?this.prepareVaultedInstrumentPaymentPayload(s,this.orderId,d):this.preparePaymentPayload(s,this.orderId,d);try{yield this.paymentIntegrationService.submitOrder(r,t),yield this.paymentIntegrationService.submitPayment(l)}catch(e){if(function(e){var t;return(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)&&\"offsite_redirect\"===(null===(t=e.body.additional_action_required)||void 0===t?void 0:t.type)}(e)){const t=null===(n=null===(i=e.body.additional_action_required)||void 0===i?void 0:i.data)||void 0===n?void 0:n.redirect_url;return new Promise(()=>window.location.replace(t))}return this.isProviderError(e)&&(yield this.paypalCommerceIntegrationService.loadPayPalSdk(o.methodId),yield new Promise((e,t)=>{var i;this.paypalcommerce&&(null===(i=this.paypalButton)||void 0===i||i.close(),this.renderButton(o.methodId,this.paypalcommerce),this.handleError(new Error(\"INSTRUMENT_DECLINED\"),a)),t()})),this.handleError(e,a),Promise.reject()}})}finalize(){return Promise.reject(new Se)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}prepareVaultedInstrumentPaymentPayload(e,t,i){const{instrumentId:n,shouldSetAsDefaultInstrument:o}=i,r=!this.isTrustedVaultingFlow(i);return r?{methodId:e,paymentData:{shouldSaveInstrument:r,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}:{methodId:e,paymentData:{instrumentId:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t},bigpay_token:{token:n}}}}}preparePaymentPayload(e,t,i){const{shouldSaveInstrument:n=!1,shouldSetAsDefaultInstrument:o=!1}=Ie(i)?i:{};return{methodId:e,paymentData:{shouldSaveInstrument:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}}renderButton(e,t){var i,n,o,r;const a=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:d}=s.initializationData||{},{checkoutPaymentButtonStyles:l}=d||{},{container:c,onError:p,onRenderButton:u,onValidate:h,submitForm:m}=t;if(!c)throw new U('Unable to initialize payment because \"container\" argument is not provided.');const y=Object.assign(Object.assign({},this.isPaypalCommerceAppSwitchEnabled(e)&&{appSwitchWhenAvailable:!0}),{fundingSource:a.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(l),createOrder:()=>this.createOrder(),onClick:(e,t)=>this.handleClick(t,h),onApprove:e=>this.handleApprove(e,m),onError:e=>this.handleError(e,p),onCancel:()=>this.toggleLoadingIndicator(!1)});this.paypalButton=a.Buttons(y),this.paypalButton.isEligible()&&(u&&\"function\"==typeof u&&u(),(null===(n=(i=this.paypalButton).hasReturned)||void 0===n?void 0:n.call(i))&&this.isPaypalCommerceAppSwitchEnabled(e)?null===(r=(o=this.paypalButton).resume)||void 0===r||r.call(o):this.paypalButton.render(c))}handleClick(e,t){return Pe(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;return null==t?void 0:t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,null==t||t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createOrder(){return Pe(this,void 0,void 0,function*(){const e=this.getFieldsValues();return this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecheckout\",{shouldSaveInstrument:(null==e?void 0:e.shouldSaveInstrument)||!1})})}getFieldsValues(){const{getFieldsValues:e}=this.paypalcommerce||{};return\"function\"==typeof e?e():void 0}isTrustedVaultingFlow(e){if(e&&Ce(e)){const t=this.paymentIntegrationService.getState().getInstruments(),i=null==t?void 0:t.find(t=>we(t)&&t.bigpayToken===e.instrumentId);return!(we(i)&&!i.trustedShippingAddress)}return!1}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isPayPalVaultedInstrumentPaymentData(e){return!!e&&Ce(e)&&Ie(e)}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:be(i)};e.Messages(n).render(`#${t}`)}isProviderError(e){var t,i,n;return!!function(e){return\"object\"==typeof e&&null!==e&&\"errors\"in e}(e)&&\"INSTRUMENT_DECLINED\"===(null===(n=null===(i=((null===(t=null==e?void 0:e.errors)||void 0===t?void 0:t.filter(e=>e.provider_error))||[])[0])||void 0===i?void 0:i.provider_error)||void 0===n?void 0:n.code)}isPaypalCommerceAppSwitchEnabled(e){var t;return(null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)||!1}}const ke=p(e=>new Oe(e,N(e),new ie((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__.getScriptLoader)()),new ye({containerStyles:ge})),[{id:\"paypalcommerce\"}]);class Ae extends u{constructor(e){super(e||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}var Ee=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Te{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=i,this.paypalCommerceSdk=n}initialize(e){return Ee(this,void 0,void 0,function*(){const{methodId:t,paypalcommerce:i,paypalcommercecredit:n}=e||{},o=n||i;if(!t)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new U('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(t);const r=this.paymentIntegrationService.getState(),a=r.getPaymentMethodOrThrow(t),{paypalBNPLConfiguration:s=[],orderId:d}=a.initializationData||{},{bannerContainerId:l,container:c}=o;if(void 0!==l){if(!document.getElementById(l))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=s&&s.find(({id:e})=>\"checkout\"===e);if(!(null==e?void 0:e.status))return;const t=yield this.paypalCommerceSdk.getPayPalMessages(a,r.getCartOrThrow().currency.code);return this.renderMessages(t,l,e)}d?this.orderId=d:(yield this.paypalCommerceIntegrationService.loadPayPalSdk(t),this.loadingIndicatorContainer=null==c?void 0:c.split(\"#\")[1],this.renderButton(t,o))})}execute(e,t){return Ee(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new ve([\"payment\"]);if(!this.orderId)throw new fe;yield this.paymentIntegrationService.submitOrder(n,t),yield this.paypalCommerceIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new Se)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){if(!(null==t?void 0:t.container))throw new U('Unable to initialize payment because \"container\" argument is not provided.');const i=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:r}=o||{},{container:a,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,p=[i.FUNDING.PAYLATER,i.FUNDING.CREDIT];let u=!1;p.forEach(e=>{if(u)return;const t={fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(r),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecreditcheckout\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=i.Buttons(t),this.paypalButton.isEligible()||e!==i.FUNDING.PAYLATER){if(!this.paypalButton.isEligible()&&e===i.FUNDING.CREDIT)throw new Ae(`PayPal ${e} is not available for your region. Please use PayPal Checkout instead.`);d&&\"function\"==typeof d&&d(),this.paypalButton.render(a),u=!0}})}handleClick(e,t){return Ee(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;if(t&&\"function\"==typeof t)return t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,t&&\"function\"==typeof t&&t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:be(i)};e.Messages(n).render(`#${t}`)}}const ze=p(e=>new Te(e,N(e),new ye({containerStyles:ge}),ne()),[{id:\"paypalcommercecredit\"}]);var Fe=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Be{constructor(e,t,i){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=i}initialize(e){var t,i;return Fe(this,void 0,void 0,function*(){const{methodId:n,paypalcommerce:o,paypalcommercevenmo:r}=e||{},a=r||o;if(!n)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!a)throw new U('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(n);const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n);(null===(t=s.initializationData)||void 0===t?void 0:t.orderId)?this.orderId=null===(i=s.initializationData)||void 0===i?void 0:i.orderId:(yield this.paypalCommerceIntegrationService.loadPayPalSdk(n),this.loadingIndicatorContainer=a.container.split(\"#\")[1],this.renderButton(n,a))})}execute(e,t){return Fe(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new ve([\"payment\"]);if(!this.orderId)throw new fe;yield this.paymentIntegrationService.submitOrder(n,t),yield this.paypalCommerceIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new Se)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){const i=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:r}=o||{},{container:a,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,p={fundingSource:i.FUNDING.VENMO,style:this.paypalCommerceIntegrationService.getValidButtonStyle(r),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmocheckout\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=i.Buttons(p),!this.paypalButton.isEligible())throw new Ae(\"PayPal Venmo is not available for your region. Please use PayPal Checkout instead.\");d&&\"function\"==typeof d&&d(),this.paypalButton.render(a)}handleClick(e,t){return Fe(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;return t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,t(),this.toggleLoadingIndicator(!1)}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const De=p(e=>new Be(e,N(e),new ye({styles:{backgroundColor:\"black\"}})),[{id:\"paypalcommercevenmo\"}]);class Me extends v{constructor(e){super(e,{message:\"The request has timed out or aborted.\"}),this.name=\"TimeoutError\",this.type=\"timeout\"}}function xe(e,t,i=!0){var n;return null!==(n=e[t])&&void 0!==n?n:i}var Ne=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ue{constructor(e,t,i,n,o=3e3,r=3e5){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=i,this.loadingIndicator=n,this.pollingInterval=o,this.maxPollingIntervalTime=r,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.isPollingEnabled=!1}initialize(e){return Ne(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,paypalcommerce:n,paypalcommercealternativemethods:o}=e,r=o||n;if(this.paypalcommercealternativemethods=o,!i)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new U('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!r)throw new U('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument is not provided.');const a=this.paymentIntegrationService.getState(),s=a.getPaymentMethodOrThrow(i,t),{orderId:d,shouldRenderFields:l}=s.initializationData||{},c=a.getStoreConfigOrThrow().checkoutSettings.features;this.isPollingEnabled=xe(c,\"PAYPAL-5192.paypal_commerce_ideal_polling\"),d?this.orderId=d:(this.paypalApms=yield this.paypalCommerceSdk.getPayPalApmsSdk(s,a.getCartOrThrow().currency.code),this.loadingIndicatorContainer=r.container.split(\"#\")[1],this.renderButton(i,t,r),l&&this.renderFields(i,r))})}execute(e,t){return Ne(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new ve([\"payment\"]);const{methodId:o,gatewayId:r}=i;if(!this.orderId)throw new fe;this.isPollingEnabled&&\"ideal\"===o&&(yield new Promise((e,t)=>{this.initializePollingMechanism(o,e,t,r)})),this.isNonInstantPaymentMethod(o)||(yield this.paymentIntegrationService.submitOrder(n,t)),yield this.paypalCommerceIntegrationService.submitPayment(o,this.orderId,r)})}finalize(){return Promise.reject(new Se)}deinitialize(){var e;return this.orderId=void 0,this.isPollingEnabled&&this.resetPollingMechanism(),null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}initializePollingMechanism(e,t,i,n){return Ne(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.paypalCommerceIntegrationService.getOrderStatus(n),r=o===O.Approved,a=o===O.PollingError;if(r)return this.deinitializePollingMechanism(),t();if(a)return i();if(!r&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,paypalcommercealternativemethods:this.paypalcommercealternativemethods}),this.handleError(new Me)}catch(e){i()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}reinitializeStrategy(e){return Ne(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}handleError(e){const{onError:t}=this.paypalcommercealternativemethods||{};this.isPollingEnabled&&this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderButton(e,t,i){const n=this.getPaypalAmpsSdkOrThrow(),o=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t),{buttonStyle:r}=o.initializationData||{},{container:a,onError:s,onRenderButton:d,submitForm:l}=i,c={fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(r),onInit:(e,t)=>i.onInitButton(t),createOrder:()=>this.onCreateOrder(e,t,i),onApprove:e=>this.handleApprove(e,l),onCancel:()=>{this.toggleLoadingIndicator(!1),this.deinitializePollingMechanism()},onError:e=>{this.deinitializePollingMechanism(),this.handleFailure(e,s)},onClick:(e,t)=>Ne(this,void 0,void 0,function*(){return i.onValidate(t.resolve,t.reject)})};this.paypalButton=n.Buttons(c),this.paypalButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.paypalButton.render(a))}onCreateOrder(e,t,i){return Ne(this,void 0,void 0,function*(){const{onValidate:n}=i;yield n(()=>(this.toggleLoadingIndicator(!0),()=>Promise.resolve()),lodash__WEBPACK_IMPORTED_MODULE_3__.noop);const o=yield this.paypalCommerceIntegrationService.createOrder(\"paypalcommercealternativemethodscheckout\");if(this.isNonInstantPaymentMethod(e)){const i={useStoreCredit:!1},n={params:{methodId:e,gatewayId:t}};yield this.paymentIntegrationService.submitOrder(i,n),yield this.paypalCommerceIntegrationService.submitPayment(e,o,t)}return o})}handleApprove({orderID:e},t){this.orderId=e,t()}handleFailure(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderFields(e,t){const i=this.getPaypalAmpsSdkOrThrow(),n=this.paymentIntegrationService.getState(),{firstName:o,lastName:r,email:a}=n.getBillingAddressOrThrow(),{apmFieldsContainer:s,apmFieldsStyles:d}=t;if(!s)throw new U('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument should contain \"apmFieldsContainer\".');const l=document.querySelector(s);l&&(l.innerHTML=\"\");const c={fundingSource:e,style:d||{},fields:{name:{value:`${o} ${r}`},email:{value:a}}};i.PaymentFields(c).render(s)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isNonInstantPaymentMethod(e){return e.toUpperCase()in P}getPaypalAmpsSdkOrThrow(){if(!this.paypalApms)throw new h;return this.paypalApms}}const je=p(e=>new Ue(e,N(e),ne(),new ye({containerStyles:ge})),[{gateway:\"paypalcommercealternativemethods\"}]);var _e;!function(e){e.CardCode=\"cardCode\",e.CardCodeVerification=\"cardCodeVerification\",e.CardExpiry=\"cardExpiry\",e.CardName=\"cardName\",e.CardNumber=\"cardNumber\",e.CardNumberVerification=\"cardNumberVerification\",e.CardExpiryVerification=\"cardExpiryVerification\"}(_e||(_e={}));const Ve=_e;function Re(e){return Ve.CardNumber in e&&Ve.CardName in e&&Ve.CardExpiry in e}function Le(e){return Ve.CardNumberVerification in e&&Ve.CardCodeVerification in e&&Ve.CardExpiryVerification in e}class $e extends u{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}var qe;!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(qe||(qe={}));class He extends u{constructor(e){super(function(e){switch(e){case qe.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case qe.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case qe.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case qe.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}class Ge extends u{constructor(e,t){super(t||\"Unable to proceed because the payment form contains invalid data.\"),this.details=e,this.name=\"PaymentInvalidFormError\",this.type=\"payment_invalid_form\"}}var Ye=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class We{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=i,this.paypalCommerceFastlaneUtils=n}initialize(e){return Ye(this,void 0,void 0,function*(){const{methodId:t,paypalcommercecreditcards:i,paypalcommerce:n}=e,o=i||n,{form:r,onCreditCardFieldsRenderingError:a,onLoadComplete:s}=o||{};if(!t)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!r)throw new U('Unable to proceed because \"options.paypalcommercecreditcards.form\" argument is not provided.');this.hostedFormOptions=r,this.isCreditCardForm=Re(r.fields),this.isCreditCardVaultedForm=Le(r.fields)&&!this.hasUndefinedValues(),yield this.paymentIntegrationService.loadPaymentMethod(t),yield this.paypalCommerceIntegrationService.loadPayPalSdk(t,void 0,!0,!0),null==s||s(),(this.isCreditCardForm||this.isCreditCardVaultedForm)&&(yield this.initializeFields(r,a)),this.shouldInitializePayPalFastlane(t)&&(yield this.initializePayPalFastlaneOrThrow(t))})}execute(e,t){return Ye(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{methodId:o,paymentData:r}=i||{};if(!i||!o)throw new ve([\"payment\"]);if(this.executionPaymentData=r,this.isCreditCardForm||this.isCreditCardVaultedForm)yield this.validateHostedFormOrThrow(),yield this.submitHostedForm();else{const{orderId:e}=yield this.paypalCommerceIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",this.getInstrumentParams());this.returnedOrderId=e}const a=this.preparePaymentPayload(o,r,this.returnedOrderId,this.returnedVaultedToken);yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment(a)})}finalize(){return Promise.reject(new Se)}deinitialize(){var e,t,i,n;return Ye(this,void 0,void 0,function*(){return yield null===(e=this.cvvField)||void 0===e?void 0:e.close(),yield null===(t=this.expiryField)||void 0===t?void 0:t.close(),yield null===(i=this.numberField)||void 0===i?void 0:i.close(),yield null===(n=this.nameField)||void 0===n?void 0:n.close(),Promise.resolve()})}preparePaymentPayload(e,t,i,n){const{shouldSaveInstrument:o=!1,shouldSetAsDefaultInstrument:a=!1}=Ie(t)?t:{},s=t&&Ce(t)?t.instrumentId:void 0,l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)({verification_nonce:n,token:s},lodash__WEBPACK_IMPORTED_MODULE_3__.isNil);return{methodId:e,paymentData:{shouldSaveInstrument:o,shouldSetAsDefaultInstrument:a,instrumentId:s,formattedPayload:Object.assign(Object.assign({},n||s?{bigpay_token:l}:{}),i?{card_with_order:{order_id:i}}:{})}}}initializeFields(e,t){return Ye(this,void 0,void 0,function*(){const{fields:i,styles:n}=e,o=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),r=this.getExecuteCallback(i),a=Object.assign({style:this.getInputStyles(n),onApprove:({orderID:e,vaultSetupToken:t,liabilityShift:i})=>{if(i===S.No||i===S.Unknown)throw new Error;return this.handleApprove({orderID:e,vaultSetupToken:t})},onError:()=>{throw new $e},inputEvents:{onChange:t=>this.onChangeHandler(e,t),onFocus:t=>this.onFocusHandler(e,t),onBlur:t=>this.onBlurHandler(e,t),onInputSubmitRequest:t=>this.onInputSubmitRequest(e,t)}},r);if(this.cardFields=yield o.CardFields(a),!this.cardFields.isEligible())throw new He(qe.PaymentNotInitialized);try{this.stylizeInputContainers(i),Re(i)&&(yield this.renderFields(i)),Le(i)&&(yield this.renderVaultedFields(i))}catch(e){\"function\"==typeof t&&t(e)}})}getExecuteCallback(e){return Le(e)?this.createVaultSetupTokenCallback():this.createOrderCallback()}createVaultSetupTokenCallback(){return{createVaultSetupToken:()=>Ye(this,void 0,void 0,function*(){const{setupToken:e}=(yield this.paypalCommerceIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",Object.assign(Object.assign({},this.getInstrumentParams()),{setupToken:!0})))||{};return e})}}createOrderCallback(){return{createOrder:()=>Ye(this,void 0,void 0,function*(){const{orderId:e}=(yield this.paypalCommerceIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",this.getInstrumentParams()))||{};return e})}}handleApprove({orderID:e,vaultSetupToken:t}){e&&(this.returnedOrderId=e),t&&(this.returnedVaultedToken=t)}renderFields(e){var t,i,n,o;return Ye(this,void 0,void 0,function*(){const r=this.getCardFieldsOrThrow();(null===(t=e.cardCode)||void 0===t?void 0:t.containerId)&&(this.cvvField=r.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCode.containerId}`)),(null===(i=e.cardExpiry)||void 0===i?void 0:i.containerId)&&(this.expiryField=r.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiry.containerId}`)),(null===(n=e.cardName)||void 0===n?void 0:n.containerId)&&(this.nameField=r.NameField({placeholder:\"\"}),yield this.nameField.render(`#${e.cardName.containerId}`)),(null===(o=e.cardNumber)||void 0===o?void 0:o.containerId)&&(this.numberField=r.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumber.containerId}`))})}renderVaultedFields(e){var t,i,n;return Ye(this,void 0,void 0,function*(){const o=this.getCardFieldsOrThrow();(null===(t=e.cardCodeVerification)||void 0===t?void 0:t.containerId)&&(this.cvvField=o.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCodeVerification.containerId}`)),(null===(i=e.cardExpiryVerification)||void 0===i?void 0:i.containerId)&&(this.expiryField=o.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiryVerification.containerId}`)),(null===(n=e.cardNumberVerification)||void 0===n?void 0:n.containerId)&&(this.numberField=o.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumberVerification.containerId}`))})}getInstrumentParams(){if(!this.executionPaymentData)return{};if(Ie(this.executionPaymentData)){const{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}=this.executionPaymentData;return{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}}if(Ce(this.executionPaymentData)){const{instrumentId:e}=this.executionPaymentData;return{instrumentId:e}}return{}}getFieldTypeByEmittedField({emittedBy:e}){return{fieldType:this.mapFieldType(e)}}submitHostedForm(){return Ye(this,void 0,void 0,function*(){const e=this.getCardFieldsOrThrow(),t=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),i={billingAddress:{company:t.company,addressLine1:t.address1,addressLine2:t.address2,adminArea1:t.stateOrProvinceCode,adminArea2:t.city,postalCode:t.postalCode,countryCode:t.countryCode}};try{this.isCreditCardVaultedForm?yield e.submit():yield e.submit(i)}catch(e){throw new $e(\"Failed authentication. Please try to authorize again.\")}})}validateHostedFormOrThrow(){var e,t;return Ye(this,void 0,void 0,function*(){const i=this.getCardFieldsOrThrow(),n=yield i.getState().then(e=>e),o=this.getValidityData(n);if(!o.isValid)throw null===(t=null===(e=this.hostedFormOptions)||void 0===e?void 0:e.onValidate)||void 0===t||t.call(e,o),new Ge(this.mapValidationErrors(o.errors))})}getValidityData({fields:e}){const t=Object.assign({},e);delete t.cardNameField;const i=Object.keys(t);return{isValid:i.every(e=>{var i;return null===(i=t[e])||void 0===i?void 0:i.isValid}),errors:i.reduce((e,i)=>{var n;const o=this.mapFieldType(i);return Object.assign(Object.assign({},e),{[o]:(null===(n=t[i])||void 0===n?void 0:n.isValid)?void 0:[this.getInvalidErrorByFieldType(o)]})},{})}}getInvalidErrorByFieldType(e){switch(e){case Ve.CardCode:case Ve.CardCodeVerification:return{fieldType:e,message:\"Invalid card code\",type:\"invalid_card_code\"};case Ve.CardNumber:case Ve.CardNumberVerification:return{fieldType:e,message:\"Invalid card number\",type:\"invalid_card_number\"};case Ve.CardExpiry:case Ve.CardExpiryVerification:return{fieldType:e,message:\"Invalid card expiry\",type:\"invalid_card_expiry\"};default:return{fieldType:e,message:\"Invalid field\",type:\"invalid\"}}}mapValidationErrors(e={}){const t={};return Object.keys(e).forEach(i=>{var n,o;t[i]=[{message:(null===(o=null===(n=e[i])||void 0===n?void 0:n[0])||void 0===o?void 0:o.message)||\"\",type:i}]}),t}mapFieldType(e){switch(e){case\"name\":return Ve.CardName;case\"cardNumberField\":case\"number\":return this.isCreditCardForm?Ve.CardNumber:Ve.CardNumberVerification;case\"cardExpiryField\":case\"expiry\":return this.isCreditCardForm?Ve.CardExpiry:Ve.CardExpiryVerification;case\"cardCvvField\":case\"cvv\":return this.isCreditCardForm?Ve.CardCode:Ve.CardCodeVerification;default:throw new Error(\"Unexpected field type\")}}getCardFieldsOrThrow(){if(!this.cardFields)throw new He(qe.PaymentNotInitialized);return this.cardFields}getInputStyles(e){var t,i,n;const o={\"font-size\":(null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.fontSize)||\"1rem\",\"font-family\":(null===(i=null==e?void 0:e.default)||void 0===i?void 0:i.fontFamily)||\"Montserrat, Arial, Helvetica, sans-serif\",\"font-weight\":(null===(n=null==e?void 0:e.default)||void 0===n?void 0:n.fontWeight)||\"400\",outline:\"none\",padding:\"9px 13px\"},r=Object.assign(Object.assign({},o),{color:\"#333333\"});return{input:r,\".invalid\":Object.assign(Object.assign({},o),{color:\"red\"}),\".valid\":r,\":focus\":r}}stylizeInputContainers(e){Object.values(e||{}).forEach(e=>{const t=document.getElementById(`${(null==e?void 0:e.containerId)||\"\"}`);t&&(t.style.padding=\"0px\",t.style.boxShadow=\"none\",t.style.border=\"none\",t.style.background=\"transparent\",t.style.marginBottom=\"10px\",t.style.marginLeft=\"-5px\")})}hasUndefinedValues(){return!this.hostedFormOptions||Object.values(this.hostedFormOptions.fields).some(e=>void 0===e)}onChangeHandler(e,t){var i;null===(i=null==e?void 0:e.onValidate)||void 0===i||i.call(e,this.getValidityData(t))}onFocusHandler(e,t){var i;null===(i=null==e?void 0:e.onFocus)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onBlurHandler(e,t){var i;null===(i=null==e?void 0:e.onBlur)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onInputSubmitRequest(e,t){var i;null===(i=null==e?void 0:e.onEnter)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}shouldInitializePayPalFastlane(e){var t,i;const n=this.paymentIntegrationService.getState(),o=n.getPaymentMethodOrThrow(e),r=n.getPaymentProviderCustomer(),a=(s=r)&&(\"authenticationState\"in s||\"addresses\"in s||\"instruments\"in s)?r:{};var s;return(null===(t=null==o?void 0:o.initializationData)||void 0===t?void 0:t.isAcceleratedCheckoutEnabled)&&(null===(i=null==o?void 0:o.initializationData)||void 0===i?void 0:i.isPayPalCommerceAnalyticsV2Enabled)&&!(null==a?void 0:a.authenticationState)}initializePayPalFastlaneOrThrow(e){return Ye(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getPaymentMethodOrThrow(e),{initializationData:o}=n;if(!(null==o?void 0:o.connectClientToken))return;const r=yield this.paypalCommerceSdk.getPayPalFastlaneSdk(n,i.currency.code,i.id);yield this.paypalCommerceFastlaneUtils.initializePayPalFastlane(r,!!(null==o?void 0:o.isDeveloperModeApplicable))}catch(e){}})}}const Ke=p(e=>new We(e,N(e),ne(),se()),[{id:\"paypalcommercecreditcards\"}]);var Je=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Xe{constructor(e,t,i,n=3e3,o=3e5){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=i,this.pollingInterval=n,this.maxPollingIntervalTime=o,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return Je(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,paypalcommerceratepay:n}=e;if(!i)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new U('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!n)throw new U('Unable to initialize payment because \"options.paypalcommerceratepay\" argument is not provided.');const{legalTextContainer:o,container:r,loadingContainerId:a}=n;if(!r)throw new U('Unable to initialize payment because \"options.container\" argument is not provided.');if(!o)throw new U('Unable to initialize payment because \"options.legalTextContainer\" argument is not provided.');if(!a)throw new U('Unable to initialize payment because \"options.loadingContainerId\" argument is not provided.');this.loadingIndicatorContainer=a;const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i,t),{merchantId:d}=s.initializationData||{};if(!d)throw new U(\"Unable to initialize payment because merchantId argument is not provided.\");this.paypalcommerceratepay=n,yield this.paypalCommerceIntegrationService.loadPayPalSdk(i),this.createFraudNetScript(d,i,t),this.loadFraudnetConfig(),this.renderLegalText(o,r)})}execute(e,t){return Je(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{getFieldsValues:o}=this.paypalcommerceratepay||{};if(!i)throw new ve([\"payment\"]);if(!o||\"function\"!=typeof o)throw new U('Unable to initialize payment because \"options.getFieldsValues\" argument is not provided.');this.toggleLoadingIndicator(!0);try{const e=yield this.paypalCommerceIntegrationService.createOrder(\"paypalcommercealternativemethodscheckout\",{metadataId:this.guid}),{ratepayBirthDate:r,ratepayPhoneNumber:a,ratepayPhoneCountryCode:s}=o(),d={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:i.methodId,rate_pay:{birth_date:this.normalizeDate(r),phone:{national_number:a,country_code:s.split(\"+\")[1]}},paypal_account:{order_id:e}}};return yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment({methodId:i.methodId,paymentData:d}),yield new Promise((e,t)=>{this.initializePollingMechanism(i.methodId,e,t,i.gatewayId)})}catch(e){return this.handleError(e),new Promise((e,t)=>t())}})}finalize(){return Promise.reject(new Se)}deinitialize(){const{legalTextContainer:e}=this.paypalcommerceratepay||{},t=document.querySelectorAll('[data-id=\"fraudnetScript\"]')[0],i=document.querySelectorAll('[data-id=\"fraudnetConfig\"]')[0];if(this.deinitializePollingMechanism(),t.remove(),i.remove(),e){const t=document.getElementById(e);null==t||t.remove()}return Promise.resolve()}normalizeDate(e){const t=this.formatDate(e.getDate()),i=this.formatDate(e.getMonth()+1);return`${e.getFullYear()}-${i}-${t}`}formatDate(e){return`${e<10?0:\"\"}${e}`}renderLegalText(e,t){const i=e,n=t.split(\"#\")[1],o=document.getElementById(n),r=null==o?void 0:o.parentNode,a=document.createElement(\"div\");a.style.marginBottom=\"20px\",a.setAttribute(\"id\",i),null==r||r.prepend(a);const s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),d=s.Legal({fundingSource:s.Legal.FUNDING.PAY_UPON_INVOICE});if(!document.getElementById(i))throw new U('Unable to initialize payment because \"legalTextContainerElement\" argument is not found.');d.render(`#${i}`)}handleError(e){const{onError:t}=this.paypalcommerceratepay||{};this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createFraudNetScript(e,t,i){const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t,i),{testMode:o}=n.config,r=document.createElement(\"script\");r.setAttribute(\"type\",\"application/json\"),r.setAttribute(\"fncls\",\"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99\"),r.setAttribute(\"data-id\",\"fraudnetScript\"),this.guid=this.generateGUID();const a={f:this.guid,s:`${e}_checkout-page`,sandbox:o};r.innerHTML=JSON.stringify(a),document.body.appendChild(r)}generateGUID(){let e=\"\";for(let t=0;t<32;t+=1)e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"[Math.floor(62*Math.random())];return e}loadFraudnetConfig(){const e=document.createElement(\"script\");e.setAttribute(\"data-id\",\"fraudnetConfig\"),e.src=\"https://c.paypal.com/da/r/fb.js\",document.body.appendChild(e)}reinitializeStrategy(e){return Je(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}initializePollingMechanism(e,t,i,n){return Je(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.paypalCommerceIntegrationService.getOrderStatus(\"paypalcommercealternativemethods\",{params:{useMetadata:!0}}),r=o===O.PollingStop,a=o===O.PollingError;if(r)return this.deinitializePollingMechanism(),t();if(a)return i();if(!r&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,paypalcommerceratepay:this.paypalcommerceratepay}),this.handleError(new Me)}catch(e){this.handleError(e),i()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const Ze=p(e=>new Xe(e,N(e),new ye({containerStyles:Object.assign(Object.assign({},ge),{position:\"fixed\"})})),[{gateway:\"paypalcommercealternativemethods\",id:\"ratepay\"}]);function Qe(e){return!!e&&(\"authenticationState\"in e||\"addresses\"in e||\"instruments\"in e)}var et=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class tt{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceRequestSender=t,this.paypalCommerceSdk=i,this.paypalCommerceFastlaneUtils=n}initialize(e){var t,i;return et(this,void 0,void 0,function*(){const{methodId:n,paypalcommercefastlane:o}=e;if(this.methodId=n,this.paypalcommercefastlane=o,!n)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new U('Unable to initialize payment because \"options.paypalcommercefastlane\" argument is not provided.');if(!o.onInit||\"function\"!=typeof o.onInit)throw new U('Unable to initialize payment because \"options.paypalcommercefastlane.onInit\" argument is not provided or it is not a function.');if(!o.onChange||\"function\"!=typeof o.onChange)throw new U('Unable to initialize payment because \"options.paypalcommercefastlane.onChange\" argument is not provided or it is not a function.');yield this.paymentIntegrationService.loadPaymentMethod(n);const r=this.paymentIntegrationService.getState(),a=r.getCartOrThrow(),s=r.getPaymentMethodOrThrow(n),{isDeveloperModeApplicable:d,isFastlaneStylingEnabled:l}=s.initializationData||{};this.threeDSVerificationMethod=null===(t=s.initializationData)||void 0===t?void 0:t.threeDSVerificationMethod,this.paypalFastlaneSdk=yield this.paypalCommerceSdk.getPayPalFastlaneSdk(s,a.currency.code,a.id);const c=le(l?null===(i=null==s?void 0:s.initializationData)||void 0===i?void 0:i.fastlaneStyles:{},null==o?void 0:o.styles);yield this.paypalCommerceFastlaneUtils.initializePayPalFastlane(this.paypalFastlaneSdk,!!d,c),this.shouldRunAuthenticationFlow()&&(yield this.runPayPalAuthenticationFlowOrThrow(n)),yield this.initializePayPalPaymentComponent(),o.onInit(e=>this.renderPayPalPaymentComponent(e)),o.onChange(()=>this.handlePayPalStoredInstrumentChange(n))})}execute(e,t){return et(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new ve([\"payment\"]);const{paymentData:o,methodId:r}=i,a=o&&Ce(o);try{yield this.paymentIntegrationService.submitOrder(n,t);const e=a?yield this.prepareVaultedInstrumentPaymentPayload(r,o):yield this.preparePaymentPayload(r,o);yield this.paymentIntegrationService.submitPayment(e),this.paypalCommerceFastlaneUtils.removeStorageSessionId()}catch(e){if(function(e){return\"object\"==typeof e&&null!==e&&\"message\"in e&&\"response\"in e&&\"body\"in e.response&&\"name\"in e.response.body}(e)&&\"INVALID_REQUEST\"===e.response.body.name){const e={translationKey:\"payment.errors.invalid_request_error\"};return this.handleError(e),Promise.reject()}if(e instanceof Error&&\"FastlaneError\"!==e.name)throw e;return Promise.reject()}})}finalize(){return Promise.reject(new Se)}deinitialize(){return et(this,void 0,void 0,function*(){return Promise.resolve()})}shouldRunAuthenticationFlow(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getCustomerOrThrow(),n=e.getPaymentProviderCustomer(),o=Qe(n)?n:{},r=this.paypalCommerceFastlaneUtils.getStorageSessionId();return!(!i.isGuest||(null==o?void 0:o.authenticationState)===ee.CANCELED||(null==o?void 0:o.authenticationState)||r!==t.id)}runPayPalAuthenticationFlowOrThrow(e){return et(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getCustomer(),o=t.getBillingAddress(),r=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:a}=yield this.paypalCommerceFastlaneUtils.lookupCustomerOrThrow(r),s=yield this.paypalCommerceFastlaneUtils.triggerAuthenticationFlowOrThrow(a),{authenticationState:d,addresses:l,instruments:c}=this.paypalCommerceFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,s);yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:d,addresses:l,instruments:c}),s.authenticationState===ee.CANCELED?this.paypalCommerceFastlaneUtils.removeStorageSessionId():this.paypalCommerceFastlaneUtils.updateStorageSessionId(i.id)}catch(e){}})}initializePayPalPaymentComponent(){return et(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),t=e.phone,i=`${e.firstName} ${e.lastName}`.trim(),n=this.paypalCommerceFastlaneUtils.getPayPalFastlaneOrThrow(),o={fields:Object.assign({cardholderName:{prefill:i,enabled:!0}},t&&{phoneNumber:{prefill:t}})};this.paypalComponentMethods=yield n.FastlaneCardComponent(o)})}renderPayPalPaymentComponent(e){const t=this.getPayPalComponentMethodsOrThrow();if(!e)throw new U('Unable to render card component because \"container\" argument is not provided.');t.render(e)}getPayPalComponentMethodsOrThrow(){if(!this.paypalComponentMethods)throw new h;return this.paypalComponentMethods}prepareVaultedInstrumentPaymentPayload(e,t){return et(this,void 0,void 0,function*(){const{instrumentId:i}=t,n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),o=this.isPaypalCommerceFastlaneThreeDSAvailable()&&n.config.is3dsEnabled;o||(yield this.createOrder(i));const r=o?yield this.get3DSNonce(i):i;return{methodId:e,paymentData:{formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:r}}}}})}preparePaymentPayload(e,t){return et(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getBillingAddressOrThrow(),o=i.getPaymentMethodOrThrow(e),r=`${n.firstName} ${n.lastName}`.trim(),{getPaymentToken:a}=this.getPayPalComponentMethodsOrThrow(),{id:s}=yield a({name:{fullName:r},billingAddress:this.paypalCommerceFastlaneUtils.mapBcToPayPalAddress(n)}),d=this.isPaypalCommerceFastlaneThreeDSAvailable()&&o.config.is3dsEnabled;d||(yield this.createOrder(s));const l=d?yield this.get3DSNonce(s):s,{shouldSaveInstrument:c=!1,shouldSetAsDefaultInstrument:p=!1}=Ie(t)?t:{};return{methodId:e,paymentData:Object.assign(Object.assign({},t),{shouldSaveInstrument:c,shouldSetAsDefaultInstrument:p,formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:l}}})}})}createOrder(e){return et(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getCartOrThrow().id;if(this.methodId){const{orderId:i}=yield this.paypalCommerceRequestSender.createOrder(this.methodId,{cartId:t,fastlaneToken:e});this.orderId=i}})}get3DSNonce(e){var t;return et(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getCartOrThrow(),o=i.getOrderOrThrow(),r=i.getStoreConfigOrThrow().links.checkoutLink,a=null===(t=this.paypalFastlaneSdk)||void 0===t?void 0:t.ThreeDomainSecureClient;if(!a)throw new h;const s={amount:o.orderAmount.toFixed(2),currency:n.currency.code,nonce:e,threeDSRequested:\"SCA_ALWAYS\"===this.threeDSVerificationMethod,transactionContext:{experience_context:{locale:\"en-US\",return_url:r,cancel_url:r}}};if(yield a.isEligible(s)){const{liabilityShift:e,authenticationState:t,nonce:i}=yield a.show();if(e===S.No||e===S.Unknown||t===K.Errored||t===K.Cancelled)throw new fe;if(t===K.Succeeded)return yield this.createOrder(i),i}return e})}handlePayPalStoredInstrumentChange(e){return et(this,void 0,void 0,function*(){const t=this.paypalCommerceFastlaneUtils.getPayPalFastlaneOrThrow(),{selectionChanged:i,selectedCard:n}=yield t.profile.showCardSelector();if(i){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomer(),i=Qe(t)?t:{},o=this.paypalCommerceFastlaneUtils.mapPayPalToBcInstrument(e,n)[0];return yield this.paymentIntegrationService.updatePaymentProviderCustomer(Object.assign(Object.assign({},i),{instruments:[o]})),o}})}isPaypalCommerceFastlaneThreeDSAvailable(){return xe(this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features,\"PROJECT-7080.paypalcommerce_fastlane_three_ds\")}handleError(e){var t;(null===(t=this.paypalcommercefastlane)||void 0===t?void 0:t.onError)&&\"function\"==typeof this.paypalcommercefastlane.onError&&this.paypalcommercefastlane.onError(e)}}const it=p(e=>{const{getHost:i}=e.getState();return new tt(e,new D((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_1__.createRequestSender)({host:i()})),ne(),se())},[{id:\"paypalcommerceacceleratedcheckout\"}]);var nt=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ot{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){var t;return nt(this,void 0,void 0,function*(){const{paypalcommerce:i,containerId:n,methodId:o}=e,r=Boolean(null==i?void 0:i.buyNowInitializeOptions);if(!o)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new U('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!i)throw new U('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');if(r&&!i.currencyCode)throw new U('Unable to initialize payment because \"options.paypalcommerce.currencyCode\" argument is not provided.');if(r&&\"function\"!=typeof(null===(t=i.buyNowInitializeOptions)||void 0===t?void 0:t.getBuyNowCartRequestBody))throw new U('Unable to initialize payment because \"options.paypalcommerce.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');r||(yield this.paymentIntegrationService.loadDefaultCheckout());const a=r?i.currencyCode:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(o,a,!1),this.renderButton(n,o,i,r)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i,n){var o,r;const{buyNowInitializeOptions:a,style:s,onComplete:d,onEligibilityFailure:l}=i,c=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),p=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:u,isAppSwitchEnabled:h}=p.initializationData||{},m=Object.assign(Object.assign({},!n&&this.isPaypalCommerceAppSwitchEnabled(t)&&{appSwitchWhenAvailable:!0}),{createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommerce\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)}),y={onClick:()=>this.handleClick(a),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},g=Object.assign(Object.assign({},!h&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,d)}),v=Object.assign(Object.assign(Object.assign({fundingSource:c.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(s)},m),a&&y),u&&g),f=c.Buttons(v);f.isEligible()?(null===(o=f.hasReturned)||void 0===o?void 0:o.call(f))&&this.isPaypalCommerceAppSwitchEnabled(t)?null===(r=f.resume)||void 0===r||r.call(f):f.render(`#${e}`):l&&\"function\"==typeof l?l():this.paypalCommerceIntegrationService.removeElement(e)}handleClick(e){return nt(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,i,n){return nt(this,void 0,void 0,function*(){if(!e.orderID)throw new m(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return nt(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return nt(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}isPaypalCommerceAppSwitchEnabled(e){var t;return(null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)||!1}}const rt=p(e=>new ot(e,N(e)),[{id:\"paypalcommerce\"}]);var at=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class st{constructor(e,t,i){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=i}initialize(e){var t;return at(this,void 0,void 0,function*(){const{paypalcommercecredit:i,containerId:n,methodId:o}=e,{buyNowInitializeOptions:r,currencyCode:a,messagingContainerId:s}=i||{},d=!!r;if(!o)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new U('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!i)throw new U('Unable to initialize payment because \"options.paypalcommercecredit\" argument is not provided.');if(d&&!a)throw new U('Unable to initialize payment because \"options.paypalcommercecredit.currencyCode\" argument is not provided.');if(d&&\"function\"!=typeof(null==r?void 0:r.getBuyNowCartRequestBody))throw new U('Unable to initialize payment because \"options.paypalcommercecredit.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');d||(yield this.paymentIntegrationService.loadDefaultCheckout());const l=this.paymentIntegrationService.getState(),c=d?a:l.getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(o,c,!1),this.renderButton(n,o,i);const p=l.getStoreConfigOrThrow().checkoutSettings.features;if(null!==(t=p[\"PAYPAL-5557.Hide_ppc_banner_implementation\"])&&void 0!==t&&t)return;const u=s&&document.getElementById(s);if(c&&u){const e=l.getPaymentMethodOrThrow(o),{paypalBNPLConfiguration:t=[]}=e.initializationData||{},i=t&&t.find(({id:e})=>\"cart\"===e);if(!(null==i?void 0:i.status))return;u.removeAttribute(\"data-pp-style-logo-type\"),u.removeAttribute(\"data-pp-style-logo-position\"),u.removeAttribute(\"data-pp-style-text-color\"),u.removeAttribute(\"data-pp-style-text-size\");const n=yield this.paypalCommerceSdk.getPayPalMessages(e,c);this.renderMessages(n,s,i)}})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onComplete:r,onEligibilityFailure:a}=i,s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:l,isAppSwitchEnabled:c}=d.initializationData||{},p={createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecredit\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)},u={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},h=Object.assign(Object.assign({},!c&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,r)}),m=[s.FUNDING.PAYLATER,s.FUNDING.CREDIT];let y=!1;m.forEach(t=>{if(!y){const i=Object.assign(Object.assign(Object.assign({fundingSource:t,style:this.paypalCommerceIntegrationService.getValidButtonStyle(o)},p),n&&u),l&&h),r=s.Buttons(i);r.isEligible()?(r.render(`#${e}`),y=!0):a&&\"function\"==typeof a&&a()}}),y||this.paypalCommerceIntegrationService.removeElement(e)}handleClick(e){return at(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,i,n){return at(this,void 0,void 0,function*(){if(!e.orderID)throw new m(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return at(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return at(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"cart\",style:be(i)};e.Messages(n).render(`#${t}`)}}const dt=p(e=>new st(e,N(e),ne()),[{id:\"paypalcommercecredit\"}]);var lt=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ct{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){return lt(this,void 0,void 0,function*(){const{paypalcommercevenmo:t,containerId:i,methodId:n}=e,{buyNowInitializeOptions:o,currencyCode:r}=t||{},a=!!o;if(!n)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new U('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new U('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');if(a&&!r)throw new U('Unable to initialize payment because \"options.paypalcommercevenmo.currencyCode\" argument is not provided.');if(a&&\"function\"!=typeof(null==o?void 0:o.getBuyNowCartRequestBody))throw new U('Unable to initialize payment because \"options.paypalcommercevenmo.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');a||(yield this.paymentIntegrationService.loadDefaultCheckout());const s=a?r:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(n,s,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onEligibilityFailure:r}=i,a=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),s=a.FUNDING.VENMO,d={createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmo\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:s,style:this.getValidVenmoButtonStyles(o)},d),n&&l),p=a.Buttons(c);p.isEligible()?p.render(`#${e}`):r&&\"function\"==typeof r?r():this.paypalCommerceIntegrationService.removeElement(e)}getValidVenmoButtonStyles(e){const t=this.paypalCommerceIntegrationService.getValidButtonStyle(e);return t.color===b.gold?Object.assign(Object.assign({},t),{color:void 0}):t}handleClick(e){return lt(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const pt=p(e=>new ct(e,N(e)),[{id:\"paypalcommercevenmo\"}]);var ut=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ht{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){return ut(this,void 0,void 0,function*(){const{paypalcommercealternativemethods:t,containerId:i,methodId:n}=e,{apm:o,buyNowInitializeOptions:r,currencyCode:a}=t||{},s=!!r;if(!n)throw new U('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new U('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new U('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument is not provided.');if(!o)throw new U('Unable to initialize payment because \"options.paypalcommercealternativemethods.apm\" argument is not provided.');if(s&&!a)throw new U('Unable to initialize payment because \"options.paypalcommercealternativemethods.currencyCode\" argument is not provided.');if(s&&\"function\"!=typeof(null==r?void 0:r.getBuyNowCartRequestBody))throw new U('Unable to initialize payment because \"options.paypalcommercealternativemethods.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');s||(yield this.paymentIntegrationService.loadDefaultCheckout());const d=s?a:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(n,d,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{apm:n,buyNowInitializeOptions:o,style:r,onEligibilityFailure:a}=i,s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow();if(!Object.values(s.FUNDING).includes(n))throw new U('Unable to initialize PayPal button because \"options.paypalcommercealternativemethods.apm\" argument is not valid funding source.');const d={createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercealternativemethod\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(o),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:n,style:this.paypalCommerceIntegrationService.getValidButtonStyle(r)},d),o&&l),p=s.Buttons(c);p.isEligible()?p.render(`#${e}`):a&&\"function\"==typeof a?a():this.paypalCommerceIntegrationService.removeElement(e)}handleClick(e){return ut(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const mt=p(e=>new ht(e,N(e)),[{id:\"paypalcommercealternativemethods\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9wYXlwYWwtY29tbWVyY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxJQ0NZQSxFRERSQyxFQUFzQixDQUFDLEVFQ1osU0FBU0MsRUFDcEJDLEVBQ0FDLEdBSUEsT0FGQUMsUUFBUUMsSUFBSSxhQUFjRixHQUVuQkcsT0FBT0MsT0FBT0wsRUFBUSxDQUFFQyxjQUNuQyxDQ1JBSCxFQUFvQlEsRUFBSSxDQUFDQyxFQUFTQyxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hWLEVBQW9CWSxFQUFFRixFQUFZQyxLQUFTWCxFQUFvQlksRUFBRUgsRUFBU0UsSUFDNUVMLE9BQU9PLGVBQWVKLEVBQVNFLEVBQUssQ0FBRUcsWUFBWSxFQUFNQyxJQUFLTCxFQUFXQyxNQ0ozRVgsRUFBb0JZLEVBQUksQ0FBQ0ksRUFBS0MsSUFBVVgsT0FBT1ksVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NPbkUsTUFBZUksVUFBc0JDLE1BSWhELFdBQUFDLENBQVlDLEdDWEQsSUFBcUNOLEVEWTVDTyxNQUFNRCxHQUFXLHFDQUpyQixLQUFBRSxLQUFPLGdCQUNQLEtBQUFDLEtBQU8sV0NUeUNULGFEY1pBLFVDYmhDWixPQUFPc0IsZUFDUHRCLE9BQU9zQixlRFlRQyxLQ1plWCxHRFlmVyxLQ1ZSQyxVQUFZWixFRFlvQixtQkFBNUJJLE1BQU1TLGtCQUNiVCxNQUFNUyxrQkFBa0JGLGlCQUV4QkEsS0FBS0csTUFBUSxJQUFJVixNQUFNTyxLQUFLTCxTQUFTUSxLQUU3QyxFRWZXLE1BQU1DLFVBQTRDWixFQUM3RCxXQUFBRSxDQUFZQyxHQUNSQyxNQUNJRCxHQUNJLHVHQUdSSyxLQUFLSCxLQUFPLHNDQUNaRyxLQUFLRixLQUFPLG1DQUNoQixHTmJKLFNBQVk1QixHQUNSLHFEQUNBLGlDQUNBLHlDQUNBLGlEQUNBLHlDQUNBLHFEQUNBLG1DQUNBLCtDQUNBLHVDQUNBLHVDQUNBLDRD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YzJqQixFQUU1RCxDQUVjLFdBQUE5SSxDQUNWMWdCLEcseUNBRUEsR0FBSUEsRUFBeUIsQ0FDekIsTUFBTXl6QixRQUFtQnAzQixLQUFLaU8saUNBQWlDdkssd0JBQzNEQyxTQUdFM0QsS0FBS3VDLDBCQUEwQjgwQixhQUFhRCxFQUFXaHpCLEcsQ0FFckUsRSxFQ3RKSixNQVFBLEdBQWVoRyxFQU5WbUUsR0FDRCxJQUFJdzFCLEdBQ0F4MUIsRUFDQSxFQUF1Q0EsSUFHeUMsQ0FDcEYsQ0FBRTZCLEdBQUksc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svYm9vdHN0cmFwP2ZmY2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbWlzc2luZy1kYXRhLWVycm9yLnRzP2I3ZGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzPzk5NGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kPzllYTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtY2xpZW50LXVuYXZhaWxhYmxlLWVycm9yLnRzP2Y4ZWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvYnV5LW5vdy1jYXJ0LWNyZWF0aW9uLWVycm9yLnRzP2Q2MDQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcmVxdWVzdC1lcnJvci50cz9jODQwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY2FydC9jYXJ0LXNvdXJjZS50cz8zODhhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS10eXBlcy50cz8zNTYwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlLnRzPzYzNWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2ludGVybmFsLWFwaS1oZWFkZXJzLnRzPzQxMTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2NvbnRlbnQtdHlwZS50cz81MDRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL2h0dHAtcmVxdWVzdC9zZGstdmVyc2lvbi1oZWFkZXJzLnRzPzdiZjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXJlcXVlc3Qtc2VuZGVyLnRzP2Q3YTkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXNjcmlwdC1sb2FkZXIudHM/NjRlOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UudHM/M2Y5OCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pbnZhbGlkLWFyZ3VtZW50LWVycm9yLnRzPzM5MjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlL3BheXBhbC1jb21tZXJjZS1jdXN0b21lci1zdHJhdGVneS50cz80ZTUzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY2hlY2tvdXQtYnV0dG9ucy9kZWZhdWx0LWNoZWNrb3V0LWJ1dHRvbi1oZWlnaHQudHM/ZDQyNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1jdXN0b21lci1zdHJhdGVneS50cz8zMDgwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jdXN0b21lci1zdHJhdGVneS50cz80ZDYwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1jcmVkaXQtY3VzdG9tZXItc3RyYXRlZ3kudHM/MzVhZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtdmVubW8vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLWN1c3RvbWVyLXN0cmF0ZWd5LnRzP2NkYmYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXZlbm1vL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtdmVubW8tY3VzdG9tZXItc3RyYXRlZ3kudHM/NmFkOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaW5zdHJ1bWVudC50cz9mMmI2Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3BheXBhbC1jb21tZXJjZS10eXBlcy50cz8xM2ViIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3BheXBhbC1jb21tZXJjZS1zZGsudHM/ZmNlOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLXV0aWxzL3NyYy9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLXNkay50cz8xZDU2Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdG9yYWdlL3NyYy9jb29raWUtc3RvcmFnZS50cz8xNTNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS11dGlscy50cz9mZTdjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUtdXRpbHMudHM/NTlhMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLXV0aWxzL3NyYy91dGlscy9nZXQtZmFzdGxhbmUtc3R5bGVzLnRzPzlmZTUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS1jdXN0b21lci1zdHJhdGVneS50cz85OTZlIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lLWN1c3RvbWVyLXN0cmF0ZWd5LnRzPzJmYTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3VpL3NyYy9sb2FkaW5nLWluZGljYXRvci9sb2FkaW5nLWluZGljYXRvci50cz9iMDg3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jb25zdGFudHMudHM/N2Q0OSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LWFyZ3VtZW50LWludmFsaWQtZXJyb3IudHM/YTUwMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1pbnZhbGlkLWVycm9yLnRzPzNhZGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvb3JkZXItZmluYWxpemF0aW9uLW5vdC1yZXF1aXJlZC1lcnJvci50cz9iNWExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy1ob3N0ZWQtaW50cnVtZW50LWxpa2UudHM/ODc2MyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaXMtdmF1bHRlZC1pbnN0cnVtZW50LnRzPzE4MGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaXMtcmVxdWVzdC1lcnJvci50cz9iNDNkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3V0aWxzL2dldC1wYXlwYWwtbWVzc2FnZXMtc3R5bGVzLWZyb20tYm5wbC1jb25maWcudHM/MDUwOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdXRpbGl0eS9zcmMvaXMtYmFzZS1pbnN0cnVtZW50L2lzLWJhc2UtaW5zdHJ1bWVudC50cz9lOTJmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS9wYXlwYWwtY29tbWVyY2UtcGF5bWVudC1zdHJhdGVneS50cz8xZjJiIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3V0aWxzL2lzLXJlZGlyZWN0LWFjdGlvbi1lcnJvci50cz81NTIzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3V0aWxzL2lzLXBheXBhbC1jb21tZXJjZS1wcm92aWRlci1lcnJvci50cz9jNzRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLXBheW1lbnQtc3RyYXRlZ3kudHM/Mjc2YiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW1wbGVtZW50ZWQtZXJyb3IudHM/M2EzNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtY3JlZGl0L3BheXBhbC1jb21tZXJjZS1jcmVkaXQtcGF5bWVudC1zdHJhdGVneS50cz83YWY0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1jcmVkaXQtcGF5bWVudC1zdHJhdGVneS50cz84OTZhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS12ZW5tby9wYXlwYWwtY29tbWVyY2UtdmVubW8tcGF5bWVudC1zdHJhdGVneS50cz84OGZlIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS12ZW5tby9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLXZlbm1vLXBheW1lbnQtc3RyYXRlZ3kudHM/Nzg5NyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy90aW1lb3V0LWVycm9yLnRzPzA4MGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3V0aWxpdHkvc3JjL2lzLWV4cGVyaW1lbnQtZW5hYmxlZC9pcy1leHBlcmltZW50LWVuYWJsZWQudHM/YzlhNCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy1wYXltZW50LXN0cmF0ZWd5LnRzP2Q3MzciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzLXBheW1lbnQtc3RyYXRlZ3kudHM/ZWFkOSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2hvc3RlZC1mb3JtL2hvc3RlZC1maWVsZC10eXBlLnRzPzY1ZDgiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9ob3N0ZWQtZm9ybS9pcy1jcmVkaXQtY2FyZC1mb3JtLWZpZWxkcy50cz8wZmFhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvaG9zdGVkLWZvcm0vaXMtY3JlZGl0LWNhcmQtdmF1bHRlZC1mb3JtLWZpZWxkcy50cz9mM2IzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWZhaWxlZC1lcnJvci50cz8wN2RkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL25vdC1pbml0aWFsaXplZC1lcnJvci50cz84YjRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtaW52YWxpZC1mb3JtLWVycm9yLnRzP2MwZmIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jYXJkL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY2FyZHMtcGF5bWVudC1zdHJhdGVneS50cz8xMGU2Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3V0aWxzL2lzLXBheXBhbC1jb21tZXJjZS1hY2NlbGVyYXRlZC1jaGVja291dC1jdXN0b21lci50cz83M2YzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY2FyZC9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jYXJkcy1wYXltZW50LXN0cmF0ZWd5LnRzPzY3ZWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXJhdGVwYXkvcGF5cGFsLWNvbW1lcmNlLXJhdGVwYXktcGF5bWVudC1zdHJhdGVneS50cz8yMjAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1yYXRlcGF5L2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtcmF0ZXBheS1wYXltZW50LXN0cmF0ZWd5LnRzPzcwNGUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS11dGlscy9zcmMvdXRpbHMvaXMtcGF5cGFsLWZhc3RsYW5lLWN1c3RvbWVyLnRzPzcwMzUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS1wYXltZW50LXN0cmF0ZWd5LnRzP2QxNWYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS11dGlscy9zcmMvdXRpbHMvaXMtcGF5cGFsLWZhc3RsYW5lLXJlcXVlc3QtZXJyb3IudHM/YTg5MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1mYXN0bGFuZS1wYXltZW50LXN0cmF0ZWd5LnRzPzQwMGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlL3BheXBhbC1jb21tZXJjZS1idXR0b24tc3RyYXRlZ3kudHM/NGM5ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1idXR0b24tc3RyYXRlZ3kudHM/YWY1ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtY3JlZGl0L3BheXBhbC1jb21tZXJjZS1jcmVkaXQtYnV0dG9uLXN0cmF0ZWd5LnRzPzE4Y2UiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1idXR0b24tc3RyYXRlZ3kudHM/NmVlMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtdmVubW8vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLWJ1dHRvbi1zdHJhdGVneS50cz9mZTIyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS12ZW5tby9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLXZlbm1vLWJ1dHRvbi1zdHJhdGVneS50cz8xMzEwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzLWJ1dHRvbi1zdHJhdGVneS50cz81ZjI3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy1idXR0b24tc3RyYXRlZ3kudHM/ZjJmMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE1pc3NpbmdEYXRhRXJyb3JUeXBlIHtcbiAgICBNaXNzaW5nQmlsbGluZ0FkZHJlc3MsXG4gICAgTWlzc2luZ0NhcnQsXG4gICAgTWlzc2luZ0NoZWNrb3V0LFxuICAgIE1pc3NpbmdDb25zaWdubWVudHMsXG4gICAgTWlzc2luZ0N1c3RvbWVyLFxuICAgIE1pc3NpbmdDaGVja291dENvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXIsXG4gICAgTWlzc2luZ09yZGVyQ29uZmlnLFxuICAgIE1pc3NpbmdPcmRlcklkLFxuICAgIE1pc3NpbmdQYXltZW50LFxuICAgIE1pc3NpbmdQYXltZW50SWQsXG4gICAgTWlzc2luZ1BheW1lbnRJbnN0cnVtZW50LFxuICAgIE1pc3NpbmdQYXltZW50TWV0aG9kLFxuICAgIE1pc3NpbmdQYXltZW50UmVkaXJlY3RVcmwsXG4gICAgTWlzc2luZ1BheW1lbnRTdGF0dXMsXG4gICAgTWlzc2luZ1BheW1lbnRUb2tlbixcbiAgICBNaXNzaW5nU2hpcHBpbmdBZGRyZXNzLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3Igd2hlbiBkYXRhIHRoYXQgaXMgZXhwZWN0ZWQgdG8gZXhpc3QgaXMgbWlzc2luZy4gVXN1YWxseSBpdFxuICogaXMgZHVlIHRvIHRoZSBmYWN0IHRoYXQgY2VydGFpbiBkYXRhIGhhcyBub3QgYmVlbiByZXRyaWV2ZWQgZnJvbSBvciBzYXZlZCB0b1xuICogdGhlIHNlcnZlciB5ZXQuIEFuZCBzdWNoIGRhdGEgaXMgcmVxdWlyZWQgdG8gcGVyZm9ybSBjZXJ0YWluIGFjdGlvbnMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pc3NpbmdEYXRhRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTWlzc2luZ0RhdGFFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTWlzc2luZ0RhdGFFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdtaXNzaW5nX2RhdGEnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgYmlsbGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDYXJ0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNhcnQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NvbnNpZ25tZW50czpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25zaWdubWVudHMgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNoZWNrb3V0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDdXN0b21lcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjdXN0b21lciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXRDb25maWc6XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyQ29uZmlnOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbmZpZ3VyYXRpb24gZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIElEIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBnZW5lcmF0ZWQgeWV0Lic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50VG9rZW46XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHRva2VuIHJlcXVpcmVkIHRvIHN1Ym1pdCBhIHBheW1lbnQgaXMgbWlzc2luZy4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2Q6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBtZXRob2QgZGF0YSBpcyB1bmF2YWlsYWJsZSBvciBub3QgcHJvcGVybHkgY29uZmlndXJlZC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1NoaXBwaW5nQWRkcmVzczpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBzaGlwcGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlc29sdmFibGVNb2R1bGUgZnJvbSAnLi9yZXNvbHZhYmxlLW1vZHVsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4oXG4gICAgbW9kdWxlOiBUTW9kdWxlLFxuICAgIHJlc29sdmVJZHM6IFRJZGVudGlmaWVyW10sXG4pOiBSZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPiB7XG4gICAgY29uc29sZS5sb2coJ3Jlc29sdmVJZHMnLCByZXNvbHZlSWRzKTtcblxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG1vZHVsZSwgeyByZXNvbHZlSWRzIH0pO1xufVxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCBDdXN0b21FcnJvciBmcm9tICcuL2N1c3RvbS1lcnJvcic7XG5pbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSAnLi9zZXQtcHJvdG90eXBlLW9mJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHR5cGUgc2hvdWxkIG5vdCBiZSBjb25zdHJ1Y3RlZCBkaXJlY3RseS4gSXQgaXMgYSBiYXNlIGNsYXNzIGZvclxuICogYWxsIGN1c3RvbSBlcnJvcnMgdGhyb3duIGluIHRoaXMgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgQ3VzdG9tRXJyb3Ige1xuICAgIG5hbWUgPSAnU3RhbmRhcmRFcnJvcic7XG4gICAgdHlwZSA9ICdzdGFuZGFyZCc7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgICBpZiAodHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBuZXcudGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFjaztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKG9iamVjdDogYW55LCBwcm90b3R5cGU6IG9iamVjdCkge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iamVjdCwgcHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICAgIH1cblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBmYWlsc1xuICogdG8gbG9hZCwgb3IgZm9yIHNvbWUgcmVhc29uLCBpdCBpcyBpbmFjY2Vzc2libGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIHNob3BwZXIgdHJpZXMgdG8gc2lnbiBpbiBhcyBhIGd1ZXN0IGJ1dFxuICogdGhleSBhcmUgYWxyZWFkeSBzaWduZWQgaW4gYXMgYSByZWdpc3RlcmVkIGN1c3RvbWVyLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBtZXNzYWdlIHx8XG4gICAgICAgICAgICAgICAgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkIGR1cmluZyBidXkgbm93IGNhcnQgY3JlYXRpb24gcHJvY2Vzcy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdidXlfbm93X2NhcnRfY3JlYXRpb25fZXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmNvbnN0IERFRkFVTFRfUkVTUE9OU0UgPSB7XG4gICAgYm9keToge30sXG4gICAgaGVhZGVyczoge30sXG4gICAgc3RhdHVzOiAwLFxufTtcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB1bmFibGUgdG8gbWFrZSBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlci4gSXQgd3JhcHNcbiAqIGFueSBzZXJ2ZXIgcmVzcG9uc2UgaW50byBhIEpTIGVycm9yIG9iamVjdC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVxdWVzdEVycm9yPFRCb2R5ID0gYW55PiBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGJvZHk6IFRCb2R5IHwge307XG4gICAgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgICBlcnJvcnM6IEFycmF5PHsgY29kZTogc3RyaW5nOyBtZXNzYWdlPzogc3RyaW5nIH0+O1xuICAgIHN0YXR1czogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHJlc3BvbnNlPzogUmVzcG9uc2U8VEJvZHkgfCB7fT4sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgIH06IHtcbiAgICAgICAgICAgIG1lc3NhZ2U/OiBzdHJpbmc7XG4gICAgICAgICAgICBlcnJvcnM/OiBBcnJheTx7IGNvZGU6IHN0cmluZzsgbWVzc2FnZT86IHN0cmluZyB9PjtcbiAgICAgICAgfSA9IHt9LFxuICAgICkge1xuICAgICAgICBjb25zdCB7IGJvZHksIGhlYWRlcnMsIHN0YXR1cyB9ID0gcmVzcG9uc2UgfHwgREVGQVVMVF9SRVNQT05TRTtcblxuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUmVxdWVzdEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3JlcXVlc3QnO1xuICAgICAgICB0aGlzLmJvZHkgPSBib2R5O1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnMgfHwgW107XG4gICAgfVxufVxuIiwiZXhwb3J0IGVudW0gQ2FydFNvdXJjZSB7XG4gICAgQnV5Tm93ID0gJ0JVWV9OT1cnLFxufVxuIiwiaW1wb3J0IHtcbiAgICBCdXlOb3dDYXJ0UmVxdWVzdEJvZHksXG4gICAgSG9zdGVkSW5zdHJ1bWVudCxcbiAgICBTaGlwcGluZ09wdGlvbixcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbi8qKlxuICpcbiAqIFBheVBhbCBDb21tZXJjZSBGdW5kaW5nIHNvdXJjZXNcbiAqXG4gKi9cbmV4cG9ydCB0eXBlIEZ1bmRpbmdUeXBlID0gc3RyaW5nW107XG5leHBvcnQgdHlwZSBFbmFibGVGdW5kaW5nVHlwZSA9IEZ1bmRpbmdUeXBlIHwgc3RyaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlU0RLRnVuZGluZyB7XG4gICAgQ0FSRDogc3RyaW5nO1xuICAgIFBBWVBBTDogc3RyaW5nO1xuICAgIENSRURJVDogc3RyaW5nO1xuICAgIFBBWUxBVEVSOiBzdHJpbmc7XG4gICAgT1hYTzogc3RyaW5nO1xuICAgIFNFUEE6IHN0cmluZztcbiAgICBWRU5NTzogc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgQ29tbWVyY2UgU0RLXG4gKlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzQ29uZmlnIHtcbiAgICBpbnB1dEV2ZW50czoge1xuICAgICAgICBvbkNoYW5nZShkYXRhOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSk6IHZvaWQ7XG4gICAgICAgIG9uRm9jdXMoZGF0YTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgICAgICBvbkJsdXIoZGF0YTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgICAgICBvbklucHV0U3VibWl0UmVxdWVzdChkYXRhOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSk6IHZvaWQ7XG4gICAgfTtcbiAgICBjcmVhdGVWYXVsdFNldHVwVG9rZW4/OiAoZGF0YTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUpID0+IHZvaWQ7XG4gICAgY3JlYXRlT3JkZXI/OiAoKSA9PiBQcm9taXNlPHN0cmluZz47XG4gICAgc3R5bGU6IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzUmVuZGVyT3B0aW9uc1snc3R5bGVzJ107XG4gICAgb25BcHByb3ZlKGRhdGE6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc09uQXBwcm92ZURhdGEpOiB2b2lkO1xuICAgIG9uRXJyb3IoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNPbkFwcHJvdmVEYXRhIHtcbiAgICB2YXVsdFNldHVwVG9rZW4/OiBzdHJpbmc7XG4gICAgb3JkZXJJRDogc3RyaW5nO1xuICAgIGxpYWJpbGl0eVNoaWZ0PzogTGlhYmlsaXR5U2hpZnRFbnVtO1xufVxuXG5leHBvcnQgZW51bSBMaWFiaWxpdHlTaGlmdEVudW0ge1xuICAgIFBvc3NpYmxlID0gJ1BPU1NJQkxFJyxcbiAgICBObyA9ICdOTycsXG4gICAgVW5rbm93biA9ICdVTktOT1dOJyxcbiAgICBZZXMgPSAnWUVTJyxcbn1cblxuaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0ZpZWxkRGF0YSB7XG4gICAgaXNGb2N1c2VkOiBib29sZWFuO1xuICAgIGlzRW1wdHk6IGJvb2xlYW47XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbiAgICBpc1BvdGVudGlhbGx5VmFsaWQ6IGJvb2xlYW47XG59XG5cbnR5cGUgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzQ2FyZCA9IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzQ2FyZDtcblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSB7XG4gICAgY2FyZHM6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0NhcmRbXTtcbiAgICBlbWl0dGVkQnk6IHN0cmluZztcbiAgICBpc0Zvcm1WYWxpZDogYm9vbGVhbjtcbiAgICBlcnJvcnM6IHN0cmluZ1tdO1xuICAgIGZpZWxkczoge1xuICAgICAgICBjYXJkQ3Z2RmllbGQ6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgY2FyZE51bWJlckZpZWxkOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGNhcmROYW1lRmllbGQ/OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGNhcmRFeHBpcnlGaWVsZDogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzRmllbGREYXRhO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VGaWVsZHMge1xuICAgIHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50IHwgc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBjbGVhcigpOiB2b2lkO1xuICAgIHJlbW92ZUNsYXNzKGNsYXNzTmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBjbG9zZSgpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG5pbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkcyB7XG4gICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xuICAgIENWVkZpZWxkKGNvbmZpZz86IFBheVBhbENvbW1lcmNlRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogUGF5UGFsQ29tbWVyY2VGaWVsZHM7XG4gICAgRXhwaXJ5RmllbGQoY29uZmlnPzogUGF5UGFsQ29tbWVyY2VGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEpOiBQYXlQYWxDb21tZXJjZUZpZWxkcztcbiAgICBOYW1lRmllbGQoY29uZmlnPzogUGF5UGFsQ29tbWVyY2VGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEpOiBQYXlQYWxDb21tZXJjZUZpZWxkcztcbiAgICBOdW1iZXJGaWVsZChjb25maWc/OiBQYXlQYWxDb21tZXJjZUZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSk6IFBheVBhbENvbW1lcmNlRmllbGRzO1xuICAgIHN1Ym1pdChjb25maWc/OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdWJtaXRDb25maWcpOiBQcm9taXNlPHZvaWQ+O1xuICAgIGdldFN0YXRlKCk6IFByb21pc2U8UGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGU+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N1Ym1pdENvbmZpZyB7XG4gICAgYmlsbGluZ0FkZHJlc3M6IHtcbiAgICAgICAgY29tcGFueT86IHN0cmluZztcbiAgICAgICAgYWRkcmVzc0xpbmUxOiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3NMaW5lMj86IHN0cmluZztcbiAgICAgICAgYWRtaW5BcmVhMTogc3RyaW5nOyAvLyBTdGF0ZVxuICAgICAgICBhZG1pbkFyZWEyOiBzdHJpbmc7IC8vIENpdHlcbiAgICAgICAgcG9zdGFsQ29kZTogc3RyaW5nO1xuICAgICAgICBjb3VudHJ5Q29kZT86IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFNESyB7XG4gICAgQ2FyZEZpZWxkczogKGRhdGE6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0NvbmZpZykgPT4gUHJvbWlzZTxQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHM+O1xuICAgIEdvb2dsZXBheTogKCkgPT4ge1xuICAgICAgICBjb25maWc6ICgpID0+IFByb21pc2U8R29vZ2xlUGF5Q29uZmlnPjtcbiAgICAgICAgY29uZmlybU9yZGVyOiAoYXJnMDoge1xuICAgICAgICAgICAgb3JkZXJJZDogc3RyaW5nO1xuICAgICAgICAgICAgcGF5bWVudE1ldGhvZERhdGE6IENvbmZpcm1PcmRlckRhdGE7XG4gICAgICAgIH0pID0+IFByb21pc2U8eyBzdGF0dXM6IHN0cmluZyB9PjtcbiAgICAgICAgaW5pdGlhdGVQYXllckFjdGlvbjogKCkgPT4gdm9pZDtcbiAgICB9O1xuICAgIEZVTkRJTkc6IFBheVBhbENvbW1lcmNlU0RLRnVuZGluZztcbiAgICBIb3N0ZWRGaWVsZHM6IHtcbiAgICAgICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xuICAgICAgICByZW5kZXIoZGF0YTogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zKTogUHJvbWlzZTxQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkcz47XG4gICAgfTtcbiAgICBMZWdhbDogUGF5UGFsTGVnYWwgJiBMZWdhbEZ1bmRpbmc7XG4gICAgQnV0dG9ucyhvcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zKTogUGF5UGFsQ29tbWVyY2VCdXR0b25zO1xuICAgIFBheW1lbnRGaWVsZHMob3B0aW9uczogUGF5UGFsQ29tbWVyY2VQYXltZW50RmllbGRzT3B0aW9ucyk6IFBheVBhbENvbW1lcmNlUGF5bWVudEZpZWxkcztcbiAgICBNZXNzYWdlcyhvcHRpb25zOiBQYXlQYWxDb21tZXJjZU1lc3NhZ2VzT3B0aW9ucyk6IFBheVBhbENvbW1lcmNlTWVzc2FnZXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlybU9yZGVyRGF0YSB7XG4gICAgdG9rZW5pemF0aW9uRGF0YToge1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIHRva2VuOiBzdHJpbmc7XG4gICAgfTtcbiAgICBpbmZvOiB7XG4gICAgICAgIGNhcmROZXR3b3JrOiBzdHJpbmc7XG4gICAgICAgIGNhcmREZXRhaWxzOiBzdHJpbmc7XG4gICAgfTtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR29vZ2xlUGF5Q29uZmlnIHtcbiAgICBhbGxvd2VkUGF5bWVudE1ldGhvZHM6IEFsbG93ZWRQYXltZW50TWV0aG9kc1tdO1xuICAgIGFwaVZlcnNpb246IG51bWJlcjtcbiAgICBhcGlWZXJzaW9uTWlub3I6IG51bWJlcjtcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIGlzRWxpZ2libGU6IGJvb2xlYW47XG4gICAgbWVyY2hhbnRJbmZvOiB7XG4gICAgICAgIG1lcmNoYW50SWQ6IHN0cmluZztcbiAgICAgICAgbWVyY2hhbnRPcmlnaW46IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFsbG93ZWRQYXltZW50TWV0aG9kcyB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgYWxsb3dlZEF1dGhNZXRob2RzOiBzdHJpbmdbXTtcbiAgICAgICAgYWxsb3dlZENhcmROZXR3b3Jrczogc3RyaW5nW107XG4gICAgICAgIGJpbGxpbmdBZGRyZXNzUmVxdWlyZWQ6IGJvb2xlYW47XG4gICAgICAgIGFzc3VyYW5jZURldGFpbHNSZXF1aXJlZDogYm9vbGVhbjtcbiAgICAgICAgYmlsbGluZ0FkZHJlc3NQYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHRva2VuaXphdGlvblNwZWNpZmljYXRpb246IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICBnYXRld2F5OiBzdHJpbmc7XG4gICAgICAgICAgICBnYXRld2F5TWVyY2hhbnRJZDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCB0eXBlIFBheVBhbExlZ2FsID0gKHBhcmFtczogeyBmdW5kaW5nU291cmNlOiBzdHJpbmcgfSkgPT4ge1xuICAgIHJlbmRlcihjb250YWluZXI6IHN0cmluZyk6IHZvaWQ7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIExlZ2FsRnVuZGluZyB7XG4gICAgRlVORElORzoge1xuICAgICAgICBQQVlfVVBPTl9JTlZPSUNFOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaXJ0aERhdGUge1xuICAgIGdldEZ1bGxZZWFyKCk6IG51bWJlcjtcbiAgICBnZXREYXRlKCk6IG51bWJlcjtcbiAgICBnZXRNb250aCgpOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VTY3JpcHRQYXJhbXMge1xuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgJ2NsaWVudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdtZXJjaGFudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdidXllci1jb3VudHJ5Jz86IHN0cmluZztcbiAgICAgICAgJ2Rpc2FibGUtZnVuZGluZyc/OiBGdW5kaW5nVHlwZTtcbiAgICAgICAgJ2VuYWJsZS1mdW5kaW5nJz86IEVuYWJsZUZ1bmRpbmdUeXBlO1xuICAgICAgICBjdXJyZW5jeT86IHN0cmluZztcbiAgICAgICAgY29tbWl0PzogYm9vbGVhbjtcbiAgICAgICAgaW50ZW50PzogUGF5UGFsQ29tbWVyY2VJbnRlbnQ7XG4gICAgICAgIGNvbXBvbmVudHM/OiBDb21wb25lbnRzU2NyaXB0VHlwZTtcbiAgICB9O1xuICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgJ2RhdGEtY2xpZW50LXRva2VuJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtY2xpZW50LW1ldGFkYXRhLWlkJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLXVzZXItaWQtdG9rZW4nPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBlbnVtIFBheVBhbENvbW1lcmNlSW50ZW50IHtcbiAgICBBVVRIT1JJWkUgPSAnYXV0aG9yaXplJyxcbiAgICBDQVBUVVJFID0gJ2NhcHR1cmUnLFxufVxuXG5leHBvcnQgdHlwZSBDb21wb25lbnRzU2NyaXB0VHlwZSA9IEFycmF5PFxuICAgIHwgJ2J1dHRvbnMnXG4gICAgfCAnZnVuZGluZy1lbGlnaWJpbGl0eSdcbiAgICB8ICdob3N0ZWQtZmllbGRzJ1xuICAgIHwgJ21lc3NhZ2VzJ1xuICAgIHwgJ3BheW1lbnQtZmllbGRzJ1xuICAgIHwgJ2xlZ2FsJ1xuICAgIHwgJ2dvb2dsZXBheSdcbiAgICB8ICdjb25uZWN0J1xuICAgIHwgJ2NhcmQtZmllbGRzJ1xuPjtcblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIHBheXBhbD86IFBheVBhbFNESztcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEluaXRpYWxpemF0aW9uIERhdGFcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIGF0dHJpYnV0aW9uSWQ/OiBzdHJpbmc7XG4gICAgYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczogRnVuZGluZ1R5cGU7XG4gICAgYnV0dG9uU3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgYnV5ZXJDb3VudHJ5Pzogc3RyaW5nO1xuICAgIGNsaWVudElkOiBzdHJpbmc7XG4gICAgY2xpZW50VG9rZW4/OiBzdHJpbmc7XG4gICAgZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM6IEZ1bmRpbmdUeXBlO1xuICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGU/OiBib29sZWFuO1xuICAgIGludGVudD86IFBheVBhbENvbW1lcmNlSW50ZW50O1xuICAgIGlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkPzogYm9vbGVhbjtcbiAgICBpc1BheVBhbENyZWRpdEF2YWlsYWJsZT86IGJvb2xlYW47XG4gICAgaXNWZW5tb0VuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzR29vZ2xlUGF5RW5hYmxlZD86IGJvb2xlYW47XG4gICAgbWVyY2hhbnRJZD86IHN0cmluZztcbiAgICBvcmRlcklkPzogc3RyaW5nO1xuICAgIHNob3VsZFJlbmRlckZpZWxkcz86IGJvb2xlYW47XG4gICAgc2hvdWxkUnVuQWNjZWxlcmF0ZWRDaGVja291dD86IGJvb2xlYW47XG4gICAgcGF5bWVudEJ1dHRvblN0eWxlcz86IFJlY29yZDxzdHJpbmcsIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucz47XG4gICAgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24/OiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW1bXTtcbiAgICBpc0FwcFN3aXRjaEVuYWJsZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgc3RhdHVzOiBib29sZWFuO1xuICAgIHN0eWxlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEJ1eU5vd1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyB7XG4gICAgZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KCk6IEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keTtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEhvc3RlZCBGaWVsZHNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zIHtcbiAgICBmaWVsZHM/OiB7XG4gICAgICAgIG51bWJlcj86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRPcHRpb247XG4gICAgICAgIGN2dj86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRPcHRpb247XG4gICAgICAgIGV4cGlyYXRpb25EYXRlPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZE9wdGlvbjtcbiAgICB9O1xuICAgIHBheW1lbnRzU0RLPzogYm9vbGVhbjtcbiAgICBzdHlsZXM/OiB7XG4gICAgICAgIGlucHV0PzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJy5pbnZhbGlkJz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgICAgICcudmFsaWQnPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJzpmb2N1cyc/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgIH07XG4gICAgY3JlYXRlT3JkZXIoKTogUHJvbWlzZTxzdHJpbmc+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRPcHRpb24ge1xuICAgIHNlbGVjdG9yOiBzdHJpbmc7XG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHMge1xuICAgIHN1Ym1pdChcbiAgICAgICAgb3B0aW9ucz86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzU3VibWl0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzQXBwcm92ZT47XG4gICAgZ2V0U3RhdGUoKTogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNTdGF0ZTtcbiAgICBvbihldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s6IChldmVudDogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNTdGF0ZSkgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNTdWJtaXRPcHRpb25zIHtcbiAgICBjb250aW5nZW5jaWVzPzogQXJyYXk8JzNEX1NFQ1VSRSc+O1xuICAgIGNhcmRob2xkZXJOYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzQXBwcm92ZSB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIGxpYWJpbGl0eVNoaWZ0PzogJ1BPU1NJQkxFJyB8ICdOTycgfCAnVU5LTk9XTic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNTdGF0ZSB7XG4gICAgY2FyZHM6IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzQ2FyZFtdO1xuICAgIGVtaXR0ZWRCeTogc3RyaW5nO1xuICAgIGZpZWxkczoge1xuICAgICAgICBudW1iZXI/OiBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvbkRhdGU/OiBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvbk1vbnRoPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGV4cGlyYXRpb25ZZWFyPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGN2dj86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBwb3N0YWxDb2RlPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0NhcmQge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBuaWNlVHlwZTogc3RyaW5nO1xuICAgIGNvZGU6IHtcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICBzaXplOiBudW1iZXI7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0ZpZWxkRGF0YSB7XG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBpc0ZvY3VzZWQ6IGJvb2xlYW47XG4gICAgaXNFbXB0eTogYm9vbGVhbjtcbiAgICBpc1BvdGVudGlhbGx5VmFsaWQ6IGJvb2xlYW47XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEJ1dHRvbnNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VCdXR0b25zIHtcbiAgICByZW5kZXIoaWQ6IHN0cmluZyk6IHZvaWQ7XG4gICAgY2xvc2UoKTogdm9pZDtcbiAgICBpc0VsaWdpYmxlKCk6IGJvb2xlYW47XG4gICAgaGFzUmV0dXJuZWQ/KCk6IGJvb2xlYW47XG4gICAgcmVzdW1lPygpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMge1xuICAgIGV4cGVyaWVuY2U/OiBzdHJpbmc7XG4gICAgc3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgZnVuZGluZ1NvdXJjZTogc3RyaW5nO1xuICAgIGNyZWF0ZU9yZGVyKCk6IFByb21pc2U8c3RyaW5nPjtcbiAgICBvbkFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgKTogUHJvbWlzZTxib29sZWFuIHwgdm9pZD4gfCB2b2lkO1xuICAgIG9uSW5pdD8oZGF0YTogSW5pdENhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogSW5pdENhbGxiYWNrQWN0aW9ucyk6IFByb21pc2U8dm9pZD47XG4gICAgb25Db21wbGV0ZT8oZGF0YTogQ29tcGxldGVDYWxsYmFja0RhdGFQYXlsb2FkKTogUHJvbWlzZTx2b2lkPjtcbiAgICBvbkNsaWNrPyhkYXRhOiBDbGlja0NhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQ2xpY2tDYWxsYmFja0FjdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHwgdm9pZDtcbiAgICBvbkVycm9yPyhlcnJvcjogRXJyb3IpOiB2b2lkO1xuICAgIG9uQ2FuY2VsPygpOiB2b2lkO1xuICAgIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlPyhkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQpOiBQcm9taXNlPHZvaWQ+O1xuICAgIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlPyhkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCk6IFByb21pc2U8dm9pZD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbiAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uOiBQYXlQYWxTZWxlY3RlZFNoaXBwaW5nT3B0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNoaXBwaW5nQWRkcmVzczogUGF5UGFsQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDbGlja0NhbGxiYWNrUGF5bG9hZCB7XG4gICAgZnVuZGluZ1NvdXJjZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsaWNrQ2FsbGJhY2tBY3Rpb25zIHtcbiAgICByZWplY3QoKTogdm9pZDtcbiAgICByZXNvbHZlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5pdENhbGxiYWNrUGF5bG9hZCB7XG4gICAgY29ycmVsYXRpb25JRDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluaXRDYWxsYmFja0FjdGlvbnMge1xuICAgIGRpc2FibGUoKTogdm9pZDtcbiAgICBlbmFibGUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxBZGRyZXNzIHtcbiAgICBjaXR5OiBzdHJpbmc7XG4gICAgY291bnRyeUNvZGU6IHN0cmluZztcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgc3RhdGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxBZGRyZXNzQ2FsbGJhY2tEYXRhIHtcbiAgICBjaXR5OiBzdHJpbmc7XG4gICAgY291bnRyeV9jb2RlOiBzdHJpbmc7XG4gICAgcG9zdGFsX2NvZGU6IHN0cmluZztcbiAgICBzdGF0ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFNlbGVjdGVkU2hpcHBpbmdPcHRpb24ge1xuICAgIGFtb3VudDoge1xuICAgICAgICBjdXJyZW5jeV9jb2RlOiBzdHJpbmc7XG4gICAgICAgIHZhbHVlOiBzdHJpbmc7XG4gICAgfTtcbiAgICBpZDogc3RyaW5nO1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgc2VsZWN0ZWQ6IGJvb2xlYW47XG4gICAgdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFwcHJvdmVDYWxsYmFja1BheWxvYWQge1xuICAgIG9yZGVySUQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyB7XG4gICAgb3JkZXI6IHtcbiAgICAgICAgZ2V0OiAoKSA9PiBQcm9taXNlPFBheVBhbE9yZGVyRGV0YWlscz47XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlckRldGFpbHMge1xuICAgIHBheWVyOiB7XG4gICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgIGdpdmVuX25hbWU6IHN0cmluZztcbiAgICAgICAgICAgIHN1cm5hbWU6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgZW1haWxfYWRkcmVzczogc3RyaW5nO1xuICAgICAgICBhZGRyZXNzOiBQYXlQYWxPcmRlckFkZHJlc3M7XG4gICAgICAgIHBob25lPzoge1xuICAgICAgICAgICAgcGhvbmVfbnVtYmVyOiB7XG4gICAgICAgICAgICAgICAgbmF0aW9uYWxfbnVtYmVyOiBzdHJpbmc7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH07XG4gICAgcHVyY2hhc2VfdW5pdHM6IEFycmF5PHtcbiAgICAgICAgc2hpcHBpbmc6IHtcbiAgICAgICAgICAgIGFkZHJlc3M6IFBheVBhbE9yZGVyQWRkcmVzcztcbiAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICBmdWxsX25hbWU6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJBZGRyZXNzIHtcbiAgICBhZGRyZXNzX2xpbmVfMTogc3RyaW5nO1xuICAgIGFkZHJlc3NfbGluZV8yOiBzdHJpbmc7XG4gICAgYWRtaW5fYXJlYV8yOiBzdHJpbmc7XG4gICAgYWRtaW5fYXJlYV8xPzogc3RyaW5nO1xuICAgIHBvc3RhbF9jb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeV9jb2RlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGVDYWxsYmFja0RhdGFQYXlsb2FkIHtcbiAgICBpbnRlbnQ6IHN0cmluZztcbiAgICBvcmRlcklEOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uTGFiZWwge1xuICAgIHBheXBhbCA9ICdwYXlwYWwnLFxuICAgIGNoZWNrb3V0ID0gJ2NoZWNrb3V0JyxcbiAgICBidXlub3cgPSAnYnV5bm93JyxcbiAgICBwYXkgPSAncGF5JyxcbiAgICBpbnN0YWxsbWVudCA9ICdpbnN0YWxsbWVudCcsXG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uQ29sb3Ige1xuICAgIGdvbGQgPSAnZ29sZCcsXG4gICAgYmx1ZSA9ICdibHVlJyxcbiAgICBzaWx2ZXIgPSAnc2lsdmVyJyxcbiAgICBibGFjayA9ICdibGFjaycsXG4gICAgd2hpdGUgPSAnd2hpdGUnLFxufVxuXG5leHBvcnQgZW51bSBTdHlsZUJ1dHRvblNoYXBlIHtcbiAgICBwaWxsID0gJ3BpbGwnLFxuICAgIHJlY3QgPSAncmVjdCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zIHtcbiAgICBjb2xvcj86IFN0eWxlQnV0dG9uQ29sb3I7XG4gICAgc2hhcGU/OiBTdHlsZUJ1dHRvblNoYXBlO1xuICAgIGhlaWdodD86IG51bWJlcjtcbiAgICBsYWJlbD86IFN0eWxlQnV0dG9uTGFiZWw7XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBDb21tZXJjZSBQYXltZW50IGZpZWxkc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZVBheW1lbnRGaWVsZHMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZVBheW1lbnRGaWVsZHNPcHRpb25zIHtcbiAgICBzdHlsZT86IFBheVBhbENvbW1lcmNlRmllbGRzU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbiAgICBmaWVsZHM6IHtcbiAgICAgICAgbmFtZT86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbD86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VGaWVsZHNTdHlsZU9wdGlvbnMge1xuICAgIHZhcmlhYmxlcz86IHtcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZVNtPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZU0/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTGc/OiBzdHJpbmc7XG4gICAgICAgIHRleHRDb2xvcj86IHN0cmluZztcbiAgICAgICAgY29sb3JUZXh0UGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yQmFja2dyb3VuZD86IHN0cmluZztcbiAgICAgICAgY29sb3JJbmZvPzogc3RyaW5nO1xuICAgICAgICBjb2xvckRhbmdlcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckZvY3VzQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIHNwYWNpbmdVbml0Pzogc3RyaW5nO1xuICAgIH07XG4gICAgcnVsZXM/OiB7XG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgICB9O1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWxDb21tZXJjZSBNZXNzYWdlc1xuICovXG4vLyBUT0RPOiBUaGlzIGludGVyZmFjZSBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBQYXlQYXlTREsgaW50ZXJmYWNlIGlzIHJlbW92ZWRcbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VNZXNzYWdlcyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xufVxuXG4vLyBUT0RPOiBUaGlzIGludGVyZmFjZSBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBQYXlQYXlTREsgaW50ZXJmYWNlIGlzIHJlbW92ZWRcbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VNZXNzYWdlc09wdGlvbnMge1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIHBsYWNlbWVudDogc3RyaW5nO1xuICAgIHN0eWxlPzogUGF5UGFsQ29tbWVyY2VNZXNzYWdlc1N0eWxlT3B0aW9ucztcbiAgICBmdW5kaW5nU291cmNlPzogc3RyaW5nO1xufVxuXG4vLyBUT0RPOiBUaGlzIGludGVyZmFjZSBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBQYXlQYXlTREsgaW50ZXJmYWNlIGlzIHJlbW92ZWRcbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VNZXNzYWdlc1N0eWxlT3B0aW9ucyB7XG4gICAgbGF5b3V0Pzogc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBPdGhlclxuICpcbiAqL1xuZXhwb3J0IGVudW0gTm9uSW5zdGFudEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMge1xuICAgIE9YWE8gPSAnb3h4bycsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJEYXRhIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2V0dXBUb2tlbj86IHN0cmluZztcbiAgICBhcHByb3ZlVXJsOiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUb2tlbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxVcGRhdGVPcmRlclJlcXVlc3RCb2R5IHtcbiAgICBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnM/OiBTaGlwcGluZ09wdGlvbltdO1xuICAgIGNhcnRJZDogc3RyaW5nO1xuICAgIHNlbGVjdGVkU2hpcHBpbmdPcHRpb24/OiBTaGlwcGluZ09wdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxVcGRhdGVPcmRlclJlc3BvbnNlIHtcbiAgICBzdGF0dXNDb2RlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keSBleHRlbmRzIEhvc3RlZEluc3RydW1lbnQsIFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICBjYXJ0SWQ6IHN0cmluZztcbiAgICBtZXRhZGF0YUlkPzogc3RyaW5nO1xuICAgIHNldHVwVG9rZW4/OiBib29sZWFuO1xuICAgIGZhc3RsYW5lVG9rZW4/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFBheVBhbE9yZGVyU3RhdHVzIHtcbiAgICBBcHByb3ZlZCA9ICdBUFBST1ZFRCcsXG4gICAgQ3JlYXRlZCA9ICdDUkVBVEVEJyxcbiAgICBQYXllckFjdGlvblJlcXVpcmVkID0gJ1BBWUVSX0FDVElPTl9SRVFVSVJFRCcsXG4gICAgUG9sbGluZ1N0b3AgPSAnUE9MTElOR19TVE9QJyxcbiAgICBQb2xsaW5nRXJyb3IgPSAnUE9MTElOR19FUlJPUicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJTdGF0dXNEYXRhIHtcbiAgICBzdGF0dXM6IFBheVBhbE9yZGVyU3RhdHVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENyZWF0ZU9yZGVyQ2FyZEZpZWxkc1Jlc3BvbnNlIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2V0dXBUb2tlbj86IHN0cmluZztcbn1cbiIsImltcG9ydCB7IEZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgaXNOaWwsIG9taXRCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSxcbiAgICBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcixcbiAgICBDYXJ0LFxuICAgIENhcnRTb3VyY2UsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxuICAgIFJlcXVlc3RFcnJvcixcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbiAgICBTaGlwcGluZ09wdGlvbixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtcmVxdWVzdC1zZW5kZXInO1xuaW1wb3J0IFBheVBhbENvbW1lcmNlU2NyaXB0TG9hZGVyIGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXNjcmlwdC1sb2FkZXInO1xuaW1wb3J0IHtcbiAgICBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMsXG4gICAgUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsQ3JlYXRlT3JkZXJDYXJkRmllbGRzUmVzcG9uc2UsXG4gICAgUGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXlQYWxPcmRlckRldGFpbHMsXG4gICAgUGF5UGFsT3JkZXJTdGF0dXMsXG4gICAgUGF5UGFsU0RLLFxuICAgIFN0eWxlQnV0dG9uQ29sb3IsXG4gICAgU3R5bGVCdXR0b25MYWJlbCxcbiAgICBTdHlsZUJ1dHRvblNoYXBlLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIHtcbiAgICBwcml2YXRlIHBheXBhbFNkaz86IFBheVBhbFNESztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGZvcm1Qb3N0ZXI6IEZvcm1Qb3N0ZXIsXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXI6IFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlcixcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZVNjcmlwdExvYWRlcjogUGF5UGFsQ29tbWVyY2VTY3JpcHRMb2FkZXIsXG4gICAgKSB7fVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXlQYWxTREsgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgbG9hZFBheVBhbFNkayhcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcHJvdmlkZWRDdXJyZW5jeUNvZGU/OiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUxvYWQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5UGFsU0RLIHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IHByb3ZpZGVkQ3VycmVuY3lDb2RlIHx8IHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIHRoaXMucGF5cGFsU2RrID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVNjcmlwdExvYWRlci5nZXRQYXlQYWxTREsoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZSxcbiAgICAgICAgICAgIGZvcmNlTG9hZCxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5wYXlwYWxTZGs7XG4gICAgfVxuXG4gICAgZ2V0UGF5UGFsU2RrT3JUaHJvdygpOiBQYXlQYWxTREsge1xuICAgICAgICBpZiAoIXRoaXMucGF5cGFsU2RrKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnBheXBhbFNkaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1eSBOb3cgY2FydCBjcmVhdGlvbiBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBjcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyhcbiAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM6IFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8Q2FydD4ge1xuICAgICAgICBjb25zdCBjYXJ0UmVxdWVzdEJvZHkgPSBidXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkoKTtcblxuICAgICAgICBpZiAoIWNhcnRSZXF1ZXN0Qm9keSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NhcnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydChjYXJ0UmVxdWVzdEJvZHkpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEJ1eU5vd0NhcnRDcmVhdGlvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIE9yZGVyIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZU9yZGVyKFxuICAgICAgICBwcm92aWRlcklkOiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3RCb2R5PzogUGFydGlhbDxQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5PixcbiAgICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmlkO1xuXG4gICAgICAgIGNvbnN0IHsgb3JkZXJJZCB9ID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIuY3JlYXRlT3JkZXIocHJvdmlkZXJJZCwge1xuICAgICAgICAgICAgY2FydElkLFxuICAgICAgICAgICAgLi4ucmVxdWVzdEJvZHksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBvcmRlcklkO1xuICAgIH1cblxuICAgIGFzeW5jIGNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyhcbiAgICAgICAgcHJvdmlkZXJJZDogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Qm9keT86IFBhcnRpYWw8UGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keT4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxDcmVhdGVPcmRlckNhcmRGaWVsZHNSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmlkO1xuXG4gICAgICAgIGNvbnN0IHsgb3JkZXJJZCwgc2V0dXBUb2tlbiB9ID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICBwcm92aWRlcklkLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhcnRJZCxcbiAgICAgICAgICAgICAgICAuLi5yZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHsgb3JkZXJJZCwgLi4uKHNldHVwVG9rZW4gPyB7IHNldHVwVG9rZW4gfSA6IHt9KSB9O1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZU9yZGVyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgY29uc2lnbm1lbnQgPSBzdGF0ZS5nZXRDb25zaWdubWVudHNPclRocm93KClbMF07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyLnVwZGF0ZU9yZGVyKHtcbiAgICAgICAgICAgICAgICBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnM6IGNvbnNpZ25tZW50LmF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBjYXJ0SWQ6IGNhcnQuaWQsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbjogY29uc2lnbm1lbnQuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZXF1ZXN0RXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldE9yZGVyU3RhdHVzKG1ldGhvZElkPzogc3RyaW5nLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPFBheVBhbE9yZGVyU3RhdHVzPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IHN0YXR1cyB9ID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIuZ2V0T3JkZXJTdGF0dXMoXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdGF0dXM7XG4gICAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXltZW50IHN1Ym1pdHRpbmcgYW5kIHRva2VuaXppbmcgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgdG9rZW5pemVQYXltZW50KG1ldGhvZElkOiBzdHJpbmcsIG9yZGVySWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2FydCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFvcmRlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtUG9zdGVyLnBvc3RGb3JtKCcvY2hlY2tvdXQucGhwJywge1xuICAgICAgICAgICAgcGF5bWVudF90eXBlOiAncGF5cGFsJyxcbiAgICAgICAgICAgIGFjdGlvbjogJ3NldF9leHRlcm5hbF9jaGVja291dCcsXG4gICAgICAgICAgICBwcm92aWRlcjogbWV0aG9kSWQsXG4gICAgICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgICAgIC4uLihjYXJ0LnNvdXJjZSA9PT0gQ2FydFNvdXJjZS5CdXlOb3cgJiYgeyBjYXJ0X2lkOiBjYXJ0LmlkIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBzdWJtaXRQYXltZW50KG1ldGhvZElkOiBzdHJpbmcsIG9yZGVySWQ6IHN0cmluZywgZ2F0ZXdheUlkPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0ge1xuICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICBkZXZpY2VfaW5mbzogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXRob2RfaWQ6IG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBvcmRlcklkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGEsXG4gICAgICAgICAgICAuLi4oZ2F0ZXdheUlkID8geyBnYXRld2F5SWQgfSA6IHt9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBTaGlwcGluZyBvcHRpb25zIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyhzZWxlY3RlZFNoaXBwaW5nT3B0aW9uSWQ/OiBzdHJpbmcpOiBTaGlwcGluZ09wdGlvbiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNvbnNpZ25tZW50ID0gc3RhdGUuZ2V0Q29uc2lnbm1lbnRzT3JUaHJvdygpWzBdO1xuXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyA9IGNvbnNpZ25tZW50LmF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyB8fCBbXTtcblxuICAgICAgICBjb25zdCByZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uID0gYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLmZpbmQoXG4gICAgICAgICAgICAob3B0aW9uKSA9PiBvcHRpb24uaXNSZWNvbW1lbmRlZCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uID0gc2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkXG4gICAgICAgICAgICA/IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucy5maW5kKChvcHRpb24pID0+IG9wdGlvbi5pZCA9PT0gc2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkKVxuICAgICAgICAgICAgOiBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMuZmluZChcbiAgICAgICAgICAgICAgICAgIChvcHRpb24pID0+IG9wdGlvbi5pZCA9PT0gY29uc2lnbm1lbnQuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbj8uaWQsXG4gICAgICAgICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb25Ub1NlbGVjdCA9XG4gICAgICAgICAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uIHx8IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24gfHwgYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zWzBdO1xuXG4gICAgICAgIGlmICghc2hpcHBpbmdPcHRpb25Ub1NlbGVjdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91ciBvcmRlciBjYW4ndCBiZSBzaGlwcGVkIHRvIHRoaXMgYWRkcmVzc1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzaGlwcGluZ09wdGlvblRvU2VsZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQWRkcmVzcyB0cmFuc2Zvcm1pbmcgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgZ2V0QWRkcmVzcyhhZGRyZXNzPzogUGFydGlhbDxCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5Pik6IEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlyc3ROYW1lOiBhZGRyZXNzPy5maXJzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBsYXN0TmFtZTogYWRkcmVzcz8ubGFzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBlbWFpbDogYWRkcmVzcz8uZW1haWwgfHwgJycsXG4gICAgICAgICAgICBwaG9uZTogYWRkcmVzcz8ucGhvbmUgfHwgJycsXG4gICAgICAgICAgICBjb21wYW55OiAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MxOiBhZGRyZXNzPy5hZGRyZXNzMSB8fCAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBhZGRyZXNzPy5hZGRyZXNzMiB8fCAnJyxcbiAgICAgICAgICAgIGNpdHk6IGFkZHJlc3M/LmNpdHkgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcz8uY291bnRyeUNvZGUgfHwgJycsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzPy5wb3N0YWxDb2RlIHx8ICcnLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlOiAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGFkZHJlc3M/LnN0YXRlT3JQcm92aW5jZUNvZGUgfHwgJycsXG4gICAgICAgICAgICBjdXN0b21GaWVsZHM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyh7IHBheWVyIH06IFBheVBhbE9yZGVyRGV0YWlscyk6IEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGZpcnN0TmFtZTogcGF5ZXIubmFtZS5naXZlbl9uYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHBheWVyLm5hbWUuc3VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBwYXllci5lbWFpbF9hZGRyZXNzLFxuICAgICAgICAgICAgYWRkcmVzczE6IHBheWVyLmFkZHJlc3MuYWRkcmVzc19saW5lXzEsXG4gICAgICAgICAgICBhZGRyZXNzMjogcGF5ZXIuYWRkcmVzcy5hZGRyZXNzX2xpbmVfMixcbiAgICAgICAgICAgIGNpdHk6IHBheWVyLmFkZHJlc3MuYWRtaW5fYXJlYV8yLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IHBheWVyLmFkZHJlc3MuY291bnRyeV9jb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogcGF5ZXIuYWRkcmVzcy5wb3N0YWxfY29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IHBheWVyLmFkZHJlc3MuYWRtaW5fYXJlYV8xLFxuICAgICAgICAgICAgcGhvbmU6IHBheWVyLnBob25lPy5waG9uZV9udW1iZXI/Lm5hdGlvbmFsX251bWJlcixcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgb3JkZXJEZXRhaWxzOiBQYXlQYWxPcmRlckRldGFpbHMsXG4gICAgKTogQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSB7XG4gICAgICAgIGNvbnN0IHsgcGF5ZXIsIHB1cmNoYXNlX3VuaXRzIH0gPSBvcmRlckRldGFpbHM7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGFkZHJlc3MsXG4gICAgICAgICAgICBuYW1lOiB7IGZ1bGxfbmFtZSB9LFxuICAgICAgICB9ID0gcHVyY2hhc2VfdW5pdHNbMF0uc2hpcHBpbmc7XG5cbiAgICAgICAgY29uc3QgW2ZpcnN0TmFtZSwgLi4ubGFzdE5hbWVdID0gZnVsbF9uYW1lLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogbGFzdE5hbWUuam9pbignICcpLFxuICAgICAgICAgICAgZW1haWw6IHBheWVyLmVtYWlsX2FkZHJlc3MsXG4gICAgICAgICAgICBhZGRyZXNzMTogYWRkcmVzcy5hZGRyZXNzX2xpbmVfMSxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBhZGRyZXNzLmFkZHJlc3NfbGluZV8yLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcy5hZG1pbl9hcmVhXzIsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcy5jb3VudHJ5X2NvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzLnBvc3RhbF9jb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogYWRkcmVzcy5hZG1pbl9hcmVhXzEsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV0dG9ucyBzdHlsZSBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBnZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlPzogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zKTogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zIHtcbiAgICAgICAgY29uc3QgeyBjb2xvciwgaGVpZ2h0LCBsYWJlbCwgc2hhcGUgfSA9IHN0eWxlIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHZhbGlkU3R5bGVzID0ge1xuICAgICAgICAgICAgY29sb3I6IGNvbG9yICYmIFN0eWxlQnV0dG9uQ29sb3JbY29sb3JdID8gY29sb3IgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZ2V0VmFsaWRIZWlnaHQoaGVpZ2h0KSxcbiAgICAgICAgICAgIGxhYmVsOiBsYWJlbCAmJiBTdHlsZUJ1dHRvbkxhYmVsW2xhYmVsXSA/IGxhYmVsIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2hhcGU6IHNoYXBlICYmIFN0eWxlQnV0dG9uU2hhcGVbc2hhcGVdID8gc2hhcGUgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG9taXRCeSh2YWxpZFN0eWxlcywgaXNOaWwpO1xuICAgIH1cblxuICAgIGdldFZhbGlkSGVpZ2h0KGhlaWdodD86IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRIZWlnaHQgPSA0MDtcbiAgICAgICAgY29uc3QgbWluSGVpZ2h0ID0gMjU7XG4gICAgICAgIGNvbnN0IG1heEhlaWdodCA9IDU1O1xuXG4gICAgICAgIGlmICghaGVpZ2h0IHx8IHR5cGVvZiBoZWlnaHQgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdEhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoZWlnaHQgPiBtYXhIZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXhIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVpZ2h0IDwgbWluSGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gbWluSGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHJlbW92ZUVsZW1lbnQoZWxlbWVudElkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50SWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcblxuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgLy8gRm9yIG5vdyB0aGlzIGlzIGEgdGVtcG9yYXJ5IHNvbHV0aW9uLCBmdXJ0aGVyIHJlbW92ZUVsZW1lbnQgbWV0aG9kIHdpbGwgYmUgcmVtb3ZlZFxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IElOVEVSTkFMX1VTRV9PTkxZID1cbiAgICAnVGhpcyBBUEkgZW5kcG9pbnQgaXMgZm9yIGludGVybmFsIHVzZSBvbmx5IGFuZCBtYXkgY2hhbmdlIGluIHRoZSBmdXR1cmUnO1xuIiwiZW51bSBDb250ZW50VHlwZSB7XG4gICAgSnNvbiA9ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICBKc29uVjEgPSAnYXBwbGljYXRpb24vdm5kLmJjLnYxK2pzb24nLFxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250ZW50VHlwZTtcbiIsImV4cG9ydCBjb25zdCBTREtfVkVSU0lPTl9IRUFERVJTID0geyAnWC1DaGVja291dC1TREstVmVyc2lvbic6IExJQlJBUllfVkVSU0lPTiB9O1xuIiwiaW1wb3J0IHsgUmVxdWVzdFNlbmRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCB7XG4gICAgQ29udGVudFR5cGUsXG4gICAgSU5URVJOQUxfVVNFX09OTFksXG4gICAgUmVxdWVzdE9wdGlvbnMsXG4gICAgU0RLX1ZFUlNJT05fSEVBREVSUyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgUGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXlQYWxPcmRlckRhdGEsXG4gICAgUGF5UGFsT3JkZXJTdGF0dXNEYXRhLFxuICAgIFBheVBhbFVwZGF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5UGFsVXBkYXRlT3JkZXJSZXNwb25zZSxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVxdWVzdFNlbmRlcjogUmVxdWVzdFNlbmRlcikge31cblxuICAgIGFzeW5jIGNyZWF0ZU9yZGVyKFxuICAgICAgICBwcm92aWRlcklkOiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3RCb2R5OiBQYXJ0aWFsPFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHk+LFxuICAgICk6IFByb21pc2U8UGF5UGFsT3JkZXJEYXRhPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3N0b3JlZnJvbnQvcGF5bWVudC8ke3Byb3ZpZGVySWR9YDtcbiAgICAgICAgY29uc3QgYm9keSA9IHJlcXVlc3RCb2R5O1xuICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgJ1gtQVBJLUlOVEVSTkFMJzogSU5URVJOQUxfVVNFX09OTFksXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogQ29udGVudFR5cGUuSnNvbixcbiAgICAgICAgICAgIC4uLlNES19WRVJTSU9OX0hFQURFUlMsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0U2VuZGVyLnBvc3Q8UGF5UGFsT3JkZXJEYXRhPih1cmwsIHsgaGVhZGVycywgYm9keSB9KTtcblxuICAgICAgICByZXR1cm4gcmVzLmJvZHk7XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlT3JkZXIoXG4gICAgICAgIHJlcXVlc3RCb2R5OiBQYXlQYWxVcGRhdGVPcmRlclJlcXVlc3RCb2R5LFxuICAgICk6IFByb21pc2U8UGF5UGFsVXBkYXRlT3JkZXJSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9zdG9yZWZyb250L2luaXRpYWxpemF0aW9uL3BheXBhbGNvbW1lcmNlYDtcbiAgICAgICAgY29uc3QgYm9keSA9IHJlcXVlc3RCb2R5O1xuICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgJ1gtQVBJLUlOVEVSTkFMJzogSU5URVJOQUxfVVNFX09OTFksXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogQ29udGVudFR5cGUuSnNvbixcbiAgICAgICAgICAgIC4uLlNES19WRVJTSU9OX0hFQURFUlMsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0U2VuZGVyLnB1dDxQYXlQYWxVcGRhdGVPcmRlclJlc3BvbnNlPih1cmwsIHsgaGVhZGVycywgYm9keSB9KTtcblxuICAgICAgICByZXR1cm4gcmVzLmJvZHk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0T3JkZXJTdGF0dXMoXG4gICAgICAgIG1ldGhvZElkID0gJ3BheXBhbGNvbW1lcmNlJyxcbiAgICAgICAgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zLFxuICAgICk6IFByb21pc2U8UGF5UGFsT3JkZXJTdGF0dXNEYXRhPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3N0b3JlZnJvbnQvaW5pdGlhbGl6YXRpb24vJHttZXRob2RJZH1gO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgJ1gtQVBJLUlOVEVSTkFMJzogSU5URVJOQUxfVVNFX09OTFksXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogQ29udGVudFR5cGUuSnNvbixcbiAgICAgICAgICAgIC4uLlNES19WRVJTSU9OX0hFQURFUlMsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0U2VuZGVyLmdldDxQYXlQYWxPcmRlclN0YXR1c0RhdGE+KHVybCwge1xuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuYm9keTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBDb21wb25lbnRzU2NyaXB0VHlwZSxcbiAgICBGdW5kaW5nVHlwZSxcbiAgICBQYXlQYWxDb21tZXJjZUhvc3RXaW5kb3csXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsQ29tbWVyY2VTY3JpcHRQYXJhbXMsXG4gICAgUGF5UGFsU0RLLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlU2NyaXB0TG9hZGVyIHtcbiAgICBwcml2YXRlIHdpbmRvdzogUGF5UGFsQ29tbWVyY2VIb3N0V2luZG93O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcikge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxTREsoXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZT86IGJvb2xlYW4sXG4gICAgICAgIGZvcmNlTG9hZD86IGJvb2xlYW4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxTREs+IHtcbiAgICAgICAgY29uc3QgcGF5cGFsU2RrU2NyaXB0Q29uZmlnID0gdGhpcy5nZXRQYXlQYWxTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZFBheVBhbFNESyhwYXlwYWxTZGtTY3JpcHRDb25maWcsIGZvcmNlTG9hZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkUGF5UGFsU0RLKFxuICAgICAgICBwYXlwYWxTZGtTY3JpcHRDb25maWc6IFBheVBhbENvbW1lcmNlU2NyaXB0UGFyYW1zLFxuICAgICAgICBmb3JjZUxvYWQgPSBmYWxzZSxcbiAgICApOiBQcm9taXNlPFBheVBhbFNESz4ge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbCB8fCBmb3JjZUxvYWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLnRyYW5zZm9ybUNvbmZpZzxQYXlQYWxDb21tZXJjZVNjcmlwdFBhcmFtc1snb3B0aW9ucyddPihcbiAgICAgICAgICAgICAgICBwYXlwYWxTZGtTY3JpcHRDb25maWcub3B0aW9ucyxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gdGhpcy50cmFuc2Zvcm1Db25maWc8UGF5UGFsQ29tbWVyY2VTY3JpcHRQYXJhbXNbJ2F0dHJpYnV0ZXMnXT4oXG4gICAgICAgICAgICAgICAgcGF5cGFsU2RrU2NyaXB0Q29uZmlnLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBwYXlwYWxTZGtVcmwgPSAnaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9zZGsvanMnO1xuICAgICAgICAgICAgY29uc3Qgc2NyaXB0UXVlcnkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKG9wdGlvbnMpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBzY3JpcHRTcmMgPSBgJHtwYXlwYWxTZGtVcmx9PyR7c2NyaXB0UXVlcnl9YDtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChzY3JpcHRTcmMsIHsgYXN5bmM6IHRydWUsIGF0dHJpYnV0ZXMgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5UGFsU2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlID0gdHJ1ZSxcbiAgICApOiBQYXlQYWxDb21tZXJjZVNjcmlwdFBhcmFtcyB7XG4gICAgICAgIGNvbnN0IHsgaWQsIGNsaWVudFRva2VuLCBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGE/LmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAgIG1lcmNoYW50SWQsXG4gICAgICAgICAgICBidXllckNvdW50cnksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgaXNWZW5tb0VuYWJsZWQsXG4gICAgICAgICAgICBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCxcbiAgICAgICAgICAgIGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlLFxuICAgICAgICAgICAgaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgIGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMgPSBbXSxcbiAgICAgICAgICAgIGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzID0gW10sXG4gICAgICAgICAgICBpc0dvb2dsZVBheUVuYWJsZWQsXG4gICAgICAgIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgY29uc3QgY29tbWl0ID0gaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgfHwgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZTtcblxuICAgICAgICBjb25zdCBzaG91bGRFbmFibGVDYXJkID0gaWQgPT09ICdwYXlwYWxjb21tZXJjZWNyZWRpdGNhcmRzJztcbiAgICAgICAgY29uc3QgZW5hYmxlQ2FyZEZ1bmRpbmcgPSBzaG91bGRFbmFibGVDYXJkID8gWydjYXJkJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZUNhcmRGdW5kaW5nID0gIXNob3VsZEVuYWJsZUNhcmQgPyBbJ2NhcmQnXSA6IFtdO1xuXG4gICAgICAgIGNvbnN0IGVuYWJsZUNyZWRpdEZ1bmRpbmcgPSBpc1BheVBhbENyZWRpdEF2YWlsYWJsZSA/IFsnY3JlZGl0JywgJ3BheWxhdGVyJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZUNyZWRpdEZ1bmRpbmcgPSAhaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUgPyBbJ2NyZWRpdCcsICdwYXlsYXRlciddIDogW107XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkRW5hYmxlQVBNcyA9IGluaXRpYWxpemVzT25DaGVja291dFBhZ2UgfHwgIWNvbW1pdDtcbiAgICAgICAgY29uc3QgZW5hYmxlVmVubW9GdW5kaW5nID0gaXNWZW5tb0VuYWJsZWQgPyBbJ3Zlbm1vJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZVZlbm1vRnVuZGluZyA9ICFpc1Zlbm1vRW5hYmxlZCA/IFsndmVubW8nXSA6IFtdO1xuICAgICAgICBjb25zdCBlbmFibGVBUE1zRnVuZGluZyA9IHNob3VsZEVuYWJsZUFQTXMgPyBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlQVBNc0Z1bmRpbmcgPSBzaG91bGRFbmFibGVBUE1zXG4gICAgICAgICAgICA/IGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgKGFwbTogc3RyaW5nKSA9PiAhZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMuaW5jbHVkZXMoYXBtKSxcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgOiBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzO1xuICAgICAgICBjb25zdCBnb29nbGVQYXlDb21wb25lbnQ6IENvbXBvbmVudHNTY3JpcHRUeXBlID0gaXNHb29nbGVQYXlFbmFibGVkID8gWydnb29nbGVwYXknXSA6IFtdO1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzQ29tcG9uZW50OiBDb21wb25lbnRzU2NyaXB0VHlwZSA9IGluaXRpYWxpemVzT25DaGVja291dFBhZ2VcbiAgICAgICAgICAgID8gWydjYXJkLWZpZWxkcyddXG4gICAgICAgICAgICA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlRnVuZGluZzogRnVuZGluZ1R5cGUgPSBbXG4gICAgICAgICAgICAuLi5kaXNhYmxlQ2FyZEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5kaXNhYmxlQ3JlZGl0RnVuZGluZyxcbiAgICAgICAgICAgIC4uLmRpc2FibGVWZW5tb0Z1bmRpbmcsXG4gICAgICAgICAgICAuLi5kaXNhYmxlQVBNc0Z1bmRpbmcsXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGVuYWJsZUZ1bmRpbmc6IEZ1bmRpbmdUeXBlID0gW1xuICAgICAgICAgICAgLi4uZW5hYmxlQ2FyZEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVDcmVkaXRGdW5kaW5nLFxuICAgICAgICAgICAgLi4uZW5hYmxlVmVubW9GdW5kaW5nLFxuICAgICAgICAgICAgLi4uZW5hYmxlQVBNc0Z1bmRpbmcsXG4gICAgICAgIF07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICAnZW5hYmxlLWZ1bmRpbmcnOiBlbmFibGVGdW5kaW5nLmxlbmd0aCA+IDAgPyBlbmFibGVGdW5kaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnOiBkaXNhYmxlRnVuZGluZy5sZW5ndGggPiAwID8gZGlzYWJsZUZ1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY29tbWl0LFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbnMnLFxuICAgICAgICAgICAgICAgICAgICAnaG9zdGVkLWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdwYXltZW50LWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdsZWdhbCcsXG4gICAgICAgICAgICAgICAgICAgIC4uLmdvb2dsZVBheUNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgLi4uY2FyZEZpZWxkc0NvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLWNsaWVudC10b2tlbic6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYW5zZm9ybUNvbmZpZzxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KGNvbmZpZzogVCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgICAgICBsZXQgdHJhbnNmb3JtZWRDb25maWcgPSB7fTtcblxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY29uZmlnKSBhcyBBcnJheTxrZXlvZiBUPjtcblxuICAgICAgICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjb25maWdba2V5XTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSAnJyB8fFxuICAgICAgICAgICAgICAgIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYW5zZm9ybWVkQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgIC4uLnRyYW5zZm9ybWVkQ29uZmlnLFxuICAgICAgICAgICAgICAgIFtrZXldOiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLmpvaW4oJywnKSA6IHZhbHVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkQ29uZmlnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgY3JlYXRlUmVxdWVzdFNlbmRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5pbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIsXG4gICAgUGF5UGFsQ29tbWVyY2VTY3JpcHRMb2FkZXIsXG59IGZyb20gJy4vaW5kZXgnO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgY29uc3QgeyBnZXRIb3N0IH0gPSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICByZXR1cm4gbmV3IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKFxuICAgICAgICBjcmVhdGVGb3JtUG9zdGVyKCksXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIG5ldyBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIoY3JlYXRlUmVxdWVzdFNlbmRlcih7IGhvc3Q6IGdldEhvc3QoKSB9KSksXG4gICAgICAgIG5ldyBQYXlQYWxDb21tZXJjZVNjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSksXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlO1xuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBtZXRob2QgaXMgdW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGVcbiAqIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgYXJndW1lbnRzIGFjY29yZGluZyB0byB0aGVpciByZXF1aXJlbWVudHMsXG4gKiBpLmUuOiBpZiBhbiBhcmd1bWVudCBpcyBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnSW52YWxpZCBhcmd1bWVudHMgaGF2ZSBiZWVuIHByb3ZpZGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkQXJndW1lbnRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdpbnZhbGlkX2FyZ3VtZW50JztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBDdXN0b21lckNyZWRlbnRpYWxzLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDdXN0b21lckluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VDdXN0b21lclN0cmF0ZWd5IGltcGxlbWVudHMgQ3VzdG9tZXJTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBvbkVycm9yID0gbm9vcDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheXBhbGNvbW1lcmNlLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlLmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXlwYWxjb21tZXJjZS5vbkNsaWNrICYmIHR5cGVvZiBwYXlwYWxjb21tZXJjZS5vbkNsaWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2Uub25DbGlja1wiIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vbkVycm9yID0gcGF5cGFsY29tbWVyY2Uub25FcnJvciB8fCBub29wO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIXBheW1lbnRNZXRob2QpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5cGFsU2RrIHx8ICFwYXlwYWxTZGsuQnV0dG9ucyB8fCB0eXBlb2YgcGF5cGFsU2RrLkJ1dHRvbnMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgJ1tCQyBQYXlQYWxdOiBQYXlQYWwgQnV0dG9uIGNvdWxkIG5vdCBiZSByZW5kZXJlZCwgZHVlIHRvIGlzc3VlcyB3aXRoIGxvYWRpbmcgUGF5UGFsIFNESycsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgcGF5cGFsY29tbWVyY2UpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25JbihjcmVkZW50aWFsczogQ3VzdG9tZXJDcmVkZW50aWFscywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihjcmVkZW50aWFscywgb3B0aW9ucyk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25PdXQob3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIob3B0aW9ucyk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQob3B0aW9ucz86IEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIG9wdGlvbnM/LmNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2s/LigpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsY29tbWVyY2U6IFBheVBhbENvbW1lcmNlQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uQ2xpY2ssIG9uQ29tcGxldGUgfSA9IHBheXBhbGNvbW1lcmNlO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsIHBheW1lbnRCdXR0b25TdHlsZXMsIGlzQXBwU3dpdGNoRW5hYmxlZCB9ID1cbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICAuLi4odGhpcy5pc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZChtZXRob2RJZCkgJiYge1xuICAgICAgICAgICAgICAgIGFwcFN3aXRjaFdoZW5BdmFpbGFibGU6IHRydWUsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdwYXlwYWxjb21tZXJjZScpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICAgICAgLi4uKG9uQ2xpY2sgJiYgeyBvbkNsaWNrOiAoKSA9PiBvbkNsaWNrKCkgfSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICAuLi4oIWlzQXBwU3dpdGNoRW5hYmxlZCAmJiB7XG4gICAgICAgICAgICAgICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICAgICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nT3B0aW9uc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGRhdGEsIGFjdGlvbnMsIG1ldGhvZElkLCBvbkNvbXBsZXRlKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuUEFZUEFMLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZSh7XG4gICAgICAgICAgICAgICAgLi4uY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIC4uLmRlZmF1bHRDYWxsYmFja3MsXG4gICAgICAgICAgICAuLi4oaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgJiYgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChwYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmhhc1JldHVybmVkPy4oKSAmJiB0aGlzLmlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkKSkge1xuICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZXN1bWU/LigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b24ucmVuZGVyKGAjJHtjb250YWluZXJ9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25Ib3N0ZWRDaGVja291dEFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIG9uQ29tcGxldGU/OiAoKSA9PiB2b2lkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIWRhdGEub3JkZXJJRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FydCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyRGV0YWlscyA9IGF3YWl0IGFjdGlvbnMub3JkZXIuZ2V0KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGlmIChjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe30sIHsgcGFyYW1zOiB7IG1ldGhvZElkIH0gfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobWV0aG9kSWQsIGRhdGEub3JkZXJJRCk7XG5cbiAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICYmIHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEFkZHJlc3Moe1xuICAgICAgICAgICAgY2l0eTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5zdGF0ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEluZm86IHdlIHVzZSB0aGUgc2FtZSBhZGRyZXNzIHRvIGZpbGwgYmlsbGluZyBhbmQgc2hpcHBpbmcgYWRkcmVzc2VzIHRvIGhhdmUgdmFsaWQgcXVvdGEgb24gQkUgZm9yIG9yZGVyIHVwZGF0aW5nIHByb2Nlc3NcbiAgICAgICAgICAgIC8vIG9uIHRoaXMgc3RhZ2Ugd2UgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8gdmFsaWQgY3VzdG9tZXIncyBhZGRyZXNzIGV4Y2VwdCBzaGlwcGluZyBkYXRhXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYWRkcmVzcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKGFkZHJlc3MpO1xuXG4gICAgICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KFxuICAgICAgICAgICAgZGF0YS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheVBhbCBBcHBTd2l0Y2ggZW5hYmxpbmcgaGFuZGxpbmdcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5pc0FwcFN3aXRjaEVuYWJsZWQgfHwgZmFsc2U7XG4gICAgfVxufVxuIiwiY29uc3QgRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0ID0gMzY7XG5cbmV4cG9ydCBkZWZhdWx0IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodDtcbiIsImltcG9ydCB7XG4gICAgQ3VzdG9tZXJTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUN1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtY3VzdG9tZXItc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUN1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlQ3VzdG9tZXJTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZUN1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUN1c3RvbWVyU3RyYXRlZ3ksIFt7IGlkOiAncGF5cGFsY29tbWVyY2UnIH1dKTtcbiIsImltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEN1c3RvbWVyQ3JlZGVudGlhbHMsXG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lclN0cmF0ZWd5IGltcGxlbWVudHMgQ3VzdG9tZXJTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBvbkVycm9yID0gbm9vcDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheXBhbGNvbW1lcmNlY3JlZGl0LCBtZXRob2RJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlY3JlZGl0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlY3JlZGl0LmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlY3JlZGl0LmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXlwYWxjb21tZXJjZWNyZWRpdC5vbkNsaWNrICYmIHR5cGVvZiBwYXlwYWxjb21tZXJjZWNyZWRpdC5vbkNsaWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXQub25DbGlja1wiIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vbkVycm9yID0gcGF5cGFsY29tbWVyY2VjcmVkaXQub25FcnJvciB8fCBub29wO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIXBheW1lbnRNZXRob2QpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5cGFsU2RrIHx8ICFwYXlwYWxTZGsuQnV0dG9ucyB8fCB0eXBlb2YgcGF5cGFsU2RrLkJ1dHRvbnMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgJ1tCQyBQYXlQYWxdOiBQYXlQYWwgQnV0dG9uIGNvdWxkIG5vdCBiZSByZW5kZXJlZCwgZHVlIHRvIGlzc3VlcyB3aXRoIGxvYWRpbmcgUGF5UGFsIFNESycsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgcGF5cGFsY29tbWVyY2VjcmVkaXQpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25JbihjcmVkZW50aWFsczogQ3VzdG9tZXJDcmVkZW50aWFscywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihjcmVkZW50aWFscywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbk91dChvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihvcHRpb25zKTtcbiAgICB9XG5cbiAgICBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBvcHRpb25zPy5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrPy4oKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbENvbW1lcmNlQ3JlZGl0OiBQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkNvbXBsZXRlLCBvbkNsaWNrIH0gPSBwYXlwYWxDb21tZXJjZUNyZWRpdDtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLCBwYXltZW50QnV0dG9uU3R5bGVzLCBpc0FwcFN3aXRjaEVuYWJsZWQgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFRvcEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcigncGF5cGFsY29tbWVyY2VjcmVkaXQnKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgICAgIC4uLihvbkNsaWNrICYmIHsgb25DbGljazogKCkgPT4gb25DbGljaygpIH0pLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgLi4uKCFpc0FwcFN3aXRjaEVuYWJsZWQgJiYge1xuICAgICAgICAgICAgICAgIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgICAgIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vbkhvc3RlZENoZWNrb3V0QXBwcm92ZShkYXRhLCBhY3Rpb25zLCBtZXRob2RJZCwgb25Db21wbGV0ZSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZnVuZGluZ1NvdXJjZXMgPSBbcGF5cGFsU2RrLkZVTkRJTkcuUEFZTEFURVIsIHBheXBhbFNkay5GVU5ESU5HLkNSRURJVF07XG4gICAgICAgIGxldCBoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uID0gZmFsc2U7XG5cbiAgICAgICAgZnVuZGluZ1NvdXJjZXMuZm9yRWFjaCgoZnVuZGluZ1NvdXJjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZnVuZGluZ1NvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGVja291dFRvcEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkICYmIGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzKSxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b24ucmVuZGVyKGAjJHtjb250YWluZXJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uKSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25Ib3N0ZWRDaGVja291dEFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIG9uQ29tcGxldGU/OiAoKSA9PiB2b2lkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIWRhdGEub3JkZXJJRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FydCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyRGV0YWlscyA9IGF3YWl0IGFjdGlvbnMub3JkZXIuZ2V0KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGlmIChjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe30sIHsgcGFyYW1zOiB7IG1ldGhvZElkIH0gfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobWV0aG9kSWQsIGRhdGEub3JkZXJJRCk7XG5cbiAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICYmIHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEFkZHJlc3Moe1xuICAgICAgICAgICAgY2l0eTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5zdGF0ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEluZm86IHdlIHVzZSB0aGUgc2FtZSBhZGRyZXNzIHRvIGZpbGwgYmlsbGluZyBhbmQgc2hpcHBpbmcgYWRkcmVzc2VzIHRvIGhhdmUgdmFsaWQgcXVvdGEgb24gQkUgZm9yIG9yZGVyIHVwZGF0aW5nIHByb2Nlc3NcbiAgICAgICAgICAgIC8vIG9uIHRoaXMgc3RhZ2Ugd2UgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8gdmFsaWQgY3VzdG9tZXIncyBhZGRyZXNzIGV4Y2VwdCBzaGlwcGluZyBkYXRhXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYWRkcmVzcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKGFkZHJlc3MpO1xuXG4gICAgICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KFxuICAgICAgICAgICAgZGF0YS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lclN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdwYXlwYWxjb21tZXJjZWNyZWRpdCcgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lckNyZWRlbnRpYWxzLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbn0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lckluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS12ZW5tby1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJTdHJhdGVneSBpbXBsZW1lbnRzIEN1c3RvbWVyU3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VWZW5tb0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsY29tbWVyY2V2ZW5tbywgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZXZlbm1vKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2V2ZW5tb1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2V2ZW5tby5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZXZlbm1vLmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXlwYWxjb21tZXJjZXZlbm1vLm9uQ2xpY2sgJiYgdHlwZW9mIHBheXBhbGNvbW1lcmNldmVubW8ub25DbGljayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNldmVubW8ub25DbGlja1wiIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5bWVudE1ldGhvZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFwYXlwYWxTZGsgfHwgIXBheXBhbFNkay5CdXR0b25zIHx8IHR5cGVvZiBwYXlwYWxTZGsuQnV0dG9ucyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICAnW0JDIFBheVBhbF06IFBheVBhbCBCdXR0b24gY291bGQgbm90IGJlIHJlbmRlcmVkLCBkdWUgdG8gaXNzdWVzIHdpdGggbG9hZGluZyBQYXlQYWwgU0RLJyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZXZlbm1vKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduSW4oY3JlZGVudGlhbHM6IEN1c3RvbWVyQ3JlZGVudGlhbHMsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoY3JlZGVudGlhbHMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25PdXQob3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChvcHRpb25zPzogRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgb3B0aW9ucz8uY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjaz8uKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxjb21tZXJjZXZlbm1vOiBQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uQ2xpY2sgfSA9IHBheXBhbGNvbW1lcmNldmVubW87XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBwYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFRvcEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuVkVOTU8sXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHtcbiAgICAgICAgICAgICAgICAuLi5jaGVja291dFRvcEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcigncGF5cGFsY29tbWVyY2V2ZW5tbycpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICAgICAgLi4uKG9uQ2xpY2sgJiYgeyBvbkNsaWNrOiAoKSA9PiBvbkNsaWNrKCkgfSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uUmVuZGVyID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHBheXBhbEJ1dHRvblJlbmRlci5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHBheXBhbEJ1dHRvblJlbmRlci5yZW5kZXIoYCMke2NvbnRhaW5lcn1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLWN1c3RvbWVyLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VWZW5tb0N1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lclN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lclN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VWZW5tb0N1c3RvbWVyU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2V2ZW5tbycgfSxcbl0pO1xuIiwiaW1wb3J0IHsgSG9zdGVkSW5zdHJ1bWVudCwgTm9uY2VJbnN0cnVtZW50IH0gZnJvbSAnLi9wYXltZW50JztcblxudHlwZSBQYXltZW50SW5zdHJ1bWVudCA9IENhcmRJbnN0cnVtZW50IHwgQWNjb3VudEluc3RydW1lbnQgfCBIb3N0ZWRJbnN0cnVtZW50IHwgTm9uY2VJbnN0cnVtZW50O1xuXG5leHBvcnQgZGVmYXVsdCBQYXltZW50SW5zdHJ1bWVudDtcblxuZXhwb3J0IGludGVyZmFjZSBCYXNlSW5zdHJ1bWVudCB7XG4gICAgYmlncGF5VG9rZW46IHN0cmluZztcbiAgICBkZWZhdWx0SW5zdHJ1bWVudDogYm9vbGVhbjtcbiAgICBwcm92aWRlcjogc3RyaW5nO1xuICAgIHRydXN0ZWRTaGlwcGluZ0FkZHJlc3M6IGJvb2xlYW47XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBVbnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25UeXBlIHtcbiAgICBDVlYgPSAnY3Z2JyxcbiAgICBQQU4gPSAncGFuJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VJbnN0cnVtZW50IHtcbiAgICBicmFuZDogc3RyaW5nO1xuICAgIGV4cGlyeU1vbnRoOiBzdHJpbmc7XG4gICAgZXhwaXJ5WWVhcjogc3RyaW5nO1xuICAgIGlpbjogc3RyaW5nO1xuICAgIGxhc3Q0OiBzdHJpbmc7XG4gICAgdHlwZTogJ2NhcmQnO1xuICAgIHVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvbk1vZGU6IFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGU7XG59XG5cbmludGVyZmFjZSBCYXNlQWNjb3VudEluc3RydW1lbnQgZXh0ZW5kcyBCYXNlSW5zdHJ1bWVudCB7XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdHlwZTogJ2FjY291bnQnIHwgJ2JhbmsnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEluc3RydW1lbnQgZXh0ZW5kcyBCYXNlQWNjb3VudEluc3RydW1lbnQge1xuICAgIGV4dGVybmFsSWQ6IHN0cmluZztcbiAgICBtZXRob2Q6ICdwYXlwYWwnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFjaEluc3RydW1lbnQgZXh0ZW5kcyBCYXNlQWNjb3VudEluc3RydW1lbnQge1xuICAgIGlzc3Vlcjogc3RyaW5nO1xuICAgIGFjY291bnROdW1iZXI6IHN0cmluZztcbiAgICB0eXBlOiAnYmFuayc7XG4gICAgbWV0aG9kOiAnYWNoJyB8ICdlY3AnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhbmtJbnN0cnVtZW50IGV4dGVuZHMgQmFzZUFjY291bnRJbnN0cnVtZW50IHtcbiAgICBhY2NvdW50TnVtYmVyOiBzdHJpbmc7XG4gICAgaXNzdWVyOiBzdHJpbmc7XG4gICAgaWJhbjogc3RyaW5nO1xuICAgIG1ldGhvZDogc3RyaW5nO1xuICAgIHR5cGU6ICdiYW5rJztcbn1cblxuZXhwb3J0IHR5cGUgQWNjb3VudEluc3RydW1lbnQgPSBQYXlQYWxJbnN0cnVtZW50IHwgQmFua0luc3RydW1lbnQgfCBBY2hJbnN0cnVtZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0QWNjZXNzVG9rZW4ge1xuICAgIHZhdWx0QWNjZXNzVG9rZW46IHN0cmluZztcbiAgICB2YXVsdEFjY2Vzc0V4cGlyeTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25Db250ZXh0IHtcbiAgICBjdXN0b21lcklkOiBudW1iZXI7XG4gICAgc3RvcmVJZDogc3RyaW5nO1xuICAgIGN1cnJlbmN5Q29kZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnN0cnVtZW50UmVxdWVzdENvbnRleHQgZXh0ZW5kcyBTZXNzaW9uQ29udGV4dCB7XG4gICAgYXV0aFRva2VuOiBzdHJpbmc7XG59XG4iLCJpbXBvcnQgeyBDYXJkSW5zdHJ1bWVudCwgQ3VzdG9tZXJBZGRyZXNzIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbi8qKlxuICpcbiAqIFBheVBhbCBDb21tZXJjZSBGdW5kaW5nIHNvdXJjZXNcbiAqXG4gKi9cbmV4cG9ydCB0eXBlIEZ1bmRpbmdUeXBlID0gc3RyaW5nW107XG5leHBvcnQgdHlwZSBFbmFibGVGdW5kaW5nVHlwZSA9IEZ1bmRpbmdUeXBlIHwgc3RyaW5nO1xuXG4vKipcbiAqXG4gKiBQYXlQYWwgQ29tbWVyY2UgSW5pdGlhbGl6YXRpb24gRGF0YVxuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSB7XG4gICAgYXR0cmlidXRpb25JZD86IHN0cmluZztcbiAgICBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzOiBGdW5kaW5nVHlwZTtcbiAgICBidXR0b25TdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucztcbiAgICBidXllckNvdW50cnk/OiBzdHJpbmc7XG4gICAgY2xpZW50SWQ6IHN0cmluZztcbiAgICBjbGllbnRUb2tlbj86IHN0cmluZztcbiAgICBmYXN0bGFuZVN0eWxlcz86IEZhc3RsYW5lU3R5bGVzU2V0dGluZ3M7XG4gICAgY29ubmVjdENsaWVudFRva2VuPzogc3RyaW5nOyAvLyBUT0RPOiByZW1vdmUgd2hlbiBQUENQIEZhc3RsYW5lIEEvQiB0ZXN0IHdpbGwgYmUgZmluaXNoZWRcbiAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczogRnVuZGluZ1R5cGU7XG4gICAgaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZT86IGJvb2xlYW47XG4gICAgaW50ZW50PzogUGF5UGFsQ29tbWVyY2VJbnRlbnQ7XG4gICAgaXNBY2NlbGVyYXRlZENoZWNrb3V0RW5hYmxlZD86IGJvb2xlYW47IC8vIFBheVBhbCBGYXN0bGFuZSByZWxhdGVkXG4gICAgaXNGYXN0bGFuZVNoaXBwaW5nT3B0aW9uQXV0b1NlbGVjdEVuYWJsZWQ/OiBib29sZWFuOyAvLyBQYXlQYWwgRmFzdGxhbmUgcmVsYXRlZFxuICAgIGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzUGF5UGFsQ29tbWVyY2VBbmFseXRpY3NWMkVuYWJsZWQ/OiBib29sZWFuOyAvLyBQYXlQYWwgRmFzdGxhbmUgcmVsYXRlZFxuICAgIGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlPzogYm9vbGVhbjtcbiAgICBpc1Zlbm1vRW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNHb29nbGVQYXlFbmFibGVkPzogYm9vbGVhbjtcbiAgICBtZXJjaGFudElkPzogc3RyaW5nO1xuICAgIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgc2hvdWxkUmVuZGVyRmllbGRzPzogYm9vbGVhbjtcbiAgICBzaG91bGRSdW5BY2NlbGVyYXRlZENoZWNrb3V0PzogYm9vbGVhbjsgLy8gVE9ETzogcmVtb3ZlIHdoZW4gUFBDUCBGYXN0bGFuZSBBL0IgdGVzdCB3aWxsIGJlIGZpbmlzaGVkXG4gICAgcGF5bWVudEJ1dHRvblN0eWxlcz86IFJlY29yZDxzdHJpbmcsIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucz47XG4gICAgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24/OiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW1bXTtcbiAgICB0aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kPzogc3RyaW5nO1xuICAgIGlzQXBwU3dpdGNoRW5hYmxlZD86IGJvb2xlYW47XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbENvbW1lcmNlSG9zdFdpbmRvdyBjb250YWlucyBkaWZmZXJlbnRcbiAqIFBheVBhbCBTZGsgaW5zdGFuY2VzIGZvciBkaWZmZXJlbnQgcHVycG9zZXNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0V2luZG93IGV4dGVuZHMgV2luZG93IHtcbiAgICBwYXlwYWxGYXN0bGFuZT86IFBheVBhbEZhc3RsYW5lO1xuICAgIHBheXBhbEZhc3RsYW5lU2RrPzogUGF5UGFsRmFzdGxhbmVTZGs7XG4gICAgcGF5cGFsTWVzc2FnZXM/OiBQYXlQYWxNZXNzYWdlc1NkaztcbiAgICBwYXlwYWxBcG1zPzogUGF5UGFsQXBtU2RrO1xuICAgIHBheXBhbEdvb2dsZVBheT86IFBheVBhbEdvb2dsZVBheVNkaztcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIFNESyBjb25maWdcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsU2RrQ29uZmlnIHtcbiAgICBvcHRpb25zOiB7XG4gICAgICAgICdjbGllbnQtaWQnPzogc3RyaW5nO1xuICAgICAgICAnbWVyY2hhbnQtaWQnPzogc3RyaW5nO1xuICAgICAgICAnYnV5ZXItY291bnRyeSc/OiBzdHJpbmc7XG4gICAgICAgICdlbmFibGUtZnVuZGluZyc/OiBFbmFibGVGdW5kaW5nVHlwZTtcbiAgICAgICAgJ2Rpc2FibGUtZnVuZGluZyc/OiBGdW5kaW5nVHlwZTtcbiAgICAgICAgY3VycmVuY3k/OiBzdHJpbmc7XG4gICAgICAgIGNvbW1pdD86IGJvb2xlYW47XG4gICAgICAgIGludGVudD86IFBheVBhbENvbW1lcmNlSW50ZW50O1xuICAgICAgICBjb21wb25lbnRzPzogUGF5UGFsU2RrQ29tcG9uZW50cztcbiAgICB9O1xuICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgJ2RhdGEtY2xpZW50LW1ldGFkYXRhLWlkJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLXNkay1jbGllbnQtdG9rZW4nPzogc3RyaW5nO1xuICAgICAgICAnZGF0YS1uYW1lc3BhY2UnPzogc3RyaW5nO1xuICAgICAgICAnZGF0YS1jbGllbnQtdG9rZW4nPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBlbnVtIFBheVBhbENvbW1lcmNlSW50ZW50IHtcbiAgICBBVVRIT1JJWkUgPSAnYXV0aG9yaXplJyxcbiAgICBDQVBUVVJFID0gJ2NhcHR1cmUnLFxufVxuXG5leHBvcnQgdHlwZSBQYXlQYWxTZGtDb21wb25lbnRzID0gQXJyYXk8XG4gICAgfCAnZmFzdGxhbmUnXG4gICAgfCAnbWVzc2FnZXMnXG4gICAgfCAnYnV0dG9ucydcbiAgICB8ICdwYXltZW50LWZpZWxkcydcbiAgICB8ICd0aHJlZS1kb21haW4tc2VjdXJlJ1xuICAgIHwgJ2hvc3RlZC1maWVsZHMnXG4gICAgfCAnZ29vZ2xlcGF5J1xuPjtcblxuLyoqXG4gKlxuICogUGF5UGFsIFNkayBpbnN0YW5jZXNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVTZGsge1xuICAgIFRocmVlRG9tYWluU2VjdXJlQ2xpZW50OiB7XG4gICAgICAgIGlzRWxpZ2libGUocGFyYW1zOiB0aHJlZURTZWN1cmVQYXJhbWV0ZXJzKTogUHJvbWlzZTxib29sZWFuPjtcbiAgICAgICAgc2hvdygpOiBQcm9taXNlPFRocmVlRG9tYWluU2VjdXJlQ2xpZW50U2hvd1Jlc3BvbnNlPjtcbiAgICB9O1xuICAgIEZhc3RsYW5lKG9wdGlvbnM/OiBQYXlQYWxGYXN0bGFuZU9wdGlvbnMpOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lPjtcbn1cblxuaW50ZXJmYWNlIFRocmVlRG9tYWluU2VjdXJlQ2xpZW50U2hvd1Jlc3BvbnNlIHtcbiAgICBsaWFiaWxpdHlTaGlmdDogTGlhYmlsaXR5U2hpZnRFbnVtO1xuICAgIGF1dGhlbnRpY2F0aW9uU3RhdGU6IFREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZTtcbiAgICBub25jZTogc3RyaW5nOyAvLyBFbnJpY2hlZCBub25jZSBvciB0aGUgb3JpZ2luYWwgbm9uY2Vcbn1cblxuZXhwb3J0IGVudW0gVERTZWN1cmVBdXRoZW50aWNhdGlvblN0YXRlIHtcbiAgICBTdWNjZWVkZWQgPSAnc3VjY2VlZGVkJyxcbiAgICBDYW5jZWxsZWQgPSAnY2FuY2VsbGVkJyxcbiAgICBFcnJvcmVkID0gJ2Vycm9yZWQnLFxufVxuXG5leHBvcnQgZW51bSBMaWFiaWxpdHlTaGlmdEVudW0ge1xuICAgIFBvc3NpYmxlID0gJ1BPU1NJQkxFJyxcbiAgICBObyA9ICdOTycsXG4gICAgVW5rbm93biA9ICdVTktOT1dOJyxcbiAgICBZZXMgPSAnWUVTJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSB0aHJlZURTZWN1cmVQYXJhbWV0ZXJzIHtcbiAgICBhbW91bnQ6IHN0cmluZztcbiAgICBjdXJyZW5jeTogc3RyaW5nO1xuICAgIG5vbmNlOiBzdHJpbmc7XG4gICAgdGhyZWVEU1JlcXVlc3RlZDogYm9vbGVhbjtcbiAgICB0cmFuc2FjdGlvbkNvbnRleHQ6IHtcbiAgICAgICAgZXhwZXJpZW5jZV9jb250ZXh0OiB7XG4gICAgICAgICAgICBicmFuZF9uYW1lPzogc3RyaW5nO1xuICAgICAgICAgICAgbG9jYWxlOiBzdHJpbmc7XG4gICAgICAgICAgICByZXR1cm5fdXJsOiBzdHJpbmc7XG4gICAgICAgICAgICBjYW5jZWxfdXJsOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxNZXNzYWdlc1NkayB7XG4gICAgTWVzc2FnZXMob3B0aW9uczogTWVzc2FnaW5nT3B0aW9ucyk6IE1lc3NhZ2luZ1JlbmRlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxBcG1TZGsge1xuICAgIEJ1dHRvbnMob3B0aW9uczogUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyk6IFBheVBhbENvbW1lcmNlQnV0dG9ucztcbiAgICBQYXltZW50RmllbGRzKG9wdGlvbnM6IFBheVBhbENvbW1lcmNlUGF5bWVudEZpZWxkc09wdGlvbnMpOiBQYXlQYWxDb21tZXJjZVBheW1lbnRGaWVsZHM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsR29vZ2xlUGF5U2RrIHtcbiAgICBHb29nbGVwYXkoKTogR29vZ2xlUGF5O1xufVxuXG4vKipcbiAqXG4gKiBHb29nbGUgUGF5IHJlbGF0ZWQgdHlwZXNcbiAqXG4gKi9cblxuaW50ZXJmYWNlIEdvb2dsZVBheSB7XG4gICAgY29uZmlnOiAoKSA9PiBQcm9taXNlPEdvb2dsZVBheUNvbmZpZz47XG4gICAgY29uZmlybU9yZGVyOiAoY29uZmlybU9yZGVyQ29uZmlnOiBDb25maXJtT3JkZXJDb25maWcpID0+IFByb21pc2U8eyBzdGF0dXM6IHN0cmluZyB9PjtcbiAgICBpbml0aWF0ZVBheWVyQWN0aW9uOiAocGF5ZXJBY3Rpb25Db25maWc6IFBheWVyQWN0aW9uQ29uZmlnKSA9PiBQcm9taXNlPHZvaWQ+O1xufVxuXG5pbnRlcmZhY2UgQ29uZmlybU9yZGVyQ29uZmlnIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgcGF5bWVudE1ldGhvZERhdGE6IENvbmZpcm1PcmRlckRhdGE7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlybU9yZGVyRGF0YSB7XG4gICAgdG9rZW5pemF0aW9uRGF0YToge1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIHRva2VuOiBzdHJpbmc7XG4gICAgfTtcbiAgICBpbmZvOiB7XG4gICAgICAgIGNhcmROZXR3b3JrOiBzdHJpbmc7XG4gICAgICAgIGNhcmREZXRhaWxzOiBzdHJpbmc7XG4gICAgfTtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBQYXllckFjdGlvbkNvbmZpZyB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdvb2dsZVBheUNvbmZpZyB7XG4gICAgYWxsb3dlZFBheW1lbnRNZXRob2RzOiBBbGxvd2VkUGF5bWVudE1ldGhvZHNbXTtcbiAgICBhcGlWZXJzaW9uOiBudW1iZXI7XG4gICAgYXBpVmVyc2lvbk1pbm9yOiBudW1iZXI7XG4gICAgY291bnRyeUNvZGU6IHN0cmluZztcbiAgICBpc0VsaWdpYmxlOiBib29sZWFuO1xuICAgIG1lcmNoYW50SW5mbzoge1xuICAgICAgICBtZXJjaGFudElkOiBzdHJpbmc7XG4gICAgICAgIG1lcmNoYW50T3JpZ2luOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbGxvd2VkUGF5bWVudE1ldGhvZHMge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIGFsbG93ZWRBdXRoTWV0aG9kczogc3RyaW5nW107XG4gICAgICAgIGFsbG93ZWRDYXJkTmV0d29ya3M6IHN0cmluZ1tdO1xuICAgICAgICBiaWxsaW5nQWRkcmVzc1JlcXVpcmVkOiBib29sZWFuO1xuICAgICAgICBhc3N1cmFuY2VEZXRhaWxzUmVxdWlyZWQ6IGJvb2xlYW47XG4gICAgICAgIGJpbGxpbmdBZGRyZXNzUGFyYW1ldGVyczoge1xuICAgICAgICAgICAgZm9ybWF0OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICB0b2tlbml6YXRpb25TcGVjaWZpY2F0aW9uOiB7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgICAgZ2F0ZXdheTogc3RyaW5nO1xuICAgICAgICAgICAgZ2F0ZXdheU1lcmNoYW50SWQ6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgQ29tbWVyY2UgQnV0dG9uc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUJ1dHRvbnMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbiAgICBjbG9zZSgpOiB2b2lkO1xuICAgIGlzRWxpZ2libGUoKTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zIHtcbiAgICBzdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucztcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG4gICAgY3JlYXRlT3JkZXIoKTogUHJvbWlzZTxzdHJpbmc+O1xuICAgIG9uQXBwcm92ZShcbiAgICAgICAgZGF0YTogUGF5UGFsQnV0dG9uQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogUGF5UGFsQnV0dG9uQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICApOiBQcm9taXNlPGJvb2xlYW4gfCB2b2lkPiB8IHZvaWQ7XG4gICAgb25Jbml0PyhcbiAgICAgICAgZGF0YTogUGF5UGFsQnV0dG9uSW5pdENhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogUGF5UGFsQnV0dG9uSW5pdENhbGxiYWNrQWN0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+O1xuICAgIG9uQ2xpY2s/KFxuICAgICAgICBkYXRhOiBQYXlQYWxCdXR0b25DbGlja0NhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogUGF5UGFsQnV0dG9uQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB8IHZvaWQ7XG4gICAgb25FcnJvcj8oZXJyb3I6IEVycm9yKTogdm9pZDtcbiAgICBvbkNhbmNlbD8oKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25DbGlja0NhbGxiYWNrUGF5bG9hZCB7XG4gICAgZnVuZGluZ1NvdXJjZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvbkNsaWNrQ2FsbGJhY2tBY3Rpb25zIHtcbiAgICByZWplY3QoKTogdm9pZDtcbiAgICByZXNvbHZlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uSW5pdENhbGxiYWNrUGF5bG9hZCB7XG4gICAgY29ycmVsYXRpb25JRDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvbkluaXRDYWxsYmFja0FjdGlvbnMge1xuICAgIGRpc2FibGUoKTogdm9pZDtcbiAgICBlbmFibGUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25BcHByb3ZlQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBvcmRlcklEPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvbkFwcHJvdmVDYWxsYmFja0FjdGlvbnMge1xuICAgIG9yZGVyOiB7XG4gICAgICAgIGdldDogKCkgPT4gUHJvbWlzZTxQYXlQYWxPcmRlckRldGFpbHM+O1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJEZXRhaWxzIHtcbiAgICBwYXllcjoge1xuICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICBnaXZlbl9uYW1lOiBzdHJpbmc7XG4gICAgICAgICAgICBzdXJuYW1lOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgICAgIGVtYWlsX2FkZHJlc3M6IHN0cmluZztcbiAgICAgICAgYWRkcmVzczogUGF5UGFsT3JkZXJBZGRyZXNzO1xuICAgIH07XG4gICAgcHVyY2hhc2VfdW5pdHM6IEFycmF5PHtcbiAgICAgICAgc2hpcHBpbmc6IHtcbiAgICAgICAgICAgIGFkZHJlc3M6IFBheVBhbE9yZGVyQWRkcmVzcztcbiAgICAgICAgfTtcbiAgICB9Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlckFkZHJlc3Mge1xuICAgIGFkZHJlc3NfbGluZV8xOiBzdHJpbmc7XG4gICAgYWRtaW5fYXJlYV8yOiBzdHJpbmc7XG4gICAgYWRtaW5fYXJlYV8xPzogc3RyaW5nO1xuICAgIHBvc3RhbF9jb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeV9jb2RlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uTGFiZWwge1xuICAgIHBheXBhbCA9ICdwYXlwYWwnLFxuICAgIGNoZWNrb3V0ID0gJ2NoZWNrb3V0JyxcbiAgICBidXlub3cgPSAnYnV5bm93JyxcbiAgICBwYXkgPSAncGF5JyxcbiAgICBpbnN0YWxsbWVudCA9ICdpbnN0YWxsbWVudCcsXG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uQ29sb3Ige1xuICAgIGdvbGQgPSAnZ29sZCcsXG4gICAgYmx1ZSA9ICdibHVlJyxcbiAgICBzaWx2ZXIgPSAnc2lsdmVyJyxcbiAgICBibGFjayA9ICdibGFjaycsXG4gICAgd2hpdGUgPSAnd2hpdGUnLFxufVxuXG5leHBvcnQgZW51bSBTdHlsZUJ1dHRvblNoYXBlIHtcbiAgICBwaWxsID0gJ3BpbGwnLFxuICAgIHJlY3QgPSAncmVjdCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zIHtcbiAgICBjb2xvcj86IFN0eWxlQnV0dG9uQ29sb3I7XG4gICAgc2hhcGU/OiBTdHlsZUJ1dHRvblNoYXBlO1xuICAgIGhlaWdodD86IG51bWJlcjtcbiAgICBsYWJlbD86IFN0eWxlQnV0dG9uTGFiZWw7XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBDb21tZXJjZSBQYXltZW50IGZpZWxkc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZVBheW1lbnRGaWVsZHMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZVBheW1lbnRGaWVsZHNPcHRpb25zIHtcbiAgICBzdHlsZT86IFBheVBhbENvbW1lcmNlRmllbGRzU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbiAgICBmaWVsZHM6IHtcbiAgICAgICAgbmFtZT86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbD86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VGaWVsZHNTdHlsZU9wdGlvbnMge1xuICAgIHZhcmlhYmxlcz86IHtcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZVNtPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZU0/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTGc/OiBzdHJpbmc7XG4gICAgICAgIHRleHRDb2xvcj86IHN0cmluZztcbiAgICAgICAgY29sb3JUZXh0UGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yQmFja2dyb3VuZD86IHN0cmluZztcbiAgICAgICAgY29sb3JJbmZvPzogc3RyaW5nO1xuICAgICAgICBjb2xvckRhbmdlcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckZvY3VzQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIHNwYWNpbmdVbml0Pzogc3RyaW5nO1xuICAgIH07XG4gICAgcnVsZXM/OiB7XG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgICB9O1xufVxuXG4vKipcbiAqXG4gKiBQYXlMYXRlciBNZXNzYWdlcyByZWxhdGVkIHR5cGVzXG4gKiBkb2M6IGh0dHBzOi8vZGV2ZWxvcGVyLnBheXBhbC5jb20vZG9jcy9jaGVja291dC9wYXktbGF0ZXIvdXMvaW50ZWdyYXRlL3JlZmVyZW5jZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2luZ1JlbmRlciB7XG4gICAgcmVuZGVyKGNvbnRhaW5lcjogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlc1N0eWxlT3B0aW9ucyB7XG4gICAgY29sb3I/OiBzdHJpbmc7IC8vICdibHVlJyB8ICdibGFjaycgfCAnd2hpdGUnIHwgJ3doaXRlLW5vLWJvcmRlcicgfCAnZ3JheScgfCAnbW9ub2Nocm9tZScgfCAnZ3JheXNjYWxlJ1xuICAgIGxheW91dD86IHN0cmluZzsgLy8gJ3RleHQnIHwgJ2ZsZXgnXG4gICAgbG9nbz86IHtcbiAgICAgICAgdHlwZT86IHN0cmluZzsgLy8gJ3ByaW1hcnknIHwgJ2FsdGVybmF0aXZlJyB8ICdpbmxpbmUnIHwgJ25vbmUnXG4gICAgICAgIHBvc2l0aW9uPzogc3RyaW5nOyAvLyAnbGVmdCcgfCAncmlnaHQnIHwgJ3RvcCdcbiAgICB9O1xuICAgIHJhdGlvPzogc3RyaW5nOyAvLyAnMXgxJyB8ICcxeDQnIHwgJzh4MScgfCAnMjB4MSdcbiAgICB0ZXh0Pzoge1xuICAgICAgICBhbGlnbj86IHN0cmluZzsgLy8gJ2xlZnQnIHwgJ3JpZ2h0JyB8ICdjZW50ZXInXG4gICAgICAgIGNvbG9yPzogc3RyaW5nOyAvLyAnYmxhY2snIHwgJ3doaXRlJyB8ICdtb25vY2hyb21lJyB8ICdncmF5c2NhbGUnXG4gICAgICAgIHNpemU/OiBudW1iZXI7IC8vIGZyb20gMTAgdG8gMTZcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2luZ09wdGlvbnMge1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIHBsYWNlbWVudDogc3RyaW5nO1xuICAgIHN0eWxlPzogTWVzc2FnZXNTdHlsZU9wdGlvbnM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBzdGF0dXM6IGJvb2xlYW47XG4gICAgc3R5bGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgRmFzdGxhbmUgcmVsYXRlZCB0eXBlc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZSB7XG4gICAgaWRlbnRpdHk6IFBheVBhbEZhc3RsYW5lSWRlbnRpdHk7XG4gICAgZXZlbnRzOiBQYXlQYWxGYXN0bGFuZUV2ZW50cztcbiAgICBwcm9maWxlOiBQYXlQYWxGYXN0bGFuZVByb2ZpbGU7XG4gICAgRmFzdGxhbmVDYXJkQ29tcG9uZW50KFxuICAgICAgICBvcHRpb25zOiBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRPcHRpb25zLFxuICAgICk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50TWV0aG9kcz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVPcHRpb25zIHtcbiAgICBzdHlsZXM/OiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUlkZW50aXR5IHtcbiAgICBsb29rdXBDdXN0b21lckJ5RW1haWwoZW1haWw6IHN0cmluZyk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVMb29rdXBDdXN0b21lckJ5RW1haWxSZXN1bHQ+O1xuICAgIHRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3coXG4gICAgICAgIGN1c3RvbWVyQ29udGV4dElkOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUxvb2t1cEN1c3RvbWVyQnlFbWFpbFJlc3VsdCB7XG4gICAgY3VzdG9tZXJDb250ZXh0SWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblJlc3VsdCB7XG4gICAgYXV0aGVudGljYXRpb25TdGF0ZT86IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZTtcbiAgICBwcm9maWxlRGF0YT86IFBheVBhbEZhc3RsYW5lUHJvZmlsZURhdGE7XG59XG5cbmV4cG9ydCBlbnVtIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSB7XG4gICAgU1VDQ0VFREVEID0gJ3N1Y2NlZWRlZCcsXG4gICAgRkFJTEVEID0gJ2ZhaWxlZCcsXG4gICAgQ0FOQ0VMRUQgPSAnY2FuY2VsZWQnLFxuICAgIFVOUkVDT0dOSVpFRCA9ICd1bnJlY29nbml6ZWQnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZURhdGEge1xuICAgIG5hbWU6IFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWU7XG4gICAgc2hpcHBpbmdBZGRyZXNzOiBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzcztcbiAgICBjYXJkOiBQYXlQYWxGYXN0bGFuZVByb2ZpbGVDYXJkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWUge1xuICAgIGZ1bGxOYW1lOiBzdHJpbmc7XG4gICAgZmlyc3ROYW1lPzogc3RyaW5nO1xuICAgIGxhc3ROYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZVBob25lIHtcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIG5hdGlvbmFsTnVtYmVyOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3Mge1xuICAgIG5hbWU6IFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWU7XG4gICAgcGhvbmVOdW1iZXI6IFBheVBhbEZhc3RsYW5lUHJvZmlsZVBob25lO1xuICAgIGFkZHJlc3M6IFBheVBhbEZhc3RsYW5lQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVByb2ZpbGVDYXJkIHtcbiAgICBpZDogc3RyaW5nOyAvLyBub25jZSAvIHRva2VuXG4gICAgcGF5bWVudFNvdXJjZTogUGF5UGFsRmFzdGxhbmVQYXltZW50U291cmNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUGF5bWVudFNvdXJjZSB7XG4gICAgY2FyZDogUGF5UGFsRmFzdGxhbmVDYXJkU291cmNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lQ2FyZFNvdXJjZSB7XG4gICAgYnJhbmQ6IHN0cmluZztcbiAgICBleHBpcnk6IHN0cmluZzsgLy8gXCJZWVlZLU1NXCJcbiAgICBsYXN0RGlnaXRzOiBzdHJpbmc7IC8vIFwiMTExMVwiXG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGJpbGxpbmdBZGRyZXNzOiBQYXlQYWxGYXN0bGFuZUFkZHJlc3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVBZGRyZXNzIHtcbiAgICBjb21wYW55Pzogc3RyaW5nO1xuICAgIGFkZHJlc3NMaW5lMTogc3RyaW5nO1xuICAgIGFkZHJlc3NMaW5lMj86IHN0cmluZztcbiAgICBhZG1pbkFyZWExOiBzdHJpbmc7IC8vIFN0YXRlXG4gICAgYWRtaW5BcmVhMjogc3RyaW5nOyAvLyBDaXR5XG4gICAgcG9zdGFsQ29kZTogc3RyaW5nO1xuICAgIGNvdW50cnlDb2RlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGFNYXBwaW5nUmVzdWx0IHtcbiAgICBhdXRoZW50aWNhdGlvblN0YXRlOiBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGU7XG4gICAgYWRkcmVzc2VzOiBDdXN0b21lckFkZHJlc3NbXTtcbiAgICBiaWxsaW5nQWRkcmVzcz86IEN1c3RvbWVyQWRkcmVzcztcbiAgICBzaGlwcGluZ0FkZHJlc3M/OiBDdXN0b21lckFkZHJlc3M7XG4gICAgaW5zdHJ1bWVudHM6IENhcmRJbnN0cnVtZW50W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24ge1xuICAgIHJvb3Q/OiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvclByaW1hcnk/OiBzdHJpbmc7XG4gICAgICAgIGVycm9yQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRGYW1pbHk/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplQmFzZT86IHN0cmluZztcbiAgICAgICAgcGFkZGluZz86IHN0cmluZztcbiAgICAgICAgcHJpbWFyeUNvbG9yPzogc3RyaW5nO1xuICAgIH07XG4gICAgaW5wdXQ/OiB7XG4gICAgICAgIGJvcmRlclJhZGl1cz86IHN0cmluZztcbiAgICAgICAgYm9yZGVyQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIGZvY3VzQm9yZGVyQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgICAgIHRleHRDb2xvckJhc2U/OiBzdHJpbmc7XG4gICAgfTtcbiAgICB0b2dnbGU/OiB7XG4gICAgICAgIGNvbG9yUHJpbWFyeT86IHN0cmluZztcbiAgICAgICAgY29sb3JTZWNvbmRhcnk/OiBzdHJpbmc7XG4gICAgfTtcbiAgICB0ZXh0Pzoge1xuICAgICAgICBib2R5Pzoge1xuICAgICAgICAgICAgY29sb3I/OiBzdHJpbmc7XG4gICAgICAgICAgICBmb250U2l6ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgY2FwdGlvbj86IHtcbiAgICAgICAgICAgIGNvbG9yPzogc3RyaW5nO1xuICAgICAgICAgICAgZm9udFNpemU/OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBicmFuZGluZz86IHN0cmluZzsgLy8gJ2xpZ2h0JyB8ICdkYXJrJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZSB7XG4gICAgc2hvd0NhcmRTZWxlY3RvcigpOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lQ2FyZFNlbGVjdG9yUmVzcG9uc2U+O1xuICAgIHNob3dTaGlwcGluZ0FkZHJlc3NTZWxlY3RvcigpOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lU2hpcHBpbmdBZGRyZXNzU2VsZWN0b3JSZXNwb25zZT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3NTZWxlY3RvclJlc3BvbnNlIHtcbiAgICBzZWxlY3Rpb25DaGFuZ2VkOiBib29sZWFuO1xuICAgIHNlbGVjdGVkQWRkcmVzczogUGF5UGFsRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkU2VsZWN0b3JSZXNwb25zZSB7XG4gICAgc2VsZWN0aW9uQ2hhbmdlZDogYm9vbGVhbjtcbiAgICBzZWxlY3RlZENhcmQ6IFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50TWV0aG9kcyB7XG4gICAgZ2V0UGF5bWVudFRva2VuKFxuICAgICAgICBvcHRpb25zOiBQYXlQYWxGYXN0bGFuZUdldFBheW1lbnRUb2tlbk9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZVByb2ZpbGVDYXJkPjtcbiAgICByZW5kZXIoZWxlbWVudDogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUdldFBheW1lbnRUb2tlbk9wdGlvbnMge1xuICAgIG5hbWU/OiBQYXlQYWxGYXN0bGFuZVByb2ZpbGVOYW1lO1xuICAgIGJpbGxpbmdBZGRyZXNzPzogUGF5UGFsRmFzdGxhbmVBZGRyZXNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE9wdGlvbnMge1xuICAgIGZpZWxkcz86IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudEZpZWxkcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRGaWVsZHMge1xuICAgIGNhcmRob2xkZXJOYW1lPzoge1xuICAgICAgICBlbmFibGVkPzogYm9vbGVhbjtcbiAgICAgICAgcHJlZmlsbD86IHN0cmluZztcbiAgICB9O1xuICAgIHBob25lTnVtYmVyPzoge1xuICAgICAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgICAgICAgcHJlZmlsbD86IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lRXZlbnRzIHtcbiAgICBhcG1TZWxlY3RlZDogKG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lQXBtU2VsZWN0ZWRFdmVudE9wdGlvbnMpID0+IHZvaWQ7XG4gICAgZW1haWxTdWJtaXR0ZWQ6IChvcHRpb25zOiBQYXlQYWxGYXN0bGFuZUVtYWlsRW50ZXJlZEV2ZW50T3B0aW9ucykgPT4gdm9pZDtcbiAgICBvcmRlclBsYWNlZDogKG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lT3JkZXJQbGFjZWRFdmVudE9wdGlvbnMpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIGNvbnRleHRfdHlwZTogJ2NzX2lkJztcbiAgICBjb250ZXh0X2lkOiBzdHJpbmc7IC8vIGNoZWNrb3V0IHNlc3Npb24gaWRcbiAgICBwYWdlX3R5cGU6ICdjaGVja291dF9wYWdlJztcbiAgICBwYWdlX25hbWU6IHN0cmluZzsgLy8gdGl0bGUgb2YgdGhlIGNoZWNrb3V0IGluaXRpYXRpb24gcGFnZVxuICAgIHBhcnRuZXJfbmFtZTogJ2JpZ2MnO1xuICAgIHVzZXJfdHlwZTogJ3N0b3JlX21lbWJlcicgfCAnc3RvcmVfZ3Vlc3QnOyAvLyB0eXBlIG9mIHRoZSB1c2VyIG9uIHRoZSBtZXJjaGFudCBzaXRlXG4gICAgc3RvcmVfaWQ6IHN0cmluZztcbiAgICBtZXJjaGFudF9uYW1lOiBzdHJpbmc7XG4gICAgZXhwZXJpbWVudDogc3RyaW5nOyAvLyBzdHJpbmdpZnkgSlNPTiBvYmplY3QgXCJbeyB0cmVhdG1lbnRfZ3JvdXA6ICd0ZXN0JyB8ICdjb250cm9sJyB9XVwiXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVBcG1TZWxlY3RlZEV2ZW50T3B0aW9ucyBleHRlbmRzIFBheVBhbEZhc3RsYW5lRXZlbnRDb21tb25PcHRpb25zIHtcbiAgICBhcG1fc2hvd246ICcwJyB8ICcxJzsgLy8gYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gdGhlIGNoZWNrb3V0IHBhZ2VcbiAgICBhcG1fbGlzdDogc3RyaW5nOyAvLyBsaXN0IG9mIGFsdGVybmF0ZSBwYXltZW50IHNob3duIG9uIGNoZWNrb3V0IHBhZ2VcbiAgICBhcG1fc2VsZWN0ZWQ6IHN0cmluZzsgLy8gYWx0ZXJuYXRlIHBheW1lbnQgbWV0aG9kIHNlbGVjdGVkIC8gbWV0aG9kSWRcbiAgICBhcG1fbG9jYXRpb246ICdwcmUtZW1haWwgc2VjdGlvbicgfCAncGF5bWVudCBzZWN0aW9uJzsgLy8gcGxhY2VtZW50IG9mIEFQTSwgd2hldGhlciBpdCBiZSBhYm92ZSB0aGUgZW1haWwgZW50cnkgb3IgaW4gdGhlIHJhZGlvIGJ1dHRvbnNcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUVtYWlsRW50ZXJlZEV2ZW50T3B0aW9ucyBleHRlbmRzIFBheVBhbEZhc3RsYW5lRXZlbnRDb21tb25PcHRpb25zIHtcbiAgICB1c2VyX2VtYWlsX3NhdmVkOiBib29sZWFuOyAvLyBzaG93cyB3aGV0aGVyIGNoZWNrb3V0IHdhcyBsb2FkZWQgd2l0aCBvciB3aXRob3V0IGEgc2F2ZWQgZW1haWxcbiAgICBhcG1fc2hvd246ICcwJyB8ICcxJzsgLy8gYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gdGhlIGNoZWNrb3V0IHBhZ2VcbiAgICBhcG1fbGlzdDogc3RyaW5nOyAvLyBsaXN0IG9mIGFsdGVybmF0ZSBwYXltZW50IHNob3duIG9uIGNoZWNrb3V0IHBhZ2UgJ2FwcGxlcGF5LGdvb2dsZXBheSxwYXlwYWwnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVPcmRlclBsYWNlZEV2ZW50T3B0aW9ucyBleHRlbmRzIFBheVBhbEZhc3RsYW5lRXZlbnRDb21tb25PcHRpb25zIHtcbiAgICBzZWxlY3RlZF9wYXltZW50X21ldGhvZDogc3RyaW5nO1xuICAgIGN1cnJlbmN5X2NvZGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVBheW1lbnRGb3JtYXR0ZWRQYXlsb2FkIHtcbiAgICBwYXlwYWxfY29ubmVjdF90b2tlbj86IHtcbiAgICAgICAgb3JkZXJfaWQ/OiBzdHJpbmc7XG4gICAgICAgIHRva2VuOiBzdHJpbmc7XG4gICAgfTtcbiAgICBwYXlwYWxfZmFzdGxhbmVfdG9rZW4/OiB7XG4gICAgICAgIG9yZGVyX2lkPzogc3RyaW5nO1xuICAgICAgICB0b2tlbjogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmFzdGxhbmVTdHlsZXNTZXR0aW5ncyB7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NFcnJvckNvbG9yPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lUm9vdFNldHRpbmdzRm9udEZhbWlseT86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc1BhZGRpbmc/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NQcmltYXJ5Q29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NGb250U2l6ZT86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlcldpZHRoPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lSW5wdXRTZXR0aW5nc1RleHRDb2xvckJhc2U/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzRm9jdXNCb3JkZXJCYXNlPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclByaW1hcnk/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yU2Vjb25kYXJ5Pzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0NvbG9yPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0ZvbnRTaXplPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0ZvbnRTaXplPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0NvbG9yPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lQnJhbmRpbmdTZXR0aW5ncz86IHN0cmluZztcbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIFBheVBhbENvbW1lcmNlSG9zdFdpbmRvdyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxGYXN0bGFuZVNkayxcbiAgICBQYXlQYWxHb29nbGVQYXlTZGssXG4gICAgUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgUGF5UGFsU2RrQ29uZmlnLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlU2RrIHtcbiAgICBwcml2YXRlIHdpbmRvdzogUGF5UGFsQ29tbWVyY2VIb3N0V2luZG93O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcikge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxGYXN0bGFuZVNkayhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lU2RrPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsRmFzdGxhbmVTZGtDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhjb25maWcpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lU2RrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGs7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsR29vZ2xlUGF5U2RrKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUxvYWQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5UGFsR29vZ2xlUGF5U2RrPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5IHx8IGZvcmNlTG9hZCkge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrU2NyaXB0Q29uZmlnID0gdGhpcy5nZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlQYWxTZGsocGF5cGFsU2RrU2NyaXB0Q29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxHb29nbGVQYXk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsQXBtc1NkayhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICkge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEFwbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsQXBtU2RrQ29uZmlndXJhdGlvbihwYXltZW50TWV0aG9kLCBjdXJyZW5jeUNvZGUpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlQYWxTZGsoY29uZmlnKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxBcG1zKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsQXBtcztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxNZXNzYWdlcyhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICk6IFByb21pc2U8UGF5UGFsTWVzc2FnZXNTZGs+IHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxNZXNzYWdlcykge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrTWVzc2FnZXNDb25maWcgPSB0aGlzLmdldFBheVBhbFNka01lc3NhZ2VzQ29uZmlndXJhdGlvbihcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhwYXlwYWxTZGtNZXNzYWdlc0NvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxNZXNzYWdlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqICBsb2FkUGF5UGFsU2RrIGlzIGEgcGF5cGFsIHNkayBzY3JpcHQgbG9hZGVyXG4gICAgICogIHdoaWNoIGxvYWRzIHBheXBhbCBzZGsgYmFzZWQgb24gcHJvdmlkZWQgY29uZmlndXJhdGlvblxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkUGF5UGFsU2RrKHsgb3B0aW9ucywgYXR0cmlidXRlcyB9OiBQYXlQYWxTZGtDb25maWcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2NyaXB0T3B0aW9ucyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPFBheVBhbFNka0NvbmZpZ1snb3B0aW9ucyddPihvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgc2NyaXB0QXR0cmlidXRlcyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPFBheVBhbFNka0NvbmZpZ1snYXR0cmlidXRlcyddPihhdHRyaWJ1dGVzKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGtVcmwgPSAnaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9zZGsvanMnO1xuICAgICAgICBjb25zdCBzY3JpcHRRdWVyeSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoc2NyaXB0T3B0aW9ucykudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3Qgc2NyaXB0U3JjID0gYCR7cGF5cGFsU2RrVXJsfT8ke3NjcmlwdFF1ZXJ5fWA7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChzY3JpcHRTcmMsIHtcbiAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgYXR0cmlidXRlczogc2NyaXB0QXR0cmlidXRlcyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDb25maWd1cmF0aW9ucyBzZWN0aW9uXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldFBheVBhbEZhc3RsYW5lU2RrQ29uZmlndXJhdGlvbihcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuLCBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEgfHwgIWluaXRpYWxpemF0aW9uRGF0YS5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBpbnRlbnQsIGNsaWVudElkLCBtZXJjaGFudElkLCBhdHRyaWJ1dGlvbklkIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21taXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgICAgICAgICAgICAnZmFzdGxhbmUnLFxuICAgICAgICAgICAgICAgICAgICAnYnV0dG9ucycsXG4gICAgICAgICAgICAgICAgICAgICdwYXltZW50LWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdob3N0ZWQtZmllbGRzJyxcbiAgICAgICAgICAgICAgICAgICAgJ3RocmVlLWRvbWFpbi1zZWN1cmUnLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLWNsaWVudC1tZXRhZGF0YS1pZCc6IHNlc3Npb25JZC5yZXBsYWNlKC8tL2csICcnKSxcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsRmFzdGxhbmVTZGsnLFxuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLXNkay1jbGllbnQtdG9rZW4nOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UgPSB0cnVlLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAgIG1lcmNoYW50SWQsXG4gICAgICAgICAgICBidXllckNvdW50cnksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsXG4gICAgICAgICAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLFxuICAgICAgICB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IGNvbW1pdCA9IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkIHx8IGluaXRpYWxpemVzT25DaGVja291dFBhZ2U7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21taXQsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogWydnb29nbGVwYXknXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgICAgICAuLi4oaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSAmJiB7ICdidXllci1jb3VudHJ5JzogYnV5ZXJDb3VudHJ5IH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJzogYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgICAgICAnZGF0YS1jbGllbnQtdG9rZW4nOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsR29vZ2xlUGF5JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxBcG1TZGtDb25maWd1cmF0aW9uKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgKTogUGF5UGFsU2RrQ29uZmlnIHtcbiAgICAgICAgY29uc3QgeyBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEgfHwgIWluaXRpYWxpemF0aW9uRGF0YS5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICBtZXJjaGFudElkLFxuICAgICAgICAgICAgYnV5ZXJDb3VudHJ5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsXG4gICAgICAgICAgICBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzID0gW10sXG4gICAgICAgICAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyA9IFtdLFxuICAgICAgICB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IGVuYWJsZUFQTXNGdW5kaW5nID0gZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM7XG4gICAgICAgIGNvbnN0IGRpc2FibGVBUE1zRnVuZGluZyA9IGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMuZmlsdGVyKFxuICAgICAgICAgICAgKGFwbTogc3RyaW5nKSA9PiAhZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMuaW5jbHVkZXMoYXBtKSxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgICdlbmFibGUtZnVuZGluZyc6IGVuYWJsZUFQTXNGdW5kaW5nLmxlbmd0aCA+IDAgPyBlbmFibGVBUE1zRnVuZGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAnZGlzYWJsZS1mdW5kaW5nJzogZGlzYWJsZUFQTXNGdW5kaW5nLmxlbmd0aCA+IDAgPyBkaXNhYmxlQVBNc0Z1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY29tbWl0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFsnYnV0dG9ucycsICdwYXltZW50LWZpZWxkcyddLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLW5hbWVzcGFjZSc6ICdwYXlwYWxBcG1zJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxTZGtNZXNzYWdlc0NvbmZpZ3VyYXRpb24oXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGNsaWVudElkLCBtZXJjaGFudElkLCBhdHRyaWJ1dGlvbklkLCBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLCBidXllckNvdW50cnkgfSA9XG4gICAgICAgICAgICBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbJ21lc3NhZ2VzJ10sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICAuLi4oaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSAmJiB7ICdidXllci1jb3VudHJ5JzogYnV5ZXJDb3VudHJ5IH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsTWVzc2FnZXMnLFxuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgdHJhbnNmb3JtQ29uZmlnPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oY29uZmlnOiBUKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgICAgIGxldCB0cmFuc2Zvcm1lZENvbmZpZyA9IHt9O1xuXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpIGFzIEFycmF5PGtleW9mIFQ+O1xuXG4gICAgICAgIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbmZpZ1trZXldO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgdmFsdWUgPT09ICcnIHx8XG4gICAgICAgICAgICAgICAgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJhbnNmb3JtZWRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgLi4udHJhbnNmb3JtZWRDb25maWcsXG4gICAgICAgICAgICAgICAgW2tleV06IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUuam9pbignLCcpIDogdmFsdWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWRDb25maWc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlU2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VTZGsgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2Utc2RrJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlUGF5UGFsQ29tbWVyY2VTZGsoKTogUGF5UGFsQ29tbWVyY2VTZGsge1xuICAgIHJldHVybiBuZXcgUGF5UGFsQ29tbWVyY2VTZGsoY3JlYXRlU2NyaXB0TG9hZGVyKCkpO1xufVxuIiwiaW50ZXJmYWNlIENvb2tpZU9wdGlvbnMge1xuICAgIGV4cGlyZXM/OiBEYXRlO1xuICAgIHBhdGg/OiBzdHJpbmc7XG4gICAgZG9tYWluPzogc3RyaW5nO1xuICAgIHNlY3VyZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvb2tpZVN0b3JhZ2Uge1xuICAgIHN0YXRpYyBnZXQobmFtZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGNvb2tpZUtleSA9IGAke2VuY29kZVVSSUNvbXBvbmVudChgJHtuYW1lfWApfT1gO1xuICAgICAgICBjb25zdCBjb29raWUgPSBkb2N1bWVudC5jb29raWU7XG5cbiAgICAgICAgbGV0IHZhbHVlID0gbnVsbDtcblxuICAgICAgICBjb25zdCBmaXJzdEluZGV4ID0gY29va2llLmluZGV4T2YoY29va2llS2V5KTtcblxuICAgICAgICBpZiAoZmlyc3RJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICBsZXQgbGFzdEluZGV4ID0gY29va2llLmluZGV4T2YoJzsnLCBmaXJzdEluZGV4KTtcblxuICAgICAgICAgICAgaWYgKGxhc3RJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSBjb29raWUubGVuZ3RoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YWx1ZSA9IGRlY29kZVVSSUNvbXBvbmVudChjb29raWUuc3Vic3RyaW5nKGZpcnN0SW5kZXggKyBjb29raWVLZXkubGVuZ3RoLCBsYXN0SW5kZXgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgc2V0KG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgb3B0aW9uczogQ29va2llT3B0aW9ucyA9IHsgc2VjdXJlOiB0cnVlIH0pIHtcbiAgICAgICAgbGV0IGNvb2tpZVRleHQgPSBgJHtlbmNvZGVVUklDb21wb25lbnQobmFtZSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gO1xuXG4gICAgICAgIGNvbnN0IHsgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKGV4cGlyZXMpIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgZXhwaXJlcz0ke2V4cGlyZXMudG9VVENTdHJpbmcoKX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIC8vIGluZm86IGRlZmF1bHQgY29va2llIGV4cGlyYXRpb24gdGltZSBhZnRlciBzZXR1cFxuICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IDYwO1xuXG4gICAgICAgICAgICBub3cuc2V0VGltZShub3cuZ2V0VGltZSgpICsgbWludXRlcyAqIDYwICogMTAwMCk7XG5cbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgZXhwaXJlcz0ke25vdy50b1VUQ1N0cmluZygpfWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgY29va2llVGV4dCArPSBgOyBwYXRoPSR7cGF0aH1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRvbWFpbikge1xuICAgICAgICAgICAgY29va2llVGV4dCArPSBgOyBkb21haW49JHtkb21haW59YDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWN1cmUpIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gJzsgc2VjdXJlJztcbiAgICAgICAgfVxuXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZVRleHQ7XG4gICAgfVxuXG4gICAgc3RhdGljIHJlbW92ZShuYW1lOiBzdHJpbmcsIG9wdGlvbnM/OiBDb29raWVPcHRpb25zKSB7XG4gICAgICAgIENvb2tpZVN0b3JhZ2Uuc2V0KG5hbWUsICcnLCB7IGV4cGlyZXM6IG5ldyBEYXRlKDApLCAuLi5vcHRpb25zIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGlzRXF1YWwsIG9taXQgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEFkZHJlc3MsXG4gICAgQ2FyZEluc3RydW1lbnQsXG4gICAgQ3VzdG9tZXJBZGRyZXNzLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxuICAgIFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgQ29va2llU3RvcmFnZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvc3RvcmFnZSc7XG5cbmltcG9ydCB7XG4gICAgUGF5UGFsQ29tbWVyY2VIb3N0V2luZG93LFxuICAgIFBheVBhbEZhc3RsYW5lLFxuICAgIFBheVBhbEZhc3RsYW5lQWRkcmVzcyxcbiAgICBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0LFxuICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSxcbiAgICBQYXlQYWxGYXN0bGFuZUxvb2t1cEN1c3RvbWVyQnlFbWFpbFJlc3VsdCxcbiAgICBQYXlQYWxGYXN0bGFuZVByb2ZpbGVDYXJkLFxuICAgIFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWUsXG4gICAgUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmUsXG4gICAgUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YU1hcHBpbmdSZXN1bHQsXG4gICAgUGF5UGFsRmFzdGxhbmVTZGssXG4gICAgUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24sXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzIHtcbiAgICBwcml2YXRlIHdpbmRvdzogUGF5UGFsQ29tbWVyY2VIb3N0V2luZG93O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xuICAgIH1cblxuICAgIGFzeW5jIGluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShcbiAgICAgICAgcGF5cGFsRmFzdGxhbmVTZGs6IFBheVBhbEZhc3RsYW5lU2RrLFxuICAgICAgICBpc1Rlc3RNb2RlRW5hYmxlZDogYm9vbGVhbixcbiAgICAgICAgc3R5bGVzPzogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZT4ge1xuICAgICAgICBpZiAoaXNUZXN0TW9kZUVuYWJsZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmFzdGxhbmVFbnYnLCAnc2FuZGJveCcpO1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdheG9FbnYnLCAnc2FuZGJveCcpOyAvLyBUT0RPOiByZW1vdmUgaWYgdGhpcyBrZXkgZG9lcyBub3QgdXNlIG9uIFBheVBhbCBzaWRlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0U3R5bGVzID0ge1xuICAgICAgICAgICAgICAgIHJvb3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yUHJpbWFyeTogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmUgPSBhd2FpdCBwYXlwYWxGYXN0bGFuZVNkay5GYXN0bGFuZSh7XG4gICAgICAgICAgICAgICAgc3R5bGVzOiBzdHlsZXMgfHwgZGVmYXVsdFN0eWxlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lO1xuICAgIH1cblxuICAgIGdldFBheVBhbEZhc3RsYW5lT3JUaHJvdygpOiBQYXlQYWxGYXN0bGFuZSB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRGV0ZWN0cyB0aGUgY3VzdG9tZXIgdG8gUGF5UGFsIEZhc3RsYW5lIHJlbGF0aW9uIGFuZFxuICAgICAqIHJldHVybnMgY3VzdG9tZXJDb250ZXh0SWQgdG8gdXNlIGl0IGZvciBhdXRoZW50aWNhdGlvblxuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgbG9va3VwQ3VzdG9tZXJPclRocm93KGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lTG9va3VwQ3VzdG9tZXJCeUVtYWlsUmVzdWx0PiB7XG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lID0gdGhpcy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTtcblxuICAgICAgICByZXR1cm4gcGF5cGFsRmFzdGxhbmUuaWRlbnRpdHkubG9va3VwQ3VzdG9tZXJCeUVtYWlsKGVtYWlsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFRyaWdnZXJzIGF1dGhlbnRpY2F0aW9uIGZsb3cgKHNob3dzIE9UUCBwb3B1cCkgaWYgdGhlIGN1c3RvbWVyIHJlY29nbmlzZWQgYXMgUGF5UGFsIEZhc3RsYW5lIHVzZXJcbiAgICAgKiBhbmQgcmV0dXJucyBQYXlQYWwgRmFzdGxhbmUgUHJvZmlsZSBkYXRhIHRvIHVzZSBpdCBpbiBCQyBjaGVja291dFxuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgdHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coXG4gICAgICAgIGN1c3RvbWVyQ29udGV4dElkPzogc3RyaW5nLFxuICAgICk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblJlc3VsdD4ge1xuICAgICAgICBpZiAoIWN1c3RvbWVyQ29udGV4dElkKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZSA9IHRoaXMuZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCk7XG5cbiAgICAgICAgcmV0dXJuIHBheXBhbEZhc3RsYW5lLmlkZW50aXR5LnRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3coY3VzdG9tZXJDb250ZXh0SWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogJ3VwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQnIG1ldGhvZCBpcyB1c2VkIHRvOlxuICAgICAqIC0gc2V0IHNlc3Npb24gaWQgYWZ0ZXIgdXNlciB3YXMgYXV0aGVudGljYXRlZCAob3IgdW5yZWNvZ25pc2VkKSB0byB0cmlnZ2VyIGF1dGhlbnRpY2F0aW9uIGFmdGVyIHBhZ2UgcmVmcmVzaFxuICAgICAqXG4gICAgICogRmxvdyBpbmZvOlxuICAgICAqIElmIHVzZXIgdW5yZWNvZ25pc2VkIHRoZW4gdGhlIGxvb2t1cCBtZXRob2Qgd2lsbCBiZSB3b3JraW5nIGJ1dCB0aGUgT1RQIHdpbGwgbm90IGJlIHNob3duXG4gICAgICogSWYgdXNlciByZWNvZ25pc2VkIGFuZCBub3QgY2FuY2VsZWQgdGhlbiB0aGUgbG9va3VwIG1ldGhvZCB3aWxsIGJlIHdvcmtpbmcgYW5kIHRoZSBPVFAgd2lsbCBiZSBzaG93biBvbmx5IGlmIG5lZWRlZFxuICAgICAqIElmIHVzZXIgY2FuY2VscyB0aGUgT1BUIHRoZW4gT1RQIHdpbGwgbm90IGJlIHRyaWdnZXJlZCBhZnRlciBwYWdlIHJlZnJlc2hcbiAgICAgKlxuICAgICAqL1xuICAgIHVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQoc2Vzc2lvbklkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZXhwaXJlcyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGV4cGlyZXMuc2V0RGF0ZShleHBpcmVzLmdldERhdGUoKSArIDE0KTsgLy8gMiB3ZWVrcyBleHBpcnlcblxuICAgICAgICBjb25zdCBjb29raWVzT3B0aW9uID0ge1xuICAgICAgICAgICAgZXhwaXJlcyxcbiAgICAgICAgICAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgICAgfTtcblxuICAgICAgICBDb29raWVTdG9yYWdlLnNldCgnYmMtZmFzdGxhbmUtc2Vzc2lvbklkJywgc2Vzc2lvbklkLCBjb29raWVzT3B0aW9uKTtcbiAgICB9XG5cbiAgICByZW1vdmVTdG9yYWdlU2Vzc2lvbklkKCk6IHZvaWQge1xuICAgICAgICBDb29raWVTdG9yYWdlLnJlbW92ZSgnYmMtZmFzdGxhbmUtc2Vzc2lvbklkJyk7XG4gICAgfVxuXG4gICAgZ2V0U3RvcmFnZVNlc3Npb25JZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gQ29va2llU3RvcmFnZS5nZXQoJ2JjLWZhc3RsYW5lLXNlc3Npb25JZCcpIHx8ICcnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogJ21hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEnIG1ldGhvZCBpcyByZXNwb25zaWJsZSBmb3I6XG4gICAgICogLSBtYXBwaW5nIFBheVBhbCBGYXN0bGFuZSBQcm9maWxlIGRhdGEgdG8gQkMgZGF0YSBzaGFwZVxuICAgICAqIC0gcmV0dXJuaW5nIG1hcHBlZCBkYXRhIHRvIHVzZSBmb3IgdXBkYXRpbmcgUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgc3RhdGUgYW5kXG4gICAgICogdXBkYXRlIHNoaXBwaW5nIGFuZCBiaWxsaW5nIGFkZHJlc3Nlc1xuICAgICAqXG4gICAgICovXG4gICAgbWFwUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQ6IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgKTogUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YU1hcHBpbmdSZXN1bHQge1xuICAgICAgICBjb25zdCB7IGF1dGhlbnRpY2F0aW9uU3RhdGUsIHByb2ZpbGVEYXRhIH0gPSBhdXRoZW50aWNhdGlvblJlc3VsdDtcblxuICAgICAgICBjb25zdCBwYXlwYWxCaWxsaW5nQWRkcmVzcyA9IHByb2ZpbGVEYXRhPy5jYXJkPy5wYXltZW50U291cmNlPy5jYXJkPy5iaWxsaW5nQWRkcmVzcztcbiAgICAgICAgY29uc3QgcGF5cGFsU2hpcHBpbmdBZGRyZXNzID0gcHJvZmlsZURhdGE/LnNoaXBwaW5nQWRkcmVzcztcbiAgICAgICAgY29uc3QgcGF5cGFsUHJvZmlsZU5hbWUgPSBwcm9maWxlRGF0YT8ubmFtZTtcbiAgICAgICAgY29uc3QgcGF5cGFsSW5zdHJ1bWVudCA9IHByb2ZpbGVEYXRhPy5jYXJkO1xuXG4gICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9IHBheXBhbFNoaXBwaW5nQWRkcmVzc1xuICAgICAgICAgICAgPyB0aGlzLm1hcFBheVBhbFRvQmNBZGRyZXNzKFxuICAgICAgICAgICAgICAgICAgcGF5cGFsU2hpcHBpbmdBZGRyZXNzLmFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICBwYXlwYWxTaGlwcGluZ0FkZHJlc3MubmFtZSxcbiAgICAgICAgICAgICAgICAgIHBheXBhbFNoaXBwaW5nQWRkcmVzcy5waG9uZU51bWJlcixcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgIHBheXBhbEJpbGxpbmdBZGRyZXNzICYmIHBheXBhbFByb2ZpbGVOYW1lXG4gICAgICAgICAgICAgICAgPyB0aGlzLm1hcFBheVBhbFRvQmNBZGRyZXNzKFxuICAgICAgICAgICAgICAgICAgICAgIHBheXBhbEJpbGxpbmdBZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgIHBheXBhbFByb2ZpbGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIHBheXBhbFNoaXBwaW5nQWRkcmVzcz8ucGhvbmVOdW1iZXIsXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGluc3RydW1lbnRzID0gcGF5cGFsSW5zdHJ1bWVudFxuICAgICAgICAgICAgPyB0aGlzLm1hcFBheVBhbFRvQmNJbnN0cnVtZW50KG1ldGhvZElkLCBwYXlwYWxJbnN0cnVtZW50KVxuICAgICAgICAgICAgOiBbXTtcblxuICAgICAgICBjb25zdCBhZGRyZXNzZXMgPSB0aGlzLmZpbHRlckFkZHJlc3Nlcyhbc2hpcHBpbmdBZGRyZXNzLCBiaWxsaW5nQWRkcmVzc10pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlOlxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUgfHwgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLlVOUkVDT0dOSVpFRCxcbiAgICAgICAgICAgIGFkZHJlc3NlcyxcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzLFxuICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgaW5zdHJ1bWVudHMsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgbWFwUGF5UGFsVG9CY0luc3RydW1lbnQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGluc3RydW1lbnQ6IFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQsXG4gICAgKTogQ2FyZEluc3RydW1lbnRbXSB7XG4gICAgICAgIGNvbnN0IHsgaWQsIHBheW1lbnRTb3VyY2UgfSA9IGluc3RydW1lbnQ7XG4gICAgICAgIGNvbnN0IHsgYnJhbmQsIGV4cGlyeSwgbGFzdERpZ2l0cyB9ID0gcGF5bWVudFNvdXJjZS5jYXJkO1xuXG4gICAgICAgIGNvbnN0IFtleHBpcnlZZWFyLCBleHBpcnlNb250aF0gPSBleHBpcnkuc3BsaXQoJy0nKTtcblxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJpZ3BheVRva2VuOiBpZCxcbiAgICAgICAgICAgICAgICBicmFuZCxcbiAgICAgICAgICAgICAgICBkZWZhdWx0SW5zdHJ1bWVudDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXhwaXJ5TW9udGgsXG4gICAgICAgICAgICAgICAgZXhwaXJ5WWVhcixcbiAgICAgICAgICAgICAgICBpaW46ICcnLFxuICAgICAgICAgICAgICAgIGxhc3Q0OiBsYXN0RGlnaXRzLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHRydXN0ZWRTaGlwcGluZ0FkZHJlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvbk1vZGU6IFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUuUEFOLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdjYXJkJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgbWFwQmNUb1BheVBhbEFkZHJlc3MoYWRkcmVzcz86IEFkZHJlc3MpOiBQYXlQYWxGYXN0bGFuZUFkZHJlc3Mge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcGFueTogYWRkcmVzcz8uY29tcGFueSB8fCAnJyxcbiAgICAgICAgICAgIGFkZHJlc3NMaW5lMTogYWRkcmVzcz8uYWRkcmVzczEgfHwgJycsXG4gICAgICAgICAgICBhZGRyZXNzTGluZTI6IGFkZHJlc3M/LmFkZHJlc3MyIHx8ICcnLFxuICAgICAgICAgICAgYWRtaW5BcmVhMTogYWRkcmVzcz8uc3RhdGVPclByb3ZpbmNlQ29kZSB8fCBhZGRyZXNzPy5zdGF0ZU9yUHJvdmluY2UgfHwgJycsXG4gICAgICAgICAgICBhZG1pbkFyZWEyOiBhZGRyZXNzPy5jaXR5IHx8ICcnLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogYWRkcmVzcz8ucG9zdGFsQ29kZSB8fCAnJyxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBhZGRyZXNzPy5jb3VudHJ5Q29kZSB8fCAnJyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBtYXBQYXlQYWxUb0JjQWRkcmVzcyhcbiAgICAgICAgYWRkcmVzczogUGF5UGFsRmFzdGxhbmVBZGRyZXNzLFxuICAgICAgICBwcm9maWxlTmFtZTogUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZSxcbiAgICAgICAgcGhvbmU/OiBQYXlQYWxGYXN0bGFuZVByb2ZpbGVQaG9uZSxcbiAgICAgICAgY3VzdG9tRmllbGRzPzogQ3VzdG9tZXJBZGRyZXNzWydjdXN0b21GaWVsZHMnXSxcbiAgICApOiBDdXN0b21lckFkZHJlc3Mge1xuICAgICAgICBjb25zdCBbZmlyc3ROYW1lLCBsYXN0TmFtZV0gPSBwcm9maWxlTmFtZS5mdWxsTmFtZS5zcGxpdCgnICcpO1xuXG4gICAgICAgIGNvbnN0IHBob25lRGF0YSA9IHtcbiAgICAgICAgICAgIG5hdGlvbmFsTnVtYmVyOiBwaG9uZT8ubmF0aW9uYWxOdW1iZXIgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogcGhvbmU/LmNvdW50cnlDb2RlIHx8ICcnLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIHR5cGU6ICdwYXlwYWwtYWRkcmVzcycsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHByb2ZpbGVOYW1lLmZpcnN0TmFtZSB8fCBmaXJzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBsYXN0TmFtZTogcHJvZmlsZU5hbWUubGFzdE5hbWUgfHwgbGFzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBjb21wYW55OiBhZGRyZXNzLmNvbXBhbnkgfHwgJycsXG4gICAgICAgICAgICBhZGRyZXNzMTogYWRkcmVzcy5hZGRyZXNzTGluZTEsXG4gICAgICAgICAgICBhZGRyZXNzMjogYWRkcmVzcy5hZGRyZXNzTGluZTIgfHwgJycsXG4gICAgICAgICAgICBjaXR5OiBhZGRyZXNzLmFkbWluQXJlYTIsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6IGFkZHJlc3MuYWRtaW5BcmVhMSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGFkZHJlc3MuYWRtaW5BcmVhMSxcbiAgICAgICAgICAgIGNvdW50cnk6IGFkZHJlc3MuY291bnRyeUNvZGUgfHwgJycsIC8vIFRPRE86IHVwZGF0ZSBjb3VudHJ5IHdpdGggdmFsaWQgbmFtaW5nXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcy5jb3VudHJ5Q29kZSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHBob25lOiBwaG9uZURhdGEuY291bnRyeUNvZGUgKyBwaG9uZURhdGEubmF0aW9uYWxOdW1iZXIsXG4gICAgICAgICAgICBjdXN0b21GaWVsZHM6IGN1c3RvbUZpZWxkcyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHJlc3BvbnNpYmxlIGZvciBmaWx0ZXJpbmcgUGF5UGFsIEZhc3RsYW5lIGFkZHJlc3NlcyBpZiB0aGV5IGFyZSB0aGUgc2FtZVxuICAgICAqIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIGFkZHJlc3NlcyB0byB1c2UgdGhlbSBmb3Igc2hpcHBpbmcgYW5kL29yIGJpbGxpbmcgYWRkcmVzcyBzZWxlY3Rpb25zXG4gICAgICogc28gdGhlIGN1c3RvbWVyIHdpbGwgYmUgYWJsZSB0byB1c2UgYWRkcmVzc2VzIGZyb20gUGF5UGFsIEZhc3RsYW5lIGluIGNoZWNrb3V0IGZsb3dcbiAgICAgKlxuICAgICAqL1xuICAgIGZpbHRlckFkZHJlc3NlcyhhZGRyZXNzZXM6IEFycmF5PEN1c3RvbWVyQWRkcmVzcyB8IHVuZGVmaW5lZD4pOiBDdXN0b21lckFkZHJlc3NbXSB7XG4gICAgICAgIHJldHVybiBhZGRyZXNzZXMucmVkdWNlKFxuICAgICAgICAgICAgKGN1c3RvbWVyQWRkcmVzc2VzOiBDdXN0b21lckFkZHJlc3NbXSwgY3VycmVudEFkZHJlc3M6IEN1c3RvbWVyQWRkcmVzcyB8IHVuZGVmaW5lZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY3VycmVudEFkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1c3RvbWVyQWRkcmVzc2VzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHNhbWVBZGRyZXNzSW5UaGVBcnJheSA9IGN1c3RvbWVyQWRkcmVzc2VzLnNvbWUoKGN1c3RvbWVyQWRkcmVzcykgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0VxdWFsQWRkcmVzc2VzKGN1c3RvbWVyQWRkcmVzcywgY3VycmVudEFkZHJlc3MpLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2FtZUFkZHJlc3NJblRoZUFycmF5XG4gICAgICAgICAgICAgICAgICAgID8gY3VzdG9tZXJBZGRyZXNzZXNcbiAgICAgICAgICAgICAgICAgICAgOiBbLi4uY3VzdG9tZXJBZGRyZXNzZXMsIGN1cnJlbnRBZGRyZXNzXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbXSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzRXF1YWxBZGRyZXNzZXMoXG4gICAgICAgIGZpcnN0QWRkcmVzczogQ3VzdG9tZXJBZGRyZXNzLFxuICAgICAgICBzZWNvbmRBZGRyZXNzOiBDdXN0b21lckFkZHJlc3MsXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBpc0VxdWFsKHRoaXMubm9ybWFsaXplQWRkcmVzcyhmaXJzdEFkZHJlc3MpLCB0aGlzLm5vcm1hbGl6ZUFkZHJlc3Moc2Vjb25kQWRkcmVzcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbm9ybWFsaXplQWRkcmVzcyhhZGRyZXNzOiBDdXN0b21lckFkZHJlc3MpIHtcbiAgICAgICAgcmV0dXJuIG9taXQoYWRkcmVzcywgWydpZCcsICdwaG9uZSddKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzIGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lLXV0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzKCk6IFBheVBhbENvbW1lcmNlRmFzdGxhbmVVdGlscyB7XG4gICAgcmV0dXJuIG5ldyBQYXlQYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMoKTtcbn1cbiIsImltcG9ydCB7IG9taXRCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7IEZhc3RsYW5lU3R5bGVzU2V0dGluZ3MsIFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uIH0gZnJvbSAnLi4vaW5kZXgnO1xuXG5mdW5jdGlvbiBpc0ludmFsaWRTdHlsZU9wdGlvbihzdHlsZU9wdGlvbjogdW5rbm93bikge1xuICAgIHJldHVybiB0eXBlb2Ygc3R5bGVPcHRpb24gIT09ICdzdHJpbmcnO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRGYXN0bGFuZVN0eWxlcyhcbiAgICBzdHlsZVNldHRpbmdzPzogRmFzdGxhbmVTdHlsZXNTZXR0aW5ncyxcbiAgICB1aVN0eWxlcz86IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxuKSB7XG4gICAgaWYgKCF1aVN0eWxlcyAmJiAhc3R5bGVTZXR0aW5ncykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiBjbGVhblVwRmFzdGxhbmVTdHlsZXMobWVyZ2VGYXN0bGFuZVN0eWxlcyhzdHlsZVNldHRpbmdzLCB1aVN0eWxlcykpO1xufVxuXG5mdW5jdGlvbiBtZXJnZUZhc3RsYW5lU3R5bGVzKFxuICAgIHN0eWxlU2V0dGluZ3M/OiBGYXN0bGFuZVN0eWxlc1NldHRpbmdzLFxuICAgIHVpU3R5bGVzPzogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4pOiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcm9vdDoge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yUHJpbWFyeTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc0JhY2tncm91bmRDb2xvciB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy5yb290Py5iYWNrZ3JvdW5kQ29sb3JQcmltYXJ5LFxuICAgICAgICAgICAgZXJyb3JDb2xvcjogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NFcnJvckNvbG9yIHx8IHVpU3R5bGVzPy5yb290Py5lcnJvckNvbG9yLFxuICAgICAgICAgICAgZm9udEZhbWlseTogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NGb250RmFtaWx5IHx8IHVpU3R5bGVzPy5yb290Py5mb250RmFtaWx5LFxuICAgICAgICAgICAgZm9udFNpemVCYXNlOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzRm9udFNpemUgfHwgdWlTdHlsZXM/LnJvb3Q/LmZvbnRTaXplQmFzZSxcbiAgICAgICAgICAgIHBhZGRpbmc6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZyB8fCB1aVN0eWxlcz8ucm9vdD8ucGFkZGluZyxcbiAgICAgICAgICAgIHByaW1hcnlDb2xvcjpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc1ByaW1hcnlDb2xvciB8fCB1aVN0eWxlcz8ucm9vdD8ucHJpbWFyeUNvbG9yLFxuICAgICAgICB9LFxuICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgYm9yZGVyUmFkaXVzOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlclJhZGl1cyB8fCB1aVN0eWxlcz8uaW5wdXQ/LmJvcmRlclJhZGl1cyxcbiAgICAgICAgICAgIGJvcmRlckNvbG9yOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlckNvbG9yIHx8IHVpU3R5bGVzPy5pbnB1dD8uYm9yZGVyQ29sb3IsXG4gICAgICAgICAgICBmb2N1c0JvcmRlckNvbG9yOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0ZvY3VzQm9yZGVyQmFzZSB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy5pbnB1dD8uZm9jdXNCb3JkZXJDb2xvcixcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IgfHxcbiAgICAgICAgICAgICAgICB1aVN0eWxlcz8uaW5wdXQ/LmJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgIGJvcmRlcldpZHRoOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlcldpZHRoIHx8IHVpU3R5bGVzPy5pbnB1dD8uYm9yZGVyV2lkdGgsXG4gICAgICAgICAgICB0ZXh0Q29sb3JCYXNlOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc1RleHRDb2xvckJhc2UgfHwgdWlTdHlsZXM/LmlucHV0Py50ZXh0Q29sb3JCYXNlLFxuICAgICAgICB9LFxuICAgICAgICB0b2dnbGU6IHtcbiAgICAgICAgICAgIGNvbG9yUHJpbWFyeTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JQcmltYXJ5IHx8IHVpU3R5bGVzPy50b2dnbGU/LmNvbG9yUHJpbWFyeSxcbiAgICAgICAgICAgIGNvbG9yU2Vjb25kYXJ5OlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclNlY29uZGFyeSB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy50b2dnbGU/LmNvbG9yU2Vjb25kYXJ5LFxuICAgICAgICB9LFxuICAgICAgICB0ZXh0OiB7XG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0NvbG9yIHx8IHVpU3R5bGVzPy50ZXh0Py5ib2R5Py5jb2xvcixcbiAgICAgICAgICAgICAgICBmb250U2l6ZTpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzRm9udFNpemUgfHxcbiAgICAgICAgICAgICAgICAgICAgdWlTdHlsZXM/LnRleHQ/LmJvZHk/LmZvbnRTaXplLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhcHRpb246IHtcbiAgICAgICAgICAgICAgICBjb2xvcjpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzQ29sb3IgfHxcbiAgICAgICAgICAgICAgICAgICAgdWlTdHlsZXM/LnRleHQ/LmNhcHRpb24/LmNvbG9yLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRleHRDYXB0aW9uU2V0dGluZ3NGb250U2l6ZSB8fFxuICAgICAgICAgICAgICAgICAgICB1aVN0eWxlcz8udGV4dD8uY2FwdGlvbj8uZm9udFNpemUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBicmFuZGluZzogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVCcmFuZGluZ1NldHRpbmdzIHx8IHVpU3R5bGVzPy5icmFuZGluZyxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjbGVhblVwRmFzdGxhbmVTdHlsZXMoc3R5bGVzOiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbikge1xuICAgIGNvbnN0IGZhc3RsYW5lU3R5bGVzOiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiA9IHt9O1xuXG4gICAgY29uc3Qgcm9vdCA9IG9taXRCeShzdHlsZXMucm9vdCwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IGlucHV0ID0gb21pdEJ5KHN0eWxlcy5pbnB1dCwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IHRvZ2dsZSA9IG9taXRCeShzdHlsZXMudG9nZ2xlLCBpc0ludmFsaWRTdHlsZU9wdGlvbik7XG4gICAgY29uc3QgdGV4dEJvZHkgPSBvbWl0Qnkoc3R5bGVzLnRleHQ/LmJvZHksIGlzSW52YWxpZFN0eWxlT3B0aW9uKTtcbiAgICBjb25zdCB0ZXh0Q2FwdGlvbiA9IG9taXRCeShzdHlsZXMudGV4dD8uY2FwdGlvbiwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IGJyYW5kaW5nID0gc3R5bGVzLmJyYW5kaW5nO1xuXG4gICAgaWYgKE9iamVjdC5rZXlzKHJvb3QpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy5yb290ID0gcm9vdDtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoaW5wdXQpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy5pbnB1dCA9IGlucHV0O1xuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyh0b2dnbGUpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50b2dnbGUgPSB0b2dnbGU7XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKHRleHRCb2R5KS5sZW5ndGgpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudGV4dCA9IHt9O1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50ZXh0LmJvZHkgPSB0ZXh0Qm9keTtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXModGV4dENhcHRpb24pLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50ZXh0ID0ge1xuICAgICAgICAgICAgLi4uZmFzdGxhbmVTdHlsZXMudGV4dCxcbiAgICAgICAgfTtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudGV4dC5jYXB0aW9uID0gdGV4dENhcHRpb247XG4gICAgfVxuXG4gICAgaWYgKGJyYW5kaW5nKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLmJyYW5kaW5nID0gYnJhbmRpbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhc3RsYW5lU3R5bGVzO1xufVxuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lckNyZWRlbnRpYWxzLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgZ2V0RmFzdGxhbmVTdHlsZXMsXG4gICAgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbENvbW1lcmNlU2RrLFxuICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLFxuICAgIFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUtY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlU2RrOiBQYXlQYWxDb21tZXJjZVNkayxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHM6IFBheVBhbENvbW1lcmNlRmFzdGxhbmVVdGlscyxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDdXN0b21lckluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlRmFzdGxhbmVDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZWZhc3RsYW5lIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzVGVzdE1vZGVFbmFibGVkID0gISFwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8uaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZTtcblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmVTZGsgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlU2RrLmdldFBheVBhbEZhc3RsYW5lU2RrKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY2FydC5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgICAgIGNhcnQuaWQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5pbml0aWFsaXplUGF5UGFsRmFzdGxhbmUoXG4gICAgICAgICAgICAgICAgcGF5cGFsRmFzdGxhbmVTZGssXG4gICAgICAgICAgICAgICAgaXNUZXN0TW9kZUVuYWJsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRGYXN0bGFuZVN0eWxlcyhtZXRob2RJZCwgcGF5cGFsY29tbWVyY2VmYXN0bGFuZSksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBhZGQgbG9nZ2VyIHRvIGJlIGFibGUgdG8gZGVidWcgaXNzdWVzIGlmIHRoZXJlIGFueVxuICAgICAgICAgICAgLy8gSW5mbzogRG8gbm90IHRocm93IGFueXRoaW5nIGhlcmUgdG8gYXZvaWQgYmxvY2tpbmcgY3VzdG9tZXIgZnJvbSBwYXNzaW5nIGNoZWNrb3V0IGZsb3dcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduSW4oY3JlZGVudGlhbHM6IEN1c3RvbWVyQ3JlZGVudGlhbHMsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoY3JlZGVudGlhbHMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25PdXQob3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChcbiAgICAgICAgb3B0aW9ucz86IEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0UGF5bWVudE1ldGhvZEV4ZWN1dGVkLCBjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrLCBtZXRob2RJZCB9ID1cbiAgICAgICAgICAgIG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwibWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcImNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2tcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgYW5kIGl0IG11c3QgYmUgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGN1c3RvbWVyID0gc3RhdGUuZ2V0Q3VzdG9tZXJPclRocm93KCk7XG5cbiAgICAgICAgaWYgKGN1c3RvbWVyLmlzR3Vlc3QpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IGFkZCBsb2dnZXIgdG8gYmUgYWJsZSB0byBkZWJ1ZyBpc3N1ZXMgaWYgdGhlcmUgYW55XG4gICAgICAgICAgICAgICAgLy8gSW5mbzogRG8gbm90IHRocm93IGFueXRoaW5nIGhlcmUgdG8gYXZvaWQgYmxvY2tpbmcgY3VzdG9tZXIgZnJvbSBwYXNzaW5nIGNoZWNrb3V0IGZsb3dcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEF1dGhlbnRpY2F0aW9uIGZsb3cgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBydW5QYXlQYWxBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KG1ldGhvZElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydElkID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5pZDtcbiAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBzdGF0ZS5nZXRDdXN0b21lcigpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzKCk7XG4gICAgICAgIGNvbnN0IGN1c3RvbWVyRW1haWwgPSBjdXN0b21lcj8uZW1haWwgfHwgYmlsbGluZ0FkZHJlc3M/LmVtYWlsIHx8ICcnO1xuXG4gICAgICAgIGNvbnN0IHsgY3VzdG9tZXJDb250ZXh0SWQgfSA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLmxvb2t1cEN1c3RvbWVyT3JUaHJvdyhcbiAgICAgICAgICAgIGN1c3RvbWVyRW1haWwsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgYXV0aGVudGljYXRpb25SZXN1bHQgPVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMudHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coXG4gICAgICAgICAgICAgICAgY3VzdG9tZXJDb250ZXh0SWQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQgPVxuICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQuYXV0aGVudGljYXRpb25TdGF0ZSA9PT0gUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLkNBTkNFTEVEO1xuXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQ3VzdG9tZXJEYXRhU3RhdGUobWV0aG9kSWQsIGF1dGhlbnRpY2F0aW9uUmVzdWx0KTtcblxuICAgICAgICBpZiAoaXNBdXRoZW50aWNhdGlvbkZsb3dDYW5jZWxlZCkge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMucmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMudXBkYXRlU3RvcmFnZVNlc3Npb25JZChjYXJ0SWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB1cGRhdGVDdXN0b21lckRhdGFTdGF0ZShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQ6IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHsgYXV0aGVudGljYXRpb25TdGF0ZSwgYWRkcmVzc2VzLCBiaWxsaW5nQWRkcmVzcywgc2hpcHBpbmdBZGRyZXNzLCBpbnN0cnVtZW50cyB9ID1cbiAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLm1hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEoXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcih7XG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlLFxuICAgICAgICAgICAgYWRkcmVzc2VzLFxuICAgICAgICAgICAgaW5zdHJ1bWVudHMsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChiaWxsaW5nQWRkcmVzcykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzaGlwcGluZ0FkZHJlc3MgJiYgY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkU3RhdGUgPSBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKFxuICAgICAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzcyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgICAgIHVwZGF0ZWRTdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICAgICAgY29uc3QgeyBpc0Zhc3RsYW5lU2hpcHBpbmdPcHRpb25BdXRvU2VsZWN0RW5hYmxlZCB9ID1cbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnNpZ25tZW50cyA9IHVwZGF0ZWRTdGF0ZS5nZXRDb25zaWdubWVudHMoKSB8fCBbXTtcbiAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyA9IGNvbnNpZ25tZW50c1swXT8uYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zIHx8IFtdO1xuICAgICAgICAgICAgY29uc3QgZmlyc3RTaGlwcGluZ09wdGlvbiA9IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9uc1swXTtcbiAgICAgICAgICAgIGNvbnN0IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24gPSBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMuZmluZChcbiAgICAgICAgICAgICAgICAob3B0aW9uKSA9PiBvcHRpb24uaXNSZWNvbW1lbmRlZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAocmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiB8fCBmaXJzdFNoaXBwaW5nT3B0aW9uKSAmJlxuICAgICAgICAgICAgICAgIGlzRmFzdGxhbmVTaGlwcGluZ09wdGlvbkF1dG9TZWxlY3RFbmFibGVkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbklkID0gcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbj8uaWQgfHwgZmlyc3RTaGlwcGluZ09wdGlvbi5pZDtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRmFzdGxhbmUgc3R5bGluZyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEZhc3RsYW5lU3R5bGVzKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxjb21tZXJjZWZhc3RsYW5lOiBQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyB8IHVuZGVmaW5lZCxcbiAgICApOiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCB7IGZhc3RsYW5lU3R5bGVzLCBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgIHJldHVybiBnZXRGYXN0bGFuZVN0eWxlcyhcbiAgICAgICAgICAgIGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZCA/IGZhc3RsYW5lU3R5bGVzIDoge30sXG4gICAgICAgICAgICBwYXlwYWxjb21tZXJjZWZhc3RsYW5lPy5zdHlsZXMsXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMsXG4gICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VTZGssXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLWNvbW1lcmNlLXV0aWxzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lLWN1c3RvbWVyLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZVNkaygpLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMoKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2VhY2NlbGVyYXRlZGNoZWNrb3V0JyB9LCAvLyB0aGlzIG1ldGhvZCBpZCB3aWxsIGJlIHByb3ZpZGVkIGZvciB1c2VycyBmcm9tIHRlc3QgZ3JvdXBcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkcycgfSwgLy8gdGhpcyBtZXRob2QgaWQgd2lsbCBiZSBwcm92aWRlZCBmb3IgdXNlcnMgZnJvbSBjb250cm9sIGdyb3VwXG5dKTtcbiIsImltcG9ydCB7XG4gICAgTG9hZGluZ0luZGljYXRvckNvbnRhaW5lclN0eWxlcyxcbiAgICBMb2FkaW5nSW5kaWNhdG9yU3R5bGVzLFxufSBmcm9tICcuL2xvYWRpbmctaW5kaWNhdG9yLXN0eWxlcyc7XG5cbmNvbnN0IERFRkFVTFRfU1RZTEVTOiBMb2FkaW5nSW5kaWNhdG9yU3R5bGVzID0ge1xuICAgIHNpemU6IDcwLFxuICAgIGNvbG9yOiAnI2Q5ZDlkOScsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZmZmZicsXG59O1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9DT05UQUlORVJfU1RZTEVTID0ge1xuICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ3JnYmEoMCwgMCwgMCwgMC40KScsXG4gICAgJ3otaW5kZXgnOiAnMTAwMCcsXG59O1xuXG5jb25zdCBST1RBVElPTl9BTklNQVRJT04gPSAnZW1iZWRkZWQtY2hlY2tvdXQtbG9hZGluZy1pbmRpY2F0b3Itcm90YXRpb24nO1xuXG5pbnRlcmZhY2UgTG9hZGluZ0luZGljYXRvck9wdGlvbnMge1xuICAgIHN0eWxlcz86IExvYWRpbmdJbmRpY2F0b3JTdHlsZXM7XG4gICAgY29udGFpbmVyU3R5bGVzPzogTG9hZGluZ0luZGljYXRvckNvbnRhaW5lclN0eWxlcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9hZGluZ0luZGljYXRvciB7XG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgaW5kaWNhdG9yOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHN0eWxlczogTG9hZGluZ0luZGljYXRvclN0eWxlcztcbiAgICBwcml2YXRlIGNvbnRhaW5lclN0eWxlczogTG9hZGluZ0luZGljYXRvckNvbnRhaW5lclN0eWxlcztcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBMb2FkaW5nSW5kaWNhdG9yT3B0aW9ucykge1xuICAgICAgICB0aGlzLnN0eWxlcyA9IHsgLi4uREVGQVVMVF9TVFlMRVMsIC4uLihvcHRpb25zICYmIG9wdGlvbnMuc3R5bGVzKSB9O1xuICAgICAgICB0aGlzLmNvbnRhaW5lclN0eWxlcyA9IHsgLi4uKG9wdGlvbnMgJiYgb3B0aW9ucy5jb250YWluZXJTdHlsZXMpIH07XG5cbiAgICAgICAgdGhpcy5kZWZpbmVBbmltYXRpb24oKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuYnVpbGRDb250YWluZXIoKTtcbiAgICAgICAgdGhpcy5pbmRpY2F0b3IgPSB0aGlzLmJ1aWxkSW5kaWNhdG9yKCk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5pbmRpY2F0b3IpO1xuICAgIH1cblxuICAgIHNob3cocGFyZW50SWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKHBhcmVudElkKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRJZCk7XG5cbiAgICAgICAgICAgIGlmICghcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGF0dGFjaCB0aGUgbG9hZGluZyBpbmRpY2F0b3IgYmVjYXVzZSB0aGUgcGFyZW50IElEIGlzIG5vdCB2YWxpZC4nLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgIH1cblxuICAgIGhpZGUoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGhhbmRsZVRyYW5zaXRpb25FbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG5cbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBoYW5kbGVUcmFuc2l0aW9uRW5kKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgaGFuZGxlVHJhbnNpdGlvbkVuZCk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkQ29udGFpbmVyKCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuYm90dG9tID0gJzAnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUubGVmdCA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUucmlnaHQgPSAnMCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS50b3AgPSAnMCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAyNTBtcyBlYXNlLW91dCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuXG4gICAgICAgIHRoaXMuc2V0U3R5bGVBdHRyaWJ1dGUoY29udGFpbmVyLCB0aGlzLmNvbnRhaW5lclN0eWxlcyk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkSW5kaWNhdG9yKCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgaW5kaWNhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUud2lkdGggPSBgJHt0aGlzLnN0eWxlcy5zaXplfXB4YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuc3R5bGVzLnNpemV9cHhgO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyUmFkaXVzID0gYCR7dGhpcy5zdHlsZXMuc2l6ZX1weGA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXIgPSAnc29saWQgMXB4JztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJvcmRlckNvbG9yID0gYCR7dGhpcy5zdHlsZXMuYmFja2dyb3VuZENvbG9yfSAke3RoaXMuc3R5bGVzLmJhY2tncm91bmRDb2xvcn0gJHt0aGlzLnN0eWxlcy5jb2xvcn0gJHt0aGlzLnN0eWxlcy5jb2xvcn1gO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUubWFyZ2luID0gJzAgYXV0byc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUucmlnaHQgPSAnMCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS50b3AgPSAnNTAlJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSgwZGVnKSc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS50cmFuc2Zvcm1TdHlsZSA9ICdwcmVzZXJ2ZS0zZCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5hbmltYXRpb24gPSBgJHtST1RBVElPTl9BTklNQVRJT059IDUwMG1zIGluZmluaXRlIGN1YmljLWJlemllcigwLjY5LCAwLjMxLCAwLjU2LCAwLjgzKWA7XG5cbiAgICAgICAgcmV0dXJuIGluZGljYXRvcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFN0eWxlQXR0cmlidXRlKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBhdHRyczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSk6IHZvaWQge1xuICAgICAgICBPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaCgoaykgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShrLCBhdHRyc1trXSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGVmaW5lQW5pbWF0aW9uKCk6IHZvaWQge1xuICAgICAgICAvLyBJbiBvcmRlciB0byBkZWZpbmUgQ1NTIGFuaW1hdGlvbiwgd2UgbmVlZCB0byBpbnNlcnQgYSBzdHlsZXNoZWV0IGludG8gdGhlIGhvc3QgZnJhbWUuXG4gICAgICAgIC8vIFdlIG9ubHkgaGF2ZSB0byBkbyBpdCBvbmNlLlxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUk9UQVRJT05fQU5JTUFUSU9OKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG4gICAgICAgIHN0eWxlLmlkID0gUk9UQVRJT05fQU5JTUFUSU9OO1xuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktY29uZGl0aW9uXG4gICAgICAgIGRvY3VtZW50LmhlYWQ/LmFwcGVuZENoaWxkKHN0eWxlKTtcblxuICAgICAgICBpZiAoc3R5bGUuc2hlZXQgaW5zdGFuY2VvZiBDU1NTdHlsZVNoZWV0KSB7XG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHByb3ZpZGUgdGhlIDJuZCBwYXJhbWV0ZXIgZm9yIElFMTEsIGV2ZW4gdGhvdWdoIGl0IGlzXG4gICAgICAgICAgICAvLyAwIGJ5IGRlZmF1bHQgZm9yIGFsbCBvdGhlciBicm93c2Vycy5cbiAgICAgICAgICAgIHN0eWxlLnNoZWV0Lmluc2VydFJ1bGUoXG4gICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIEBrZXlmcmFtZXMgJHtST1RBVElPTl9BTklNQVRJT059IHtcbiAgICAgICAgICAgICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKDBkZWcpOyB9XG4gICAgICAgICAgICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyA9IHtcbiAgICAnYmFja2dyb3VuZC1jb2xvcic6ICdyZ2JhKDAsIDAsIDAsIDAuNCknLFxuICAgICd6LWluZGV4JzogJzEwMDAnLFxufTtcbiIsImltcG9ydCBJbnZhbGlkQXJndW1lbnRFcnJvciBmcm9tICcuL2ludmFsaWQtYXJndW1lbnQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHdlIGFyZSB1bmFibGUgdG8gc3VibWl0IGEgcGF5bWVudCBiZWNhdXNlXG4gKiB0aGUgY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSByZXF1aXJlZCBmaWVsZHMsIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzXG4gKiBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IgZXh0ZW5kcyBJbnZhbGlkQXJndW1lbnRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoaW52YWxpZEZpZWxkcz86IHN0cmluZ1tdKSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBmb3IgdGhlIG9yZGVyIGJlY2F1c2UgdGhlIHBheWxvYWQgaXMgaW52YWxpZC4nO1xuXG4gICAgICAgIGlmIChpbnZhbGlkRmllbGRzKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gYCR7bWVzc2FnZX0gTWFrZSBzdXJlIHRoZSBmb2xsb3dpbmcgZmllbGRzIGFyZSBwcm92aWRlZCBjb3JyZWN0bHk6ICR7aW52YWxpZEZpZWxkcy5qb2luKFxuICAgICAgICAgICAgICAgICcsICcsXG4gICAgICAgICAgICApfS5gO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcic7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdW5hYmxlIHRvIHN1Y2Nlc3NmdWxseSBzdWJtaXQgYSBzZXJ2ZXIgcmVxdWVzdFxuICogdXNpbmcgYSBwYXltZW50IG1ldGhvZCBiZWNhdXNlIHRoZSBtZXRob2QgaGFzIGludmFsaWQgY29uZmlndXJhdGlvbiBvciBpcyBpblxuICogYW4gaW52YWxpZCBzdGF0ZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcjxUID0gYW55PiBleHRlbmRzIFJlcXVlc3RFcnJvcjxUPiB7XG4gICAgY29uc3RydWN0b3IocmVzcG9uc2U/OiBSZXNwb25zZTxUPikge1xuICAgICAgICBzdXBlcihyZXNwb25zZSwge1xuICAgICAgICAgICAgbWVzc2FnZTogJ1RoZXJlIGlzIGEgcHJvYmxlbSBwcm9jZXNzaW5nIHlvdXIgcGF5bWVudC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X21ldGhvZF9pbnZhbGlkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB0cnlpbmcgdG8gbWFrZSBhbiBvcmRlciBmaW5hbGl6YXRpb24gcmVxdWVzdCBmb3IgYVxuICogcGF5bWVudCBtZXRob2QgdGhhdCBkb2VzIG5vdCByZXF1aXJlIHN1Y2ggcHJvY2VkdXJlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJ1RoZSBjdXJyZW50IG9yZGVyIGRvZXMgbm90IG5lZWQgdG8gYmUgZmluYWxpemVkIGF0IHRoaXMgc3RhZ2UuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ09yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdvcmRlcl9maW5hbGl6YXRpb25fbm90X3JlcXVpcmVkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBIb3N0ZWRJbnN0cnVtZW50IH0gZnJvbSAnLi9wYXltZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShcbiAgICBpbnN0cnVtZW50OiB1bmtub3duLFxuKTogaW5zdHJ1bWVudCBpcyBIb3N0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgaW5zdHJ1bWVudCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgaW5zdHJ1bWVudCAhPT0gbnVsbCAmJlxuICAgICAgICAodHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNhdmVJbnN0cnVtZW50ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNhdmVJbnN0cnVtZW50ID09PSAnYm9vbGVhbicpICYmXG4gICAgICAgICh0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID09PSAnYm9vbGVhbicpXG4gICAgKTtcbn1cbiIsImltcG9ydCB7XG4gICAgRm9ybWF0dGVkUGF5bG9hZCxcbiAgICBGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJy4vcGF5bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIEJvb2xlYW4oKGluc3RydW1lbnQgYXMgVmF1bHRlZEluc3RydW1lbnQpLmluc3RydW1lbnRJZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0hvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQge1xuICAgIHJldHVybiAoXG4gICAgICAgIEJvb2xlYW4oKGluc3RydW1lbnQgYXMgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQpLmluc3RydW1lbnRJZCkgJiZcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0cnVtZW50LCAnY2NOdW1iZXInKSAmJlxuICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RydW1lbnQsICdjY0N2dicpXG4gICAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBGb3JtYXR0ZWRQYXlsb2FkPEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50PiB7XG4gICAgY29uc3QgZm9ybWF0dGVkSW5zdHJ1bWVudCA9IChpbnN0cnVtZW50IGFzIEZvcm1hdHRlZFBheWxvYWQ8Rm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQ+KVxuICAgICAgICAuZm9ybWF0dGVkUGF5bG9hZDtcblxuICAgIGlmICghZm9ybWF0dGVkSW5zdHJ1bWVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuID09PSAnc3RyaW5nJyB8fFxuICAgICAgICBCb29sZWFuKGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuICYmIGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuLnRva2VuKVxuICAgICk7XG59XG4iLCJpbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8vIEhhdmUgdG8gdXNlIGBhc2AgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzM5ODcwNDQvdHlwZWd1YXJkaW5nLWFuLXVua25vd24tbmVzdGVkLW9iamVjdCBzaG91bGQgYmUgZml4ZWQgaW4gNC44K1xuY29uc3QgaXNSZXF1ZXN0RXJyb3IgPSAoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBSZXF1ZXN0RXJyb3IgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdib2R5JyBpbiBlcnJvcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzUmVxdWVzdEVycm9yO1xuIiwiaW1wb3J0IHsgTWVzc2FnZXNTdHlsZU9wdGlvbnMsIFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSB9IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmZ1bmN0aW9uIGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcoe1xuICAgIHN0eWxlcyxcbn06IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSk6IE1lc3NhZ2VzU3R5bGVPcHRpb25zIHtcbiAgICBjb25zdCBtZXNzYWdlc1N0eWxlczogTWVzc2FnZXNTdHlsZU9wdGlvbnMgPSB7fTtcblxuICAgIGlmIChzdHlsZXMuY29sb3IpIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMuY29sb3IgPSBzdHlsZXMuY29sb3I7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlcy5sYXlvdXQpIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMubGF5b3V0ID0gc3R5bGVzLmxheW91dDtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGVzWydsb2dvLXR5cGUnXSB8fCBzdHlsZXNbJ2xvZ28tcG9zaXRpb24nXSkge1xuICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvID0ge307XG5cbiAgICAgICAgaWYgKHN0eWxlc1snbG9nby10eXBlJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLmxvZ28udHlwZSA9IHN0eWxlc1snbG9nby10eXBlJ107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3R5bGVzWydsb2dvLXBvc2l0aW9uJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLmxvZ28ucG9zaXRpb24gPSBzdHlsZXNbJ2xvZ28tcG9zaXRpb24nXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdHlsZXMucmF0aW8pIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMucmF0aW8gPSBzdHlsZXMucmF0aW87XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlc1sndGV4dC1jb2xvciddIHx8IHN0eWxlc1sndGV4dC1zaXplJ10pIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMudGV4dCA9IHt9O1xuXG4gICAgICAgIGlmIChzdHlsZXNbJ3RleHQtY29sb3InXSkge1xuICAgICAgICAgICAgbWVzc2FnZXNTdHlsZXMudGV4dC5jb2xvciA9IHN0eWxlc1sndGV4dC1jb2xvciddO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0eWxlc1sndGV4dC1zaXplJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLnRleHQuc2l6ZSA9ICtzdHlsZXNbJ3RleHQtc2l6ZSddO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lc3NhZ2VzU3R5bGVzO1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnO1xuIiwiZXhwb3J0IGludGVyZmFjZSBCYXNlSW5zdHJ1bWVudCB7XG4gICAgYmlncGF5VG9rZW46IHN0cmluZztcbiAgICBkZWZhdWx0SW5zdHJ1bWVudDogYm9vbGVhbjtcbiAgICBwcm92aWRlcjogc3RyaW5nO1xuICAgIHRydXN0ZWRTaGlwcGluZ0FkZHJlc3M6IGJvb2xlYW47XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlSW5zdHJ1bWVudChpbnN0cnVtZW50OiB1bmtub3duKTogaW5zdHJ1bWVudCBpcyBCYXNlSW5zdHJ1bWVudCB7XG4gICAgaWYgKHR5cGVvZiBpbnN0cnVtZW50ICE9PSAnb2JqZWN0JyB8fCBpbnN0cnVtZW50ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICAnYmlncGF5VG9rZW4nIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ2RlZmF1bHRJbnN0cnVtZW50JyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICdwcm92aWRlcicgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAndHJ1c3RlZFNoaXBwaW5nQWRkcmVzcycgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAnbWV0aG9kJyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICd0eXBlJyBpbiBpbnN0cnVtZW50XG4gICAgKTtcbn1cbiIsImltcG9ydCB7XG4gICAgSG9zdGVkSW5zdHJ1bWVudCxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlLFxuICAgIGlzVmF1bHRlZEluc3RydW1lbnQsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5LFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudCxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcsXG4gICAgaXNQYXlwYWxDb21tZXJjZVByb3ZpZGVyRXJyb3IsXG4gICAgaXNSZWRpcmVjdEFjdGlvbkVycm9yLFxuICAgIE1lc3NhZ2luZ09wdGlvbnMsXG4gICAgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgIFBheVBhbENvbW1lcmNlU2RrLFxuICAgIFBheVBhbE1lc3NhZ2VzU2RrLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5pbXBvcnQgeyBpc0Jhc2VJbnN0cnVtZW50IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBDbGlja0NhbGxiYWNrQWN0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbn0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcGF5cGFsQnV0dG9uPzogUGF5UGFsQ29tbWVyY2VCdXR0b25zO1xuICAgIHByaXZhdGUgcGF5cGFsY29tbWVyY2U/OiBQYXlQYWxDb21tZXJjZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlU2RrOiBQYXlQYWxDb21tZXJjZVNkayxcbiAgICAgICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yOiBMb2FkaW5nSW5kaWNhdG9yLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlIH0gPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgIHRoaXMucGF5cGFsY29tbWVyY2UgPSBwYXlwYWxjb21tZXJjZTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgYmFubmVyQ29udGFpbmVySWQgfSA9IHBheXBhbGNvbW1lcmNlO1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIG9yZGVySWQsXG4gICAgICAgICAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiA9IFtdLFxuICAgICAgICAgICAgaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUsXG4gICAgICAgIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBpZiAoYmFubmVyQ29udGFpbmVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChiYW5uZXJDb250YWluZXJJZCkpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBjcmVhdGUgYmFubmVyIHdpdGhvdXQgdmFsaWQgYmFubmVyIGNvbnRhaW5lciBJRC4nKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgYmFubmVyQ29uZmlndXJhdGlvbiA9IHBheXBhbEJOUExDb25maWd1cmF0aW9uPy5maW5kKFxuICAgICAgICAgICAgICAgICh7IGlkIH0pID0+IGlkID09PSAnY2hlY2tvdXQnLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlIHx8ICFiYW5uZXJDb25maWd1cmF0aW9uPy5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBheXBhbE1lc3NhZ2VzID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVNkay5nZXRQYXlQYWxNZXNzYWdlcyhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICghcGF5cGFsTWVzc2FnZXMgfHwgdHlwZW9mIHBheXBhbE1lc3NhZ2VzPy5NZXNzYWdlcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICdbQkMgUGF5UGFsQ29tbWVyY2UgUGF5TGF0ZXJdOiBiYW5uZXIgY291bGQgbm90IGJlIHJlbmRlcmVkLCBkdWUgdG8gaXNzdWVzIHdpdGggbG9hZGluZyBQYXlQYWwgU0RLJyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJNZXNzYWdlcyhwYXlwYWxNZXNzYWdlcywgYmFubmVyQ29udGFpbmVySWQsIGJhbm5lckNvbmZpZ3VyYXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5mbzpcbiAgICAgICAgLy8gVGhlIFBheVBhbCBidXR0b24gYW5kIGZpZWxkcyBzaG91bGQgbm90IGJlIHJlbmRlcmVkIHdoZW4gc2hvcHBlciB3YXMgcmVkaXJlY3RlZCB0byBDaGVja291dCBwYWdlXG4gICAgICAgIC8vIGFmdGVyIHVzaW5nIHNtYXJ0IHBheW1lbnQgYnV0dG9uIG9uIFBEUCBvciBDYXJ0IHBhZ2UuIEluIHRoaXMgY2FzZSBiYWNrZW5kIHJldHVybnMgb3JkZXIgaWQgaWZcbiAgICAgICAgLy8gaXQgaXMgYXZhaWxhYmxlIGluIGNoZWNrb3V0IHNlc3Npb24uIFRoZXJlZm9yZSwgaXQgaXMgbm90IG5lY2Vzc2FyeSB0byByZW5kZXIgUGF5UGFsIGJ1dHRvbi5cbiAgICAgICAgaWYgKG9yZGVySWQpIHtcbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5vcmRlcklkO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIgPSBjb250YWluZXI/LnNwbGl0KCcjJylbMV07XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAocGF5cGFsY29tbWVyY2Uub25Jbml0ICYmIHR5cGVvZiBwYXlwYWxjb21tZXJjZS5vbkluaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlLm9uSW5pdCgoKSA9PiB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgcGF5cGFsY29tbWVyY2UpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlLnNob3VsZFJlbmRlclBheVBhbEJ1dHRvbk9uSW5pdGlhbGl6YXRpb24gPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgcGF5cGFsY29tbWVyY2Uuc2hvdWxkUmVuZGVyUGF5UGFsQnV0dG9uT25Jbml0aWFsaXphdGlvblxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgeyBvbkVycm9yIH0gPSB0aGlzLnBheXBhbGNvbW1lcmNlIHx8IHt9O1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXltZW50RGF0YSB9ID0gcGF5bWVudDtcblxuICAgICAgICBpZiAodGhpcy5pc1BheVBhbFZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudERhdGEocGF5bWVudERhdGEpICYmICF0aGlzLm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCA9IGF3YWl0IHRoaXMuY3JlYXRlT3JkZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5bWVudFBheWxvYWQgPSB0aGlzLmlzUGF5UGFsVmF1bHRlZEluc3RydW1lbnRQYXltZW50RGF0YShwYXltZW50RGF0YSlcbiAgICAgICAgICAgID8gdGhpcy5wcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZChtZXRob2RJZCwgdGhpcy5vcmRlcklkLCBwYXltZW50RGF0YSlcbiAgICAgICAgICAgIDogdGhpcy5wcmVwYXJlUGF5bWVudFBheWxvYWQobWV0aG9kSWQsIHRoaXMub3JkZXJJZCwgcGF5bWVudERhdGEpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocGF5bWVudFBheWxvYWQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgICAgICAgaWYgKGlzUmVkaXJlY3RBY3Rpb25FcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWRpcmVjdFVybCA9IGVycm9yLmJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ/LmRhdGE/LnJlZGlyZWN0X3VybDtcblxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShyZWRpcmVjdFVybCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb3ZpZGVyRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKHBheW1lbnQubWV0aG9kSWQpO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKF9yZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGF5cGFsY29tbWVyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQnV0dG9uPy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24ocGF5bWVudC5tZXRob2RJZCwgdGhpcy5wYXlwYWxjb21tZXJjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcignSU5TVFJVTUVOVF9ERUNMSU5FRCcpLCBvbkVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBvbkVycm9yKTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24/LmNsb3NlKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbE9yZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcGF5bWVudERhdGE6IFZhdWx0ZWRJbnN0cnVtZW50ICYgSG9zdGVkSW5zdHJ1bWVudCxcbiAgICApOiBQYXltZW50IHtcbiAgICAgICAgY29uc3QgeyBpbnN0cnVtZW50SWQsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgfSA9IHBheW1lbnREYXRhO1xuXG4gICAgICAgIGNvbnN0IHNob3VsZENvbmZpcm1JbnN0cnVtZW50ID0gIXRoaXMuaXNUcnVzdGVkVmF1bHRpbmdGbG93KHBheW1lbnREYXRhKTtcblxuICAgICAgICBpZiAoc2hvdWxkQ29uZmlybUluc3RydW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQ6IHNob3VsZENvbmZpcm1JbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlwYWxfYWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBwYXlwYWxPcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxfYWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IHBheXBhbE9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGJpZ3BheV90b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IGluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByZXBhcmVQYXltZW50UGF5bG9hZChcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsT3JkZXJJZDogc3RyaW5nLFxuICAgICAgICBwYXltZW50RGF0YTogT3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ10sXG4gICAgKTogUGF5bWVudCB7XG4gICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlIH0gPVxuICAgICAgICAgICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSkgPyBwYXltZW50RGF0YSA6IHt9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogcGF5cGFsT3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1dHRvbiBtZXRob2RzL2NhbGxiYWNrc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsY29tbWVyY2U6IFBheVBhbENvbW1lcmNlUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25FcnJvciwgb25SZW5kZXJCdXR0b24sIG9uVmFsaWRhdGUsIHN1Ym1pdEZvcm0gfSA9IHBheXBhbGNvbW1lcmNlO1xuXG4gICAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcImNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJ1dHRvbk9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICAuLi4odGhpcy5pc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZChtZXRob2RJZCkgJiYge1xuICAgICAgICAgICAgICAgIGFwcFN3aXRjaFdoZW5BdmFpbGFibGU6IHRydWUsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IHBheXBhbFNkay5GVU5ESU5HLlBBWVBBTCxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoXG4gICAgICAgICAgICAgICAgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PiB0aGlzLmNyZWF0ZU9yZGVyKCksXG4gICAgICAgICAgICBvbkNsaWNrOiAoXywgYWN0aW9ucykgPT4gdGhpcy5oYW5kbGVDbGljayhhY3Rpb25zLCBvblZhbGlkYXRlKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGEpID0+IHRoaXMuaGFuZGxlQXBwcm92ZShkYXRhLCBzdWJtaXRGb3JtKSxcbiAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgb25FcnJvciksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvbk9wdGlvbnMpO1xuXG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob25SZW5kZXJCdXR0b24gJiYgdHlwZW9mIG9uUmVuZGVyQnV0dG9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvblJlbmRlckJ1dHRvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGF5cGFsQnV0dG9uLmhhc1JldHVybmVkPy4oKSAmJiB0aGlzLmlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkKSkge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24ucmVzdW1lPy4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGF5cGFsQnV0dG9uLnJlbmRlcihjb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYWN0aW9uczogQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG9uVmFsaWRhdGU6IFBheVBhbENvbW1lcmNlUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvblZhbGlkYXRlJ10sXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcmVzb2x2ZSwgcmVqZWN0IH0gPSBhY3Rpb25zO1xuXG4gICAgICAgIGNvbnN0IG9uVmFsaWRhdGlvblBhc3NlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcih0cnVlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gb25WYWxpZGF0ZT8uKG9uVmFsaWRhdGlvblBhc3NlZCwgcmVqZWN0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUFwcHJvdmUoXG4gICAgICAgIHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBzdWJtaXRGb3JtOiBQYXlQYWxDb21tZXJjZVBheW1lbnRJbml0aWFsaXplT3B0aW9uc1snc3VibWl0Rm9ybSddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklEO1xuXG4gICAgICAgIHN1Ym1pdEZvcm0/LigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoXG4gICAgICAgIGVycm9yOiB1bmtub3duLFxuICAgICAgICBvbkVycm9yOiBQYXlQYWxDb21tZXJjZVBheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25FcnJvciddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlT3JkZXIoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgZmllbGRzVmFsdWVzID0gdGhpcy5nZXRGaWVsZHNWYWx1ZXMoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcigncGF5cGFsY29tbWVyY2VjaGVja291dCcsIHtcbiAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50OiBmaWVsZHNWYWx1ZXM/LnNob3VsZFNhdmVJbnN0cnVtZW50IHx8IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFZhdWx0aW5nIGZsb3cgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIGdldEZpZWxkc1ZhbHVlcygpOiBIb3N0ZWRJbnN0cnVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3QgeyBnZXRGaWVsZHNWYWx1ZXMgfSA9IHRoaXMucGF5cGFsY29tbWVyY2UgfHwge307XG5cbiAgICAgICAgcmV0dXJuIHR5cGVvZiBnZXRGaWVsZHNWYWx1ZXMgPT09ICdmdW5jdGlvbicgPyBnZXRGaWVsZHNWYWx1ZXMoKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzVHJ1c3RlZFZhdWx0aW5nRmxvdyhwYXltZW50RGF0YT86IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAocGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGluc3RydW1lbnRzID0gc3RhdGUuZ2V0SW5zdHJ1bWVudHMoKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbmRJbnN0cnVtZW50ID0gaW5zdHJ1bWVudHM/LmZpbmQoXG4gICAgICAgICAgICAgICAgKGluc3RydW1lbnQpID0+XG4gICAgICAgICAgICAgICAgICAgIGlzQmFzZUluc3RydW1lbnQoaW5zdHJ1bWVudCkgJiZcbiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudC5iaWdwYXlUb2tlbiA9PT0gcGF5bWVudERhdGEuaW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHRydXN0ZWRTaGlwcGluZ0FkZHJlc3MgPSBpc0Jhc2VJbnN0cnVtZW50KGZpbmRJbnN0cnVtZW50KVxuICAgICAgICAgICAgICAgID8gZmluZEluc3RydW1lbnQudHJ1c3RlZFNoaXBwaW5nQWRkcmVzc1xuICAgICAgICAgICAgICAgIDoge307XG5cbiAgICAgICAgICAgIHJldHVybiAhIXRydXN0ZWRTaGlwcGluZ0FkZHJlc3M7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBMb2FkaW5nIEluZGljYXRvciBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgdG9nZ2xlTG9hZGluZ0luZGljYXRvcihpc0xvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGlzTG9hZGluZyAmJiB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBHdWFyZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgaXNQYXlQYWxWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnREYXRhKFxuICAgICAgICBwYXltZW50RGF0YT86IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbiAgICApOiBwYXltZW50RGF0YSBpcyBWYXVsdGVkSW5zdHJ1bWVudCAmIEhvc3RlZEluc3RydW1lbnQge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgISFwYXltZW50RGF0YSAmJiBpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnREYXRhKSAmJiBpc0hvc3RlZEluc3RydW1lbnRMaWtlKHBheW1lbnREYXRhKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUmVuZGVyIFBheSBMYXRlciBNZXNzYWdlc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlck1lc3NhZ2VzKFxuICAgICAgICBwYXlwYWxNZXNzYWdlczogUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgICAgIGJhbm5lckNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIGJhbm5lckNvbmZpZ3VyYXRpb246IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2hlY2tvdXQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDaGVja291dE9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxNZXNzYWdlc09wdGlvbnM6IE1lc3NhZ2luZ09wdGlvbnMgPSB7XG4gICAgICAgICAgICBhbW91bnQ6IGNoZWNrb3V0Lm91dHN0YW5kaW5nQmFsYW5jZSxcbiAgICAgICAgICAgIHBsYWNlbWVudDogJ3BheW1lbnQnLFxuICAgICAgICAgICAgc3R5bGU6IGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcoYmFubmVyQ29uZmlndXJhdGlvbiksXG4gICAgICAgIH07XG5cbiAgICAgICAgcGF5cGFsTWVzc2FnZXMuTWVzc2FnZXMocGF5cGFsTWVzc2FnZXNPcHRpb25zKS5yZW5kZXIoYCMke2Jhbm5lckNvbnRhaW5lcklkfWApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRXJyb3IgaGFuZGxpbmdcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgaXNQcm92aWRlckVycm9yKGVycm9yOiB1bmtub3duKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChpc1BheXBhbENvbW1lcmNlUHJvdmlkZXJFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgIGNvbnN0IHBheXBhbFByb3ZpZGVyRXJyb3IgPSBlcnJvcj8uZXJyb3JzPy5maWx0ZXIoKGUpID0+IGUucHJvdmlkZXJfZXJyb3IpIHx8IFtdO1xuXG4gICAgICAgICAgICByZXR1cm4gcGF5cGFsUHJvdmlkZXJFcnJvclswXT8ucHJvdmlkZXJfZXJyb3I/LmNvZGUgPT09ICdJTlNUUlVNRU5UX0RFQ0xJTkVEJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheVBhbCBBcHBTd2l0Y2ggZW5hYmxpbmcgaGFuZGxpbmdcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5pc0FwcFN3aXRjaEVuYWJsZWQgfHwgZmFsc2U7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgaXNSZXF1ZXN0RXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgUHJvdmlkZXJFcnJvciB9IGZyb20gJy4vaXMtcGF5cGFsLWNvbW1lcmNlLXByb3ZpZGVyLWVycm9yJztcblxuZXhwb3J0IGludGVyZmFjZSBSZWRpcmVjdEFjdGlvbkVycm9yIGV4dGVuZHMgUHJvdmlkZXJFcnJvciB7XG4gICAgYm9keToge1xuICAgICAgICBhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZDoge1xuICAgICAgICAgICAgdHlwZTogJ29mZnNpdGVfcmVkaXJlY3QnO1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0X3VybDogc3RyaW5nO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1JlZGlyZWN0QWN0aW9uRXJyb3IoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBSZWRpcmVjdEFjdGlvbkVycm9yIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBpc1JlcXVlc3RFcnJvcihlcnJvcikgJiYgZXJyb3IuYm9keS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZD8udHlwZSA9PT0gJ29mZnNpdGVfcmVkaXJlY3QnXG4gICAgKTtcbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgUHJvdmlkZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBlcnJvcnM/OiBFcnJvckVsZW1lbnRbXTtcbiAgICBzdGF0dXM/OiBzdHJpbmc7XG4gICAgdGhyZWVfZHNfcmVzdWx0Pzoge1xuICAgICAgICBhY3NfdXJsOiB1bmtub3duO1xuICAgICAgICBwYXllcl9hdXRoX3JlcXVlc3Q6IHVua25vd247XG4gICAgICAgIG1lcmNoYW50X2RhdGE6IHVua25vd247XG4gICAgICAgIGNhbGxiYWNrX3VybDogdW5rbm93bjtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yRWxlbWVudCB7XG4gICAgY29kZTogc3RyaW5nO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICBwcm92aWRlcl9lcnJvcj86IHtcbiAgICAgICAgY29kZTogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzUGF5cGFsQ29tbWVyY2VQcm92aWRlckVycm9yKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUHJvdmlkZXJFcnJvciB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IgIT09IG51bGwgJiYgJ2Vycm9ycycgaW4gZXJyb3I7XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgUGF5UGFsQ29tbWVyY2VTZGsgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHsgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTIH0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWNvbnN0YW50cyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVBheW1lbnRTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8UGF5UGFsQ29tbWVyY2VQYXltZW50U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgbmV3IFBheVBhbENvbW1lcmNlU2RrKGdldFNjcmlwdExvYWRlcigpKSxcbiAgICAgICAgbmV3IExvYWRpbmdJbmRpY2F0b3Ioe1xuICAgICAgICAgICAgY29udGFpbmVyU3R5bGVzOiBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMsXG4gICAgICAgIH0pLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZVBheW1lbnRTdHJhdGVneSwgW3sgaWQ6ICdwYXlwYWxjb21tZXJjZScgfV0pO1xuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSB0cnkgdG8gY2FsbCBhIG1ldGhvZCB0aGF0IGlzIG9ubHkgYSBzdHViIGFuZCBoYXMgbm90XG4gKiBiZWVuIGZ1bGx5IGltcGxlbWVudGVkLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RJbXBsZW1lbnRlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdOb3QgaW1wbGVtZW50ZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdEltcGxlbWVudGVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm90X2ltcGxlbWVudGVkJztcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE5vdEltcGxlbWVudGVkRXJyb3IsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcsXG4gICAgTWVzc2FnaW5nT3B0aW9ucyxcbiAgICBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0sXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsQ29tbWVyY2VTZGssXG4gICAgUGF5UGFsTWVzc2FnZXNTZGssXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLWNvbW1lcmNlLXV0aWxzJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBDbGlja0NhbGxiYWNrQWN0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbn0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgb3JkZXJJZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheXBhbEJ1dHRvbj86IFBheVBhbENvbW1lcmNlQnV0dG9ucztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VTZGs6IFBheVBhbENvbW1lcmNlU2RrLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlLCBwYXlwYWxjb21tZXJjZWNyZWRpdCB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBjb25zdCBwYXlwYWxPcHRpb25zID0gcGF5cGFsY29tbWVyY2VjcmVkaXQgfHwgcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxPcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCB7IHBheXBhbEJOUExDb25maWd1cmF0aW9uID0gW10sIG9yZGVySWQgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGJhbm5lckNvbnRhaW5lcklkLCBjb250YWluZXIgfSA9IHBheXBhbE9wdGlvbnM7XG5cbiAgICAgICAgaWYgKGJhbm5lckNvbnRhaW5lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYmFubmVyQ29udGFpbmVySWQpKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY3JlYXRlIGJhbm5lciB3aXRob3V0IHZhbGlkIGJhbm5lciBjb250YWluZXIgSUQuJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGJhbm5lckNvbmZpZ3VyYXRpb24gPVxuICAgICAgICAgICAgICAgIHBheXBhbEJOUExDb25maWd1cmF0aW9uICYmXG4gICAgICAgICAgICAgICAgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24uZmluZCgoeyBpZCB9KSA9PiBpZCA9PT0gJ2NoZWNrb3V0Jyk7XG5cbiAgICAgICAgICAgIGlmICghYmFubmVyQ29uZmlndXJhdGlvbj8uc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwYXlwYWxNZXNzYWdlcyA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsTWVzc2FnZXMoXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJNZXNzYWdlcyhwYXlwYWxNZXNzYWdlcywgYmFubmVyQ29udGFpbmVySWQsIGJhbm5lckNvbmZpZ3VyYXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5mbzpcbiAgICAgICAgLy8gVGhlIFBheVBhbCBidXR0b24gYW5kIGZpZWxkcyBzaG91bGQgbm90IGJlIHJlbmRlcmVkIHdoZW4gc2hvcHBlciB3YXMgcmVkaXJlY3RlZCB0byBDaGVja291dCBwYWdlXG4gICAgICAgIC8vIGFmdGVyIHVzaW5nIHNtYXJ0IHBheW1lbnQgYnV0dG9uIG9uIFBEUCBvciBDYXJ0IHBhZ2UuIEluIHRoaXMgY2FzZSBiYWNrZW5kIHJldHVybnMgb3JkZXIgaWQgaWZcbiAgICAgICAgLy8gaXQgaXMgYXZhaWxhYmxlIGluIGNoZWNrb3V0IHNlc3Npb24uIFRoZXJlZm9yZSwgaXQgaXMgbm90IG5lY2Vzc2FyeSB0byByZW5kZXIgUGF5UGFsIGJ1dHRvbi5cbiAgICAgICAgaWYgKG9yZGVySWQpIHtcbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySWQ7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gY29udGFpbmVyPy5zcGxpdCgnIycpWzFdO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBwYXlwYWxPcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocGF5bWVudC5tZXRob2RJZCwgdGhpcy5vcmRlcklkKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24/LmNsb3NlKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV0dG9uIG1ldGhvZHMvY2FsbGJhY2tzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxPcHRpb25zOiBQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgaWYgKCFwYXlwYWxPcHRpb25zPy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwiY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcblxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25FcnJvciwgb25SZW5kZXJCdXR0b24sIG9uVmFsaWRhdGUsIHN1Ym1pdEZvcm0gfSA9IHBheXBhbE9wdGlvbnM7XG5cbiAgICAgICAgY29uc3QgZnVuZGluZ1NvdXJjZXMgPSBbcGF5cGFsU2RrLkZVTkRJTkcuUEFZTEFURVIsIHBheXBhbFNkay5GVU5ESU5HLkNSRURJVF07XG4gICAgICAgIGxldCBoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uID0gZmFsc2U7XG5cbiAgICAgICAgZnVuZGluZ1NvdXJjZXMuZm9yRWFjaCgoZnVuZGluZ1NvdXJjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGhhc1JlbmRlcmVkU21hcnRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbk9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgZnVuZGluZ1NvdXJjZSxcbiAgICAgICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKFxuICAgICAgICAgICAgICAgICAgICBjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICdwYXlwYWxjb21tZXJjZWNyZWRpdGNoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiAoXywgYWN0aW9ucykgPT4gdGhpcy5oYW5kbGVDbGljayhhY3Rpb25zLCBvblZhbGlkYXRlKSxcbiAgICAgICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhKSA9PiB0aGlzLmhhbmRsZUFwcHJvdmUoZGF0YSwgc3VibWl0Rm9ybSksXG4gICAgICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSksXG4gICAgICAgICAgICAgICAgb25FcnJvcjogKGVycm9yKSA9PiB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBvbkVycm9yKSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMucGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5wYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpICYmIGZ1bmRpbmdTb3VyY2UgPT09IHBheXBhbFNkay5GVU5ESU5HLlBBWUxBVEVSKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRoaXMucGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSAmJiBmdW5kaW5nU291cmNlID09PSBwYXlwYWxTZGsuRlVORElORy5DUkVESVQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgYFBheVBhbCAke2Z1bmRpbmdTb3VyY2V9IGlzIG5vdCBhdmFpbGFibGUgZm9yIHlvdXIgcmVnaW9uLiBQbGVhc2UgdXNlIFBheVBhbCBDaGVja291dCBpbnN0ZWFkLmAsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9uUmVuZGVyQnV0dG9uICYmIHR5cGVvZiBvblJlbmRlckJ1dHRvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uUmVuZGVyQnV0dG9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucGF5cGFsQnV0dG9uLnJlbmRlcihjb250YWluZXIpO1xuICAgICAgICAgICAgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGFjdGlvbnM6IENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBvblZhbGlkYXRlOiBQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25WYWxpZGF0ZSddLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHJlc29sdmUsIHJlamVjdCB9ID0gYWN0aW9ucztcblxuICAgICAgICBjb25zdCBvblZhbGlkYXRpb25QYXNzZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG9uVmFsaWRhdGUgJiYgdHlwZW9mIG9uVmFsaWRhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBvblZhbGlkYXRlKG9uVmFsaWRhdGlvblBhc3NlZCwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlQXBwcm92ZShcbiAgICAgICAgeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIHN1Ym1pdEZvcm06IFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudEluaXRpYWxpemVPcHRpb25zWydzdWJtaXRGb3JtJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySUQ7XG5cbiAgICAgICAgaWYgKHN1Ym1pdEZvcm0gJiYgdHlwZW9mIHN1Ym1pdEZvcm0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHN1Ym1pdEZvcm0oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoXG4gICAgICAgIGVycm9yOiBFcnJvcixcbiAgICAgICAgb25FcnJvcjogUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uRXJyb3InXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFJlbmRlciBQYXkgTGF0ZXIgTWVzc2FnZXNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlcyhcbiAgICAgICAgcGF5cGFsTWVzc2FnZXM6IFBheVBhbE1lc3NhZ2VzU2RrLFxuICAgICAgICBiYW5uZXJDb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBiYW5uZXJDb25maWd1cmF0aW9uOiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNoZWNrb3V0ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2hlY2tvdXRPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXNPcHRpb25zOiBNZXNzYWdpbmdPcHRpb25zID0ge1xuICAgICAgICAgICAgYW1vdW50OiBjaGVja291dC5vdXRzdGFuZGluZ0JhbGFuY2UsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6ICdwYXltZW50JyxcbiAgICAgICAgICAgIHN0eWxlOiBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnKGJhbm5lckNvbmZpZ3VyYXRpb24pLFxuICAgICAgICB9O1xuXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzLk1lc3NhZ2VzKHBheXBhbE1lc3NhZ2VzT3B0aW9ucykucmVuZGVyKGAjJHtiYW5uZXJDb250YWluZXJJZH1gKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IGNyZWF0ZVBheVBhbENvbW1lcmNlU2RrIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtY29tbWVyY2UtdXRpbHMnO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyB9IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1jb25zdGFudHMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtY3JlZGl0LXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIG5ldyBMb2FkaW5nSW5kaWNhdG9yKHtcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlczogTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTLFxuICAgICAgICB9KSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VTZGsoKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2VjcmVkaXQnIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTm90SW1wbGVtZW50ZWRFcnJvcixcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBDbGlja0NhbGxiYWNrQWN0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbn0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtdmVubW8tcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcGF5cGFsQnV0dG9uPzogUGF5UGFsQ29tbWVyY2VCdXR0b25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlLCBwYXlwYWxjb21tZXJjZXZlbm1vIH0gPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbE9wdGlvbnMgPSBwYXlwYWxjb21tZXJjZXZlbm1vIHx8IHBheXBhbGNvbW1lcmNlO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsT3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNldmVubW9cIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICAvLyBJbmZvOlxuICAgICAgICAvLyBUaGUgUGF5UGFsIGJ1dHRvbiBhbmQgZmllbGRzIHNob3VsZCBub3QgYmUgcmVuZGVyZWQgd2hlbiBzaG9wcGVyIHdhcyByZWRpcmVjdGVkIHRvIENoZWNrb3V0IHBhZ2VcbiAgICAgICAgLy8gYWZ0ZXIgdXNpbmcgc21hcnQgcGF5bWVudCBidXR0b24gb24gUERQIG9yIENhcnQgcGFnZS4gSW4gdGhpcyBjYXNlIGJhY2tlbmQgcmV0dXJucyBvcmRlciBpZCBpZlxuICAgICAgICAvLyBpdCBpcyBhdmFpbGFibGUgaW4gY2hlY2tvdXQgc2Vzc2lvbi4gVGhlcmVmb3JlLCBpdCBpcyBub3QgbmVjZXNzYXJ5IHRvIHJlbmRlciBQYXlQYWwgYnV0dG9uLlxuICAgICAgICBpZiAocGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/Lm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5vcmRlcklkO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IHBheXBhbE9wdGlvbnMuY29udGFpbmVyLnNwbGl0KCcjJylbMV07XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIHBheXBhbE9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMub3JkZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50Lm1ldGhvZElkLCB0aGlzLm9yZGVySWQpO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbj8uY2xvc2UoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXR0b24gbWV0aG9kcy9jYWxsYmFja3NcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNldmVubW86IFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBwYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG5cbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uRXJyb3IsIG9uUmVuZGVyQnV0dG9uLCBvblZhbGlkYXRlLCBzdWJtaXRGb3JtIH0gPSBwYXlwYWxjb21tZXJjZXZlbm1vO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbk9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuRlVORElORy5WRU5NTyxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoXG4gICAgICAgICAgICAgICAgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoJ3BheXBhbGNvbW1lcmNldmVubW9jaGVja291dCcpLFxuICAgICAgICAgICAgb25DbGljazogKF8sIGFjdGlvbnMpID0+IHRoaXMuaGFuZGxlQ2xpY2soYWN0aW9ucywgb25WYWxpZGF0ZSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhKSA9PiB0aGlzLmhhbmRsZUFwcHJvdmUoZGF0YSwgc3VibWl0Rm9ybSksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKSxcbiAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgb25FcnJvciksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25PcHRpb25zKTtcblxuICAgICAgICBpZiAoIXRoaXMucGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoXG4gICAgICAgICAgICAgICAgYFBheVBhbCBWZW5tbyBpcyBub3QgYXZhaWxhYmxlIGZvciB5b3VyIHJlZ2lvbi4gUGxlYXNlIHVzZSBQYXlQYWwgQ2hlY2tvdXQgaW5zdGVhZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvblJlbmRlckJ1dHRvbiAmJiB0eXBlb2Ygb25SZW5kZXJCdXR0b24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uUmVuZGVyQnV0dG9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbi5yZW5kZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBhY3Rpb25zOiBDbGlja0NhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgb25WYWxpZGF0ZTogUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25WYWxpZGF0ZSddLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHJlc29sdmUsIHJlamVjdCB9ID0gYWN0aW9ucztcblxuICAgICAgICBjb25zdCBvblZhbGlkYXRpb25QYXNzZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG9uVmFsaWRhdGUob25WYWxpZGF0aW9uUGFzc2VkLCByZWplY3QpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlQXBwcm92ZShcbiAgICAgICAgeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIHN1Ym1pdEZvcm06IFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ3N1Ym1pdEZvcm0nXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJRDtcblxuICAgICAgICBzdWJtaXRGb3JtKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihcbiAgICAgICAgZXJyb3I6IEVycm9yLFxuICAgICAgICBvbkVycm9yOiBQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvbkVycm9yJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBMb2FkaW5nIEluZGljYXRvciBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgdG9nZ2xlTG9hZGluZ0luZGljYXRvcihpc0xvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGlzTG9hZGluZyAmJiB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS12ZW5tby1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBuZXcgTG9hZGluZ0luZGljYXRvcih7IHN0eWxlczogeyBiYWNrZ3JvdW5kQ29sb3I6ICdibGFjaycgfSB9KSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdwYXlwYWxjb21tZXJjZXZlbm1vJyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCBSZXF1ZXN0RXJyb3IgZnJvbSAnLi9yZXF1ZXN0LWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIGEgcmVxdWVzdCBmYWlscyB0byBjb21wbGV0ZSB3aXRoaW4gaXRzIHJlcXVpcmVkIHRpbWVmcmFtZVxuICogYmVjYXVzZSBvZiBhIG5ldHdvcmsgaXNzdWUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbWVvdXRFcnJvcjxUID0gYW55PiBleHRlbmRzIFJlcXVlc3RFcnJvcjxUPiB7XG4gICAgY29uc3RydWN0b3IocmVzcG9uc2U/OiBSZXNwb25zZTxUPikge1xuICAgICAgICBzdXBlcihyZXNwb25zZSwge1xuICAgICAgICAgICAgbWVzc2FnZTogJ1RoZSByZXF1ZXN0IGhhcyB0aW1lZCBvdXQgb3IgYWJvcnRlZC4nLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnVGltZW91dEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3RpbWVvdXQnO1xuICAgIH1cbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgRmVhdHVyZXMge1xuICAgIFtmZWF0dXJlTmFtZTogc3RyaW5nXTogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNFeHBlcmltZW50RW5hYmxlZChcbiAgICBmZWF0dXJlczogRmVhdHVyZXMsXG4gICAgZXhwZXJpbWVudE5hbWU6IHN0cmluZyxcbiAgICBmYWxsYmFja1ZhbHVlID0gdHJ1ZSxcbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmZWF0dXJlc1tleHBlcmltZW50TmFtZV0gPz8gZmFsbGJhY2tWYWx1ZTtcbn1cbiIsImltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgVGltZW91dEVycm9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IFBheVBhbEFwbVNkaywgUGF5UGFsQ29tbWVyY2VTZGsgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5pbXBvcnQgeyBpc0V4cGVyaW1lbnRFbmFibGVkIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBOb25JbnN0YW50QWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxPcmRlclN0YXR1cyxcbn0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudE9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5jb25zdCBQT0xMSU5HX0lOVEVSVkFMID0gMzAwMDtcbmNvbnN0IE1BWF9QT0xMSU5HX1RJTUUgPSAzMDAwMDA7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcGF5cGFsQnV0dG9uPzogUGF5UGFsQ29tbWVyY2VCdXR0b25zO1xuICAgIHByaXZhdGUgcGF5cGFsQXBtcz86IFBheVBhbEFwbVNkaztcbiAgICBwcml2YXRlIHBvbGxpbmdUaW1lciA9IDA7XG4gICAgcHJpdmF0ZSBzdG9wUG9sbGluZyA9IG5vb3A7XG4gICAgcHJpdmF0ZSBpc1BvbGxpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcz86IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudE9wdGlvbnM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZVNkazogUGF5UGFsQ29tbWVyY2VTZGssXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICAgICAgcHJpdmF0ZSBwb2xsaW5nSW50ZXJ2YWw6IG51bWJlciA9IFBPTExJTkdfSU5URVJWQUwsXG4gICAgICAgIHByaXZhdGUgbWF4UG9sbGluZ0ludGVydmFsVGltZTogbnVtYmVyID0gTUFYX1BPTExJTkdfVElNRSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlLCAvLyBGSVhNRTogdGhpcyBvcHRpb24gaXMgZGVwcmVjYXRlZFxuICAgICAgICAgICAgcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMsXG4gICAgICAgIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBwYXlwYWxPcHRpb25zID0gcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMgfHwgcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcyA9IHBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZ2F0ZXdheUlkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxPcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHsgb3JkZXJJZCwgc2hvdWxkUmVuZGVyRmllbGRzIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgZmVhdHVyZXMgPSBzdGF0ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzO1xuXG4gICAgICAgIHRoaXMuaXNQb2xsaW5nRW5hYmxlZCA9IGlzRXhwZXJpbWVudEVuYWJsZWQoXG4gICAgICAgICAgICBmZWF0dXJlcyxcbiAgICAgICAgICAgICdQQVlQQUwtNTE5Mi5wYXlwYWxfY29tbWVyY2VfaWRlYWxfcG9sbGluZycsXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gSW5mbzpcbiAgICAgICAgLy8gVGhlIFBheVBhbCBidXR0b24gYW5kIGZpZWxkcyBzaG91bGQgbm90IGJlIHJlbmRlcmVkIHdoZW4gc2hvcHBlciB3YXMgcmVkaXJlY3RlZCB0byBDaGVja291dCBwYWdlXG4gICAgICAgIC8vIGFmdGVyIHVzaW5nIHNtYXJ0IHBheW1lbnQgYnV0dG9uIG9uIFBEUCBvciBDYXJ0IHBhZ2UuIEluIHRoaXMgY2FzZSBiYWNrZW5kIHJldHVybnMgb3JkZXIgaWQgaWZcbiAgICAgICAgLy8gaXQgaXMgYXZhaWxhYmxlIGluIGNoZWNrb3V0IHNlc3Npb24uIFRoZXJlZm9yZSwgaXQgaXMgbm90IG5lY2Vzc2FyeSB0byByZW5kZXIgUGF5UGFsIGJ1dHRvbi5cbiAgICAgICAgaWYgKG9yZGVySWQpIHtcbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySWQ7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGF5cGFsQXBtcyA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsQXBtc1NkayhcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gcGF5cGFsT3B0aW9ucy5jb250YWluZXIuc3BsaXQoJyMnKVsxXTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgZ2F0ZXdheUlkLCBwYXlwYWxPcHRpb25zKTtcblxuICAgICAgICBpZiAoc2hvdWxkUmVuZGVyRmllbGRzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZpZWxkcyhtZXRob2RJZCwgcGF5cGFsT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgZ2F0ZXdheUlkIH0gPSBwYXltZW50O1xuXG4gICAgICAgIGlmICghdGhpcy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQb2xsaW5nRW5hYmxlZCAmJiBtZXRob2RJZCA9PT0gJ2lkZWFsJykge1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShtZXRob2RJZCwgcmVzb2x2ZSwgcmVqZWN0LCBnYXRld2F5SWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuaXNOb25JbnN0YW50UGF5bWVudE1ldGhvZChtZXRob2RJZCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCxcbiAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQb2xsaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBvbGxpbmcgbWVjaGFuaXNtXG4gICAgICpcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcmVzb2x2ZVByb21pc2U6ICh2YWx1ZT86IHVua25vd24pID0+IHZvaWQsXG4gICAgICAgIHJlamVjdFByb21pc2U6ICh2YWx1ZT86IHVua25vd24pID0+IHZvaWQsXG4gICAgICAgIGdhdGV3YXlJZD86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQocmVzb2x2ZSwgdGhpcy5wb2xsaW5nSW50ZXJ2YWwpO1xuXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucG9sbGluZ1RpbWVyICs9IHRoaXMucG9sbGluZ0ludGVydmFsO1xuXG4gICAgICAgICAgICBjb25zdCBvcmRlclN0YXR1cyA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0T3JkZXJTdGF0dXMoXG4gICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgaXNPcmRlckFwcHJvdmVkID0gb3JkZXJTdGF0dXMgPT09IFBheVBhbE9yZGVyU3RhdHVzLkFwcHJvdmVkO1xuICAgICAgICAgICAgY29uc3QgaXNQb2xsaW5nRXJyb3IgPSBvcmRlclN0YXR1cyA9PT0gUGF5UGFsT3JkZXJTdGF0dXMuUG9sbGluZ0Vycm9yO1xuXG4gICAgICAgICAgICBpZiAoaXNPcmRlckFwcHJvdmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZVByb21pc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzUG9sbGluZ0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdFByb21pc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpc09yZGVyQXBwcm92ZWQgJiYgdGhpcy5wb2xsaW5nVGltZXIgPCB0aGlzLm1heFBvbGxpbmdJbnRlcnZhbFRpbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICByZWplY3RQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWluaXRpYWxpemVTdHJhdGVneSh7XG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzOiB0aGlzLnBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IFRpbWVvdXRFcnJvcigpKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdFByb21pc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xuICAgICAgICB0aGlzLnBvbGxpbmdUaW1lciA9IDA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXNldFBvbGxpbmdNZWNoYW5pc20oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcmVpbml0aWFsaXplU3RyYXRlZ3koXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmXG4gICAgICAgICAgICBXaXRoUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVpbml0aWFsaXplKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZShvcHRpb25zKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgIGNvbnN0IHsgb25FcnJvciB9ID0gdGhpcy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcyB8fCB7fTtcblxuICAgICAgICBpZiAodGhpcy5pc1BvbGxpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0UG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1dHRvbiBtZXRob2RzL2NhbGxiYWNrc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgZ2F0ZXdheUlkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbE9wdGlvbnM6IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudE9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbEFtcHNTZGsgPSB0aGlzLmdldFBheXBhbEFtcHNTZGtPclRocm93KCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB7IGJ1dHRvblN0eWxlIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25FcnJvciwgb25SZW5kZXJCdXR0b24sIHN1Ym1pdEZvcm0gfSA9IHBheXBhbE9wdGlvbnM7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uT3B0aW9uczogUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IG1ldGhvZElkLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShidXR0b25TdHlsZSksXG4gICAgICAgICAgICBvbkluaXQ6IChfLCBhY3Rpb25zKSA9PiBwYXlwYWxPcHRpb25zLm9uSW5pdEJ1dHRvbihhY3Rpb25zKSxcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PiB0aGlzLm9uQ3JlYXRlT3JkZXIobWV0aG9kSWQsIGdhdGV3YXlJZCwgcGF5cGFsT3B0aW9ucyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhKSA9PiB0aGlzLmhhbmRsZUFwcHJvdmUoZGF0YSwgc3VibWl0Rm9ybSksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25FcnJvcjogKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVGYWlsdXJlKGVycm9yLCBvbkVycm9yKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoXywgYWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICBwYXlwYWxPcHRpb25zLm9uVmFsaWRhdGUoYWN0aW9ucy5yZXNvbHZlLCBhY3Rpb25zLnJlamVjdCksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24gPSBwYXlwYWxBbXBzU2RrLkJ1dHRvbnMoYnV0dG9uT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvblJlbmRlckJ1dHRvbiAmJiB0eXBlb2Ygb25SZW5kZXJCdXR0b24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uUmVuZGVyQnV0dG9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbi5yZW5kZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uQ3JlYXRlT3JkZXIoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGdhdGV3YXlJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxPcHRpb25zOiBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRPcHRpb25zLFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHsgb25WYWxpZGF0ZSB9ID0gcGF5cGFsT3B0aW9ucztcblxuICAgICAgICBjb25zdCBvblZhbGlkYXRpb25QYXNzZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiAoKSA9PiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCBvblZhbGlkYXRlKG9uVmFsaWRhdGlvblBhc3NlZCwgbm9vcCk7XG5cbiAgICAgICAgY29uc3Qgb3JkZXJJZCA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAncGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHNjaGVja291dCcsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNOb25JbnN0YW50UGF5bWVudE1ldGhvZChtZXRob2RJZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyID0geyB1c2VTdG9yZUNyZWRpdDogZmFsc2UgfTtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobWV0aG9kSWQsIG9yZGVySWQsIGdhdGV3YXlJZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3JkZXJJZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUFwcHJvdmUoXG4gICAgICAgIHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBzdWJtaXRGb3JtOiBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRPcHRpb25zWydzdWJtaXRGb3JtJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySUQ7XG5cbiAgICAgICAgc3VibWl0Rm9ybSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRmFpbHVyZShcbiAgICAgICAgZXJyb3I6IEVycm9yLFxuICAgICAgICBvbkVycm9yOiBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRPcHRpb25zWydvbkVycm9yJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBGaWVsZHMgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlckZpZWxkcyhcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsT3B0aW9uczogUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50T3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF5cGFsQW1wc1NkayA9IHRoaXMuZ2V0UGF5cGFsQW1wc1Nka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgeyBmaXJzdE5hbWUsIGxhc3ROYW1lLCBlbWFpbCB9ID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgeyBhcG1GaWVsZHNDb250YWluZXIsIGFwbUZpZWxkc1N0eWxlcyB9ID0gcGF5cGFsT3B0aW9ucztcblxuICAgICAgICBpZiAoIWFwbUZpZWxkc0NvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzXCIgYXJndW1lbnQgc2hvdWxkIGNvbnRhaW4gXCJhcG1GaWVsZHNDb250YWluZXJcIi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpZWxkQ29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXBtRmllbGRzQ29udGFpbmVyKTtcblxuICAgICAgICBpZiAoZmllbGRDb250YWluZXJFbGVtZW50KSB7XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lckVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWVsZHNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogbWV0aG9kSWQsXG4gICAgICAgICAgICBzdHlsZTogYXBtRmllbGRzU3R5bGVzIHx8IHt9LFxuICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYCR7Zmlyc3ROYW1lfSAke2xhc3ROYW1lfWAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZW1haWwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsUGF5bWVudEZpZWxkcyA9IHBheXBhbEFtcHNTZGsuUGF5bWVudEZpZWxkcyhmaWVsZHNPcHRpb25zKTtcblxuICAgICAgICBwYXlwYWxQYXltZW50RmllbGRzLnJlbmRlcihhcG1GaWVsZHNDb250YWluZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTG9hZGluZyBJbmRpY2F0b3IgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVXRpbHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSBpc05vbkluc3RhbnRQYXltZW50TWV0aG9kKG1ldGhvZElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIG1ldGhvZElkLnRvVXBwZXJDYXNlKCkgaW4gTm9uSW5zdGFudEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlwYWxBbXBzU2RrT3JUaHJvdygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBheXBhbEFwbXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5cGFsQXBtcztcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IGNyZWF0ZVBheVBhbENvbW1lcmNlU2RrIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtY29tbWVyY2UtdXRpbHMnO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyB9IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1jb25zdGFudHMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZVNkaygpLFxuICAgICAgICBuZXcgTG9hZGluZ0luZGljYXRvcih7XG4gICAgICAgICAgICBjb250YWluZXJTdHlsZXM6IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyxcbiAgICAgICAgfSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBnYXRld2F5OiAncGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMnIH0sXG5dKTtcbiIsIi8vIGNvcGllZCBmcm9tIHBhY2thZ2VzL2NvcmUvc3JjL2hvc3RlZC1mb3JtL2hvc3RlZC1maWVsZC10eXBlLnRzXG5cbmVudW0gSG9zdGVkRmllbGRUeXBlIHtcbiAgICBDYXJkQ29kZSA9ICdjYXJkQ29kZScsXG4gICAgQ2FyZENvZGVWZXJpZmljYXRpb24gPSAnY2FyZENvZGVWZXJpZmljYXRpb24nLFxuICAgIENhcmRFeHBpcnkgPSAnY2FyZEV4cGlyeScsXG4gICAgQ2FyZE5hbWUgPSAnY2FyZE5hbWUnLFxuICAgIENhcmROdW1iZXIgPSAnY2FyZE51bWJlcicsXG4gICAgQ2FyZE51bWJlclZlcmlmaWNhdGlvbiA9ICdjYXJkTnVtYmVyVmVyaWZpY2F0aW9uJyxcbiAgICBDYXJkRXhwaXJ5VmVyaWZpY2F0aW9uID0gJ2NhcmRFeHBpcnlWZXJpZmljYXRpb24nLFxufVxuXG5leHBvcnQgZGVmYXVsdCBIb3N0ZWRGaWVsZFR5cGU7XG4iLCJpbXBvcnQgSG9zdGVkRmllbGRUeXBlIGZyb20gJy4vaG9zdGVkLWZpZWxkLXR5cGUnO1xuaW1wb3J0IHsgSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCB9IGZyb20gJy4vaG9zdGVkLWZvcm0tb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQ3JlZGl0Q2FyZEZvcm1GaWVsZHMoXG4gICAgZmllbGRzOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbik6IGZpZWxkcyBpcyBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlciBpbiBmaWVsZHMgJiZcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmROYW1lIGluIGZpZWxkcyAmJlxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeSBpbiBmaWVsZHNcbiAgICApO1xufVxuIiwiaW1wb3J0IEhvc3RlZEZpZWxkVHlwZSBmcm9tICcuL2hvc3RlZC1maWVsZC10eXBlJztcbmltcG9ydCB7IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAsIEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAgfSBmcm9tICcuL2hvc3RlZC1mb3JtLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyhcbiAgICBmaWVsZHM6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAgfCBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwLFxuKTogZmllbGRzIGlzIEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAge1xuICAgIHJldHVybiAoXG4gICAgICAgIEhvc3RlZEZpZWxkVHlwZS5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uIGluIGZpZWxkcyAmJlxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGVWZXJpZmljYXRpb24gaW4gZmllbGRzICYmXG4gICAgICAgIEhvc3RlZEZpZWxkVHlwZS5DYXJkRXhwaXJ5VmVyaWZpY2F0aW9uIGluIGZpZWxkc1xuICAgICk7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIHBheW1lbnQgbWV0aG9kIGV4cGVyaWVuY2VzIHNvbWUga2luZCBvZlxuICogZmFpbHVyZSAoaS5lLjogaXRzIGNsaWVudCBsaWJyYXJ5IHJldHVybnMgYSByZWplY3RlZCBwcm9taXNlKS4gQW5kIHRoZXJlIGlzXG4gKiBubyBvdGhlciBlcnJvciB0eXBlIHRoYXQgaXMgbW9yZSBzcGVjaWZpYyB0aGFuIHRoaXMgb25lLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGhhcyB0aHJvd24gYW4gdW5leHBlY3RlZCBlcnJvci4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kRmFpbGVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X2ludmFsaWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBOb3RJbml0aWFsaXplZEVycm9yVHlwZSB7XG4gICAgQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZCxcbiAgICBDdXN0b21lck5vdEluaXRpYWxpemVkLFxuICAgIFBheW1lbnROb3RJbml0aWFsaXplZCxcbiAgICBTaGlwcGluZ05vdEluaXRpYWxpemVkLFxuICAgIFNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIG1ldGhvZCByZXF1aXJlcyBhIGNlcnRhaW4gaW5pdGlhbGl6YXRpb24gY2FsbCB0byBiZVxuICogbWFkZSBmaXJzdC4gU29tZSBvYmplY3RzIGNhbiBiZSBjb25zdHJ1Y3RlZCBidXQgdGhleSBjYW5ub3QgYmUgdXNlZCB1bnRpbCBhXG4gKiBzZXBhcmF0ZSBpbml0aWFsaXphdGlvbiBjYWxsIGlzIG1hZGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdEluaXRpYWxpemVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTm90SW5pdGlhbGl6ZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdub3RfaW5pdGlhbGl6ZWQnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5DdXN0b21lck5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjdXN0b21lciBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TaGlwcGluZ05vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBzaGlwcGluZyBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2hlY2tvdXQgc3BhbSBwcm90ZWN0aW9uIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGludGVyZmFjZSBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMge1xuICAgIFtrZXk6IHN0cmluZ106IEFycmF5PHsgbWVzc2FnZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIGRldGFpbHM6IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscywgbWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IGZvcm0gY29udGFpbnMgaW52YWxpZCBkYXRhLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50SW52YWxpZEZvcm1FcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X2ludmFsaWRfZm9ybSc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgaXNOaWwsIG9taXRCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgSG9zdGVkQ2FyZEZpZWxkT3B0aW9ucyxcbiAgICBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwLFxuICAgIEhvc3RlZEZpZWxkQmx1ckV2ZW50RGF0YSxcbiAgICBIb3N0ZWRGaWVsZEVudGVyRXZlbnREYXRhLFxuICAgIEhvc3RlZEZpZWxkRm9jdXNFdmVudERhdGEsXG4gICAgSG9zdGVkRmllbGRTdHlsZXNNYXAsXG4gICAgSG9zdGVkRmllbGRUeXBlLFxuICAgIEhvc3RlZEZpZWxkVmFsaWRhdGVFdmVudERhdGEsXG4gICAgSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgSG9zdGVkSW5wdXRWYWxpZGF0ZUVycm9yRGF0YSxcbiAgICBIb3N0ZWRJbnB1dFZhbGlkYXRlRXJyb3JEYXRhTWFwLFxuICAgIEhvc3RlZEluc3RydW1lbnQsXG4gICAgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc0NyZWRpdENhcmRGb3JtRmllbGRzLFxuICAgIGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzLFxuICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UsXG4gICAgaXNWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yLFxuICAgIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyxcbiAgICBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGlzUGF5UGFsQ29tbWVyY2VBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIsXG4gICAgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbENvbW1lcmNlU2RrLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIExpYWJpbGl0eVNoaWZ0RW51bSxcbiAgICBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHMsXG4gICAgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzQ29uZmlnLFxuICAgIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc09uQXBwcm92ZURhdGEsXG4gICAgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUsXG4gICAgUGF5UGFsQ29tbWVyY2VGaWVsZHMsXG4gICAgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY2FyZHMtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGV4ZWN1dGlvblBheW1lbnREYXRhPzogT3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ107XG4gICAgcHJpdmF0ZSBpc0NyZWRpdENhcmRGb3JtPzogYm9vbGVhbjtcbiAgICBwcml2YXRlIGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtPzogYm9vbGVhbjtcblxuICAgIHByaXZhdGUgY2FyZEZpZWxkcz86IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkcztcbiAgICBwcml2YXRlIGN2dkZpZWxkPzogUGF5UGFsQ29tbWVyY2VGaWVsZHM7XG4gICAgcHJpdmF0ZSBleHBpcnlGaWVsZD86IFBheVBhbENvbW1lcmNlRmllbGRzO1xuICAgIHByaXZhdGUgbnVtYmVyRmllbGQ/OiBQYXlQYWxDb21tZXJjZUZpZWxkcztcbiAgICBwcml2YXRlIG5hbWVGaWVsZD86IFBheVBhbENvbW1lcmNlRmllbGRzO1xuXG4gICAgcHJpdmF0ZSBob3N0ZWRGb3JtT3B0aW9ucz86IEhvc3RlZEZvcm1PcHRpb25zO1xuICAgIHByaXZhdGUgcmV0dXJuZWRPcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcmV0dXJuZWRWYXVsdGVkVG9rZW4/OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZVNkazogUGF5UGFsQ29tbWVyY2VTZGssXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzOiBQYXlQYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHMsIHBheXBhbGNvbW1lcmNlIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBwYXlwYWxDb21tZXJjZUluaXRpYWxpemF0aW9uT3B0aW9ucyA9IHBheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHMgfHwgcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgY29uc3QgeyBmb3JtLCBvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvciwgb25Mb2FkQ29tcGxldGUgfSA9XG4gICAgICAgICAgICBwYXlwYWxDb21tZXJjZUluaXRpYWxpemF0aW9uT3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWZvcm0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkcy5mb3JtXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ob3N0ZWRGb3JtT3B0aW9ucyA9IGZvcm07XG5cbiAgICAgICAgdGhpcy5pc0NyZWRpdENhcmRGb3JtID0gaXNDcmVkaXRDYXJkRm9ybUZpZWxkcyhmb3JtLmZpZWxkcyk7XG4gICAgICAgIHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0gPVxuICAgICAgICAgICAgaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm1GaWVsZHMoZm9ybS5maWVsZHMpICYmICF0aGlzLmhhc1VuZGVmaW5lZFZhbHVlcygpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCwgdW5kZWZpbmVkLCB0cnVlLCB0cnVlKTtcblxuICAgICAgICBvbkxvYWRDb21wbGV0ZT8uKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNDcmVkaXRDYXJkRm9ybSB8fCB0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVGaWVsZHMoZm9ybSwgb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkSW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKG1ldGhvZElkKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplUGF5UGFsRmFzdGxhbmVPclRocm93KG1ldGhvZElkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXltZW50RGF0YSB9ID0gcGF5bWVudCB8fCB7fTtcblxuICAgICAgICBpZiAoIXBheW1lbnQgfHwgIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGEgPSBwYXltZW50RGF0YTtcblxuICAgICAgICBpZiAodGhpcy5pc0NyZWRpdENhcmRGb3JtIHx8IHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0pIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudmFsaWRhdGVIb3N0ZWRGb3JtT3JUaHJvdygpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zdWJtaXRIb3N0ZWRGb3JtKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUaGlzIGNvbmRpdGlvbiBpcyB0cmlnZ2VyZWQgd2hlbiB3ZSBwYXkgd2l0aCB2YXVsdGVkIGluc3RydW1lbnQgYW5kIHNoaXBwaW5nIGFkZHJlc3MgaXMgdHJ1c3RlXG4gICAgICAgICAgICBjb25zdCB7IG9yZGVySWQgfSA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXJDYXJkRmllbGRzKFxuICAgICAgICAgICAgICAgICdwYXlwYWxjb21tZXJjZWNyZWRpdGNhcmRzY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW5zdHJ1bWVudFBhcmFtcygpLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhpcy5yZXR1cm5lZE9yZGVySWQgPSBvcmRlcklkO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3VibWl0UGF5bWVudFBheWxvYWQgPSB0aGlzLnByZXBhcmVQYXltZW50UGF5bG9hZChcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGEsXG4gICAgICAgICAgICB0aGlzLnJldHVybmVkT3JkZXJJZCxcbiAgICAgICAgICAgIHRoaXMucmV0dXJuZWRWYXVsdGVkVG9rZW4sXG4gICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoc3VibWl0UGF5bWVudFBheWxvYWQpO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuY3Z2RmllbGQ/LmNsb3NlKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuZXhwaXJ5RmllbGQ/LmNsb3NlKCk7XG4gICAgICAgIGF3YWl0IHRoaXMubnVtYmVyRmllbGQ/LmNsb3NlKCk7XG4gICAgICAgIGF3YWl0IHRoaXMubmFtZUZpZWxkPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFN1Ym1pdCBQYXltZW50IFBheWxvYWQgcHJlcGFyaW5nIG1ldGhvZFxuICAgICAqXG4gICAgICogYHZhdWx0ZWRUb2tlbmAgaXMgdXNlZCB3aGVuIHdlIHBheSB3aXRoIHZhdWx0ZWQgaW5zdHJ1bWVudCAod2l0aCB0cnVzdGVkIHNoaXBwaW5nIGFkZHJlc3MgYW5kIHVudHJ1c3RlZClcbiAgICAgKiBgc2V0dXBUb2tlbmAgaXMgdXNlZCB3aGVuIHdlIHBheSB3aXRoIHZhdWx0ZWQgaW5zdHJ1bWVudCAodW50cnVzdGVkIHNoaXBwaW5nIGFkZHJlc3MpXG4gICAgICogYG9yZGVySWRgIGlzIHVzZWQgaW4gZXZlcnkgY2FzZSAoYmFzaWMgY2FyZCBwYXltZW50LCB0cnVzdGVkIHNoaXBwaW5nIGFkZHJlc3MgYW5kIHVudHJ1c3RlZClcbiAgICAgKi9cbiAgICBwcml2YXRlIHByZXBhcmVQYXltZW50UGF5bG9hZChcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5bWVudERhdGE6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5WydwYXltZW50RGF0YSddLFxuICAgICAgICBvcmRlcklkPzogc3RyaW5nLFxuICAgICAgICBub25jZT86IHN0cmluZyxcbiAgICApOiBQYXltZW50IHtcbiAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCA9IGZhbHNlLCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID0gZmFsc2UgfSA9XG4gICAgICAgICAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlKHBheW1lbnREYXRhKSA/IHBheW1lbnREYXRhIDoge307XG5cbiAgICAgICAgY29uc3QgaW5zdHJ1bWVudElkID1cbiAgICAgICAgICAgIHBheW1lbnREYXRhICYmIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpID8gcGF5bWVudERhdGEuaW5zdHJ1bWVudElkIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIGNvbnN0IGJpZ3BheV90b2tlbiA9IG9taXRCeShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25fbm9uY2U6IG5vbmNlLFxuICAgICAgICAgICAgICAgIHRva2VuOiBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNOaWwsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihub25jZSB8fCBpbnN0cnVtZW50SWQgPyB7IGJpZ3BheV90b2tlbiB9IDoge30pLFxuICAgICAgICAgICAgICAgICAgICAuLi4ob3JkZXJJZCA/IHsgY2FyZF93aXRoX29yZGVyOiB7IG9yZGVyX2lkOiBvcmRlcklkIH0gfSA6IHt9KSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIENhcmQgZmllbGRzIGluaXRpYWxpemVcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZUZpZWxkcyhcbiAgICAgICAgZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zLFxuICAgICAgICBvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvcj86IFBheVBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yJ10sXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgZmllbGRzLCBzdHlsZXMgfSA9IGZvcm1PcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBleGVjdXRlQ2FsbGJhY2sgPSB0aGlzLmdldEV4ZWN1dGVDYWxsYmFjayhmaWVsZHMpO1xuXG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNDb25maWc6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0NvbmZpZyA9IHtcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLmdldElucHV0U3R5bGVzKHN0eWxlcyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7XG4gICAgICAgICAgICAgICAgb3JkZXJJRCxcbiAgICAgICAgICAgICAgICB2YXVsdFNldHVwVG9rZW4sXG4gICAgICAgICAgICAgICAgbGlhYmlsaXR5U2hpZnQsXG4gICAgICAgICAgICB9OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNPbkFwcHJvdmVEYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBsaWFiaWxpdHlTaGlmdCA9PT0gTGlhYmlsaXR5U2hpZnRFbnVtLk5vIHx8XG4gICAgICAgICAgICAgICAgICAgIGxpYWJpbGl0eVNoaWZ0ID09PSBMaWFiaWxpdHlTaGlmdEVudW0uVW5rbm93blxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVBcHByb3ZlKHsgb3JkZXJJRCwgdmF1bHRTZXR1cFRva2VuIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRXJyb3I6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5wdXRFdmVudHM6IHtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGV2ZW50KSA9PiB0aGlzLm9uQ2hhbmdlSGFuZGxlcihmb3JtT3B0aW9ucywgZXZlbnQpLFxuICAgICAgICAgICAgICAgIG9uRm9jdXM6IChldmVudCkgPT4gdGhpcy5vbkZvY3VzSGFuZGxlcihmb3JtT3B0aW9ucywgZXZlbnQpLFxuICAgICAgICAgICAgICAgIG9uQmx1cjogKGV2ZW50KSA9PiB0aGlzLm9uQmx1ckhhbmRsZXIoZm9ybU9wdGlvbnMsIGV2ZW50KSxcbiAgICAgICAgICAgICAgICBvbklucHV0U3VibWl0UmVxdWVzdDogKGV2ZW50KSA9PiB0aGlzLm9uSW5wdXRTdWJtaXRSZXF1ZXN0KGZvcm1PcHRpb25zLCBldmVudCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4uZXhlY3V0ZUNhbGxiYWNrLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2FyZEZpZWxkcyA9IGF3YWl0IHBheXBhbFNkay5DYXJkRmllbGRzKGNhcmRGaWVsZHNDb25maWcpO1xuXG4gICAgICAgIGlmICghdGhpcy5jYXJkRmllbGRzLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxpemVJbnB1dENvbnRhaW5lcnMoZmllbGRzKTtcblxuICAgICAgICAgICAgaWYgKGlzQ3JlZGl0Q2FyZEZvcm1GaWVsZHMoZmllbGRzKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyRmllbGRzKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyhmaWVsZHMpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJWYXVsdGVkRmllbGRzKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBHZXQgZXhlY3V0ZSBjYWxsYmFjayBtZXRob2RcbiAgICAgKiBEZXBlbmRzIG9uIHNoaXBwaW5nIGFkZHJlc3MgaXMgdHJ1c3RlZCBvciBub3Qgd2Ugc2hvdWxkIHBhc3MgdG8gUFBcbiAgICAgKiBgY3JlYXRlVmF1bHRTZXR1cFRva2VuYCBjYWxsYmFjayBpZiBhZGRyZXNzIGlzIHVudHJ1c3RlZCBvclxuICAgICAqIGBjcmVhdGVPcmRlcmAgaWYgYWRkcmVzcyBpcyB0cnVzdGVkXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEV4ZWN1dGVDYWxsYmFjayhcbiAgICAgICAgZmllbGRzOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbiAgICApIHtcbiAgICAgICAgY29uc3QgaXNWYXVsdGVkRm9ybSA9IGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzKGZpZWxkcyk7XG5cbiAgICAgICAgcmV0dXJuIGlzVmF1bHRlZEZvcm0gPyB0aGlzLmNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrKCkgOiB0aGlzLmNyZWF0ZU9yZGVyQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlVmF1bHRTZXR1cFRva2VuOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzZXR1cFRva2VuIH0gPVxuICAgICAgICAgICAgICAgICAgICAoYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlckNhcmRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgICAgICAncGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkc2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmdldEluc3RydW1lbnRQYXJhbXMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cFRva2VuOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgKSkgfHwge307XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0dXBUb2tlbjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVPcmRlckNhbGxiYWNrKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IG9yZGVySWQgfSA9XG4gICAgICAgICAgICAgICAgICAgIChhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICdwYXlwYWxjb21tZXJjZWNyZWRpdGNhcmRzY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnN0cnVtZW50UGFyYW1zKCksXG4gICAgICAgICAgICAgICAgICAgICkpIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yZGVySWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogb25BcHByb3ZlIG1ldGhvZFxuICAgICAqIFdoZW4gc3VibWl0dGluZyBhIGZvcm0gd2l0aCBhIGBzdWJtaXRIb3N0ZWRGb3JtYCBtZXRob2QgaWYgdGhlcmUgaXMgbm8gZXJyb3JcbiAgICAgKiB0aGVuIG9uQXBwcm92ZSBjYWxsYmFjayBpcyB0cmlnZ2VyZWQgYW5kIGRlcGVuZHMgb24gdGhlIGZsb3dcbiAgICAgKiB3ZSB3aWxsIHJlY2VpdmUgYW4gYG9yZGVySURgIGlmIGl0J3MgYmFzaWMgcGF5aW5nIGFuZCBgdmF1bHRTZXR1cFRva2VuYCBpZiB3ZSBhcmUgcGF5aW5nXG4gICAgICogd2l0aCB2YXVsdGVkIGluc3RydW1lbnQgYW5kIHNoaXBwaW5nIGFkZHJlc3MgaXMgdW50cnVzdGVkXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGhhbmRsZUFwcHJvdmUoeyBvcmRlcklELCB2YXVsdFNldHVwVG9rZW4gfTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzT25BcHByb3ZlRGF0YSkge1xuICAgICAgICBpZiAob3JkZXJJRCkge1xuICAgICAgICAgICAgdGhpcy5yZXR1cm5lZE9yZGVySWQgPSBvcmRlcklEO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhdWx0U2V0dXBUb2tlbikge1xuICAgICAgICAgICAgdGhpcy5yZXR1cm5lZFZhdWx0ZWRUb2tlbiA9IHZhdWx0U2V0dXBUb2tlbjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUmVuZGVyaW5nIENhcmQgRmllbGRzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgcmVuZGVyRmllbGRzKGZpZWxkc09wdGlvbnM6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXApIHtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkcyA9IHRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTtcblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkQ29kZT8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMuY3Z2RmllbGQgPSBjYXJkRmllbGRzLkNWVkZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3Z2RmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmRDb2RlLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZEV4cGlyeT8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwaXJ5RmllbGQgPSBjYXJkRmllbGRzLkV4cGlyeUZpZWxkKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmV4cGlyeUZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkRXhwaXJ5LmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZE5hbWU/LmNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWVGaWVsZCA9IGNhcmRGaWVsZHMuTmFtZUZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubmFtZUZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkTmFtZS5jb250YWluZXJJZH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZHNPcHRpb25zLmNhcmROdW1iZXI/LmNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aGlzLm51bWJlckZpZWxkID0gY2FyZEZpZWxkcy5OdW1iZXJGaWVsZCh7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm51bWJlckZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkTnVtYmVyLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyByZW5kZXJWYXVsdGVkRmllbGRzKGZpZWxkc09wdGlvbnM6IEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXApIHtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkcyA9IHRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTtcblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkQ29kZVZlcmlmaWNhdGlvbj8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMuY3Z2RmllbGQgPSBjYXJkRmllbGRzLkNWVkZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3Z2RmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmRDb2RlVmVyaWZpY2F0aW9uLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZEV4cGlyeVZlcmlmaWNhdGlvbj8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwaXJ5RmllbGQgPSBjYXJkRmllbGRzLkV4cGlyeUZpZWxkKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmV4cGlyeUZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkRXhwaXJ5VmVyaWZpY2F0aW9uLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZE51bWJlclZlcmlmaWNhdGlvbj8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMubnVtYmVyRmllbGQgPSBjYXJkRmllbGRzLk51bWJlckZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubnVtYmVyRmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmROdW1iZXJWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEluc3RydW1lbnQgcGFyYW1zIG1ldGhvZFxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRJbnN0cnVtZW50UGFyYW1zKCk6IEhvc3RlZEluc3RydW1lbnQgfCBWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgICAgIGlmICghdGhpcy5leGVjdXRpb25QYXltZW50RGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzSG9zdGVkSW5zdHJ1bWVudExpa2UodGhpcy5leGVjdXRpb25QYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgfSA9XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRpb25QYXltZW50RGF0YTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1ZhdWx0ZWRJbnN0cnVtZW50KHRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCB7IGluc3RydW1lbnRJZCB9ID0gdGhpcy5leGVjdXRpb25QYXltZW50RGF0YTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQoe1xuICAgICAgICBlbWl0dGVkQnksXG4gICAgfTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUpOlxuICAgICAgICB8IEhvc3RlZEZpZWxkQmx1ckV2ZW50RGF0YVxuICAgICAgICB8IEhvc3RlZEZpZWxkRW50ZXJFdmVudERhdGFcbiAgICAgICAgfCBIb3N0ZWRGaWVsZEZvY3VzRXZlbnREYXRhIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkVHlwZTogdGhpcy5tYXBGaWVsZFR5cGUoZW1pdHRlZEJ5KSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEZvcm0gc3VibWl0IG1ldGhvZFxuICAgICAqIFRyaWdnZXJzIGEgZm9ybSBzdWJtaXRcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgYXN5bmMgc3VibWl0SG9zdGVkRm9ybSgpIHtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkcyA9IHRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBzdWJtaXRDb25maWcgPSB7XG4gICAgICAgICAgICBiaWxsaW5nQWRkcmVzczoge1xuICAgICAgICAgICAgICAgIGNvbXBhbnk6IGJpbGxpbmdBZGRyZXNzLmNvbXBhbnksXG4gICAgICAgICAgICAgICAgYWRkcmVzc0xpbmUxOiBiaWxsaW5nQWRkcmVzcy5hZGRyZXNzMSxcbiAgICAgICAgICAgICAgICBhZGRyZXNzTGluZTI6IGJpbGxpbmdBZGRyZXNzLmFkZHJlc3MyLFxuICAgICAgICAgICAgICAgIGFkbWluQXJlYTE6IGJpbGxpbmdBZGRyZXNzLnN0YXRlT3JQcm92aW5jZUNvZGUsXG4gICAgICAgICAgICAgICAgYWRtaW5BcmVhMjogYmlsbGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiBiaWxsaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlOiBiaWxsaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2FyZEZpZWxkcy5zdWJtaXQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2FyZEZpZWxkcy5zdWJtaXQoc3VibWl0Q29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcihcbiAgICAgICAgICAgICAgICAnRmFpbGVkIGF1dGhlbnRpY2F0aW9uLiBQbGVhc2UgdHJ5IHRvIGF1dGhvcml6ZSBhZ2Fpbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVmFsaWRhdGlvbiBhbmQgZXJyb3JzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHZhbGlkYXRlSG9zdGVkRm9ybU9yVGhyb3coKSB7XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHMgPSB0aGlzLmdldENhcmRGaWVsZHNPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNTdGF0ZSA9IGF3YWl0IGNhcmRGaWVsZHMuZ2V0U3RhdGUoKS50aGVuKChkYXRhKSA9PiBkYXRhKTtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbkRhdGEgPSB0aGlzLmdldFZhbGlkaXR5RGF0YShjYXJkRmllbGRzU3RhdGUpO1xuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uRGF0YS5pc1ZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhvc3RlZEZvcm1PcHRpb25zPy5vblZhbGlkYXRlPy4odmFsaWRhdGlvbkRhdGEpO1xuXG4gICAgICAgIHRocm93IG5ldyBQYXltZW50SW52YWxpZEZvcm1FcnJvcih0aGlzLm1hcFZhbGlkYXRpb25FcnJvcnModmFsaWRhdGlvbkRhdGEuZXJyb3JzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRWYWxpZGl0eURhdGEoe1xuICAgICAgICBmaWVsZHMsXG4gICAgfTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUpOiBIb3N0ZWRGaWVsZFZhbGlkYXRlRXZlbnREYXRhIHtcbiAgICAgICAgY29uc3QgdXBkYXRlZEZpZWxkcyA9IHsgLi4uZmllbGRzIH07XG5cbiAgICAgICAgZGVsZXRlIHVwZGF0ZWRGaWVsZHMuY2FyZE5hbWVGaWVsZDtcblxuICAgICAgICBjb25zdCBmaWVsZHNLZXlzID0gT2JqZWN0LmtleXModXBkYXRlZEZpZWxkcykgYXMgQXJyYXk8XG4gICAgICAgICAgICBrZXlvZiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZVsnZmllbGRzJ11cbiAgICAgICAgPjtcblxuICAgICAgICBjb25zdCBpc1ZhbGlkID0gZmllbGRzS2V5cy5ldmVyeSgoa2V5KSA9PiB1cGRhdGVkRmllbGRzW2tleV0/LmlzVmFsaWQpO1xuXG4gICAgICAgIGNvbnN0IGVycm9ycyA9IGZpZWxkc0tleXMucmVkdWNlKChmaWVsZHNFcnJvcnMsIGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmllbGRUeXBlID0gdGhpcy5tYXBGaWVsZFR5cGUoa2V5KTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5maWVsZHNFcnJvcnMsXG4gICAgICAgICAgICAgICAgW2ZpZWxkVHlwZV06IHVwZGF0ZWRGaWVsZHNba2V5XT8uaXNWYWxpZFxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IFt0aGlzLmdldEludmFsaWRFcnJvckJ5RmllbGRUeXBlKGZpZWxkVHlwZSldLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSwge30pO1xuXG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQsIGVycm9ycyB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SW52YWxpZEVycm9yQnlGaWVsZFR5cGUoZmllbGRUeXBlOiBzdHJpbmcpOiBIb3N0ZWRJbnB1dFZhbGlkYXRlRXJyb3JEYXRhIHtcbiAgICAgICAgc3dpdGNoIChmaWVsZFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmRDb2RlOlxuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGVWZXJpZmljYXRpb246XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBjYXJkIGNvZGUnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW52YWxpZF9jYXJkX2NvZGUnLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXI6XG4gICAgICAgICAgICBjYXNlIEhvc3RlZEZpZWxkVHlwZS5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgY2FyZCBudW1iZXInLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW52YWxpZF9jYXJkX251bWJlcicsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeTpcbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnlWZXJpZmljYXRpb246XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBjYXJkIGV4cGlyeScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkX2NhcmRfZXhwaXJ5JyxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgZmllbGQnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW52YWxpZCcsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgbWFwVmFsaWRhdGlvbkVycm9ycyhcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yczogSG9zdGVkSW5wdXRWYWxpZGF0ZUVycm9yRGF0YU1hcCA9IHt9LFxuICAgICk6IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyB7XG4gICAgICAgIGNvbnN0IGVycm9yczogUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzID0ge307XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnNLZXlzID0gT2JqZWN0LmtleXModmFsaWRhdGlvbkVycm9ycykgYXMgQXJyYXk8XG4gICAgICAgICAgICBrZXlvZiBIb3N0ZWRJbnB1dFZhbGlkYXRlRXJyb3JEYXRhTWFwXG4gICAgICAgID47XG5cbiAgICAgICAgdmFsaWRhdGlvbkVycm9yc0tleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBlcnJvcnNba2V5XSA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHZhbGlkYXRpb25FcnJvcnNba2V5XT8uWzBdPy5tZXNzYWdlIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBrZXksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBGaWVsZHMgbWFwcGVyc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXBGaWVsZFR5cGUodHlwZTogc3RyaW5nKTogSG9zdGVkRmllbGRUeXBlIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICduYW1lJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gSG9zdGVkRmllbGRUeXBlLkNhcmROYW1lO1xuXG4gICAgICAgICAgICBjYXNlICdjYXJkTnVtYmVyRmllbGQnOlxuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0NyZWRpdENhcmRGb3JtXG4gICAgICAgICAgICAgICAgICAgID8gSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgOiBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlclZlcmlmaWNhdGlvbjtcblxuICAgICAgICAgICAgY2FzZSAnY2FyZEV4cGlyeUZpZWxkJzpcbiAgICAgICAgICAgIGNhc2UgJ2V4cGlyeSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNDcmVkaXRDYXJkRm9ybVxuICAgICAgICAgICAgICAgICAgICA/IEhvc3RlZEZpZWxkVHlwZS5DYXJkRXhwaXJ5XG4gICAgICAgICAgICAgICAgICAgIDogSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnlWZXJpZmljYXRpb247XG5cbiAgICAgICAgICAgIGNhc2UgJ2NhcmRDdnZGaWVsZCc6XG4gICAgICAgICAgICBjYXNlICdjdnYnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzQ3JlZGl0Q2FyZEZvcm1cbiAgICAgICAgICAgICAgICAgICAgPyBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGVcbiAgICAgICAgICAgICAgICAgICAgOiBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGVWZXJpZmljYXRpb247XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGZpZWxkIHR5cGUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVXRpbHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhcmRGaWVsZHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5jYXJkRmllbGRzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SW5wdXRTdHlsZXMoXG4gICAgICAgIHN0eWxlcz86IEhvc3RlZEZpZWxkU3R5bGVzTWFwLFxuICAgICk6IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzUmVuZGVyT3B0aW9uc1snc3R5bGVzJ10ge1xuICAgICAgICBjb25zdCBjb21tb25TdHlsZXMgPSB7XG4gICAgICAgICAgICAnZm9udC1zaXplJzogc3R5bGVzPy5kZWZhdWx0Py5mb250U2l6ZSB8fCAnMXJlbScsXG4gICAgICAgICAgICAnZm9udC1mYW1pbHknOlxuICAgICAgICAgICAgICAgIHN0eWxlcz8uZGVmYXVsdD8uZm9udEZhbWlseSB8fCAnTW9udHNlcnJhdCwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZicsXG4gICAgICAgICAgICAnZm9udC13ZWlnaHQnOiBzdHlsZXM/LmRlZmF1bHQ/LmZvbnRXZWlnaHQgfHwgJzQwMCcsXG4gICAgICAgICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICAgICAgICBwYWRkaW5nOiAnOXB4IDEzcHgnLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRTdHlsZXMgPSB7IC4uLmNvbW1vblN0eWxlcywgY29sb3I6ICcjMzMzMzMzJyB9O1xuICAgICAgICBjb25zdCBlcnJvclN0eWxlcyA9IHsgLi4uY29tbW9uU3R5bGVzLCBjb2xvcjogJ3JlZCcgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5wdXQ6IGRlZmF1bHRTdHlsZXMsXG4gICAgICAgICAgICAnLmludmFsaWQnOiBlcnJvclN0eWxlcyxcbiAgICAgICAgICAgICcudmFsaWQnOiBkZWZhdWx0U3R5bGVzLFxuICAgICAgICAgICAgJzpmb2N1cyc6IGRlZmF1bHRTdHlsZXMsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdHlsaXplSW5wdXRDb250YWluZXJzKFxuICAgICAgICBmaWVsZHM6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAgfCBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwLFxuICAgICk6IHZvaWQge1xuICAgICAgICBPYmplY3QudmFsdWVzKGZpZWxkcyB8fCB7fSkuZm9yRWFjaCgoaWQ6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtpZD8uY29udGFpbmVySWQgfHwgJyd9YCk7XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzBweCc7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5ib3hTaGFkb3cgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMHB4JztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSAnLTVweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFzVW5kZWZpbmVkVmFsdWVzKCkge1xuICAgICAgICBpZiAodGhpcy5ob3N0ZWRGb3JtT3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5ob3N0ZWRGb3JtT3B0aW9ucy5maWVsZHMpLnNvbWUoXG4gICAgICAgICAgICAgICAgKHZhbHVlKSA9PiB2YWx1ZSA9PT0gdW5kZWZpbmVkLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogSW5wdXQgZXZlbnRzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgb25DaGFuZ2VIYW5kbGVyKFxuICAgICAgICBmb3JtT3B0aW9uczogSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgICAgIGV2ZW50OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgZm9ybU9wdGlvbnM/Lm9uVmFsaWRhdGU/Lih0aGlzLmdldFZhbGlkaXR5RGF0YShldmVudCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25Gb2N1c0hhbmRsZXIoXG4gICAgICAgIGZvcm1PcHRpb25zOiBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICAgICAgZXZlbnQ6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N0YXRlLFxuICAgICk6IHZvaWQge1xuICAgICAgICBmb3JtT3B0aW9ucz8ub25Gb2N1cz8uKHRoaXMuZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQoZXZlbnQpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uQmx1ckhhbmRsZXIoXG4gICAgICAgIGZvcm1PcHRpb25zOiBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICAgICAgZXZlbnQ6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N0YXRlLFxuICAgICk6IHZvaWQge1xuICAgICAgICBmb3JtT3B0aW9ucz8ub25CbHVyPy4odGhpcy5nZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZChldmVudCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25JbnB1dFN1Ym1pdFJlcXVlc3QoXG4gICAgICAgIGZvcm1PcHRpb25zOiBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICAgICAgZXZlbnQ6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N0YXRlLFxuICAgICk6IHZvaWQge1xuICAgICAgICBmb3JtT3B0aW9ucz8ub25FbnRlcj8uKHRoaXMuZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQoZXZlbnQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheVBhbCBDb21tZXJjZSBBY2NlbGVyYXRlZCBjaGVja291dCByZWxhdGVkIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzIHBhcnQgd2hlbiBQUENQIEFYTyBBL0IgdGVzdGluZyB3aWxsIGJlIGZpbmlzaGVkXG4gICAgcHJpdmF0ZSBzaG91bGRJbml0aWFsaXplUGF5UGFsRmFzdGxhbmUobWV0aG9kSWQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gc3RhdGUuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoKTtcbiAgICAgICAgY29uc3QgcGF5cGFsQ29tbWVyY2VQYXltZW50UHJvdmlkZXJDdXN0b21lciA9IGlzUGF5UGFsQ29tbWVyY2VBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIoXG4gICAgICAgICAgICBwYXltZW50UHJvdmlkZXJDdXN0b21lcixcbiAgICAgICAgKVxuICAgICAgICAgICAgPyBwYXltZW50UHJvdmlkZXJDdXN0b21lclxuICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZD8uaW5pdGlhbGl6YXRpb25EYXRhPy5pc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkICYmXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kPy5pbml0aWFsaXphdGlvbkRhdGE/LmlzUGF5UGFsQ29tbWVyY2VBbmFseXRpY3NWMkVuYWJsZWQgJiZcbiAgICAgICAgICAgICFwYXlwYWxDb21tZXJjZVBheW1lbnRQcm92aWRlckN1c3RvbWVyPy5hdXRoZW50aWNhdGlvblN0YXRlXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgcGFydCB3aGVuIFBQQ1AgQVhPIEEvQiB0ZXN0aW5nIHdpbGwgYmUgZmluaXNoZWRcbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVQYXlQYWxGYXN0bGFuZU9yVGhyb3cobWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgICAgIGNvbnN0IHsgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YT8uY29ubmVjdENsaWVudFRva2VuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwYXlQYWxGYXN0bGFuZVNkayA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsRmFzdGxhbmVTZGsoXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICAgICAgY2FydC5pZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShcbiAgICAgICAgICAgICAgICBwYXlQYWxGYXN0bGFuZVNkayxcbiAgICAgICAgICAgICAgICAhIWluaXRpYWxpemF0aW9uRGF0YT8uaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKF86IHVua25vd24pIHtcbiAgICAgICAgICAgIC8vIFdlIHNob3VsZCBhdm9pZCB0aHJvd2luZyBhbnkgZXJyb3IgZnJvbSB0aGlzIGZsb3cgdG8gZG8gbm8gYnJha2UgZGVmYXVsdCBmbG93XG4gICAgICAgICAgICAvLyBUaGlzIGZsb3cgaXMgb3B0aW9uYWxcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4gICAgUGF5UGFsQ29ubmVjdEN1c3RvbWVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQYXlQYWxDb21tZXJjZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lcihcbiAgICBjdXN0b21lcj86IFBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuKTogY3VzdG9tZXIgaXMgUGF5UGFsQ29ubmVjdEN1c3RvbWVyIHtcbiAgICBpZiAoIWN1c3RvbWVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICAnYXV0aGVudGljYXRpb25TdGF0ZScgaW4gY3VzdG9tZXIgfHwgJ2FkZHJlc3NlcycgaW4gY3VzdG9tZXIgfHwgJ2luc3RydW1lbnRzJyBpbiBjdXN0b21lclxuICAgICk7XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLFxuICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlU2RrLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY2FyZHMtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheXBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VTZGsoKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzKCksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheXBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkcycgfSxcbl0pO1xuIiwiaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgVGltZW91dEVycm9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQmlydGhEYXRlLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbE9yZGVyU3RhdHVzLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQge1xuICAgIFBheXBhbENvbW1lcmNlUmF0ZVBheSxcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VSYXRlUGF5UGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1yYXRlcGF5LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmNvbnN0IFBPTExJTkdfSU5URVJWQUwgPSAzMDAwO1xuY29uc3QgTUFYX1BPTExJTkdfVElNRSA9IDMwMDAwMDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5cGFsQ29tbWVyY2VSYXRlcGF5UGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGd1aWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwYXlwYWxjb21tZXJjZXJhdGVwYXk/OiBQYXlwYWxDb21tZXJjZVJhdGVQYXk7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcG9sbGluZ1RpbWVyID0gMDtcbiAgICBwcml2YXRlIHN0b3BQb2xsaW5nID0gbm9vcDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgICAgIHByaXZhdGUgcG9sbGluZ0ludGVydmFsOiBudW1iZXIgPSBQT0xMSU5HX0lOVEVSVkFMLFxuICAgICAgICBwcml2YXRlIG1heFBvbGxpbmdJbnRlcnZhbFRpbWU6IG51bWJlciA9IE1BWF9QT0xMSU5HX1RJTUUsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlUmF0ZVBheVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBnYXRld2F5SWQsIG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZXJhdGVwYXkgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFnYXRld2F5SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5nYXRld2F5SWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlcmF0ZXBheSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlcmF0ZXBheVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbGVnYWxUZXh0Q29udGFpbmVyLCBjb250YWluZXIsIGxvYWRpbmdDb250YWluZXJJZCB9ID0gcGF5cGFsY29tbWVyY2VyYXRlcGF5O1xuXG4gICAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFsZWdhbFRleHRDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5sZWdhbFRleHRDb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWxvYWRpbmdDb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmxvYWRpbmdDb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IGxvYWRpbmdDb250YWluZXJJZDtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHsgbWVyY2hhbnRJZCB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgaWYgKCFtZXJjaGFudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBtZXJjaGFudElkIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGF5cGFsY29tbWVyY2VyYXRlcGF5ID0gcGF5cGFsY29tbWVyY2VyYXRlcGF5O1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVGcmF1ZE5ldFNjcmlwdChtZXJjaGFudElkLCBtZXRob2RJZCwgZ2F0ZXdheUlkKTtcblxuICAgICAgICB0aGlzLmxvYWRGcmF1ZG5ldENvbmZpZygpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyTGVnYWxUZXh0KGxlZ2FsVGV4dENvbnRhaW5lciwgY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcblxuICAgICAgICBjb25zdCB7IGdldEZpZWxkc1ZhbHVlcyB9ID0gdGhpcy5wYXlwYWxjb21tZXJjZXJhdGVwYXkgfHwge307XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZ2V0RmllbGRzVmFsdWVzIHx8IHR5cGVvZiBnZXRGaWVsZHNWYWx1ZXMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5nZXRGaWVsZHNWYWx1ZXNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG9yZGVySWQgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgICAgICdwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kc2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICB7IG1ldGFkYXRhSWQ6IHRoaXMuZ3VpZCB9LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgeyByYXRlcGF5QmlydGhEYXRlLCByYXRlcGF5UGhvbmVOdW1iZXIsIHJhdGVwYXlQaG9uZUNvdW50cnlDb2RlIH0gPVxuICAgICAgICAgICAgICAgIGdldEZpZWxkc1ZhbHVlcygpO1xuXG4gICAgICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGRldmljZV9pbmZvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RfaWQ6IHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIHJhdGVfcGF5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiaXJ0aF9kYXRlOiB0aGlzLm5vcm1hbGl6ZURhdGUocmF0ZXBheUJpcnRoRGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGlvbmFsX251bWJlcjogcmF0ZXBheVBob25lTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnlfY29kZTogcmF0ZXBheVBob25lQ291bnRyeUNvZGUuc3BsaXQoJysnKVsxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZDogcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oXG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudC5nYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIHJlamVjdCkgPT4gcmVqZWN0KCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBsZWdhbFRleHRDb250YWluZXIgfSA9IHRoaXMucGF5cGFsY29tbWVyY2VyYXRlcGF5IHx8IHt9O1xuICAgICAgICBjb25zdCBmcmF1ZE5ldFNjcmlwdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWlkPVwiZnJhdWRuZXRTY3JpcHRcIl0nKVswXTtcbiAgICAgICAgY29uc3QgZnJhdWROZXRDb25maWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pZD1cImZyYXVkbmV0Q29uZmlnXCJdJylbMF07XG5cbiAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG5cbiAgICAgICAgZnJhdWROZXRTY3JpcHQucmVtb3ZlKCk7XG4gICAgICAgIGZyYXVkTmV0Q29uZmlnLnJlbW92ZSgpO1xuXG4gICAgICAgIGlmIChsZWdhbFRleHRDb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZWdhbFRleHRDb250YWluZXIpO1xuXG4gICAgICAgICAgICBsZWdhbFRleHRDb250YWluZXJFbGVtZW50Py5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG5vcm1hbGl6ZURhdGUoZGF0ZTogQmlydGhEYXRlKSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSB0aGlzLmZvcm1hdERhdGUoZGF0ZS5nZXREYXRlKCkpO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRNb250aCA9IHRoaXMuZm9ybWF0RGF0ZShkYXRlLmdldE1vbnRoKCkgKyAxKTtcblxuICAgICAgICByZXR1cm4gYCR7ZGF0ZS5nZXRGdWxsWWVhcigpfS0ke2Zvcm1hdHRlZE1vbnRofS0ke2Zvcm1hdHRlZERhdGV9YDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke2RhdGUgPCAxMCA/IDAgOiAnJ30ke2RhdGV9YDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckxlZ2FsVGV4dChsZWdhbFRleHRDb250YWluZXJFbGVtZW50SWQ6IHN0cmluZywgY29udGFpbmVyOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgbGVnYWxUZXh0Q29udGFpbmVySWQgPSBsZWdhbFRleHRDb250YWluZXJFbGVtZW50SWQ7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lcklkID0gY29udGFpbmVyLnNwbGl0KCcjJylbMV07XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbkNvbnRhaW5lcklkKTtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyUGFyZW50ID0gYnV0dG9uQ29udGFpbmVyPy5wYXJlbnROb2RlO1xuICAgICAgICBjb25zdCBsZWdhbFRleHRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBsZWdhbFRleHRDb250YWluZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzIwcHgnO1xuICAgICAgICBsZWdhbFRleHRDb250YWluZXIuc2V0QXR0cmlidXRlKCdpZCcsIGxlZ2FsVGV4dENvbnRhaW5lcklkKTtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyUGFyZW50Py5wcmVwZW5kKGxlZ2FsVGV4dENvbnRhaW5lcik7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHJhdGVQYXlCdXR0b24gPSBwYXlwYWxTZGsuTGVnYWwoe1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkxlZ2FsLkZVTkRJTkcuUEFZX1VQT05fSU5WT0lDRSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZWdhbFRleHRDb250YWluZXJJZCk7XG5cbiAgICAgICAgaWYgKGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJhdGVQYXlCdXR0b24ucmVuZGVyKGAjJHtsZWdhbFRleHRDb250YWluZXJJZH1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwibGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudFwiIGFyZ3VtZW50IGlzIG5vdCBmb3VuZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBvbkVycm9yIH0gPSB0aGlzLnBheXBhbGNvbW1lcmNlcmF0ZXBheSB8fCB7fTtcblxuICAgICAgICB0aGlzLnJlc2V0UG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlRnJhdWROZXRTY3JpcHQobWVyY2hhbnRJZDogc3RyaW5nLCBtZXRob2RJZDogc3RyaW5nLCBnYXRld2F5SWQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQsIGdhdGV3YXlJZCk7XG4gICAgICAgIGNvbnN0IHsgdGVzdE1vZGUgfSA9IHBheW1lbnRNZXRob2QuY29uZmlnO1xuICAgICAgICBjb25zdCBzY3JpcHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cbiAgICAgICAgc2NyaXB0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgICBzY3JpcHRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZm5jbHMnLCAnZm5wYXJhbXMtZGVkZTdjYzUtMTVmZC00Yzc1LWE5ZjQtMzZjNDMwZWUzYTk5Jyk7XG4gICAgICAgIHNjcmlwdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgJ2ZyYXVkbmV0U2NyaXB0Jyk7XG4gICAgICAgIHRoaXMuZ3VpZCA9IHRoaXMuZ2VuZXJhdGVHVUlEKCk7XG5cbiAgICAgICAgY29uc3QgZnJhdWROZXRDb25maWcgPSB7XG4gICAgICAgICAgICBmOiB0aGlzLmd1aWQsXG4gICAgICAgICAgICBzOiBgJHttZXJjaGFudElkfV9jaGVja291dC1wYWdlYCxcbiAgICAgICAgICAgIHNhbmRib3g6IHRlc3RNb2RlLFxuICAgICAgICB9O1xuXG4gICAgICAgIHNjcmlwdEVsZW1lbnQuaW5uZXJIVE1MID0gSlNPTi5zdHJpbmdpZnkoZnJhdWROZXRDb25maWcpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2VuZXJhdGVHVUlEKCkge1xuICAgICAgICBsZXQgZ3VpZCA9ICcnO1xuICAgICAgICBjb25zdCBjaGFyYWN0ZXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JztcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMyOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVycy5sZW5ndGgpO1xuXG4gICAgICAgICAgICBndWlkICs9IGNoYXJhY3RlcnNbcmFuZG9tSW5kZXhdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGd1aWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsb2FkRnJhdWRuZXRDb25maWcoKSB7XG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG4gICAgICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCAnZnJhdWRuZXRDb25maWcnKTtcbiAgICAgICAgc2NyaXB0LnNyYyA9ICdodHRwczovL2MucGF5cGFsLmNvbS9kYS9yL2ZiLmpzJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcmVpbml0aWFsaXplU3RyYXRlZ3koXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZVJhdGVQYXlQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVpbml0aWFsaXplKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZShvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBvbGxpbmcgbWVjaGFuaXNtXG4gICAgICpcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcmVzb2x2ZVByb21pc2U6ICgpID0+IHZvaWQsXG4gICAgICAgIHJlamVjdFByb21pc2U6ICgpID0+IHZvaWQsXG4gICAgICAgIGdhdGV3YXlJZD86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQocmVzb2x2ZSwgdGhpcy5wb2xsaW5nSW50ZXJ2YWwpO1xuXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucG9sbGluZ1RpbWVyICs9IHRoaXMucG9sbGluZ0ludGVydmFsO1xuXG4gICAgICAgICAgICBjb25zdCBvcmRlclN0YXR1cyA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0T3JkZXJTdGF0dXMoXG4gICAgICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlTWV0YWRhdGE6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzT3JkZXJBcHByb3ZlZCA9IG9yZGVyU3RhdHVzID09PSBQYXlQYWxPcmRlclN0YXR1cy5Qb2xsaW5nU3RvcDtcbiAgICAgICAgICAgIGNvbnN0IGlzUG9sbGluZ0Vycm9yID0gb3JkZXJTdGF0dXMgPT09IFBheVBhbE9yZGVyU3RhdHVzLlBvbGxpbmdFcnJvcjtcblxuICAgICAgICAgICAgaWYgKGlzT3JkZXJBcHByb3ZlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc1BvbGxpbmdFcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3RQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaXNPcmRlckFwcHJvdmVkICYmIHRoaXMucG9sbGluZ1RpbWVyIDwgdGhpcy5tYXhQb2xsaW5nSW50ZXJ2YWxUaW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0UHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVpbml0aWFsaXplU3RyYXRlZ3koe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICBwYXlwYWxjb21tZXJjZXJhdGVwYXk6IHRoaXMucGF5cGFsY29tbWVyY2VyYXRlcGF5LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IFRpbWVvdXRFcnJvcigpKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmVqZWN0UHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XG4gICAgICAgIHRoaXMucG9sbGluZ1RpbWVyID0gMDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc2V0UG9sbGluZ01lY2hhbmlzbSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBMb2FkaW5nIEluZGljYXRvciBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgdG9nZ2xlTG9hZGluZ0luZGljYXRvcihpc0xvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGlzTG9hZGluZyAmJiB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHsgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTIH0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWNvbnN0YW50cyc7XG5cbmltcG9ydCBQYXlwYWxDb21tZXJjZVJhdGVwYXlQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtcmF0ZXBheS1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5cGFsQ29tbWVyY2VSYXRlcGF5UGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheXBhbENvbW1lcmNlUmF0ZXBheVBheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlwYWxDb21tZXJjZVJhdGVwYXlQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBuZXcgTG9hZGluZ0luZGljYXRvcih7XG4gICAgICAgICAgICBjb250YWluZXJTdHlsZXM6IHsgLi4uTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTLCBwb3NpdGlvbjogJ2ZpeGVkJyB9LFxuICAgICAgICB9KSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5cGFsQ29tbWVyY2VSYXRlcGF5UGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBnYXRld2F5OiAncGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMnLCBpZDogJ3JhdGVwYXknIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4gICAgUGF5UGFsQ29ubmVjdEN1c3RvbWVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuLy8gVE9ETzogdXBkYXRlIFBheVBhbENvbm5lY3RDdXN0b21lciB3aXRoIFBheVBhbEZhc3RsYW5lQ3VzdG9tZXJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzUGF5UGFsRmFzdGxhbmVDdXN0b21lcihcbiAgICBjdXN0b21lcj86IFBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuKTogY3VzdG9tZXIgaXMgUGF5UGFsQ29ubmVjdEN1c3RvbWVyIHtcbiAgICBpZiAoIWN1c3RvbWVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICAnYXV0aGVudGljYXRpb25TdGF0ZScgaW4gY3VzdG9tZXIgfHwgJ2FkZHJlc3NlcycgaW4gY3VzdG9tZXIgfHwgJ2luc3RydW1lbnRzJyBpbiBjdXN0b21lclxuICAgICk7XG59XG4iLCJpbXBvcnQge1xuICAgIENhcmRJbnN0cnVtZW50LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UsXG4gICAgaXNWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBnZXRGYXN0bGFuZVN0eWxlcyxcbiAgICBpc1BheVBhbEZhc3RsYW5lQ3VzdG9tZXIsXG4gICAgaXNQYXlwYWxGYXN0bGFuZVJlcXVlc3RFcnJvcixcbiAgICBQYXlQYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsQ29tbWVyY2VTZGssXG4gICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLFxuICAgIFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE1ldGhvZHMsXG4gICAgUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyxcbiAgICBQYXlQYWxGYXN0bGFuZVBheW1lbnRGb3JtYXR0ZWRQYXlsb2FkLFxuICAgIFBheVBhbEZhc3RsYW5lU2RrLFxuICAgIFREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtY29tbWVyY2UtdXRpbHMnO1xuaW1wb3J0IHsgaXNFeHBlcmltZW50RW5hYmxlZCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdXRpbGl0eSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXJlcXVlc3Qtc2VuZGVyJztcbmltcG9ydCB7IExpYWJpbGl0eVNoaWZ0RW51bSB9IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUZhc3RsYW5lUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5cGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBwYXlwYWxDb21wb25lbnRNZXRob2RzPzogUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50TWV0aG9kcztcbiAgICBwcml2YXRlIHBheXBhbEZhc3RsYW5lU2RrPzogUGF5UGFsRmFzdGxhbmVTZGs7XG4gICAgcHJpdmF0ZSB0aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcGF5cGFsY29tbWVyY2VmYXN0bGFuZT86IFBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgbWV0aG9kSWQ/OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlUmVxdWVzdFNlbmRlcjogUGF5UGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlU2RrOiBQYXlQYWxDb21tZXJjZVNkayxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHM6IFBheVBhbENvbW1lcmNlRmFzdGxhbmVVdGlscyxcbiAgICApIHt9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIERlZmF1bHQgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5cGFsY29tbWVyY2VmYXN0bGFuZSB9ID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5tZXRob2RJZCA9IG1ldGhvZElkO1xuXG4gICAgICAgIHRoaXMucGF5cGFsY29tbWVyY2VmYXN0bGFuZSA9IHBheXBhbGNvbW1lcmNlZmFzdGxhbmU7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZWZhc3RsYW5lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VmYXN0bGFuZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkluaXQgfHwgdHlwZW9mIHBheXBhbGNvbW1lcmNlZmFzdGxhbmUub25Jbml0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkluaXRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhcGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkNoYW5nZSB8fFxuICAgICAgICAgICAgdHlwZW9mIHBheXBhbGNvbW1lcmNlZmFzdGxhbmUub25DaGFuZ2UgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkNoYW5nZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLCBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICB0aGlzLnRocmVlRFNWZXJpZmljYXRpb25NZXRob2QgPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LnRocmVlRFNWZXJpZmljYXRpb25NZXRob2Q7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxGYXN0bGFuZVNkayA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsRmFzdGxhbmVTZGsoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgY2FydC5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgY2FydC5pZCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZVN0eWxpbmcgPSBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWRcbiAgICAgICAgICAgID8gcGF5bWVudE1ldGhvZD8uaW5pdGlhbGl6YXRpb25EYXRhPy5mYXN0bGFuZVN0eWxlc1xuICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICBjb25zdCBmYXN0bGFuZVN0eWxlcyA9IGdldEZhc3RsYW5lU3R5bGVzKFxuICAgICAgICAgICAgcGF5cGFsRmFzdGxhbmVTdHlsaW5nLFxuICAgICAgICAgICAgcGF5cGFsY29tbWVyY2VmYXN0bGFuZT8uc3R5bGVzLFxuICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShcbiAgICAgICAgICAgIHRoaXMucGF5cGFsRmFzdGxhbmVTZGssXG4gICAgICAgICAgICAhIWlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsXG4gICAgICAgICAgICBmYXN0bGFuZVN0eWxlcyxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodGhpcy5zaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3coKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5ydW5QYXlQYWxBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KG1ldGhvZElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBheVBhbFBheW1lbnRDb21wb25lbnQoKTtcblxuICAgICAgICBwYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uSW5pdCgoY29udGFpbmVyOiBzdHJpbmcpID0+XG4gICAgICAgICAgICB0aGlzLnJlbmRlclBheVBhbFBheW1lbnRDb21wb25lbnQoY29udGFpbmVyKSxcbiAgICAgICAgKTtcbiAgICAgICAgcGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkNoYW5nZSgoKSA9PiB0aGlzLmhhbmRsZVBheVBhbFN0b3JlZEluc3RydW1lbnRDaGFuZ2UobWV0aG9kSWQpKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKG9yZGVyUmVxdWVzdDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBvcmRlclJlcXVlc3Q7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgcGF5bWVudERhdGEsIG1ldGhvZElkIH0gPSBwYXltZW50O1xuXG4gICAgICAgIGNvbnN0IGlzVmF1bHRlZEZsb3cgPSBwYXltZW50RGF0YSAmJiBpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnREYXRhKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5bWVudFBheWxvYWQgPSBpc1ZhdWx0ZWRGbG93XG4gICAgICAgICAgICAgICAgPyBhd2FpdCB0aGlzLnByZXBhcmVWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnRQYXlsb2FkKG1ldGhvZElkLCBwYXltZW50RGF0YSlcbiAgICAgICAgICAgICAgICA6IGF3YWl0IHRoaXMucHJlcGFyZVBheW1lbnRQYXlsb2FkKG1ldGhvZElkLCBwYXltZW50RGF0YSk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50PFBheVBhbEZhc3RsYW5lUGF5bWVudEZvcm1hdHRlZFBheWxvYWQ+KFxuICAgICAgICAgICAgICAgIHBheW1lbnRQYXlsb2FkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMucmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGlzUGF5cGFsRmFzdGxhbmVSZXF1ZXN0RXJyb3IoZXJyb3IpICYmXG4gICAgICAgICAgICAgICAgZXJyb3IucmVzcG9uc2UuYm9keS5uYW1lID09PSAnSU5WQUxJRF9SRVFVRVNUJ1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW52YWxpZFJlcXVlc3RFcnJvciA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25LZXk6ICdwYXltZW50LmVycm9ycy5pbnZhbGlkX3JlcXVlc3RfZXJyb3InLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGludmFsaWRSZXF1ZXN0RXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgIT09ICdGYXN0bGFuZUVycm9yJykge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEF1dGhlbnRpY2F0aW9uIGZsb3cgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBzaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3coKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBjdXN0b21lciA9IHN0YXRlLmdldEN1c3RvbWVyT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwYXltZW50UHJvdmlkZXJDdXN0b21lciA9IHN0YXRlLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCk7XG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lQ3VzdG9tZXIgPSBpc1BheVBhbEZhc3RsYW5lQ3VzdG9tZXIocGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIpXG4gICAgICAgICAgICA/IHBheW1lbnRQcm92aWRlckN1c3RvbWVyXG4gICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lU2Vzc2lvbklkID0gdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMuZ2V0U3RvcmFnZVNlc3Npb25JZCgpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFjdXN0b21lci5pc0d1ZXN0IHx8XG4gICAgICAgICAgICBwYXlwYWxGYXN0bGFuZUN1c3RvbWVyPy5hdXRoZW50aWNhdGlvblN0YXRlID09PVxuICAgICAgICAgICAgICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZS5DQU5DRUxFRFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhcGF5cGFsRmFzdGxhbmVDdXN0b21lcj8uYXV0aGVudGljYXRpb25TdGF0ZSAmJiBwYXlwYWxGYXN0bGFuZVNlc3Npb25JZCA9PT0gY2FydC5pZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBzdGF0ZS5nZXRDdXN0b21lcigpO1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzcygpO1xuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXJFbWFpbCA9IGN1c3RvbWVyPy5lbWFpbCB8fCBiaWxsaW5nQWRkcmVzcz8uZW1haWwgfHwgJyc7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgY3VzdG9tZXJDb250ZXh0SWQgfSA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMubG9va3VwQ3VzdG9tZXJPclRocm93KGN1c3RvbWVyRW1haWwpO1xuXG4gICAgICAgICAgICBjb25zdCBhdXRoZW50aWNhdGlvblJlc3VsdCA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMudHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyQ29udGV4dElkLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgYXV0aGVudGljYXRpb25TdGF0ZSwgYWRkcmVzc2VzLCBpbnN0cnVtZW50cyB9ID1cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5tYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhKFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHtcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlLFxuICAgICAgICAgICAgICAgIGFkZHJlc3NlcyxcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50cyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBpc0F1dGhlbnRpY2F0aW9uRmxvd0NhbmNlbGVkID1cbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdC5hdXRoZW50aWNhdGlvblN0YXRlID09PVxuICAgICAgICAgICAgICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZS5DQU5DRUxFRDtcblxuICAgICAgICAgICAgaWYgKGlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5yZW1vdmVTdG9yYWdlU2Vzc2lvbklkKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLnVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQoY2FydC5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBJbmZvOiBEbyBub3QgdGhyb3cgYW55dGhpbmcgaGVyZSB0byBhdm9pZCBibG9ja2luZyBjdXN0b21lciBmcm9tIHBhc3NpbmcgY2hlY2tvdXQgZmxvd1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXlQYWwgRmFzdGxhbmUgQ2FyZCBDb21wb25lbnQgcmVuZGVyaW5nIG1ldGhvZFxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplUGF5UGFsUGF5bWVudENvbXBvbmVudCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgcGhvbmUgPSBiaWxsaW5nQWRkcmVzcy5waG9uZTtcbiAgICAgICAgY29uc3QgZnVsbE5hbWUgPSBgJHtiaWxsaW5nQWRkcmVzcy5maXJzdE5hbWV9ICR7YmlsbGluZ0FkZHJlc3MubGFzdE5hbWV9YC50cmltKCk7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmUgPSB0aGlzLnBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBjYXJkQ29tcG9uZW50T3B0aW9uczogUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIGNhcmRob2xkZXJOYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgIHByZWZpbGw6IGZ1bGxOYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4uKHBob25lICYmIHtcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpbGw6IHBob25lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBheXBhbENvbXBvbmVudE1ldGhvZHMgPSBhd2FpdCBwYXlwYWxGYXN0bGFuZS5GYXN0bGFuZUNhcmRDb21wb25lbnQoXG4gICAgICAgICAgICBjYXJkQ29tcG9uZW50T3B0aW9ucyxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclBheVBhbFBheW1lbnRDb21wb25lbnQoY29udGFpbmVyPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbENvbXBvbmVudE1ldGhvZHMgPSB0aGlzLmdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHJlbmRlciBjYXJkIGNvbXBvbmVudCBiZWNhdXNlIFwiY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcGF5cGFsQ29tcG9uZW50TWV0aG9kcy5yZW5kZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93KCk6IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE1ldGhvZHMge1xuICAgICAgICBpZiAoIXRoaXMucGF5cGFsQ29tcG9uZW50TWV0aG9kcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5wYXlwYWxDb21wb25lbnRNZXRob2RzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5bWVudCBQYXlsb2FkIHByZXBhcmF0aW9uIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgcHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICApOiBQcm9taXNlPFBheW1lbnQ8UGF5UGFsRmFzdGxhbmVQYXltZW50Rm9ybWF0dGVkUGF5bG9hZD4+IHtcbiAgICAgICAgY29uc3QgeyBpbnN0cnVtZW50SWQgfSA9IHBheW1lbnREYXRhO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IGlzM0RTRW5hYmxlZCA9XG4gICAgICAgICAgICB0aGlzLmlzUGF5cGFsQ29tbWVyY2VGYXN0bGFuZVRocmVlRFNBdmFpbGFibGUoKSAmJiBwYXltZW50TWV0aG9kLmNvbmZpZy5pczNkc0VuYWJsZWQ7XG5cbiAgICAgICAgaWYgKCFpczNEU0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlT3JkZXIoaW5zdHJ1bWVudElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZhc3RsYW5lVG9rZW4gPSBpczNEU0VuYWJsZWQgPyBhd2FpdCB0aGlzLmdldDNEU05vbmNlKGluc3RydW1lbnRJZCkgOiBpbnN0cnVtZW50SWQ7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIHBheXBhbF9mYXN0bGFuZV90b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IHRoaXMub3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBmYXN0bGFuZVRva2VuLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcHJlcGFyZVBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXltZW50RGF0YTogT3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ10sXG4gICAgKTogUHJvbWlzZTxQYXltZW50PFBheVBhbEZhc3RsYW5lUGF5bWVudEZvcm1hdHRlZFBheWxvYWQ+PiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBmdWxsTmFtZSA9IGAke2JpbGxpbmdBZGRyZXNzLmZpcnN0TmFtZX0gJHtiaWxsaW5nQWRkcmVzcy5sYXN0TmFtZX1gLnRyaW0oKTtcblxuICAgICAgICBjb25zdCB7IGdldFBheW1lbnRUb2tlbiB9ID0gdGhpcy5nZXRQYXlQYWxDb21wb25lbnRNZXRob2RzT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHsgaWQgfSA9IGF3YWl0IGdldFBheW1lbnRUb2tlbih7XG4gICAgICAgICAgICBuYW1lOiB7IGZ1bGxOYW1lIH0sXG4gICAgICAgICAgICBiaWxsaW5nQWRkcmVzczogdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMubWFwQmNUb1BheVBhbEFkZHJlc3MoYmlsbGluZ0FkZHJlc3MpLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBpczNEU0VuYWJsZWQgPVxuICAgICAgICAgICAgdGhpcy5pc1BheXBhbENvbW1lcmNlRmFzdGxhbmVUaHJlZURTQXZhaWxhYmxlKCkgJiYgcGF5bWVudE1ldGhvZC5jb25maWcuaXMzZHNFbmFibGVkO1xuXG4gICAgICAgIGlmICghaXMzRFNFbmFibGVkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU9yZGVyKGlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZhc3RsYW5lVG9rZW4gPSBpczNEU0VuYWJsZWQgPyBhd2FpdCB0aGlzLmdldDNEU05vbmNlKGlkKSA6IGlkO1xuXG4gICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlIH0gPVxuICAgICAgICAgICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSkgPyBwYXltZW50RGF0YSA6IHt9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgLi4ucGF5bWVudERhdGEsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIHBheXBhbF9mYXN0bGFuZV90b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IHRoaXMub3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBmYXN0bGFuZVRva2VuLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlT3JkZXIoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmlkO1xuICAgICAgICBpZiAodGhpcy5tZXRob2RJZCkge1xuICAgICAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlUmVxdWVzdFNlbmRlci5jcmVhdGVPcmRlcih0aGlzLm1ldGhvZElkLCB7XG4gICAgICAgICAgICAgICAgY2FydElkLFxuICAgICAgICAgICAgICAgIGZhc3RsYW5lVG9rZW46IGlkLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIDNEU2VjdXJlIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSBhc3luYyBnZXQzRFNOb25jZShwYXlwYWxOb25jZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gc3RhdGUuZ2V0T3JkZXJPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGNoZWNrb3V0VXJsID0gc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCkubGlua3MuY2hlY2tvdXRMaW5rO1xuXG4gICAgICAgIGNvbnN0IHRocmVlRG9tYWluU2VjdXJlQ29tcG9uZW50ID0gdGhpcy5wYXlwYWxGYXN0bGFuZVNkaz8uVGhyZWVEb21haW5TZWN1cmVDbGllbnQ7XG5cbiAgICAgICAgaWYgKCF0aHJlZURvbWFpblNlY3VyZUNvbXBvbmVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0aHJlZURvbWFpblNlY3VyZVBhcmFtZXRlcnMgPSB7XG4gICAgICAgICAgICBhbW91bnQ6IG9yZGVyLm9yZGVyQW1vdW50LnRvRml4ZWQoMiksXG4gICAgICAgICAgICBjdXJyZW5jeTogY2FydC5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgbm9uY2U6IHBheXBhbE5vbmNlLFxuICAgICAgICAgICAgdGhyZWVEU1JlcXVlc3RlZDogdGhpcy50aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kID09PSAnU0NBX0FMV0FZUycsXG4gICAgICAgICAgICB0cmFuc2FjdGlvbkNvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICBleHBlcmllbmNlX2NvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlOiAnZW4tVVMnLFxuICAgICAgICAgICAgICAgICAgICByZXR1cm5fdXJsOiBjaGVja291dFVybCxcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsX3VybDogY2hlY2tvdXRVcmwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaXNUaHJlZURvbWFpblNlY3VyZUVsaWdpYmxlID0gYXdhaXQgdGhyZWVEb21haW5TZWN1cmVDb21wb25lbnQuaXNFbGlnaWJsZShcbiAgICAgICAgICAgIHRocmVlRG9tYWluU2VjdXJlUGFyYW1ldGVycyxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoaXNUaHJlZURvbWFpblNlY3VyZUVsaWdpYmxlKSB7XG4gICAgICAgICAgICBjb25zdCB7IGxpYWJpbGl0eVNoaWZ0LCBhdXRoZW50aWNhdGlvblN0YXRlLCBub25jZSB9ID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aHJlZURvbWFpblNlY3VyZUNvbXBvbmVudC5zaG93KCk7XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBsaWFiaWxpdHlTaGlmdCA9PT0gTGlhYmlsaXR5U2hpZnRFbnVtLk5vIHx8XG4gICAgICAgICAgICAgICAgbGlhYmlsaXR5U2hpZnQgPT09IExpYWJpbGl0eVNoaWZ0RW51bS5Vbmtub3duIHx8XG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25TdGF0ZSA9PT0gVERTZWN1cmVBdXRoZW50aWNhdGlvblN0YXRlLkVycm9yZWQgfHxcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlID09PSBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUuQ2FuY2VsbGVkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYXV0aGVudGljYXRpb25TdGF0ZSA9PT0gVERTZWN1cmVBdXRoZW50aWNhdGlvblN0YXRlLlN1Y2NlZWRlZCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlT3JkZXIobm9uY2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiBub25jZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXlwYWxOb25jZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheVBhbCBGYXN0bGFuZSBpbnN0cnVtZW50IGNoYW5nZVxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVQYXlQYWxTdG9yZWRJbnN0cnVtZW50Q2hhbmdlKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICk6IFByb21pc2U8Q2FyZEluc3RydW1lbnQgfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgY29uc3QgcGF5cGFsQXhvU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUZhc3RsYW5lVXRpbHMuZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgeyBzZWxlY3Rpb25DaGFuZ2VkLCBzZWxlY3RlZENhcmQgfSA9IGF3YWl0IHBheXBhbEF4b1Nkay5wcm9maWxlLnNob3dDYXJkU2VsZWN0b3IoKTtcblxuICAgICAgICBpZiAoc2VsZWN0aW9uQ2hhbmdlZCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gc3RhdGUuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lQ3VzdG9tZXIgPSBpc1BheVBhbEZhc3RsYW5lQ3VzdG9tZXIocGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIpXG4gICAgICAgICAgICAgICAgPyBwYXltZW50UHJvdmlkZXJDdXN0b21lclxuICAgICAgICAgICAgICAgIDoge307XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5zdHJ1bWVudCA9IHRoaXMucGF5cGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLm1hcFBheVBhbFRvQmNJbnN0cnVtZW50KFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2FyZCxcbiAgICAgICAgICAgIClbMF07XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcih7XG4gICAgICAgICAgICAgICAgLi4ucGF5cGFsRmFzdGxhbmVDdXN0b21lcixcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50czogW3NlbGVjdGVkSW5zdHJ1bWVudF0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkSW5zdHJ1bWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXlQYWwgRmFzdGxhbmUgZXhwZXJpbWVudHMgaGFuZGxpbmdcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgaXNQYXlwYWxDb21tZXJjZUZhc3RsYW5lVGhyZWVEU0F2YWlsYWJsZSgpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgZmVhdHVyZXMgPSBzdGF0ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzO1xuXG4gICAgICAgIHJldHVybiBpc0V4cGVyaW1lbnRFbmFibGVkKGZlYXR1cmVzLCAnUFJPSkVDVC03MDgwLnBheXBhbGNvbW1lcmNlX2Zhc3RsYW5lX3RocmVlX2RzJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bik6IHZvaWQge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnBheXBhbGNvbW1lcmNlZmFzdGxhbmU/Lm9uRXJyb3IgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLnBheXBhbGNvbW1lcmNlZmFzdGxhbmUub25FcnJvciA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsRmFzdGxhbmVSZXF1ZXN0RXJyb3Ige1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgcmVzcG9uc2U6IHtcbiAgICAgICAgYm9keToge1xuICAgICAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzUGF5cGFsRmFzdGxhbmVSZXF1ZXN0RXJyb3IoXG4gICAgZXJyb3I6IHVua25vd24sXG4pOiBlcnJvciBpcyBQYXlwYWxGYXN0bGFuZVJlcXVlc3RFcnJvciB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBlcnJvciAhPT0gbnVsbCAmJlxuICAgICAgICAnbWVzc2FnZScgaW4gZXJyb3IgJiZcbiAgICAgICAgJ3Jlc3BvbnNlJyBpbiBlcnJvciAmJlxuICAgICAgICAnYm9keScgaW4gKGVycm9yIGFzIFBheXBhbEZhc3RsYW5lUmVxdWVzdEVycm9yKS5yZXNwb25zZSAmJlxuICAgICAgICAnbmFtZScgaW4gKGVycm9yIGFzIFBheXBhbEZhc3RsYW5lUmVxdWVzdEVycm9yKS5yZXNwb25zZS5ib2R5XG4gICAgKTtcbn1cbiIsImltcG9ydCB7IGNyZWF0ZVJlcXVlc3RTZW5kZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzLFxuICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlU2RrLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXJlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PiB7XG4gICAgY29uc3QgeyBnZXRIb3N0IH0gPSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICByZXR1cm4gbmV3IFBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIG5ldyBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIoY3JlYXRlUmVxdWVzdFNlbmRlcih7IGhvc3Q6IGdldEhvc3QoKSB9KSksXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlU2RrKCksXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlRmFzdGxhbmVVdGlscygpLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdwYXlwYWxjb21tZXJjZWFjY2VsZXJhdGVkY2hlY2tvdXQnIH0sIC8vIFBheVBhbCBGYXN0bGFuZSByZWxhdGVzIHRvICdwYXlwYWxjb21tZXJjZWFjY2VsZXJhdGVkY2hlY2tvdXQnIG1ldGhvZCBpZFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUJ1dHRvbkluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWJ1dHRvbi1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUJ1dHRvblN0cmF0ZWd5IGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZUJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheXBhbGNvbW1lcmNlLCBjb250YWluZXJJZCwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgY29uc3QgaXNCdXlOb3dGbG93ID0gQm9vbGVhbihwYXlwYWxjb21tZXJjZT8uYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0J1eU5vd0Zsb3cgJiYgIXBheXBhbGNvbW1lcmNlLmN1cnJlbmN5Q29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlLmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzQnV5Tm93RmxvdyAmJlxuICAgICAgICAgICAgdHlwZW9mIHBheXBhbGNvbW1lcmNlLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zPy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2UuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0J1eU5vd0Zsb3cpIHtcbiAgICAgICAgICAgIC8vIEluZm86IGRlZmF1bHQgY2hlY2tvdXQgc2hvdWxkIG5vdCBiZSBsb2FkZWQgZm9yIEJ1eU5vdyBmbG93LFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlcmUgaXMgbm8gY2hlY2tvdXQgc2Vzc2lvbiBhdmFpbGFibGUgZm9yIHRoYXQuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5mbzogd2UgYXJlIHVzaW5nIHByb3ZpZGVkIGN1cnJlbmN5IGNvZGUgZm9yIGJ1eSBub3cgY2FydCxcbiAgICAgICAgLy8gYmVjYXVzZSBjaGVja291dCBzZXNzaW9uIGlzIG5vdCBhdmFpbGFibGUgYmVmb3JlIGJ1eSBub3cgY2FydCBjcmVhdGlvbixcbiAgICAgICAgLy8gaGVuY2UgYXBwbGljYXRpb24gd2lsbCB0aHJvdyBhbiBlcnJvciBvbiBnZXRDYXJ0T3JUaHJvdyBtZXRob2QgY2FsbFxuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBpc0J1eU5vd0Zsb3dcbiAgICAgICAgICAgID8gcGF5cGFsY29tbWVyY2UuY3VycmVuY3lDb2RlXG4gICAgICAgICAgICA6IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQsIGN1cnJlbmN5Q29kZSwgZmFsc2UpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKGNvbnRhaW5lcklkLCBtZXRob2RJZCwgcGF5cGFsY29tbWVyY2UsIGlzQnV5Tm93Rmxvdyk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNlOiBQYXlQYWxDb21tZXJjZUJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICAgICBpc0J1eU5vd0Zsb3c/OiBib29sZWFuLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLCBzdHlsZSwgb25Db21wbGV0ZSwgb25FbGlnaWJpbGl0eUZhaWx1cmUgfSA9IHBheXBhbGNvbW1lcmNlO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsIGlzQXBwU3dpdGNoRW5hYmxlZCB9ID1cbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICAuLi4oIWlzQnV5Tm93RmxvdyAmJlxuICAgICAgICAgICAgICAgIHRoaXMuaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQpICYmIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwU3dpdGNoV2hlbkF2YWlsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdwYXlwYWxjb21tZXJjZScpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1eU5vd0Zsb3dDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgLi4uKCFpc0FwcFN3aXRjaEVuYWJsZWQgJiYge1xuICAgICAgICAgICAgICAgIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgICAgIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vbkhvc3RlZENoZWNrb3V0QXBwcm92ZShkYXRhLCBhY3Rpb25zLCBtZXRob2RJZCwgb25Db21wbGV0ZSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IHBheXBhbFNkay5GVU5ESU5HLlBBWVBBTCxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGUpLFxuICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgIC4uLihidXlOb3dJbml0aWFsaXplT3B0aW9ucyAmJiBidXlOb3dGbG93Q2FsbGJhY2tzKSxcbiAgICAgICAgICAgIC4uLihpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCAmJiBob3N0ZWRDaGVja291dENhbGxiYWNrcyksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIGlmIChwYXlwYWxCdXR0b24uaGFzUmV0dXJuZWQ/LigpICYmIHRoaXMuaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQpKSB7XG4gICAgICAgICAgICAgICAgcGF5cGFsQnV0dG9uLnJlc3VtZT8uKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZW5kZXIoYCMke2NvbnRhaW5lcklkfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG9uRWxpZ2liaWxpdHlGYWlsdXJlICYmIHR5cGVvZiBvbkVsaWdpYmlsaXR5RmFpbHVyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FbGlnaWJpbGl0eUZhaWx1cmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXJJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucz86IFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1eU5vd0NhcnQgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICAgICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dChidXlOb3dDYXJ0LmlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25Ib3N0ZWRDaGVja291dEFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIG9uQ29tcGxldGU/OiAoKSA9PiB2b2lkLFxuICAgICk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBpZiAoIWRhdGEub3JkZXJJRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyRGV0YWlscyA9IGF3YWl0IGFjdGlvbnMub3JkZXIuZ2V0KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGlmIChjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe30sIHsgcGFyYW1zOiB7IG1ldGhvZElkIH0gfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobWV0aG9kSWQsIGRhdGEub3JkZXJJRCk7XG5cbiAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICYmIHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gRklYTUU6IERvIHdlIHJlYWxseSBuZWVkIHRvIHJldHVybiB0cnVlIGhlcmU/XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGNpdHk6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNpdHksXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3Muc3RhdGUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbmZvOiB3ZSB1c2UgdGhlIHNhbWUgYWRkcmVzcyB0byBmaWxsIGJpbGxpbmcgYW5kIHNoaXBwaW5nIGFkZHJlc3NlcyB0byBoYXZlIHZhbGlkIHF1b3RhIG9uIEJFIGZvciBvcmRlciB1cGRhdGluZyBwcm9jZXNzXG4gICAgICAgICAgICAvLyBvbiB0aGlzIHN0YWdlIHdlIGRvbid0IGhhdmUgYWNjZXNzIHRvIHZhbGlkIGN1c3RvbWVyJ3MgYWRkcmVzcyBhY2NlcHQgc2hpcHBpbmcgZGF0YVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGFkZHJlc3MpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhhZGRyZXNzKTtcblxuICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdygpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KFxuICAgICAgICAgICAgZGF0YS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5UGFsIEFwcFN3aXRjaCBlbmFibGluZyBoYW5kbGluZ1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZChtZXRob2RJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICByZXR1cm4gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LmlzQXBwU3dpdGNoRW5hYmxlZCB8fCBmYWxzZTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VCdXR0b25TdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1idXR0b24tc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUJ1dHRvblN0cmF0ZWd5OiBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvblN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlQnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUJ1dHRvblN0cmF0ZWd5LCBbeyBpZDogJ3BheXBhbGNvbW1lcmNlJyB9XSk7XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnLFxuICAgIE1lc3NhZ2luZ09wdGlvbnMsXG4gICAgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbENvbW1lcmNlU2RrLFxuICAgIFBheVBhbE1lc3NhZ2VzU2RrLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zLFxuICAgIFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbn0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VDcmVkaXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtY3JlZGl0LWJ1dHRvbi1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5IGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VTZGs6IFBheVBhbENvbW1lcmNlU2RrLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VDcmVkaXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXlwYWxjb21tZXJjZWNyZWRpdCwgY29udGFpbmVySWQsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZTogcHJvdmlkZWRDdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXJJZCxcbiAgICAgICAgfSA9IHBheXBhbGNvbW1lcmNlY3JlZGl0IHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGlzQnV5Tm93RmxvdyA9ICEhYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZWNyZWRpdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlY3JlZGl0XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzQnV5Tm93RmxvdyAmJiAhcHJvdmlkZWRDdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWNyZWRpdC5jdXJyZW5jeUNvZGVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc0J1eU5vd0Zsb3cgJiZcbiAgICAgICAgICAgIHR5cGVvZiBidXlOb3dJbml0aWFsaXplT3B0aW9ucz8uZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5ICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlY3JlZGl0LmJ1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNCdXlOb3dGbG93KSB7XG4gICAgICAgICAgICAvLyBJbmZvOiBkZWZhdWx0IGNoZWNrb3V0IHNob3VsZCBub3QgYmUgbG9hZGVkIGZvciBCdXlOb3cgZmxvdyxcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZXJlIGlzIG5vIGNoZWNrb3V0IHNlc3Npb24gYXZhaWxhYmxlIGZvciB0aGF0LlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgLy8gSW5mbzogd2UgYXJlIHVzaW5nIHByb3ZpZGVkIGN1cnJlbmN5IGNvZGUgZm9yIGJ1eSBub3cgY2FydCxcbiAgICAgICAgLy8gYmVjYXVzZSBjaGVja291dCBzZXNzaW9uIGlzIG5vdCBhdmFpbGFibGUgYmVmb3JlIGJ1eSBub3cgY2FydCBjcmVhdGlvbixcbiAgICAgICAgLy8gaGVuY2UgYXBwbGljYXRpb24gd2lsbCB0aHJvdyBhbiBlcnJvciBvbiBnZXRDYXJ0T3JUaHJvdyBtZXRob2QgY2FsbFxuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBpc0J1eU5vd0Zsb3dcbiAgICAgICAgICAgID8gcHJvdmlkZWRDdXJyZW5jeUNvZGVcbiAgICAgICAgICAgIDogc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCwgY3VycmVuY3lDb2RlLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oY29udGFpbmVySWQsIG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZWNyZWRpdCk7XG5cbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIGJhbm5lciByZW5kZXJpbmcgaW1wbGVtZW50YXRpb24gaW4gdGhpcyBmaWxlIHdoZW4gUEFZUEFMLTU1NTcuSGlkZV9wcGNfYmFubmVyX2ltcGxlbWVudGF0aW9uIHdpbGwgYmUgcm9sbGVkIG91dCB0byAxMDAlXG4gICAgICAgIGNvbnN0IGZlYXR1cmVzID0gc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlcztcbiAgICAgICAgY29uc3QgaXNCYW5uZXJJbXBsZW1lbnRhdGlvbkRpc2FibGVkID1cbiAgICAgICAgICAgIGZlYXR1cmVzWydQQVlQQUwtNTU1Ny5IaWRlX3BwY19iYW5uZXJfaW1wbGVtZW50YXRpb24nXSA/PyBmYWxzZTtcblxuICAgICAgICBpZiAoaXNCYW5uZXJJbXBsZW1lbnRhdGlvbkRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtZXNzYWdpbmdDb250YWluZXIgPVxuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVySWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWVzc2FnaW5nQ29udGFpbmVySWQpO1xuXG4gICAgICAgIGlmIChjdXJyZW5jeUNvZGUgJiYgbWVzc2FnaW5nQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgICAgICBjb25zdCB7IHBheXBhbEJOUExDb25maWd1cmF0aW9uID0gW10gfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICAgICAgY29uc3QgYmFubmVyQ29uZmlndXJhdGlvbiA9XG4gICAgICAgICAgICAgICAgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24gJiYgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24uZmluZCgoeyBpZCB9KSA9PiBpZCA9PT0gJ2NhcnQnKTtcblxuICAgICAgICAgICAgaWYgKCFiYW5uZXJDb25maWd1cmF0aW9uPy5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzIGNvZGUgd2hlbiBkYXRhIGF0dHJpYnV0ZXMgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGJhbm5lciBjb250YWluZXIgaW4gY29udGVudCBzZXJ2aWNlXG4gICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBwLXN0eWxlLWxvZ28tdHlwZScpO1xuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1wcC1zdHlsZS1sb2dvLXBvc2l0aW9uJyk7XG4gICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBwLXN0eWxlLXRleHQtY29sb3InKTtcbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcHAtc3R5bGUtdGV4dC1zaXplJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheXBhbFNkayA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsTWVzc2FnZXMoXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLnJlbmRlck1lc3NhZ2VzKHBheXBhbFNkaywgbWVzc2FnaW5nQ29udGFpbmVySWQsIGJhbm5lckNvbmZpZ3VyYXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNlY3JlZGl0OiBQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLCBzdHlsZSwgb25Db21wbGV0ZSwgb25FbGlnaWJpbGl0eUZhaWx1cmUgfSA9XG4gICAgICAgICAgICBwYXlwYWxjb21tZXJjZWNyZWRpdDtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLCBpc0FwcFN3aXRjaEVuYWJsZWQgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcigncGF5cGFsY29tbWVyY2VjcmVkaXQnKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXlOb3dGbG93Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVDbGljayhidXlOb3dJbml0aWFsaXplT3B0aW9ucyksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBob3N0ZWRDaGVja291dENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIC4uLighaXNBcHBTd2l0Y2hFbmFibGVkICYmIHtcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMub25Ib3N0ZWRDaGVja291dEFwcHJvdmUoZGF0YSwgYWN0aW9ucywgbWV0aG9kSWQsIG9uQ29tcGxldGUpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGZ1bmRpbmdTb3VyY2VzID0gW3BheXBhbFNkay5GVU5ESU5HLlBBWUxBVEVSLCBwYXlwYWxTZGsuRlVORElORy5DUkVESVRdO1xuICAgICAgICBsZXQgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IGZhbHNlO1xuXG4gICAgICAgIGZ1bmRpbmdTb3VyY2VzLmZvckVhY2goKGZ1bmRpbmdTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGUpLFxuICAgICAgICAgICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgICAgICAgICAuLi4oYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMgJiYgYnV5Tm93Rmxvd0NhbGxiYWNrcyksXG4gICAgICAgICAgICAgICAgICAgIC4uLihpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCAmJiBob3N0ZWRDaGVja291dENhbGxiYWNrcyksXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsQnV0dG9uLnJlbmRlcihgIyR7Y29udGFpbmVySWR9YCk7XG4gICAgICAgICAgICAgICAgICAgIGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob25FbGlnaWJpbGl0eUZhaWx1cmUgJiYgdHlwZW9mIG9uRWxpZ2liaWxpdHlGYWlsdXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uRWxpZ2liaWxpdHlGYWlsdXJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWhhc1JlbmRlcmVkU21hcnRCdXR0b24pIHtcbiAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXJJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucz86IFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1eU5vd0NhcnQgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICAgICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dChidXlOb3dDYXJ0LmlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25Ib3N0ZWRDaGVja291dEFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIG9uQ29tcGxldGU/OiAoKSA9PiB2b2lkLFxuICAgICk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBpZiAoIWRhdGEub3JkZXJJRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyRGV0YWlscyA9IGF3YWl0IGFjdGlvbnMub3JkZXIuZ2V0KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGlmIChjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe30sIHsgcGFyYW1zOiB7IG1ldGhvZElkIH0gfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobWV0aG9kSWQsIGRhdGEub3JkZXJJRCk7XG5cbiAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICYmIHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gRklYTUU6IERvIHdlIHJlYWxseSBuZWVkIHRvIHJldHVybiB0cnVlIGhlcmU/XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGNpdHk6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNpdHksXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3Muc3RhdGUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbmZvOiB3ZSB1c2UgdGhlIHNhbWUgYWRkcmVzcyB0byBmaWxsIGJpbGxpbmcgYW5kIHNoaXBwaW5nIGFkZHJlc3NlcyB0byBoYXZlIHZhbGlkIHF1b3RhIG9uIEJFIGZvciBvcmRlciB1cGRhdGluZyBwcm9jZXNzXG4gICAgICAgICAgICAvLyBvbiB0aGlzIHN0YWdlIHdlIGRvbid0IGhhdmUgYWNjZXNzIHRvIHZhbGlkIGN1c3RvbWVyJ3MgYWRkcmVzcyBhY2NlcHQgc2hpcHBpbmcgZGF0YVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGFkZHJlc3MpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhhZGRyZXNzKTtcblxuICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdygpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KFxuICAgICAgICAgICAgZGF0YS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzU2RrOiBQYXlQYWxNZXNzYWdlc1NkayxcbiAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgYmFubmVyQ29uZmlndXJhdGlvbjogUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBjaGVja291dCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENoZWNrb3V0T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbE1lc3NhZ2VzT3B0aW9uczogTWVzc2FnaW5nT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGFtb3VudDogY2hlY2tvdXQub3V0c3RhbmRpbmdCYWxhbmNlLFxuICAgICAgICAgICAgcGxhY2VtZW50OiAnY2FydCcsXG4gICAgICAgICAgICBzdHlsZTogZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyhiYW5uZXJDb25maWd1cmF0aW9uKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxNZXNzYWdlcyA9IHBheXBhbE1lc3NhZ2VzU2RrLk1lc3NhZ2VzKHBheXBhbE1lc3NhZ2VzT3B0aW9ucyk7XG5cbiAgICAgICAgcGF5cGFsTWVzc2FnZXMucmVuZGVyKGAjJHttZXNzYWdpbmdDb250YWluZXJJZH1gKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBjcmVhdGVQYXlQYWxDb21tZXJjZVNkayB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLWNvbW1lcmNlLXV0aWxzJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1idXR0b24tc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5OiBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZVNkaygpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNlY3JlZGl0JyB9LFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMsXG4gICAgUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbiAgICBTdHlsZUJ1dHRvbkNvbG9yLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvbkluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlVmVubW9CdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtdmVubW8tYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlVmVubW9CdXR0b25TdHJhdGVneSBpbXBsZW1lbnRzIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheXBhbGNvbW1lcmNldmVubW8sIGNvbnRhaW5lcklkLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgeyBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgY3VycmVuY3lDb2RlOiBwcm92aWRlZEN1cnJlbmN5Q29kZSB9ID1cbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNldmVubW8gfHwge307XG5cbiAgICAgICAgY29uc3QgaXNCdXlOb3dGbG93ID0gISFidXlOb3dJbml0aWFsaXplT3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNldmVubW8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZXZlbm1vXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzQnV5Tm93RmxvdyAmJiAhcHJvdmlkZWRDdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZXZlbm1vLmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzQnV5Tm93RmxvdyAmJlxuICAgICAgICAgICAgdHlwZW9mIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2V2ZW5tby5idXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHlcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzQnV5Tm93Rmxvdykge1xuICAgICAgICAgICAgLy8gSW5mbzogZGVmYXVsdCBjaGVja291dCBzaG91bGQgbm90IGJlIGxvYWRlZCBmb3IgQnV5Tm93IGZsb3csXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGVyZSBpcyBubyBjaGVja291dCBzZXNzaW9uIGF2YWlsYWJsZSBmb3IgdGhhdC5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmZvOiB3ZSBhcmUgdXNpbmcgcHJvdmlkZWQgY3VycmVuY3kgY29kZSBmb3IgYnV5IG5vdyBjYXJ0LFxuICAgICAgICAvLyBiZWNhdXNlIGNoZWNrb3V0IHNlc3Npb24gaXMgbm90IGF2YWlsYWJsZSBiZWZvcmUgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uLFxuICAgICAgICAvLyBoZW5jZSBhcHBsaWNhdGlvbiB3aWxsIHRocm93IGFuIGVycm9yIG9uIGdldENhcnRPclRocm93IG1ldGhvZCBjYWxsXG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IGlzQnV5Tm93Rmxvd1xuICAgICAgICAgICAgPyBwcm92aWRlZEN1cnJlbmN5Q29kZVxuICAgICAgICAgICAgOiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkLCBjdXJyZW5jeUNvZGUsIGZhbHNlKTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihjb250YWluZXJJZCwgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNldmVubW8pO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBjb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxjb21tZXJjZXZlbm1vOiBQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsIHN0eWxlLCBvbkVsaWdpYmlsaXR5RmFpbHVyZSB9ID0gcGF5cGFsY29tbWVyY2V2ZW5tbztcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgZnVuZGluZ1NvdXJjZSA9IHBheXBhbFNkay5GVU5ESU5HLlZFTk1PO1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdwYXlwYWxjb21tZXJjZXZlbm1vJyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV5Tm93Rmxvd0NhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlQ2xpY2soYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2UsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5nZXRWYWxpZFZlbm1vQnV0dG9uU3R5bGVzKHN0eWxlKSxcbiAgICAgICAgICAgIC4uLmRlZmF1bHRDYWxsYmFja3MsXG4gICAgICAgICAgICAuLi4oYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMgJiYgYnV5Tm93Rmxvd0NhbGxiYWNrcyksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uUmVuZGVyID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHBheXBhbEJ1dHRvblJlbmRlci5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHBheXBhbEJ1dHRvblJlbmRlci5yZW5kZXIoYCMke2NvbnRhaW5lcklkfWApO1xuICAgICAgICB9IGVsc2UgaWYgKG9uRWxpZ2liaWxpdHlGYWlsdXJlICYmIHR5cGVvZiBvbkVsaWdpYmlsaXR5RmFpbHVyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FbGlnaWJpbGl0eUZhaWx1cmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXJJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFZhbGlkVmVubW9CdXR0b25TdHlsZXMoc3R5bGU6IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyB8IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCB2YWxpZEJ1dHRvblN0eWxlID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlKTtcblxuICAgICAgICBpZiAodmFsaWRCdXR0b25TdHlsZS5jb2xvciA9PT0gU3R5bGVCdXR0b25Db2xvci5nb2xkKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLnZhbGlkQnV0dG9uU3R5bGUsXG4gICAgICAgICAgICAgICAgY29sb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsaWRCdXR0b25TdHlsZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucz86IFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1eU5vd0NhcnQgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICAgICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dChidXlOb3dDYXJ0LmlkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uU3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtdmVubW8tYnV0dG9uLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvblN0cmF0ZWd5OiBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvblN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvblN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNldmVubW8nIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc0J1dHRvbk9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy1idXR0b24taW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneVxuICAgIGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneVxue1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMsIGNvbnRhaW5lcklkLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYXBtLFxuICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGU6IHByb3ZpZGVkQ3VycmVuY3lDb2RlLFxuICAgICAgICB9ID0gcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMgfHwge307XG5cbiAgICAgICAgY29uc3QgaXNCdXlOb3dGbG93ID0gISFidXlOb3dJbml0aWFsaXplT3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFwbSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzLmFwbVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0J1eU5vd0Zsb3cgJiYgIXByb3ZpZGVkQ3VycmVuY3lDb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMuY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaXNCdXlOb3dGbG93ICYmXG4gICAgICAgICAgICB0eXBlb2YgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcy5idXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHlcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzQnV5Tm93Rmxvdykge1xuICAgICAgICAgICAgLy8gSW5mbzogZGVmYXVsdCBjaGVja291dCBzaG91bGQgbm90IGJlIGxvYWRlZCBmb3IgQnV5Tm93IGZsb3csXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGVyZSBpcyBubyBjaGVja291dCBzZXNzaW9uIGF2YWlsYWJsZSBmb3IgdGhhdC5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmZvOiB3ZSBhcmUgdXNpbmcgcHJvdmlkZWQgY3VycmVuY3kgY29kZSBmb3IgYnV5IG5vdyBjYXJ0LFxuICAgICAgICAvLyBiZWNhdXNlIGNoZWNrb3V0IHNlc3Npb24gaXMgbm90IGF2YWlsYWJsZSBiZWZvcmUgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uLFxuICAgICAgICAvLyBoZW5jZSBhcHBsaWNhdGlvbiB3aWxsIHRocm93IGFuIGVycm9yIG9uIGdldENhcnRPclRocm93IG1ldGhvZCBjYWxsXG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IGlzQnV5Tm93Rmxvd1xuICAgICAgICAgICAgPyBwcm92aWRlZEN1cnJlbmN5Q29kZVxuICAgICAgICAgICAgOiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkLCBjdXJyZW5jeUNvZGUsIGZhbHNlKTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihjb250YWluZXJJZCwgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgY29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHM6IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBhcG0sIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLCBzdHlsZSwgb25FbGlnaWJpbGl0eUZhaWx1cmUgfSA9XG4gICAgICAgICAgICBwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcztcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgaXNBdmFpbGFibGVGdW5kaW5nU291cmNlID0gT2JqZWN0LnZhbHVlcyhwYXlwYWxTZGsuRlVORElORykuaW5jbHVkZXMoYXBtKTtcblxuICAgICAgICBpZiAoIWlzQXZhaWxhYmxlRnVuZGluZ1NvdXJjZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBQYXlQYWwgYnV0dG9uIGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzLmFwbVwiIGFyZ3VtZW50IGlzIG5vdCB2YWxpZCBmdW5kaW5nIHNvdXJjZS5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgICAgICAgICAncGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZCcsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXlOb3dGbG93Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVDbGljayhidXlOb3dJbml0aWFsaXplT3B0aW9ucyksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogYXBtLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShzdHlsZSksXG4gICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgLi4uKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zICYmIGJ1eU5vd0Zsb3dDYWxsYmFja3MpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvblJlbmRlciA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChwYXlwYWxCdXR0b25SZW5kZXIuaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICBwYXlwYWxCdXR0b25SZW5kZXIucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgfSBlbHNlIGlmIChvbkVsaWdpYmlsaXR5RmFpbHVyZSAmJiB0eXBlb2Ygb25FbGlnaWJpbGl0eUZhaWx1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRWxpZ2liaWxpdHlGYWlsdXJlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVySWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/OiBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBidXlOb3dDYXJ0ID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyhcbiAgICAgICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoYnV5Tm93Q2FydC5pZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzLWJ1dHRvbi1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMnIH0sXG5dKTtcbiJdLCJuYW1lcyI6WyJNaXNzaW5nRGF0YUVycm9yVHlwZSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJ0b1Jlc29sdmFibGVNb2R1bGUiLCJtb2R1bGUiLCJyZXNvbHZlSWRzIiwiY29uc29sZSIsImxvZyIsIk9iamVjdCIsImFzc2lnbiIsImQiLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwic3VwZXIiLCJuYW1lIiwidHlwZSIsInNldFByb3RvdHlwZU9mIiwidGhpcyIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciIsIk1pc3NpbmdEYXRhRXJyb3IiLCJzdWJ0eXBlIiwiTWlzc2luZ0JpbGxpbmdBZGRyZXNzIiwiTWlzc2luZ0NhcnQiLCJNaXNzaW5nQ29uc2lnbm1lbnRzIiwiTWlzc2luZ0NoZWNrb3V0IiwiTWlzc2luZ0N1c3RvbWVyIiwiTWlzc2luZ0NoZWNrb3V0Q29uZmlnIiwiTWlzc2luZ09yZGVyQ29uZmlnIiwiTWlzc2luZ09yZGVyIiwiTWlzc2luZ09yZGVySWQiLCJNaXNzaW5nUGF5bWVudCIsIk1pc3NpbmdQYXltZW50VG9rZW4iLCJNaXNzaW5nUGF5bWVudE1ldGhvZCIsIk1pc3NpbmdTaGlwcGluZ0FkZHJlc3MiLCJnZXRFcnJvck1lc3NhZ2UiLCJCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvciIsIkRFRkFVTFRfUkVTUE9OU0UiLCJib2R5IiwiaGVhZGVycyIsInN0YXR1cyIsIlJlcXVlc3RFcnJvciIsInJlc3BvbnNlIiwiZXJyb3JzIiwiQ2FydFNvdXJjZSIsIkxpYWJpbGl0eVNoaWZ0RW51bSIsIlBheVBhbENvbW1lcmNlSW50ZW50IiwiU3R5bGVCdXR0b25MYWJlbCIsIlN0eWxlQnV0dG9uQ29sb3IiLCJTdHlsZUJ1dHRvblNoYXBlIiwiTm9uSW5zdGFudEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMiLCJQYXlQYWxPcmRlclN0YXR1cyIsIlBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIiwiZm9ybVBvc3RlciIsInBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJwYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIiLCJwYXlwYWxDb21tZXJjZVNjcmlwdExvYWRlciIsImxvYWRQYXlQYWxTZGsiLCJtZXRob2RJZCIsInByb3ZpZGVkQ3VycmVuY3lDb2RlIiwiaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZSIsImZvcmNlTG9hZCIsInN0YXRlIiwiZ2V0U3RhdGUiLCJjdXJyZW5jeUNvZGUiLCJnZXRDYXJ0T3JUaHJvdyIsImN1cnJlbmN5IiwiY29kZSIsInBheW1lbnRNZXRob2QiLCJnZXRQYXltZW50TWV0aG9kT3JUaHJvdyIsInBheXBhbFNkayIsImdldFBheVBhbFNESyIsImdldFBheVBhbFNka09yVGhyb3ciLCJjcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyIsImJ1eU5vd0luaXRpYWxpemVPcHRpb25zIiwiY2FydFJlcXVlc3RCb2R5IiwiZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5IiwiY3JlYXRlQnV5Tm93Q2FydCIsImVycm9yIiwiY3JlYXRlT3JkZXIiLCJwcm92aWRlcklkIiwicmVxdWVzdEJvZHkiLCJjYXJ0SWQiLCJpZCIsIm9yZGVySWQiLCJjcmVhdGVPcmRlckNhcmRGaWVsZHMiLCJzZXR1cFRva2VuIiwidXBkYXRlT3JkZXIiLCJjYXJ0IiwiY29uc2lnbm1lbnQiLCJnZXRDb25zaWdubWVudHNPclRocm93IiwiYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zIiwic2VsZWN0ZWRTaGlwcGluZ09wdGlvbiIsIl9lcnJvciIsImdldE9yZGVyU3RhdHVzIiwib3B0aW9ucyIsInRva2VuaXplUGF5bWVudCIsInBvc3RGb3JtIiwicGF5bWVudF90eXBlIiwiYWN0aW9uIiwicHJvdmlkZXIiLCJvcmRlcl9pZCIsInNvdXJjZSIsIkJ1eU5vdyIsImNhcnRfaWQiLCJzdWJtaXRQYXltZW50IiwiZ2F0ZXdheUlkIiwicGF5bWVudERhdGEiLCJmb3JtYXR0ZWRQYXlsb2FkIiwidmF1bHRfcGF5bWVudF9pbnN0cnVtZW50Iiwic2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQiLCJkZXZpY2VfaW5mbyIsIm1ldGhvZF9pZCIsInBheXBhbF9hY2NvdW50IiwiZ2V0U2hpcHBpbmdPcHRpb25PclRocm93Iiwic2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkIiwicmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiIsImZpbmQiLCJvcHRpb24iLCJpc1JlY29tbWVuZGVkIiwic2hpcHBpbmdPcHRpb25Ub1NlbGVjdCIsImdldEFkZHJlc3MiLCJhZGRyZXNzIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJlbWFpbCIsInBob25lIiwiY29tcGFueSIsImFkZHJlc3MxIiwiYWRkcmVzczIiLCJjaXR5IiwiY291bnRyeUNvZGUiLCJwb3N0YWxDb2RlIiwic3RhdGVPclByb3ZpbmNlIiwic3RhdGVPclByb3ZpbmNlQ29kZSIsImN1c3RvbUZpZWxkcyIsImdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyIsInBheWVyIiwiZ2l2ZW5fbmFtZSIsInN1cm5hbWUiLCJlbWFpbF9hZGRyZXNzIiwiYWRkcmVzc19saW5lXzEiLCJhZGRyZXNzX2xpbmVfMiIsImFkbWluX2FyZWFfMiIsImNvdW50cnlfY29kZSIsInBvc3RhbF9jb2RlIiwiYWRtaW5fYXJlYV8xIiwicGhvbmVfbnVtYmVyIiwibmF0aW9uYWxfbnVtYmVyIiwiZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyIsIm9yZGVyRGV0YWlscyIsInB1cmNoYXNlX3VuaXRzIiwiZnVsbF9uYW1lIiwic2hpcHBpbmciLCJzcGxpdCIsImpvaW4iLCJnZXRWYWxpZEJ1dHRvblN0eWxlIiwic3R5bGUiLCJjb2xvciIsImhlaWdodCIsImxhYmVsIiwic2hhcGUiLCJ2YWxpZFN0eWxlcyIsInVuZGVmaW5lZCIsImdldFZhbGlkSGVpZ2h0Iiwib21pdEJ5IiwiaXNOaWwiLCJyZW1vdmVFbGVtZW50IiwiZWxlbWVudElkIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJkaXNwbGF5IiwiSU5URVJOQUxfVVNFX09OTFkiLCJDb250ZW50VHlwZSIsIlNES19WRVJTSU9OX0hFQURFUlMiLCJQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIiLCJyZXF1ZXN0U2VuZGVyIiwidXJsIiwiSnNvbiIsInBvc3QiLCJwdXQiLCJQYXlQYWxDb21tZXJjZVNjcmlwdExvYWRlciIsInNjcmlwdExvYWRlciIsIndpbmRvdyIsInBheXBhbFNka1NjcmlwdENvbmZpZyIsImdldFBheVBhbFNka1NjcmlwdENvbmZpZ09yVGhyb3ciLCJsb2FkUGF5UGFsU0RLIiwicGF5cGFsIiwidHJhbnNmb3JtQ29uZmlnIiwiYXR0cmlidXRlcyIsInNjcmlwdFNyYyIsIlVSTFNlYXJjaFBhcmFtcyIsInRvU3RyaW5nIiwibG9hZFNjcmlwdCIsImFzeW5jIiwiY2xpZW50VG9rZW4iLCJpbml0aWFsaXphdGlvbkRhdGEiLCJjbGllbnRJZCIsImludGVudCIsIm1lcmNoYW50SWQiLCJidXllckNvdW50cnkiLCJhdHRyaWJ1dGlvbklkIiwiaXNWZW5tb0VuYWJsZWQiLCJpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCIsImlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlIiwiaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSIsImF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMiLCJlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyIsImlzR29vZ2xlUGF5RW5hYmxlZCIsImNvbW1pdCIsInNob3VsZEVuYWJsZUNhcmQiLCJlbmFibGVDYXJkRnVuZGluZyIsImVuYWJsZUNyZWRpdEZ1bmRpbmciLCJzaG91bGRFbmFibGVBUE1zIiwiZW5hYmxlVmVubW9GdW5kaW5nIiwiZW5hYmxlQVBNc0Z1bmRpbmciLCJnb29nbGVQYXlDb21wb25lbnQiLCJjYXJkRmllbGRzQ29tcG9uZW50IiwiZGlzYWJsZUZ1bmRpbmciLCJmaWx0ZXIiLCJhcG0iLCJpbmNsdWRlcyIsImVuYWJsZUZ1bmRpbmciLCJsZW5ndGgiLCJjb21wb25lbnRzIiwiY29uZmlnIiwidHJhbnNmb3JtZWRDb25maWciLCJrZXlzIiwiZm9yRWFjaCIsInZhbHVlIiwiQXJyYXkiLCJpc0FycmF5IiwiZ2V0SG9zdCIsImNyZWF0ZUZvcm1Qb3N0ZXIiLCJjcmVhdGVSZXF1ZXN0U2VuZGVyIiwiaG9zdCIsImdldFNjcmlwdExvYWRlciIsIkludmFsaWRBcmd1bWVudEVycm9yIiwiUGF5UGFsQ29tbWVyY2VDdXN0b21lclN0cmF0ZWd5IiwicGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UiLCJvbkVycm9yIiwibm9vcCIsImluaXRpYWxpemUiLCJwYXlwYWxjb21tZXJjZSIsImNvbnRhaW5lciIsIm9uQ2xpY2siLCJnZXRQYXltZW50TWV0aG9kIiwibG9hZFBheW1lbnRNZXRob2QiLCJCdXR0b25zIiwicmVuZGVyQnV0dG9uIiwiZGVpbml0aWFsaXplIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzaWduSW4iLCJjcmVkZW50aWFscyIsInNpZ25JbkN1c3RvbWVyIiwic2lnbk91dCIsInNpZ25PdXRDdXN0b21lciIsImV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQiLCJjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrIiwib25Db21wbGV0ZSIsInBheW1lbnRCdXR0b25TdHlsZXMiLCJpc0FwcFN3aXRjaEVuYWJsZWQiLCJjaGVja291dFRvcEJ1dHRvblN0eWxlcyIsImRlZmF1bHRDYWxsYmFja3MiLCJpc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZCIsImFwcFN3aXRjaFdoZW5BdmFpbGFibGUiLCJvbkFwcHJvdmUiLCJvcmRlcklEIiwiaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MiLCJvblNoaXBwaW5nQWRkcmVzc0NoYW5nZSIsImRhdGEiLCJvblNoaXBwaW5nT3B0aW9uc0NoYW5nZSIsImFjdGlvbnMiLCJvbkhvc3RlZENoZWNrb3V0QXBwcm92ZSIsImJ1dHRvblJlbmRlck9wdGlvbnMiLCJmdW5kaW5nU291cmNlIiwiRlVORElORyIsIlBBWVBBTCIsInBheXBhbEJ1dHRvbiIsImlzRWxpZ2libGUiLCJoYXNSZXR1cm5lZCIsInJlc3VtZSIsInJlbmRlciIsIm9yZGVyIiwiYmlsbGluZ0FkZHJlc3MiLCJ1cGRhdGVCaWxsaW5nQWRkcmVzcyIsImxpbmVJdGVtcyIsInBoeXNpY2FsSXRlbXMiLCJzaGlwcGluZ0FkZHJlc3MiLCJ1cGRhdGVTaGlwcGluZ0FkZHJlc3MiLCJzdWJtaXRPcmRlciIsInBhcmFtcyIsImhhbmRsZUVycm9yIiwic2hpcHBpbmdPcHRpb24iLCJzZWxlY3RTaGlwcGluZ09wdGlvbiIsIlBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJTdHJhdGVneSIsInBheXBhbGNvbW1lcmNlY3JlZGl0IiwicGF5cGFsQ29tbWVyY2VDcmVkaXQiLCJmdW5kaW5nU291cmNlcyIsIlBBWUxBVEVSIiwiQ1JFRElUIiwiaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiIsIlBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lclN0cmF0ZWd5IiwicGF5cGFsY29tbWVyY2V2ZW5tbyIsIlZFTk1PIiwicGF5cGFsQnV0dG9uUmVuZGVyIiwiVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZSIsIlREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZSIsIlBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSIsIlBheVBhbENvbW1lcmNlU2RrIiwiZ2V0UGF5UGFsRmFzdGxhbmVTZGsiLCJzZXNzaW9uSWQiLCJwYXlwYWxGYXN0bGFuZVNkayIsImdldFBheVBhbEZhc3RsYW5lU2RrQ29uZmlndXJhdGlvbiIsImdldFBheVBhbEdvb2dsZVBheVNkayIsInBheXBhbEdvb2dsZVBheSIsImdldFBheVBhbEdvb2dsZVBheVNka1NjcmlwdENvbmZpZ09yVGhyb3ciLCJnZXRQYXlQYWxBcG1zU2RrIiwicGF5cGFsQXBtcyIsImdldFBheVBhbEFwbVNka0NvbmZpZ3VyYXRpb24iLCJnZXRQYXlQYWxNZXNzYWdlcyIsInBheXBhbE1lc3NhZ2VzIiwicGF5cGFsU2RrTWVzc2FnZXNDb25maWciLCJnZXRQYXlQYWxTZGtNZXNzYWdlc0NvbmZpZ3VyYXRpb24iLCJzY3JpcHRPcHRpb25zIiwic2NyaXB0QXR0cmlidXRlcyIsInJlcGxhY2UiLCJkaXNhYmxlQVBNc0Z1bmRpbmciLCJjcmVhdGVQYXlQYWxDb21tZXJjZVNkayIsImNyZWF0ZVNjcmlwdExvYWRlciIsIkNvb2tpZVN0b3JhZ2UiLCJjb29raWVLZXkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJjb29raWUiLCJmaXJzdEluZGV4IiwiaW5kZXhPZiIsImxhc3RJbmRleCIsImRlY29kZVVSSUNvbXBvbmVudCIsInN1YnN0cmluZyIsInNldCIsInNlY3VyZSIsImNvb2tpZVRleHQiLCJleHBpcmVzIiwicGF0aCIsImRvbWFpbiIsInRvVVRDU3RyaW5nIiwibm93IiwiRGF0ZSIsIm1pbnV0ZXMiLCJzZXRUaW1lIiwiZ2V0VGltZSIsInJlbW92ZSIsIlBheVBhbENvbW1lcmNlRmFzdGxhbmVVdGlscyIsImluaXRpYWxpemVQYXlQYWxGYXN0bGFuZSIsImlzVGVzdE1vZGVFbmFibGVkIiwic3R5bGVzIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInBheXBhbEZhc3RsYW5lIiwiZGVmYXVsdFN0eWxlcyIsInJvb3QiLCJiYWNrZ3JvdW5kQ29sb3JQcmltYXJ5IiwiRmFzdGxhbmUiLCJnZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3ciLCJsb29rdXBDdXN0b21lck9yVGhyb3ciLCJpZGVudGl0eSIsImxvb2t1cEN1c3RvbWVyQnlFbWFpbCIsInRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3dPclRocm93IiwiY3VzdG9tZXJDb250ZXh0SWQiLCJ0cmlnZ2VyQXV0aGVudGljYXRpb25GbG93IiwidXBkYXRlU3RvcmFnZVNlc3Npb25JZCIsInNldERhdGUiLCJnZXREYXRlIiwiY29va2llc09wdGlvbiIsInJlbW92ZVN0b3JhZ2VTZXNzaW9uSWQiLCJnZXRTdG9yYWdlU2Vzc2lvbklkIiwibWFwUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YSIsImF1dGhlbnRpY2F0aW9uUmVzdWx0IiwiYXV0aGVudGljYXRpb25TdGF0ZSIsInByb2ZpbGVEYXRhIiwicGF5cGFsQmlsbGluZ0FkZHJlc3MiLCJjYXJkIiwicGF5bWVudFNvdXJjZSIsInBheXBhbFNoaXBwaW5nQWRkcmVzcyIsInBheXBhbFByb2ZpbGVOYW1lIiwicGF5cGFsSW5zdHJ1bWVudCIsIm1hcFBheVBhbFRvQmNBZGRyZXNzIiwicGhvbmVOdW1iZXIiLCJpbnN0cnVtZW50cyIsIm1hcFBheVBhbFRvQmNJbnN0cnVtZW50IiwiYWRkcmVzc2VzIiwiZmlsdGVyQWRkcmVzc2VzIiwiVU5SRUNPR05JWkVEIiwiaW5zdHJ1bWVudCIsImJyYW5kIiwiZXhwaXJ5IiwibGFzdERpZ2l0cyIsImV4cGlyeVllYXIiLCJleHBpcnlNb250aCIsImJpZ3BheVRva2VuIiwiZGVmYXVsdEluc3RydW1lbnQiLCJpaW4iLCJsYXN0NCIsIm1ldGhvZCIsInRydXN0ZWRTaGlwcGluZ0FkZHJlc3MiLCJ1bnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25Nb2RlIiwiUEFOIiwibWFwQmNUb1BheVBhbEFkZHJlc3MiLCJhZGRyZXNzTGluZTEiLCJhZGRyZXNzTGluZTIiLCJhZG1pbkFyZWExIiwiYWRtaW5BcmVhMiIsInByb2ZpbGVOYW1lIiwiZnVsbE5hbWUiLCJwaG9uZURhdGEiLCJuYXRpb25hbE51bWJlciIsImNvdW50cnkiLCJyZWR1Y2UiLCJjdXN0b21lckFkZHJlc3NlcyIsImN1cnJlbnRBZGRyZXNzIiwic29tZSIsImN1c3RvbWVyQWRkcmVzcyIsImlzRXF1YWxBZGRyZXNzZXMiLCJmaXJzdEFkZHJlc3MiLCJzZWNvbmRBZGRyZXNzIiwiaXNFcXVhbCIsIm5vcm1hbGl6ZUFkZHJlc3MiLCJvbWl0IiwiY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVV0aWxzIiwiaXNJbnZhbGlkU3R5bGVPcHRpb24iLCJzdHlsZU9wdGlvbiIsImdldEZhc3RsYW5lU3R5bGVzIiwic3R5bGVTZXR0aW5ncyIsInVpU3R5bGVzIiwiZmFzdGxhbmVTdHlsZXMiLCJpbnB1dCIsInRvZ2dsZSIsInRleHRCb2R5IiwidGV4dCIsInRleHRDYXB0aW9uIiwiY2FwdGlvbiIsImJyYW5kaW5nIiwiY2xlYW5VcEZhc3RsYW5lU3R5bGVzIiwiZmFzdGxhbmVSb290U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IiLCJlcnJvckNvbG9yIiwiZmFzdGxhbmVSb290U2V0dGluZ3NFcnJvckNvbG9yIiwiZm9udEZhbWlseSIsImZhc3RsYW5lUm9vdFNldHRpbmdzRm9udEZhbWlseSIsImZvbnRTaXplQmFzZSIsImZhc3RsYW5lUm9vdFNldHRpbmdzRm9udFNpemUiLCJwYWRkaW5nIiwiZmFzdGxhbmVSb290U2V0dGluZ3NQYWRkaW5nIiwicHJpbWFyeUNvbG9yIiwiZmFzdGxhbmVSb290U2V0dGluZ3NQcmltYXJ5Q29sb3IiLCJib3JkZXJSYWRpdXMiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJSYWRpdXMiLCJib3JkZXJDb2xvciIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlckNvbG9yIiwiZm9jdXNCb3JkZXJDb2xvciIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0ZvY3VzQm9yZGVyQmFzZSIsImJhY2tncm91bmRDb2xvciIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0JhY2tncm91bmRDb2xvciIsImJvcmRlcldpZHRoIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyV2lkdGgiLCJ0ZXh0Q29sb3JCYXNlIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzVGV4dENvbG9yQmFzZSIsImNvbG9yUHJpbWFyeSIsImZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclByaW1hcnkiLCJjb2xvclNlY29uZGFyeSIsImZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclNlY29uZGFyeSIsImZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0NvbG9yIiwiZm9udFNpemUiLCJmYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NGb250U2l6ZSIsImZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0NvbG9yIiwiZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzRm9udFNpemUiLCJmYXN0bGFuZUJyYW5kaW5nU2V0dGluZ3MiLCJtZXJnZUZhc3RsYW5lU3R5bGVzIiwiUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kiLCJwYXlwYWxDb21tZXJjZVNkayIsInBheXBhbENvbW1lcmNlRmFzdGxhbmVVdGlscyIsInBheXBhbGNvbW1lcmNlZmFzdGxhbmUiLCJfIiwiY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQiLCJnZXRDdXN0b21lck9yVGhyb3ciLCJpc0d1ZXN0IiwicnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyIsImN1c3RvbWVyIiwiZ2V0Q3VzdG9tZXIiLCJnZXRCaWxsaW5nQWRkcmVzcyIsImN1c3RvbWVyRW1haWwiLCJpc0F1dGhlbnRpY2F0aW9uRmxvd0NhbmNlbGVkIiwiQ0FOQ0VMRUQiLCJ1cGRhdGVDdXN0b21lckRhdGFTdGF0ZSIsInVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyIiwidXBkYXRlZFN0YXRlIiwiaXNGYXN0bGFuZVNoaXBwaW5nT3B0aW9uQXV0b1NlbGVjdEVuYWJsZWQiLCJjb25zaWdubWVudHMiLCJnZXRDb25zaWdubWVudHMiLCJmaXJzdFNoaXBwaW5nT3B0aW9uIiwic2hpcHBpbmdPcHRpb25JZCIsImlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZCIsIkRFRkFVTFRfU1RZTEVTIiwic2l6ZSIsIlJPVEFUSU9OX0FOSU1BVElPTiIsIkxvYWRpbmdJbmRpY2F0b3IiLCJjb250YWluZXJTdHlsZXMiLCJkZWZpbmVBbmltYXRpb24iLCJidWlsZENvbnRhaW5lciIsImluZGljYXRvciIsImJ1aWxkSW5kaWNhdG9yIiwiYXBwZW5kQ2hpbGQiLCJzaG93IiwicGFyZW50SWQiLCJwYXJlbnQiLCJ2aXNpYmlsaXR5Iiwib3BhY2l0eSIsImhpZGUiLCJoYW5kbGVUcmFuc2l0aW9uRW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJjcmVhdGVFbGVtZW50IiwiYm90dG9tIiwibGVmdCIsIndpZHRoIiwicG9zaXRpb24iLCJyaWdodCIsInRvcCIsInRyYW5zaXRpb24iLCJzZXRTdHlsZUF0dHJpYnV0ZSIsImJvcmRlciIsIm1hcmdpbiIsInRyYW5zZm9ybSIsInRyYW5zZm9ybVN0eWxlIiwiYW5pbWF0aW9uIiwiYXR0cnMiLCJrIiwic2V0UHJvcGVydHkiLCJoZWFkIiwic2hlZXQiLCJDU1NTdHlsZVNoZWV0IiwiaW5zZXJ0UnVsZSIsIkxPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyIsIlBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciIsImludmFsaWRGaWVsZHMiLCJQYXltZW50TWV0aG9kSW52YWxpZEVycm9yIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSIsInNob3VsZFNhdmVJbnN0cnVtZW50Iiwic2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCIsImlzVmF1bHRlZEluc3RydW1lbnQiLCJCb29sZWFuIiwiaW5zdHJ1bWVudElkIiwibWVzc2FnZXNTdHlsZXMiLCJsYXlvdXQiLCJsb2dvIiwicmF0aW8iLCJpc0Jhc2VJbnN0cnVtZW50IiwiUGF5UGFsQ29tbWVyY2VQYXltZW50U3RyYXRlZ3kiLCJsb2FkaW5nSW5kaWNhdG9yIiwiYmFubmVyQ29udGFpbmVySWQiLCJwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiIsImJhbm5lckNvbmZpZ3VyYXRpb24iLCJNZXNzYWdlcyIsInJlbmRlck1lc3NhZ2VzIiwibG9hZGluZ0luZGljYXRvckNvbnRhaW5lciIsIm9uSW5pdCIsInNob3VsZFJlbmRlclBheVBhbEJ1dHRvbk9uSW5pdGlhbGl6YXRpb24iLCJleGVjdXRlIiwicGF5bG9hZCIsInBheW1lbnQiLCJpc1BheVBhbFZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudERhdGEiLCJwYXltZW50UGF5bG9hZCIsInByZXBhcmVWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnRQYXlsb2FkIiwicHJlcGFyZVBheW1lbnRQYXlsb2FkIiwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQiLCJpc1JlZGlyZWN0QWN0aW9uRXJyb3IiLCJyZWRpcmVjdFVybCIsInJlZGlyZWN0X3VybCIsImxvY2F0aW9uIiwiaXNQcm92aWRlckVycm9yIiwiX3Jlc29sdmUiLCJyZWplY3QiLCJjbG9zZSIsImZpbmFsaXplIiwicGF5cGFsT3JkZXJJZCIsInNob3VsZENvbmZpcm1JbnN0cnVtZW50IiwiaXNUcnVzdGVkVmF1bHRpbmdGbG93IiwiYmlncGF5X3Rva2VuIiwidG9rZW4iLCJjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMiLCJvblJlbmRlckJ1dHRvbiIsIm9uVmFsaWRhdGUiLCJzdWJtaXRGb3JtIiwiYnV0dG9uT3B0aW9ucyIsImhhbmRsZUNsaWNrIiwiaGFuZGxlQXBwcm92ZSIsIm9uQ2FuY2VsIiwidG9nZ2xlTG9hZGluZ0luZGljYXRvciIsImZpZWxkc1ZhbHVlcyIsImdldEZpZWxkc1ZhbHVlcyIsImdldEluc3RydW1lbnRzIiwiZmluZEluc3RydW1lbnQiLCJpc0xvYWRpbmciLCJwYXlwYWxNZXNzYWdlc09wdGlvbnMiLCJhbW91bnQiLCJnZXRDaGVja291dE9yVGhyb3ciLCJvdXRzdGFuZGluZ0JhbGFuY2UiLCJwbGFjZW1lbnQiLCJpc1BheXBhbENvbW1lcmNlUHJvdmlkZXJFcnJvciIsImUiLCJwcm92aWRlcl9lcnJvciIsIk5vdEltcGxlbWVudGVkRXJyb3IiLCJQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRTdHJhdGVneSIsInBheXBhbE9wdGlvbnMiLCJQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudFN0cmF0ZWd5IiwiVGltZW91dEVycm9yIiwiaXNFeHBlcmltZW50RW5hYmxlZCIsImZlYXR1cmVzIiwiZXhwZXJpbWVudE5hbWUiLCJmYWxsYmFja1ZhbHVlIiwiUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3kiLCJwb2xsaW5nSW50ZXJ2YWwiLCJtYXhQb2xsaW5nSW50ZXJ2YWxUaW1lIiwicG9sbGluZ1RpbWVyIiwic3RvcFBvbGxpbmciLCJpc1BvbGxpbmdFbmFibGVkIiwicGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMiLCJzaG91bGRSZW5kZXJGaWVsZHMiLCJnZXRTdG9yZUNvbmZpZ09yVGhyb3ciLCJjaGVja291dFNldHRpbmdzIiwicmVuZGVyRmllbGRzIiwiaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20iLCJpc05vbkluc3RhbnRQYXltZW50TWV0aG9kIiwicmVzZXRQb2xsaW5nTWVjaGFuaXNtIiwicmVzb2x2ZVByb21pc2UiLCJyZWplY3RQcm9taXNlIiwidGltZW91dCIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJvcmRlclN0YXR1cyIsImlzT3JkZXJBcHByb3ZlZCIsIkFwcHJvdmVkIiwiaXNQb2xsaW5nRXJyb3IiLCJQb2xsaW5nRXJyb3IiLCJkZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtIiwicmVpbml0aWFsaXplU3RyYXRlZ3kiLCJwYXlwYWxBbXBzU2RrIiwiZ2V0UGF5cGFsQW1wc1Nka09yVGhyb3ciLCJidXR0b25TdHlsZSIsIm9uSW5pdEJ1dHRvbiIsIm9uQ3JlYXRlT3JkZXIiLCJoYW5kbGVGYWlsdXJlIiwidXNlU3RvcmVDcmVkaXQiLCJnZXRCaWxsaW5nQWRkcmVzc09yVGhyb3ciLCJhcG1GaWVsZHNDb250YWluZXIiLCJhcG1GaWVsZHNTdHlsZXMiLCJmaWVsZENvbnRhaW5lckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwiZmllbGRzT3B0aW9ucyIsImZpZWxkcyIsIlBheW1lbnRGaWVsZHMiLCJ0b1VwcGVyQ2FzZSIsImdhdGV3YXkiLCJIb3N0ZWRGaWVsZFR5cGUiLCJpc0NyZWRpdENhcmRGb3JtRmllbGRzIiwiQ2FyZE51bWJlciIsIkNhcmROYW1lIiwiQ2FyZEV4cGlyeSIsImlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzIiwiQ2FyZE51bWJlclZlcmlmaWNhdGlvbiIsIkNhcmRDb2RlVmVyaWZpY2F0aW9uIiwiQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbiIsIlBheW1lbnRNZXRob2RGYWlsZWRFcnJvciIsIk5vdEluaXRpYWxpemVkRXJyb3JUeXBlIiwiTm90SW5pdGlhbGl6ZWRFcnJvciIsIkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50Tm90SW5pdGlhbGl6ZWQiLCJTaGlwcGluZ05vdEluaXRpYWxpemVkIiwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCIsIlBheW1lbnRJbnZhbGlkRm9ybUVycm9yIiwiZGV0YWlscyIsIlBheVBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3kiLCJwYXlwYWxjb21tZXJjZWNyZWRpdGNhcmRzIiwicGF5cGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbk9wdGlvbnMiLCJmb3JtIiwib25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IiLCJvbkxvYWRDb21wbGV0ZSIsImhvc3RlZEZvcm1PcHRpb25zIiwiaXNDcmVkaXRDYXJkRm9ybSIsImlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtIiwiaGFzVW5kZWZpbmVkVmFsdWVzIiwiaW5pdGlhbGl6ZUZpZWxkcyIsInNob3VsZEluaXRpYWxpemVQYXlQYWxGYXN0bGFuZSIsImluaXRpYWxpemVQYXlQYWxGYXN0bGFuZU9yVGhyb3ciLCJleGVjdXRpb25QYXltZW50RGF0YSIsInZhbGlkYXRlSG9zdGVkRm9ybU9yVGhyb3ciLCJzdWJtaXRIb3N0ZWRGb3JtIiwiZ2V0SW5zdHJ1bWVudFBhcmFtcyIsInJldHVybmVkT3JkZXJJZCIsInN1Ym1pdFBheW1lbnRQYXlsb2FkIiwicmV0dXJuZWRWYXVsdGVkVG9rZW4iLCJjdnZGaWVsZCIsImV4cGlyeUZpZWxkIiwibnVtYmVyRmllbGQiLCJuYW1lRmllbGQiLCJub25jZSIsInZlcmlmaWNhdGlvbl9ub25jZSIsImNhcmRfd2l0aF9vcmRlciIsImZvcm1PcHRpb25zIiwiZXhlY3V0ZUNhbGxiYWNrIiwiZ2V0RXhlY3V0ZUNhbGxiYWNrIiwiY2FyZEZpZWxkc0NvbmZpZyIsImdldElucHV0U3R5bGVzIiwidmF1bHRTZXR1cFRva2VuIiwibGlhYmlsaXR5U2hpZnQiLCJObyIsIlVua25vd24iLCJpbnB1dEV2ZW50cyIsIm9uQ2hhbmdlIiwiZXZlbnQiLCJvbkNoYW5nZUhhbmRsZXIiLCJvbkZvY3VzIiwib25Gb2N1c0hhbmRsZXIiLCJvbkJsdXIiLCJvbkJsdXJIYW5kbGVyIiwib25JbnB1dFN1Ym1pdFJlcXVlc3QiLCJjYXJkRmllbGRzIiwiQ2FyZEZpZWxkcyIsInN0eWxpemVJbnB1dENvbnRhaW5lcnMiLCJyZW5kZXJWYXVsdGVkRmllbGRzIiwiY3JlYXRlVmF1bHRTZXR1cFRva2VuQ2FsbGJhY2siLCJjcmVhdGVPcmRlckNhbGxiYWNrIiwiY3JlYXRlVmF1bHRTZXR1cFRva2VuIiwiZ2V0Q2FyZEZpZWxkc09yVGhyb3ciLCJjYXJkQ29kZSIsImNvbnRhaW5lcklkIiwiQ1ZWRmllbGQiLCJwbGFjZWhvbGRlciIsImNhcmRFeHBpcnkiLCJFeHBpcnlGaWVsZCIsImNhcmROYW1lIiwiTmFtZUZpZWxkIiwiY2FyZE51bWJlciIsIk51bWJlckZpZWxkIiwiY2FyZENvZGVWZXJpZmljYXRpb24iLCJjYXJkRXhwaXJ5VmVyaWZpY2F0aW9uIiwiY2FyZE51bWJlclZlcmlmaWNhdGlvbiIsImdldEZpZWxkVHlwZUJ5RW1pdHRlZEZpZWxkIiwiZW1pdHRlZEJ5IiwiZmllbGRUeXBlIiwibWFwRmllbGRUeXBlIiwic3VibWl0Q29uZmlnIiwic3VibWl0IiwiY2FyZEZpZWxkc1N0YXRlIiwidGhlbiIsInZhbGlkYXRpb25EYXRhIiwiZ2V0VmFsaWRpdHlEYXRhIiwiaXNWYWxpZCIsIm1hcFZhbGlkYXRpb25FcnJvcnMiLCJ1cGRhdGVkRmllbGRzIiwiY2FyZE5hbWVGaWVsZCIsImZpZWxkc0tleXMiLCJldmVyeSIsImZpZWxkc0Vycm9ycyIsImdldEludmFsaWRFcnJvckJ5RmllbGRUeXBlIiwiQ2FyZENvZGUiLCJ2YWxpZGF0aW9uRXJyb3JzIiwiY29tbW9uU3R5bGVzIiwiZGVmYXVsdCIsImZvbnRXZWlnaHQiLCJvdXRsaW5lIiwidmFsdWVzIiwiYm94U2hhZG93IiwiYmFja2dyb3VuZCIsIm1hcmdpbkJvdHRvbSIsIm1hcmdpbkxlZnQiLCJvbkVudGVyIiwicGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJnZXRQYXltZW50UHJvdmlkZXJDdXN0b21lciIsInBheXBhbENvbW1lcmNlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJpc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkIiwiaXNQYXlQYWxDb21tZXJjZUFuYWx5dGljc1YyRW5hYmxlZCIsImNvbm5lY3RDbGllbnRUb2tlbiIsInBheVBhbEZhc3RsYW5lU2RrIiwiUGF5cGFsQ29tbWVyY2VSYXRlcGF5UGF5bWVudFN0cmF0ZWd5IiwicGF5cGFsY29tbWVyY2VyYXRlcGF5IiwibGVnYWxUZXh0Q29udGFpbmVyIiwibG9hZGluZ0NvbnRhaW5lcklkIiwiY3JlYXRlRnJhdWROZXRTY3JpcHQiLCJsb2FkRnJhdWRuZXRDb25maWciLCJyZW5kZXJMZWdhbFRleHQiLCJtZXRhZGF0YUlkIiwiZ3VpZCIsInJhdGVwYXlCaXJ0aERhdGUiLCJyYXRlcGF5UGhvbmVOdW1iZXIiLCJyYXRlcGF5UGhvbmVDb3VudHJ5Q29kZSIsInJhdGVfcGF5IiwiYmlydGhfZGF0ZSIsIm5vcm1hbGl6ZURhdGUiLCJmcmF1ZE5ldFNjcmlwdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmcmF1ZE5ldENvbmZpZyIsImxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQiLCJkYXRlIiwiZm9ybWF0dGVkRGF0ZSIsImZvcm1hdERhdGUiLCJmb3JtYXR0ZWRNb250aCIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJsZWdhbFRleHRDb250YWluZXJFbGVtZW50SWQiLCJsZWdhbFRleHRDb250YWluZXJJZCIsImJ1dHRvbkNvbnRhaW5lcklkIiwiYnV0dG9uQ29udGFpbmVyIiwiYnV0dG9uQ29udGFpbmVyUGFyZW50IiwicGFyZW50Tm9kZSIsInNldEF0dHJpYnV0ZSIsInByZXBlbmQiLCJyYXRlUGF5QnV0dG9uIiwiTGVnYWwiLCJQQVlfVVBPTl9JTlZPSUNFIiwidGVzdE1vZGUiLCJzY3JpcHRFbGVtZW50IiwiZ2VuZXJhdGVHVUlEIiwiZiIsInMiLCJzYW5kYm94IiwiSlNPTiIsInN0cmluZ2lmeSIsImkiLCJNYXRoIiwiZmxvb3IiLCJjaGFyYWN0ZXJzIiwicmFuZG9tIiwic2NyaXB0Iiwic3JjIiwidXNlTWV0YWRhdGEiLCJQb2xsaW5nU3RvcCIsImlzUGF5UGFsRmFzdGxhbmVDdXN0b21lciIsIlBheXBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50U3RyYXRlZ3kiLCJ0aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kIiwic2hvdWxkUnVuQXV0aGVudGljYXRpb25GbG93IiwiaW5pdGlhbGl6ZVBheVBhbFBheW1lbnRDb21wb25lbnQiLCJyZW5kZXJQYXlQYWxQYXltZW50Q29tcG9uZW50IiwiaGFuZGxlUGF5UGFsU3RvcmVkSW5zdHJ1bWVudENoYW5nZSIsIm9yZGVyUmVxdWVzdCIsImlzVmF1bHRlZEZsb3ciLCJpc1BheXBhbEZhc3RsYW5lUmVxdWVzdEVycm9yIiwiaW52YWxpZFJlcXVlc3RFcnJvciIsInRyYW5zbGF0aW9uS2V5IiwicGF5cGFsRmFzdGxhbmVDdXN0b21lciIsInBheXBhbEZhc3RsYW5lU2Vzc2lvbklkIiwidHJpbSIsImNhcmRDb21wb25lbnRPcHRpb25zIiwiY2FyZGhvbGRlck5hbWUiLCJwcmVmaWxsIiwiZW5hYmxlZCIsInBheXBhbENvbXBvbmVudE1ldGhvZHMiLCJGYXN0bGFuZUNhcmRDb21wb25lbnQiLCJnZXRQYXlQYWxDb21wb25lbnRNZXRob2RzT3JUaHJvdyIsImlzM0RTRW5hYmxlZCIsImlzUGF5cGFsQ29tbWVyY2VGYXN0bGFuZVRocmVlRFNBdmFpbGFibGUiLCJpczNkc0VuYWJsZWQiLCJmYXN0bGFuZVRva2VuIiwiZ2V0M0RTTm9uY2UiLCJwYXlwYWxfZmFzdGxhbmVfdG9rZW4iLCJnZXRQYXltZW50VG9rZW4iLCJwYXlwYWxOb25jZSIsImdldE9yZGVyT3JUaHJvdyIsImNoZWNrb3V0VXJsIiwibGlua3MiLCJjaGVja291dExpbmsiLCJ0aHJlZURvbWFpblNlY3VyZUNvbXBvbmVudCIsIlRocmVlRG9tYWluU2VjdXJlQ2xpZW50IiwidGhyZWVEb21haW5TZWN1cmVQYXJhbWV0ZXJzIiwib3JkZXJBbW91bnQiLCJ0b0ZpeGVkIiwidGhyZWVEU1JlcXVlc3RlZCIsInRyYW5zYWN0aW9uQ29udGV4dCIsImV4cGVyaWVuY2VfY29udGV4dCIsImxvY2FsZSIsInJldHVybl91cmwiLCJjYW5jZWxfdXJsIiwiRXJyb3JlZCIsIkNhbmNlbGxlZCIsIlN1Y2NlZWRlZCIsInBheXBhbEF4b1NkayIsInNlbGVjdGlvbkNoYW5nZWQiLCJzZWxlY3RlZENhcmQiLCJwcm9maWxlIiwic2hvd0NhcmRTZWxlY3RvciIsInNlbGVjdGVkSW5zdHJ1bWVudCIsIlBheVBhbENvbW1lcmNlQnV0dG9uU3RyYXRlZ3kiLCJpc0J1eU5vd0Zsb3ciLCJsb2FkRGVmYXVsdENoZWNrb3V0Iiwib25FbGlnaWJpbGl0eUZhaWx1cmUiLCJidXlOb3dGbG93Q2FsbGJhY2tzIiwiYnV5Tm93Q2FydCIsImxvYWRDaGVja291dCIsIlBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uU3RyYXRlZ3kiLCJtZXNzYWdpbmdDb250YWluZXJJZCIsIm1lc3NhZ2luZ0NvbnRhaW5lciIsInJlbW92ZUF0dHJpYnV0ZSIsInBheXBhbE1lc3NhZ2VzU2RrIiwiUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvblN0cmF0ZWd5IiwiZ2V0VmFsaWRWZW5tb0J1dHRvblN0eWxlcyIsInZhbGlkQnV0dG9uU3R5bGUiLCJnb2xkIiwiUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/paypal-commerce.js\n\n}");

/***/ })

}]);
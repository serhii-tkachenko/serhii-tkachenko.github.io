"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["checkout-sdk-js_dist_esm_integrations_braintree_js"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/braintree.js":
/*!*************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/braintree.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBraintreeAchPaymentStrategy: () => (/* binding */ K),\n/* harmony export */   createBraintreeCreditCardPaymentStrategy: () => (/* binding */ et),\n/* harmony export */   createBraintreeFastlaneCustomerStrategy: () => (/* binding */ lt),\n/* harmony export */   createBraintreeFastlanePaymentStrategy: () => (/* binding */ je),\n/* harmony export */   createBraintreeLocalMethodsPaymentStrategy: () => (/* binding */ ze),\n/* harmony export */   createBraintreePaypalButtonStrategy: () => (/* binding */ bt),\n/* harmony export */   createBraintreePaypalCreditButtonStrategy: () => (/* binding */ St),\n/* harmony export */   createBraintreePaypalCreditCustomerStrategy: () => (/* binding */ at),\n/* harmony export */   createBraintreePaypalCustomerStrategy: () => (/* binding */ nt),\n/* harmony export */   createBraintreePaypalPaymentStrategy: () => (/* binding */ be),\n/* harmony export */   createBraintreeVenmoButtonStrategy: () => (/* binding */ Nt),\n/* harmony export */   createBraintreeVenmoPaymentStrategy: () => (/* binding */ $e),\n/* harmony export */   createBraintreeVisaCheckoutButtonStrategy: () => (/* binding */ Ot),\n/* harmony export */   createBraintreeVisaCheckoutCustomerStrategy: () => (/* binding */ yt),\n/* harmony export */   createBraintreeVisaCheckoutPaymentStrategy: () => (/* binding */ He)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _braintree_browser_detection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @braintree/browser-detection */ \"../checkout-sdk-js/node_modules/@braintree/browser-detection/dist/browser-detection.js\");\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"../checkout-sdk-js/node_modules/@bigcommerce/request-sender/esm/index.js\");\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"../checkout-sdk-js/node_modules/@bigcommerce/form-poster/lib/index.js\");\nvar h,y,m;class p extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class g extends p{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}!function(e){e.Sandbox=\"sandbox\",e.Production=\"production\"}(h||(h={})),function(e){e.Client=\"client\",e.DataCollector=\"dataCollector\",e.Fastlane=\"fastlane\",e.GooglePayment=\"googlePayment\",e.HostedFields=\"hostedFields\",e.LocalPayment=\"localPayment\",e.Paypal=\"paypal\",e.PaypalCheckout=\"paypalCheckout\",e.ThreeDSecure=\"threeDSecure\",e.UsBankAccount=\"usBankAccount\",e.Venmo=\"venmo\",e.VisaCheckout=\"visaCheckout\"}(y||(y={})),function(e){e.CardCode=\"cardCode\",e.CardCodeVerification=\"cardCodeVerification\",e.CardExpiry=\"cardExpiry\",e.CardName=\"cardName\",e.CardNumber=\"cardNumber\",e.CardNumberVerification=\"cardNumberVerification\"}(m||(m={}));const v=\"3.128.0\",f=\"3.123.2\",b=\"3.106.0\",w={[b]:{[y.Client]:\"sha384-26BXDNnJI23JYRyFBj4xe4sVNrUSSiSSu11kxVXNM/vEPONm4LuL00w6ZaTgQewt\",[y.PaypalCheckout]:\"sha384-B+vzbZwnQtzWBthpkT4TXKUibO65tyeK7eCxSvpblgprTep2+IAXB2Cxxjrn710O\",[y.Paypal]:\"sha384-uyAGL1/3+XJAHnGoNy4eCoXdzJ4f7Ilzp+6w9PNnEjs6DCCz9WMyJjMN1gzc78U+\",[y.LocalPayment]:\"sha384-LIvOEMkIVEwVuYBdVOQc1AC5YbGGlwyfUheS0ACK218D2STuVYQlZ4FyEPowAEfT\",[y.DataCollector]:\"sha384-1bo9JDz+Kscthc085cCKWur8CLwUoBpoNyxsDi7932mCl0zFq3A5mv+FQLw9GHpV\",[y.UsBankAccount]:\"sha384-xmHBVaU+w74V+OebD3AaPONFxHUGMf+QRs8G/JxVPXNNP7MDa2jL0ICWHIe2tTfJ\",[y.GooglePayment]:\"sha384-WKDJl8mqoP82qZpMGH6AbZxnvXnSW8ILV4M64CyMLiugGMwu7LyP89wjCkHqsiBe\",[y.ThreeDSecure]:\"sha384-VQUlpGHzsGvs5XeiGFip7EXRsvoHWEXDVmgCacfbyieZI9mdBOqq3NSoyo28OCOB\",[y.VisaCheckout]:\"sha384-yx7mADfzTN0T43Q6rlH49LIg1EJ0iUZgBp/EczX9LXsUGkySgxrD+nWHQRBkyfoT\",[y.Venmo]:\"sha384-QX4rPjoj1ZDhuG0aSyKs56lEKDqTMTcjYxUHY1SzO5VZDsqIE2NTkqot7KNSCyov\",[y.HostedFields]:\"sha384-VvYBACfSu0Cr/J32uKmxG7AXcNOJE1AzIIL3kbikyS7YKp5fz5Is+NzNP/lyauNy\",[y.Fastlane]:\"sha384-9oGsZMRZwpGtDEDYa/dFt76dECqj1xAni9gIKgc3KfMIiRnR73nEeeUDLiBzxhFa\"},[f]:{[y.Client]:\"sha384-o+nbQGcwNNxIBeXeu3+XmbSq+Cg8R3EN3N0l5hXCgMMU2RGY0t1z0LroSEIAbfAO\",[y.PaypalCheckout]:\"sha384-WrfbWPBS4mH86GAoycPSgiH8hQ8KH7A67C93Hjhunv/xhNk2YpBn3wbFA4Fhg9U/\",[y.Paypal]:\"sha384-VF389nvvrRUgDsTXMxTYORDtVegB9IQa3Cxr//DyJnLYnz8/X8VCzEvck2c+Megt\",[y.LocalPayment]:\"sha384-tZKx2rEQbfmZpoPSY5VPmJEhaq4X75dLvwHMs3VE9U+C8lPyw+hWTIL1+GPvWCIH\",[y.DataCollector]:\"sha384-E6k3wOpP7syCDDwaRDLF06942Y00NkbwJvWi2OQXwwKzGwG5fd3E7RFUvCCecfvO\",[y.UsBankAccount]:\"sha384-258FON8LZGG0W9Qaz4Jij83pZHu30YnKjJA7gNulLBh6CclkucgF+tHDQuYFRYfW\",[y.GooglePayment]:\"sha384-taJ2p/0+n0VH328POAoBiuEbL3tnHUTE9S42hK1V+Txs3X+QYjZOyKW35JgHRFfO\",[y.ThreeDSecure]:\"sha384-+NSZH4Zj3sO5bdWvPKhU5N16QDxeueTVTnUVeleeESkhLSaz4Ob1hh/5myecc9Ym\",[y.VisaCheckout]:\"sha384-66DiBjghxk1OmBj8aksN8gbQ+CwoQcx1vPfiXUN08g1iQVM+BwewF0p7toM3i7SS\",[y.Venmo]:\"sha384-B5UwY42kE4RoLoWbQ7YpqosUlUad2/DlGWiw0HhoZbSPk30CQAaSA10ohyLDTkDU\",[y.HostedFields]:\"sha384-Aw9EesSaUeWxe36PqEHiOyOyOq8M6CIb1gw7/yHNVPRzGtFXXcd2OQ8qXrIlOj2P\",[y.Fastlane]:\"sha384-rhBL1hpZ71JqG+2TsT0Dih47mbjx8cjJCpeZjk9tw3df1gFMKfCTmMyZunhr7H4Y\"},[v]:{[y.Client]:\"sha384-0WNxksIpRP+fYZiIdr12g6DBUQfLDzYCQJZtR/C8KkcwSGhPHfcFp3tTaGcMyFTq\",[y.PaypalCheckout]:\"sha384-lWM1jk4BOxoDNV6Kop7tVNvQgINlmEVz0c/OwM+HNHK3QC8xqwd54Ovrt2QRDTjh\",[y.Paypal]:\"sha384-fXUmVxC2EMZBDXZ7eTHSTL/LFBrHej/MSXT/vTBXvra4lzgLNGvREAp+x0GYObuH\",[y.LocalPayment]:\"sha384-pha1xGuGSkmZH5x9aqHvRaO4xLea7rmQ/79PFj9zxNzxuFcOWZg7gOP7FibygOEC\",[y.DataCollector]:\"sha384-Q6PI2F9eekWbAxhroybl+aEcvqhdowN/EQlGwBUyJOzPFn9982u9xl6SU6XfGKzc\",[y.UsBankAccount]:\"sha384-W3RLQSKJL1tQ3+Y7mP6tmkamtZ8bV4Yw/XxL9Jj5JtXHraD8loMF8hAIG5m2zK7F\",[y.GooglePayment]:\"sha384-TITQMsFWA3elDNGP2mWz2oKBo4qjt+TlqzovcaPoeBiAh/wPBi6nae50ADdgU1/i\",[y.ThreeDSecure]:\"sha384-YiycYN89ZlL/Evcaq4y1ajW1mhd7JYfZBDuOwHtIn4/Jnm20GL+/XCM+zYAwWD8D\",[y.VisaCheckout]:\"sha384-/OdaTv9qrkKzjObtUe6yzfDhHozFW/+uXlrSl736sOZRJpjGQETvpYXqMFFg69xv\",[y.Venmo]:\"sha384-dA+ojdW9vbJS4JavcXyOs9d5uZHJg5dNtYupoPSH2zsXIiYDVS5amLb/u8qmQ6oz\",[y.HostedFields]:\"sha384-31ZkS58+iaWsW06ftW52zzVZFp43WPd7pNYRiddYynSNg6Oh7WGbSFGorAUH6T1z\",[y.Fastlane]:\"sha384-jlbrwNvL3HvLAUCtLSmrnQ2GH1udCUrRS/bVmReAS5fuIVvcW8Pko/Gkg82tlgtr\"}};var C,S,P,I,O,k,E,T,A=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class z{constructor(e,t,i){this.scriptLoader=e,this.braintreeHostWindow=t,this.braintreeSDKVersionManager=i}loadClient(){return A(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(y.Client,\"client.min.js\")})}loadFastlane(){return A(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(y.Fastlane,\"fastlane.min.js\")})}loadPaypalCheckout(){return A(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(y.PaypalCheckout,\"paypal-checkout.min.js\")})}loadPaypal(){return A(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(y.Paypal,\"paypal.min.js\")})}loadLocalPayment(){return A(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(y.LocalPayment,\"local-payment.min.js\")})}loadDataCollector(){return A(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(y.DataCollector,\"data-collector.min.js\")})}loadUsBankAccount(){return A(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(y.UsBankAccount,\"us-bank-account.min.js\")})}loadGooglePayment(){return A(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(y.GooglePayment,\"google-payment.min.js\")})}load3DS(){return A(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(y.ThreeDSecure,\"three-d-secure.min.js\")})}loadVisaCheckout(){return this.loadBraintreeModuleOrThrow(y.VisaCheckout,\"visa-checkout.min.js\")}loadVenmoCheckout(){return this.loadBraintreeModuleOrThrow(y.Venmo,\"venmo.min.js\")}loadHostedFields(){return A(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(y.HostedFields,\"hosted-fields.min.js\")})}loadVisaCheckoutSdk(e){return A(this,void 0,void 0,function*(){if(this.braintreeHostWindow.V)return this.braintreeHostWindow.V;const t=e?\"sha384-0eu1s1GtqzXlL9DtLgmwzC5WWlEH/ADRM0n38cVQkvtT+W/gey96rcb1LwuUOPDm\":\"sha384-1f1csvP3ZFxg4dILH1GaY4LHlZ0oX7Rk83rxmLlwbnIi4TM0NYzXoev1VoEiVDS6\";return this.scriptLoader.loadScript(`//${e?\"sandbox-\":\"\"}assets.secure.checkout.visa.com/checkout-widget/resources/js/integration/v1/sdk.js`,{async:!0,attributes:{integrity:t,crossorigin:\"anonymous\"}}).then(()=>{if(!this.braintreeHostWindow.V)throw new g;return this.braintreeHostWindow.V})})}loadBraintreeModuleOrThrow(e,t){return A(this,void 0,void 0,function*(){let i=this.getBraintreeModule(e);if(i)return i;const n=this.braintreeSDKVersionManager.getSDKVersion(),r=`//js.braintreegateway.com/web/${n}/js/${t}`,o=n in w?this.getIntegrityValuesByModuleName(e,n):void 0;if(yield this.scriptLoader.loadScript(r,o?{async:!0,attributes:{integrity:o,crossorigin:\"anonymous\"}}:void 0),i=this.getBraintreeModule(e),!i)throw new g;return i})}getBraintreeModule(e){var t;return null===(t=this.braintreeHostWindow.braintree)||void 0===t?void 0:t[e]}getIntegrityValuesByModuleName(e,t){const i=w[t][e];if(!i)throw new Error(\"Unexpected fileName value\");return i}}class N extends p{constructor(e){super(e||\"Unsupported browser error\"),this.name=\"UnsupportedBrowserError\",this.type=\"unsupported_browser\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(C||(C={}));class M extends p{constructor(e){super(function(e){switch(e){case C.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case C.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case C.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case C.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}function D(e){return Boolean(\"object\"==typeof e&&null!==e&&(\"type\"in e||\"message\"in e||\"code\"in e))}!function(e){e.ESTIMATED=\"ESTIMATED\",e.FINAL=\"FINAL\",e.NOT_CURRENTLY_KNOWN=\"NOT_CURRENTLY_KNOWN\"}(S||(S={})),function(e){e.Completed=\"COMPLETED\",e.Pending=\"PENDING\",e.Failed=\"FAILED\"}(P||(P={})),function(e){e.TRUSTLY=\"trustly\"}(I||(I={})),function(e){e.SUCCEEDED=\"succeeded\",e.FAILED=\"failed\",e.CANCELED=\"cancelled\",e.UNRECOGNIZED=\"unrecognized\"}(O||(O={})),function(e){e.Customer=\"CUSTOMER\",e.Merchant=\"MERCHANT\",e.Network=\"NETWORK\",e.Internal=\"INTERNAL\",e.Unknown=\"UNKNOWN\"}(k||(k={})),function(e){e.KountNotEnabled=\"DATA_COLLECTOR_KOUNT_NOT_ENABLED\"}(E||(E={})),function(e){e.Visa=\"visa\",e.Mastercard=\"mastercard\",e.AmericanExpress=\"american-express\",e.DinersClub=\"diners-club\",e.Discover=\"discover\",e.Jcb=\"jcb\",e.UnionPay=\"union-pay\",e.Maestro=\"maestro\",e.Elo=\"elo\",e.Mir=\"mir\",e.Hiper=\"hiper\",e.Hipercard=\"hipercard\"}(T||(T={}));var _=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class B{constructor(e){this.braintreeScriptLoader=e}initialize(e){this.setClientToken(e)}deinitialize(){return _(this,void 0,void 0,function*(){yield this.teardownModule(this.dataCollector),this.dataCollector=void 0})}getClient(){return _(this,void 0,void 0,function*(){if(!this.client){const e=this.getClientTokenOrThrow(),t=yield this.braintreeScriptLoader.loadClient();this.client=yield t.create({authorization:e})}return this.client})}getDataCollectorOrThrow(e){return _(this,void 0,void 0,function*(){const t={deviceData:void 0,teardown:()=>Promise.resolve()};if(!this.dataCollector)try{const t=yield this.getClient(),i=yield this.braintreeScriptLoader.loadDataCollector(),n=Object.assign({client:t,kount:!0},e);this.dataCollector=yield i.create(n)}catch(e){if(D(e)&&e.code===E.KountNotEnabled)return t;throw e}return this.dataCollector})}getBraintreeGooglePayment(){return _(this,void 0,void 0,function*(){if(!this.googlePayment){const[e,t]=yield Promise.all([this.getClient(),this.braintreeScriptLoader.loadGooglePayment()]);this.googlePayment=yield t.create({client:e})}return this.googlePayment})}getBraintreeThreeDS(){return _(this,void 0,void 0,function*(){if(!this.threeDS){const[e,t]=yield Promise.all([this.getClient(),this.braintreeScriptLoader.load3DS()]);this.threeDS=yield t.create({client:e,version:2})}return this.threeDS})}getBraintreeLocalPayment(e){return _(this,void 0,void 0,function*(){if(!this.braintreeLocalPayment){const[t,i]=yield Promise.all([this.getClient(),this.braintreeScriptLoader.loadLocalPayment()]);this.braintreeLocalPayment=yield new Promise((n,r)=>{i.create({client:t,merchantAccountId:e},(e,t)=>{e&&r(e),n(t)})})}return this.braintreeLocalPayment})}getUsBankAccount(){return _(this,void 0,void 0,function*(){if(!this.usBankAccount){const e=yield this.getClient(),t=yield this.braintreeScriptLoader.loadUsBankAccount();this.usBankAccount=yield t.create({client:e})}return this.usBankAccount})}getBraintreeVisaCheckout(){return this.visaCheckout||(this.visaCheckout=Promise.all([this.getClient(),this.braintreeScriptLoader.loadVisaCheckout()]).then(([e,t])=>t.create({client:e}))),this.visaCheckout}getVisaCheckoutSdk(e){return _(this,void 0,void 0,function*(){return this.visaCheckoutSDK||(this.visaCheckoutSDK=yield this.braintreeScriptLoader.loadVisaCheckoutSdk(e)),this.visaCheckoutSDK})}getVenmoCheckoutOrThrow(){return _(this,void 0,void 0,function*(){if(!this.braintreeVenmo){const e=yield this.getClient(),t=yield this.braintreeScriptLoader.loadVenmoCheckout(),i={client:e,allowDesktop:!0,paymentMethodUsage:\"multi_use\"},n=yield t.create(i);if(!n.isBrowserSupported())throw new N;this.braintreeVenmo=n}return this.braintreeVenmo})}setClientToken(e){this.clientToken=e}getClientTokenOrThrow(){if(!this.clientToken)throw new M(C.PaymentNotInitialized);return this.clientToken}teardownModule(e){return e?e.teardown():Promise.resolve()}}function x(e,t,i=!0){var n;return null!==(n=e[t])&&void 0!==n?n:i}class F{constructor(e){this.paymentIntegrationService=e,this.braintreeWindow=window}getSDKVersion(){const e=this.paymentIntegrationService.getState().getStoreConfig(),t=(null==e?void 0:e.checkoutSettings.features)||{};return this.getPreloadedSDKVersion()||(x(t,\"PAYPAL-5809.braintree_hosted_fields_fix_version\")?v:x(t,\"PAYPAL-5636.update_braintree_sdk_version\")?f:b)}getPreloadedSDKVersion(){const e=this.braintreeWindow.braintree;if(e){const i=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.find)(Object.values(e),e=>!!e.VERSION);return null==i?void 0:i.VERSION}}}function L(e,t){return console.log(\"resolveIds\",t),Object.assign(e,{resolveIds:t})}class V extends p{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}var j;!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(j||(j={}));class U extends p{constructor(e){super(function(e){switch(e){case j.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case j.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case j.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case j.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case j.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case j.MissingCheckoutConfig:case j.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case j.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case j.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case j.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case j.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case j.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case j.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class R extends V{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}function H(e){return Boolean(e.instrumentId)}class W extends p{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}function q(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}class $ extends p{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}function G(e){return!!e&&\"accountNumber\"in e&&\"routingNumber\"in e&&\"ownershipType\"in e&&\"accountType\"in e}var Y=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class J{constructor(e,t){this.paymentIntegrationService=e,this.braintreeSdk=t}initialize(e){return Y(this,void 0,void 0,function*(){const{methodId:t,braintreeach:i}=e||{};if(!t)throw new V('Unable to initialize payment because \"options.methodId\" argument is not provided.');this.getMandateText=null==i?void 0:i.getMandateText,yield this.paymentIntegrationService.loadPaymentMethod(t);const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{clientToken:r,initializationData:o}=n;if(!r||!o)throw new U(j.MissingPaymentMethod);this.braintreeSdk.initialize(r);try{this.usBankAccount=yield this.braintreeSdk.getUsBankAccount()}catch(e){this.handleBraintreeError(e)}})}execute(e,t){return Y(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"payment\"]);if(!i)throw new R([\"payment\"]);const r=H(i.paymentData||{}),o=r?yield this.tokenizePaymentForVaultedInstrument(i):yield this.tokenizePayment(i),a=r?yield this.preparePaymentDataForVaultedInstrument(o,i):yield this.preparePaymentData(o,i);yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment(a)})}finalize(){return Promise.reject(new W)}deinitialize(){return Y(this,void 0,void 0,function*(){return yield this.braintreeSdk.deinitialize(),Promise.resolve()})}tokenizePayment({paymentData:e}){return Y(this,void 0,void 0,function*(){const t=this.getUsBankAccountOrThrow();if(!G(e))throw new R([\"payment.paymentData\"]);const i=H(e)?\"The data are used for stored instrument verification\":\"function\"==typeof this.getMandateText&&this.getMandateText();if(!i)throw new V(\"Unable to proceed because getMandateText is not provided or returned undefined value.\");try{const{nonce:n}=yield t.tokenize({bankDetails:this.getBankDetails(e),mandateText:i});return n}catch(e){this.handleBraintreeError(e)}})}tokenizePaymentForVaultedInstrument(e){return Y(this,void 0,void 0,function*(){const{methodId:t,paymentData:i={}}=e,n=this.paymentIntegrationService.getState(),{config:r}=n.getPaymentMethodOrThrow(t);if(!r.isVaultingEnabled)throw new V(\"Vaulting is disabled but a vaulted instrument was being used for this transaction\");return G(i)?this.tokenizePayment(e):null})}preparePaymentData(e,t){return Y(this,void 0,void 0,function*(){const{methodId:i,paymentData:n={}}=t;if(!G(n))throw new R([\"payment.paymentData\"]);const{deviceData:r}=yield this.braintreeSdk.getDataCollectorOrThrow(),{shouldSaveInstrument:o,shouldSetAsDefaultInstrument:a,routingNumber:s,accountNumber:d}=n;return{methodId:i,paymentData:{deviceSessionId:r,shouldSetAsDefaultInstrument:a,shouldSaveInstrument:o,formattedPayload:{tokenized_bank_account:{issuer:s,masked_account_number:d.substr(-4),token:e}}}}})}preparePaymentDataForVaultedInstrument(e,t){return Y(this,void 0,void 0,function*(){const{methodId:i,paymentData:n={}}=t;if(!H(n)||!q(n))throw new R([\"payment.paymentData\"]);const{deviceData:r}=yield this.braintreeSdk.getDataCollectorOrThrow(),{instrumentId:o,shouldSetAsDefaultInstrument:a}=n;return{methodId:i,paymentData:Object.assign({deviceSessionId:r,instrumentId:o,shouldSetAsDefaultInstrument:a},e&&{nonce:e})}})}getBankDetails(e){const t=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),i=e.ownershipType.toLowerCase(),n=e.accountType.toLowerCase();return Object.assign(Object.assign({accountNumber:e.accountNumber,routingNumber:e.routingNumber,ownershipType:i},\"personal\"===i?{firstName:e.firstName,lastName:e.lastName}:{businessName:e.businessName}),{accountType:n,billingAddress:{streetAddress:t.address1,extendedAddress:t.address2,locality:t.city,region:t.stateOrProvinceCode,postalCode:t.postalCode}})}getUsBankAccountOrThrow(){if(!this.usBankAccount)throw new M(C.PaymentNotInitialized);return this.usBankAccount}handleBraintreeError(e){if(!D(e))throw e;throw new $(e.message)}}const K=L(t=>new J(t,(t=>{const i=new F(t),n=new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),window,i);return new B(n)})(t)),[{id:\"braintreeach\"}]);class X extends p{constructor(e,t){super(t||\"Unable to proceed because the payment form contains invalid data.\"),this.details=e,this.name=\"PaymentInvalidFormError\",this.type=\"payment_invalid_form\"}}class Q extends p{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}class Z{constructor(e){const t=new Promise((e,t)=>{this.cancel=t});this.promise=Promise.race([e,t])}}const ee=[\"buttons\",\"messages\"];var te,ie,ne,re,oe,ae;!function(e){e.HORIZONTAL=\"horizontal\",e.VERTICAL=\"vertical\"}(te||(te={})),function(e){e.SMALL=\"small\",e.MEDIUM=\"medium\",e.LARGE=\"large\",e.RESPONSIVE=\"responsive\"}(ie||(ie={})),function(e){e.GOLD=\"gold\",e.BLUE=\"blue\",e.SIlVER=\"silver\",e.BLACK=\"black\",e.WHITE=\"white\"}(ne||(ne={})),function(e){e.CHECKOUT=\"checkout\",e.PAY=\"pay\",e.BUYNOW=\"buynow\",e.PAYPAL=\"paypal\",e.CREDIT=\"credit\"}(re||(re={})),function(e){e.PILL=\"pill\",e.RECT=\"rect\"}(oe||(oe={})),function(e){e.CART=\"cart\",e.HOME=\"homepage\",e.PAYMENT=\"payment\",e.PRODUCT=\"product\"}(ae||(ae={}));var se=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class de{constructor(e,t,i){this.braintreeScriptLoader=e,this.braintreeHostWindow=t,this.overlay=i,this.dataCollectors={}}initialize(e,t){this.clientToken=e,this.threeDSecureOptions=t}getBraintreeFastlane(e,t,i){return se(this,void 0,void 0,function*(){if(t&&(window.localStorage.setItem(\"axoEnv\",\"sandbox\"),window.localStorage.setItem(\"fastlaneEnv\",\"sandbox\")),!this.braintreeHostWindow.braintreeFastlane){const t=this.getClientTokenOrThrow(),n=yield this.getClient(),r=yield this.getSessionId(e),o=yield this.braintreeScriptLoader.loadFastlane(),a={root:{backgroundColorPrimary:\"transparent\"}};this.braintreeHostWindow.braintreeFastlane=yield o.create({authorization:t,client:n,deviceData:r,styles:i||a})}return this.braintreeHostWindow.braintreeFastlane})}getClient(){return se(this,void 0,void 0,function*(){if(!this.client){const e=this.getClientTokenOrThrow(),t=yield this.braintreeScriptLoader.loadClient();this.client=t.create({authorization:e})}return this.client})}getPaypal(){return this.braintreePaypal||(this.braintreePaypal=Promise.all([this.getClient(),this.braintreeScriptLoader.loadPaypal()]).then(([e,t])=>t.create({client:e}))),this.braintreePaypal}paypal(e){var{shouldSaveInstrument:t}=e,i=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"shouldSaveInstrument\"]);const n=(0,_braintree_browser_detection__WEBPACK_IMPORTED_MODULE_2__.supportsPopups)();return this.getPaypal().then(e=>{var r;return n&&(null===(r=this.overlay)||void 0===r||r.show({onClick:()=>e.focusWindow()})),e.tokenize(Object.assign({enableShippingAddress:!0,flow:t?\"vault\":\"checkout\",useraction:\"commit\"},i))}).then(e=>{var t;return null===(t=this.overlay)||void 0===t||t.remove(),e}).catch(e=>{var t;throw null===(t=this.overlay)||void 0===t||t.remove(),e})}getPaypalCheckout(e,t,i){return se(this,void 0,void 0,function*(){const n=yield this.getClient(),r=yield this.braintreeScriptLoader.loadPaypalCheckout(),o={client:n};return this.paypalCheckout=yield r.create(o,(n,r)=>{var o;if(n)return i(n);const a=Object.assign(Object.assign({currency:e.currency},e.isCreditEnabled&&{\"enable-funding\":\"paylater\"}),{components:ee.toString(),intent:e.intent,commit:null===(o=e.commit)||void 0===o||o});this.braintreeHostWindow.paypal?t(r):r.loadPayPalSDK(a,()=>t(r))}),this.paypalCheckout})}getDataCollector(e){return se(this,void 0,void 0,function*(){const t=(null==e?void 0:e.paypal)?\"paypal\":\"default\";let i=this.dataCollectors[t];if(!i){try{const t=yield this.getClient(),n=yield this.braintreeScriptLoader.loadDataCollector(),r=Object.assign({client:t,kount:!0},e);i=yield n.create(r)}catch(e){if(!D(e)||\"DATA_COLLECTOR_KOUNT_NOT_ENABLED\"!==e.code)throw e;i={deviceData:void 0,teardown:()=>Promise.resolve()}}this.dataCollectors[t]=i}return i})}getBraintreeEnv(e=!1){return e?h.Sandbox:h.Production}mapToBraintreeShippingAddressOverride(e){return{recipientName:`${e.firstName} ${e.lastName}`,line1:e.address1,line2:e.address2,city:e.city,state:e.stateOrProvinceCode,postalCode:e.postalCode,countryCode:e.countryCode,phone:e.phone}}mapToLegacyShippingAddress(e){const{email:t,phone:i,shippingAddress:n}=e,r=(null==n?void 0:n.recipientName)||\"\",[o,a]=r.split(\" \");return{email:t,first_name:o||\"\",last_name:a||\"\",phone_number:i,address_line_1:null==n?void 0:n.line1,address_line_2:null==n?void 0:n.line2,city:null==n?void 0:n.city,state:null==n?void 0:n.state,country_code:null==n?void 0:n.countryCode,postal_code:null==n?void 0:n.postalCode}}mapToLegacyBillingAddress(e){const{billingAddress:t,email:i,firstName:n,lastName:r,phone:o,shippingAddress:a}=e,s=t||a;return{email:i,first_name:n,last_name:r,phone_number:o,address_line_1:null==s?void 0:s.line1,address_line_2:null==s?void 0:s.line2,city:null==s?void 0:s.city,state:null==s?void 0:s.state,country_code:null==s?void 0:s.countryCode,postal_code:null==s?void 0:s.postalCode}}removeElement(e){const t=e&&document.getElementById(e);t&&t.remove()}getSessionId(e){return se(this,void 0,void 0,function*(){const{deviceData:t}=yield this.getDataCollector({riskCorrelationId:e});return t})}teardown(){return se(this,void 0,void 0,function*(){yield this.teardownModule(this.dataCollectors.default),yield this.teardownModule(this.dataCollectors.paypal),this.dataCollectors={},yield this.teardownModule(this.paypalCheckout),this.paypalCheckout=void 0})}get3DS(){return se(this,void 0,void 0,function*(){return this.threeDS||(this.threeDS=Promise.all([this.getClient(),this.braintreeScriptLoader.load3DS()]).then(([e,t])=>t.create({client:e,version:2}))),this.threeDS})}getVenmoCheckout(e){return se(this,void 0,void 0,function*(){if(!this.venmoCheckout){const t=yield this.getClient(),i=yield this.braintreeScriptLoader.loadVenmoCheckout(),n=Object.assign({client:t,allowDesktop:!0,paymentMethodUsage:\"multi_use\"},e||{});this.venmoCheckout=yield new Promise((e,t)=>{i.create(n,(i,n)=>i?t(i):n.isBrowserSupported()?void e(n):t(new N))})}return this.venmoCheckout})}verifyCard(e,t,i){return se(this,void 0,void 0,function*(){const n=yield this.tokenizeCard(e,t);return this.challenge3DSVerification(n,i)})}tokenizeCard(e,t){return se(this,void 0,void 0,function*(){const{paymentData:n}=e;if(!function(e){if(\"object\"!=typeof e||null===e)return!1;const t=e;return\"object\"==typeof t.ccExpiry&&null!==t.ccExpiry&&\"string\"==typeof t.ccNumber&&\"string\"==typeof t.ccName}(n))throw new R([\"payment.paymentData\"]);const r=this.getErrorsRequiredFields(n);if(!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.isEmpty)(r))throw new X(r);const o=this.mapToCreditCard(n,t),a=yield this.getClient(),{creditCards:s}=yield a.request(o);return{nonce:s[0].nonce,bin:s[0].details.bin}})}challenge3DSVerification(e,t){return se(this,void 0,void 0,function*(){const i=yield this.get3DS();return this.present3DSChallenge(i,t,e)})}teardownModule(e){return e?e.teardown():Promise.resolve()}getClientTokenOrThrow(){if(!this.clientToken)throw new M(C.PaymentNotInitialized);return this.clientToken}getErrorsRequiredFields(e){const{ccNumber:t,ccExpiry:i}=e,n={};return t||(n.ccNumber=[{message:\"Credit card number is required\",type:\"required\"}]),i||(n.ccExpiry=[{message:\"Expiration date is required\",type:\"required\"}]),n}mapToCreditCard(e,t){return{data:{creditCard:{cardholderName:e.ccName,number:e.ccNumber,cvv:e.ccCvv,expirationDate:`${e.ccExpiry.month}/${e.ccExpiry.year}`,options:{validate:!1},billingAddress:t&&{countryCodeAlpha2:t.countryCode,locality:t.city,countryName:t.country,postalCode:t.postalCode,streetAddress:t.address2?`${t.address1} ${t.address2}`:t.address1}}},endpoint:\"payment_methods/credit_cards\",method:\"post\"}}present3DSChallenge(e,t,i){const{nonce:n,bin:r}=i;if(!this.threeDSecureOptions||!n)throw new M(C.PaymentNotInitialized);const{addFrame:o,removeFrame:a,challengeRequested:s=!0,additionalInformation:d}=this.threeDSecureOptions,l=()=>se(this,void 0,void 0,function*(){const t=yield e.cancelVerifyCard();return u.cancel(new Q),t}),c=t.toFixed(2),u=new Z(e.verifyCard({addFrame:(e,t)=>{o&&o(e,t,l)},amount:Number(c),bin:r,challengeRequested:s,nonce:n,removeFrame:a,onLookupComplete:(e,t)=>{t()},collectDeviceData:!0,additionalInformation:d}));return u.promise}}class le{constructor(e){this.paymentIntegrationService=e,this.braintreeHostWindow=window}render(e,t,i){const n=t&&document.getElementById(t);if(this.braintreeHostWindow.paypal&&n){const r=this.paymentIntegrationService.getState(),o=r.getCartOrThrow(),a=r.getBillingAddressOrThrow(),s=r.getPaymentMethodOrThrow(e);if(!s.initializationData)return;const{paypalBNPLConfiguration:d=[]}=s.initializationData,l=i===ae.PAYMENT?\"checkout\":i,c=d&&d.find(({id:e})=>e===l);if(!c||!c.status)return;i===ae.CART&&(n.removeAttribute(\"data-pp-style-logo-type\"),n.removeAttribute(\"data-pp-style-logo-position\"),n.removeAttribute(\"data-pp-style-text-color\"),n.removeAttribute(\"data-pp-style-text-size\")),this.braintreeHostWindow.paypal.Messages({amount:o.cartAmount,buyerCountry:a.countryCode,placement:i,style:this.getPaypalMessagesStylesFromBNPLConfig(c)}).render(`#${t}`)}}getPaypalMessagesStylesFromBNPLConfig({styles:e}){const t={};return e.color&&(t.color=e.color),e.layout&&(t.layout=e.layout),(e[\"logo-type\"]||e[\"logo-position\"])&&(t.logo={},e[\"logo-type\"]&&(t.logo.type=e[\"logo-type\"]),e[\"logo-position\"]&&(t.logo.position=e[\"logo-position\"])),e.ratio&&(t.ratio=e.ratio),(e[\"text-color\"]||e[\"text-size\"])&&(t.text={},e[\"text-color\"]&&(t.text.color=e[\"text-color\"]),e[\"text-size\"]&&(t.text.size=+e[\"text-size\"])),t}}class ce{constructor(e){const{element:t,closeElement:i,mainElement:n}=this._createElements(e);this._element=t,this._closeElement=i,this._mainElement=n}show(e){this._mainElement.parentElement||(this._registerClick(e),document.body.appendChild(this._mainElement),setTimeout(()=>this._element.style.opacity=\"1\"))}remove(){this._mainElement.parentElement&&(this._unregisterClick&&this._unregisterClick(),this._removeAfterTransition(),setTimeout(()=>this._element.style.opacity=\"0\"))}_createElements(e){const t=document.createElement(\"div\"),{background:i=\"rgba(0, 0, 0, 0.8)\",id:n=\"checkoutOverlay\",transitionDuration:r=400,hasCloseButton:o=!1,innerHtml:a=null}=e||{};let s,d,l,c,u=t;if(n&&(t.id=n),a){const e=document.createElement(\"div\");c=`${n}--overlayText`,e.className=c,e.appendChild(a),t.appendChild(e)}return o&&(l=`${n}--close`,s=document.createElement(\"div\"),s.className=l,d=`${n}--layout`,u=document.createElement(\"div\"),u.className=d,u.appendChild(t),u.appendChild(s)),u.appendChild(function(e){const{id:t,background:i,transitionDuration:n,classLayout:r,classOverlayText:o,classClose:a}=e,s=document.createElement(\"style\"),d=r?`, .${r}`:\"\";return s.id=`${t}--styles`,s.type=\"text/css\",s.innerText=`\\n        #${t}${d} {\\n            display: block;\\n            height: 100%;\\n            width: 100%;\\n            left: 0;\\n            top: 0;\\n            position: fixed;\\n            z-index: 2147483647;\\n        }\\n        #${t} {\\n            transition: opacity ${n}ms ease-out;\\n            background: ${i};\\n            opacity: 0;\\n        }\\n    `,o&&(s.innerText+=`\\n             #${t} {\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n             }\\n             #${t} .${o} {\\n                color: white;\\n                max-width: 330px;\\n                font-size: 1.2em;\\n                text-align: center;\\n             }\\n        `),a&&(s.innerText+=`\\n            #${t} {\\n                opacity: 1;\\n            }\\n            .${r} .${a} {\\n                position: fixed;\\n                right: 16px;\\n                top: 16px;\\n                width: 16px;\\n                height: 16px;\\n                opacity: 0.6;\\n                cursor: pointer;\\n                z-index: 3147483647;\\n            }\\n            .${r} .${a}::after, .${r} .${a}::before {\\n                position: absolute;\\n                left: 8px;\\n                content: '';\\n                height: 16px;\\n                width: 2px;\\n                background-color: #fff;\\n            }\\n            .${r} .${a}::after {\\n                transform: rotate(-45deg);\\n            }\\n            .${r} .${a}::before {\\n                transform: rotate(45deg);\\n            }\\n        `),s}({id:n,background:i,transitionDuration:r,classLayout:d,classOverlayText:c,classClose:l})),{element:t,closeElement:s,mainElement:u}}_addEventListener(e,t){e&&t&&e.addEventListener(\"click\",t)}_removeEventListener(e,t){e&&t&&e.removeEventListener(\"click\",t)}_registerClick(e){if(this._unregisterClick&&this._unregisterClick(),e){const{onClick:t,onClickClose:i}=e;this._addEventListener(this._element,t),this._addEventListener(this._closeElement,i),this._unregisterClick=()=>{this._removeEventListener(this._element,t),this._removeEventListener(this._closeElement,i),this._unregisterClick=void 0}}}_removeAfterTransition(){const e=t=>{\"opacity\"===t.propertyName&&(this._mainElement.parentElement&&this._mainElement.remove(),this._element.removeEventListener(\"transitionend\",e))};this._element.addEventListener(\"transitionend\",e)}}const ue={size:70,color:\"#d9d9d9\",backgroundColor:\"#ffffff\"},he=\"embedded-checkout-loading-indicator-rotation\";class ye{constructor(e){this.styles=Object.assign(Object.assign({},ue),e&&e.styles),this.containerStyles=Object.assign({},e&&e.containerStyles),this.defineAnimation(),this.container=this.buildContainer(),this.indicator=this.buildIndicator(),this.container.appendChild(this.indicator)}show(e){if(e){const t=document.getElementById(e);if(!t)throw new Error(\"Unable to attach the loading indicator because the parent ID is not valid.\");t.appendChild(this.container)}this.container.style.visibility=\"visible\",this.container.style.opacity=\"1\"}hide(){const e=()=>{this.container.style.visibility=\"hidden\",this.container.removeEventListener(\"transitionend\",e)};this.container.addEventListener(\"transitionend\",e),this.container.style.opacity=\"0\"}buildContainer(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.bottom=\"0\",e.style.left=\"0\",e.style.height=\"100%\",e.style.width=\"100%\",e.style.position=\"absolute\",e.style.right=\"0\",e.style.top=\"0\",e.style.transition=\"all 250ms ease-out\",e.style.opacity=\"0\",this.setStyleAttribute(e,this.containerStyles),e}buildIndicator(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.width=`${this.styles.size}px`,e.style.height=`${this.styles.size}px`,e.style.borderRadius=`${this.styles.size}px`,e.style.border=\"solid 1px\",e.style.borderColor=`${this.styles.backgroundColor} ${this.styles.backgroundColor} ${this.styles.color} ${this.styles.color}`,e.style.margin=\"0 auto\",e.style.position=\"absolute\",e.style.left=\"0\",e.style.right=\"0\",e.style.top=\"50%\",e.style.transform=\"translateY(-50%) rotate(0deg)\",e.style.transformStyle=\"preserve-3d\",e.style.animation=`${he} 500ms infinite cubic-bezier(0.69, 0.31, 0.56, 0.83)`,e}setStyleAttribute(e,t){Object.keys(t).forEach(i=>{e.style.setProperty(i,t[i])})}defineAnimation(){var e;if(document.getElementById(he))return;const t=document.createElement(\"style\");t.id=he,null===(e=document.head)||void 0===e||e.appendChild(t),t.sheet instanceof CSSStyleSheet&&t.sheet.insertRule(`\\n                @keyframes ${he} {\\n                    0% { transform: translateY(-50%) rotate(0deg); }\\n                    100% { transform: translateY(-50%) rotate(360deg); }\\n                }\\n            `,0)}}const me={\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"};function pe(e){return\"object\"==typeof e&&null!==e&&\"name\"in e&&\"BraintreeError\"===e.name}function ge(e){return{recipientName:`${e.firstName} ${e.lastName}`,line1:e.address1,line2:e.address2,city:e.city,state:e.stateOrProvinceCode,postalCode:e.postalCode,countryCode:e.countryCode,phone:e.phone}}var ve=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class fe{constructor(e,t,i,n){this.paymentIntegrationService=e,this.braintreeIntegrationService=t,this.braintreeMessages=i,this.loadingIndicator=n,this.braintreeHostWindow=window}initialize(e){return ve(this,void 0,void 0,function*(){const{braintree:t,methodId:i}=e;if(this.braintree=t,this.paymentMethod&&this.paymentMethod.nonce||(this.paymentMethod=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i)),this.paymentMethod.clientToken&&(null==t?void 0:t.bannerContainerId))return yield this.loadPaypal(),this.loadPaypalCheckoutInstance();if(this.paymentMethod.clientToken)return this.loadPaypal();const n=yield this.paymentIntegrationService.loadPaymentMethod(i);if(this.paymentMethod=n.getPaymentMethodOrThrow(i),null==t?void 0:t.bannerContainerId)return this.loadPaypalCheckoutInstance();if(!this.paymentMethod.clientToken)throw new U(j.MissingPaymentMethod);return this.loadPaypal()})}execute(e,t){var i;return ve(this,void 0,void 0,function*(){const{payment:n}=e,r=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"payment\"]),{onError:o}=this.braintree||{};if(!n)throw new R([\"payment\"]);try{const e=yield this.preparePaymentData(n,r.useStoreCredit);yield this.paymentIntegrationService.submitOrder(r,t),yield this.paymentIntegrationService.submitPayment(e)}catch(e){this.isProviderError(e)&&(yield this.loadPaypal(),null===(i=this.paypalButtonRender)||void 0===i||i.close(),yield this.loadPaypalCheckoutInstance(),yield new Promise((e,t)=>{o&&\"function\"==typeof o&&o(new Error(\"INSTRUMENT_DECLINED\")),t()})),this.handleError(e)}})}finalize(){return Promise.reject(new W)}deinitialize(){var e;return this.braintreeTokenizePayload=void 0,null===(e=this.paypalButtonRender)||void 0===e||e.close(),this.braintreeIntegrationService.teardown()}preparePaymentData(e,t){var i;return ve(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState(),r=n.getOutstandingBalance(t),o=n.getStoreConfig();if(!r)throw new U(j.MissingCheckout);if(!o)throw new U(j.MissingCheckoutConfig);if(!this.paymentMethod)throw new M(C.PaymentNotInitialized);const{currency:a,storeProfile:{storeLanguage:s}}=o,{nonce:d,config:{isVaultingEnabled:l}}=this.paymentMethod,{methodId:c,paymentData:u={}}=e,h=(null===(i=this.braintreeTokenizePayload)||void 0===i?void 0:i.nonce)||d;if(h){const t=yield this.paymentIntegrationService.loadPaymentMethod(c);return this.paymentMethod=t.getPaymentMethod(c),Object.assign(Object.assign({},e),{paymentData:this.formattedPayload(h)})}if(H(u)||(y=u,Boolean(y.instrumentId)&&!Object.prototype.hasOwnProperty.call(y,\"ccNumber\")&&!Object.prototype.hasOwnProperty.call(y,\"ccCvv\"))){if(!l)throw new V(\"Vaulting is disabled but a vaulted instrument was being used for this transaction\");return Promise.resolve(e)}var y;if(!q(u))throw new U(j.MissingPayment);const{shouldSaveInstrument:m,shouldSetAsDefaultInstrument:p}=u;if(m&&!l)throw new V(\"Vaulting is disabled but shouldSaveInstrument is set to true\");const g=n.getShippingAddress(),v=g?ge(g):void 0;return Promise.all([this.braintreeIntegrationService.paypal({amount:r,locale:s,currency:a.code,offerCredit:\"braintreepaypalcredit\"===this.paymentMethod.id,shippingAddressOverride:v,shouldSaveInstrument:m||!1,shippingAddressEditable:!1}),this.braintreeIntegrationService.getSessionId()]).then(([{nonce:t,details:i}={},n])=>Object.assign(Object.assign({},e),{paymentData:this.formattedPayload(t,i&&i.email,n,m,p)}))})}formattedPayload(e,t,i,n,r){return{formattedPayload:{vault_payment_instrument:n||null,set_as_default_stored_instrument:r||null,device_info:i||null,paypal_account:{token:e,email:t||null}}}}loadPaypalCheckoutInstance(){return ve(this,void 0,void 0,function*(){const{clientToken:e,initializationData:t,id:i}=this.paymentMethod||{};if(!e)throw new U(j.MissingPaymentMethod);try{this.braintreeIntegrationService.initialize(e);const n={currency:this.paymentIntegrationService.getState().getCartOrThrow().currency.code,intent:null==t?void 0:t.intent,isCreditEnabled:null==t?void 0:t.isCreditEnabled},r=\"braintreepaypalcredit\"===i||!(null==t?void 0:t.isCreditEnabled);yield this.braintreeIntegrationService.getPaypalCheckout(n,e=>{var t;r&&i&&(null===(t=this.braintree)||void 0===t?void 0:t.bannerContainerId)&&this.renderPayPalMessages(i,this.braintree.bannerContainerId),this.renderPayPalButton(e)},this.handleError)}catch(e){this.handleError(e)}})}renderPayPalMessages(e,t){this.braintreeMessages.render(e,t,ae.PAYMENT)}renderPayPalButton(e){const{onPaymentError:t,submitForm:i,onRenderButton:n,containerId:r,onError:o}=this.braintree||{};if(!r)return;if(!this.paymentMethod)throw new M(C.PaymentNotInitialized);this.loadingIndicatorContainer=r.split(\"#\")[1];const{id:a,config:{testMode:s}}=this.paymentMethod,{paypal:d}=this.braintreeHostWindow,l=null==d?void 0:d.FUNDING.PAYPAL;d&&l?(this.paypalButtonRender=d.Buttons({env:s?\"sandbox\":\"production\",commit:!1,fundingSource:l,onClick:()=>{this.toggleLoadingIndicator(!0)},createOrder:()=>this.setupPayment(e,a,t),onApprove:t=>ve(this,void 0,void 0,function*(){this.braintreeTokenizePayload=yield this.tokenizePaymentOrThrow(t,e),i&&\"function\"==typeof i&&i()}),onCancel:()=>{this.toggleLoadingIndicator(!1)},onError:e=>{this.toggleLoadingIndicator(!1),null==o||o(e)}}),n&&\"function\"==typeof n&&n(),this.paypalButtonRender.isEligible()&&this.paypalButtonRender.render(`${r}`)):this.removeElement(r.split(\"#\")[1])}setupPayment(e,t,i){return ve(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState();try{const i=n.getCustomer(),r=n.getPaymentMethodOrThrow(t),o=n.getCheckoutOrThrow().outstandingBalance,a=n.getStoreConfigOrThrow().currency.code,s=n.getShippingAddress()||(null==i?void 0:i.addresses[0]),d=s?ge(s):void 0;return yield e.createPayment({flow:\"checkout\",enableShippingAddress:!0,shippingAddressEditable:!1,shippingAddressOverride:d,amount:o,currency:a,offerCredit:!1,intent:r.initializationData.intent})}catch(e){throw i&&(pe(e)||e instanceof p)&&i(e),e}})}tokenizePaymentOrThrow(e,t,i){return ve(this,void 0,void 0,function*(){try{return yield t.tokenizePayment(e)}catch(e){throw i&&(pe(e)||e instanceof p)&&i(e),e}})}loadPaypal(){return ve(this,void 0,void 0,function*(){const{clientToken:e,initializationData:t}=this.paymentMethod||{};if(!e||!t)throw new U(j.MissingPaymentMethod);try{this.braintreeIntegrationService.initialize(e),yield this.braintreeIntegrationService.getPaypal()}catch(e){this.handleError(e)}return Promise.resolve()})}handleError(e){if(!pe(e))throw e;if(\"PAYPAL_POPUP_CLOSED\"===e.code)throw new Q(e.message);throw new $(e.message)}isProviderError(e){var t,i,n;return!!function(e){return\"object\"==typeof e&&null!==e&&\"errors\"in e}(e)&&\"2046\"===(null===(n=null===(i=((null===(t=null==e?void 0:e.errors)||void 0===t?void 0:t.filter(e=>e.provider_error))||[])[0])||void 0===i?void 0:i.provider_error)||void 0===n?void 0:n.code)}removeElement(e){const t=e&&document.getElementById(e);t&&t.remove()}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const be=L(t=>{const i=window,n=new ce,r=new F(t),o=new de(new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),i,r),i,n),a=new le(t);return new fe(t,o,a,new ye({containerStyles:me}))},[{id:\"braintreepaypal\"},{id:\"braintreepaypalcredit\"}]);var we;!function(e){e.Json=\"application/json\",e.JsonV1=\"application/vnd.bc.v1+json\"}(we||(we={}));const Ce=we,Se={\"X-Checkout-SDK-Version\":\"1.820.0\"};class Pe{constructor(e){this.requestSender=e}getOrderStatus(e=\"braintreelocalmethods\",t){return i=this,n=void 0,o=function*(){const i=`/api/storefront/initialization/${e}`,n=Object.assign({\"X-API-INTERNAL\":\"This API endpoint is for internal use only and may change in the future\",\"Content-Type\":Ce.Json},Se);return(yield this.requestSender.get(i,Object.assign({headers:n},t))).body},new((r=void 0)||(r=Promise))(function(e,t){function a(e){try{d(o.next(e))}catch(e){t(e)}}function s(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r(function(e){e(i)})).then(a,s)}d((o=o.apply(i,n||[])).next())});// removed by dead control flow\n var i, n, r, o; }}const Ie={body:{},headers:{},status:0};class Oe extends p{constructor(e,{message:t,errors:i}={}){const{body:n,headers:r,status:o}=e||Ie;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=n,this.headers=r,this.status=o,this.errors=i||[]}}class ke extends Oe{constructor(e){super(e,{message:\"There is a problem processing your payment. Please try again later.\"}),this.name=\"PaymentMethodInvalidError\",this.type=\"payment_method_invalid\"}}class Ee extends Oe{constructor(e){super(e,{message:\"The request has timed out or aborted.\"}),this.name=\"TimeoutError\",this.type=\"timeout\"}}var Te=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ae{constructor(e,t,i,n,r=3e3,a=3e5){this.paymentIntegrationService=e,this.braintreeSdk=t,this.braintreeRequestSender=i,this.loadingIndicator=n,this.pollingInterval=r,this.maxPollingIntervalTime=a,this.isLPMsUpdateExperimentEnabled=!1,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_1__.noop,this.isPollingEnabled=!1}initialize(e){return Te(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,braintreelocalmethods:n}=e;if(this.gatewayId=t,!i)throw new V('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new V('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!n)throw new V('Unable to initialize payment because \"options.braintreelocalmethods\" argument is not provided.');this.braintreelocalmethods=n,this.loadingIndicatorContainer=n.container.split(\"#\")[1],yield this.paymentIntegrationService.loadPaymentMethod(t);const r=this.paymentIntegrationService.getState(),o=r.getPaymentMethodOrThrow(t),{clientToken:a,config:s,initializationData:d}=o,l=r.getStoreConfigOrThrow().checkoutSettings.features;if(this.isPollingEnabled=x(l,\"PAYPAL-5258.braintree_local_methods_polling\"),this.isLPMsUpdateExperimentEnabled=x(l,\"PAYPAL-4853.add_new_payment_flow_for_braintree_lpms\"),!a||!d||!s.merchantId)throw new U(j.MissingPaymentMethod);try{this.braintreeSdk.initialize(a),this.isNonInstantPaymentMethod(i)||(this.braintreeLocalPayment=yield this.braintreeSdk.getBraintreeLocalPayment(s.merchantId))}catch(e){this.handleError(e)}})}finalize(){return Promise.reject(new W)}deinitialize(){return Te(this,void 0,void 0,function*(){return this.toggleLoadingIndicator(!1),Promise.resolve()})}execute(e,t){return Te(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"payment\"]);if(!i)throw new R([\"payment\"]);const{methodId:r}=i;this.toggleLoadingIndicator(!0),this.isNonInstantPaymentMethod(r)?yield this.executeWithNotInstantLPM(r):yield this.executeWithInstantLPM(r,n,t)})}executeWithNotInstantLPM(e){return Te(this,void 0,void 0,function*(){try{const t=yield this.getLPMsBasicPaymentData();yield this.paymentIntegrationService.submitOrder(),yield this.paymentIntegrationService.submitPayment({methodId:e,paymentData:Object.assign(Object.assign({},t),{formattedPayload:{method:e}})})}catch(e){if(this.isBraintreeRedirectError(e)){const t=e.body.additional_action_required.data.redirect_url;return new Promise((e,i)=>{window.location.replace(t),this.toggleLoadingIndicator(!1),i()})}return this.handleError(e),Promise.reject(e)}})}executeWithInstantLPM(e,t,i){return Te(this,void 0,void 0,function*(){if(!this.braintreeLocalPayment)throw new ke;yield new Promise((n,r)=>{var o;null===(o=this.braintreeLocalPayment)||void 0===o||o.startPayment(this.getInstantLPMConfig(e,t,i),this.getInstantLPMCallback(n,r,e,t,i))})})}getLPMsBasicPaymentData(){return Te(this,void 0,void 0,function*(){const{deviceData:e}=yield this.braintreeSdk.getDataCollectorOrThrow();return{deviceSessionId:e}})}getInstantLPMConfig(e,t,i){const n=this.paymentIntegrationService.getState(),r=n.getCartOrThrow(),o=n.getBillingAddressOrThrow(),{firstName:a,lastName:s,countryCode:d}=o,{currency:l,email:c,lineItems:u}=r,h=u.physicalItems.length>0,y=n.getCheckoutOrThrow().outstandingBalance,m=n.getStoreConfigOrThrow().links.checkoutLink;return{paymentType:e,amount:y,fallback:{url:m,buttonText:\"Complete Payment\"},currencyCode:l.code,shippingAddressRequired:h,email:c,givenName:a,surname:s,address:{countryCode:d},onPaymentStart:(n,r)=>Te(this,void 0,void 0,function*(){if(!this.isLPMsUpdateExperimentEnabled)return this.orderId=n.paymentId,void r();const o=yield this.getLPMsBasicPaymentData(),a=Object.assign(Object.assign({},o),{formattedPayload:{method:e,[`${e}_account`]:{order_id:n.paymentId}}});try{yield this.paymentIntegrationService.submitOrder(t,i),yield this.paymentIntegrationService.submitPayment({methodId:e,paymentData:a})}catch(t){if(this.isBraintreeOrderSavedResponse(t)&&t.body.additional_action_required.data.order_id_saved_successfully)return r(),this.isPollingEnabled?new Promise((t,i)=>{this.initializePollingMechanism(e,t,i,this.gatewayId)}):void 0;throw t}})}}getInstantLPMCallback(e,t,i,n,r){const o=this.paymentIntegrationService.getState().getCartOrThrow();return(a,s)=>Te(this,void 0,void 0,function*(){if(a)return\"LOCAL_PAYMENT_WINDOW_CLOSED\"===a.code?(this.toggleLoadingIndicator(!1),this.resetPollingMechanism(),t()):(this.isPollingEnabled&&this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t(new ke));const d=yield this.getLPMsBasicPaymentData(),l=Object.assign(Object.assign({},d),{formattedPayload:{method:i,[`${i}_account`]:Object.assign({email:o.email,token:s.nonce},this.isLPMsUpdateExperimentEnabled?{}:{order_id:this.orderId})}});try{return this.isLPMsUpdateExperimentEnabled||(yield this.paymentIntegrationService.submitOrder(n,r)),yield this.paymentIntegrationService.submitPayment({methodId:i,paymentData:l}),e(void 0)}catch(e){return this.handleError(e),t(e)}})}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}handleError(e){const{onError:t}=this.braintreelocalmethods||{};this.isPollingEnabled&&this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}isNonInstantPaymentMethod(e){return e.toUpperCase()in I}isBraintreeRedirectError(e){var t;if(\"object\"!=typeof e||null===e)return!1;const{body:i}=e;return!!i&&!!(null===(t=i.additional_action_required)||void 0===t?void 0:t.data.redirect_url)}isBraintreeOrderSavedResponse(e){var t;if(\"object\"!=typeof e||null===e)return!1;const{body:i}=e;return!!i&&(null===(t=i.additional_action_required)||void 0===t?void 0:t.data.hasOwnProperty(\"order_id_saved_successfully\"))}initializePollingMechanism(e,t,i,n){return Te(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const r=yield this.braintreeRequestSender.getOrderStatus(n,{params:{useMetadata:!1}}),o=r.status===P.Pending,a=r.status===P.Completed,s=r.status===P.Failed;if(a)return this.deinitializePollingMechanism(),t();if(s)return i();if(!a&&o&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,braintreelocalmethods:this.braintreelocalmethods}),this.handleError(new Ee)}catch(e){i()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}reinitializeStrategy(e){return Te(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}}const ze=L(t=>{const i=window,n=new F(t),r=new B(new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),i,n)),o=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_3__.createRequestSender)(),a=new Pe(o);return new Ae(t,r,a,new ye({styles:{backgroundColor:\"black\"}}))},[{gateway:\"braintreelocalmethods\"}]);function Ne(e){return\"string\"!=typeof e}function Me(e,t){if(t||e)return function(e){var t,i;const n={},r=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.omitBy)(e.root,Ne),o=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.omitBy)(e.input,Ne),a=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.omitBy)(e.toggle,Ne),d=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.omitBy)(null===(t=e.text)||void 0===t?void 0:t.body,Ne),l=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.omitBy)(null===(i=e.text)||void 0===i?void 0:i.caption,Ne),c=e.branding;return Object.keys(r).length&&(n.root=r),Object.keys(o).length&&(n.input=o),Object.keys(a).length&&(n.toggle=a),Object.keys(d).length&&(n.text={},n.text.body=d),Object.keys(l).length&&(n.text=Object.assign({},n.text),n.text.caption=l),c&&(n.branding=c),n}(function(e,t){var i,n,r,o,a,s,d,l,c,u,h,y,m,p,g,v,f,b,w,C,S,P;return{root:{backgroundColorPrimary:(null==e?void 0:e.fastlaneRootSettingsBackgroundColor)||(null===(i=null==t?void 0:t.root)||void 0===i?void 0:i.backgroundColorPrimary),errorColor:(null==e?void 0:e.fastlaneRootSettingsErrorColor)||(null===(n=null==t?void 0:t.root)||void 0===n?void 0:n.errorColor),fontFamily:(null==e?void 0:e.fastlaneRootSettingsFontFamily)||(null===(r=null==t?void 0:t.root)||void 0===r?void 0:r.fontFamily),fontSizeBase:(null==e?void 0:e.fastlaneRootSettingsFontSize)||(null===(o=null==t?void 0:t.root)||void 0===o?void 0:o.fontSizeBase),padding:(null==e?void 0:e.fastlaneRootSettingsPadding)||(null===(a=null==t?void 0:t.root)||void 0===a?void 0:a.padding),primaryColor:(null==e?void 0:e.fastlaneRootSettingsPrimaryColor)||(null===(s=null==t?void 0:t.root)||void 0===s?void 0:s.primaryColor)},input:{borderRadius:(null==e?void 0:e.fastlaneInputSettingsBorderRadius)||(null===(d=null==t?void 0:t.input)||void 0===d?void 0:d.borderRadius),borderColor:(null==e?void 0:e.fastlaneInputSettingsBorderColor)||(null===(l=null==t?void 0:t.input)||void 0===l?void 0:l.borderColor),focusBorderColor:(null==e?void 0:e.fastlaneInputSettingsFocusBorderBase)||(null===(c=null==t?void 0:t.input)||void 0===c?void 0:c.focusBorderColor),backgroundColor:(null==e?void 0:e.fastlaneInputSettingsBackgroundColor)||(null===(u=null==t?void 0:t.input)||void 0===u?void 0:u.backgroundColor),borderWidth:(null==e?void 0:e.fastlaneInputSettingsBorderWidth)||(null===(h=null==t?void 0:t.input)||void 0===h?void 0:h.borderWidth),textColorBase:(null==e?void 0:e.fastlaneInputSettingsTextColorBase)||(null===(y=null==t?void 0:t.input)||void 0===y?void 0:y.textColorBase)},toggle:{colorPrimary:(null==e?void 0:e.fastlaneToggleSettingsColorPrimary)||(null===(m=null==t?void 0:t.toggle)||void 0===m?void 0:m.colorPrimary),colorSecondary:(null==e?void 0:e.fastlaneToggleSettingsColorSecondary)||(null===(p=null==t?void 0:t.toggle)||void 0===p?void 0:p.colorSecondary)},text:{body:{color:(null==e?void 0:e.fastlaneTextBodySettingsColor)||(null===(v=null===(g=null==t?void 0:t.text)||void 0===g?void 0:g.body)||void 0===v?void 0:v.color),fontSize:(null==e?void 0:e.fastlaneTextBodySettingsFontSize)||(null===(b=null===(f=null==t?void 0:t.text)||void 0===f?void 0:f.body)||void 0===b?void 0:b.fontSize)},caption:{color:(null==e?void 0:e.fastlaneTextCaptionSettingsColor)||(null===(C=null===(w=null==t?void 0:t.text)||void 0===w?void 0:w.caption)||void 0===C?void 0:C.color),fontSize:(null==e?void 0:e.fastlaneTextCaptionSettingsFontSize)||(null===(P=null===(S=null==t?void 0:t.text)||void 0===S?void 0:S.caption)||void 0===P?void 0:P.fontSize)}},branding:(null==e?void 0:e.fastlaneBrandingSettings)||(null==t?void 0:t.branding)}}(e,t))}function De(e){return!!e&&(\"authenticationState\"in e||\"addresses\"in e||\"instruments\"in e)}var _e,Be=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class xe{constructor(e,t,i){this.paymentIntegrationService=e,this.braintreeFastlaneUtils=t,this.braintreeSdk=i}initialize(e){var t;return Be(this,void 0,void 0,function*(){const{methodId:i,braintreefastlane:n}=e;if(!i)throw new V('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new V('Unable to initialize payment because \"options.braintreefastlane\" argument is not provided.');if(!n.onInit||\"function\"!=typeof n.onInit)throw new V('Unable to initialize payment because \"options.braintreefastlane.onInit\" argument is not provided or it is not a function.');if(!n.onChange||\"function\"!=typeof n.onChange)throw new V('Unable to initialize payment because \"options.braintreefastlane.onChange\" argument is not provided or it is not a function.');yield this.paymentIntegrationService.loadPaymentMethod(i);const r=this.paymentIntegrationService.getState(),o=r.getPaymentMethodOrThrow(i),{initializationData:a,clientToken:s}=o||{},{isFastlaneStylingEnabled:d}=a||{},l=x(r.getStoreConfigOrThrow().checkoutSettings.features,\"PROJECT-7080.braintree_fastlane_three_ds\");this.is3DSEnabled=o.config.is3dsEnabled,s&&l&&this.braintreeSdk.initialize(s);const c=Me(d?null===(t=o.initializationData)||void 0===t?void 0:t.fastlaneStyles:void 0,n.styles);yield this.braintreeFastlaneUtils.initializeBraintreeFastlaneOrThrow(i,c),this.shouldRunAuthenticationFlow()&&(yield this.braintreeFastlaneUtils.runPayPalAuthenticationFlowOrThrow()),yield this.initializeCardComponent(),this.onError=n.onError,n.onInit(e=>this.renderBraintreeCardComponent(e)),n.onChange(()=>this.handleBraintreeStoredInstrumentChange(i))})}execute(e,t){return Be(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"payment\"]);if(!i)throw new R([\"payment\"]);yield this.paymentIntegrationService.submitOrder(n,t);const r=yield this.preparePaymentPayload(i.methodId);yield this.paymentIntegrationService.submitPayment(r),this.braintreeFastlaneUtils.removeSessionIdFromCookies()})}finalize(){return Promise.reject(new W)}deinitialize(){return Be(this,void 0,void 0,function*(){return this.braintreeCardComponent=void 0,Promise.resolve()})}initializeCardComponent(){return Be(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState(),{phone:t,firstName:i,lastName:n}=e.getBillingAddressOrThrow(),r=`${i} ${n}`,o={styles:{},fields:Object.assign({cardholderName:{prefill:r,enabled:!0}},t&&{phoneNumber:{prefill:t}})},a=this.braintreeFastlaneUtils.getBraintreeFastlaneComponentOrThrow();this.braintreeCardComponent=yield a(o)})}renderBraintreeCardComponent(e){const t=this.getBraintreeCardComponentOrThrow();if(!e)throw new V('Unable to initialize payment because \"container\" argument is not provided.');t.render(e)}preparePaymentPayload(e){var t,i;return Be(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState(),r=n.getBillingAddressOrThrow(),o=`${r.firstName} ${r.lastName}`,a=this.getPayPalInstruments()[0],s=yield this.braintreeFastlaneUtils.getDeviceSessionId(),d=x(n.getStoreConfigOrThrow().checkoutSettings.features,\"PROJECT-7080.braintree_fastlane_three_ds\");if(a){const t=this.is3DSEnabled&&d?yield this.get3DS(a.bigpayToken,(null==a?void 0:a.iin)||\"\"):void 0;return{methodId:e,paymentData:{deviceSessionId:s,formattedPayload:{paypal_fastlane_token:{token:t||a.bigpayToken}}}}}const{getPaymentToken:l}=this.getBraintreeCardComponentOrThrow(),c=yield l({name:{fullName:o},billingAddress:this.mapToPayPalAddress(r)}),u=(null===(i=null===(t=c.paymentSource.card)||void 0===t?void 0:t.binDetails)||void 0===i?void 0:i.bin)||\"\",h=this.is3DSEnabled&&d?yield this.get3DS(c.id,u):void 0;return{methodId:e,paymentData:{deviceSessionId:s,nonce:h||c.id}}})}get3DS(e,t){return Be(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=yield this.braintreeSdk.getBraintreeThreeDS(),r=i.getOrderOrThrow();return new Promise((i,o)=>{n.verifyCard({amount:null==r?void 0:r.orderAmount,nonce:e,bin:t,onLookupComplete:(e,t)=>{n.on(\"customer-canceled\",()=>{\"function\"==typeof this.onError&&this.onError(new Q),o(new Q)}),t()}},(e,t)=>(e&&\"THREEDS_VERIFY_CARD_CANCELED_BY_MERCHANT\"===e.code&&(\"function\"==typeof this.onError&&this.onError(new Q),o(new Q)),i(t.nonce)))})})}mapToPayPalAddress(e){return{streetAddress:(null==e?void 0:e.address1)||\"\",locality:(null==e?void 0:e.city)||\"\",region:(null==e?void 0:e.stateOrProvinceCode)||(null==e?void 0:e.stateOrProvince)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCodeAlpha2:(null==e?void 0:e.countryCode)||\"\"}}shouldRunAuthenticationFlow(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getCustomerOrThrow(),n=e.getPaymentProviderCustomer(),r=De(n)?n:{},o=this.braintreeFastlaneUtils.getSessionIdFromCookies();return!(!i.isGuest||(null==r?void 0:r.authenticationState)===O.CANCELED||(null==r?void 0:r.authenticationState)||o!==t.id)}getBraintreeCardComponentOrThrow(){if(!this.braintreeCardComponent)throw new g;return this.braintreeCardComponent}getPayPalInstruments(){const e=this.paymentIntegrationService.getState().getPaymentProviderCustomerOrThrow();return(De(e)?e:{}).instruments||[]}handleBraintreeStoredInstrumentChange(e){return Be(this,void 0,void 0,function*(){const t=this.braintreeFastlaneUtils.getBraintreeFastlaneOrThrow(),{selectionChanged:i,selectedCard:n}=yield t.profile.showCardSelector();if(i){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomer(),i=De(t)?t:{},r=this.braintreeFastlaneUtils.mapPayPalToBcInstrument(e,[n]);if(r&&r.length>0)return yield this.paymentIntegrationService.updatePaymentProviderCustomer(Object.assign(Object.assign({},i),{instruments:[...r]})),r[0]}})}}!function(e){e.CVV=\"cvv\",e.PAN=\"pan\"}(_e||(_e={}));class Fe{static get(e){const t=`${encodeURIComponent(`${e}`)}=`,i=document.cookie;let n=null;const r=i.indexOf(t);if(r>-1){let e=i.indexOf(\";\",r);-1===e&&(e=i.length),n=decodeURIComponent(i.substring(r+t.length,e))}return n}static set(e,t,i={secure:!0}){let n=`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;const{expires:r,path:o,domain:a,secure:s}=i;if(r)n+=`; expires=${r.toUTCString()}`;else{const e=new Date,t=60;e.setTime(e.getTime()+60*t*1e3),n+=`; expires=${e.toUTCString()}`}o&&(n+=`; path=${o}`),a&&(n+=`; domain=${a}`),s&&(n+=\"; secure\"),document.cookie=n}static remove(e,t){Fe.set(e,\"\",Object.assign({expires:new Date(0)},t))}}var Le=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ve{constructor(e,t){this.paymentIntegrationService=e,this.braintreeIntegrationService=t}getDeviceSessionId(){return Le(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getCart();return this.braintreeIntegrationService.getSessionId(null==e?void 0:e.id)})}initializeBraintreeFastlaneOrThrow(e,t){return Le(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getCart(),{clientToken:r,config:o}=i.getPaymentMethodOrThrow(e);if(!r)throw new U(j.MissingPaymentMethod);this.methodId=e,this.braintreeIntegrationService.initialize(r),this.braintreeFastlane=yield this.braintreeIntegrationService.getBraintreeFastlane(null==n?void 0:n.id,o.testMode,t)})}getBraintreeFastlaneOrThrow(){if(!this.braintreeFastlane)throw new g;return this.braintreeFastlane}getBraintreeFastlaneComponentOrThrow(){return this.getBraintreeFastlaneOrThrow().FastlaneCardComponent}runPayPalAuthenticationFlowOrThrow(e,t){var i;return Le(this,void 0,void 0,function*(){try{const n=this.getMethodIdOrThrow(),r=this.getBraintreeFastlaneOrThrow(),{lookupCustomerByEmail:o,triggerAuthenticationFlow:a}=r.identity,s=this.paymentIntegrationService.getState(),d=s.getCartOrThrow(),l=s.getCustomer(),c=s.getBillingAddress(),{isFastlaneShippingOptionAutoSelectEnabled:u}=s.getPaymentMethodOrThrow(n).initializationData||{},h=e||(null==l?void 0:l.email)||(null==c?void 0:c.email)||\"\",{customerContextId:y}=yield o(h);if(!y)return yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:O.UNRECOGNIZED,addresses:[],instruments:[]}),void this.saveSessionIdToCookies(d.id);const{authenticationState:m,profileData:p}=yield a(y),g=(null===(i=null==p?void 0:p.shippingAddress)||void 0===i?void 0:i.phoneNumber)||\"\";if(m===O.CANCELED)return yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:m,addresses:[],instruments:[]}),void this.removeSessionIdFromCookies();const v=this.mapPayPalToBcAddress([p.shippingAddress],[g])||[],f=this.getPayPalBillingAddresses(p),b=f?this.mapPayPalToBcAddress([f],[g]):[],w=p.card?this.mapPayPalToBcInstrument(n,[p.card]):[],C=this.mergeShippingAndBillingAddresses(v,b);if(this.saveSessionIdToCookies(d.id),yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:m,addresses:C,instruments:w}),b.length>0&&d.lineItems.physicalItems.length>0&&(yield this.paymentIntegrationService.updateBillingAddress(b[0])),b.length>0&&d.lineItems.digitalItems.length>0&&0===d.lineItems.physicalItems.length){const{firstName:e,lastName:t}=C[0],i=Object.assign(Object.assign({},b[0]),{firstName:e,lastName:t});yield this.paymentIntegrationService.updateBillingAddress(i)}v.length>0&&d.lineItems.physicalItems.length>0&&(yield this.paymentIntegrationService.updateShippingAddress(v[0]),t&&u&&(yield this.setShippingOption()))}catch(e){}})}getSessionIdFromCookies(){return Fe.get(\"bc-fastlane-sessionId\")||\"\"}saveSessionIdToCookies(e){const t=new Date;t.setDate(t.getDate()+14),Fe.set(\"bc-fastlane-sessionId\",e,{expires:t,secure:!0})}removeSessionIdFromCookies(){Fe.remove(\"bc-fastlane-sessionId\")}mapPayPalToBcInstrument(e,t){if(t)return t.map(t=>{const{id:i,paymentSource:n}=t,{brand:r,expiry:o,lastDigits:a,binDetails:s}=n.card,[d,l]=o.split(\"-\");return{bigpayToken:i,brand:r,defaultInstrument:!1,expiryMonth:l,expiryYear:d,iin:(null==s?void 0:s.bin)||\"\",last4:a,method:e,provider:e,trustedShippingAddress:!1,type:\"card\",untrustedShippingCardVerificationMode:_e.PAN}})}mapPayPalToBcAddress(e,t){if(!e)return[];const i=this.paymentIntegrationService.getState().getCountries()||[],n=e=>{const t=i.find(t=>t.code===e);return(null==t?void 0:t.name)||\"\"};return e.map(e=>({id:Date.now(),type:\"paypal-address\",firstName:e.firstName||\"\",lastName:e.lastName||\"\",company:e.company||\"\",address1:e.streetAddress,address2:e.extendedAddress||\"\",city:e.locality,stateOrProvince:e.region,stateOrProvinceCode:e.region,country:n(e.countryCodeAlpha2),countryCode:e.countryCodeAlpha2,postalCode:e.postalCode,phone:t&&t[0]||\"\",customFields:[]}))}getPayPalBillingAddresses(e){const{card:t,name:i}=e||{};if(!t)return;const{firstName:r,lastName:o}=t.paymentSource.card.billingAddress,{firstName:a,lastName:s}=i||{},{shippingAddress:d}=e||{},l=Object.assign(Object.assign({},t.paymentSource.card.billingAddress),{firstName:r||a,lastName:o||s});return d&&(0,lodash__WEBPACK_IMPORTED_MODULE_1__.isEqual)(this.normalizeAddress(l),this.normalizeAddress(d))?d:l}normalizeAddress(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_1__.omit)(e,[\"id\"])}mergeShippingAndBillingAddresses(e,t){const i=t.filter(t=>!e.some(e=>(0,lodash__WEBPACK_IMPORTED_MODULE_1__.isEqual)(this.normalizeAddress(e),this.normalizeAddress(t))));return[...e,...i]}getMethodIdOrThrow(){if(!this.methodId)throw new V('Unable to proceed because \"methodId\" argument is not provided.');return this.methodId}setShippingOption(){var e;return Le(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getConsignments()||[],i=(null===(e=t[0])||void 0===e?void 0:e.availableShippingOptions)||[],n=i.find(e=>e.isRecommended);if(n||i.length){const e=n||i[0];yield this.paymentIntegrationService.selectShippingOption(e.id)}})}}const je=L(t=>{const i=window,n=new F(t),r=new de(new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),i,n),i),o=new Ve(t,r),a=new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),i,n),s=new B(a);return new xe(t,o,s)},[{id:\"braintreeacceleratedcheckout\"}]);var Ue=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Re{constructor(e,t,i){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeSdk=i}initialize(e){return Ue(this,void 0,void 0,function*(){const{braintreevisacheckout:t,methodId:i}=e;if(!t)throw new V('Unable to initialize payment because \"options.braintreevisacheckout\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(i);const n=this.paymentIntegrationService.getState();this.paymentMethod=n.getPaymentMethodOrThrow(i);const r=n.getCheckoutOrThrow(),a=n.getStoreConfigOrThrow(),{clientToken:s,config:d}=this.paymentMethod||{};if(!s)throw new U(j.MissingPaymentMethod);const{onError:l=lodash__WEBPACK_IMPORTED_MODULE_1__.noop,onPaymentSelect:c=lodash__WEBPACK_IMPORTED_MODULE_1__.noop}=t;this.braintreeSdk.initialize(s);const u=yield this.braintreeSdk.getBraintreeVisaCheckout(),h=yield this.braintreeSdk.getVisaCheckoutSdk(null==d?void 0:d.testMode),y=u.createInitOptions({settings:{locale:a.storeProfile.storeLanguage,shipping:{collectShipping:!1}},paymentRequest:{currencyCode:a.currency.code,subtotal:String(r.subtotal)}});yield h.init(y),h.on(\"payment.success\",e=>this.tokenizePayment(u,e).then(()=>Promise.all([this.paymentIntegrationService.loadCheckout(),this.paymentIntegrationService.loadPaymentMethod(i)])).then(()=>c()).catch(e=>l(e))),h.on(\"payment.error\",(e,t)=>l(t))})}execute(e,t){var i,n;return Ue(this,void 0,void 0,function*(){const{payment:r}=e,o=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"payment\"]);if(!r)throw new V('Unable to submit payment because \"payload.payment\" argument is not provided.');if(!(null===(n=null===(i=this.paymentMethod)||void 0===i?void 0:i.initializationData)||void 0===n?void 0:n.nonce))throw new U(j.MissingPaymentMethod);const{nonce:a}=this.paymentMethod.initializationData;try{yield this.paymentIntegrationService.submitOrder(o,t),yield this.paymentIntegrationService.submitPayment(Object.assign(Object.assign({},r),{paymentData:{nonce:a}}))}catch(e){this.handleError(e)}})}finalize(){return Promise.reject(new W)}deinitialize(){return Ue(this,void 0,void 0,function*(){yield this.braintreeSdk.deinitialize()})}tokenizePayment(e,t){return Ue(this,void 0,void 0,function*(){return Promise.all([e.tokenize(t),this.braintreeSdk.getDataCollectorOrThrow()]).then(([e,t])=>{const i=this.paymentIntegrationService.getState(),n=i.getShippingAddress(),r=i.getBillingAddress(),{shippingAddress:o=this.mapToVisaCheckoutAddress(n),billingAddress:a=this.mapToVisaCheckoutAddress(r)}=e;return this.postForm(Object.assign(Object.assign({},e),{shippingAddress:o,billingAddress:a}),t)})})}mapToVisaCheckoutAddress(e){return e?{firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phone,streetAddress:e.address1,extendedAddress:e.address2,locality:e.city,region:e.stateOrProvinceCode,countryCode:e.countryCode,postalCode:e.postalCode}:{}}postForm(e,t){const{userData:i,billingAddress:n,shippingAddress:r,details:o}=e,{userEmail:a}=i,{deviceData:s}=t;return this.formPoster.postForm(\"/checkout.php\",{payment_type:e.type,nonce:e.nonce,provider:\"braintreevisacheckout\",action:\"set_external_checkout\",device_data:s,card_information:JSON.stringify({type:o.cardType,number:o.lastTwo}),billing_address:JSON.stringify(this.getAddress(a,n)),shipping_address:JSON.stringify(this.getAddress(a,r))})}getAddress(e,t={}){return{email:e,first_name:t.firstName,last_name:t.lastName,phone_number:t.phoneNumber,address_line_1:t.streetAddress,address_line_2:t.extendedAddress,city:t.locality,state:t.region,country_code:t.countryCode,postal_code:t.postalCode}}handleError(e){if(e instanceof Error&&\"BraintreeError\"===e.name)throw new $(e.message);throw e}}const He=L(t=>{const i=window,n=new F(t),r=new B(new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),i,n));return new Re(t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_4__.createFormPoster)(),r)},[{id:\"braintreevisacheckout\"}]);var We=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class qe{constructor(e,t){this.paymentIntegrationService=e,this.braintreeIntegrationService=t}initialize(e){return We(this,void 0,void 0,function*(){const{methodId:t}=e;yield this.paymentIntegrationService.loadPaymentMethod(t);const i=this.paymentIntegrationService.getState();this.venmoOptions=e.braintreevenmo;const n=i.getPaymentMethodOrThrow(t);yield this.initializeBraintreeVenmo(n)})}execute(e){return We(this,void 0,void 0,function*(){const{payment:t}=e,i=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"payment\"]);if(!t)throw new R([\"payment\"]);try{const e=yield this.preparePaymentData(t);yield this.paymentIntegrationService.submitOrder(i),yield this.paymentIntegrationService.submitPayment(e)}catch(e){this.handleError(e)}})}finalize(){return Promise.reject(new W)}deinitialize(){return We(this,void 0,void 0,function*(){return yield this.braintreeIntegrationService.teardown(),Promise.resolve()})}handleError(e){if(!D(e))throw e;if(\"PAYPAL_POPUP_CLOSED\"===e.code)throw new Q(e.message);throw new $(e.message)}initializeBraintreeVenmo(e){var t;return We(this,void 0,void 0,function*(){const{clientToken:i}=e;if(!i)throw new U(j.MissingPaymentMethod);const n=x(this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features,\"PAYPAL-5406.braintree_venmo_web_fallback_support\");try{this.braintreeIntegrationService.initialize(i),this.braintreeVenmoCheckout=yield this.braintreeIntegrationService.getVenmoCheckout(Object.assign(Object.assign({},void 0!==(null===(t=this.venmoOptions)||void 0===t?void 0:t.allowDesktop)?{allowDesktop:this.venmoOptions.allowDesktop}:{}),n?{mobileWebFallBack:n}:{}))}catch(e){this.handleError(e)}})}preparePaymentData(e){return We(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),{nonce:i}=t.getPaymentMethodOrThrow(e.methodId);if(i)return Object.assign(Object.assign({},e),{paymentData:this.formattedPayload(i)});const n=yield this.braintreeVenmoTokenize(),r=yield this.braintreeIntegrationService.getSessionId();return Object.assign(Object.assign({},e),{paymentData:this.formattedPayload(n.nonce,n.details.email,r)})})}formattedPayload(e,t,i){return{formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:i||null,paypal_account:{token:e,email:t||null}}}}braintreeVenmoTokenize(){return new Promise((e,t)=>{var i;null===(i=this.braintreeVenmoCheckout)||void 0===i||i.tokenize((i,n)=>{if(i)return t(i);e(n)})})}}const $e=L(t=>{const i=window,n=(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),r=new F(t),o=new z(n,i,r),a=new de(o,i);return new qe(t,a)},[{id:\"braintreevenmo\"}]);var Ge=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ye{constructor(e,t,i){this.paymentIntegrationService=e,this.braintreeIntegrationService=t,this.braintreeHostedForm=i}initialize(e){return Ge(this,void 0,void 0,function*(){const{methodId:t,gatewayId:i,braintree:n}=e;yield this.paymentIntegrationService.loadPaymentMethod(t);const r=this.paymentIntegrationService.getState();this.paymentMethod=r.getPaymentMethodOrThrow(t);const{clientToken:o}=this.paymentMethod;if(!o)throw new U(j.MissingPaymentMethod);this.threeDSecure=null==n?void 0:n.threeDSecure;try{this.braintreeIntegrationService.initialize(o,this.threeDSecure),this.isHostedPaymentFormEnabled(t,i)&&(null==n?void 0:n.form)&&(yield this.braintreeHostedForm.initialize(n.form,n.unsupportedCardBrands,o),this.isHostedFormInitialized=this.braintreeHostedForm.isInitialized()),this.is3dsEnabled=this.paymentMethod.config.is3dsEnabled,this.deviceSessionId=yield this.braintreeIntegrationService.getSessionId(),this.shouldInitializeBraintreeFastlane()&&(yield this.initializeBraintreeFastlaneOrThrow(t))}catch(e){return this.handleError(e)}})}execute(e){return Ge(this,void 0,void 0,function*(){const{payment:t}=e,i=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"payment\"]);if(!t)throw new R([\"payment\"]);this.isHostedFormInitialized&&this.braintreeHostedForm.validate(),yield this.paymentIntegrationService.submitOrder(i);const n=this.paymentIntegrationService.getState(),r=n.getBillingAddressOrThrow(),o=n.getOrderOrThrow().orderAmount;try{const e=this.isHostedFormInitialized?yield this.prepareHostedPaymentData(t,r,o):yield this.preparePaymentData(t,r,o);yield this.paymentIntegrationService.submitPayment(Object.assign(Object.assign({},t),{paymentData:e}))}catch(e){return this.processAdditionalAction(e,t,o)}})}finalize(){return Promise.reject(new W)}deinitialize(){return Ge(this,void 0,void 0,function*(){return this.isHostedFormInitialized=!1,yield Promise.all([this.braintreeIntegrationService.teardown(),this.braintreeHostedForm.deinitialize()]),Promise.resolve()})}handleError(e){if(pe(e))throw new $(e.message);throw e}preparePaymentData(e,t,i){return Ge(this,void 0,void 0,function*(){const{paymentData:n}=e,r={deviceSessionId:this.deviceSessionId};if(this.isSubmittingWithStoredCard(e))return Object.assign(Object.assign({},r),n);const{shouldSaveInstrument:o=!1,shouldSetAsDefaultInstrument:a=!1}=q(n)?n:{},{nonce:s}=this.shouldPerform3DSVerification(e)?yield this.braintreeIntegrationService.verifyCard(e,t,i):yield this.braintreeIntegrationService.tokenizeCard(e,t);return Object.assign(Object.assign({},r),{nonce:s,shouldSaveInstrument:o,shouldSetAsDefaultInstrument:a})})}prepareHostedPaymentData(e,t,i){return Ge(this,void 0,void 0,function*(){const{paymentData:n}=e,r={deviceSessionId:this.deviceSessionId};if(this.isSubmittingWithStoredCard(e)){const{nonce:e}=yield this.braintreeHostedForm.tokenizeForStoredCardVerification();return Object.assign(Object.assign(Object.assign({},r),n),{nonce:e})}const{shouldSaveInstrument:o=!1,shouldSetAsDefaultInstrument:a=!1}=q(n)?n:{},{nonce:s}=this.shouldPerform3DSVerification(e)?yield this.verifyCardWithHostedForm(t,i):yield this.braintreeHostedForm.tokenize(t);return Object.assign(Object.assign({},r),{shouldSaveInstrument:o,shouldSetAsDefaultInstrument:a,nonce:s})})}verifyCardWithHostedForm(e,t){return Ge(this,void 0,void 0,function*(){const i=yield this.braintreeHostedForm.tokenize(e);return this.braintreeIntegrationService.challenge3DSVerification(i,t)})}processAdditionalAction(e,t,i){return Ge(this,void 0,void 0,function*(){if(!(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"}))return this.handleError(e);try{const{payer_auth_request:n}=function(e){return\"object\"==typeof e&&null!==e&&\"name\"in e&&\"body\"in e&&\"status\"in e.body&&\"three_ds_result\"in e.body&&\"payer_auth_request\"in e.body.three_ds_result&&\"errors\"in e.body}(e)&&e.body.three_ds_result||{},{paymentData:r}=t,o=this.paymentIntegrationService.getState();if(!r||!H(r))throw new R([\"instrumentId\"]);const a=o.getCardInstrumentOrThrow(r.instrumentId),{nonce:s}=yield this.braintreeIntegrationService.challenge3DSVerification({nonce:n||\"\",bin:a.iin},i);yield this.paymentIntegrationService.submitPayment(Object.assign(Object.assign({},t),{paymentData:{deviceSessionId:this.deviceSessionId,nonce:s}}))}catch(e){return this.handleError(e)}})}isHostedPaymentFormEnabled(e,t){return!!e&&!0===this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t).config.isHostedFormEnabled}isSubmittingWithStoredCard(e){return!(!e.paymentData||!H(e.paymentData))}shouldPerform3DSVerification(e){return!(!this.is3dsEnabled||this.isSubmittingWithStoredCard(e))}shouldInitializeBraintreeFastlane(){var e;const t=this.paymentIntegrationService.getState().getPaymentProviderCustomerOrThrow(),i=De(t)?t:{};return(null===(e=this.paymentMethod)||void 0===e?void 0:e.initializationData.isAcceleratedCheckoutEnabled)&&!(null==i?void 0:i.authenticationState)}initializeBraintreeFastlaneOrThrow(e){return Ge(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getPaymentMethodOrThrow(e),{clientToken:r,config:o}=n;if(!r)throw new U(j.MissingPaymentMethod);this.braintreeIntegrationService.initialize(r,this.threeDSecure),yield this.braintreeIntegrationService.getBraintreeFastlane(i.id,o.testMode)})}}function Je(e){return\"cardNumber\"in e}function Ke(e){if(!D(e))return!1;const{details:t}=e;return void 0===t||\"object\"==typeof t&&null!==t&&void 0===t.invalidFieldKeys||(i=t,Array.isArray(i)&&i.every(e=>\"string\"==typeof e));// removed by dead control flow\n var i; }var Xe,Qe=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};!function(e){e[e.CreditCard=0]=\"CreditCard\",e[e.StoredCardVerification=1]=\"StoredCardVerification\"}(Xe||(Xe={}));class Ze{constructor(e,t){this.braintreeScriptLoader=e,this.braintreeSDKVersionManager=t,this.isInitializedHostedForm=!1,this.handleBlur=e=>{var t,i;null===(i=null===(t=this.formOptions)||void 0===t?void 0:t.onBlur)||void 0===i||i.call(t,{fieldType:this.mapFieldType(e.emittedBy),errors:this.mapErrors(e.fields)})},this.handleFocus=e=>{var t,i;null===(i=null===(t=this.formOptions)||void 0===t?void 0:t.onFocus)||void 0===i||i.call(t,{fieldType:this.mapFieldType(e.emittedBy)})},this.handleCardTypeChange=e=>{var t,i;const n=1===e.cards.length?e.cards[0].type.replace(/^master-card$/,\"mastercard\"):void 0;null===(i=null===(t=this.formOptions)||void 0===t?void 0:t.onCardTypeChange)||void 0===i||i.call(t,{cardType:n})},this.handleInputSubmitRequest=e=>{var t,i;null===(i=null===(t=this.formOptions)||void 0===t?void 0:t.onEnter)||void 0===i||i.call(t,{fieldType:this.mapFieldType(e.emittedBy)})},this.handleValidityChange=e=>{var t,i;null===(i=null===(t=this.formOptions)||void 0===t?void 0:t.onValidate)||void 0===i||i.call(t,{isValid:this.isValidForm(e),errors:this.mapValidationErrors(e.fields)})}}initialize(e,t,n){var r,o,a,s,d;return Qe(this,void 0,void 0,function*(){this.clientToken=n,this.formOptions=e,this.type=Je(e.fields)?Xe.CreditCard:Xe.StoredCardVerification;const l=this.mapFieldOptions(e.fields,t);(0,lodash__WEBPACK_IMPORTED_MODULE_1__.isEmpty)(l)?this.isInitializedHostedForm=!1:(this.cardFields=yield this.createHostedFields({fields:l,styles:e.styles&&this.mapStyleOptions(e.styles)}),null===(r=this.cardFields)||void 0===r||r.on(\"blur\",this.handleBlur),null===(o=this.cardFields)||void 0===o||o.on(\"focus\",this.handleFocus),null===(a=this.cardFields)||void 0===a||a.on(\"cardTypeChange\",this.handleCardTypeChange),null===(s=this.cardFields)||void 0===s||s.on(\"validityChange\",this.handleValidityChange),null===(d=this.cardFields)||void 0===d||d.on(\"inputSubmitRequest\",this.handleInputSubmitRequest),this.isInitializedHostedForm=!0)})}isInitialized(){return!!this.isInitializedHostedForm}deinitialize(){var e;return Qe(this,void 0,void 0,function*(){this.isInitializedHostedForm&&(this.isInitializedHostedForm=!1,yield null===(e=this.cardFields)||void 0===e?void 0:e.teardown())})}validate(){if(!this.cardFields)throw new M(C.PaymentNotInitialized);const e=this.cardFields.getState();if(!this.isValidForm(e)){this.handleValidityChange(e);const t=this.mapValidationErrors(e.fields);throw new X(t)}}tokenize(e){var t,i,n,o,a;return Qe(this,void 0,void 0,function*(){if(!this.cardFields)throw new M(C.PaymentNotInitialized);try{const o=yield this.cardFields.tokenize((0,lodash__WEBPACK_IMPORTED_MODULE_1__.omitBy)({billingAddress:e&&this.mapBillingAddress(e)},lodash__WEBPACK_IMPORTED_MODULE_1__.isNil));return null===(i=null===(t=this.formOptions)||void 0===t?void 0:t.onValidate)||void 0===i||i.call(t,{isValid:!0,errors:{}}),{nonce:o.nonce,bin:null===(n=o.details)||void 0===n?void 0:n.bin}}catch(e){if(Ke(e)){const t=this.mapTokenizeError(e);if(t)throw null===(a=null===(o=this.formOptions)||void 0===o?void 0:o.onValidate)||void 0===a||a.call(o,{isValid:!1,errors:t}),new X(t)}throw e}})}tokenizeForStoredCardVerification(){var e,t,i,n,r;return Qe(this,void 0,void 0,function*(){if(!this.cardFields)throw new M(C.PaymentNotInitialized);try{const n=yield this.cardFields.tokenize();return null===(t=null===(e=this.formOptions)||void 0===e?void 0:e.onValidate)||void 0===t||t.call(e,{isValid:!0,errors:{}}),{nonce:n.nonce,bin:null===(i=n.details)||void 0===i?void 0:i.bin}}catch(e){if(Ke(e)){const t=this.mapTokenizeError(e,!0);if(t)throw null===(r=null===(n=this.formOptions)||void 0===n?void 0:n.onValidate)||void 0===r||r.call(n,{isValid:!1,errors:t}),new X(t)}throw e}})}createHostedFields(e){return Qe(this,void 0,void 0,function*(){const t=yield this.getClient(),i=yield this.braintreeScriptLoader.loadHostedFields(),n=this.braintreeSDKVersionManager.getSDKVersion()===v?Object.assign(Object.assign({},e),{preventCursorJumps:!0}):e;return i.create(Object.assign(Object.assign({},n),{client:t}))})}getClient(){return Qe(this,void 0,void 0,function*(){if(!this.clientToken)throw new M(C.PaymentNotInitialized);if(!this.client){const e=yield this.braintreeScriptLoader.loadClient();this.client=e.create({authorization:this.clientToken})}return this.client})}mapBillingAddress(e){return{countryName:e.country,postalCode:e.postalCode,streetAddress:e.address2?`${e.address1} ${e.address2}`:e.address1}}mapFieldOptions(e,t){if(Je(e)){const i={};return null==t||t.forEach(e=>{(e=>Object.values(T).includes(e))(e)&&(i[e]=!1)}),(0,lodash__WEBPACK_IMPORTED_MODULE_1__.omitBy)({number:Object.assign({container:`#${e.cardNumber.containerId}`,placeholder:e.cardNumber.placeholder,internalLabel:e.cardNumber.accessibilityLabel},Object.keys(i).length>0?{supportedCardBrands:i}:{}),expirationDate:{container:`#${e.cardExpiry.containerId}`,placeholder:e.cardExpiry.placeholder,internalLabel:e.cardExpiry.accessibilityLabel},cvv:e.cardCode&&{container:`#${e.cardCode.containerId}`,placeholder:e.cardCode.placeholder,internalLabel:e.cardCode.accessibilityLabel},cardholderName:{container:`#${e.cardName.containerId}`,placeholder:e.cardName.placeholder,internalLabel:e.cardName.accessibilityLabel}},lodash__WEBPACK_IMPORTED_MODULE_1__.isNil)}return (0,lodash__WEBPACK_IMPORTED_MODULE_1__.omitBy)({number:e.cardNumberVerification&&{container:`#${e.cardNumberVerification.containerId}`,placeholder:e.cardNumberVerification.placeholder},cvv:e.cardCodeVerification&&{container:`#${e.cardCodeVerification.containerId}`,placeholder:e.cardCodeVerification.placeholder}},lodash__WEBPACK_IMPORTED_MODULE_1__.isNil)}mapStyleOptions(e){const t=(e={})=>(0,lodash__WEBPACK_IMPORTED_MODULE_1__.omitBy)({color:e.color,\"font-family\":e.fontFamily,\"font-size\":e.fontSize,\"font-weight\":e.fontWeight},lodash__WEBPACK_IMPORTED_MODULE_1__.isNil);return{input:t(e.default),\".invalid\":t(e.error),\":focus\":t(e.focus)}}mapFieldType(e){switch(e){case\"number\":return this.type===Xe.StoredCardVerification?m.CardNumberVerification:m.CardNumber;case\"expirationDate\":return m.CardExpiry;case\"cvv\":return this.type===Xe.StoredCardVerification?m.CardCodeVerification:m.CardCode;case\"cardholderName\":return m.CardName;default:throw new Error(\"Unexpected field type\")}}mapErrors(e){const t={};if(e)for(const[i,n]of Object.entries(e))if(n&&this.isValidParam(i)){const{isValid:e,isEmpty:r,isPotentiallyValid:o}=n;t[i]={isValid:e,isEmpty:r,isPotentiallyValid:o}}return t}mapValidationErrors(e){return Object.keys(e).reduce((t,i)=>{var n;return Object.assign(Object.assign({},t),{[this.mapFieldType(i)]:(null===(n=e[i])||void 0===n?void 0:n.isValid)?void 0:[this.createInvalidError(this.mapFieldType(i))]})},{})}mapTokenizeError(e,t=!1){var i,n;if(\"HOSTED_FIELDS_FIELDS_EMPTY\"===e.code){const e=[this.createRequiredError(this.mapFieldType(\"cvv\"))];return t?{[this.mapFieldType(\"cvv\")]:e}:{[this.mapFieldType(\"cvv\")]:e,[this.mapFieldType(\"expirationDate\")]:[this.createRequiredError(this.mapFieldType(\"expirationDate\"))],[this.mapFieldType(\"number\")]:[this.createRequiredError(this.mapFieldType(\"number\"))],[this.mapFieldType(\"cardholderName\")]:[this.createRequiredError(this.mapFieldType(\"cardholderName\"))]}}return null===(n=null===(i=e.details)||void 0===i?void 0:i.invalidFieldKeys)||void 0===n?void 0:n.reduce((e,t)=>{const i=this.mapFieldType(t);return Object.assign(Object.assign({},e),{[i]:[this.createInvalidError(i)]})},{})}createRequiredError(e){var t;return{fieldType:e,message:null!==(t={[m.CardCode]:\"CVV is required\",[m.CardCodeVerification]:\"CVV is required\",[m.CardNumber]:\"Credit card number is required\",[m.CardNumberVerification]:\"Credit card number is required\",[m.CardExpiry]:\"Expiration date is required\",[m.CardName]:\"Full name is required\"}[e])&&void 0!==t?t:\"Field is required\",type:\"required\"}}createInvalidError(e){var t,i,n,r;const o={[m.CardCode]:{message:\"Invalid card code\",type:\"invalid_card_code\"},[m.CardCodeVerification]:{message:\"Invalid card code\",type:\"invalid_card_code\"},[m.CardNumber]:{message:\"Invalid card number\",type:\"invalid_card_number\"},[m.CardNumberVerification]:{message:\"Invalid card number\",type:\"invalid_card_number\"},[m.CardExpiry]:{message:\"Invalid card expiry\",type:\"invalid_card_expiry\"},[m.CardName]:{message:\"Invalid card name\",type:\"invalid_card_name\"}};return{fieldType:e,message:null!==(i=null===(t=o[e])||void 0===t?void 0:t.message)&&void 0!==i?i:\"Invalid field\",type:null!==(r=null===(n=o[e])||void 0===n?void 0:n.type)&&void 0!==r?r:\"invalid\"}}isValidForm(e){return Object.keys(e.fields).every(t=>{var i;return null===(i=e.fields[t])||void 0===i?void 0:i.isValid})}isValidParam(e){return[\"number\",\"cvv\",\"expirationDate\",\"postalCode\",\"cardholderName\",\"cardType\"].includes(e)}}const et=L(t=>{const i=window,n=new F(t),r=new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),i,n),o=new de(r,i),a=new Ze(r,n);return new Ye(t,o,a)},[{id:\"braintree\"}]);var tt=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class it{constructor(e,t,i,n){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeIntegrationService=i,this.braintreeHostWindow=n}initialize(e){return tt(this,void 0,void 0,function*(){const{braintreepaypal:t,methodId:i}=e,{container:n,onError:r}=t||{};if(!i)throw new V('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new V('Unable to initialize payment because \"options.braintreepaypal\" argument is not provided.');if(!n)throw new V('Unable to initialize payment because \"options.braintreepaypal.container\" argument is not provided.');let o,a=this.paymentIntegrationService.getState();try{if(o=a.getPaymentMethodOrThrow(i),!o.clientToken)throw new U(j.MissingPaymentToken)}catch(e){a=yield this.paymentIntegrationService.loadPaymentMethod(i),o=a.getPaymentMethodOrThrow(i)}const{clientToken:s,config:d,initializationData:l}=o,{paymentButtonStyles:c}=l||{},{checkoutTopButtonStyles:u}=c||{};if(!s||!l)throw new U(j.MissingPaymentMethod);const h={currency:a.getCartOrThrow().currency.code,intent:l.intent,isCreditEnabled:l.isCreditEnabled,commit:!1};this.braintreeIntegrationService.initialize(s),yield this.braintreeIntegrationService.getPaypalCheckout(h,e=>{this.renderPayPalButton(e,t,i,Boolean(d.testMode),u)},e=>this.handleError(e,n,r))})}deinitialize(){return tt(this,void 0,void 0,function*(){yield this.braintreeIntegrationService.teardown()})}signIn(e,t){return tt(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return tt(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderPayPalButton(e,t,i,n,r){const{container:a,onClick:s=lodash__WEBPACK_IMPORTED_MODULE_1__.noop}=t,{paypal:d}=this.braintreeHostWindow,l=null==d?void 0:d.FUNDING.PAYPAL;if(d&&l){const o=d.Buttons({env:this.braintreeIntegrationService.getBraintreeEnv(n),fundingSource:l,style:Object.assign(Object.assign({},r),{height:36}),createOrder:()=>this.setupPayment(e,t,i),onApprove:n=>this.tokenizePayment(n,e,i,t),onClick:s});o.isEligible()&&o.render(`#${a}`)}else this.braintreeIntegrationService.removeElement(a)}setupPayment(e,t,i){var n;return tt(this,void 0,void 0,function*(){try{yield this.paymentIntegrationService.loadDefaultCheckout();const t=this.paymentIntegrationService.getState(),r=t.getCheckoutOrThrow().outstandingBalance,o=t.getCartOrThrow().currency.code,a=t.getCustomer(),s=t.getPaymentMethodOrThrow(i),d=null==a?void 0:a.addresses[0],l=d?this.braintreeIntegrationService.mapToBraintreeShippingAddressOverride(d):void 0;return yield e.createPayment({flow:\"checkout\",enableShippingAddress:!0,shippingAddressEditable:!1,shippingAddressOverride:l,amount:r,currency:o,offerCredit:!1,intent:null===(n=s.initializationData)||void 0===n?void 0:n.intent})}catch(e){const{container:i,onError:n}=t;this.handleError(e,i,n)}})}tokenizePayment(e,t,i,n){return tt(this,void 0,void 0,function*(){try{const{deviceData:n}=yield this.braintreeIntegrationService.getDataCollector({paypal:!0}),r=yield t.tokenizePayment(e),{details:o,nonce:a}=r,s=this.braintreeIntegrationService.mapToLegacyBillingAddress(o),d=this.braintreeIntegrationService.mapToLegacyShippingAddress(o);return this.formPoster.postForm(\"/checkout.php\",{payment_type:\"paypal\",provider:i,action:\"set_external_checkout\",nonce:a,device_data:n,billing_address:JSON.stringify(s),shipping_address:JSON.stringify(d)}),r}catch(e){const{container:t,onError:i}=n;this.handleError(e,t,i)}})}handleError(e,t,i){if(this.braintreeIntegrationService.removeElement(t),!i||!D(e))throw e;i(e)}}const nt=L(t=>{const i=window,n=new F(t),r=new de(new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),i,n),i);return new it(t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_4__.createFormPoster)(),r,i)},[{id:\"braintreepaypal\"}]);var rt=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ot{constructor(e,t,i,n){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeIntegrationService=i,this.braintreeHostWindow=n}initialize(e){return rt(this,void 0,void 0,function*(){const{braintreepaypalcredit:t,methodId:i}=e,{container:n,onError:r}=t||{};if(!i)throw new V('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new V('Unable to initialize payment because \"options.braintreepaypalcredit\" argument is not provided.');if(!n)throw new V('Unable to initialize payment because \"options.braintreepaypalcredit.container\" argument is not provided.');let o,a=this.paymentIntegrationService.getState();try{if(o=a.getPaymentMethodOrThrow(i),!o.clientToken)throw new U(j.MissingPaymentToken)}catch(e){a=yield this.paymentIntegrationService.loadPaymentMethod(i),o=a.getPaymentMethodOrThrow(i)}const{clientToken:s,config:d,initializationData:l}=o,{paymentButtonStyles:c}=l||{},{checkoutTopButtonStyles:u}=c||{};if(!s||!l)throw new U(j.MissingPaymentMethod);const h={currency:a.getCartOrThrow().currency.code,intent:l.intent,isCreditEnabled:l.isCreditEnabled,commit:!1};this.braintreeIntegrationService.initialize(s),yield this.braintreeIntegrationService.getPaypalCheckout(h,e=>{this.renderPayPalButton(e,t,i,Boolean(d.testMode),Object.assign(Object.assign({},u),{height:36}))},e=>this.handleError(e,n,r))})}deinitialize(){return rt(this,void 0,void 0,function*(){yield this.braintreeIntegrationService.teardown()})}signIn(e,t){return rt(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return rt(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderPayPalButton(e,t,i,n,r){const{container:a,onClick:s=lodash__WEBPACK_IMPORTED_MODULE_1__.noop}=t,{paypal:d}=this.braintreeHostWindow;let l=!1;d&&[d.FUNDING.PAYLATER,d.FUNDING.CREDIT].forEach(o=>{if(!l){const c=d.Buttons({env:n?\"sandbox\":\"production\",fundingSource:o,style:r,createOrder:()=>this.setupPayment(e,t,i),onApprove:n=>this.tokenizePayment(n,e,i,t),onClick:s});c.isEligible()&&(c.render(`#${a}`),l=!0)}}),d&&l||this.braintreeIntegrationService.removeElement(a)}setupPayment(e,t,i){var n;return rt(this,void 0,void 0,function*(){try{yield this.paymentIntegrationService.loadDefaultCheckout();const t=this.paymentIntegrationService.getState(),r=t.getCheckoutOrThrow().outstandingBalance,o=t.getCartOrThrow().currency.code,a=t.getCustomer(),s=t.getPaymentMethodOrThrow(i),d=null==a?void 0:a.addresses[0],l=d?this.braintreeIntegrationService.mapToBraintreeShippingAddressOverride(d):void 0;return yield e.createPayment({flow:\"checkout\",enableShippingAddress:!0,shippingAddressEditable:!1,shippingAddressOverride:l,amount:r,currency:o,offerCredit:!0,intent:null===(n=s.initializationData)||void 0===n?void 0:n.intent})}catch(e){const{container:i,onError:n}=t;this.handleError(e,i,n)}})}tokenizePayment(e,t,i,n){return rt(this,void 0,void 0,function*(){try{const{deviceData:n}=yield this.braintreeIntegrationService.getDataCollector({paypal:!0}),r=yield t.tokenizePayment(e),{details:o,nonce:a}=r,s=this.braintreeIntegrationService.mapToLegacyBillingAddress(o),d=this.braintreeIntegrationService.mapToLegacyShippingAddress(o);return this.formPoster.postForm(\"/checkout.php\",{payment_type:\"paypal\",provider:i,action:\"set_external_checkout\",nonce:a,device_data:n,billing_address:JSON.stringify(s),shipping_address:JSON.stringify(d)}),r}catch(e){const{container:t,onError:i}=n;this.handleError(e,t,i)}})}handleError(e,t,i){if(this.braintreeIntegrationService.removeElement(t),!i||!D(e))throw e;i(e)}}const at=L(t=>{const i=window,n=new F(t),r=new de(new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),i,n),i);return new ot(t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_4__.createFormPoster)(),r,i)},[{id:\"braintreepaypalcredit\"}]);var st=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class dt{constructor(e,t){this.paymentIntegrationService=e,this.braintreeFastlaneUtils=t,this.isAcceleratedCheckoutEnabled=!1}initialize({methodId:e,braintreefastlane:t}){var i;return st(this,void 0,void 0,function*(){if(!e)throw new V('Unable to proceed because \"methodId\" argument is not provided.');const n=yield this.getValidPaymentMethodOrThrow(e),{isAcceleratedCheckoutEnabled:r,isFastlaneStylingEnabled:o}=n.initializationData||{},a=o?null===(i=n.initializationData)||void 0===i?void 0:i.fastlaneStyles:void 0;this.isAcceleratedCheckoutEnabled=!!r;try{if(this.isAcceleratedCheckoutEnabled){const e=Me(a,null==t?void 0:t.styles);yield this.braintreeFastlaneUtils.initializeBraintreeFastlaneOrThrow(n.id,e)}}catch(e){}return Promise.resolve()})}deinitialize(){return st(this,void 0,void 0,function*(){return Promise.resolve()})}signIn(e,t){return st(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return st(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){return st(this,void 0,void 0,function*(){const{checkoutPaymentMethodExecuted:t,continueWithCheckoutCallback:i}=e||{};if(\"function\"!=typeof i)throw new V('Unable to proceed because \"continueWithCheckoutCallback\" argument is not provided and it must be a function.');const n=this.paymentIntegrationService.getState().getCustomerOrThrow();if(this.isAcceleratedCheckoutEnabled&&n.isGuest){const e=yield this.shouldRunAuthenticationFlow();t&&\"function\"==typeof t&&t(),e&&(yield this.braintreeFastlaneUtils.runPayPalAuthenticationFlowOrThrow(void 0,!0))}i()})}shouldRunAuthenticationFlow(){var e;return st(this,void 0,void 0,function*(){const t=\"braintreeacceleratedcheckout\";try{yield this.paymentIntegrationService.loadPaymentMethod(t);const i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t);return(null===(e=i.initializationData)||void 0===e?void 0:e.shouldRunAcceleratedCheckout)||!1}catch(e){return!1}})}getValidPaymentMethodOrThrow(e){return st(this,void 0,void 0,function*(){let t=e;try{yield this.paymentIntegrationService.loadPaymentMethod(t)}catch(i){t=\"braintree\"===e?\"braintreeacceleratedcheckout\":\"braintree\",yield this.paymentIntegrationService.loadPaymentMethod(t)}return this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t)})}}const lt=L(t=>{const i=window,n=new F(t),r=new de(new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),i,n),i),o=new Ve(t,r);return new dt(t,o)},[{id:\"braintreeacceleratedcheckout\"},{id:\"braintree\"}]);class ct extends p{constructor(e){super(e||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}var ut=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ht{constructor(e,t,i){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeSdk=i,this.buttonClassName=\"visa-checkout-wrapper\",this.onError=lodash__WEBPACK_IMPORTED_MODULE_1__.noop}initialize(e){return ut(this,void 0,void 0,function*(){const{braintreevisacheckout:t,methodId:i}=e;if(!i)throw new V('Unable to proceed because \"methodId\" argument is not provided.');if(!t)throw new V('Unable to proceed because \"options.braintreevisacheckout\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(i);const n=this.paymentIntegrationService.getState(),r=n.getCheckoutOrThrow(),{clientToken:a,config:s}=n.getPaymentMethodOrThrow(i),d=n.getStoreConfigOrThrow();if(!a)throw new U(j.MissingPaymentMethod);this.braintreeSdk.initialize(a);const l=yield this.braintreeSdk.getBraintreeVisaCheckout(),c=yield this.braintreeSdk.getVisaCheckoutSdk(s.testMode),{container:u,onError:h}=t;this.onError=h||lodash__WEBPACK_IMPORTED_MODULE_1__.noop;const y=l.createInitOptions({paymentRequest:{currencyCode:d.currency.code,subtotal:String(r.subtotal)},settings:{locale:d.storeProfile.storeLanguage,shipping:{collectShipping:!0}}}),m=this.createSignInButton(u,this.buttonClassName);yield c.init(y),c.on(\"payment.success\",e=>this.tokenizePayment(l,e).then(()=>this.paymentIntegrationService.loadCheckout()).catch(e=>this.handleError(e))),c.on(\"payment.error\",(e,t)=>this.handleError(t)),m.style.visibility=\"visible\"})}deinitialize(){return ut(this,void 0,void 0,function*(){yield this.braintreeSdk.deinitialize()})}signIn(){throw new ct('In order to sign in via VisaCheckout, the shopper must click on \"Visa Checkout\" button.')}signOut(e){return ut(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}tokenizePayment(e,t){return ut(this,void 0,void 0,function*(){return Promise.all([e.tokenize(t),this.braintreeSdk.getDataCollectorOrThrow()]).then(([e,t])=>{const i=this.paymentIntegrationService.getState(),n=i.getShippingAddress(),r=i.getBillingAddress(),{shippingAddress:o=this.mapToVisaCheckoutAddress(n),billingAddress:a=this.mapToVisaCheckoutAddress(r)}=e;return this.postForm(Object.assign(Object.assign({},e),{shippingAddress:o,billingAddress:a}),t)})})}postForm(e,t){const{userData:i,billingAddress:n,shippingAddress:r,details:o}=e,{userEmail:a}=i,{deviceData:s}=t;return this.formPoster.postForm(\"/checkout.php\",{payment_type:e.type,nonce:e.nonce,provider:\"braintreevisacheckout\",action:\"set_external_checkout\",device_data:s,card_information:JSON.stringify({type:o.cardType,number:o.lastTwo}),billing_address:JSON.stringify(this.getAddress(a,n)),shipping_address:JSON.stringify(this.getAddress(a,r))})}mapToVisaCheckoutAddress(e){return e?{firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phone,streetAddress:e.address1,extendedAddress:e.address2,locality:e.city,region:e.stateOrProvinceCode,countryCode:e.countryCode,postalCode:e.postalCode}:{}}getAddress(e,t={}){return{email:e,first_name:t.firstName,last_name:t.lastName,phone_number:t.phoneNumber,address_line_1:t.streetAddress,address_line_2:t.extendedAddress,city:t.locality,state:t.region,country_code:t.countryCode,postal_code:t.postalCode}}createSignInButton(e,t){const i=document.querySelector(`#${e}`);if(!i)throw new Error(\"Unable to proceed because the provided container ID is not valid.\");return this.insertVisaCheckoutButton(i,t)}insertVisaCheckoutButton(e,t){const i=document.createElement(\"div\");return i.style.display=\"flex\",i.style.flexDirection=\"column\",i.style.visibility=\"hidden\",i.style.width=\"max-content\",i.className=t,i.innerHTML='\\n            <img\\n                alt=\"Visa Checkout\"\\n                class=\"v-button\"\\n                role=\"button\"\\n                src=\"https://secure.checkout.visa.com/wallet-services-web/xo/button.png?acceptCanadianVisaDebit=false&cobrand=true&height=34&width=178\"\\n                />\\n            <a class=\"v-learn v-learn-default\" style=\"text-align: right; display: block; font-size: 10px; color: #003366;\" href=\"#\" data-locale=\"en_US\">Tell Me More</a>',e.appendChild(i),i}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const yt=L(t=>{const i=window,n=new F(t),r=new B(new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),i,n));return new ht(t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_4__.createFormPoster)(),r)},[{id:\"braintreevisacheckout\"}]);class mt extends p{constructor(e){super(e||\"An unexpected error has occurred during buy now cart creation process. Please try again later.\"),this.name=\"BuyNowCartCreationError\",this.type=\"buy_now_cart_creation_error\"}}function pt(e){const{color:t,fundingicons:i,height:n=40,layout:o,shape:a,size:d,tagline:l}=e||{},c={color:t,fundingicons:i,height:gt(n),layout:o,shape:a||\"rect\",size:d,tagline:l};return (0,lodash__WEBPACK_IMPORTED_MODULE_1__.omitBy)(c,lodash__WEBPACK_IMPORTED_MODULE_1__.isNil)}function gt(e){const t=Number(e);return!t||Number.isNaN(t)?40:t>55?55:t<25?25:t}var vt=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ft{constructor(e,t,i,n){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeIntegrationService=i,this.braintreeHostWindow=n}initialize(e){return vt(this,void 0,void 0,function*(){const{braintreepaypal:t,containerId:i,methodId:n}=e;if(!n)throw new V('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new V('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new V('Unable to initialize payment because \"options.braintreepaypal\" argument is not provided.');let r,o=this.paymentIntegrationService.getState();if(t.buyNowInitializeOptions){if(!t.currencyCode)throw new V('Unable to initialize payment because \"options.braintreepaypalcredit.currencyCode\" argument is not provided.');r=t.currencyCode}else yield this.paymentIntegrationService.loadDefaultCheckout(),o=this.paymentIntegrationService.getState(),r=o.getCartOrThrow().currency.code;const a=o.getPaymentMethodOrThrow(n),{clientToken:s,config:d,initializationData:l}=a;if(!s||!l)throw new U(j.MissingPaymentMethod);const c={currency:r,intent:l.intent,isCreditEnabled:l.isCreditEnabled};this.braintreeIntegrationService.initialize(s),yield this.braintreeIntegrationService.getPaypalCheckout(c,e=>{this.renderPayPalButton(e,t,i,n,!!d.testMode)},e=>this.handleError(e,i,t.onError))})}deinitialize(){return vt(this,void 0,void 0,function*(){yield this.braintreeIntegrationService.teardown()})}renderPayPalButton(e,t,i,n,r){const{style:o,shouldProcessPayment:a,onAuthorizeError:s,onEligibilityFailure:d}=t,{paypal:l}=this.braintreeHostWindow;if(l){const c=l.Buttons({env:r?\"sandbox\":\"production\",fundingSource:l.FUNDING.PAYPAL,style:pt(o),createOrder:()=>this.setupPayment(e,t,n),onApprove:t=>this.tokenizePayment(t,e,n,a,s)});c.isEligible()?c.render(`#${i}`):d&&\"function\"==typeof d&&d()}else this.braintreeIntegrationService.removeElement(i)}setupPayment(e,t,i){var n;return vt(this,void 0,void 0,function*(){const{onPaymentError:r,shippingAddress:o,buyNowInitializeOptions:a}=t;try{const r=\"function\"==typeof(null==a?void 0:a.getBuyNowCartRequestBody)?yield this.createBuyNowCart(a.getBuyNowCartRequestBody()):void 0;this.buyNowCartId=null==r?void 0:r.id;const s=this.paymentIntegrationService.getState(),d=s.getCustomer(),l=s.getPaymentMethodOrThrow(i),c=r?r.cartAmount:s.getCartOrThrow().cartAmount,u=r?t.currencyCode:s.getCartOrThrow().currency.code,h=o||(null==d?void 0:d.addresses[0]),y=h?ge(h):void 0;return yield e.createPayment({flow:\"checkout\",enableShippingAddress:!0,shippingAddressEditable:!1,shippingAddressOverride:y,amount:c,currency:u,offerCredit:!1,intent:null===(n=l.initializationData)||void 0===n?void 0:n.intent})}catch(e){throw r&&(D(e)||e instanceof p)&&r(e),e}})}tokenizePayment(e,t,i,n,r){return vt(this,void 0,void 0,function*(){try{const{deviceData:r}=yield this.braintreeIntegrationService.getDataCollector({paypal:!0}),o=yield t.tokenizePayment(e),{details:a,nonce:s}=o,d=this.braintreeIntegrationService.mapToLegacyBillingAddress(a),l=this.braintreeIntegrationService.mapToLegacyShippingAddress(a);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",provider:i,action:n?\"process_payment\":\"set_external_checkout\",nonce:s,device_data:r,billing_address:JSON.stringify(d),shipping_address:JSON.stringify(l)},this.buyNowCartId&&{cart_id:this.buyNowCartId})),o}catch(e){throw r&&(D(e)||e instanceof p)&&r(e),e}})}createBuyNowCart(e){return vt(this,void 0,void 0,function*(){if(!e)throw new U(j.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(e)}catch(e){throw new mt}})}handleError(e,t,i){if(this.braintreeIntegrationService.removeElement(t),!i||!D(e))throw e;i(e)}}const bt=L(t=>{const i=window,n=new F(t),r=new de(new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),i,n),i);return new ft(t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_4__.createFormPoster)(),r,i)},[{id:\"braintreepaypal\"}]);var wt=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ct{constructor(e,t,i,n,r){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeIntegrationService=i,this.braintreeMessages=n,this.braintreeHostWindow=r}initialize(e){var t,i;return wt(this,void 0,void 0,function*(){const{braintreepaypalcredit:n,containerId:r,methodId:o}=e;if(!o)throw new V('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!r)throw new V('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!n)throw new V('Unable to initialize payment because \"options.braintreepaypalcredit\" argument is not provided.');let a,s=this.paymentIntegrationService.getState();if(n.buyNowInitializeOptions){if(!n.currencyCode)throw new V('Unable to initialize payment because \"options.braintreepaypalcredit.currencyCode\" argument is not provided.');a=n.currencyCode}else yield this.paymentIntegrationService.loadDefaultCheckout(),s=this.paymentIntegrationService.getState(),a=s.getCartOrThrow().currency.code;const d=s.getPaymentMethodOrThrow(o),{clientToken:l,config:c,initializationData:u}=d;if(!l||!u)throw new U(j.MissingPaymentMethod);const h={currency:a,intent:u.intent,isCreditEnabled:u.isCreditEnabled},y=x(null!==(i=null===(t=s.getStoreConfig())||void 0===t?void 0:t.checkoutSettings.features)&&void 0!==i?i:{},\"PAYPAL-5663.hide_braintree_card_banner_implementation_in_checkout_sdk\");this.braintreeIntegrationService.initialize(l),yield this.braintreeIntegrationService.getPaypalCheckout(h,e=>{!y&&n.messagingContainerId&&this.renderPayPalMessages(o,n.messagingContainerId),this.renderPayPalButton(e,n,r,o,!!c.testMode)},e=>this.handleError(e,r,n.onError))})}deinitialize(){return wt(this,void 0,void 0,function*(){yield this.braintreeIntegrationService.teardown()})}renderPayPalMessages(e,t){this.braintreeMessages.render(e,t,ae.CART)}renderPayPalButton(e,t,i,n,r){const{style:o,shouldProcessPayment:a,onAuthorizeError:s,onEligibilityFailure:d}=t,{paypal:l}=this.braintreeHostWindow;let c=!1;l&&[l.FUNDING.PAYLATER,l.FUNDING.CREDIT].forEach(u=>{const h=u===l.FUNDING.CREDIT?Object.assign({label:re.CREDIT},pt(o)):pt(o);if(!c){const o=l.Buttons({env:r?\"sandbox\":\"production\",fundingSource:u,style:h,createOrder:()=>this.setupPayment(e,t,n),onApprove:t=>this.tokenizePayment(t,e,n,a,s)});o.isEligible()?(o.render(`#${i}`),c=!0):l.FUNDING.CREDIT&&d&&\"function\"==typeof d&&d()}}),l&&c||this.braintreeIntegrationService.removeElement(i)}setupPayment(e,t,i){var n;return wt(this,void 0,void 0,function*(){const{onPaymentError:r,shippingAddress:o,buyNowInitializeOptions:a}=t;try{const r=\"function\"==typeof(null==a?void 0:a.getBuyNowCartRequestBody)?yield this.createBuyNowCart(a.getBuyNowCartRequestBody()):void 0;this.buyNowCartId=null==r?void 0:r.id;const s=this.paymentIntegrationService.getState(),d=s.getCustomer(),l=s.getPaymentMethodOrThrow(i),c=r?r.cartAmount:s.getCartOrThrow().cartAmount,u=r?t.currencyCode:s.getCartOrThrow().currency.code,h=o||(null==d?void 0:d.addresses[0]),y=h?ge(h):void 0;return yield e.createPayment({flow:\"checkout\",enableShippingAddress:!0,shippingAddressEditable:!1,shippingAddressOverride:y,amount:c,currency:u,offerCredit:!0,intent:null===(n=l.initializationData)||void 0===n?void 0:n.intent})}catch(e){throw r&&(D(e)||e instanceof p)&&r(e),e}})}tokenizePayment(e,t,i,n,r){return wt(this,void 0,void 0,function*(){try{const{deviceData:r}=yield this.braintreeIntegrationService.getDataCollector({paypal:!0}),o=yield t.tokenizePayment(e),{details:a,nonce:s}=o,d=this.braintreeIntegrationService.mapToLegacyBillingAddress(a),l=this.braintreeIntegrationService.mapToLegacyShippingAddress(a);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",provider:i,action:n?\"process_payment\":\"set_external_checkout\",nonce:s,device_data:r,billing_address:JSON.stringify(d),shipping_address:JSON.stringify(l)},this.buyNowCartId&&{cart_id:this.buyNowCartId})),o}catch(e){throw r&&(D(e)||e instanceof p)&&r(e),e}})}createBuyNowCart(e){return wt(this,void 0,void 0,function*(){if(!e)throw new U(j.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(e)}catch(e){throw new mt}})}handleError(e,t,i){if(this.braintreeIntegrationService.removeElement(t),!i||!D(e))throw e;i(e)}}const St=L(t=>{const i=window,n=new F(t),r=new de(new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),i,n),i),o=new le(t);return new Ct(t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_4__.createFormPoster)(),r,o,i)},[{id:\"braintreepaypalcredit\"}]);var Pt=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class It{constructor(e,t,i){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeSdk=i}initialize(e){return Pt(this,void 0,void 0,function*(){const{containerId:t,methodId:i}=e;if(!i)throw new V('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new V('Unable to initialize payment because \"options.containerId\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(i);const n=this.paymentIntegrationService.getState(),{clientToken:r,initializationData:o,config:a}=n.getPaymentMethodOrThrow(i);if(!r||!o)throw new U(j.MissingPaymentMethod);this.braintreeSdk.initialize(r);const s=yield this.braintreeSdk.getBraintreeVisaCheckout(),{currency:{code:d},cartAmount:l}=n.getCartOrThrow(),c=yield this.braintreeSdk.getVisaCheckoutSdk(a.testMode),u=s.createInitOptions({paymentRequest:{currencyCode:d,subtotal:String(l)},settings:{shipping:{collectShipping:!0}}});this.createSignInButton(t),yield c.init(u),c.on(\"payment.success\",e=>Pt(this,void 0,void 0,function*(){yield this.paymentSuccess(s,e)}))})}deinitialize(){return Promise.resolve()}paymentSuccess(e,t){return Pt(this,void 0,void 0,function*(){return Promise.all([e.tokenize(t),this.braintreeSdk.getDataCollectorOrThrow()]).then(([e,t])=>{const i=this.paymentIntegrationService.getState(),n=i.getShippingAddress(),r=i.getBillingAddress(),{shippingAddress:o=this.toVisaCheckoutAddress(n),billingAddress:a=this.toVisaCheckoutAddress(r)}=e;return this.postForm(Object.assign(Object.assign({},e),{shippingAddress:o,billingAddress:a}),t)})})}postForm(e,t){const{userData:i,billingAddress:n,shippingAddress:r,details:o}=e,{userEmail:a}=i,{deviceData:s}=t;return this.formPoster.postForm(\"/checkout.php\",{payment_type:e.type,nonce:e.nonce,provider:\"braintreevisacheckout\",action:\"set_external_checkout\",device_data:s,card_information:JSON.stringify({type:o.cardType,number:o.lastTwo}),billing_address:JSON.stringify(this.getAddress(a,n)),shipping_address:JSON.stringify(this.getAddress(a,r))})}toVisaCheckoutAddress(e){return e?{firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phone,streetAddress:e.address1,extendedAddress:e.address2,locality:e.city,region:e.stateOrProvinceCode,countryCode:e.countryCode,postalCode:e.postalCode}:{}}getAddress(e,t={}){return{email:e,first_name:t.firstName,last_name:t.lastName,phone_number:t.phoneNumber,address_line_1:t.streetAddress,address_line_2:t.extendedAddress,city:t.locality,state:t.region,country_code:t.countryCode,postal_code:t.postalCode}}createSignInButton(e){const t=document.querySelector(`#${e}`);if(!t)throw new Error(\"Need a container to place the button\");return this.insertVisaCheckoutButton(t)}insertVisaCheckoutButton(e){const t=document.createElement(\"div\");return t.style.display=\"flex\",t.style.flexDirection=\"column\",t.style.alignItems=\"flex-end\",t.innerHTML='\\n            <img\\n                alt=\"Visa Checkout\"\\n                class=\"v-button\"\\n                role=\"button\"\\n                src=\"https://secure.checkout.visa.com/wallet-services-web/xo/button.png?acceptCanadianVisaDebit=false&cobrand=true&height=34&width=178\"\\n                />\\n            <a class=\"v-learn v-learn-default\" style=\"text-align: right; display: block; font-size: 10px; color: #003366;\" href=\"#\" data-locale=\"en_US\">Tell Me More</a>',e.appendChild(t),t}}const Ot=L(t=>{const i=window,n=new F(t),r=new B(new z((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),i,n));return new It(t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_4__.createFormPoster)(),r)},[{id:\"braintreevisacheckout\"}]);function kt(e){const{billingAddress:t,email:i,firstName:n,lastName:r,phone:o,shippingAddress:a}=e,s=t||a;return{email:i,first_name:n,last_name:r,phone_number:o,address_line_1:null==s?void 0:s.line1,address_line_2:null==s?void 0:s.line2,city:null==s?void 0:s.city,state:null==s?void 0:s.state,country_code:null==s?void 0:s.countryCode,postal_code:null==s?void 0:s.postalCode}}function Et(e){const{email:t,phone:i,shippingAddress:n}=e,r=(null==n?void 0:n.recipientName)||\"\",[o,a]=r.split(\" \");return{email:t,first_name:o||\"\",last_name:a||\"\",phone_number:i,address_line_1:null==n?void 0:n.line1,address_line_2:null==n?void 0:n.line2,city:null==n?void 0:n.city,state:null==n?void 0:n.state,country_code:null==n?void 0:n.countryCode,postal_code:null==n?void 0:n.postalCode}}var Tt=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};const At=e=>{const{color:t,height:i}=e;return{backgroundColor:(n=t||\"\",n===ne.WHITE?\"#FFFFFF\":\"#3D95CE\"),backgroundPosition:\"50% 50%\",backgroundSize:\"80px auto\",backgroundImage:`url(\"/app/assets/img/payment-providers/venmo-logo-${t===ne.WHITE?ne.BLUE:ne.WHITE}.svg\")`,backgroundRepeat:\"no-repeat\",borderRadius:\"4px\",cursor:\"pointer\",transition:\"0.2s ease\",minHeight:`${i||40}px`,minWidth:\"150px\",height:\"100%\",width:\"100%\",border:t===ne.WHITE?\"1px solid black\":\"none\"};// removed by dead control flow\n var n; };class zt{constructor(e,t,i){this.paymentIntegrationService=e,this.formPoster=t,this.braintreeSdk=i,this.onError=lodash__WEBPACK_IMPORTED_MODULE_1__.noop}initialize(e){return Tt(this,void 0,void 0,function*(){const{braintreevenmo:t,containerId:i,methodId:n}=e;if(!n)throw new V('Unable to initialize payment because \"options.methodId\" argument is not provided.');const r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n),{clientToken:o,initializationData:a}=r,{paymentButtonStyles:s}=a,{cartButtonStyles:d}=s||{},l=(null==t?void 0:t.style)||d;if(!o||!a)throw new U(j.MissingPaymentMethod);if(!i)throw new V('Unable to initialize payment because \"options.containerId\" argument is not provided.');yield this.paymentIntegrationService.loadDefaultCheckout(),this.onError=(null==t?void 0:t.onError)||this.handleError,this.braintreeSdk.initialize(o);try{const e=yield this.braintreeSdk.getVenmoCheckoutOrThrow();this.renderVenmoButton(e,i,null==t?void 0:t.buyNowInitializeOptions,l)}catch(e){(pe(e)||function(e){return e instanceof N}(e))&&this.handleInitializationVenmoError(e,i)}})}deinitialize(){return Tt(this,void 0,void 0,function*(){return yield this.braintreeSdk.deinitialize(),Promise.resolve()})}handleError(e){throw new Error(e.message)}createBuyNowCart(e){return Tt(this,void 0,void 0,function*(){if(\"function\"==typeof(null==e?void 0:e.getBuyNowCartRequestBody)){const t=null==e?void 0:e.getBuyNowCartRequestBody();if(!t)throw new U(j.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(t)}catch(e){throw new mt}}})}handleInitializationVenmoError(e,t){return this.removeVenmoContainer(t),this.onError(e)}removeVenmoContainer(e){const t=document.getElementById(e);t&&t.remove()}renderVenmoButton(e,t,i,n){const r=document.getElementById(t),{color:o}=n||{};if(!r)throw new V(\"Unable to create wallet button without valid container ID.\");r.setAttribute(\"aria-label\",\"Venmo\"),Object.assign(r.style,At(n||{})),r.addEventListener(\"click\",()=>Tt(this,void 0,void 0,function*(){r.setAttribute(\"disabled\",\"true\");const t=yield this.createBuyNowCart(i);e.tokenize&&e.tokenize((e,i)=>Tt(this,void 0,void 0,function*(){r.removeAttribute(\"disabled\"),e&&this.onError(e),yield this.handlePostForm(i,null==t?void 0:t.id)}))})),o===ne.BLUE&&(r.addEventListener(\"mouseenter\",()=>{r.style.backgroundColor=\"#0a7fc2\"}),r.addEventListener(\"mouseleave\",()=>{r.style.backgroundColor=At(n||{}).backgroundColor}))}handlePostForm(e,t){return Tt(this,void 0,void 0,function*(){const{deviceData:i}=yield this.braintreeSdk.getDataCollectorOrThrow(),{nonce:n,details:r}=e;this.formPoster.postForm(\"/checkout.php\",Object.assign({nonce:n,provider:\"braintreevenmo\",payment_type:\"paypal\",device_data:i,action:\"set_external_checkout\",billing_address:JSON.stringify(kt(r)),shipping_address:JSON.stringify(Et(r))},t&&{cart_id:t}))})}}const Nt=L(t=>{const i=window,n=(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),r=new F(t),o=new z(n,i,r),a=new B(o);return new zt(t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_4__.createFormPoster)(),a)},[{id:\"braintreevenmo\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9icmFpbnRyZWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsSUNvQ1lBLEVBVUFDLEVBeVRBQyxFQ2pXRyxNQUFlQyxVQUFzQkMsTUFJaEQsV0FBQUMsQ0FBWUMsR0NYRCxJQUFxQ0MsRURZNUNDLE1BQU1GLEdBQVcscUNBSnJCLEtBQUFHLEtBQU8sZ0JBQ1AsS0FBQUMsS0FBTyxXQ1R5Q0gsYURjWkEsVUNiaENJLE9BQU9DLGVBQ1BELE9BQU9DLGVEWVFDLEtDWmVOLEdEWWZNLEtDVlJDLFVBQVlQLEVEWW9CLG1CQUE1QkgsTUFBTVcsa0JBQ2JYLE1BQU1XLGtCQUFrQkYsaUJBRXhCQSxLQUFLRyxNQUFRLElBQUlaLE1BQU1TLEtBQUtQLFNBQVNVLEtBRTdDLEVFZlcsTUFBTUMsVUFBNENkLEVBQzdELFdBQUFFLENBQVlDLEdBQ1JFLE1BQ0lGLEdBQ0ksdUdBR1JPLEtBQUtKLEtBQU8sc0NBQ1pJLEtBQUtILEtBQU8sbUNBQ2hCLEdIc0JKLFNBQVlWLEdBQ1Isb0JBQ0EseUJBQ0gsQ0FIRCxDQUFZQSxJQUFBQSxFQUFZLEtBVXhCLFNBQVlDLEdBQ1Isa0JBQ0EsZ0NBQ0Esc0JBQ0EsZ0NBQ0EsOEJBQ0EsOEJBQ0Esa0JBQ0Esa0NBQ0EsOEJBQ0EsZ0NBQ0EsZ0JBQ0EsNkJBQ0gsQ0FiRCxDQUFZQSxJQUFBQSxFQUFtQixLQXlUL0IsU0FBWUMsR0FDUixzQkFDQSw4Q0FDQSwwQkFDQSxzQkFDQSwwQkFDQSxpREFDSCxDQVBELENBQVlBLElBQUFBLEVBQXNCLEtJeFczQixNQUFNZ0IsRUFBMEMsVUFDMUNDLEVBQWdDLFVBQ2hDQyxFQUErQixVQ0svQkMsRUFBa0MsQ0FDM0MsQ0FBQ0QsR0FBK0IsQ0FDNUIsQ0FBQ25CLEVBQW9CcUIsUUFDakIsMEVBQ0osQ0FBQ3JCLEVBQW9Cc0IsZ0JBQ2pCLDBFQUNKLENBQUN0QixFQUFvQnVCLFFBQ2pCLDBFQUNKLENB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QUFTRCxJQUV2QyxFLEVFN09KLE1BcUJBLEdBQWV4M0IsRUFuQlZaLElBQ0QsTUFBTXpHLEVBQTJDMkcsT0FDM0M1RyxFQUFla04sMkVBQUFBLEdBQ2ZoTixFQUE2QixJQUFJdUcsRUFBMkJDLEdBQzVEeEQsRUFBd0IsSUFBSW5ELEVBQzlCQyxFQUNBQyxFQUNBQyxHQUdFc0osRUFBZSxJQUFJdkcsRUFBYUMsR0FFdEMsT0FBTyxJQUFJbTlCLEdBQ1AzNUIsRUFDQWl1QiwwRUFBQUEsR0FDQW5yQixJQUk4RCxDQUFDLENBQUUyRCxHQUFJLG9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL2Jvb3RzdHJhcD9mZmNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtdXRpbHMvc3JjL2JyYWludHJlZS50cz9hNzhlIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3N0YW5kYXJkLWVycm9yLnRzPzhhMDMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc2V0LXByb3RvdHlwZS1vZi50cz84NDVhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWNsaWVudC11bmF2YWlsYWJsZS1lcnJvci50cz9mOGVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtdXRpbHMvc3JjL2JyYWludHJlZS1zZGstdmVyaXNvbi50cz9mOWFiIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtdXRpbHMvc3JjL2JyYWludHJlZS1zZGstc2NyaXB0cy1pbnRlZ3JpdHkudHM/YjI4NyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW5pdGlhbGl6ZWQtZXJyb3IudHM/OGI0ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLXV0aWxzL3NyYy90eXBlcy50cz8zMDIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtdXRpbHMvc3JjL2JyYWludHJlZS1zY3JpcHQtbG9hZGVyLnRzPzY2YWIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS11dGlscy9zcmMvaXNNYW5hZ2VhYmxlQnJhaW50cmVlU0RLVmVyc2lvbi50cz9mZDcwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvdW5zdXBwb3J0ZWQtYnJvd3Nlci1lcnJvci50cz85OTdkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtdXRpbHMvc3JjL3V0aWxzL2lzLWJyYWludHJlZS1lcnJvci50cz8zMjg4Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtdXRpbHMvc3JjL2JyYWludHJlZS1zZGsudHM/ODA2NCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdXRpbGl0eS9zcmMvaXMtZXhwZXJpbWVudC1lbmFibGVkL2lzLWV4cGVyaW1lbnQtZW5hYmxlZC50cz9jOWE0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtdXRpbHMvc3JjL2JyYWludHJlZS1zZGstdmVyc2lvbi1tYW5hZ2VyLnRzPzA0ZjgiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2ludmFsaWQtYXJndW1lbnQtZXJyb3IudHM/MzkyMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9taXNzaW5nLWRhdGEtZXJyb3IudHM/YjdkYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LWFyZ3VtZW50LWludmFsaWQtZXJyb3IudHM/YTUwMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaXMtdmF1bHRlZC1pbnN0cnVtZW50LnRzPzE4MGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvb3JkZXItZmluYWxpemF0aW9uLW5vdC1yZXF1aXJlZC1lcnJvci50cz9iNWExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy1ob3N0ZWQtaW50cnVtZW50LWxpa2UudHM/ODc2MyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1mYWlsZWQtZXJyb3IudHM/MDdkZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLWludGVncmF0aW9uL3NyYy9pcy11cy1iYW5rLWFjY291bnQtaW5zdHJ1bWVudC1saWtlLnRzPzE1MDAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLWFjaC9icmFpbnRyZWUtYWNoLXBheW1lbnQtc3RyYXRlZ3kudHM/YWVjZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLWludGVncmF0aW9uL3NyYy9icmFpbnRyZWUtYWNoL2NyZWF0ZS1icmFpbnRyZWUtYWNoLXBheW1lbnQtc3RyYXRlZ3kudHM/NTVjNiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLXV0aWxzL3NyYy9jcmVhdGUtYnJhaW50cmVlLXNkay50cz8zNGU0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtaW52YWxpZC1mb3JtLWVycm9yLnRzP2MwZmIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtY2FuY2VsbGVkLWVycm9yLnRzPzA4OTAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vY2FuY2VsbGFibGUtcHJvbWlzZS9jYW5jZWxsYWJsZS1wcm9taXNlLnRzP2Y3NGEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS11dGlscy9zcmMvcGF5cGFsLnRzPzg5YzYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS11dGlscy9zcmMvYnJhaW50cmVlLWludGVncmF0aW9uLXNlcnZpY2UudHM/NTljYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLXV0aWxzL3NyYy91dGlscy9pcy1jcmVkaXQtY2FyZC1pbnN0cnVtZW50LWxpa2UudHM/MTkyOSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLXV0aWxzL3NyYy9icmFpbnRyZWUtbWVzc2FnZXMudHM/ODAzZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdWkvc3JjL292ZXJsYXkvb3ZlcmxheS50cz9lZjY4Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy91aS9zcmMvb3ZlcmxheS9vdmVybGF5LXN0eWxlLnRzPzc3MWYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3VpL3NyYy9sb2FkaW5nLWluZGljYXRvci9sb2FkaW5nLWluZGljYXRvci50cz9iMDg3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtaW50ZWdyYXRpb24vc3JjL2JyYWludHJlZS1wYXlwYWwtY29uc3RhbnRzLnRzPzE1YWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvaXMtYnJhaW50cmVlLWVycm9yLnRzPzY5YjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvbWFwLXRvLWJyYWludHJlZS1zaGlwcGluZy1hZGRyZXNzLW92ZXJyaWRlLnRzP2UzZTYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLXBheXBhbC9icmFpbnRyZWUtcGF5cGFsLXBheW1lbnQtc3RyYXRlZ3kudHM/MDI4ZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLWludGVncmF0aW9uL3NyYy9pcy1icmFpbnRyZWUtcGF5cGFsLXByb3ZpZGVyLWVycm9yLnRzPzg0MDAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLXBheXBhbC9jcmVhdGUtYnJhaW50cmVlLXBheXBhbC1wYXltZW50LXN0cmF0ZWd5LnRzPzJiMTMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2NvbnRlbnQtdHlwZS50cz81MDRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL2h0dHAtcmVxdWVzdC9zZGstdmVyc2lvbi1oZWFkZXJzLnRzPzdiZjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLXJlcXVlc3Qtc2VuZGVyLnRzPzM4ZmIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2ludGVybmFsLWFwaS1oZWFkZXJzLnRzPzQxMTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcmVxdWVzdC1lcnJvci50cz9jODQwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWludmFsaWQtZXJyb3IudHM/M2FkZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy90aW1lb3V0LWVycm9yLnRzPzA4MGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLWxvY2FsLXBheW1lbnQtbWV0aG9kcy9icmFpbnRyZWUtbG9jYWwtbWV0aG9kcy1wYXltZW50LXN0cmF0ZWd5LnRzPzNhMjMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLWxvY2FsLXBheW1lbnQtbWV0aG9kcy9jcmVhdGUtYnJhaW50cmVlLWxvY2FsLW1ldGhvZHMtcGF5bWVudC1zdHJhdGVneS50cz9mZGMzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtdXRpbHMvc3JjL3V0aWxzL2dldC1mYXN0bGFuZS1zdHlsZXMudHM/MzgwOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLXV0aWxzL3NyYy91dGlscy9pcy1icmFpbnRyZWUtYWNjZWxlcmF0ZWQtY2hlY2tvdXQtY3VzdG9tZXIudHM/NzU0MSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaW5zdHJ1bWVudC50cz9mMmI2Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtaW50ZWdyYXRpb24vc3JjL2JyYWludHJlZS1mYXN0bGFuZS9icmFpbnRyZWUtZmFzdGxhbmUtcGF5bWVudC1zdHJhdGVneS50cz9jMTFiIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdG9yYWdlL3NyYy9jb29raWUtc3RvcmFnZS50cz8xNTNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtaW50ZWdyYXRpb24vc3JjL2JyYWludHJlZS1mYXN0bGFuZS9icmFpbnRyZWUtZmFzdGxhbmUtdXRpbHMudHM/MWVkZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLWludGVncmF0aW9uL3NyYy9icmFpbnRyZWUtZmFzdGxhbmUvY3JlYXRlLWJyYWludHJlZS1mYXN0bGFuZS1wYXltZW50LXN0cmF0ZWd5LnRzP2ZjNTAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLXZpc2EtY2hlY2tvdXQvYnJhaW50cmVlLXZpc2EtY2hlY2tvdXQtcGF5bWVudC1zdHJhdGVneS50cz8xNDIyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtaW50ZWdyYXRpb24vc3JjL2JyYWludHJlZS12aXNhLWNoZWNrb3V0L2NyZWF0ZS1icmFpbnRyZWUtdmlzYS1jaGVja291dC1wYXltZW50LXN0cmF0ZWd5LnRzPzVlODgiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLXZlbm1vL2JyYWludHJlZS12ZW5tby1wYXltZW50LXN0cmF0ZWd5LnRzPzMwNzIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLXZlbm1vL2NyZWF0ZS1icmFpbnRyZWUtdmVubW8tcGF5bWVudC1zdHJhdGVneS50cz82MzY1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtaW50ZWdyYXRpb24vc3JjL2JyYWludHJlZS1jcmVkaXQtY2FyZC9icmFpbnRyZWUtY3JlZGl0LWNhcmQtcGF5bWVudC1zdHJhdGVneS50cz9hOWE5Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2lzLXJlcXVlc3QtZXJyb3IudHM/YjQzZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLXV0aWxzL3NyYy91dGlscy9pcy1icmFpbnRyZWUtcGF5bWVudC1yZXF1ZXN0LTNkcy1lcnJvci50cz9iODM3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtdXRpbHMvc3JjL3V0aWxzL2lzLWJyYWludHJlZS1mb3JtLWZpZWxkcy1tYXAudHM/MWU0YyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLXV0aWxzL3NyYy91dGlscy9pcy1icmFpbnRyZWUtaG9zdGVkLWZvcm0tZXJyb3IudHM/ZWQ1OSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLWludGVncmF0aW9uL3NyYy9icmFpbnRyZWUtaG9zdGVkLWZvcm0vYnJhaW50cmVlLWhvc3RlZC1mb3JtLnRzPzUxYzEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS11dGlscy9zcmMvdXRpbHMvaXMtYnJhaW50cmVlLXN1cHBvcnRlZC1jYXJkLWJyYW5kLnRzP2Y5ZTciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLWNyZWRpdC1jYXJkL2NyZWF0ZS1icmFpbnRyZWUtY3JlZGl0LWNhcmQtcGF5bWVudC1zdHJhdGVneS50cz9hNTBhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtaW50ZWdyYXRpb24vc3JjL2JyYWludHJlZS1wYXlwYWwvYnJhaW50cmVlLXBheXBhbC1jdXN0b21lci1zdHJhdGVneS50cz84MGI1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY2hlY2tvdXQtYnV0dG9ucy9kZWZhdWx0LWNoZWNrb3V0LWJ1dHRvbi1oZWlnaHQudHM/ZDQyNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLWludGVncmF0aW9uL3NyYy9icmFpbnRyZWUtcGF5cGFsL2NyZWF0ZS1icmFpbnRyZWUtcGF5cGFsLWN1c3RvbWVyLXN0cmF0ZWd5LnRzPzBmZGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLXBheXBhbC1jcmVkaXQvYnJhaW50cmVlLXBheXBhbC1jcmVkaXQtY3VzdG9tZXItc3RyYXRlZ3kudHM/YjAzMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLWludGVncmF0aW9uL3NyYy9icmFpbnRyZWUtcGF5cGFsLWNyZWRpdC9jcmVhdGUtYnJhaW50cmVlLXBheXBhbC1jcmVkaXQtY3VzdG9tZXItc3RyYXRlZ3kudHM/NjZjZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLWludGVncmF0aW9uL3NyYy9icmFpbnRyZWUtZmFzdGxhbmUvYnJhaW50cmVlLWZhc3RsYW5lLWN1c3RvbWVyLXN0cmF0ZWd5LnRzP2JkMDciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLWZhc3RsYW5lL2NyZWF0ZS1icmFpbnRyZWUtZmFzdGxhbmUtY3VzdG9tZXItc3RyYXRlZ3kudHM/NWU3MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW1wbGVtZW50ZWQtZXJyb3IudHM/M2EzNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLWludGVncmF0aW9uL3NyYy9icmFpbnRyZWUtdmlzYS1jaGVja291dC9icmFpbnRyZWUtdmlzYS1jaGVja291dC1jdXN0b21lci1zdHJhdGVneS50cz9kY2FmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtaW50ZWdyYXRpb24vc3JjL2JyYWludHJlZS12aXNhLWNoZWNrb3V0L2NyZWF0ZS1icmFpbnRyZWUtdmlzYS1jaGVja291dC1jdXN0b21lci1zdHJhdGVneS50cz9iN2IyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2J1eS1ub3ctY2FydC1jcmVhdGlvbi1lcnJvci50cz9kNjA0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtaW50ZWdyYXRpb24vc3JjL2dldC12YWxpZC1idXR0b24tc3R5bGUudHM/ZTM4OCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLWludGVncmF0aW9uL3NyYy9icmFpbnRyZWUtcGF5cGFsL2JyYWludHJlZS1wYXlwYWwtYnV0dG9uLXN0cmF0ZWd5LnRzP2RiMWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLXBheXBhbC9jcmVhdGUtYnJhaW50cmVlLXBheXBhbC1idXR0b24tc3RyYXRlZ3kudHM/ZmYxNCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLWludGVncmF0aW9uL3NyYy9icmFpbnRyZWUtcGF5cGFsLWNyZWRpdC9icmFpbnRyZWUtcGF5cGFsLWNyZWRpdC1idXR0b24tc3RyYXRlZ3kudHM/NTNjZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLWludGVncmF0aW9uL3NyYy9icmFpbnRyZWUtcGF5cGFsLWNyZWRpdC9jcmVhdGUtYnJhaW50cmVlLXBheXBhbC1jcmVkaXQtYnV0dG9uLXN0cmF0ZWd5LnRzPzg2NDIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLXZpc2EtY2hlY2tvdXQvYnJhaW50cmVlLXZpc2EtY2hlY2tvdXQtYnV0dG9uLXN0cmF0ZWd5LnRzP2YyNGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLXZpc2EtY2hlY2tvdXQvY3JlYXRlLWJyYWludHJlZS12aXNhLWNoZWNrb3V0LWJ1dHRvbi1zdHJhdGVneS50cz82MDc3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9icmFpbnRyZWUtdXRpbHMvc3JjL21hcC10by1sZWdhY3ktYmlsbGluZy1hZGRyZXNzLnRzPzlkMzkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS11dGlscy9zcmMvbWFwLXRvLWxlZ2FjeS1zaGlwcGluZy1hZGRyZXNzLnRzPzQxNDAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLXZlbm1vL2JyYWludHJlZS12ZW5tby1idXR0b24tc3RyYXRlZ3kudHM/MzliOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYnJhaW50cmVlLWludGVncmF0aW9uL3NyYy9pc1Vuc3VwcG9ydGVkQnJvd3NlckVycm9yLnRzP2JlMWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JyYWludHJlZS1pbnRlZ3JhdGlvbi9zcmMvYnJhaW50cmVlLXZlbm1vL2NyZWF0ZS1icmFpbnRyZWUtdmVubW8tYnV0dG9uLXN0cmF0ZWd5LnRzPzc4YTkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsImltcG9ydCB7IE9taXQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBQYXlwYWxBdXRob3JpemVEYXRhLFxuICAgIFBheXBhbEJ1dHRvbk9wdGlvbnMsXG4gICAgUGF5cGFsQnV0dG9uUmVuZGVyLFxuICAgIFBheXBhbFNESyxcbiAgICBQYXlwYWxTdHlsZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsJztcbmltcG9ydCB7XG4gICAgQnJhaW50cmVlQ2xpZW50Q3JlYXRvcixcbiAgICBCcmFpbnRyZWVEYXRhQ29sbGVjdG9yQ3JlYXRvcixcbiAgICBCcmFpbnRyZWVFcnJvcixcbiAgICBCcmFpbnRyZWVGYXN0bGFuZUNyZWF0b3IsXG4gICAgQnJhaW50cmVlR29vZ2xlUGF5bWVudENyZWF0b3IsXG4gICAgQnJhaW50cmVlSG9zdGVkRmllbGRzVG9rZW5pemVQYXlsb2FkLFxuICAgIEJyYWludHJlZU1vZHVsZSxcbiAgICBCcmFpbnRyZWVNb2R1bGVDcmVhdG9yLFxuICAgIEJyYWludHJlZU1vZHVsZUNyZWF0b3JDb25maWcsXG4gICAgQnJhaW50cmVlVGhyZWVEU2VjdXJlQ3JlYXRvcixcbiAgICBCcmFpbnRyZWVUb2tlbml6YXRpb25EZXRhaWxzLFxuICAgIEJyYWludHJlZVVzQmFua0FjY291bnRDcmVhdG9yLFxuICAgIEJyYWludHJlZVdpbmRvdyxcbiAgICBGYXN0bGFuZVN0eWxlc1NldHRpbmdzLFxuICAgIFZpc2FDaGVja291dFNESyxcbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge1xuICAgIFZpc2FDaGVja291dEluaXRPcHRpb25zLFxuICAgIFZpc2FDaGVja291dFBheW1lbnRTdWNjZXNzUGF5bG9hZCxcbiAgICBWaXNhQ2hlY2tvdXRUb2tlbml6ZWRQYXlsb2FkLFxufSBmcm9tICcuL3Zpc2FjaGVja291dCc7XG5cbi8qKlxuICpcbiAqIENvbnN0YW50c1xuICpcbiAqL1xuZXhwb3J0IGVudW0gQnJhaW50cmVlRW52IHtcbiAgICBTYW5kYm94ID0gJ3NhbmRib3gnLFxuICAgIFByb2R1Y3Rpb24gPSAncHJvZHVjdGlvbicsXG59XG5cbi8qKlxuICpcbiAqIENvbW1vblxuICpcbiAqL1xuZXhwb3J0IGVudW0gQnJhaW50cmVlTW9kdWxlTmFtZSB7XG4gICAgQ2xpZW50ID0gJ2NsaWVudCcsXG4gICAgRGF0YUNvbGxlY3RvciA9ICdkYXRhQ29sbGVjdG9yJyxcbiAgICBGYXN0bGFuZSA9ICdmYXN0bGFuZScsXG4gICAgR29vZ2xlUGF5bWVudCA9ICdnb29nbGVQYXltZW50JyxcbiAgICBIb3N0ZWRGaWVsZHMgPSAnaG9zdGVkRmllbGRzJyxcbiAgICBMb2NhbFBheW1lbnQgPSAnbG9jYWxQYXltZW50JyxcbiAgICBQYXlwYWwgPSAncGF5cGFsJyxcbiAgICBQYXlwYWxDaGVja291dCA9ICdwYXlwYWxDaGVja291dCcsXG4gICAgVGhyZWVEU2VjdXJlID0gJ3RocmVlRFNlY3VyZScsXG4gICAgVXNCYW5rQWNjb3VudCA9ICd1c0JhbmtBY2NvdW50JyxcbiAgICBWZW5tbyA9ICd2ZW5tbycsXG4gICAgVmlzYUNoZWNrb3V0ID0gJ3Zpc2FDaGVja291dCcsXG59XG5cbmV4cG9ydCB0eXBlIEJyYWludHJlZU1vZHVsZUNyZWF0b3JzID1cbiAgICB8IEJyYWludHJlZUNsaWVudENyZWF0b3JcbiAgICB8IEJyYWludHJlZUZhc3RsYW5lQ3JlYXRvclxuICAgIHwgQnJhaW50cmVlRGF0YUNvbGxlY3RvckNyZWF0b3JcbiAgICB8IEJyYWludHJlZUdvb2dsZVBheW1lbnRDcmVhdG9yXG4gICAgfCBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNDcmVhdG9yXG4gICAgfCBCcmFpbnRyZWVQYXlwYWxDcmVhdG9yXG4gICAgfCBCcmFpbnRyZWVQYXlwYWxDaGVja291dENyZWF0b3JcbiAgICB8IEJyYWludHJlZVRocmVlRFNlY3VyZUNyZWF0b3JcbiAgICB8IEJyYWludHJlZVZlbm1vQ2hlY2tvdXRDcmVhdG9yXG4gICAgfCBCcmFpbnRyZWVWaXNhQ2hlY2tvdXRDcmVhdG9yXG4gICAgfCBCcmFpbnRyZWVVc0JhbmtBY2NvdW50Q3JlYXRvclxuICAgIHwgQnJhaW50cmVlTG9jYWxQYXltZW50Q3JlYXRvcjtcblxuLy8gVE9ETzogcmVuYW1lIHRvIEJyYWludHJlZVNka01vZHVsZXNcbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlU0RLIHtcbiAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5DbGllbnRdPzogQnJhaW50cmVlQ2xpZW50Q3JlYXRvcjtcbiAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5GYXN0bGFuZV0/OiBCcmFpbnRyZWVGYXN0bGFuZUNyZWF0b3I7XG4gICAgW0JyYWludHJlZU1vZHVsZU5hbWUuRGF0YUNvbGxlY3Rvcl0/OiBCcmFpbnRyZWVEYXRhQ29sbGVjdG9yQ3JlYXRvcjtcbiAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5Hb29nbGVQYXltZW50XT86IEJyYWludHJlZUdvb2dsZVBheW1lbnRDcmVhdG9yO1xuICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLkhvc3RlZEZpZWxkc10/OiBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNDcmVhdG9yO1xuICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLlBheXBhbF0/OiBCcmFpbnRyZWVQYXlwYWxDcmVhdG9yO1xuICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLlBheXBhbENoZWNrb3V0XT86IEJyYWludHJlZVBheXBhbENoZWNrb3V0Q3JlYXRvcjtcbiAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5UaHJlZURTZWN1cmVdPzogQnJhaW50cmVlVGhyZWVEU2VjdXJlQ3JlYXRvcjtcbiAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5WZW5tb10/OiBCcmFpbnRyZWVWZW5tb0NoZWNrb3V0Q3JlYXRvcjtcbiAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5WaXNhQ2hlY2tvdXRdPzogQnJhaW50cmVlVmlzYUNoZWNrb3V0Q3JlYXRvcjtcbiAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5Vc0JhbmtBY2NvdW50XT86IEJyYWludHJlZVVzQmFua0FjY291bnRDcmVhdG9yO1xuICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLkxvY2FsUGF5bWVudF0/OiBCcmFpbnRyZWVMb2NhbFBheW1lbnRDcmVhdG9yO1xufVxuXG5leHBvcnQgdHlwZSBCcmFpbnRyZWVMb2NhbFBheW1lbnRDcmVhdG9yID0gQnJhaW50cmVlTW9kdWxlQ3JlYXRvcjxcbiAgICBCcmFpbnRyZWVMb2NhbFBheW1lbnQsXG4gICAgQnJhaW50cmVlTG9jYWxQYXltZW50Q3JlYXRlQ29uZmlnLFxuICAgIEJyYWludHJlZUVycm9yIHwgdW5kZWZpbmVkXG4+O1xuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUxvY2FsUGF5bWVudENyZWF0ZUNvbmZpZyBleHRlbmRzIEJyYWludHJlZU1vZHVsZUNyZWF0b3JDb25maWcge1xuICAgIG1lcmNoYW50QWNjb3VudElkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhIHtcbiAgICBjbGllbnRUb2tlbjogc3RyaW5nO1xuICAgIGVuYWJsZUNoZWNrb3V0UGF5d2FsbEJhbm5lcj86IGJvb2xlYW47XG4gICAgaW50ZW50PzogJ2F1dGhvcml6ZScgfCAnb3JkZXInIHwgJ3NhbGUnO1xuICAgIGlzQ3JlZGl0RW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNBY2NlbGVyYXRlZENoZWNrb3V0RW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkPzogYm9vbGVhbjtcbiAgICBpc0Zhc3RsYW5lRW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNGYXN0bGFuZVNoaXBwaW5nT3B0aW9uQXV0b1NlbGVjdEVuYWJsZWQ/OiBib29sZWFuO1xuICAgIGZhc3RsYW5lU3R5bGVzPzogRmFzdGxhbmVTdHlsZXNTZXR0aW5ncztcbiAgICBpc0JyYWludHJlZUFuYWx5dGljc1YyRW5hYmxlZD86IGJvb2xlYW47XG4gICAgc2hvdWxkUnVuQWNjZWxlcmF0ZWRDaGVja291dD86IGJvb2xlYW47IC8vIFRPRE86IG9ubHkgZm9yIEJUIEFYTyBBL0IgdGVzdGluZyBwdXJwb3NlcywgaGVuY2Ugc2hvdWxkIGJlIHJlbW92ZWQgYWZ0ZXIgdGVzdGluZ1xuICAgIHBheW1lbnRCdXR0b25TdHlsZXM/OiBSZWNvcmQ8c3RyaW5nLCBQYXlwYWxTdHlsZU9wdGlvbnM+O1xuICAgIHBheXBhbEJOUExDb25maWd1cmF0aW9uPzogUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtW10gfCBudWxsO1xuICAgIG5vbmNlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZVBheXBhbFJlcXVlc3Qge1xuICAgIGFtb3VudDogc3RyaW5nIHwgbnVtYmVyO1xuICAgIGJpbGxpbmdBZ3JlZW1lbnREZXNjcmlwdGlvbj86IHN0cmluZztcbiAgICBjdXJyZW5jeT86IHN0cmluZztcbiAgICBkaXNwbGF5TmFtZT86IHN0cmluZztcbiAgICBlbmFibGVTaGlwcGluZ0FkZHJlc3M6IHRydWU7XG4gICAgZmxvdzogJ2NoZWNrb3V0JyB8ICd2YXVsdCc7XG4gICAgaW50ZW50PzogJ2F1dGhvcml6ZScgfCAnb3JkZXInIHwgJ3NhbGUnO1xuICAgIGxhbmRpbmdQYWdlVHlwZT86ICdsb2dpbicgfCAnYmlsbGluZyc7XG4gICAgbG9jYWxlPzogc3RyaW5nO1xuICAgIG9mZmVyQ3JlZGl0PzogYm9vbGVhbjtcbiAgICBzaGlwcGluZ0FkZHJlc3NFZGl0YWJsZT86IGJvb2xlYW47XG4gICAgc2hpcHBpbmdBZGRyZXNzT3ZlcnJpZGU/OiBCcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3NPdmVycmlkZTtcbiAgICB1c2VyYWN0aW9uPzogJ2NvbW1pdCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlU2hpcHBpbmdBZGRyZXNzT3ZlcnJpZGUge1xuICAgIGxpbmUxOiBzdHJpbmc7XG4gICAgbGluZTI/OiBzdHJpbmc7XG4gICAgY2l0eTogc3RyaW5nO1xuICAgIHN0YXRlOiBzdHJpbmc7XG4gICAgcG9zdGFsQ29kZTogc3RyaW5nO1xuICAgIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgcGhvbmU/OiBzdHJpbmc7XG4gICAgcmVjaXBpZW50TmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVUb2tlbml6ZVBheWxvYWQge1xuICAgIG5vbmNlOiBzdHJpbmc7XG4gICAgdHlwZTogJ1BheXBhbEFjY291bnQnIHwgJ1Zlbm1vQWNjb3VudCc7XG4gICAgZGV0YWlsczogQnJhaW50cmVlVG9rZW5pemF0aW9uRGV0YWlscztcbiAgICBjcmVkaXRGaW5hbmNpbmdPZmZlcmVkPzoge1xuICAgICAgICB0b3RhbENvc3Q6IHtcbiAgICAgICAgICAgIHZhbHVlOiBzdHJpbmc7XG4gICAgICAgICAgICBjdXJyZW5jeTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICB0ZXJtOiBudW1iZXI7XG4gICAgICAgIG1vbnRobHlQYXltZW50OiB7XG4gICAgICAgICAgICB2YWx1ZTogc3RyaW5nO1xuICAgICAgICAgICAgY3VycmVuY3k6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgdG90YWxJbnN0ZXJlc3Q6IHtcbiAgICAgICAgICAgIHZhbHVlOiBzdHJpbmc7XG4gICAgICAgICAgICBjdXJyZW5jeTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBwYXllckFjY2VwdGFuY2U6IGJvb2xlYW47XG4gICAgICAgIGNhcnRBbW91bnRJbW11dGFibGU6IGJvb2xlYW47XG4gICAgfTtcbn1cblxuZXhwb3J0IHR5cGUgQnJhaW50cmVlRm9ybUVycm9yRGF0YSA9IE9taXQ8QnJhaW50cmVlRm9ybUZpZWxkU3RhdGUsICdpc0ZvY3VzZWQnPjtcblxuZXhwb3J0IHR5cGUgQnJhaW50cmVlRm9ybUVycm9yRGF0YUtleXMgPVxuICAgIHwgJ251bWJlcidcbiAgICB8ICdleHBpcmF0aW9uRGF0ZSdcbiAgICB8ICdleHBpcmF0aW9uTW9udGgnXG4gICAgfCAnZXhwaXJhdGlvblllYXInXG4gICAgfCAnY3Z2J1xuICAgIHwgJ3Bvc3RhbENvZGUnO1xuXG5leHBvcnQgdHlwZSBCcmFpbnRyZWVGb3JtRXJyb3JzRGF0YSA9IFBhcnRpYWw8XG4gICAgUmVjb3JkPEJyYWludHJlZUZvcm1FcnJvckRhdGFLZXlzLCBCcmFpbnRyZWVGb3JtRXJyb3JEYXRhPlxuPjtcblxuLyoqXG4gKlxuICogQnJhaW50cmVlIEhvc3RlZCBGaWVsZHNcbiAqXG4gKi9cbmV4cG9ydCB0eXBlIEJyYWludHJlZUhvc3RlZEZpZWxkc0NyZWF0b3IgPSBCcmFpbnRyZWVNb2R1bGVDcmVhdG9yPFxuICAgIEJyYWludHJlZUhvc3RlZEZpZWxkcyxcbiAgICBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNDcmVhdG9yQ29uZmlnXG4+O1xuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUhvc3RlZEZpZWxkcyB7XG4gICAgZ2V0U3RhdGUoKTogQnJhaW50cmVlSG9zdGVkRmllbGRzU3RhdGU7XG4gICAgdGVhcmRvd24oKTogUHJvbWlzZTx2b2lkPjtcbiAgICB0b2tlbml6ZShcbiAgICAgICAgb3B0aW9ucz86IEJyYWludHJlZUhvc3RlZEZpZWxkc1Rva2VuaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPEJyYWludHJlZUhvc3RlZEZpZWxkc1Rva2VuaXplUGF5bG9hZD47XG4gICAgb24oZXZlbnROYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiAoZXZlbnQ6IEJyYWludHJlZUhvc3RlZEZpZWxkc1N0YXRlKSA9PiB2b2lkKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNDcmVhdG9yQ29uZmlnIGV4dGVuZHMgQnJhaW50cmVlTW9kdWxlQ3JlYXRvckNvbmZpZyB7XG4gICAgZmllbGRzOiB7XG4gICAgICAgIG51bWJlcj86IEJyYWludHJlZUhvc3RlZEZpZWxkT3B0aW9uO1xuICAgICAgICBleHBpcmF0aW9uRGF0ZT86IEJyYWludHJlZUhvc3RlZEZpZWxkT3B0aW9uO1xuICAgICAgICBleHBpcmF0aW9uTW9udGg/OiBCcmFpbnRyZWVIb3N0ZWRGaWVsZE9wdGlvbjtcbiAgICAgICAgZXhwaXJhdGlvblllYXI/OiBCcmFpbnRyZWVIb3N0ZWRGaWVsZE9wdGlvbjtcbiAgICAgICAgY3Z2PzogQnJhaW50cmVlSG9zdGVkRmllbGRPcHRpb247XG4gICAgICAgIHBvc3RhbENvZGU/OiBCcmFpbnRyZWVIb3N0ZWRGaWVsZE9wdGlvbjtcbiAgICAgICAgY2FyZGhvbGRlck5hbWU/OiBCcmFpbnRyZWVIb3N0ZWRGaWVsZE9wdGlvbjtcbiAgICB9O1xuICAgIHN0eWxlcz86IHtcbiAgICAgICAgaW5wdXQ/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgICAgICAnLmludmFsaWQnPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJy52YWxpZCc/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgICAgICAnOmZvY3VzJz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgfTtcbiAgICBwcmV2ZW50Q3Vyc29ySnVtcHM/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUhvc3RlZEZpZWxkT3B0aW9uIHtcbiAgICBjb250YWluZXI6IHN0cmluZyB8IEhUTUxFbGVtZW50O1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAgIHR5cGU/OiBzdHJpbmc7XG4gICAgZm9ybWF0SW5wdXQ/OiBib29sZWFuO1xuICAgIG1hc2tJbnB1dD86IGJvb2xlYW4gfCB7IGNoYXJhY3Rlcj86IHN0cmluZzsgc2hvd0xhc3RGb3VyPzogc3RyaW5nIH07XG4gICAgc2VsZWN0PzogYm9vbGVhbiB8IHsgb3B0aW9ucz86IHN0cmluZ1tdIH07XG4gICAgbWF4Q2FyZExlbmd0aD86IG51bWJlcjtcbiAgICBtYXhsZW5ndGg/OiBudW1iZXI7XG4gICAgbWlubGVuZ3RoPzogbnVtYmVyO1xuICAgIHByZWZpbGw/OiBzdHJpbmc7XG4gICAgcmVqZWN0VW5zdXBwb3J0ZWRDYXJkcz86IGJvb2xlYW47XG4gICAgc3VwcG9ydGVkQ2FyZEJyYW5kcz86IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUhvc3RlZEZpZWxkc1N0YXRlIHtcbiAgICBjYXJkczogQnJhaW50cmVlSG9zdGVkRmllbGRzQ2FyZFtdO1xuICAgIGVtaXR0ZWRCeTogc3RyaW5nO1xuICAgIGZpZWxkczoge1xuICAgICAgICBudW1iZXI/OiBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGV4cGlyYXRpb25EYXRlPzogQnJhaW50cmVlSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBleHBpcmF0aW9uTW9udGg/OiBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGV4cGlyYXRpb25ZZWFyPzogQnJhaW50cmVlSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBjdnY/OiBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIHBvc3RhbENvZGU/OiBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNDYXJkIHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgbmljZVR5cGU6IHN0cmluZztcbiAgICBjb2RlOiB7IG5hbWU6IHN0cmluZzsgc2l6ZTogbnVtYmVyIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlSG9zdGVkRmllbGRzRmllbGREYXRhIHtcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgICBpc0VtcHR5OiBib29sZWFuO1xuICAgIGlzUG90ZW50aWFsbHlWYWxpZDogYm9vbGVhbjtcbiAgICBpc1ZhbGlkOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUhvc3RlZEZpZWxkc1Rva2VuaXplT3B0aW9ucyB7XG4gICAgdmF1bHQ/OiBib29sZWFuO1xuICAgIGZpZWxkc1RvVG9rZW5pemU/OiBzdHJpbmdbXTtcbiAgICBjYXJkaG9sZGVyTmFtZT86IHN0cmluZztcbiAgICBiaWxsaW5nQWRkcmVzcz86IEJyYWludHJlZUJpbGxpbmdBZGRyZXNzUmVxdWVzdERhdGE7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlQmlsbGluZ0FkZHJlc3NSZXF1ZXN0RGF0YSB7XG4gICAgcG9zdGFsQ29kZT86IHN0cmluZztcbiAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgbGFzdE5hbWU/OiBzdHJpbmc7XG4gICAgY29tcGFueT86IHN0cmluZztcbiAgICBzdHJlZXRBZGRyZXNzPzogc3RyaW5nO1xuICAgIGV4dGVuZGVkQWRkcmVzcz86IHN0cmluZztcbiAgICBsb2NhbGl0eT86IHN0cmluZztcbiAgICByZWdpb24/OiBzdHJpbmc7XG4gICAgY291bnRyeUNvZGVOdW1lcmljPzogc3RyaW5nO1xuICAgIGNvdW50cnlDb2RlQWxwaGEyPzogc3RyaW5nO1xuICAgIGNvdW50cnlDb2RlQWxwaGEzPzogc3RyaW5nO1xuICAgIGNvdW50cnlOYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUhvc3RlZEZvcm1FcnJvciBleHRlbmRzIEJyYWludHJlZUVycm9yIHtcbiAgICBkZXRhaWxzPzoge1xuICAgICAgICBpbnZhbGlkRmllbGRLZXlzPzogc3RyaW5nW107XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGb3JtRmllbGRTdGF0ZSB7XG4gICAgaXNGb2N1c2VkOiBib29sZWFuO1xuICAgIGlzRW1wdHk6IGJvb2xlYW47XG4gICAgaXNQb3RlbnRpYWxseVZhbGlkOiBib29sZWFuO1xuICAgIGlzVmFsaWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9rZW5pemF0aW9uUGF5bG9hZCB7XG4gICAgbm9uY2U6IHN0cmluZztcbiAgICBiaW46IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICogQnJhaW50cmVlIFBheVBhbFxuICpcbiAqL1xuZXhwb3J0IHR5cGUgQnJhaW50cmVlUGF5cGFsQ3JlYXRvciA9IEJyYWludHJlZU1vZHVsZUNyZWF0b3I8QnJhaW50cmVlUGF5cGFsPjtcblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVQYXlwYWwge1xuICAgIGNsb3NlV2luZG93KCk6IHZvaWQ7XG4gICAgZm9jdXNXaW5kb3coKTogdm9pZDtcbiAgICB0b2tlbml6ZShvcHRpb25zOiBCcmFpbnRyZWVQYXlwYWxSZXF1ZXN0KTogUHJvbWlzZTxCcmFpbnRyZWVUb2tlbml6ZVBheWxvYWQ+O1xuICAgIEJ1dHRvbnM/KG9wdGlvbnM6IFBheXBhbEJ1dHRvbk9wdGlvbnMpOiBQYXlwYWxCdXR0b25SZW5kZXI7XG59XG5cbi8qKlxuICogQSBzZXQgb2Ygb3B0aW9ucyB0aGF0IGFyZSByZXF1aXJlZCB0byBzdXBwb3J0IDNEIFNlY3VyZSBhdXRoZW50aWNhdGlvbiBmbG93LlxuICpcbiAqIElmIHRoZSBjdXN0b21lciB1c2VzIGEgY3JlZGl0IGNhcmQgdGhhdCBoYXMgM0QgU2VjdXJlIGVuYWJsZWQsIHRoZXkgd2lsbCBiZVxuICogYXNrZWQgdG8gdmVyaWZ5IHRoZWlyIGlkZW50aXR5IHdoZW4gdGhleSBwYXkuIFRoZSB2ZXJpZmljYXRpb24gaXMgZG9uZVxuICogdGhyb3VnaCBhIHdlYiBwYWdlIHZpYSBhbiBpZnJhbWUgcHJvdmlkZWQgYnkgdGhlIGNhcmQgaXNzdWVyLlxuICovXG4vLyBleHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZVRocmVlRFNlY3VyZU9wdGlvbnMge1xuLy8gICAgIC8qKlxuLy8gICAgICAqIEEgY2FsbGJhY2sgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBpZnJhbWUgaXMgcmVhZHkgdG8gYmUgYWRkZWQgdG8gdGhlXG4vLyAgICAgICogY3VycmVudCBwYWdlLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgZGV0ZXJtaW5pbmcgd2hlcmUgdGhlIGlmcmFtZSBzaG91bGRcbi8vICAgICAgKiBiZSBpbnNlcnRlZCBpbiB0aGUgRE9NLlxuLy8gICAgICAqXG4vLyAgICAgICogQHBhcmFtIGVycm9yIC0gQW55IGVycm9yIHJhaXNlZCBkdXJpbmcgdGhlIHZlcmlmaWNhdGlvbiBwcm9jZXNzO1xuLy8gICAgICAqIHVuZGVmaW5lZCBpZiB0aGVyZSBpcyBub25lLlxuLy8gICAgICAqIEBwYXJhbSBpZnJhbWUgLSBUaGUgaWZyYW1lIGVsZW1lbnQgY29udGFpbmluZyB0aGUgdmVyaWZpY2F0aW9uIHdlYiBwYWdlXG4vLyAgICAgICogcHJvdmlkZWQgYnkgdGhlIGNhcmQgaXNzdWVyLlxuLy8gICAgICAqIEBwYXJhbSBjYW5jZWwgLSBBIGZ1bmN0aW9uLCB3aGVuIGNhbGxlZCwgd2lsbCBjYW5jZWwgdGhlIHZlcmlmaWNhdGlvblxuLy8gICAgICAqIHByb2Nlc3MgYW5kIHJlbW92ZSB0aGUgaWZyYW1lLlxuLy8gICAgICAqL1xuLy8gICAgIGFkZEZyYW1lKFxuLy8gICAgICAgICBlcnJvcjogRXJyb3IgfCB1bmRlZmluZWQsXG4vLyAgICAgICAgIGlmcmFtZTogSFRNTElGcmFtZUVsZW1lbnQsXG4vLyAgICAgICAgIGNhbmNlbDogKCkgPT4gUHJvbWlzZTxCcmFpbnRyZWVWZXJpZnlQYXlsb2FkPiB8IHVuZGVmaW5lZCxcbi8vICAgICApOiB2b2lkO1xuLy9cbi8vICAgICAvKipcbi8vICAgICAgKiBBIGNhbGxiYWNrIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgaWZyYW1lIGlzIGFib3V0IHRvIGJlIHJlbW92ZWQgZnJvbVxuLy8gICAgICAqIHRoZSBjdXJyZW50IHBhZ2UuXG4vLyAgICAgICovXG4vLyAgICAgcmVtb3ZlRnJhbWUoKTogdm9pZDtcbi8vIH1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGb3JtT3B0aW9ucyB7XG4gICAgZmllbGRzOiBCcmFpbnRyZWVGb3JtRmllbGRzTWFwIHwgQnJhaW50cmVlU3RvcmVkQ2FyZEZpZWxkc01hcDtcbiAgICBzdHlsZXM/OiBCcmFpbnRyZWVGb3JtRmllbGRTdHlsZXNNYXA7XG4gICAgb25CbHVyPyhkYXRhOiBCcmFpbnRyZWVGb3JtRmllbGRCbHVyRXZlbnREYXRhKTogdm9pZDtcbiAgICBvbkNhcmRUeXBlQ2hhbmdlPyhkYXRhOiBCcmFpbnRyZWVGb3JtRmllbGRDYXJkVHlwZUNoYW5nZUV2ZW50RGF0YSk6IHZvaWQ7XG4gICAgb25Gb2N1cz8oZGF0YTogQnJhaW50cmVlRm9ybUZpZWxkRm9jdXNFdmVudERhdGEpOiB2b2lkO1xuICAgIG9uVmFsaWRhdGU/KGRhdGE6IEJyYWludHJlZUZvcm1GaWVsZFZhbGlkYXRlRXZlbnREYXRhKTogdm9pZDtcbiAgICBvbkVudGVyPyhkYXRhOiBCcmFpbnRyZWVGb3JtRmllbGRFbnRlckV2ZW50RGF0YSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBlbnVtIEJyYWludHJlZUZvcm1GaWVsZFR5cGUge1xuICAgIENhcmRDb2RlID0gJ2NhcmRDb2RlJyxcbiAgICBDYXJkQ29kZVZlcmlmaWNhdGlvbiA9ICdjYXJkQ29kZVZlcmlmaWNhdGlvbicsXG4gICAgQ2FyZEV4cGlyeSA9ICdjYXJkRXhwaXJ5JyxcbiAgICBDYXJkTmFtZSA9ICdjYXJkTmFtZScsXG4gICAgQ2FyZE51bWJlciA9ICdjYXJkTnVtYmVyJyxcbiAgICBDYXJkTnVtYmVyVmVyaWZpY2F0aW9uID0gJ2NhcmROdW1iZXJWZXJpZmljYXRpb24nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUZvcm1GaWVsZHNNYXAge1xuICAgIFtCcmFpbnRyZWVGb3JtRmllbGRUeXBlLkNhcmRDb2RlXT86IEJyYWludHJlZUZvcm1GaWVsZE9wdGlvbnM7XG4gICAgW0JyYWludHJlZUZvcm1GaWVsZFR5cGUuQ2FyZEV4cGlyeV06IEJyYWludHJlZUZvcm1GaWVsZE9wdGlvbnM7XG4gICAgW0JyYWludHJlZUZvcm1GaWVsZFR5cGUuQ2FyZE5hbWVdOiBCcmFpbnRyZWVGb3JtRmllbGRPcHRpb25zO1xuICAgIFtCcmFpbnRyZWVGb3JtRmllbGRUeXBlLkNhcmROdW1iZXJdOiBCcmFpbnRyZWVGb3JtRmllbGRPcHRpb25zO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZVN0b3JlZENhcmRGaWVsZHNNYXAge1xuICAgIFtCcmFpbnRyZWVGb3JtRmllbGRUeXBlLkNhcmRDb2RlVmVyaWZpY2F0aW9uXT86IEJyYWludHJlZVN0b3JlZENhcmRGaWVsZE9wdGlvbnM7XG4gICAgW0JyYWludHJlZUZvcm1GaWVsZFR5cGUuQ2FyZE51bWJlclZlcmlmaWNhdGlvbl0/OiBCcmFpbnRyZWVTdG9yZWRDYXJkRmllbGRPcHRpb25zO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUZvcm1GaWVsZE9wdGlvbnMge1xuICAgIGFjY2Vzc2liaWxpdHlMYWJlbD86IHN0cmluZztcbiAgICBjb250YWluZXJJZDogc3RyaW5nO1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZVN0b3JlZENhcmRGaWVsZE9wdGlvbnMgZXh0ZW5kcyBCcmFpbnRyZWVGb3JtRmllbGRPcHRpb25zIHtcbiAgICBpbnN0cnVtZW50SWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGb3JtRmllbGRTdHlsZXNNYXAge1xuICAgIGRlZmF1bHQ/OiBCcmFpbnRyZWVGb3JtRmllbGRTdHlsZXM7XG4gICAgZXJyb3I/OiBCcmFpbnRyZWVGb3JtRmllbGRTdHlsZXM7XG4gICAgZm9jdXM/OiBCcmFpbnRyZWVGb3JtRmllbGRTdHlsZXM7XG59XG5cbmV4cG9ydCB0eXBlIEJyYWludHJlZUZvcm1GaWVsZFN0eWxlcyA9IFBhcnRpYWw8XG4gICAgUGljazxDU1NTdHlsZURlY2xhcmF0aW9uLCAnY29sb3InIHwgJ2ZvbnRGYW1pbHknIHwgJ2ZvbnRTaXplJyB8ICdmb250V2VpZ2h0Jz5cbj47XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlRm9ybUZpZWxkS2V5Ym9hcmRFdmVudERhdGEge1xuICAgIGZpZWxkVHlwZTogc3RyaW5nO1xuICAgIGVycm9ycz86IEJyYWludHJlZUZvcm1FcnJvcnNEYXRhO1xufVxuXG5leHBvcnQgdHlwZSBCcmFpbnRyZWVGb3JtRmllbGRCbHVyRXZlbnREYXRhID0gQnJhaW50cmVlRm9ybUZpZWxkS2V5Ym9hcmRFdmVudERhdGE7XG5leHBvcnQgdHlwZSBCcmFpbnRyZWVGb3JtRmllbGRFbnRlckV2ZW50RGF0YSA9IEJyYWludHJlZUZvcm1GaWVsZEtleWJvYXJkRXZlbnREYXRhO1xuZXhwb3J0IHR5cGUgQnJhaW50cmVlRm9ybUZpZWxkRm9jdXNFdmVudERhdGEgPSBCcmFpbnRyZWVGb3JtRmllbGRLZXlib2FyZEV2ZW50RGF0YTtcblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGb3JtRmllbGRDYXJkVHlwZUNoYW5nZUV2ZW50RGF0YSB7XG4gICAgY2FyZFR5cGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlRm9ybUZpZWxkVmFsaWRhdGVFdmVudERhdGEge1xuICAgIGVycm9yczoge1xuICAgICAgICBbQnJhaW50cmVlRm9ybUZpZWxkVHlwZS5DYXJkQ29kZV0/OiBCcmFpbnRyZWVGb3JtRmllbGRWYWxpZGF0ZUVycm9yRGF0YVtdO1xuICAgICAgICBbQnJhaW50cmVlRm9ybUZpZWxkVHlwZS5DYXJkRXhwaXJ5XT86IEJyYWludHJlZUZvcm1GaWVsZFZhbGlkYXRlRXJyb3JEYXRhW107XG4gICAgICAgIFtCcmFpbnRyZWVGb3JtRmllbGRUeXBlLkNhcmROYW1lXT86IEJyYWludHJlZUZvcm1GaWVsZFZhbGlkYXRlRXJyb3JEYXRhW107XG4gICAgICAgIFtCcmFpbnRyZWVGb3JtRmllbGRUeXBlLkNhcmROdW1iZXJdPzogQnJhaW50cmVlRm9ybUZpZWxkVmFsaWRhdGVFcnJvckRhdGFbXTtcbiAgICAgICAgW0JyYWludHJlZUZvcm1GaWVsZFR5cGUuQ2FyZENvZGVWZXJpZmljYXRpb25dPzogQnJhaW50cmVlRm9ybUZpZWxkVmFsaWRhdGVFcnJvckRhdGFbXTtcbiAgICAgICAgW0JyYWludHJlZUZvcm1GaWVsZFR5cGUuQ2FyZE51bWJlclZlcmlmaWNhdGlvbl0/OiBCcmFpbnRyZWVGb3JtRmllbGRWYWxpZGF0ZUVycm9yRGF0YVtdO1xuICAgIH07XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGb3JtRmllbGRWYWxpZGF0ZUVycm9yRGF0YSB7XG4gICAgZmllbGRUeXBlOiBzdHJpbmc7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIHR5cGU6IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICogQnJhaW50cmVlIFBheVBhbCBDaGVja291dFxuICpcbiAqL1xuZXhwb3J0IHR5cGUgQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXRDcmVhdG9yID0gQnJhaW50cmVlTW9kdWxlQ3JlYXRvcjxCcmFpbnRyZWVQYXlwYWxDaGVja291dD47XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQge1xuICAgIGxvYWRQYXlQYWxTREsoXG4gICAgICAgIGNvbmZpZzogQnJhaW50cmVlUGF5cGFsU2RrQ3JlYXRvckNvbmZpZyxcbiAgICAgICAgY2FsbGJhY2s6IChpbnN0YW5jZTogQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQpID0+IHZvaWQsXG4gICAgKTogdm9pZDtcbiAgICBjcmVhdGVQYXltZW50KG9wdGlvbnM6IEJyYWludHJlZVBheXBhbFJlcXVlc3QpOiBQcm9taXNlPHN0cmluZz47XG4gICAgdGVhcmRvd24oKTogUHJvbWlzZTx2b2lkPjtcbiAgICB0b2tlbml6ZVBheW1lbnQob3B0aW9uczogUGF5cGFsQXV0aG9yaXplRGF0YSk6IFByb21pc2U8QnJhaW50cmVlVG9rZW5pemVQYXlsb2FkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVQYXlwYWxTZGtDcmVhdG9yQ29uZmlnIHtcbiAgICBjb21wb25lbnRzPzogc3RyaW5nO1xuICAgIGN1cnJlbmN5Pzogc3RyaW5nO1xuICAgIGludGVudD86IHN0cmluZztcbiAgICBpc0NyZWRpdEVuYWJsZWQ/OiBib29sZWFuO1xuICAgIGNvbW1pdD86IGJvb2xlYW47XG59XG5cbi8qKlxuICpcbiAqIEJyYWludHJlZSBWZW5tb1xuICpcbiAqL1xuZXhwb3J0IHR5cGUgQnJhaW50cmVlVmVubW9DaGVja291dENyZWF0b3IgPSBCcmFpbnRyZWVNb2R1bGVDcmVhdG9yPFxuICAgIEJyYWludHJlZVZlbm1vQ2hlY2tvdXQsXG4gICAgQnJhaW50cmVlVmVubW9DcmVhdG9yQ29uZmlnXG4+O1xuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZVZlbm1vQ2hlY2tvdXQgZXh0ZW5kcyBCcmFpbnRyZWVNb2R1bGUge1xuICAgIHRva2VuaXplKGNhbGxiYWNrOiAoZXJyb3I6IEJyYWludHJlZUVycm9yLCBwYXlsb2FkOiBCcmFpbnRyZWVUb2tlbml6ZVBheWxvYWQpID0+IHVua25vd24pOiB2b2lkO1xuICAgIGlzQnJvd3NlclN1cHBvcnRlZCgpOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZVZlbm1vQ3JlYXRvckNvbmZpZyBleHRlbmRzIEJyYWludHJlZU1vZHVsZUNyZWF0b3JDb25maWcge1xuICAgIGFsbG93RGVza3RvcD86IGJvb2xlYW47XG4gICAgcGF5bWVudE1ldGhvZFVzYWdlPzogc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBCcmFpbnRyZWUgVmlzYSBDaGVja291dFxuICpcbiAqL1xuZXhwb3J0IHR5cGUgQnJhaW50cmVlVmlzYUNoZWNrb3V0Q3JlYXRvciA9IEJyYWludHJlZU1vZHVsZUNyZWF0b3I8QnJhaW50cmVlVmlzYUNoZWNrb3V0PjtcblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVWaXNhQ2hlY2tvdXQgZXh0ZW5kcyBCcmFpbnRyZWVNb2R1bGUge1xuICAgIHRva2VuaXplKHBheW1lbnQ6IFZpc2FDaGVja291dFBheW1lbnRTdWNjZXNzUGF5bG9hZCk6IFByb21pc2U8VmlzYUNoZWNrb3V0VG9rZW5pemVkUGF5bG9hZD47XG4gICAgY3JlYXRlSW5pdE9wdGlvbnMob3B0aW9uczogUGFydGlhbDxWaXNhQ2hlY2tvdXRJbml0T3B0aW9ucz4pOiBWaXNhQ2hlY2tvdXRJbml0T3B0aW9ucztcbn1cblxuLyoqXG4gKlxuICogQnJhaW50cmVlIEJOUEwgQ29uZmlndXJhdG9yIHJlbGF0ZWQgdHlwZXNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBzdGF0dXM6IGJvb2xlYW47XG4gICAgc3R5bGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xufVxuXG4vKipcbiAqXG4gKiBCcmFpbnRyZWUgTG9jYWwgTWV0aG9kc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVMb2NhbFBheW1lbnRDb25maWcge1xuICAgIHBheW1lbnRUeXBlOiBzdHJpbmc7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgZmFsbGJhY2s6IHtcbiAgICAgICAgdXJsOiBzdHJpbmc7XG4gICAgICAgIGJ1dHRvblRleHQ6IHN0cmluZztcbiAgICB9O1xuICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nO1xuICAgIHNoaXBwaW5nQWRkcmVzc1JlcXVpcmVkOiBib29sZWFuO1xuICAgIGVtYWlsOiBzdHJpbmc7XG4gICAgZ2l2ZW5OYW1lOiBzdHJpbmc7XG4gICAgc3VybmFtZTogc3RyaW5nO1xuICAgIGFkZHJlc3M6IHtcbiAgICAgICAgY291bnRyeUNvZGU6IHN0cmluZztcbiAgICB9O1xuICAgIG9uUGF5bWVudFN0YXJ0KGRhdGE6IEJyYWludHJlZUxQTVBheW1lbnRTdGFydERhdGEsIHN0YXJ0OiAoKSA9PiBQcm9taXNlPHZvaWQ+KTogUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVMUE1TdGFydFBheW1lbnRFcnJvciB7XG4gICAgY29kZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUxQTVBheW1lbnRTdGFydERhdGEge1xuICAgIHBheW1lbnRJZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUxvY2FsUGF5bWVudHNQYXlsb2FkIHtcbiAgICBub25jZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUxvY2FsUGF5bWVudCBleHRlbmRzIEJyYWludHJlZU1vZHVsZSB7XG4gICAgc3RhcnRQYXltZW50KFxuICAgICAgICBjb25maWc6IEJyYWludHJlZUxvY2FsUGF5bWVudENvbmZpZyxcbiAgICAgICAgY2FsbGJhY2s6IChcbiAgICAgICAgICAgIHN0YXJ0UGF5bWVudEVycm9yOiBCcmFpbnRyZWVMUE1TdGFydFBheW1lbnRFcnJvciB8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHBheWxvYWQ6IEJyYWludHJlZUxvY2FsUGF5bWVudHNQYXlsb2FkLFxuICAgICAgICApID0+IFByb21pc2U8dm9pZD4sXG4gICAgKTogdm9pZDtcbn1cblxuLyoqXG4gKlxuICogT3RoZXJcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlSG9zdFdpbmRvdyBleHRlbmRzIEJyYWludHJlZVdpbmRvdyB7XG4gICAgYnJhaW50cmVlPzogQnJhaW50cmVlU0RLO1xuICAgIHBheXBhbD86IFBheXBhbFNESztcbiAgICBWPzogVmlzYUNoZWNrb3V0U0RLO1xufVxuIiwiaW1wb3J0IEN1c3RvbUVycm9yIGZyb20gJy4vY3VzdG9tLWVycm9yJztcbmltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tICcuL3NldC1wcm90b3R5cGUtb2YnO1xuXG4vKipcbiAqIFRoaXMgZXJyb3IgdHlwZSBzaG91bGQgbm90IGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LiBJdCBpcyBhIGJhc2UgY2xhc3MgZm9yXG4gKiBhbGwgY3VzdG9tIGVycm9ycyB0aHJvd24gaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBDdXN0b21FcnJvciB7XG4gICAgbmFtZSA9ICdTdGFuZGFyZEVycm9yJztcbiAgICB0eXBlID0gJ3N0YW5kYXJkJztcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIG5ldy50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpLnN0YWNrO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0UHJvdG90eXBlT2Yob2JqZWN0OiBhbnksIHByb3RvdHlwZTogb2JqZWN0KSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqZWN0LCBwcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGZhaWxzXG4gKiB0byBsb2FkLCBvciBmb3Igc29tZSByZWFzb24sIGl0IGlzIGluYWNjZXNzaWJsZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGlzIG5vdCBsb2FkZWQgb3IgcmVhZHkgdG8gYmUgdXNlZC4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X21ldGhvZF9jbGllbnRfdW5hdmFpbGFibGUnO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBCUkFJTlRSRUVfU0RLX0hPU1RFRF9GSUVMRFNfRklYX1ZFUlNJT04gPSAnMy4xMjguMCc7XG5leHBvcnQgY29uc3QgQlJBSU5UUkVFX1NES19ERUZBVUxUX1ZFUlNJT04gPSAnMy4xMjMuMic7XG5leHBvcnQgY29uc3QgQlJBSU5UUkVFX1NES19TVEFCTEVfVkVSU0lPTiA9ICczLjEwNi4wJztcbiIsImltcG9ydCB7IEJyYWludHJlZU1vZHVsZU5hbWUgfSBmcm9tICcuL2JyYWludHJlZSc7XG5pbXBvcnQge1xuICAgIEJSQUlOVFJFRV9TREtfREVGQVVMVF9WRVJTSU9OLFxuICAgIEJSQUlOVFJFRV9TREtfSE9TVEVEX0ZJRUxEU19GSVhfVkVSU0lPTixcbiAgICBCUkFJTlRSRUVfU0RLX1NUQUJMRV9WRVJTSU9OLFxufSBmcm9tICcuL2JyYWludHJlZS1zZGstdmVyaXNvbic7XG5cbmV4cG9ydCBjb25zdCBCUkFJTlRSRUVfU0RLX1NDUklQVFNfSU5URUdSSVRZID0ge1xuICAgIFtCUkFJTlRSRUVfU0RLX1NUQUJMRV9WRVJTSU9OXToge1xuICAgICAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5DbGllbnRdOlxuICAgICAgICAgICAgJ3NoYTM4NC0yNkJYRE5uSkkyM0pZUnlGQmo0eGU0c1ZOclVTU2lTU3UxMWt4VlhOTS92RVBPTm00THVMMDB3NlphVGdRZXd0JyxcbiAgICAgICAgW0JyYWludHJlZU1vZHVsZU5hbWUuUGF5cGFsQ2hlY2tvdXRdOlxuICAgICAgICAgICAgJ3NoYTM4NC1CK3Z6Ylp3blF0eldCdGhwa1Q0VFhLVWliTzY1dHllSzdlQ3hTdnBibGdwclRlcDIrSUFYQjJDeHhqcm43MTBPJyxcbiAgICAgICAgW0JyYWludHJlZU1vZHVsZU5hbWUuUGF5cGFsXTpcbiAgICAgICAgICAgICdzaGEzODQtdXlBR0wxLzMrWEpBSG5Hb055NGVDb1hkeko0ZjdJbHpwKzZ3OVBObkVqczZEQ0N6OVdNeUpqTU4xZ3pjNzhVKycsXG4gICAgICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLkxvY2FsUGF5bWVudF06XG4gICAgICAgICAgICAnc2hhMzg0LUxJdk9FTWtJVkV3VnVZQmRWT1FjMUFDNVliR0dsd3lmVWhlUzBBQ0syMThEMlNUdVZZUWxaNEZ5RVBvd0FFZlQnLFxuICAgICAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5EYXRhQ29sbGVjdG9yXTpcbiAgICAgICAgICAgICdzaGEzODQtMWJvOUpEeitLc2N0aGMwODVjQ0tXdXI4Q0x3VW9CcG9OeXhzRGk3OTMybUNsMHpGcTNBNW12K0ZRTHc5R0hwVicsXG4gICAgICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLlVzQmFua0FjY291bnRdOlxuICAgICAgICAgICAgJ3NoYTM4NC14bUhCVmFVK3c3NFYrT2ViRDNBYVBPTkZ4SFVHTWYrUVJzOEcvSnhWUFhOTlA3TURhMmpMMElDV0hJZTJ0VGZKJyxcbiAgICAgICAgW0JyYWludHJlZU1vZHVsZU5hbWUuR29vZ2xlUGF5bWVudF06XG4gICAgICAgICAgICAnc2hhMzg0LVdLREpsOG1xb1A4MnFacE1HSDZBYlp4bnZYblNXOElMVjRNNjRDeU1MaXVnR013dTdMeVA4OXdqQ2tIcXNpQmUnLFxuICAgICAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5UaHJlZURTZWN1cmVdOlxuICAgICAgICAgICAgJ3NoYTM4NC1WUVVscEdIenNHdnM1WGVpR0ZpcDdFWFJzdm9IV0VYRFZtZ0NhY2ZieWllWkk5bWRCT3FxM05Tb3lvMjhPQ09CJyxcbiAgICAgICAgW0JyYWludHJlZU1vZHVsZU5hbWUuVmlzYUNoZWNrb3V0XTpcbiAgICAgICAgICAgICdzaGEzODQteXg3bUFEZnpUTjBUNDNRNnJsSDQ5TElnMUVKMGlVWmdCcC9FY3pYOUxYc1VHa3lTZ3hyRCtuV0hRUkJreWZvVCcsXG4gICAgICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLlZlbm1vXTpcbiAgICAgICAgICAgICdzaGEzODQtUVg0clBqb2oxWkRodUcwYVN5S3M1NmxFS0RxVE1UY2pZeFVIWTFTek81VlpEc3FJRTJOVGtxb3Q3S05TQ3lvdicsXG4gICAgICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLkhvc3RlZEZpZWxkc106XG4gICAgICAgICAgICAnc2hhMzg0LVZ2WUJBQ2ZTdTBDci9KMzJ1S214RzdBWGNOT0pFMUF6SUlMM2tiaWt5UzdZS3A1Zno1SXMrTnpOUC9seWF1TnknLFxuICAgICAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5GYXN0bGFuZV06XG4gICAgICAgICAgICAnc2hhMzg0LTlvR3NaTVJad3BHdERFRFlhL2RGdDc2ZEVDcWoxeEFuaTlnSUtnYzNLZk1JaVJuUjczbkVlZVVETGlCenhoRmEnLFxuICAgIH0sXG4gICAgW0JSQUlOVFJFRV9TREtfREVGQVVMVF9WRVJTSU9OXToge1xuICAgICAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5DbGllbnRdOlxuICAgICAgICAgICAgJ3NoYTM4NC1vK25iUUdjd05OeElCZVhldTMrWG1iU3ErQ2c4UjNFTjNOMGw1aFhDZ01NVTJSR1kwdDF6MExyb1NFSUFiZkFPJyxcbiAgICAgICAgW0JyYWludHJlZU1vZHVsZU5hbWUuUGF5cGFsQ2hlY2tvdXRdOlxuICAgICAgICAgICAgJ3NoYTM4NC1XcmZiV1BCUzRtSDg2R0FveWNQU2dpSDhoUThLSDdBNjdDOTNIamh1bnYveGhOazJZcEJuM3diRkE0RmhnOVUvJyxcbiAgICAgICAgW0JyYWludHJlZU1vZHVsZU5hbWUuUGF5cGFsXTpcbiAgICAgICAgICAgICdzaGEzODQtVkYzODludnZyUlVnRHNUWE14VFlPUkR0VmVnQjlJUWEzQ3hyLy9EeUpuTFluejgvWDhWQ3pFdmNrMmMrTWVndCcsXG4gICAgICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLkxvY2FsUGF5bWVudF06XG4gICAgICAgICAgICAnc2hhMzg0LXRaS3gyckVRYmZtWnBvUFNZNVZQbUpFaGFxNFg3NWRMdndITXMzVkU5VStDOGxQeXcraFdUSUwxK0dQdldDSUgnLFxuICAgICAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5EYXRhQ29sbGVjdG9yXTpcbiAgICAgICAgICAgICdzaGEzODQtRTZrM3dPcFA3c3lDRER3YVJETEYwNjk0MlkwME5rYndKdldpMk9RWHd3S3pHd0c1ZmQzRTdSRlV2Q0NlY2Z2TycsXG4gICAgICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLlVzQmFua0FjY291bnRdOlxuICAgICAgICAgICAgJ3NoYTM4NC0yNThGT044TFpHRzBXOVFhejRKaWo4M3BaSHUzMFluS2pKQTdnTnVsTEJoNkNjbGt1Y2dGK3RIRFF1WUZSWWZXJyxcbiAgICAgICAgW0JyYWludHJlZU1vZHVsZU5hbWUuR29vZ2xlUGF5bWVudF06XG4gICAgICAgICAgICAnc2hhMzg0LXRhSjJwLzArbjBWSDMyOFBPQW9CaXVFYkwzdG5IVVRFOVM0MmhLMVYrVHhzM1grUVlqWk95S1czNUpnSFJGZk8nLFxuICAgICAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5UaHJlZURTZWN1cmVdOlxuICAgICAgICAgICAgJ3NoYTM4NC0rTlNaSDRaajNzTzViZFd2UEtoVTVOMTZRRHhldWVUVlRuVVZlbGVlRVNraExTYXo0T2IxaGgvNW15ZWNjOVltJyxcbiAgICAgICAgW0JyYWludHJlZU1vZHVsZU5hbWUuVmlzYUNoZWNrb3V0XTpcbiAgICAgICAgICAgICdzaGEzODQtNjZEaUJqZ2h4azFPbUJqOGFrc044Z2JRK0N3b1FjeDF2UGZpWFVOMDhnMWlRVk0rQndld0YwcDd0b00zaTdTUycsXG4gICAgICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLlZlbm1vXTpcbiAgICAgICAgICAgICdzaGEzODQtQjVVd1k0MmtFNFJvTG9XYlE3WXBxb3NVbFVhZDIvRGxHV2l3MEhob1piU1BrMzBDUUFhU0ExMG9oeUxEVGtEVScsXG4gICAgICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLkhvc3RlZEZpZWxkc106XG4gICAgICAgICAgICAnc2hhMzg0LUF3OUVlc1NhVWVXeGUzNlBxRUhpT3lPeU9xOE02Q0liMWd3Ny95SE5WUFJ6R3RGWFhjZDJPUThxWHJJbE9qMlAnLFxuICAgICAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5GYXN0bGFuZV06XG4gICAgICAgICAgICAnc2hhMzg0LXJoQkwxaHBaNzFKcUcrMlRzVDBEaWg0N21iang4Y2pKQ3BlWmprOXR3M2RmMWdGTUtmQ1RtTXladW5ocjdINFknLFxuICAgIH0sXG4gICAgW0JSQUlOVFJFRV9TREtfSE9TVEVEX0ZJRUxEU19GSVhfVkVSU0lPTl06IHtcbiAgICAgICAgW0JyYWludHJlZU1vZHVsZU5hbWUuQ2xpZW50XTpcbiAgICAgICAgICAgICdzaGEzODQtMFdOeGtzSXBSUCtmWVppSWRyMTJnNkRCVVFmTER6WUNRSlp0Ui9DOEtrY3dTR2hQSGZjRnAzdFRhR2NNeUZUcScsXG4gICAgICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLlBheXBhbENoZWNrb3V0XTpcbiAgICAgICAgICAgICdzaGEzODQtbFdNMWprNEJPeG9ETlY2S29wN3RWTnZRZ0lObG1FVnowYy9Pd00rSE5ISzNRQzh4cXdkNTRPdnJ0MlFSRFRqaCcsXG4gICAgICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLlBheXBhbF06XG4gICAgICAgICAgICAnc2hhMzg0LWZYVW1WeEMyRU1aQkRYWjdlVEhTVEwvTEZCckhlai9NU1hUL3ZUQlh2cmE0bHpnTE5HdlJFQXAreDBHWU9idUgnLFxuICAgICAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5Mb2NhbFBheW1lbnRdOlxuICAgICAgICAgICAgJ3NoYTM4NC1waGExeEd1R1NrbVpINXg5YXFIdlJhTzR4TGVhN3JtUS83OVBGajl6eE56eHVGY09XWmc3Z09QN0ZpYnlnT0VDJyxcbiAgICAgICAgW0JyYWludHJlZU1vZHVsZU5hbWUuRGF0YUNvbGxlY3Rvcl06XG4gICAgICAgICAgICAnc2hhMzg0LVE2UEkyRjllZWtXYkF4aHJveWJsK2FFY3ZxaGRvd04vRVFsR3dCVXlKT3pQRm45OTgydTl4bDZTVTZYZkdLemMnLFxuICAgICAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5Vc0JhbmtBY2NvdW50XTpcbiAgICAgICAgICAgICdzaGEzODQtVzNSTFFTS0pMMXRRMytZN21QNnRta2FtdFo4YlY0WXcvWHhMOUpqNUp0WEhyYUQ4bG9NRjhoQUlHNW0yeks3RicsXG4gICAgICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLkdvb2dsZVBheW1lbnRdOlxuICAgICAgICAgICAgJ3NoYTM4NC1USVRRTXNGV0EzZWxETkdQMm1XejJvS0JvNHFqdCtUbHF6b3ZjYVBvZUJpQWgvd1BCaTZuYWU1MEFEZGdVMS9pJyxcbiAgICAgICAgW0JyYWludHJlZU1vZHVsZU5hbWUuVGhyZWVEU2VjdXJlXTpcbiAgICAgICAgICAgICdzaGEzODQtWWl5Y1lOODlabEwvRXZjYXE0eTFhalcxbWhkN0pZZlpCRHVPd0h0SW40L0pubTIwR0wrL1hDTSt6WUF3V0Q4RCcsXG4gICAgICAgIFtCcmFpbnRyZWVNb2R1bGVOYW1lLlZpc2FDaGVja291dF06XG4gICAgICAgICAgICAnc2hhMzg0LS9PZGFUdjlxcmtLempPYnRVZTZ5emZEaEhvekZXLyt1WGxyU2w3MzZzT1pSSnBqR1FFVHZwWVhxTUZGZzY5eHYnLFxuICAgICAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5WZW5tb106XG4gICAgICAgICAgICAnc2hhMzg0LWRBK29qZFc5dmJKUzRKYXZjWHlPczlkNXVaSEpnNWROdFl1cG9QU0gyenNYSWlZRFZTNWFtTGIvdThxbVE2b3onLFxuICAgICAgICBbQnJhaW50cmVlTW9kdWxlTmFtZS5Ib3N0ZWRGaWVsZHNdOlxuICAgICAgICAgICAgJ3NoYTM4NC0zMVprUzU4K2lhV3NXMDZmdFc1Mnp6VlpGcDQzV1BkN3BOWVJpZGRZeW5TTmc2T2g3V0diU0ZHb3JBVUg2VDF6JyxcbiAgICAgICAgW0JyYWludHJlZU1vZHVsZU5hbWUuRmFzdGxhbmVdOlxuICAgICAgICAgICAgJ3NoYTM4NC1qbGJyd052TDNIdkxBVUN0TFNtcm5RMkdIMXVkQ1VyUlMvYlZtUmVBUzVmdUlWdmNXOFBrby9Ha2c4MnRsZ3RyJyxcbiAgICB9LFxufTtcbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBOb3RJbml0aWFsaXplZEVycm9yVHlwZSB7XG4gICAgQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZCxcbiAgICBDdXN0b21lck5vdEluaXRpYWxpemVkLFxuICAgIFBheW1lbnROb3RJbml0aWFsaXplZCxcbiAgICBTaGlwcGluZ05vdEluaXRpYWxpemVkLFxuICAgIFNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIG1ldGhvZCByZXF1aXJlcyBhIGNlcnRhaW4gaW5pdGlhbGl6YXRpb24gY2FsbCB0byBiZVxuICogbWFkZSBmaXJzdC4gU29tZSBvYmplY3RzIGNhbiBiZSBjb25zdHJ1Y3RlZCBidXQgdGhleSBjYW5ub3QgYmUgdXNlZCB1bnRpbCBhXG4gKiBzZXBhcmF0ZSBpbml0aWFsaXphdGlvbiBjYWxsIGlzIG1hZGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdEluaXRpYWxpemVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTm90SW5pdGlhbGl6ZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdub3RfaW5pdGlhbGl6ZWQnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5DdXN0b21lck5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjdXN0b21lciBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TaGlwcGluZ05vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBzaGlwcGluZyBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2hlY2tvdXQgc3BhbSBwcm90ZWN0aW9uIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBBZGRyZXNzIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCAqIGZyb20gJy4vYnJhaW50cmVlJztcbmV4cG9ydCAqIGZyb20gJy4vcGF5cGFsJztcbmV4cG9ydCAqIGZyb20gJy4vdmlzYWNoZWNrb3V0JztcblxuLyoqXG4gKlxuICogQnJhaW50cmVlIE1vZHVsZVxuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVNb2R1bGVDcmVhdG9yPFxuICAgIFRJbnN0YW5jZSxcbiAgICBUT3B0aW9ucyA9IEJyYWludHJlZU1vZHVsZUNyZWF0b3JDb25maWcsXG4gICAgVEVycm9yID0gQnJhaW50cmVlRXJyb3IsXG4+IHtcbiAgICBjcmVhdGUoXG4gICAgICAgIGNvbmZpZzogVE9wdGlvbnMsXG4gICAgICAgIGNhbGxiYWNrPzogKGVycm9yOiBURXJyb3IsIGluc3RhbmNlOiBUSW5zdGFuY2UpID0+IHZvaWQsXG4gICAgKTogUHJvbWlzZTxUSW5zdGFuY2U+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZU1vZHVsZUNyZWF0b3JDb25maWcge1xuICAgIGNsaWVudD86IEJyYWludHJlZUNsaWVudDtcbiAgICBhdXRob3JpemF0aW9uPzogc3RyaW5nOyAvLyBJbmZvOiBhdXRob3JpemF0aW9uIHVzZXMgY2xpZW50VG9rZW4gYXMgYSB2YWx1ZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZU1vZHVsZSB7XG4gICAgdGVhcmRvd24oKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuLyoqXG4gKlxuICogQnJhaW50cmVlIFdpbmRvd1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIGNsaWVudD86IEJyYWludHJlZUNsaWVudENyZWF0b3I7XG4gICAgYnJhaW50cmVlRmFzdGxhbmU/OiBCcmFpbnRyZWVGYXN0bGFuZTtcbn1cblxuLyoqXG4gKlxuICogQnJhaW50cmVlIENsaWVudFxuICpcbiAqL1xuZXhwb3J0IHR5cGUgQnJhaW50cmVlQ2xpZW50Q3JlYXRvciA9IEJyYWludHJlZU1vZHVsZUNyZWF0b3I8QnJhaW50cmVlQ2xpZW50PjtcblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVDbGllbnQge1xuICAgIHJlcXVlc3QocGF5bG9hZDogQnJhaW50cmVlQ2xpZW50UmVxdWVzdFBheWxvYWQpOiBQcm9taXNlPEJyYWludHJlZUNsaWVudFJlcXVlc3RSZXNwb25zZT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlQ2xpZW50UmVxdWVzdFBheWxvYWQge1xuICAgIGRhdGE6IHtcbiAgICAgICAgY3JlZGl0Q2FyZDoge1xuICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3M/OiB7XG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGVBbHBoYTI6IHN0cmluZztcbiAgICAgICAgICAgICAgICBsb2NhbGl0eTogc3RyaW5nO1xuICAgICAgICAgICAgICAgIGNvdW50cnlOYW1lOiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogc3RyaW5nO1xuICAgICAgICAgICAgICAgIHN0cmVldEFkZHJlc3M6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXJkaG9sZGVyTmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgY3Z2Pzogc3RyaW5nO1xuICAgICAgICAgICAgZXhwaXJhdGlvbkRhdGU6IHN0cmluZztcbiAgICAgICAgICAgIG51bWJlcjogc3RyaW5nO1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRlOiBib29sZWFuO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGVuZHBvaW50OiBzdHJpbmc7XG4gICAgbWV0aG9kOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlSG9zdGVkRmllbGRzVG9rZW5pemVQYXlsb2FkIHtcbiAgICBub25jZTogc3RyaW5nO1xuICAgIGRldGFpbHM6IHtcbiAgICAgICAgYmluOiBzdHJpbmc7XG4gICAgICAgIGNhcmRUeXBlOiBzdHJpbmc7XG4gICAgICAgIGV4cGlyYXRpb25Nb250aDogc3RyaW5nO1xuICAgICAgICBleHBpcmF0aW9uWWVhcjogc3RyaW5nO1xuICAgICAgICBsYXN0Rm91cjogc3RyaW5nO1xuICAgICAgICBsYXN0VHdvOiBzdHJpbmc7XG4gICAgfTtcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBiaW5EYXRhOiB7XG4gICAgICAgIGNvbW1lcmNpYWw6IHN0cmluZztcbiAgICAgICAgY291bnRyeU9mSXNzdWFuY2U6IHN0cmluZztcbiAgICAgICAgZGViaXQ6IHN0cmluZztcbiAgICAgICAgZHVyYmluUmVndWxhdGVkOiBzdHJpbmc7XG4gICAgICAgIGhlYWx0aGNhcmU6IHN0cmluZztcbiAgICAgICAgaXNzdWluZ0Jhbms6IHN0cmluZztcbiAgICAgICAgcGF5cm9sbDogc3RyaW5nO1xuICAgICAgICBwcmVwYWlkOiBzdHJpbmc7XG4gICAgICAgIHByb2R1Y3RJZDogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlQ2xpZW50UmVxdWVzdFJlc3BvbnNlIHtcbiAgICBjcmVkaXRDYXJkczogQnJhaW50cmVlSG9zdGVkRmllbGRzVG9rZW5pemVQYXlsb2FkW107XG59XG5cbi8qKlxuICpcbiAqIEJyYWludHJlZSBEYXRhIENvbGxlY3RvclxuICpcbiAqL1xuZXhwb3J0IHR5cGUgQnJhaW50cmVlRGF0YUNvbGxlY3RvckNyZWF0b3IgPSBCcmFpbnRyZWVNb2R1bGVDcmVhdG9yPFxuICAgIEJyYWludHJlZURhdGFDb2xsZWN0b3IsXG4gICAgQnJhaW50cmVlRGF0YUNvbGxlY3RvckNyZWF0b3JDb25maWdcbj47XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlRGF0YUNvbGxlY3RvckNyZWF0b3JDb25maWcgZXh0ZW5kcyBCcmFpbnRyZWVNb2R1bGVDcmVhdG9yQ29uZmlnIHtcbiAgICBrb3VudD86IGJvb2xlYW47IC8vIEluZm86IHRoaXMgcGFyYW0gaXMgbmVlZGVkIGZvciBmcmF1ZCBkZXRlY3Rpb24gKHNob3VsZCBhbHdheXMgYmUgJ3RydWUnKVxuICAgIHBheXBhbD86IGJvb2xlYW47IC8vIFRPRE86IGJhc2VkIG9uIGJyYWludHJlZSBkb2N1bWVudGF0aW9uLCB0aGlzIHBhcmFtIGlzIGRlcHJlY2F0ZWQsIHNvIHdlIGRvbnQgbmVlZCBpdCBhbnltb3JlXG4gICAgcmlza0NvcnJlbGF0aW9uSWQ/OiBzdHJpbmc7IC8vIEluZm86IHRoZSBvcHRpb24gaXMgbmVlZGVkIGZvciBQYXlQYWwgQW5hbHl0aWNzXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlRGF0YUNvbGxlY3RvciBleHRlbmRzIEJyYWludHJlZU1vZHVsZSB7XG4gICAgZGV2aWNlRGF0YT86IHN0cmluZztcbn1cblxuLy8gVE9ETzogcmVtb3ZlIHRoaXMgaW50ZXJmYWNlIHdoZW4gQnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlIHdpbGwgYmUgcmVtb3ZlZFxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVEYXRhQ29sbGVjdG9ycyB7XG4gICAgZGVmYXVsdD86IEJyYWludHJlZURhdGFDb2xsZWN0b3I7XG4gICAgcGF5cGFsPzogQnJhaW50cmVlRGF0YUNvbGxlY3Rvcjtcbn1cblxuLyoqXG4gKlxuICogQnJhaW50cmVlIEdvb2dsZSBQYXltZW50XG4gKlxuICovXG50eXBlIEJyYWludHJlZUdvb2dsZVBheW1lbnRBZGRyZXNzRm9ybWF0ID0gJ0ZVTEwnIHwgJ01JTic7XG5cbmV4cG9ydCBlbnVtIFRvdGFsUHJpY2VTdGF0dXNUeXBlIHtcbiAgICBFU1RJTUFURUQgPSAnRVNUSU1BVEVEJyxcbiAgICBGSU5BTCA9ICdGSU5BTCcsXG4gICAgTk9UX0NVUlJFTlRMWV9LTk9XTiA9ICdOT1RfQ1VSUkVOVExZX0tOT1dOJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVHb29nbGVQYXltZW50RGF0YVJlcXVlc3RPcHRpb25zIHtcbiAgICBtZXJjaGFudEluZm86IHtcbiAgICAgICAgYXV0aEp3dD86IHN0cmluZztcbiAgICAgICAgbWVyY2hhbnRJZD86IHN0cmluZztcbiAgICAgICAgbWVyY2hhbnROYW1lPzogc3RyaW5nO1xuICAgIH07XG4gICAgdHJhbnNhY3Rpb25JbmZvOiB7XG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nO1xuICAgICAgICB0b3RhbFByaWNlU3RhdHVzOiBUb3RhbFByaWNlU3RhdHVzVHlwZTtcbiAgICAgICAgdG90YWxQcmljZTogc3RyaW5nO1xuICAgIH07XG4gICAgY2FyZFJlcXVpcmVtZW50czoge1xuICAgICAgICBiaWxsaW5nQWRkcmVzc1JlcXVpcmVkOiBib29sZWFuO1xuICAgICAgICBiaWxsaW5nQWRkcmVzc0Zvcm1hdDogQnJhaW50cmVlR29vZ2xlUGF5bWVudEFkZHJlc3NGb3JtYXQ7XG4gICAgfTtcbiAgICBlbWFpbFJlcXVpcmVkPzogYm9vbGVhbjtcbiAgICBwaG9uZU51bWJlclJlcXVpcmVkPzogYm9vbGVhbjtcbiAgICBzaGlwcGluZ0FkZHJlc3NSZXF1aXJlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlR29vZ2xlUGF5bWVudERhdGFSZXF1ZXN0IHtcbiAgICBhbGxvd2VkUGF5bWVudE1ldGhvZHM6IHN0cmluZ1tdO1xuICAgIGFwaVZlcnNpb246IG51bWJlcjtcbiAgICBjYXJkUmVxdWlyZW1lbnRzOiB7XG4gICAgICAgIGFsbG93ZWRDYXJkTmV0d29ya3M6IHN0cmluZ1tdO1xuICAgICAgICBiaWxsaW5nQWRkcmVzc0Zvcm1hdDogc3RyaW5nO1xuICAgICAgICBiaWxsaW5nQWRkcmVzc1JlcXVpcmVkOiBib29sZWFuO1xuICAgIH07XG4gICAgZW52aXJvbm1lbnQ6IHN0cmluZztcbiAgICBpOiB7XG4gICAgICAgIGdvb2dsZVRyYW5zYWN0aW9uSWQ6IHN0cmluZztcbiAgICAgICAgc3RhcnRUaW1lTXM6IG51bWJlcjtcbiAgICB9O1xuICAgIG1lcmNoYW50SW5mbzoge1xuICAgICAgICBtZXJjaGFudElkOiBzdHJpbmc7XG4gICAgICAgIG1lcmNoYW50TmFtZTogc3RyaW5nO1xuICAgICAgICBhdXRoSnd0Pzogc3RyaW5nO1xuICAgIH07XG4gICAgcGF5bWVudE1ldGhvZFRva2VuaXphdGlvblBhcmFtZXRlcnM6IHtcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgICAgJ2JyYWludHJlZTphcGlWZXJzaW9uJzogc3RyaW5nO1xuICAgICAgICAgICAgJ2JyYWludHJlZTphdXRob3JpemF0aW9uRmluZ2VycHJpbnQnOiBzdHJpbmc7XG4gICAgICAgICAgICAnYnJhaW50cmVlOm1lcmNoYW50SWQnOiBzdHJpbmc7XG4gICAgICAgICAgICAnYnJhaW50cmVlOm1ldGFkYXRhJzogc3RyaW5nO1xuICAgICAgICAgICAgJ2JyYWludHJlZTpzZGtWZXJzaW9uJzogc3RyaW5nO1xuICAgICAgICAgICAgZ2F0ZXdheTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICB0b2tlbml6YXRpb25UeXBlOiBzdHJpbmc7XG4gICAgfTtcbiAgICBzaGlwcGluZ0FkZHJlc3NSZXF1aXJlZDogYm9vbGVhbjtcbiAgICBwaG9uZU51bWJlclJlcXVpcmVkOiBib29sZWFuO1xuICAgIHRyYW5zYWN0aW9uSW5mbzoge1xuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZztcbiAgICAgICAgdG90YWxQcmljZTogc3RyaW5nO1xuICAgICAgICB0b3RhbFByaWNlU3RhdHVzOiBUb3RhbFByaWNlU3RhdHVzVHlwZTtcbiAgICB9O1xufVxuXG5leHBvcnQgdHlwZSBCcmFpbnRyZWVHb29nbGVQYXltZW50Q3JlYXRvciA9IEJyYWludHJlZU1vZHVsZUNyZWF0b3I8QnJhaW50cmVlR29vZ2xlUGF5bWVudD47XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlR29vZ2xlUGF5bWVudCBleHRlbmRzIEJyYWludHJlZU1vZHVsZSB7XG4gICAgY3JlYXRlUGF5bWVudERhdGFSZXF1ZXN0KFxuICAgICAgICBvcHRpb25zPzogQnJhaW50cmVlR29vZ2xlUGF5bWVudERhdGFSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBCcmFpbnRyZWVHb29nbGVQYXltZW50RGF0YVJlcXVlc3Q7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlR29vZ2xlUGF5VGhyZWVEU2VjdXJlIHtcbiAgICB2ZXJpZnlDYXJkKG9wdGlvbnM6IEJyYWludHJlZUdvb2dsZVBheVRocmVlRFNlY3VyZU9wdGlvbnMpOiBQcm9taXNlPEJyYWludHJlZVZlcmlmeVBheWxvYWQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUdvb2dsZVBheVRocmVlRFNlY3VyZU9wdGlvbnMge1xuICAgIG5vbmNlOiBzdHJpbmc7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgYmluOiBzdHJpbmc7XG4gICAgc2hvd0xvYWRlcj86IGJvb2xlYW47XG4gICAgb25Mb29rdXBDb21wbGV0ZShkYXRhOiBCcmFpbnRyZWVUaHJlZURTZWN1cmVWZXJpZmljYXRpb25EYXRhLCBuZXh0OiAoKSA9PiB2b2lkKTogdm9pZDtcbn1cblxuLyoqXG4gKlxuICogQnJhaW50cmVlIDNEIFNlY3VyZVxuICpcbiAqL1xuZXhwb3J0IHR5cGUgQnJhaW50cmVlVGhyZWVEU2VjdXJlQ3JlYXRvciA9IEJyYWludHJlZU1vZHVsZUNyZWF0b3I8XG4gICAgQnJhaW50cmVlVGhyZWVEU2VjdXJlLFxuICAgIEJyYWludHJlZVRocmVlRFNlY3VyZUNyZWF0b3JDb25maWdcbj47XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlVGhyZWVEU2VjdXJlIGV4dGVuZHMgQnJhaW50cmVlTW9kdWxlIHtcbiAgICB2ZXJpZnlDYXJkKFxuICAgICAgICBvcHRpb25zOiBCcmFpbnRyZWVUaHJlZURTZWN1cmVPcHRpb25zLFxuICAgICAgICBjYWxsYmFjaz86IEJyYWludHJlZTNEU1ZlcmlmeUNhcmRDYWxsYmFjayxcbiAgICApOiBQcm9taXNlPEJyYWludHJlZVZlcmlmeVBheWxvYWQ+O1xuICAgIGNhbmNlbFZlcmlmeUNhcmQoKTogUHJvbWlzZTxCcmFpbnRyZWVWZXJpZnlQYXlsb2FkPjtcbiAgICBvbjxLIGV4dGVuZHMga2V5b2YgQnJhaW50cmVlVGhyZWVEU2VjdXJlRXZlbnRNYXA+KFxuICAgICAgICBldmVudDogSyxcbiAgICAgICAgaGFuZGxlcjogQnJhaW50cmVlVGhyZWVEU2VjdXJlRXZlbnRNYXBbS10sXG4gICAgKTogdm9pZDtcbn1cblxuZXhwb3J0IHR5cGUgQnJhaW50cmVlM0RTVmVyaWZ5Q2FyZENhbGxiYWNrID0gKFxuICAgIHZlcmlmeUVycm9yOiBCcmFpbnRyZWUzRFNWZXJpZnlDYXJkRXJyb3IsXG4gICAgcGF5bG9hZDogQnJhaW50cmVlM0RTVmVyaWZ5Q2FyZFBheWxvYWQsXG4pID0+IHZvaWQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlVGhyZWVEU2VjdXJlRXZlbnRNYXAge1xuICAgICdjdXN0b21lci1jYW5jZWxlZCc6ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlM0RTVmVyaWZ5Q2FyZEVycm9yIHtcbiAgICBjb2RlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlM0RTVmVyaWZ5Q2FyZFBheWxvYWQge1xuICAgIG5vbmNlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlVGhyZWVEU2VjdXJlQ3JlYXRvckNvbmZpZyBleHRlbmRzIEJyYWludHJlZU1vZHVsZUNyZWF0b3JDb25maWcge1xuICAgIHZlcnNpb24/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlVGhyZWVEU2VjdXJlT3B0aW9ucyB7XG4gICAgbm9uY2U6IHN0cmluZztcbiAgICBhbW91bnQ6IG51bWJlciB8IHN0cmluZztcbiAgICBjaGFsbGVuZ2VSZXF1ZXN0ZWQ/OiBib29sZWFuO1xuICAgIHNob3dMb2FkZXI/OiBib29sZWFuO1xuICAgIGJpbj86IHN0cmluZztcbiAgICBhZGRpdGlvbmFsSW5mb3JtYXRpb24/OiB7XG4gICAgICAgIGFjc1dpbmRvd1NpemU/OiAnMDEnIHwgJzAyJyB8ICcwMycgfCAnMDQnIHwgJzA1JztcbiAgICB9O1xuICAgIGNvbGxlY3REZXZpY2VEYXRhPzogYm9vbGVhbjtcbiAgICBhZGRGcmFtZT8oXG4gICAgICAgIGVycm9yOiBFcnJvciB8IHVuZGVmaW5lZCxcbiAgICAgICAgaWZyYW1lOiBIVE1MSUZyYW1lRWxlbWVudCxcbiAgICAgICAgY2FuY2VsOiAoKSA9PiBQcm9taXNlPEJyYWludHJlZVZlcmlmeVBheWxvYWQ+IHwgdW5kZWZpbmVkLFxuICAgICk6IHZvaWQ7XG4gICAgcmVtb3ZlRnJhbWU/KCk6IHZvaWQ7XG4gICAgb25Mb29rdXBDb21wbGV0ZT8oZGF0YTogQnJhaW50cmVlVGhyZWVEU2VjdXJlVmVyaWZpY2F0aW9uRGF0YSwgbmV4dDogKCkgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlVGhyZWVEU2VjdXJlVmVyaWZpY2F0aW9uRGF0YSB7XG4gICAgbG9va3VwOiB7XG4gICAgICAgIHRocmVlRFNlY3VyZVZlcnNpb246IHN0cmluZztcbiAgICB9O1xuICAgIHBheW1lbnRNZXRob2Q6IEJyYWludHJlZVZlcmlmeVBheWxvYWQ7XG4gICAgcmVxdWlyZXNVc2VyQXV0aGVudGljYXRpb246IGJvb2xlYW47XG4gICAgdGhyZWVEU2VjdXJlSW5mbzoge1xuICAgICAgICBsaWFiaWxpdHlTaGlmdFBvc3NpYmxlOiBib29sZWFuO1xuICAgICAgICBsaWFiaWxpdHlTaGlmdGVkOiBib29sZWFuO1xuICAgIH07XG59XG5cbmV4cG9ydCBlbnVtIEJyYWludHJlZU9yZGVyU3RhdHVzIHtcbiAgICBDb21wbGV0ZWQgPSAnQ09NUExFVEVEJyxcbiAgICBQZW5kaW5nID0gJ1BFTkRJTkcnLFxuICAgIEZhaWxlZCA9ICdGQUlMRUQnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZU9yZGVyU3RhdHVzRGF0YSB7XG4gICAgc3RhdHVzOiBCcmFpbnRyZWVPcmRlclN0YXR1cztcbn1cblxuLyoqXG4gKlxuICogQnJhaW50cmVlIFVTIEJhbmsgQWNjb3VudCAoQUNIKVxuICpcbiAqL1xuZXhwb3J0IHR5cGUgQnJhaW50cmVlVXNCYW5rQWNjb3VudENyZWF0b3IgPSBCcmFpbnRyZWVNb2R1bGVDcmVhdG9yPEJyYWludHJlZVVzQmFua0FjY291bnQ+O1xuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZVVzQmFua0FjY291bnQge1xuICAgIHRva2VuaXplKFxuICAgICAgICBvcHRpb25zOiBCcmFpbnRyZWVVc0JhbmtBY2NvdW50VG9rZW5pemF0aW9uT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPEJyYWludHJlZVVzQmFua0FjY291bnRUb2tlbml6YXRpb25SZXNwb25zZT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlVXNCYW5rQWNjb3VudFRva2VuaXphdGlvbk9wdGlvbnMge1xuICAgIGJhbmtEZXRhaWxzOiBCcmFpbnRyZWVVc0JhbmtBY2NvdW50RGV0YWlscztcbiAgICBtYW5kYXRlVGV4dDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZVVzQmFua0FjY291bnRUb2tlbml6YXRpb25SZXNwb25zZSB7XG4gICAgbm9uY2U6IHN0cmluZztcbiAgICBkZXRhaWxzOiBCcmFpbnRyZWVUb2tlbml6YXRpb25EZXRhaWxzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZVVzQmFua0FjY291bnREZXRhaWxzIHtcbiAgICBhY2NvdW50TnVtYmVyOiBzdHJpbmc7XG4gICAgcm91dGluZ051bWJlcjogc3RyaW5nO1xuICAgIG93bmVyc2hpcFR5cGU6IHN0cmluZztcbiAgICBhY2NvdW50VHlwZTogc3RyaW5nO1xuICAgIGZpcnN0TmFtZT86IHN0cmluZztcbiAgICBsYXN0TmFtZT86IHN0cmluZztcbiAgICBidXNpbmVzc05hbWU/OiBzdHJpbmc7XG4gICAgYmlsbGluZ0FkZHJlc3M6IHtcbiAgICAgICAgc3RyZWV0QWRkcmVzczogc3RyaW5nO1xuICAgICAgICBleHRlbmRlZEFkZHJlc3M6IHN0cmluZztcbiAgICAgICAgbG9jYWxpdHk6IHN0cmluZztcbiAgICAgICAgcmVnaW9uOiBzdHJpbmc7XG4gICAgICAgIHBvc3RhbENvZGU6IHN0cmluZztcbiAgICB9O1xufVxuXG4vLyBUT0RPOiBtb3ZlIHRoaXMgaW50ZXJmYWNlIGluIHNlcGFyYXRlIHR5cGVzIGdyb3VwIGlmIGl0IHdpbGwgYmUgdXNlZCBpbiBhbm90aGVyIChub3QgQUNIKSBzdHJhdGVnaWVzXG4vLyBUaGlzIHNlZW1zIHRvIGJlIGFuIGludGVyZmFjZSB3aGljaCB3aWxsIGJlIHVzZWQgaW4gZGlmZmVyZW50IHBsYWNlc1xuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVUb2tlbml6YXRpb25EZXRhaWxzIHtcbiAgICB1c2VybmFtZT86IHN0cmluZztcbiAgICBlbWFpbD86IHN0cmluZztcbiAgICBwYXllcklkPzogc3RyaW5nO1xuICAgIGZpcnN0TmFtZT86IHN0cmluZztcbiAgICBsYXN0TmFtZT86IHN0cmluZztcbiAgICBjb3VudHJ5Q29kZT86IHN0cmluZztcbiAgICBwaG9uZT86IHN0cmluZztcbiAgICBzaGlwcGluZ0FkZHJlc3M/OiBCcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3M7XG4gICAgYmlsbGluZ0FkZHJlc3M/OiBCcmFpbnRyZWVBZGRyZXNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUFkZHJlc3Mge1xuICAgIGxpbmUxOiBzdHJpbmc7XG4gICAgbGluZTI6IHN0cmluZztcbiAgICBjaXR5OiBzdHJpbmc7XG4gICAgc3RhdGU6IHN0cmluZztcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeUNvZGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3MgZXh0ZW5kcyBCcmFpbnRyZWVBZGRyZXNzIHtcbiAgICByZWNpcGllbnROYW1lOiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqIEJyYWludHJlZSBub24taW5zdGFudCBwYXltZW50IG1ldGhvZHNcbiAqXG4gKi9cbmV4cG9ydCBlbnVtIE5vbkluc3RhbnRMb2NhbFBheW1lbnRNZXRob2RzIHtcbiAgICBUUlVTVExZID0gJ3RydXN0bHknLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUxvY2FsUGF5bWVudE1ldGhvZFJlZGlyZWN0QWN0aW9uIHtcbiAgICBib2R5OiB7XG4gICAgICAgIGFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkOiB7XG4gICAgICAgICAgICB0eXBlOiAnb2Zmc2l0ZV9yZWRpcmVjdCc7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgcmVkaXJlY3RfdXJsOiBzdHJpbmc7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlT3JkZXJTYXZlZFJlc3BvbnNlIHtcbiAgICBib2R5OiB7XG4gICAgICAgIGFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkOiB7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgb3JkZXJfaWRfc2F2ZWRfc3VjY2Vzc2Z1bGx5OiBzdHJpbmc7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbi8qKlxuICpcbiAqIEJyYWludHJlZSBGYXN0bGFuZVxuICpcbiAqL1xuZXhwb3J0IHR5cGUgQnJhaW50cmVlRmFzdGxhbmVDcmVhdG9yID0gQnJhaW50cmVlTW9kdWxlQ3JlYXRvcjxcbiAgICBCcmFpbnRyZWVGYXN0bGFuZSxcbiAgICBCcmFpbnRyZWVGYXN0bGFuZUNvbmZpZ1xuPjtcblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGYXN0bGFuZUNvbmZpZyB7XG4gICAgYXV0aG9yaXphdGlvbjogc3RyaW5nO1xuICAgIGNsaWVudDogQnJhaW50cmVlQ2xpZW50O1xuICAgIGRldmljZURhdGE/OiBzdHJpbmc7XG4gICAgc3R5bGVzPzogQnJhaW50cmVlRmFzdGxhbmVTdHlsZXNPcHRpb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlRmFzdGxhbmUge1xuICAgIGlkZW50aXR5OiBCcmFpbnRyZWVGYXN0bGFuZUlkZW50aXR5O1xuICAgIHByb2ZpbGU6IEJyYWludHJlZUZhc3RsYW5lUHJvZmlsZTtcbiAgICBGYXN0bGFuZUNhcmRDb21wb25lbnQ6IChcbiAgICAgICAgb3B0aW9uczogQnJhaW50cmVlRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyxcbiAgICApID0+IFByb21pc2U8QnJhaW50cmVlRmFzdGxhbmVDYXJkQ29tcG9uZW50PjtcbiAgICBldmVudHM6IEJyYWludHJlZUZhc3RsYW5lRXZlbnRzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUZhc3RsYW5lUHJvZmlsZSB7XG4gICAgc2hvd0NhcmRTZWxlY3RvcigpOiBQcm9taXNlPEJyYWludHJlZUZhc3RsYW5lQ2FyZFNlbGVjdG9yUmVzcG9uc2U+O1xuICAgIHNob3dTaGlwcGluZ0FkZHJlc3NTZWxlY3RvcigpOiBQcm9taXNlPEJyYWludHJlZUZhc3RsYW5lU2hpcHBpbmdBZGRyZXNzU2VsZWN0b3JSZXNwb25zZT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3NTZWxlY3RvclJlc3BvbnNlIHtcbiAgICBzZWxlY3Rpb25DaGFuZ2VkOiBib29sZWFuO1xuICAgIHNlbGVjdGVkQWRkcmVzczogQnJhaW50cmVlRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3Mge1xuICAgIG5hbWU6IEJyYWludHJlZUZhc3RsYW5lUHJvZmlsZU5hbWU7XG4gICAgcGhvbmVOdW1iZXI6IHN0cmluZztcbiAgICBpZD86IHN0cmluZztcbiAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgbGFzdE5hbWU/OiBzdHJpbmc7XG4gICAgY29tcGFueT86IHN0cmluZztcbiAgICBzdHJlZXRBZGRyZXNzOiBzdHJpbmc7XG4gICAgZXh0ZW5kZWRBZGRyZXNzPzogc3RyaW5nO1xuICAgIGxvY2FsaXR5OiBzdHJpbmc7XG4gICAgcmVnaW9uOiBzdHJpbmc7XG4gICAgcG9zdGFsQ29kZTogc3RyaW5nO1xuICAgIGNvdW50cnlDb2RlTnVtZXJpYz86IG51bWJlcjtcbiAgICBjb3VudHJ5Q29kZUFscGhhMjogc3RyaW5nO1xuICAgIGNvdW50cnlDb2RlQWxwaGEzPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUZhc3RsYW5lUHJvZmlsZU5hbWUge1xuICAgIGZ1bGxOYW1lOiBzdHJpbmc7XG4gICAgZmlyc3ROYW1lPzogc3RyaW5nO1xuICAgIGxhc3ROYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUZhc3RsYW5lQ2FyZFNlbGVjdG9yUmVzcG9uc2Uge1xuICAgIHNlbGVjdGlvbkNoYW5nZWQ6IGJvb2xlYW47XG4gICAgc2VsZWN0ZWRDYXJkOiBCcmFpbnRyZWVGYXN0bGFuZVZhdWx0ZWRJbnN0cnVtZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUZhc3RsYW5lV2luZG93IGV4dGVuZHMgV2luZG93IHtcbiAgICBicmFpbnRyZWVGYXN0bGFuZTogQnJhaW50cmVlRmFzdGxhbmU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlRmFzdGxhbmVJZGVudGl0eSB7XG4gICAgbG9va3VwQ3VzdG9tZXJCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPEJyYWludHJlZUZhc3RsYW5lTG9va3VwQ3VzdG9tZXJCeUVtYWlsUmVzdWx0PjtcbiAgICB0cmlnZ2VyQXV0aGVudGljYXRpb25GbG93KFxuICAgICAgICBjdXN0b21lcklkOiBzdHJpbmcsXG4gICAgICAgIG9wdGlvbnM/OiBCcmFpbnRyZWVGYXN0bGFuZUF1dGhlbnRpY2F0aW9uT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPEJyYWludHJlZUZhc3RsYW5lQXV0aGVudGljYXRpb25DdXN0b21lclJlc3VsdD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlRmFzdGxhbmVMb29rdXBDdXN0b21lckJ5RW1haWxSZXN1bHQge1xuICAgIGN1c3RvbWVyQ29udGV4dElkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUZhc3RsYW5lQXV0aGVudGljYXRpb25PcHRpb25zIHtcbiAgICBzdHlsZXM/OiBCcmFpbnRyZWVGYXN0bGFuZVN0eWxlc09wdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGYXN0bGFuZVN0eWxlc09wdGlvbiB7XG4gICAgcm9vdD86IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yUHJpbWFyeT86IHN0cmluZztcbiAgICAgICAgZXJyb3JDb2xvcj86IHN0cmluZztcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBwYWRkaW5nPzogc3RyaW5nO1xuICAgICAgICBwcmltYXJ5Q29sb3I/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBpbnB1dD86IHtcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgZm9jdXNCb3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJXaWR0aD86IHN0cmluZztcbiAgICAgICAgdGV4dENvbG9yQmFzZT86IHN0cmluZztcbiAgICB9O1xuICAgIHRvZ2dsZT86IHtcbiAgICAgICAgY29sb3JQcmltYXJ5Pzogc3RyaW5nO1xuICAgICAgICBjb2xvclNlY29uZGFyeT86IHN0cmluZztcbiAgICB9O1xuICAgIHRleHQ/OiB7XG4gICAgICAgIGJvZHk/OiB7XG4gICAgICAgICAgICBjb2xvcj86IHN0cmluZztcbiAgICAgICAgICAgIGZvbnRTaXplPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBjYXB0aW9uPzoge1xuICAgICAgICAgICAgY29sb3I/OiBzdHJpbmc7XG4gICAgICAgICAgICBmb250U2l6ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGJyYW5kaW5nPzogc3RyaW5nOyAvLyAnbGlnaHQnIHwgJ2RhcmsnXG59XG5cbmV4cG9ydCBlbnVtIEJyYWludHJlZUZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSB7XG4gICAgU1VDQ0VFREVEID0gJ3N1Y2NlZWRlZCcsXG4gICAgRkFJTEVEID0gJ2ZhaWxlZCcsXG4gICAgQ0FOQ0VMRUQgPSAnY2FuY2VsbGVkJyxcbiAgICBVTlJFQ09HTklaRUQgPSAndW5yZWNvZ25pemVkJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGYXN0bGFuZUF1dGhlbnRpY2F0aW9uQ3VzdG9tZXJSZXN1bHQge1xuICAgIGF1dGhlbnRpY2F0aW9uU3RhdGU6IEJyYWludHJlZUZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZTtcbiAgICBwcm9maWxlRGF0YTogQnJhaW50cmVlRmFzdGxhbmVQcm9maWxlRGF0YTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGYXN0bGFuZVByb2ZpbGVEYXRhIHtcbiAgICBmYXN0bGFuZUN1c3RvbWVyQXV0aEFzc2VydGlvblRva2VuOiBzdHJpbmc7XG4gICAgZmFzdGxhbmVDdXN0b21lcklkOiBzdHJpbmc7XG4gICAgc2hpcHBpbmdBZGRyZXNzOiBCcmFpbnRyZWVGYXN0bGFuZUFkZHJlc3M7XG4gICAgY2FyZDogQnJhaW50cmVlRmFzdGxhbmVWYXVsdGVkSW5zdHJ1bWVudDtcbiAgICBuYW1lOiBCcmFpbnRyZWVGYXN0bGFuZU5hbWU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlRmFzdGxhbmVOYW1lIHtcbiAgICBmaXJzdE5hbWU6IHN0cmluZztcbiAgICBsYXN0TmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUZhc3RsYW5lQWRkcmVzcyB7XG4gICAgaWQ/OiBzdHJpbmc7XG4gICAgZmlyc3ROYW1lPzogc3RyaW5nO1xuICAgIGxhc3ROYW1lPzogc3RyaW5nO1xuICAgIGNvbXBhbnk/OiBzdHJpbmc7XG4gICAgc3RyZWV0QWRkcmVzczogc3RyaW5nO1xuICAgIGV4dGVuZGVkQWRkcmVzcz86IHN0cmluZztcbiAgICBsb2NhbGl0eTogc3RyaW5nO1xuICAgIHJlZ2lvbjogc3RyaW5nO1xuICAgIHBvc3RhbENvZGU6IHN0cmluZztcbiAgICBjb3VudHJ5Q29kZU51bWVyaWM/OiBudW1iZXI7XG4gICAgY291bnRyeUNvZGVBbHBoYTI6IHN0cmluZztcbiAgICBjb3VudHJ5Q29kZUFscGhhMz86IHN0cmluZztcbiAgICBwaG9uZU51bWJlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGYXN0bGFuZUNhcmRQYXltZW50U291cmNlIHtcbiAgICBicmFuZDogc3RyaW5nO1xuICAgIGV4cGlyeTogc3RyaW5nO1xuICAgIGxhc3REaWdpdHM6IHN0cmluZztcbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIGJpbGxpbmdBZGRyZXNzOiBCcmFpbnRyZWVGYXN0bGFuZUFkZHJlc3M7XG4gICAgYmluRGV0YWlscz86IHtcbiAgICAgICAgYmluOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGYXN0bGFuZVBheW1lbnRTb3VyY2Uge1xuICAgIGNhcmQ6IEJyYWludHJlZUZhc3RsYW5lQ2FyZFBheW1lbnRTb3VyY2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlRmFzdGxhbmVWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgaWQ6IHN0cmluZzsgLy8gVGhpcyBpcyB0aGUgbm9uY2UgLyB0b2tlblxuICAgIHBheW1lbnRTb3VyY2U6IEJyYWludHJlZUZhc3RsYW5lUGF5bWVudFNvdXJjZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGYXN0bGFuZUNhcmRDb21wb25lbnRPcHRpb25zIHtcbiAgICBzdHlsZXM6IEJyYWludHJlZUZhc3RsYW5lU3R5bGVzT3B0aW9uO1xuICAgIGZpZWxkczogQnJhaW50cmVlRmFzdGxhbmVDYXJkQ29tcG9uZW50RmllbGRzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUZhc3RsYW5lQ2FyZENvbXBvbmVudEZpZWxkcyB7XG4gICAgY2FyZGhvbGRlck5hbWU/OiB7XG4gICAgICAgIGVuYWJsZWQ/OiBib29sZWFuO1xuICAgICAgICBwcmVmaWxsPzogc3RyaW5nO1xuICAgIH07XG4gICAgcGhvbmVOdW1iZXI/OiB7XG4gICAgICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAgICAgICBwcmVmaWxsPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmFzdGxhbmVTdHlsZXNTZXR0aW5ncyB7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NFcnJvckNvbG9yPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lUm9vdFNldHRpbmdzRm9udEZhbWlseT86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc1BhZGRpbmc/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NQcmltYXJ5Q29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NGb250U2l6ZT86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlcldpZHRoPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlckNvbG9yPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lSW5wdXRTZXR0aW5nc0ZvY3VzQm9yZGVyQmFzZT86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NUZXh0Q29sb3JCYXNlPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclByaW1hcnk/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yU2Vjb25kYXJ5Pzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0NvbG9yPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0ZvbnRTaXplPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0ZvbnRTaXplPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0NvbG9yPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lQnJhbmRpbmdTZXR0aW5ncz86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGYXN0bGFuZVRva2VuaXplT3B0aW9ucyB7XG4gICAgbmFtZT86IHtcbiAgICAgICAgZnVsbE5hbWU6IHN0cmluZztcbiAgICB9O1xuICAgIGJpbGxpbmdBZGRyZXNzPzogQnJhaW50cmVlRmFzdGxhbmVBZGRyZXNzO1xuICAgIHNoaXBwaW5nQWRkcmVzcz86IEJyYWludHJlZUZhc3RsYW5lQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGYXN0bGFuZUV2ZW50cyB7XG4gICAgYXBtU2VsZWN0ZWQ6IChvcHRpb25zOiBCcmFpbnRyZWVGYXN0bGFuZUFwbVNlbGVjdGVkRXZlbnRPcHRpb25zKSA9PiB2b2lkO1xuICAgIGVtYWlsU3VibWl0dGVkOiAob3B0aW9uczogQnJhaW50cmVlRmFzdGxhbmVFbWFpbEVudGVyZWRFdmVudE9wdGlvbnMpID0+IHZvaWQ7XG4gICAgb3JkZXJQbGFjZWQ6IChvcHRpb25zOiBCcmFpbnRyZWVGYXN0bGFuZU9yZGVyUGxhY2VkRXZlbnRPcHRpb25zKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUZhc3RsYW5lRXZlbnRDb21tb25PcHRpb25zIHtcbiAgICBjb250ZXh0X3R5cGU6ICdjc19pZCc7XG4gICAgY29udGV4dF9pZDogc3RyaW5nOyAvLyBjaGVja291dCBzZXNzaW9uIGlkXG4gICAgcGFnZV90eXBlOiAnY2hlY2tvdXRfcGFnZSc7XG4gICAgcGFnZV9uYW1lOiBzdHJpbmc7IC8vIHRpdGxlIG9mIHRoZSBjaGVja291dCBpbml0aWF0aW9uIHBhZ2VcbiAgICBwYXJ0bmVyX25hbWU6ICdiaWdjJztcbiAgICB1c2VyX3R5cGU6ICdzdG9yZV9tZW1iZXInIHwgJ3N0b3JlX2d1ZXN0JzsgLy8gdHlwZSBvZiB0aGUgdXNlciBvbiB0aGUgbWVyY2hhbnQgc2l0ZVxuICAgIHN0b3JlX2lkOiBzdHJpbmc7XG4gICAgbWVyY2hhbnRfbmFtZTogc3RyaW5nO1xuICAgIGV4cGVyaW1lbnQ6IHN0cmluZzsgLy8gc3RyaW5naWZ5IEpTT04gb2JqZWN0IFwiW3sgdHJlYXRtZW50X2dyb3VwOiAndGVzdCcgfCAnY29udHJvbCcgfV1cIlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZUZhc3RsYW5lQXBtU2VsZWN0ZWRFdmVudE9wdGlvbnNcbiAgICBleHRlbmRzIEJyYWludHJlZUZhc3RsYW5lRXZlbnRDb21tb25PcHRpb25zIHtcbiAgICBhcG1fc2hvd246ICcwJyB8ICcxJzsgLy8gYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gdGhlIGNoZWNrb3V0IHBhZ2VcbiAgICBhcG1fbGlzdDogc3RyaW5nOyAvLyBsaXN0IG9mIGFsdGVybmF0ZSBwYXltZW50IHNob3duIG9uIGNoZWNrb3V0IHBhZ2VcbiAgICBhcG1fc2VsZWN0ZWQ6IHN0cmluZzsgLy8gYWx0ZXJuYXRlIHBheW1lbnQgbWV0aG9kIHNlbGVjdGVkIC8gbWV0aG9kSWRcbiAgICBhcG1fbG9jYXRpb246ICdwcmUtZW1haWwgc2VjdGlvbicgfCAncGF5bWVudCBzZWN0aW9uJzsgLy8gcGxhY2VtZW50IG9mIEFQTSwgd2hldGhlciBpdCBiZSBhYm92ZSB0aGUgZW1haWwgZW50cnkgb3IgaW4gdGhlIHJhZGlvIGJ1dHRvbnNcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGYXN0bGFuZUVtYWlsRW50ZXJlZEV2ZW50T3B0aW9uc1xuICAgIGV4dGVuZHMgQnJhaW50cmVlRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIHVzZXJfZW1haWxfc2F2ZWQ6IGJvb2xlYW47IC8vIHNob3dzIHdoZXRoZXIgY2hlY2tvdXQgd2FzIGxvYWRlZCB3aXRoIG9yIHdpdGhvdXQgYSBzYXZlZCBlbWFpbFxuICAgIGFwbV9zaG93bjogJzAnIHwgJzEnOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBzaG93biBvbiB0aGUgY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9saXN0OiBzdHJpbmc7IC8vIGxpc3Qgb2YgYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gY2hlY2tvdXQgcGFnZSAnYXBwbGVwYXksZ29vZ2xlcGF5LHBheXBhbCdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVGYXN0bGFuZU9yZGVyUGxhY2VkRXZlbnRPcHRpb25zXG4gICAgZXh0ZW5kcyBCcmFpbnRyZWVGYXN0bGFuZUV2ZW50Q29tbW9uT3B0aW9ucyB7XG4gICAgc2VsZWN0ZWRfcGF5bWVudF9tZXRob2Q6IHN0cmluZztcbiAgICBjdXJyZW5jeV9jb2RlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlRmFzdGxhbmVDYXJkQ29tcG9uZW50IHtcbiAgICAob3B0aW9uczogQnJhaW50cmVlRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyk6IEJyYWludHJlZUZhc3RsYW5lQ2FyZENvbXBvbmVudDtcbiAgICBnZXRQYXltZW50VG9rZW4oXG4gICAgICAgIG9wdGlvbnM6IEJyYWludHJlZUZhc3RsYW5lVG9rZW5pemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8QnJhaW50cmVlRmFzdGxhbmVWYXVsdGVkSW5zdHJ1bWVudD47XG4gICAgcmVuZGVyKGVsZW1lbnQ6IHN0cmluZyk6IHZvaWQ7XG59XG5cbi8qKlxuICpcbiAqIEJyYWludHJlZSBQYXlsb2FkIFZlcmlmaWNhdGlvblxuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVWZXJpZnlQYXlsb2FkIHtcbiAgICBub25jZTogc3RyaW5nO1xuICAgIGRldGFpbHM6IHtcbiAgICAgICAgY2FyZFR5cGU6IHN0cmluZztcbiAgICAgICAgbGFzdEZvdXI6IHN0cmluZztcbiAgICAgICAgbGFzdFR3bzogc3RyaW5nO1xuICAgIH07XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBsaWFiaWxpdHlTaGlmdFBvc3NpYmxlOiBib29sZWFuO1xuICAgIGxpYWJpbGl0eVNoaWZ0ZWQ6IGJvb2xlYW47XG59XG5cbi8qKlxuICpcbiAqIEJyYWludHJlZSBFcnJvcnNcbiAqXG4gKi9cbmV4cG9ydCBlbnVtIEJyYWludHJlZUVycm9yVHlwZSB7XG4gICAgQ3VzdG9tZXIgPSAnQ1VTVE9NRVInLFxuICAgIE1lcmNoYW50ID0gJ01FUkNIQU5UJyxcbiAgICBOZXR3b3JrID0gJ05FVFdPUksnLFxuICAgIEludGVybmFsID0gJ0lOVEVSTkFMJyxcbiAgICBVbmtub3duID0gJ1VOS05PV04nLFxufVxuXG5leHBvcnQgZW51bSBCcmFpbnRyZWVFcnJvckNvZGUge1xuICAgIEtvdW50Tm90RW5hYmxlZCA9ICdEQVRBX0NPTExFQ1RPUl9LT1VOVF9OT1RfRU5BQkxFRCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgdHlwZTogQnJhaW50cmVlRXJyb3JUeXBlO1xuICAgIGNvZGU6IHN0cmluZyB8IEJyYWludHJlZUVycm9yQ29kZS5Lb3VudE5vdEVuYWJsZWQ7XG4gICAgZGV0YWlscz86IHVua25vd247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlUmVkaXJlY3RFcnJvciB7XG4gICAgYm9keToge1xuICAgICAgICBhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZDoge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0X3VybDogc3RyaW5nO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBpbnRlcmZhY2UgQmlsbGluZ0FkZHJlc3MgZXh0ZW5kcyBBZGRyZXNzIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGVtYWlsPzogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBCcmFpbnRyZWVTdXBwb3J0ZWRDYXJkQnJhbmRzIHtcbiAgICBWaXNhID0gJ3Zpc2EnLFxuICAgIE1hc3RlcmNhcmQgPSAnbWFzdGVyY2FyZCcsXG4gICAgQW1lcmljYW5FeHByZXNzID0gJ2FtZXJpY2FuLWV4cHJlc3MnLFxuICAgIERpbmVyc0NsdWIgPSAnZGluZXJzLWNsdWInLFxuICAgIERpc2NvdmVyID0gJ2Rpc2NvdmVyJyxcbiAgICBKY2IgPSAnamNiJyxcbiAgICBVbmlvblBheSA9ICd1bmlvbi1wYXknLFxuICAgIE1hZXN0cm8gPSAnbWFlc3RybycsXG4gICAgRWxvID0gJ2VsbycsXG4gICAgTWlyID0gJ21pcicsXG4gICAgSGlwZXIgPSAnaGlwZXInLFxuICAgIEhpcGVyY2FyZCA9ICdoaXBlcmNhcmQnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpbGxpbmdBZGRyZXNzU3RhdGUge1xuICAgIGRhdGE/OiBCaWxsaW5nQWRkcmVzcztcbiAgICBlcnJvcnM6IEJpbGxpbmdBZGRyZXNzRXJyb3JzU3RhdGU7XG4gICAgc3RhdHVzZXM6IEJpbGxpbmdBZGRyZXNzU3RhdHVzZXNTdGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWxsaW5nQWRkcmVzc0Vycm9yc1N0YXRlIHtcbiAgICBsb2FkRXJyb3I/OiBFcnJvcjtcbiAgICB1cGRhdGVFcnJvcj86IEVycm9yO1xuICAgIGNvbnRpbnVlQXNHdWVzdEVycm9yPzogRXJyb3I7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlsbGluZ0FkZHJlc3NTdGF0dXNlc1N0YXRlIHtcbiAgICBpc0xvYWRpbmc/OiBib29sZWFuO1xuICAgIGlzVXBkYXRpbmc/OiBib29sZWFuO1xuICAgIGlzQ29udGludWluZ0FzR3Vlc3Q/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyYWludHJlZVJlcXVlc3REYXRhIHtcbiAgICBkYXRhOiB7XG4gICAgICAgIGNyZWRpdENhcmQ6IHtcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzPzoge1xuICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlQWxwaGEyOiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgbG9jYWxpdHk6IHN0cmluZztcbiAgICAgICAgICAgICAgICBjb3VudHJ5TmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6IHN0cmluZztcbiAgICAgICAgICAgICAgICBzdHJlZXRBZGRyZXNzOiBzdHJpbmc7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FyZGhvbGRlck5hbWU6IHN0cmluZztcbiAgICAgICAgICAgIGN2dj86IHN0cmluZztcbiAgICAgICAgICAgIGV4cGlyYXRpb25EYXRlOiBzdHJpbmc7XG4gICAgICAgICAgICBudW1iZXI6IHN0cmluZztcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZTogYm9vbGVhbjtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBlbmRwb2ludDogc3RyaW5nO1xuICAgIG1ldGhvZDogc3RyaW5nO1xufVxuIiwiaW1wb3J0IHsgU2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQgeyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBCUkFJTlRSRUVfU0RLX1NDUklQVFNfSU5URUdSSVRZIH0gZnJvbSAnLi9icmFpbnRyZWUtc2RrLXNjcmlwdHMtaW50ZWdyaXR5JztcbmltcG9ydCBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlciBmcm9tICcuL2JyYWludHJlZS1zZGstdmVyc2lvbi1tYW5hZ2VyJztcbmltcG9ydCBpc01hbmFnZWFibGVCcmFpbnRyZWVTREtWZXJzaW9uIGZyb20gJy4vaXNNYW5hZ2VhYmxlQnJhaW50cmVlU0RLVmVyc2lvbic7XG5pbXBvcnQge1xuICAgIEJyYWludHJlZUNsaWVudENyZWF0b3IsXG4gICAgQnJhaW50cmVlRGF0YUNvbGxlY3RvckNyZWF0b3IsXG4gICAgQnJhaW50cmVlRmFzdGxhbmVDcmVhdG9yLFxuICAgIEJyYWludHJlZUdvb2dsZVBheW1lbnRDcmVhdG9yLFxuICAgIEJyYWludHJlZUhvc3RlZEZpZWxkc0NyZWF0b3IsXG4gICAgQnJhaW50cmVlSG9zdFdpbmRvdyxcbiAgICBCcmFpbnRyZWVMb2NhbFBheW1lbnRDcmVhdG9yLFxuICAgIEJyYWludHJlZU1vZHVsZUNyZWF0b3JzLFxuICAgIEJyYWludHJlZU1vZHVsZU5hbWUsXG4gICAgQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXRDcmVhdG9yLFxuICAgIEJyYWludHJlZVBheXBhbENyZWF0b3IsXG4gICAgQnJhaW50cmVlVGhyZWVEU2VjdXJlQ3JlYXRvcixcbiAgICBCcmFpbnRyZWVVc0JhbmtBY2NvdW50Q3JlYXRvcixcbiAgICBCcmFpbnRyZWVWZW5tb0NoZWNrb3V0Q3JlYXRvcixcbiAgICBCcmFpbnRyZWVWaXNhQ2hlY2tvdXRDcmVhdG9yLFxufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IFZpc2FDaGVja291dFNESyB9IGZyb20gJy4vdmlzYWNoZWNrb3V0JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJhaW50cmVlU2NyaXB0TG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSBicmFpbnRyZWVIb3N0V2luZG93OiBCcmFpbnRyZWVIb3N0V2luZG93LFxuICAgICAgICBwcml2YXRlIGJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyOiBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBsb2FkQ2xpZW50KCk6IFByb21pc2U8QnJhaW50cmVlQ2xpZW50Q3JlYXRvcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdzxCcmFpbnRyZWVDbGllbnRDcmVhdG9yPihcbiAgICAgICAgICAgIEJyYWludHJlZU1vZHVsZU5hbWUuQ2xpZW50LFxuICAgICAgICAgICAgJ2NsaWVudC5taW4uanMnLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRGYXN0bGFuZSgpOiBQcm9taXNlPEJyYWludHJlZUZhc3RsYW5lQ3JlYXRvcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdzxCcmFpbnRyZWVGYXN0bGFuZUNyZWF0b3I+KFxuICAgICAgICAgICAgQnJhaW50cmVlTW9kdWxlTmFtZS5GYXN0bGFuZSxcbiAgICAgICAgICAgICdmYXN0bGFuZS5taW4uanMnLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRQYXlwYWxDaGVja291dCgpOiBQcm9taXNlPEJyYWludHJlZVBheXBhbENoZWNrb3V0Q3JlYXRvcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdzxCcmFpbnRyZWVQYXlwYWxDaGVja291dENyZWF0b3I+KFxuICAgICAgICAgICAgQnJhaW50cmVlTW9kdWxlTmFtZS5QYXlwYWxDaGVja291dCxcbiAgICAgICAgICAgICdwYXlwYWwtY2hlY2tvdXQubWluLmpzJyxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkUGF5cGFsKCk6IFByb21pc2U8QnJhaW50cmVlUGF5cGFsQ3JlYXRvcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdzxCcmFpbnRyZWVQYXlwYWxDcmVhdG9yPihcbiAgICAgICAgICAgIEJyYWludHJlZU1vZHVsZU5hbWUuUGF5cGFsLFxuICAgICAgICAgICAgJ3BheXBhbC5taW4uanMnLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRMb2NhbFBheW1lbnQoKTogUHJvbWlzZTxCcmFpbnRyZWVMb2NhbFBheW1lbnRDcmVhdG9yPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRCcmFpbnRyZWVNb2R1bGVPclRocm93PEJyYWludHJlZUxvY2FsUGF5bWVudENyZWF0b3I+KFxuICAgICAgICAgICAgQnJhaW50cmVlTW9kdWxlTmFtZS5Mb2NhbFBheW1lbnQsXG4gICAgICAgICAgICAnbG9jYWwtcGF5bWVudC5taW4uanMnLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWREYXRhQ29sbGVjdG9yKCk6IFByb21pc2U8QnJhaW50cmVlRGF0YUNvbGxlY3RvckNyZWF0b3I+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3c8QnJhaW50cmVlRGF0YUNvbGxlY3RvckNyZWF0b3I+KFxuICAgICAgICAgICAgQnJhaW50cmVlTW9kdWxlTmFtZS5EYXRhQ29sbGVjdG9yLFxuICAgICAgICAgICAgJ2RhdGEtY29sbGVjdG9yLm1pbi5qcycsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZFVzQmFua0FjY291bnQoKTogUHJvbWlzZTxCcmFpbnRyZWVVc0JhbmtBY2NvdW50Q3JlYXRvcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdzxCcmFpbnRyZWVVc0JhbmtBY2NvdW50Q3JlYXRvcj4oXG4gICAgICAgICAgICBCcmFpbnRyZWVNb2R1bGVOYW1lLlVzQmFua0FjY291bnQsXG4gICAgICAgICAgICAndXMtYmFuay1hY2NvdW50Lm1pbi5qcycsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZEdvb2dsZVBheW1lbnQoKTogUHJvbWlzZTxCcmFpbnRyZWVHb29nbGVQYXltZW50Q3JlYXRvcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdzxCcmFpbnRyZWVHb29nbGVQYXltZW50Q3JlYXRvcj4oXG4gICAgICAgICAgICBCcmFpbnRyZWVNb2R1bGVOYW1lLkdvb2dsZVBheW1lbnQsXG4gICAgICAgICAgICAnZ29vZ2xlLXBheW1lbnQubWluLmpzJyxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkM0RTKCk6IFByb21pc2U8QnJhaW50cmVlVGhyZWVEU2VjdXJlQ3JlYXRvcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdzxCcmFpbnRyZWVUaHJlZURTZWN1cmVDcmVhdG9yPihcbiAgICAgICAgICAgIEJyYWludHJlZU1vZHVsZU5hbWUuVGhyZWVEU2VjdXJlLFxuICAgICAgICAgICAgJ3RocmVlLWQtc2VjdXJlLm1pbi5qcycsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgbG9hZFZpc2FDaGVja291dCgpOiBQcm9taXNlPEJyYWludHJlZVZpc2FDaGVja291dENyZWF0b3I+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3c8QnJhaW50cmVlVmlzYUNoZWNrb3V0Q3JlYXRvcj4oXG4gICAgICAgICAgICBCcmFpbnRyZWVNb2R1bGVOYW1lLlZpc2FDaGVja291dCxcbiAgICAgICAgICAgICd2aXNhLWNoZWNrb3V0Lm1pbi5qcycsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgbG9hZFZlbm1vQ2hlY2tvdXQoKTogUHJvbWlzZTxCcmFpbnRyZWVWZW5tb0NoZWNrb3V0Q3JlYXRvcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdzxCcmFpbnRyZWVWZW5tb0NoZWNrb3V0Q3JlYXRvcj4oXG4gICAgICAgICAgICBCcmFpbnRyZWVNb2R1bGVOYW1lLlZlbm1vLFxuICAgICAgICAgICAgJ3Zlbm1vLm1pbi5qcycsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZEhvc3RlZEZpZWxkcygpOiBQcm9taXNlPEJyYWludHJlZUhvc3RlZEZpZWxkc0NyZWF0b3I+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3c8QnJhaW50cmVlSG9zdGVkRmllbGRzQ3JlYXRvcj4oXG4gICAgICAgICAgICBCcmFpbnRyZWVNb2R1bGVOYW1lLkhvc3RlZEZpZWxkcyxcbiAgICAgICAgICAgICdob3N0ZWQtZmllbGRzLm1pbi5qcycsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZFZpc2FDaGVja291dFNkayh0ZXN0TW9kZT86IGJvb2xlYW4pOiBQcm9taXNlPFZpc2FDaGVja291dFNESz4ge1xuICAgICAgICBpZiAodGhpcy5icmFpbnRyZWVIb3N0V2luZG93LlYpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJyYWludHJlZUhvc3RXaW5kb3cuVjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGhhc2ggPSB0ZXN0TW9kZVxuICAgICAgICAgICAgPyAnc2hhMzg0LTBldTFzMUd0cXpYbEw5RHRMZ213ekM1V1dsRUgvQURSTTBuMzhjVlFrdnRUK1cvZ2V5OTZyY2IxTHd1VU9QRG0nXG4gICAgICAgICAgICA6ICdzaGEzODQtMWYxY3N2UDNaRnhnNGRJTEgxR2FZNExIbFowb1g3Ums4M3J4bUxsd2JuSWk0VE0wTll6WG9ldjFWb0VpVkRTNic7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc2NyaXB0TG9hZGVyXG4gICAgICAgICAgICAubG9hZFNjcmlwdChcbiAgICAgICAgICAgICAgICBgLy8ke1xuICAgICAgICAgICAgICAgICAgICB0ZXN0TW9kZSA/ICdzYW5kYm94LScgOiAnJ1xuICAgICAgICAgICAgICAgIH1hc3NldHMuc2VjdXJlLmNoZWNrb3V0LnZpc2EuY29tL2NoZWNrb3V0LXdpZGdldC9yZXNvdXJjZXMvanMvaW50ZWdyYXRpb24vdjEvc2RrLmpzYCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JpdHk6IGhhc2gsXG4gICAgICAgICAgICAgICAgICAgICAgICBjcm9zc29yaWdpbjogJ2Fub255bW91cycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdy5WKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJyYWludHJlZUhvc3RXaW5kb3cuVjtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgbG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3c8VCBleHRlbmRzIEJyYWludHJlZU1vZHVsZUNyZWF0b3JzPihcbiAgICAgICAgYnJhaW50cmVlTW9kdWxlTmFtZTogQnJhaW50cmVlTW9kdWxlTmFtZSxcbiAgICAgICAgZmlsZU5hbWU6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFQ+IHtcbiAgICAgICAgbGV0IG1vZHVsZSA9IHRoaXMuZ2V0QnJhaW50cmVlTW9kdWxlKGJyYWludHJlZU1vZHVsZU5hbWUpO1xuXG4gICAgICAgIGlmIChtb2R1bGUpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWFzc2VydGlvbnNcbiAgICAgICAgICAgIHJldHVybiBtb2R1bGUgYXMgVDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJyYWludHJlZVNka1ZlcnNpb24gPSB0aGlzLmJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyLmdldFNES1ZlcnNpb24oKTtcblxuICAgICAgICBjb25zdCBzY3JpcHRQYXRoID0gYC8vanMuYnJhaW50cmVlZ2F0ZXdheS5jb20vd2ViLyR7YnJhaW50cmVlU2RrVmVyc2lvbn0vanMvJHtmaWxlTmFtZX1gO1xuXG4gICAgICAgIGNvbnN0IGludGVncml0eSA9IGlzTWFuYWdlYWJsZUJyYWludHJlZVNES1ZlcnNpb24oYnJhaW50cmVlU2RrVmVyc2lvbilcbiAgICAgICAgICAgID8gdGhpcy5nZXRJbnRlZ3JpdHlWYWx1ZXNCeU1vZHVsZU5hbWUoYnJhaW50cmVlTW9kdWxlTmFtZSwgYnJhaW50cmVlU2RrVmVyc2lvbilcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoXG4gICAgICAgICAgICBzY3JpcHRQYXRoLFxuICAgICAgICAgICAgaW50ZWdyaXR5XG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNyb3Nzb3JpZ2luOiAnYW5vbnltb3VzJyxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICApO1xuXG4gICAgICAgIG1vZHVsZSA9IHRoaXMuZ2V0QnJhaW50cmVlTW9kdWxlKGJyYWludHJlZU1vZHVsZU5hbWUpO1xuXG4gICAgICAgIGlmICghbW9kdWxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWFzc2VydGlvbnNcbiAgICAgICAgcmV0dXJuIG1vZHVsZSBhcyBUO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QnJhaW50cmVlTW9kdWxlKFxuICAgICAgICBicmFpbnRyZWVNb2R1bGVOYW1lOiBCcmFpbnRyZWVNb2R1bGVOYW1lLFxuICAgICk6IEJyYWludHJlZU1vZHVsZUNyZWF0b3JzIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdy5icmFpbnRyZWU/LlticmFpbnRyZWVNb2R1bGVOYW1lXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEludGVncml0eVZhbHVlc0J5TW9kdWxlTmFtZShcbiAgICAgICAgbW9kdWxlTmFtZTogQnJhaW50cmVlTW9kdWxlTmFtZSxcbiAgICAgICAgdmVyc2lvbjoga2V5b2YgdHlwZW9mIEJSQUlOVFJFRV9TREtfU0NSSVBUU19JTlRFR1JJVFksXG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgaW50ZWdyaXR5ID0gQlJBSU5UUkVFX1NES19TQ1JJUFRTX0lOVEVHUklUWVt2ZXJzaW9uXVttb2R1bGVOYW1lXTtcblxuICAgICAgICBpZiAoIWludGVncml0eSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGZpbGVOYW1lIHZhbHVlJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW50ZWdyaXR5O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEJSQUlOVFJFRV9TREtfU0NSSVBUU19JTlRFR1JJVFkgfSBmcm9tICcuL2JyYWludHJlZS1zZGstc2NyaXB0cy1pbnRlZ3JpdHknO1xuXG5mdW5jdGlvbiBpc01hbmFnZWFibGVCcmFpbnRyZWVTREtWZXJzaW9uKFxuICAgIHZlcnNpb246IHN0cmluZyxcbik6IHZlcnNpb24gaXMga2V5b2YgdHlwZW9mIEJSQUlOVFJFRV9TREtfU0NSSVBUU19JTlRFR1JJVFkge1xuICAgIHJldHVybiB2ZXJzaW9uIGluIEJSQUlOVFJFRV9TREtfU0NSSVBUU19JTlRFR1JJVFk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGlzTWFuYWdlYWJsZUJyYWludHJlZVNES1ZlcnNpb247XG4iLCJpbXBvcnQgeyBTdGFuZGFyZEVycm9yIH0gZnJvbSAnLi9pbmRleCc7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB0aGUgc2hvcHBlciBpcyB1c2luZyBhIGJyb3dzZXIgdmVyc2lvbiB0aGF0IGlzIG5vdFxuICogc3VwcG9ydGVkIGJ5IHVzIG9yIGFueSB0aGlyZCBwYXJ0eSBwcm92aWRlciB3ZSB1c2UuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVuc3VwcG9ydGVkQnJvd3NlckVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdVbnN1cHBvcnRlZCBicm93c2VyIGVycm9yJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1Vuc3VwcG9ydGVkQnJvd3NlckVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3Vuc3VwcG9ydGVkX2Jyb3dzZXInO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEJyYWludHJlZUVycm9yIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0JyYWludHJlZUVycm9yKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgQnJhaW50cmVlRXJyb3Ige1xuICAgIHJldHVybiBCb29sZWFuKFxuICAgICAgICB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICBlcnJvciAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgKCd0eXBlJyBpbiBlcnJvciB8fCAnbWVzc2FnZScgaW4gZXJyb3IgfHwgJ2NvZGUnIGluIGVycm9yKSxcbiAgICApO1xufVxuIiwiaW1wb3J0IHtcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIFVuc3VwcG9ydGVkQnJvd3NlckVycm9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJyYWludHJlZVNjcmlwdExvYWRlciBmcm9tICcuL2JyYWludHJlZS1zY3JpcHQtbG9hZGVyJztcbmltcG9ydCB7XG4gICAgQnJhaW50cmVlQ2xpZW50LFxuICAgIEJyYWludHJlZURhdGFDb2xsZWN0b3IsXG4gICAgQnJhaW50cmVlRGF0YUNvbGxlY3RvckNyZWF0b3JDb25maWcsXG4gICAgQnJhaW50cmVlRXJyb3IsXG4gICAgQnJhaW50cmVlRXJyb3JDb2RlLFxuICAgIEJyYWludHJlZUdvb2dsZVBheW1lbnQsXG4gICAgQnJhaW50cmVlTG9jYWxQYXltZW50LFxuICAgIEJyYWludHJlZU1vZHVsZSxcbiAgICBCcmFpbnRyZWVUaHJlZURTZWN1cmUsXG4gICAgQnJhaW50cmVlVXNCYW5rQWNjb3VudCxcbiAgICBCcmFpbnRyZWVWZW5tb0NoZWNrb3V0LFxuICAgIEJyYWludHJlZVZpc2FDaGVja291dCxcbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgaXNCcmFpbnRyZWVFcnJvciBmcm9tICcuL3V0aWxzL2lzLWJyYWludHJlZS1lcnJvcic7XG5pbXBvcnQgeyBWaXNhQ2hlY2tvdXRTREsgfSBmcm9tICcuL3Zpc2FjaGVja291dCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJyYWludHJlZVNkayB7XG4gICAgcHJpdmF0ZSBicmFpbnRyZWVWZW5tbz86IEJyYWludHJlZVZlbm1vQ2hlY2tvdXQ7XG4gICAgcHJpdmF0ZSBicmFpbnRyZWVMb2NhbFBheW1lbnQ/OiBCcmFpbnRyZWVMb2NhbFBheW1lbnQ7XG4gICAgcHJpdmF0ZSBjbGllbnQ/OiBCcmFpbnRyZWVDbGllbnQ7XG4gICAgcHJpdmF0ZSBjbGllbnRUb2tlbj86IHN0cmluZztcbiAgICBwcml2YXRlIGRhdGFDb2xsZWN0b3I/OiBCcmFpbnRyZWVEYXRhQ29sbGVjdG9yO1xuICAgIHByaXZhdGUgZ29vZ2xlUGF5bWVudD86IEJyYWludHJlZUdvb2dsZVBheW1lbnQ7XG4gICAgcHJpdmF0ZSB0aHJlZURTPzogQnJhaW50cmVlVGhyZWVEU2VjdXJlO1xuICAgIHByaXZhdGUgdmlzYUNoZWNrb3V0PzogUHJvbWlzZTxCcmFpbnRyZWVWaXNhQ2hlY2tvdXQ+O1xuICAgIHByaXZhdGUgdmlzYUNoZWNrb3V0U0RLPzogVmlzYUNoZWNrb3V0U0RLO1xuICAgIHByaXZhdGUgdXNCYW5rQWNjb3VudD86IEJyYWludHJlZVVzQmFua0FjY291bnQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGJyYWludHJlZVNjcmlwdExvYWRlcjogQnJhaW50cmVlU2NyaXB0TG9hZGVyKSB7fVxuXG4gICAgaW5pdGlhbGl6ZShjbGllbnRUb2tlbjogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0Q2xpZW50VG9rZW4oY2xpZW50VG9rZW4pO1xuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy50ZWFyZG93bk1vZHVsZSh0aGlzLmRhdGFDb2xsZWN0b3IpO1xuXG4gICAgICAgIHRoaXMuZGF0YUNvbGxlY3RvciA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJyYWludHJlZSBDbGllbnRcbiAgICAgKiBicmFpbnRyZWUgZG9jOiBodHRwczovL2JyYWludHJlZS5naXRodWIuaW8vYnJhaW50cmVlLXdlYi9jdXJyZW50L21vZHVsZS1icmFpbnRyZWUtd2ViX2NsaWVudC5odG1sXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBnZXRDbGllbnQoKTogUHJvbWlzZTxCcmFpbnRyZWVDbGllbnQ+IHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgY29uc3QgY2xpZW50VG9rZW4gPSB0aGlzLmdldENsaWVudFRva2VuT3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgY2xpZW50Q3JlYXRvciA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRDbGllbnQoKTtcblxuICAgICAgICAgICAgdGhpcy5jbGllbnQgPSBhd2FpdCBjbGllbnRDcmVhdG9yLmNyZWF0ZSh7IGF1dGhvcml6YXRpb246IGNsaWVudFRva2VuIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnJhaW50cmVlIERhdGEgY29sbGVjdG9yXG4gICAgICogYnJhaW50cmVlIGRvYzogaHR0cHM6Ly9icmFpbnRyZWUuZ2l0aHViLmlvL2JyYWludHJlZS13ZWIvY3VycmVudC9tb2R1bGUtYnJhaW50cmVlLXdlYl9kYXRhLWNvbGxlY3Rvci5odG1sXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBnZXREYXRhQ29sbGVjdG9yT3JUaHJvdyhcbiAgICAgICAgb3B0aW9ucz86IFBhcnRpYWw8QnJhaW50cmVlRGF0YUNvbGxlY3RvckNyZWF0b3JDb25maWc+LFxuICAgICk6IFByb21pc2U8QnJhaW50cmVlRGF0YUNvbGxlY3Rvcj4ge1xuICAgICAgICBjb25zdCBlbXB0eURhdGFDb2xsZWN0b3IgPSB7XG4gICAgICAgICAgICBkZXZpY2VEYXRhOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0ZWFyZG93bjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCF0aGlzLmRhdGFDb2xsZWN0b3IpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5nZXRDbGllbnQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhQ29sbGVjdG9yID0gYXdhaXQgdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZERhdGFDb2xsZWN0b3IoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFDb2xsZWN0b3JDb25maWc6IEJyYWludHJlZURhdGFDb2xsZWN0b3JDcmVhdG9yQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIGtvdW50OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFDb2xsZWN0b3IgPSBhd2FpdCBkYXRhQ29sbGVjdG9yLmNyZWF0ZShkYXRhQ29sbGVjdG9yQ29uZmlnKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzQnJhaW50cmVlRXJyb3IoZXJyb3IpICYmIGVycm9yLmNvZGUgPT09IEJyYWludHJlZUVycm9yQ29kZS5Lb3VudE5vdEVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5RGF0YUNvbGxlY3RvcjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2xsZWN0b3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCcmFpbnRyZWUgR29vZ2xlIFBheW1lbnRcbiAgICAgKiBicmFpbnRyZWUgZG9jOiBodHRwczovL2JyYWludHJlZS5naXRodWIuaW8vYnJhaW50cmVlLXdlYi9jdXJyZW50L21vZHVsZS1icmFpbnRyZWUtd2ViX2dvb2dsZS1wYXltZW50Lmh0bWxcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGdldEJyYWludHJlZUdvb2dsZVBheW1lbnQoKTogUHJvbWlzZTxCcmFpbnRyZWVHb29nbGVQYXltZW50PiB7XG4gICAgICAgIGlmICghdGhpcy5nb29nbGVQYXltZW50KSB7XG4gICAgICAgICAgICBjb25zdCBbY2xpZW50LCBicmFpbnRyZWVHb29nbGVQYXltZW50XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICB0aGlzLmdldENsaWVudCgpLFxuICAgICAgICAgICAgICAgIHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRHb29nbGVQYXltZW50KCksXG4gICAgICAgICAgICBdKTtcblxuICAgICAgICAgICAgdGhpcy5nb29nbGVQYXltZW50ID0gYXdhaXQgYnJhaW50cmVlR29vZ2xlUGF5bWVudC5jcmVhdGUoeyBjbGllbnQgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5nb29nbGVQYXltZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnJhaW50cmVlIDNEU1xuICAgICAqIGJyYWludHJlZSBkb2M6IGh0dHBzOi8vYnJhaW50cmVlLmdpdGh1Yi5pby9icmFpbnRyZWUtd2ViL2N1cnJlbnQvbW9kdWxlLWJyYWludHJlZS13ZWJfdGhyZWUtZC1zZWN1cmUuaHRtbFxuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgZ2V0QnJhaW50cmVlVGhyZWVEUygpOiBQcm9taXNlPEJyYWludHJlZVRocmVlRFNlY3VyZT4ge1xuICAgICAgICBpZiAoIXRoaXMudGhyZWVEUykge1xuICAgICAgICAgICAgY29uc3QgW2NsaWVudCwgdGhyZWVEU2VjdXJlXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICB0aGlzLmdldENsaWVudCgpLFxuICAgICAgICAgICAgICAgIHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWQzRFMoKSxcbiAgICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgICB0aGlzLnRocmVlRFMgPSBhd2FpdCB0aHJlZURTZWN1cmUuY3JlYXRlKHsgY2xpZW50LCB2ZXJzaW9uOiAyIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudGhyZWVEUztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJyYWludHJlZSBMb2NhbCBQYXltZW50IE1ldGhvZHNcbiAgICAgKiBicmFpbnRyZWUgZG9jOiBodHRwczovL2JyYWludHJlZS5naXRodWIuaW8vYnJhaW50cmVlLXdlYi9jdXJyZW50L21vZHVsZS1icmFpbnRyZWUtd2ViX2xvY2FsLXBheW1lbnQuaHRtbFxuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgZ2V0QnJhaW50cmVlTG9jYWxQYXltZW50KFxuICAgICAgICBtZXJjaGFudEFjY291bnRJZDogc3RyaW5nLFxuICAgICk6IFByb21pc2U8QnJhaW50cmVlTG9jYWxQYXltZW50IHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIGlmICghdGhpcy5icmFpbnRyZWVMb2NhbFBheW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IFtjbGllbnQsIGxvY2FsUGF5bWVudENyZWF0b3JdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2xpZW50KCksXG4gICAgICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZExvY2FsUGF5bWVudCgpLFxuICAgICAgICAgICAgXSk7XG5cbiAgICAgICAgICAgIHRoaXMuYnJhaW50cmVlTG9jYWxQYXltZW50ID0gYXdhaXQgbmV3IFByb21pc2UoXG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlOiAoYnJhaW50cmVlTG9jYWxQYXltZW50OiBCcmFpbnRyZWVMb2NhbFBheW1lbnQpID0+IHZvaWQsXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdDogKGVycm9yOiBCcmFpbnRyZWVFcnJvcikgPT4gdm9pZCxcbiAgICAgICAgICAgICAgICApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCBsb2NhbFBheW1lbnRDcmVhdG9yLmNyZWF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xpZW50LCBtZXJjaGFudEFjY291bnRJZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBCcmFpbnRyZWVFcnJvciB8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmFpbnRyZWVMb2NhbFBheW1lbnQ6IEJyYWludHJlZUxvY2FsUGF5bWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYnJhaW50cmVlTG9jYWxQYXltZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5icmFpbnRyZWVMb2NhbFBheW1lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCcmFpbnRyZWUgVXNCYW5rQWNjb3VudFxuICAgICAqIGJyYWludHJlZSBkb2M6IGh0dHBzOi8vYnJhaW50cmVlLmdpdGh1Yi5pby9icmFpbnRyZWUtd2ViL2N1cnJlbnQvbW9kdWxlLWJyYWludHJlZS13ZWJfdXMtYmFuay1hY2NvdW50Lmh0bWxcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGdldFVzQmFua0FjY291bnQoKSB7XG4gICAgICAgIGlmICghdGhpcy51c0JhbmtBY2NvdW50KSB7XG4gICAgICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmdldENsaWVudCgpO1xuICAgICAgICAgICAgY29uc3QgdXNCYW5rQWNjb3VudCA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRVc0JhbmtBY2NvdW50KCk7XG5cbiAgICAgICAgICAgIHRoaXMudXNCYW5rQWNjb3VudCA9IGF3YWl0IHVzQmFua0FjY291bnQuY3JlYXRlKHsgY2xpZW50IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudXNCYW5rQWNjb3VudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJyYWludHJlZSBWaXNhIENoZWNrb3V0XG4gICAgICogYnJhaW50cmVlIGRvYzogaHR0cHM6Ly9icmFpbnRyZWUuZ2l0aHViLmlvL2JyYWludHJlZS13ZWIvY3VycmVudC9tb2R1bGUtYnJhaW50cmVlLXdlYl92aXNhLWNoZWNrb3V0Lmh0bWxcbiAgICAgKlxuICAgICAqL1xuICAgIGdldEJyYWludHJlZVZpc2FDaGVja291dCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZpc2FDaGVja291dCkge1xuICAgICAgICAgICAgdGhpcy52aXNhQ2hlY2tvdXQgPSBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDbGllbnQoKSxcbiAgICAgICAgICAgICAgICB0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkVmlzYUNoZWNrb3V0KCksXG4gICAgICAgICAgICBdKS50aGVuKChbY2xpZW50LCBwYXlwYWxdKSA9PiBwYXlwYWwuY3JlYXRlKHsgY2xpZW50IH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnZpc2FDaGVja291dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJyYWludHJlZSBWaXNhIENoZWNrb3V0IFNES1xuICAgICAqIHZpc2EgY2hlY2tvdXQgZG9jOiBodHRwczovL2RldmVsb3Blci52aXNhLmNvbS9jYXBhYmlsaXRpZXMvdmlzYV9jaGVja291dC9kb2NzLWhvdy10b1xuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgZ2V0VmlzYUNoZWNrb3V0U2RrKHRlc3RNb2RlPzogYm9vbGVhbikge1xuICAgICAgICBpZiAoIXRoaXMudmlzYUNoZWNrb3V0U0RLKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2FDaGVja291dFNESyA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRWaXNhQ2hlY2tvdXRTZGsodGVzdE1vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudmlzYUNoZWNrb3V0U0RLO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnJhaW50cmVlIFZlbm1vIENoZWNrb3V0XG4gICAgICogYnJhaW50cmVlIHZlbm1vIGNoZWNrb3V0IGRvYzogaHR0cHM6Ly9icmFpbnRyZWUuZ2l0aHViLmlvL2JyYWludHJlZS13ZWIvY3VycmVudC9tb2R1bGUtYnJhaW50cmVlLXdlYl92ZW5tby5odG1sXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBnZXRWZW5tb0NoZWNrb3V0T3JUaHJvdygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJyYWludHJlZVZlbm1vKSB7XG4gICAgICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmdldENsaWVudCgpO1xuICAgICAgICAgICAgY29uc3QgdmVubW9DaGVja291dCA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRWZW5tb0NoZWNrb3V0KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHZlbm1vQ2hlY2tvdXRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgY2xpZW50LFxuICAgICAgICAgICAgICAgIGFsbG93RGVza3RvcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kVXNhZ2U6ICdtdWx0aV91c2UnLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgYnJhaW50cmVlVmVubW9DaGVja291dCA9IGF3YWl0IHZlbm1vQ2hlY2tvdXQuY3JlYXRlKHZlbm1vQ2hlY2tvdXRDb25maWcpO1xuXG4gICAgICAgICAgICBpZiAoYnJhaW50cmVlVmVubW9DaGVja291dC5pc0Jyb3dzZXJTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYnJhaW50cmVlVmVubW8gPSBicmFpbnRyZWVWZW5tb0NoZWNrb3V0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRCcm93c2VyRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmJyYWludHJlZVZlbm1vO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUHJpdmF0ZSBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIHNldENsaWVudFRva2VuKGNsaWVudFRva2VuOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jbGllbnRUb2tlbiA9IGNsaWVudFRva2VuO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0Q2xpZW50VG9rZW5PclRocm93KCk6IHN0cmluZyB7XG4gICAgICAgIGlmICghdGhpcy5jbGllbnRUb2tlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmNsaWVudFRva2VuO1xuICAgIH1cblxuICAgIHByaXZhdGUgdGVhcmRvd25Nb2R1bGUobW9kdWxlPzogQnJhaW50cmVlTW9kdWxlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBtb2R1bGUgPyBtb2R1bGUudGVhcmRvd24oKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgRmVhdHVyZXMge1xuICAgIFtmZWF0dXJlTmFtZTogc3RyaW5nXTogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNFeHBlcmltZW50RW5hYmxlZChcbiAgICBmZWF0dXJlczogRmVhdHVyZXMsXG4gICAgZXhwZXJpbWVudE5hbWU6IHN0cmluZyxcbiAgICBmYWxsYmFja1ZhbHVlID0gdHJ1ZSxcbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmZWF0dXJlc1tleHBlcmltZW50TmFtZV0gPz8gZmFsbGJhY2tWYWx1ZTtcbn1cbiIsImltcG9ydCB7IGZpbmQgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBpc0V4cGVyaW1lbnRFbmFibGVkIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcblxuaW1wb3J0IHsgQnJhaW50cmVlSG9zdFdpbmRvdyB9IGZyb20gJy4vYnJhaW50cmVlJztcbmltcG9ydCB7XG4gICAgQlJBSU5UUkVFX1NES19ERUZBVUxUX1ZFUlNJT04sXG4gICAgQlJBSU5UUkVFX1NES19IT1NURURfRklFTERTX0ZJWF9WRVJTSU9OLFxuICAgIEJSQUlOVFJFRV9TREtfU1RBQkxFX1ZFUlNJT04sXG59IGZyb20gJy4vYnJhaW50cmVlLXNkay12ZXJpc29uJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIge1xuICAgIHByaXZhdGUgYnJhaW50cmVlV2luZG93OiBCcmFpbnRyZWVIb3N0V2luZG93ID0gd2luZG93O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSB7fVxuXG4gICAgZ2V0U0RLVmVyc2lvbigpIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3Qgc3RvcmVDb25maWcgPSBzdGF0ZS5nZXRTdG9yZUNvbmZpZygpO1xuICAgICAgICBjb25zdCBmZWF0dXJlcyA9IHN0b3JlQ29uZmlnPy5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHByZWxvYWRlZFZlcnNpb24gPSB0aGlzLmdldFByZWxvYWRlZFNES1ZlcnNpb24oKTtcblxuICAgICAgICBpZiAocHJlbG9hZGVkVmVyc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIHByZWxvYWRlZFZlcnNpb247XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNFeHBlcmltZW50RW5hYmxlZChmZWF0dXJlcywgJ1BBWVBBTC01ODA5LmJyYWludHJlZV9ob3N0ZWRfZmllbGRzX2ZpeF92ZXJzaW9uJykpIHtcbiAgICAgICAgICAgIHJldHVybiBCUkFJTlRSRUVfU0RLX0hPU1RFRF9GSUVMRFNfRklYX1ZFUlNJT047XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNFeHBlcmltZW50RW5hYmxlZChmZWF0dXJlcywgJ1BBWVBBTC01NjM2LnVwZGF0ZV9icmFpbnRyZWVfc2RrX3ZlcnNpb24nKSkge1xuICAgICAgICAgICAgcmV0dXJuIEJSQUlOVFJFRV9TREtfREVGQVVMVF9WRVJTSU9OO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIEJSQUlOVFJFRV9TREtfU1RBQkxFX1ZFUlNJT047XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQcmVsb2FkZWRTREtWZXJzaW9uKCk6IHZvaWQgfCBzdHJpbmcge1xuICAgICAgICBjb25zdCBicmFpbnRyZWUgPSB0aGlzLmJyYWludHJlZVdpbmRvdy5icmFpbnRyZWU7XG5cbiAgICAgICAgaWYgKGJyYWludHJlZSkge1xuICAgICAgICAgICAgY29uc3QgcHJlbG9hZGVkVmVyc2lvbiA9IGZpbmQ8eyBWRVJTSU9OPzogc3RyaW5nIH0+KFxuICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoYnJhaW50cmVlKSxcbiAgICAgICAgICAgICAgICAobW9kdWxlKSA9PiAhIW1vZHVsZS5WRVJTSU9OLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuIHByZWxvYWRlZFZlcnNpb24/LlZFUlNJT047XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgUmVzb2x2YWJsZU1vZHVsZSBmcm9tICcuL3Jlc29sdmFibGUtbW9kdWxlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9SZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPihcbiAgICBtb2R1bGU6IFRNb2R1bGUsXG4gICAgcmVzb2x2ZUlkczogVElkZW50aWZpZXJbXSxcbik6IFJlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+IHtcbiAgICBjb25zb2xlLmxvZygncmVzb2x2ZUlkcycsIHJlc29sdmVJZHMpO1xuXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obW9kdWxlLCB7IHJlc29sdmVJZHMgfSk7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIG1ldGhvZCBpcyB1bmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZVxuICogY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSBhcmd1bWVudHMgYWNjb3JkaW5nIHRvIHRoZWlyIHJlcXVpcmVtZW50cyxcbiAqIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdJbnZhbGlkIGFyZ3VtZW50cyBoYXZlIGJlZW4gcHJvdmlkZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ0ludmFsaWRBcmd1bWVudEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ2ludmFsaWRfYXJndW1lbnQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBNaXNzaW5nRGF0YUVycm9yVHlwZSB7XG4gICAgTWlzc2luZ0JpbGxpbmdBZGRyZXNzLFxuICAgIE1pc3NpbmdDYXJ0LFxuICAgIE1pc3NpbmdDaGVja291dCxcbiAgICBNaXNzaW5nQ29uc2lnbm1lbnRzLFxuICAgIE1pc3NpbmdDdXN0b21lcixcbiAgICBNaXNzaW5nQ2hlY2tvdXRDb25maWcsXG4gICAgTWlzc2luZ09yZGVyLFxuICAgIE1pc3NpbmdPcmRlckNvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXJJZCxcbiAgICBNaXNzaW5nUGF5bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudElkLFxuICAgIE1pc3NpbmdQYXltZW50SW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICBNaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsLFxuICAgIE1pc3NpbmdQYXltZW50U3RhdHVzLFxuICAgIE1pc3NpbmdQYXltZW50VG9rZW4sXG4gICAgTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIHdoZW4gZGF0YSB0aGF0IGlzIGV4cGVjdGVkIHRvIGV4aXN0IGlzIG1pc3NpbmcuIFVzdWFsbHkgaXRcbiAqIGlzIGR1ZSB0byB0aGUgZmFjdCB0aGF0IGNlcnRhaW4gZGF0YSBoYXMgbm90IGJlZW4gcmV0cmlldmVkIGZyb20gb3Igc2F2ZWQgdG9cbiAqIHRoZSBzZXJ2ZXIgeWV0LiBBbmQgc3VjaCBkYXRhIGlzIHJlcXVpcmVkIHRvIHBlcmZvcm0gY2VydGFpbiBhY3Rpb25zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXNzaW5nRGF0YUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ01pc3NpbmdEYXRhRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbWlzc2luZ19kYXRhJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjYXJ0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDb25zaWdubWVudHM6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ3VzdG9tZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY3VzdG9tZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOlxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlckNvbmZpZzpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSB0b2tlbiByZXF1aXJlZCB0byBzdWJtaXQgYSBwYXltZW50IGlzIG1pc3NpbmcuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBJbnZhbGlkQXJndW1lbnRFcnJvciBmcm9tICcuL2ludmFsaWQtYXJndW1lbnQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHdlIGFyZSB1bmFibGUgdG8gc3VibWl0IGEgcGF5bWVudCBiZWNhdXNlXG4gKiB0aGUgY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSByZXF1aXJlZCBmaWVsZHMsIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzXG4gKiBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IgZXh0ZW5kcyBJbnZhbGlkQXJndW1lbnRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoaW52YWxpZEZpZWxkcz86IHN0cmluZ1tdKSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBmb3IgdGhlIG9yZGVyIGJlY2F1c2UgdGhlIHBheWxvYWQgaXMgaW52YWxpZC4nO1xuXG4gICAgICAgIGlmIChpbnZhbGlkRmllbGRzKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gYCR7bWVzc2FnZX0gTWFrZSBzdXJlIHRoZSBmb2xsb3dpbmcgZmllbGRzIGFyZSBwcm92aWRlZCBjb3JyZWN0bHk6ICR7aW52YWxpZEZpZWxkcy5qb2luKFxuICAgICAgICAgICAgICAgICcsICcsXG4gICAgICAgICAgICApfS5gO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcic7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBGb3JtYXR0ZWRQYXlsb2FkLFxuICAgIEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnLi9wYXltZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gQm9vbGVhbigoaW5zdHJ1bWVudCBhcyBWYXVsdGVkSW5zdHJ1bWVudCkuaW5zdHJ1bWVudElkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSG9zdGVkVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgQm9vbGVhbigoaW5zdHJ1bWVudCBhcyBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCkuaW5zdHJ1bWVudElkKSAmJlxuICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RydW1lbnQsICdjY051bWJlcicpICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdHJ1bWVudCwgJ2NjQ3Z2JylcbiAgICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIEZvcm1hdHRlZFBheWxvYWQ8Rm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQ+IHtcbiAgICBjb25zdCBmb3JtYXR0ZWRJbnN0cnVtZW50ID0gKGluc3RydW1lbnQgYXMgRm9ybWF0dGVkUGF5bG9hZDxGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudD4pXG4gICAgICAgIC5mb3JtYXR0ZWRQYXlsb2FkO1xuXG4gICAgaWYgKCFmb3JtYXR0ZWRJbnN0cnVtZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4gPT09ICdzdHJpbmcnIHx8XG4gICAgICAgIEJvb2xlYW4oZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4gJiYgZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4udG9rZW4pXG4gICAgKTtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHRyeWluZyB0byBtYWtlIGFuIG9yZGVyIGZpbmFsaXphdGlvbiByZXF1ZXN0IGZvciBhXG4gKiBwYXltZW50IG1ldGhvZCB0aGF0IGRvZXMgbm90IHJlcXVpcmUgc3VjaCBwcm9jZWR1cmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEhvc3RlZEluc3RydW1lbnQgfSBmcm9tICcuL3BheW1lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0hvc3RlZEluc3RydW1lbnRMaWtlKFxuICAgIGluc3RydW1lbnQ6IHVua25vd24sXG4pOiBpbnN0cnVtZW50IGlzIEhvc3RlZEluc3RydW1lbnQge1xuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBpbnN0cnVtZW50ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBpbnN0cnVtZW50ICE9PSBudWxsICYmXG4gICAgICAgICh0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2F2ZUluc3RydW1lbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2F2ZUluc3RydW1lbnQgPT09ICdib29sZWFuJykgJiZcbiAgICAgICAgKHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPT09ICdib29sZWFuJylcbiAgICApO1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBwYXltZW50IG1ldGhvZCBleHBlcmllbmNlcyBzb21lIGtpbmQgb2ZcbiAqIGZhaWx1cmUgKGkuZS46IGl0cyBjbGllbnQgbGlicmFyeSByZXR1cm5zIGEgcmVqZWN0ZWQgcHJvbWlzZSkuIEFuZCB0aGVyZSBpc1xuICogbm8gb3RoZXIgZXJyb3IgdHlwZSB0aGF0IGlzIG1vcmUgc3BlY2lmaWMgdGhhbiB0aGlzIG9uZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBoYXMgdGhyb3duIGFuIHVuZXhwZWN0ZWQgZXJyb3IuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfbWV0aG9kX2NsaWVudF9pbnZhbGlkJztcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbiAgICBXaXRoQmFua0FjY291bnRJbnN0cnVtZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNVc0JhbmtBY2NvdW50SW5zdHJ1bWVudExpa2UoXG4gICAgaW5zdHJ1bWVudD86IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgV2l0aEJhbmtBY2NvdW50SW5zdHJ1bWVudCB7XG4gICAgaWYgKCFpbnN0cnVtZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICAnYWNjb3VudE51bWJlcicgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAncm91dGluZ051bWJlcicgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAnb3duZXJzaGlwVHlwZScgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAnYWNjb3VudFR5cGUnIGluIGluc3RydW1lbnRcbiAgICApO1xufVxuIiwiaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgQnJhaW50cmVlU2RrLFxuICAgIEJyYWludHJlZVVzQmFua0FjY291bnQsXG4gICAgQnJhaW50cmVlVXNCYW5rQWNjb3VudERldGFpbHMsXG4gICAgaXNCcmFpbnRyZWVFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9icmFpbnRyZWUtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlLFxuICAgIGlzVmF1bHRlZEluc3RydW1lbnQsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFdpdGhCYW5rQWNjb3VudEluc3RydW1lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgaXNVc0JhbmtBY2NvdW50SW5zdHJ1bWVudExpa2UgZnJvbSAnLi4vaXMtdXMtYmFuay1hY2NvdW50LWluc3RydW1lbnQtbGlrZSc7XG5cbmltcG9ydCB7IFdpdGhCcmFpbnRyZWVBY2hQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgfSBmcm9tICcuL2JyYWludHJlZS1hY2gtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJhaW50cmVlQWNoUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIHVzQmFua0FjY291bnQ/OiBCcmFpbnRyZWVVc0JhbmtBY2NvdW50O1xuICAgIHByaXZhdGUgZ2V0TWFuZGF0ZVRleHQ/OiAoKSA9PiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJyYWludHJlZVNkazogQnJhaW50cmVlU2RrLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhCcmFpbnRyZWVBY2hQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGJyYWludHJlZWFjaCB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdldE1hbmRhdGVUZXh0ID0gYnJhaW50cmVlYWNoPy5nZXRNYW5kYXRlVGV4dDtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCcmFpbnRyZWVJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiwgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghY2xpZW50VG9rZW4gfHwgIWluaXRpYWxpemF0aW9uRGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5icmFpbnRyZWVTZGsuaW5pdGlhbGl6ZShjbGllbnRUb2tlbik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMudXNCYW5rQWNjb3VudCA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2RrLmdldFVzQmFua0FjY291bnQoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQnJhaW50cmVlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShvcmRlclJlcXVlc3Q6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gb3JkZXJSZXF1ZXN0O1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc1N1Ym1pdHRpbmdXaXRoVmF1bHRpbmdJbnN0cnVtZW50ID0gaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50LnBheW1lbnREYXRhIHx8IHt9KTtcblxuICAgICAgICBjb25zdCBub25jZSA9IGlzU3VibWl0dGluZ1dpdGhWYXVsdGluZ0luc3RydW1lbnRcbiAgICAgICAgICAgID8gYXdhaXQgdGhpcy50b2tlbml6ZVBheW1lbnRGb3JWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50KVxuICAgICAgICAgICAgOiBhd2FpdCB0aGlzLnRva2VuaXplUGF5bWVudChwYXltZW50KTtcblxuICAgICAgICBjb25zdCBzdWJtaXRQYXltZW50UGF5bG9hZCA9IGlzU3VibWl0dGluZ1dpdGhWYXVsdGluZ0luc3RydW1lbnRcbiAgICAgICAgICAgID8gYXdhaXQgdGhpcy5wcmVwYXJlUGF5bWVudERhdGFGb3JWYXVsdGVkSW5zdHJ1bWVudChub25jZSwgcGF5bWVudClcbiAgICAgICAgICAgIDogYXdhaXQgdGhpcy5wcmVwYXJlUGF5bWVudERhdGEobm9uY2UsIHBheW1lbnQpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHN1Ym1pdFBheW1lbnRQYXlsb2FkKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmJyYWludHJlZVNkay5kZWluaXRpYWxpemUoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB0b2tlbml6ZVBheW1lbnQoeyBwYXltZW50RGF0YSB9OiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHVzQmFua0FjY291bnQgPSB0aGlzLmdldFVzQmFua0FjY291bnRPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFpc1VzQmFua0FjY291bnRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50LnBheW1lbnREYXRhJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWFuZGF0ZVRleHQgPSBpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnREYXRhKVxuICAgICAgICAgICAgPyAnVGhlIGRhdGEgYXJlIHVzZWQgZm9yIHN0b3JlZCBpbnN0cnVtZW50IHZlcmlmaWNhdGlvbidcbiAgICAgICAgICAgIDogdHlwZW9mIHRoaXMuZ2V0TWFuZGF0ZVRleHQgPT09ICdmdW5jdGlvbicgJiYgdGhpcy5nZXRNYW5kYXRlVGV4dCgpO1xuXG4gICAgICAgIGlmICghbWFuZGF0ZVRleHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBnZXRNYW5kYXRlVGV4dCBpcyBub3QgcHJvdmlkZWQgb3IgcmV0dXJuZWQgdW5kZWZpbmVkIHZhbHVlLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgbm9uY2UgfSA9IGF3YWl0IHVzQmFua0FjY291bnQudG9rZW5pemUoe1xuICAgICAgICAgICAgICAgIGJhbmtEZXRhaWxzOiB0aGlzLmdldEJhbmtEZXRhaWxzKHBheW1lbnREYXRhKSxcbiAgICAgICAgICAgICAgICBtYW5kYXRlVGV4dCxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gbm9uY2U7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUJyYWludHJlZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgdG9rZW5pemVQYXltZW50Rm9yVmF1bHRlZEluc3RydW1lbnQoXG4gICAgICAgIHBheW1lbnQ6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5LFxuICAgICk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXltZW50RGF0YSA9IHt9IH0gPSBwYXltZW50O1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgY29uZmlnIH0gPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFjb25maWcuaXNWYXVsdGluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVmF1bHRpbmcgaXMgZGlzYWJsZWQgYnV0IGEgdmF1bHRlZCBpbnN0cnVtZW50IHdhcyBiZWluZyB1c2VkIGZvciB0aGlzIHRyYW5zYWN0aW9uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzaG91bGRWZXJpZnlWYXVsdGluZ0luc3RydW1lbnQgPSBpc1VzQmFua0FjY291bnRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSk7XG5cbiAgICAgICAgcmV0dXJuIHNob3VsZFZlcmlmeVZhdWx0aW5nSW5zdHJ1bWVudCA/IHRoaXMudG9rZW5pemVQYXltZW50KHBheW1lbnQpIDogbnVsbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHByZXBhcmVQYXltZW50RGF0YShcbiAgICAgICAgbm9uY2U6IHN0cmluZyB8IG51bGwsXG4gICAgICAgIHBheW1lbnQ6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5LFxuICAgICk6IFByb21pc2U8UGF5bWVudD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXltZW50RGF0YSA9IHt9IH0gPSBwYXltZW50O1xuXG4gICAgICAgIGlmICghaXNVc0JhbmtBY2NvdW50SW5zdHJ1bWVudExpa2UocGF5bWVudERhdGEpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudC5wYXltZW50RGF0YSddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgZGV2aWNlRGF0YSB9ID0gYXdhaXQgdGhpcy5icmFpbnRyZWVTZGsuZ2V0RGF0YUNvbGxlY3Rvck9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCwgcm91dGluZ051bWJlciwgYWNjb3VudE51bWJlciB9ID1cbiAgICAgICAgICAgIHBheW1lbnREYXRhO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgZGV2aWNlU2Vzc2lvbklkOiBkZXZpY2VEYXRhLFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICB0b2tlbml6ZWRfYmFua19hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXI6IHJvdXRpbmdOdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrZWRfYWNjb3VudF9udW1iZXI6IGFjY291bnROdW1iZXIuc3Vic3RyKC00KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBub25jZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHByZXBhcmVQYXltZW50RGF0YUZvclZhdWx0ZWRJbnN0cnVtZW50KFxuICAgICAgICBub25jZTogc3RyaW5nIHwgbnVsbCxcbiAgICAgICAgcGF5bWVudDogT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgKTogUHJvbWlzZTxQYXltZW50PiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheW1lbnREYXRhID0ge30gfSA9IHBheW1lbnQ7XG5cbiAgICAgICAgaWYgKCFpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnREYXRhKSB8fCAhaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50LnBheW1lbnREYXRhJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBkZXZpY2VEYXRhIH0gPSBhd2FpdCB0aGlzLmJyYWludHJlZVNkay5nZXREYXRhQ29sbGVjdG9yT3JUaHJvdygpO1xuICAgICAgICBjb25zdCB7IGluc3RydW1lbnRJZCwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCB9ID0gcGF5bWVudERhdGE7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBkZXZpY2VTZXNzaW9uSWQ6IGRldmljZURhdGEsXG4gICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgLi4uKG5vbmNlICYmIHsgbm9uY2UgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QmFua0RldGFpbHMocGF5bWVudERhdGE6IFdpdGhCYW5rQWNjb3VudEluc3RydW1lbnQpOiBCcmFpbnRyZWVVc0JhbmtBY2NvdW50RGV0YWlscyB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG5cbiAgICAgICAgY29uc3Qgb3duZXJzaGlwVHlwZSA9IHBheW1lbnREYXRhLm93bmVyc2hpcFR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgYWNjb3VudFR5cGUgPSBwYXltZW50RGF0YS5hY2NvdW50VHlwZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY2NvdW50TnVtYmVyOiBwYXltZW50RGF0YS5hY2NvdW50TnVtYmVyLFxuICAgICAgICAgICAgcm91dGluZ051bWJlcjogcGF5bWVudERhdGEucm91dGluZ051bWJlcixcbiAgICAgICAgICAgIG93bmVyc2hpcFR5cGUsXG4gICAgICAgICAgICAuLi4ob3duZXJzaGlwVHlwZSA9PT0gJ3BlcnNvbmFsJ1xuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogcGF5bWVudERhdGEuZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBwYXltZW50RGF0YS5sYXN0TmFtZSxcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICBidXNpbmVzc05hbWU6IHBheW1lbnREYXRhLmJ1c2luZXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgYWNjb3VudFR5cGUsXG4gICAgICAgICAgICBiaWxsaW5nQWRkcmVzczoge1xuICAgICAgICAgICAgICAgIHN0cmVldEFkZHJlc3M6IGJpbGxpbmdBZGRyZXNzLmFkZHJlc3MxLFxuICAgICAgICAgICAgICAgIGV4dGVuZGVkQWRkcmVzczogYmlsbGluZ0FkZHJlc3MuYWRkcmVzczIsXG4gICAgICAgICAgICAgICAgbG9jYWxpdHk6IGJpbGxpbmdBZGRyZXNzLmNpdHksXG4gICAgICAgICAgICAgICAgcmVnaW9uOiBiaWxsaW5nQWRkcmVzcy5zdGF0ZU9yUHJvdmluY2VDb2RlLFxuICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6IGJpbGxpbmdBZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VXNCYW5rQWNjb3VudE9yVGhyb3coKTogQnJhaW50cmVlVXNCYW5rQWNjb3VudCB7XG4gICAgICAgIGlmICghdGhpcy51c0JhbmtBY2NvdW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudXNCYW5rQWNjb3VudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUJyYWludHJlZUVycm9yKGVycm9yOiB1bmtub3duKTogbmV2ZXIge1xuICAgICAgICBpZiAoIWlzQnJhaW50cmVlRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlQnJhaW50cmVlU2RrIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9icmFpbnRyZWUtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCcmFpbnRyZWVBY2hQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9icmFpbnRyZWUtYWNoLXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCcmFpbnRyZWVBY2hQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8QnJhaW50cmVlQWNoUGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBCcmFpbnRyZWVBY2hQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJyYWludHJlZVNkayhwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJyYWludHJlZUFjaFBheW1lbnRTdHJhdGVneSwgW3sgaWQ6ICdicmFpbnRyZWVhY2gnIH1dKTtcbiIsImltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgUGF5bWVudEludGVncmF0aW9uU2VydmljZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQnJhaW50cmVlU2NyaXB0TG9hZGVyIGZyb20gJy4vYnJhaW50cmVlLXNjcmlwdC1sb2FkZXInO1xuaW1wb3J0IEJyYWludHJlZVNkayBmcm9tICcuL2JyYWludHJlZS1zZGsnO1xuaW1wb3J0IEJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyIGZyb20gJy4vYnJhaW50cmVlLXNkay12ZXJzaW9uLW1hbmFnZXInO1xuXG5jb25zdCBjcmVhdGVCcmFpbnRyZWVTZGsgPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT4ge1xuICAgIGNvbnN0IGJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyID0gbmV3IEJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpO1xuICAgIGNvbnN0IGJyYWludHJlZVNjcmlwdExvYWRlciA9IG5ldyBCcmFpbnRyZWVTY3JpcHRMb2FkZXIoXG4gICAgICAgIGdldFNjcmlwdExvYWRlcigpLFxuICAgICAgICB3aW5kb3csXG4gICAgICAgIGJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyLFxuICAgICk7XG5cbiAgICByZXR1cm4gbmV3IEJyYWludHJlZVNkayhicmFpbnRyZWVTY3JpcHRMb2FkZXIpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQnJhaW50cmVlU2RrO1xuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzIHtcbiAgICBba2V5OiBzdHJpbmddOiBBcnJheTx7IG1lc3NhZ2U6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50SW52YWxpZEZvcm1FcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBkZXRhaWxzOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMsIG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBmb3JtIGNvbnRhaW5zIGludmFsaWQgZGF0YS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEludmFsaWRGb3JtRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9pbnZhbGlkX2Zvcm0nO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBwYXltZW50IGZsb3cgaXMgY2FuY2VsbGVkLiBJdCBjb3VsZCBiZVxuICogZHVlIHRvIGEgZGVsaWJlcmF0ZSB1c2VyIGludGVyYWN0aW9uLCBpLmUuOiB0aGUgdXNlciBjbGlja3Mgb24gYSBjYW5jZWxcbiAqIGJ1dHRvbiB3aGljaCBkaXNtaXNzZXMgdGhlIHBheW1lbnQgbW9kYWwuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnUGF5bWVudCBwcm9jZXNzIHdhcyBjYW5jZWxsZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X2NhbmNlbGxlZCc7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FuY2VsbGFibGVQcm9taXNlPFQ+IHtcbiAgICBwcm9taXNlOiBQcm9taXNlPFQ+O1xuICAgIGNhbmNlbCE6IChyZWFzb24/OiBhbnkpID0+IHZvaWQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9taXNlOiBQcm9taXNlPFQ+KSB7XG4gICAgICAgIGNvbnN0IGNhbmNlbGxhYmxlID0gbmV3IFByb21pc2U8VD4oKF8sIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWwgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IFByb21pc2UucmFjZShbcHJvbWlzZSwgY2FuY2VsbGFibGVdKTtcbiAgICB9XG59XG4iLCIvLyB0aGUgUGF5UGFsIHNpZGUgb2YgdGhpbmdzIHVzZXMgdXBwZXJjYXNlIGtleXMgaW5zdGVhZCBvZiBjYW1lbCBjYXNlXG5cbi8qKlxuICpcbiAqIFBheVBhbCBjb25zdGFudHNcbiAqXG4gKi9cbmV4cG9ydCBjb25zdCBQQVlQQUxfQ09NUE9ORU5UUyA9IFsnYnV0dG9ucycsICdtZXNzYWdlcyddO1xuXG5leHBvcnQgZW51bSBQYXlwYWxCdXR0b25TdHlsZUxheW91dE9wdGlvbiB7XG4gICAgSE9SSVpPTlRBTCA9ICdob3Jpem9udGFsJyxcbiAgICBWRVJUSUNBTCA9ICd2ZXJ0aWNhbCcsXG59XG5cbmV4cG9ydCBlbnVtIFBheXBhbEJ1dHRvblN0eWxlU2l6ZU9wdGlvbiB7XG4gICAgU01BTEwgPSAnc21hbGwnLFxuICAgIE1FRElVTSA9ICdtZWRpdW0nLFxuICAgIExBUkdFID0gJ2xhcmdlJyxcbiAgICBSRVNQT05TSVZFID0gJ3Jlc3BvbnNpdmUnLFxufVxuXG5leHBvcnQgZW51bSBQYXlwYWxCdXR0b25TdHlsZUNvbG9yT3B0aW9uIHtcbiAgICBHT0xEID0gJ2dvbGQnLFxuICAgIEJMVUUgPSAnYmx1ZScsXG4gICAgU0lsVkVSID0gJ3NpbHZlcicsXG4gICAgQkxBQ0sgPSAnYmxhY2snLFxuICAgIFdISVRFID0gJ3doaXRlJyxcbn1cblxuZXhwb3J0IGVudW0gUGF5cGFsQnV0dG9uU3R5bGVMYWJlbE9wdGlvbiB7XG4gICAgQ0hFQ0tPVVQgPSAnY2hlY2tvdXQnLFxuICAgIFBBWSA9ICdwYXknLFxuICAgIEJVWU5PVyA9ICdidXlub3cnLFxuICAgIFBBWVBBTCA9ICdwYXlwYWwnLFxuICAgIENSRURJVCA9ICdjcmVkaXQnLFxufVxuXG5leHBvcnQgZW51bSBQYXlwYWxCdXR0b25TdHlsZVNoYXBlT3B0aW9uIHtcbiAgICBQSUxMID0gJ3BpbGwnLFxuICAgIFJFQ1QgPSAncmVjdCcsXG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBpbnRlcmZhY2VzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbFNESyB7XG4gICAgQnV0dG9uOiBQYXlwYWxCdXR0b247XG4gICAgY2hlY2tvdXQ6IFBheXBhbEV4cHJlc3NDaGVja291dDtcbiAgICBGVU5ESU5HOiBQYXlwYWxGdW5kaW5nVHlwZUxpc3Q7XG4gICAgQnV0dG9ucyhvcHRpb25zOiBQYXlwYWxCdXR0b25PcHRpb25zKTogUGF5cGFsQnV0dG9uUmVuZGVyO1xuICAgIE1lc3NhZ2VzKG9wdGlvbnM6IE1lc3NhZ2luZ09wdGlvbnMpOiBNZXNzYWdpbmdSZW5kZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsQnV0dG9uIHtcbiAgICByZW5kZXIob3B0aW9uczogUGF5cGFsQnV0dG9uT3B0aW9ucywgY29udGFpbmVyOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEV4cHJlc3NDaGVja291dCB7XG4gICAgaW5pdFhPKCk6IHZvaWQ7XG4gICAgc3RhcnRGbG93KHVybDogc3RyaW5nKTogdm9pZDtcbiAgICBjbG9zZUZsb3coKTogdm9pZDtcbiAgICBzZXR1cChtZXJjaGFudElkOiBzdHJpbmcsIG9wdGlvbnM6IFBheXBhbEV4cHJlc3NDaGVja291dE9wdGlvbnMpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEV4cHJlc3NDaGVja291dE9wdGlvbnMge1xuICAgIGJ1dHRvbjogc3RyaW5nO1xuICAgIGVudmlyb25tZW50OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnaW5nT3B0aW9ucyB7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgYnV5ZXJDb3VudHJ5Pzogc3RyaW5nO1xuICAgIHBsYWNlbWVudDogc3RyaW5nO1xuICAgIHN0eWxlPzogTWVzc2FnZXNTdHlsZU9wdGlvbnM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZXNTdHlsZU9wdGlvbnMge1xuICAgIGNvbG9yPzogc3RyaW5nOyAvLyAnYmx1ZScgfCAnYmxhY2snIHwgJ3doaXRlJyB8ICd3aGl0ZS1uby1ib3JkZXInIHwgJ2dyYXknIHwgJ21vbm9jaHJvbWUnIHwgJ2dyYXlzY2FsZSdcbiAgICBsYXlvdXQ/OiBzdHJpbmc7IC8vICd0ZXh0JyB8ICdmbGV4J1xuICAgIGxvZ28/OiB7XG4gICAgICAgIHR5cGU/OiBzdHJpbmc7IC8vICdwcmltYXJ5JyB8ICdhbHRlcm5hdGl2ZScgfCAnaW5saW5lJyB8ICdub25lJ1xuICAgICAgICBwb3NpdGlvbj86IHN0cmluZzsgLy8gJ2xlZnQnIHwgJ3JpZ2h0JyB8ICd0b3AnXG4gICAgfTtcbiAgICByYXRpbz86IHN0cmluZzsgLy8gJzF4MScgfCAnMXg0JyB8ICc4eDEnIHwgJzIweDEnXG4gICAgdGV4dD86IHtcbiAgICAgICAgYWxpZ24/OiBzdHJpbmc7IC8vICdsZWZ0JyB8ICdyaWdodCcgfCAnY2VudGVyJ1xuICAgICAgICBjb2xvcj86IHN0cmluZzsgLy8gJ2JsYWNrJyB8ICd3aGl0ZScgfCAnbW9ub2Nocm9tZScgfCAnZ3JheXNjYWxlJ1xuICAgICAgICBzaXplPzogbnVtYmVyOyAvLyBmcm9tIDEwIHRvIDE2XG4gICAgfTtcbn1cblxuZXhwb3J0IGVudW0gTWVzc2FnaW5nUGxhY2VtZW50cyB7XG4gICAgQ0FSVCA9ICdjYXJ0JyxcbiAgICBIT01FID0gJ2hvbWVwYWdlJyxcbiAgICBQQVlNRU5UID0gJ3BheW1lbnQnLFxuICAgIFBST0RVQ1QgPSAncHJvZHVjdCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnaW5nUmVuZGVyIHtcbiAgICByZW5kZXIoY29udGFpbmVyOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEJ1dHRvbk9wdGlvbnMge1xuICAgIGVudj86IHN0cmluZztcbiAgICBjb21taXQ/OiBib29sZWFuO1xuICAgIHN0eWxlPzogUGF5cGFsU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmc/OiBQYXlwYWxGdW5kaW5nVHlwZTtcbiAgICBmdW5kaW5nU291cmNlPzogc3RyaW5nO1xuICAgIGNsaWVudD86IFBheXBhbENsaWVudFRva2VuO1xuICAgIHBheW1lbnQ/KGRhdGE/OiBQYXlwYWxBdXRob3JpemVEYXRhLCBhY3Rpb25zPzogUGF5cGFsQWN0aW9ucyk6IFByb21pc2U8dW5rbm93bj47XG4gICAgb25BdXRob3JpemU/KGRhdGE6IFBheXBhbEF1dGhvcml6ZURhdGEsIGFjdGlvbnM/OiBQYXlwYWxBY3Rpb25zKTogUHJvbWlzZTx1bmtub3duPjtcbiAgICBjcmVhdGVPcmRlcj8oZGF0YT86IFBheXBhbEF1dGhvcml6ZURhdGEsIGFjdGlvbnM/OiBQYXlwYWxBY3Rpb25zKTogUHJvbWlzZTx1bmtub3duPjtcbiAgICBvbkFwcHJvdmU/KGRhdGE/OiBQYXlwYWxBdXRob3JpemVEYXRhLCBhY3Rpb25zPzogUGF5cGFsQWN0aW9ucyk6IFByb21pc2U8dW5rbm93bj47XG4gICAgb25DbGljaz8oKTogdm9pZDtcbiAgICBvbkNhbmNlbD8oKTogdm9pZDtcbiAgICBvbkVycm9yPyhlcnJvcjogRXJyb3IpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbFN0eWxlT3B0aW9ucyB7XG4gICAgbGF5b3V0PzogUGF5cGFsQnV0dG9uU3R5bGVMYXlvdXRPcHRpb247XG4gICAgc2l6ZT86IFBheXBhbEJ1dHRvblN0eWxlU2l6ZU9wdGlvbjtcbiAgICBjb2xvcj86IFBheXBhbEJ1dHRvblN0eWxlQ29sb3JPcHRpb247XG4gICAgbGFiZWw/OiBQYXlwYWxCdXR0b25TdHlsZUxhYmVsT3B0aW9uO1xuICAgIHNoYXBlPzogUGF5cGFsQnV0dG9uU3R5bGVTaGFwZU9wdGlvbjtcbiAgICB0YWdsaW5lPzogYm9vbGVhbjtcbiAgICBmdW5kaW5naWNvbnM/OiBib29sZWFuO1xuICAgIGhlaWdodD86IG51bWJlciB8IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxDbGllbnRUb2tlbiB7XG4gICAgcHJvZHVjdGlvbj86IHN0cmluZztcbiAgICBzYW5kYm94Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEZ1bmRpbmdUeXBlIHtcbiAgICBhbGxvd2VkPzogc3RyaW5nW107XG4gICAgZGlzYWxsb3dlZD86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEFjdGlvbnMge1xuICAgIHBheW1lbnQ6IFBheXBhbFBheW1lbnRBY3Rpb25zO1xuICAgIHJlcXVlc3Q6IFBheXBhbFJlcXVlc3RBY3Rpb25zO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEJ1dHRvblJlbmRlciB7XG4gICAgcmVuZGVyKGNvbnRhaW5lcjogc3RyaW5nKTogdm9pZDtcbiAgICBpc0VsaWdpYmxlKCk6IGJvb2xlYW47XG4gICAgY2xvc2UoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxBdXRob3JpemVEYXRhIHtcbiAgICBwYXllcklkOiBzdHJpbmc7XG4gICAgcGF5bWVudElkPzogc3RyaW5nO1xuICAgIGJpbGxpbmdUb2tlbj86IHN0cmluZztcbiAgICBwYXllcklEPzogc3RyaW5nO1xuICAgIHBheW1lbnRJRD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxGdW5kaW5nVHlwZUxpc3Qge1xuICAgIENBUkQ/OiBzdHJpbmc7XG4gICAgQ1JFRElUPzogc3RyaW5nO1xuICAgIFBBWVBBTD86IHN0cmluZztcbiAgICBQQVlMQVRFUj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxQYXltZW50QWN0aW9ucyB7XG4gICAgZ2V0KGlkOiBzdHJpbmcpOiBQcm9taXNlPHVua25vd24+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbFJlcXVlc3RBY3Rpb25zIHtcbiAgICBwb3N0KHVybDogc3RyaW5nLCBwYXlsb2FkPzogb2JqZWN0LCBvcHRpb25zPzogb2JqZWN0KTogUHJvbWlzZTx7IGlkOiBzdHJpbmcgfT47XG59XG4iLCJpbXBvcnQgeyBzdXBwb3J0c1BvcHVwcyB9IGZyb20gJ0BicmFpbnRyZWUvYnJvd3Nlci1kZXRlY3Rpb24nO1xuXG5pbXBvcnQge1xuICAgIEFkZHJlc3MsXG4gICAgQ2FuY2VsbGFibGVQcm9taXNlLFxuICAgIENyZWRpdENhcmRJbnN0cnVtZW50LFxuICAgIExlZ2FjeUFkZHJlc3MsXG4gICAgTm9uY2VJbnN0cnVtZW50LFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgUGF5bWVudCxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEludmFsaWRGb3JtRXJyb3IsXG4gICAgUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzLFxuICAgIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcixcbiAgICBVbnN1cHBvcnRlZEJyb3dzZXJFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBPdmVybGF5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBCcmFpbnRyZWVTY3JpcHRMb2FkZXIgZnJvbSAnLi9icmFpbnRyZWUtc2NyaXB0LWxvYWRlcic7XG5pbXBvcnQge1xuICAgIEJyYWludHJlZUNsaWVudCxcbiAgICBCcmFpbnRyZWVEYXRhQ29sbGVjdG9yLFxuICAgIEJyYWludHJlZURhdGFDb2xsZWN0b3JDcmVhdG9yQ29uZmlnLFxuICAgIEJyYWludHJlZURhdGFDb2xsZWN0b3JzLFxuICAgIEJyYWludHJlZUVudixcbiAgICBCcmFpbnRyZWVFcnJvcixcbiAgICBCcmFpbnRyZWVGYXN0bGFuZSxcbiAgICBCcmFpbnRyZWVGYXN0bGFuZVN0eWxlc09wdGlvbixcbiAgICBCcmFpbnRyZWVIb3N0V2luZG93LFxuICAgIEJyYWludHJlZU1vZHVsZSxcbiAgICBCcmFpbnRyZWVQYXlwYWwsXG4gICAgQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgQnJhaW50cmVlUGF5cGFsU2RrQ3JlYXRvckNvbmZpZyxcbiAgICBCcmFpbnRyZWVSZXF1ZXN0RGF0YSxcbiAgICBCcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3NPdmVycmlkZSxcbiAgICBCcmFpbnRyZWVUaHJlZURTZWN1cmUsXG4gICAgQnJhaW50cmVlVGhyZWVEU2VjdXJlT3B0aW9ucyxcbiAgICBCcmFpbnRyZWVUb2tlbml6YXRpb25EZXRhaWxzLFxuICAgIEJyYWludHJlZVRva2VuaXplUGF5bG9hZCxcbiAgICBCcmFpbnRyZWVWZW5tb0NoZWNrb3V0LFxuICAgIEJyYWludHJlZVZlbm1vQ3JlYXRvckNvbmZpZyxcbiAgICBCcmFpbnRyZWVWZXJpZnlQYXlsb2FkLFxuICAgIFBBWVBBTF9DT01QT05FTlRTLFxuICAgIFRva2VuaXphdGlvblBheWxvYWQsXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IGlzQnJhaW50cmVlRXJyb3IgZnJvbSAnLi91dGlscy9pcy1icmFpbnRyZWUtZXJyb3InO1xuaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgaXNDcmVkaXRDYXJkSW5zdHJ1bWVudExpa2UgZnJvbSAnLi91dGlscy9pcy1jcmVkaXQtY2FyZC1pbnN0cnVtZW50LWxpa2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbENvbmZpZyB7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgY3VycmVuY3k6IHN0cmluZztcbiAgICBsb2NhbGU6IHN0cmluZztcbiAgICBvZmZlckNyZWRpdD86IGJvb2xlYW47XG4gICAgc2hpcHBpbmdBZGRyZXNzRWRpdGFibGU/OiBib29sZWFuO1xuICAgIHNoaXBwaW5nQWRkcmVzc092ZXJyaWRlPzogQnJhaW50cmVlU2hpcHBpbmdBZGRyZXNzT3ZlcnJpZGU7XG4gICAgc2hvdWxkU2F2ZUluc3RydW1lbnQ/OiBib29sZWFuO1xufVxuXG4vLyBJbmZvOiB0aGlzIGNsYXNzIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIG5lYXJlc3QgZnV0dXJlLiBQbGVhc2UsIGRvIG5vdCBhZGQgYW55dGhpbmcgaGVyZS5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJyYWludHJlZUludGVncmF0aW9uU2VydmljZSB7XG4gICAgcHJpdmF0ZSBjbGllbnQ/OiBQcm9taXNlPEJyYWludHJlZUNsaWVudD47XG4gICAgcHJpdmF0ZSBjbGllbnRUb2tlbj86IHN0cmluZztcbiAgICBwcml2YXRlIGRhdGFDb2xsZWN0b3JzOiBCcmFpbnRyZWVEYXRhQ29sbGVjdG9ycyA9IHt9O1xuICAgIHByaXZhdGUgcGF5cGFsQ2hlY2tvdXQ/OiBCcmFpbnRyZWVQYXlwYWxDaGVja291dDtcbiAgICBwcml2YXRlIGJyYWludHJlZVBheXBhbD86IFByb21pc2U8QnJhaW50cmVlUGF5cGFsPjtcbiAgICBwcml2YXRlIHRocmVlRFNlY3VyZU9wdGlvbnM/OiBCcmFpbnRyZWVUaHJlZURTZWN1cmVPcHRpb25zO1xuICAgIHByaXZhdGUgdGhyZWVEUz86IFByb21pc2U8QnJhaW50cmVlVGhyZWVEU2VjdXJlPjtcbiAgICBwcml2YXRlIHZlbm1vQ2hlY2tvdXQ/OiBCcmFpbnRyZWVWZW5tb0NoZWNrb3V0O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgYnJhaW50cmVlU2NyaXB0TG9hZGVyOiBCcmFpbnRyZWVTY3JpcHRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUgYnJhaW50cmVlSG9zdFdpbmRvdzogQnJhaW50cmVlSG9zdFdpbmRvdyxcbiAgICAgICAgcHJpdmF0ZSBvdmVybGF5PzogT3ZlcmxheSxcbiAgICApIHt9XG5cbiAgICBpbml0aWFsaXplKGNsaWVudFRva2VuOiBzdHJpbmcsIHRocmVlRFNlY3VyZU9wdGlvbnM/OiBCcmFpbnRyZWVUaHJlZURTZWN1cmVPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuY2xpZW50VG9rZW4gPSBjbGllbnRUb2tlbjtcbiAgICAgICAgdGhpcy50aHJlZURTZWN1cmVPcHRpb25zID0gdGhyZWVEU2VjdXJlT3B0aW9ucztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRCcmFpbnRyZWVGYXN0bGFuZShcbiAgICAgICAgY2FyZElkPzogc3RyaW5nLFxuICAgICAgICBpc1Rlc3RNb2RlRW5hYmxlZD86IGJvb2xlYW4sXG4gICAgICAgIHN0eWxlcz86IEJyYWludHJlZUZhc3RsYW5lU3R5bGVzT3B0aW9uLFxuICAgICk6IFByb21pc2U8QnJhaW50cmVlRmFzdGxhbmU+IHtcbiAgICAgICAgaWYgKGlzVGVzdE1vZGVFbmFibGVkKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F4b0VudicsICdzYW5kYm94Jyk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Zhc3RsYW5lRW52JywgJ3NhbmRib3gnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5icmFpbnRyZWVIb3N0V2luZG93LmJyYWludHJlZUZhc3RsYW5lKSB7XG4gICAgICAgICAgICBjb25zdCBjbGllbnRUb2tlbiA9IHRoaXMuZ2V0Q2xpZW50VG9rZW5PclRocm93KCk7XG4gICAgICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmdldENsaWVudCgpO1xuICAgICAgICAgICAgY29uc3QgZGV2aWNlRGF0YSA9IGF3YWl0IHRoaXMuZ2V0U2Vzc2lvbklkKGNhcmRJZCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGJyYWludHJlZUZhc3RsYW5lQ3JlYXRvciA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRGYXN0bGFuZSgpO1xuXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0U3R5bGVzID0ge1xuICAgICAgICAgICAgICAgIHJvb3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yUHJpbWFyeTogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVIb3N0V2luZG93LmJyYWludHJlZUZhc3RsYW5lID0gYXdhaXQgYnJhaW50cmVlRmFzdGxhbmVDcmVhdG9yLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogY2xpZW50VG9rZW4sXG4gICAgICAgICAgICAgICAgY2xpZW50LFxuICAgICAgICAgICAgICAgIGRldmljZURhdGEsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBzdHlsZXMgfHwgZGVmYXVsdFN0eWxlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdy5icmFpbnRyZWVGYXN0bGFuZTtcbiAgICB9XG5cbiAgICAvLyBJbmZvOiBUaGlzIG1ldGhvZCBpcyBkZXByZWNhdGVkLiBVc2UgZ2V0Q2xpZW50IG1ldGhvZCBmcm9tIEJyYWludHJlZVNkayBjbGFzcyBpbnN0ZWFkXG4gICAgYXN5bmMgZ2V0Q2xpZW50KCk6IFByb21pc2U8QnJhaW50cmVlQ2xpZW50PiB7XG4gICAgICAgIGlmICghdGhpcy5jbGllbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudFRva2VuID0gdGhpcy5nZXRDbGllbnRUb2tlbk9yVGhyb3coKTtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudENyZWF0b3IgPSBhd2FpdCB0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkQ2xpZW50KCk7XG5cbiAgICAgICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50Q3JlYXRvci5jcmVhdGUoeyBhdXRob3JpemF0aW9uOiBjbGllbnRUb2tlbiB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmNsaWVudDtcbiAgICB9XG5cbiAgICBnZXRQYXlwYWwoKTogUHJvbWlzZTxCcmFpbnRyZWVQYXlwYWw+IHtcbiAgICAgICAgaWYgKCF0aGlzLmJyYWludHJlZVBheXBhbCkge1xuICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVQYXlwYWwgPSBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDbGllbnQoKSxcbiAgICAgICAgICAgICAgICB0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkUGF5cGFsKCksXG4gICAgICAgICAgICBdKS50aGVuKChbY2xpZW50LCBwYXlwYWxdKSA9PiBwYXlwYWwuY3JlYXRlKHsgY2xpZW50IH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmJyYWludHJlZVBheXBhbDtcbiAgICB9XG5cbiAgICBwYXlwYWwoeyBzaG91bGRTYXZlSW5zdHJ1bWVudCwgLi4uY29uZmlnIH06IFBheXBhbENvbmZpZyk6IFByb21pc2U8QnJhaW50cmVlVG9rZW5pemVQYXlsb2FkPiB7XG4gICAgICAgIGNvbnN0IG5ld1dpbmRvd0Zsb3cgPSBzdXBwb3J0c1BvcHVwcygpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmdldFBheXBhbCgpXG4gICAgICAgICAgICAudGhlbigocGF5cGFsKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1dpbmRvd0Zsb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdmVybGF5Py5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHBheXBhbC5mb2N1c1dpbmRvdygpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcGF5cGFsLnRva2VuaXplKHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlU2hpcHBpbmdBZGRyZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBmbG93OiBzaG91bGRTYXZlSW5zdHJ1bWVudCA/ICd2YXVsdCcgOiAnY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgICAgICB1c2VyYWN0aW9uOiAnY29tbWl0JyxcbiAgICAgICAgICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub3ZlcmxheT8ucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub3ZlcmxheT8ucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBheXBhbENoZWNrb3V0KFxuICAgICAgICBjb25maWc6IFBhcnRpYWw8QnJhaW50cmVlUGF5cGFsU2RrQ3JlYXRvckNvbmZpZz4sXG4gICAgICAgIG9uU3VjY2VzczogKGluc3RhbmNlOiBCcmFpbnRyZWVQYXlwYWxDaGVja291dCkgPT4gdm9pZCxcbiAgICAgICAgb25FcnJvcjogKGVycm9yOiBCcmFpbnRyZWVFcnJvcikgPT4gdm9pZCxcbiAgICApOiBQcm9taXNlPEJyYWludHJlZVBheXBhbENoZWNrb3V0PiB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuZ2V0Q2xpZW50KCk7XG4gICAgICAgIGNvbnN0IHBheXBhbENoZWNrb3V0ID0gYXdhaXQgdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZFBheXBhbENoZWNrb3V0KCk7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQ2hlY2tvdXRDb25maWcgPSB7IGNsaWVudCB9O1xuICAgICAgICBjb25zdCBwYXlwYWxDaGVja291dENhbGxiYWNrID0gKFxuICAgICAgICAgICAgZXJyb3I6IEJyYWludHJlZUVycm9yIHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQ6IEJyYWludHJlZVBheXBhbENoZWNrb3V0LFxuICAgICAgICApID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrTG9hZENhbGxiYWNrID0gKCkgPT4gb25TdWNjZXNzKGJyYWludHJlZVBheXBhbENoZWNrb3V0KTtcbiAgICAgICAgICAgIGNvbnN0IHBheXBhbFNka0xvYWRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGNvbmZpZy5jdXJyZW5jeSxcbiAgICAgICAgICAgICAgICAuLi4oY29uZmlnLmlzQ3JlZGl0RW5hYmxlZCAmJiB7ICdlbmFibGUtZnVuZGluZyc6ICdwYXlsYXRlcicgfSksXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogUEFZUEFMX0NPTVBPTkVOVFMudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBpbnRlbnQ6IGNvbmZpZy5pbnRlbnQsXG4gICAgICAgICAgICAgICAgY29tbWl0OiBjb25maWcuY29tbWl0ID8/IHRydWUsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdy5wYXlwYWwpIHtcbiAgICAgICAgICAgICAgICBicmFpbnRyZWVQYXlwYWxDaGVja291dC5sb2FkUGF5UGFsU0RLKHBheXBhbFNka0xvYWRDb25maWcsIHBheXBhbFNka0xvYWRDYWxsYmFjayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9uU3VjY2VzcyhicmFpbnRyZWVQYXlwYWxDaGVja291dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYXlwYWxDaGVja291dCA9IGF3YWl0IHBheXBhbENoZWNrb3V0LmNyZWF0ZShcbiAgICAgICAgICAgIHBheXBhbENoZWNrb3V0Q29uZmlnLFxuICAgICAgICAgICAgcGF5cGFsQ2hlY2tvdXRDYWxsYmFjayxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5wYXlwYWxDaGVja291dDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXREYXRhQ29sbGVjdG9yKFxuICAgICAgICBvcHRpb25zPzogUGFydGlhbDxCcmFpbnRyZWVEYXRhQ29sbGVjdG9yQ3JlYXRvckNvbmZpZz4sXG4gICAgKTogUHJvbWlzZTxCcmFpbnRyZWVEYXRhQ29sbGVjdG9yPiB7XG4gICAgICAgIGNvbnN0IGNhY2hlS2V5OiBrZXlvZiBCcmFpbnRyZWVEYXRhQ29sbGVjdG9ycyA9IG9wdGlvbnM/LnBheXBhbCA/ICdwYXlwYWwnIDogJ2RlZmF1bHQnO1xuXG4gICAgICAgIGxldCBjYWNoZWQgPSB0aGlzLmRhdGFDb2xsZWN0b3JzW2NhY2hlS2V5XTtcblxuICAgICAgICBpZiAoIWNhY2hlZCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmdldENsaWVudCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFDb2xsZWN0b3IgPSBhd2FpdCB0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkRGF0YUNvbGxlY3RvcigpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YUNvbGxlY3RvckNvbmZpZzogQnJhaW50cmVlRGF0YUNvbGxlY3RvckNyZWF0b3JDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudCxcbiAgICAgICAgICAgICAgICAgICAga291bnQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGNhY2hlZCA9IGF3YWl0IGRhdGFDb2xsZWN0b3IuY3JlYXRlKGRhdGFDb2xsZWN0b3JDb25maWcpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNCcmFpbnRyZWVFcnJvcihlcnJvcikgJiYgZXJyb3IuY29kZSA9PT0gJ0RBVEFfQ09MTEVDVE9SX0tPVU5UX05PVF9FTkFCTEVEJykge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZWQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VEYXRhOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWFyZG93bjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmRhdGFDb2xsZWN0b3JzW2NhY2hlS2V5XSA9IGNhY2hlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgfVxuXG4gICAgZ2V0QnJhaW50cmVlRW52KGlzVGVzdE1vZGUgPSBmYWxzZSk6IEJyYWludHJlZUVudiB7XG4gICAgICAgIHJldHVybiBpc1Rlc3RNb2RlID8gQnJhaW50cmVlRW52LlNhbmRib3ggOiBCcmFpbnRyZWVFbnYuUHJvZHVjdGlvbjtcbiAgICB9XG5cbiAgICBtYXBUb0JyYWludHJlZVNoaXBwaW5nQWRkcmVzc092ZXJyaWRlKGFkZHJlc3M6IEFkZHJlc3MpOiBCcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3NPdmVycmlkZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZWNpcGllbnROYW1lOiBgJHthZGRyZXNzLmZpcnN0TmFtZX0gJHthZGRyZXNzLmxhc3ROYW1lfWAsXG4gICAgICAgICAgICBsaW5lMTogYWRkcmVzcy5hZGRyZXNzMSxcbiAgICAgICAgICAgIGxpbmUyOiBhZGRyZXNzLmFkZHJlc3MyLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgc3RhdGU6IGFkZHJlc3Muc3RhdGVPclByb3ZpbmNlQ29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBhZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgcGhvbmU6IGFkZHJlc3MucGhvbmUsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgbWFwVG9MZWdhY3lTaGlwcGluZ0FkZHJlc3MoZGV0YWlsczogQnJhaW50cmVlVG9rZW5pemF0aW9uRGV0YWlscyk6IFBhcnRpYWw8TGVnYWN5QWRkcmVzcz4ge1xuICAgICAgICBjb25zdCB7IGVtYWlsLCBwaG9uZSwgc2hpcHBpbmdBZGRyZXNzIH0gPSBkZXRhaWxzO1xuICAgICAgICBjb25zdCByZWNpcGllbnROYW1lID0gc2hpcHBpbmdBZGRyZXNzPy5yZWNpcGllbnROYW1lIHx8ICcnO1xuICAgICAgICBjb25zdCBbZmlyc3ROYW1lLCBsYXN0TmFtZV0gPSByZWNpcGllbnROYW1lLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgZmlyc3RfbmFtZTogZmlyc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgbGFzdF9uYW1lOiBsYXN0TmFtZSB8fCAnJyxcbiAgICAgICAgICAgIHBob25lX251bWJlcjogcGhvbmUsXG4gICAgICAgICAgICBhZGRyZXNzX2xpbmVfMTogc2hpcHBpbmdBZGRyZXNzPy5saW5lMSxcbiAgICAgICAgICAgIGFkZHJlc3NfbGluZV8yOiBzaGlwcGluZ0FkZHJlc3M/LmxpbmUyLFxuICAgICAgICAgICAgY2l0eTogc2hpcHBpbmdBZGRyZXNzPy5jaXR5LFxuICAgICAgICAgICAgc3RhdGU6IHNoaXBwaW5nQWRkcmVzcz8uc3RhdGUsXG4gICAgICAgICAgICBjb3VudHJ5X2NvZGU6IHNoaXBwaW5nQWRkcmVzcz8uY291bnRyeUNvZGUsXG4gICAgICAgICAgICBwb3N0YWxfY29kZTogc2hpcHBpbmdBZGRyZXNzPy5wb3N0YWxDb2RlLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIG1hcFRvTGVnYWN5QmlsbGluZ0FkZHJlc3MoZGV0YWlsczogQnJhaW50cmVlVG9rZW5pemF0aW9uRGV0YWlscyk6IFBhcnRpYWw8TGVnYWN5QWRkcmVzcz4ge1xuICAgICAgICBjb25zdCB7IGJpbGxpbmdBZGRyZXNzLCBlbWFpbCwgZmlyc3ROYW1lLCBsYXN0TmFtZSwgcGhvbmUsIHNoaXBwaW5nQWRkcmVzcyB9ID0gZGV0YWlscztcblxuICAgICAgICBjb25zdCBhZGRyZXNzID0gYmlsbGluZ0FkZHJlc3MgfHwgc2hpcHBpbmdBZGRyZXNzO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgIGZpcnN0X25hbWU6IGZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3RfbmFtZTogbGFzdE5hbWUsXG4gICAgICAgICAgICBwaG9uZV9udW1iZXI6IHBob25lLFxuICAgICAgICAgICAgYWRkcmVzc19saW5lXzE6IGFkZHJlc3M/LmxpbmUxLFxuICAgICAgICAgICAgYWRkcmVzc19saW5lXzI6IGFkZHJlc3M/LmxpbmUyLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcz8uY2l0eSxcbiAgICAgICAgICAgIHN0YXRlOiBhZGRyZXNzPy5zdGF0ZSxcbiAgICAgICAgICAgIGNvdW50cnlfY29kZTogYWRkcmVzcz8uY291bnRyeUNvZGUsXG4gICAgICAgICAgICBwb3N0YWxfY29kZTogYWRkcmVzcz8ucG9zdGFsQ29kZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZW1vdmVFbGVtZW50KGVsZW1lbnRJZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudElkICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRTZXNzaW9uSWQoY2FydElkPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgY29uc3QgeyBkZXZpY2VEYXRhIH0gPSBhd2FpdCB0aGlzLmdldERhdGFDb2xsZWN0b3Ioe1xuICAgICAgICAgICAgcmlza0NvcnJlbGF0aW9uSWQ6IGNhcnRJZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGRldmljZURhdGE7XG4gICAgfVxuXG4gICAgYXN5bmMgdGVhcmRvd24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMudGVhcmRvd25Nb2R1bGUodGhpcy5kYXRhQ29sbGVjdG9ycy5kZWZhdWx0KTtcbiAgICAgICAgYXdhaXQgdGhpcy50ZWFyZG93bk1vZHVsZSh0aGlzLmRhdGFDb2xsZWN0b3JzLnBheXBhbCk7XG4gICAgICAgIHRoaXMuZGF0YUNvbGxlY3RvcnMgPSB7fTtcblxuICAgICAgICBhd2FpdCB0aGlzLnRlYXJkb3duTW9kdWxlKHRoaXMucGF5cGFsQ2hlY2tvdXQpO1xuICAgICAgICB0aGlzLnBheXBhbENoZWNrb3V0ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIC8vIGF3YWl0IHRoaXMudGVhcmRvd25Nb2R1bGUodGhpcy5fdmVubW9DaGVja291dCk7XG4gICAgICAgIC8vIHRoaXMuX3Zlbm1vQ2hlY2tvdXQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgLy8gYXdhaXQgdGhpcy50ZWFyZG93bk1vZHVsZSh0aGlzLl92aXNhQ2hlY2tvdXQpO1xuICAgICAgICAvLyB0aGlzLl92aXNhQ2hlY2tvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0M0RTKCk6IFByb21pc2U8QnJhaW50cmVlVGhyZWVEU2VjdXJlPiB7XG4gICAgICAgIGlmICghdGhpcy50aHJlZURTKSB7XG4gICAgICAgICAgICB0aGlzLnRocmVlRFMgPSBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDbGllbnQoKSxcbiAgICAgICAgICAgICAgICB0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkM0RTKCksXG4gICAgICAgICAgICBdKS50aGVuKChbY2xpZW50LCB0aHJlZURTZWN1cmVdKSA9PiB0aHJlZURTZWN1cmUuY3JlYXRlKHsgY2xpZW50LCB2ZXJzaW9uOiAyIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnRocmVlRFM7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0VmVubW9DaGVja291dChcbiAgICAgICAgdmVubW9Db25maWc/OiBCcmFpbnRyZWVWZW5tb0NyZWF0b3JDb25maWcsXG4gICAgKTogUHJvbWlzZTxCcmFpbnRyZWVWZW5tb0NoZWNrb3V0PiB7XG4gICAgICAgIGlmICghdGhpcy52ZW5tb0NoZWNrb3V0KSB7XG4gICAgICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmdldENsaWVudCgpO1xuICAgICAgICAgICAgY29uc3QgdmVubW9DaGVja291dCA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRWZW5tb0NoZWNrb3V0KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHZlbm1vQ2hlY2tvdXRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgY2xpZW50LFxuICAgICAgICAgICAgICAgIGFsbG93RGVza3RvcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kVXNhZ2U6ICdtdWx0aV91c2UnLFxuICAgICAgICAgICAgICAgIC4uLih2ZW5tb0NvbmZpZyB8fCB7fSksXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLnZlbm1vQ2hlY2tvdXQgPSBhd2FpdCBuZXcgUHJvbWlzZTxCcmFpbnRyZWVWZW5tb0NoZWNrb3V0PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICAgICAgICAgIHZlbm1vQ2hlY2tvdXQuY3JlYXRlKFxuICAgICAgICAgICAgICAgICAgICB2ZW5tb0NoZWNrb3V0Q29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAoZXJyb3I6IEJyYWludHJlZUVycm9yLCBicmFpbnRyZWVWZW5tb0NoZWNrb3V0OiBCcmFpbnRyZWVWZW5tb0NoZWNrb3V0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYnJhaW50cmVlVmVubW9DaGVja291dC5pc0Jyb3dzZXJTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IFVuc3VwcG9ydGVkQnJvd3NlckVycm9yKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJyYWludHJlZVZlbm1vQ2hlY2tvdXQpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnZlbm1vQ2hlY2tvdXQ7XG4gICAgfVxuXG4gICAgLypcbiAgICAgICBCcmFpbnRyZWUgQ3JlZGl0IENhcmQgYW5kIEJyYWludHJlZSBIb3N0ZWQgRm9ybVxuICAgKi9cbiAgICBhc3luYyB2ZXJpZnlDYXJkKFxuICAgICAgICBwYXltZW50OiBQYXltZW50LFxuICAgICAgICBiaWxsaW5nQWRkcmVzczogQWRkcmVzcyxcbiAgICAgICAgYW1vdW50OiBudW1iZXIsXG4gICAgKTogUHJvbWlzZTxOb25jZUluc3RydW1lbnQ+IHtcbiAgICAgICAgY29uc3QgdG9rZW5pemF0aW9uUGF5bG9hZCA9IGF3YWl0IHRoaXMudG9rZW5pemVDYXJkKHBheW1lbnQsIGJpbGxpbmdBZGRyZXNzKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5jaGFsbGVuZ2UzRFNWZXJpZmljYXRpb24odG9rZW5pemF0aW9uUGF5bG9hZCwgYW1vdW50KTtcbiAgICB9XG5cbiAgICBhc3luYyB0b2tlbml6ZUNhcmQocGF5bWVudDogUGF5bWVudCwgYmlsbGluZ0FkZHJlc3M6IEFkZHJlc3MpOiBQcm9taXNlPFRva2VuaXphdGlvblBheWxvYWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50RGF0YSB9ID0gcGF5bWVudDtcblxuICAgICAgICBpZiAoIWlzQ3JlZGl0Q2FyZEluc3RydW1lbnRMaWtlKHBheW1lbnREYXRhKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQucGF5bWVudERhdGEnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlcnJvcnMgPSB0aGlzLmdldEVycm9yc1JlcXVpcmVkRmllbGRzKHBheW1lbnREYXRhKTtcblxuICAgICAgICBpZiAoIWlzRW1wdHkoZXJyb3JzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yKGVycm9ycyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXF1ZXN0RGF0YSA9IHRoaXMubWFwVG9DcmVkaXRDYXJkKHBheW1lbnREYXRhLCBiaWxsaW5nQWRkcmVzcyk7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuZ2V0Q2xpZW50KCk7XG4gICAgICAgIGNvbnN0IHsgY3JlZGl0Q2FyZHMgfSA9IGF3YWl0IGNsaWVudC5yZXF1ZXN0KHJlcXVlc3REYXRhKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbm9uY2U6IGNyZWRpdENhcmRzWzBdLm5vbmNlLFxuICAgICAgICAgICAgYmluOiBjcmVkaXRDYXJkc1swXS5kZXRhaWxzLmJpbixcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBjaGFsbGVuZ2UzRFNWZXJpZmljYXRpb24oXG4gICAgICAgIHRva2VuaXphdGlvblBheWxvYWQ6IFRva2VuaXphdGlvblBheWxvYWQsXG4gICAgICAgIGFtb3VudDogbnVtYmVyLFxuICAgICk6IFByb21pc2U8QnJhaW50cmVlVmVyaWZ5UGF5bG9hZD4ge1xuICAgICAgICBjb25zdCB0aHJlZURTZWN1cmUgPSBhd2FpdCB0aGlzLmdldDNEUygpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnByZXNlbnQzRFNDaGFsbGVuZ2UodGhyZWVEU2VjdXJlLCBhbW91bnQsIHRva2VuaXphdGlvblBheWxvYWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdGVhcmRvd25Nb2R1bGUobW9kdWxlPzogQnJhaW50cmVlTW9kdWxlKSB7XG4gICAgICAgIHJldHVybiBtb2R1bGUgPyBtb2R1bGUudGVhcmRvd24oKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0Q2xpZW50VG9rZW5PclRocm93KCk6IHN0cmluZyB7XG4gICAgICAgIGlmICghdGhpcy5jbGllbnRUb2tlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmNsaWVudFRva2VuO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RXJyb3JzUmVxdWlyZWRGaWVsZHMoXG4gICAgICAgIHBheW1lbnREYXRhOiBDcmVkaXRDYXJkSW5zdHJ1bWVudCxcbiAgICApOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMge1xuICAgICAgICBjb25zdCB7IGNjTnVtYmVyLCBjY0V4cGlyeSB9ID0gcGF5bWVudERhdGE7XG4gICAgICAgIGNvbnN0IGVycm9yczogUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzID0ge307XG5cbiAgICAgICAgaWYgKCFjY051bWJlcikge1xuICAgICAgICAgICAgZXJyb3JzLmNjTnVtYmVyID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NyZWRpdCBjYXJkIG51bWJlciBpcyByZXF1aXJlZCcsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZXF1aXJlZCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvblxuICAgICAgICBpZiAoIWNjRXhwaXJ5KSB7XG4gICAgICAgICAgICBlcnJvcnMuY2NFeHBpcnkgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXhwaXJhdGlvbiBkYXRlIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JlcXVpcmVkJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYXBUb0NyZWRpdENhcmQoXG4gICAgICAgIGNyZWRpdENhcmQ6IENyZWRpdENhcmRJbnN0cnVtZW50LFxuICAgICAgICBiaWxsaW5nQWRkcmVzcz86IEFkZHJlc3MsXG4gICAgKTogQnJhaW50cmVlUmVxdWVzdERhdGEge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGNyZWRpdENhcmQ6IHtcbiAgICAgICAgICAgICAgICAgICAgY2FyZGhvbGRlck5hbWU6IGNyZWRpdENhcmQuY2NOYW1lLFxuICAgICAgICAgICAgICAgICAgICBudW1iZXI6IGNyZWRpdENhcmQuY2NOdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIGN2djogY3JlZGl0Q2FyZC5jY0N2dixcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbkRhdGU6IGAke2NyZWRpdENhcmQuY2NFeHBpcnkubW9udGh9LyR7Y3JlZGl0Q2FyZC5jY0V4cGlyeS55ZWFyfWAsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3M6IGJpbGxpbmdBZGRyZXNzICYmIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlQWxwaGEyOiBiaWxsaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsaXR5OiBiaWxsaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyeU5hbWU6IGJpbGxpbmdBZGRyZXNzLmNvdW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiBiaWxsaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWV0QWRkcmVzczogYmlsbGluZ0FkZHJlc3MuYWRkcmVzczJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGAke2JpbGxpbmdBZGRyZXNzLmFkZHJlc3MxfSAke2JpbGxpbmdBZGRyZXNzLmFkZHJlc3MyfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGJpbGxpbmdBZGRyZXNzLmFkZHJlc3MxLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5kcG9pbnQ6ICdwYXltZW50X21ldGhvZHMvY3JlZGl0X2NhcmRzJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJlc2VudDNEU0NoYWxsZW5nZShcbiAgICAgICAgdGhyZWVEU2VjdXJlOiBCcmFpbnRyZWVUaHJlZURTZWN1cmUsXG4gICAgICAgIGFtb3VudDogbnVtYmVyLFxuICAgICAgICB0b2tlbml6YXRpb25QYXlsb2FkOiBUb2tlbml6YXRpb25QYXlsb2FkLFxuICAgICk6IFByb21pc2U8QnJhaW50cmVlVmVyaWZ5UGF5bG9hZD4ge1xuICAgICAgICBjb25zdCB7IG5vbmNlLCBiaW4gfSA9IHRva2VuaXphdGlvblBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCF0aGlzLnRocmVlRFNlY3VyZU9wdGlvbnMgfHwgIW5vbmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYWRkRnJhbWUsXG4gICAgICAgICAgICByZW1vdmVGcmFtZSxcbiAgICAgICAgICAgIGNoYWxsZW5nZVJlcXVlc3RlZCA9IHRydWUsXG4gICAgICAgICAgICBhZGRpdGlvbmFsSW5mb3JtYXRpb24sXG4gICAgICAgIH0gPSB0aGlzLnRocmVlRFNlY3VyZU9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGNhbmNlbFZlcmlmeUNhcmQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRocmVlRFNlY3VyZS5jYW5jZWxWZXJpZnlDYXJkKCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgICB2ZXJpZmljYXRpb24uY2FuY2VsKG5ldyBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByb3VuZGVkQW1vdW50ID0gYW1vdW50LnRvRml4ZWQoMik7XG5cbiAgICAgICAgY29uc3QgdmVyaWZpY2F0aW9uID0gbmV3IENhbmNlbGxhYmxlUHJvbWlzZShcbiAgICAgICAgICAgIHRocmVlRFNlY3VyZS52ZXJpZnlDYXJkKHtcbiAgICAgICAgICAgICAgICBhZGRGcmFtZTogKGVycm9yLCBpZnJhbWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZEZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRGcmFtZShlcnJvciwgaWZyYW1lLCBjYW5jZWxWZXJpZnlDYXJkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYW1vdW50OiBOdW1iZXIocm91bmRlZEFtb3VudCksXG4gICAgICAgICAgICAgICAgYmluLFxuICAgICAgICAgICAgICAgIGNoYWxsZW5nZVJlcXVlc3RlZCxcbiAgICAgICAgICAgICAgICBub25jZSxcbiAgICAgICAgICAgICAgICByZW1vdmVGcmFtZSxcbiAgICAgICAgICAgICAgICBvbkxvb2t1cENvbXBsZXRlOiAoX2RhdGEsIG5leHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29sbGVjdERldmljZURhdGE6IHRydWUsXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbEluZm9ybWF0aW9uLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHZlcmlmaWNhdGlvbi5wcm9taXNlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENyZWRpdENhcmRJbnN0cnVtZW50IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQ3JlZGl0Q2FyZEluc3RydW1lbnRMaWtlKFxuICAgIGluc3RydW1lbnQ6IHVua25vd24sXG4pOiBpbnN0cnVtZW50IGlzIENyZWRpdENhcmRJbnN0cnVtZW50IHtcbiAgICBpZiAodHlwZW9mIGluc3RydW1lbnQgIT09ICdvYmplY3QnIHx8IGluc3RydW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWFzc2VydGlvbnNcbiAgICBjb25zdCBjcmVkaXRDYXJkSW5zdHJ1bWVudCA9IGluc3RydW1lbnQgYXMgUGFydGlhbDxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj47XG5cbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgY3JlZGl0Q2FyZEluc3RydW1lbnQuY2NFeHBpcnkgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGNyZWRpdENhcmRJbnN0cnVtZW50LmNjRXhwaXJ5ICE9PSBudWxsICYmXG4gICAgICAgIHR5cGVvZiBjcmVkaXRDYXJkSW5zdHJ1bWVudC5jY051bWJlciA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgdHlwZW9mIGNyZWRpdENhcmRJbnN0cnVtZW50LmNjTmFtZSA9PT0gJ3N0cmluZydcbiAgICApO1xufVxuIiwiaW1wb3J0IHsgUGF5bWVudEludGVncmF0aW9uU2VydmljZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIEJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgQnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbn0gZnJvbSAnLi9icmFpbnRyZWUnO1xuaW1wb3J0IHsgTWVzc2FnZXNTdHlsZU9wdGlvbnMsIE1lc3NhZ2luZ1BsYWNlbWVudHMgfSBmcm9tICcuL3BheXBhbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJyYWludHJlZU1lc3NhZ2VzIHtcbiAgICBwcml2YXRlIGJyYWludHJlZUhvc3RXaW5kb3c6IEJyYWludHJlZUhvc3RXaW5kb3cgPSB3aW5kb3c7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpIHt9XG5cbiAgICByZW5kZXIobWV0aG9kSWQ6IHN0cmluZywgY29udGFpbmVySWQ6IHN0cmluZywgcGxhY2VtZW50OiBNZXNzYWdpbmdQbGFjZW1lbnRzKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2luZ0NvbnRhaW5lciA9IGNvbnRhaW5lcklkICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcklkKTtcblxuICAgICAgICBpZiAodGhpcy5icmFpbnRyZWVIb3N0V2luZG93LnBheXBhbCAmJiBtZXNzYWdpbmdDb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCcmFpbnRyZWVJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICAgICAgaWYgKCFwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgeyBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiA9IFtdIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICAgICAgY29uc3QgYmFubmVkSWQgPSBwbGFjZW1lbnQgPT09IE1lc3NhZ2luZ1BsYWNlbWVudHMuUEFZTUVOVCA/ICdjaGVja291dCcgOiBwbGFjZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBiYW5uZXJDb25maWd1cmF0aW9uID1cbiAgICAgICAgICAgICAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiAmJlxuICAgICAgICAgICAgICAgIHBheXBhbEJOUExDb25maWd1cmF0aW9uLmZpbmQoKHsgaWQgfSkgPT4gaWQgPT09IGJhbm5lZElkKTtcblxuICAgICAgICAgICAgaWYgKCFiYW5uZXJDb25maWd1cmF0aW9uIHx8ICFiYW5uZXJDb25maWd1cmF0aW9uLnN0YXR1cykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgY29kZSB3aGVuIHRoaXMgZGF0YSBhdHRyaWJ1dGVzIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIGJhbm5lciBkaXYgY29udGFpbmVyIGluIGNvbnRlbnQgc2VydmljZVxuICAgICAgICAgICAgaWYgKHBsYWNlbWVudCA9PT0gTWVzc2FnaW5nUGxhY2VtZW50cy5DQVJUKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1wcC1zdHlsZS1sb2dvLXR5cGUnKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBwLXN0eWxlLWxvZ28tcG9zaXRpb24nKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBwLXN0eWxlLXRleHQtY29sb3InKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBwLXN0eWxlLXRleHQtc2l6ZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmJyYWludHJlZUhvc3RXaW5kb3cucGF5cGFsXG4gICAgICAgICAgICAgICAgLk1lc3NhZ2VzKHtcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBjYXJ0LmNhcnRBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIGJ1eWVyQ291bnRyeTogYmlsbGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHRoaXMuZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyhiYW5uZXJDb25maWd1cmF0aW9uKSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5yZW5kZXIoYCMke2NvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnKHtcbiAgICAgICAgc3R5bGVzLFxuICAgIH06IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSk6IE1lc3NhZ2VzU3R5bGVPcHRpb25zIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXNTdHlsZXM6IE1lc3NhZ2VzU3R5bGVPcHRpb25zID0ge307XG5cbiAgICAgICAgaWYgKHN0eWxlcy5jb2xvcikge1xuICAgICAgICAgICAgbWVzc2FnZXNTdHlsZXMuY29sb3IgPSBzdHlsZXMuY29sb3I7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3R5bGVzLmxheW91dCkge1xuICAgICAgICAgICAgbWVzc2FnZXNTdHlsZXMubGF5b3V0ID0gc3R5bGVzLmxheW91dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdHlsZXNbJ2xvZ28tdHlwZSddIHx8IHN0eWxlc1snbG9nby1wb3NpdGlvbiddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvID0ge307XG5cbiAgICAgICAgICAgIGlmIChzdHlsZXNbJ2xvZ28tdHlwZSddKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZXNTdHlsZXMubG9nby50eXBlID0gc3R5bGVzWydsb2dvLXR5cGUnXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0eWxlc1snbG9nby1wb3NpdGlvbiddKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZXNTdHlsZXMubG9nby5wb3NpdGlvbiA9IHN0eWxlc1snbG9nby1wb3NpdGlvbiddO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0eWxlcy5yYXRpbykge1xuICAgICAgICAgICAgbWVzc2FnZXNTdHlsZXMucmF0aW8gPSBzdHlsZXMucmF0aW87XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3R5bGVzWyd0ZXh0LWNvbG9yJ10gfHwgc3R5bGVzWyd0ZXh0LXNpemUnXSkge1xuICAgICAgICAgICAgbWVzc2FnZXNTdHlsZXMudGV4dCA9IHt9O1xuXG4gICAgICAgICAgICBpZiAoc3R5bGVzWyd0ZXh0LWNvbG9yJ10pIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy50ZXh0LmNvbG9yID0gc3R5bGVzWyd0ZXh0LWNvbG9yJ107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzdHlsZXNbJ3RleHQtc2l6ZSddKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZXNTdHlsZXMudGV4dC5zaXplID0gK3N0eWxlc1sndGV4dC1zaXplJ107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWVzc2FnZXNTdHlsZXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IGdldE92ZXJsYXlTdHlsZSBmcm9tICcuL292ZXJsYXktc3R5bGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIE92ZXJsYXlPcHRpb25zIHtcbiAgICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xuICAgIGlkPzogc3RyaW5nO1xuICAgIHRyYW5zaXRpb25EdXJhdGlvbj86IG51bWJlcjtcbiAgICBoYXNDbG9zZUJ1dHRvbj86IGJvb2xlYW47XG4gICAgaW5uZXJIdG1sPzogSFRNTEVsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE92ZXJsYXlTaG93T3B0aW9ucyB7XG4gICAgb25DbGljaz8oZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkO1xuICAgIG9uQ2xpY2tDbG9zZT8oZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVsZW1lbnRzIHtcbiAgICBlbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBtYWluRWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gICAgY2xvc2VFbGVtZW50PzogSFRNTEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE92ZXJsYXkge1xuICAgIHByaXZhdGUgX2VsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgX21haW5FbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIF9jbG9zZUVsZW1lbnQ/OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIF91bnJlZ2lzdGVyQ2xpY2s/OiAoKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucz86IE92ZXJsYXlPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgZWxlbWVudCwgY2xvc2VFbGVtZW50LCBtYWluRWxlbWVudCB9ID0gdGhpcy5fY3JlYXRlRWxlbWVudHMob3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX2Nsb3NlRWxlbWVudCA9IGNsb3NlRWxlbWVudDtcbiAgICAgICAgdGhpcy5fbWFpbkVsZW1lbnQgPSBtYWluRWxlbWVudDtcbiAgICB9XG5cbiAgICBzaG93KG9wdGlvbnM/OiBPdmVybGF5U2hvd09wdGlvbnMpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuX21haW5FbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3JlZ2lzdGVyQ2xpY2sob3B0aW9ucyk7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9tYWluRWxlbWVudCk7XG5cbiAgICAgICAgLy8gRmFkZSBJblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+ICh0aGlzLl9lbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnMScpKTtcbiAgICB9XG5cbiAgICByZW1vdmUoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5fbWFpbkVsZW1lbnQucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX3VucmVnaXN0ZXJDbGljaykge1xuICAgICAgICAgICAgdGhpcy5fdW5yZWdpc3RlckNsaWNrKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9yZW1vdmVBZnRlclRyYW5zaXRpb24oKTtcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+ICh0aGlzLl9lbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnMCcpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9jcmVhdGVFbGVtZW50cyhvcHRpb25zPzogT3ZlcmxheU9wdGlvbnMpOiBFbGVtZW50cyB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYmFja2dyb3VuZCA9ICdyZ2JhKDAsIDAsIDAsIDAuOCknLFxuICAgICAgICAgICAgaWQgPSAnY2hlY2tvdXRPdmVybGF5JyxcbiAgICAgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbiA9IDQwMCxcbiAgICAgICAgICAgIGhhc0Nsb3NlQnV0dG9uID0gZmFsc2UsXG4gICAgICAgICAgICBpbm5lckh0bWwgPSBudWxsLFxuICAgICAgICB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgbGV0IG1haW5FbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgbGV0IGNsb3NlRWxlbWVudDogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBjbGFzc0xheW91dDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICBsZXQgY2xhc3NDbG9zZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICBsZXQgY2xhc3NPdmVybGF5VGV4dDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgZWxlbWVudC5pZCA9IGlkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlubmVySHRtbCkge1xuICAgICAgICAgICAgY29uc3Qgb3ZlcmxheVRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICAgICAgY2xhc3NPdmVybGF5VGV4dCA9IGAke2lkfS0tb3ZlcmxheVRleHRgO1xuICAgICAgICAgICAgb3ZlcmxheVRleHQuY2xhc3NOYW1lID0gY2xhc3NPdmVybGF5VGV4dDtcbiAgICAgICAgICAgIG92ZXJsYXlUZXh0LmFwcGVuZENoaWxkKGlubmVySHRtbCk7XG5cbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQob3ZlcmxheVRleHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc0Nsb3NlQnV0dG9uKSB7XG4gICAgICAgICAgICBjbGFzc0Nsb3NlID0gYCR7aWR9LS1jbG9zZWA7XG4gICAgICAgICAgICBjbG9zZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNsb3NlRWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc0Nsb3NlO1xuXG4gICAgICAgICAgICBjbGFzc0xheW91dCA9IGAke2lkfS0tbGF5b3V0YDtcbiAgICAgICAgICAgIG1haW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBtYWluRWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc0xheW91dDtcblxuICAgICAgICAgICAgbWFpbkVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgICAgICBtYWluRWxlbWVudC5hcHBlbmRDaGlsZChjbG9zZUVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbWFpbkVsZW1lbnQuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgICBnZXRPdmVybGF5U3R5bGUoe1xuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGNsYXNzTGF5b3V0LFxuICAgICAgICAgICAgICAgIGNsYXNzT3ZlcmxheVRleHQsXG4gICAgICAgICAgICAgICAgY2xhc3NDbG9zZSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB7IGVsZW1lbnQsIGNsb3NlRWxlbWVudCwgbWFpbkVsZW1lbnQgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9hZGRFdmVudExpc3RlbmVyKGVsZW1lbnQ/OiBIVE1MRWxlbWVudCwgb25DbGljaz86IChldmVudDogTW91c2VFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICBpZiAoIWVsZW1lbnQgfHwgIW9uQ2xpY2spIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICBlbGVtZW50PzogSFRNTEVsZW1lbnQsXG4gICAgICAgIG9uQ2xpY2s/OiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZvaWQsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGlmICghZWxlbWVudCB8fCAhb25DbGljaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3JlZ2lzdGVyQ2xpY2sob3B0aW9ucz86IE92ZXJsYXlTaG93T3B0aW9ucyk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5fdW5yZWdpc3RlckNsaWNrKSB7XG4gICAgICAgICAgICB0aGlzLl91bnJlZ2lzdGVyQ2xpY2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCB7IG9uQ2xpY2ssIG9uQ2xpY2tDbG9zZSB9ID0gb3B0aW9ucztcblxuICAgICAgICAgICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl9lbGVtZW50LCBvbkNsaWNrKTtcbiAgICAgICAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXIodGhpcy5fY2xvc2VFbGVtZW50LCBvbkNsaWNrQ2xvc2UpO1xuXG4gICAgICAgICAgICB0aGlzLl91bnJlZ2lzdGVyQ2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLl9lbGVtZW50LCBvbkNsaWNrKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuX2Nsb3NlRWxlbWVudCwgb25DbGlja0Nsb3NlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl91bnJlZ2lzdGVyQ2xpY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfcmVtb3ZlQWZ0ZXJUcmFuc2l0aW9uKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBoYW5kbGVUcmFuc2l0aW9uOiAoZXZlbnQ6IEV2ZW50KSA9PiB2b2lkID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvLyBOT1RFOiBgZXZlbnRgIGlzIG5vdCBjb3JyZWN0bHkgdHlwZWQgaW4gdGhpcyB2ZXJzaW9uIG9mIFRTXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zXG4gICAgICAgICAgICBpZiAoKGV2ZW50IGFzIFRyYW5zaXRpb25FdmVudCkucHJvcGVydHlOYW1lICE9PSAnb3BhY2l0eScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9tYWluRWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWFpbkVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGhhbmRsZVRyYW5zaXRpb24pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGhhbmRsZVRyYW5zaXRpb24pO1xuICAgIH1cbn1cbiIsImludGVyZmFjZSBPdmVybGF5U3R5bGVPcHRpb25zIHtcbiAgICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xuICAgIGlkPzogc3RyaW5nO1xuICAgIHRyYW5zaXRpb25EdXJhdGlvbj86IG51bWJlcjtcbiAgICBjbGFzc0xheW91dD86IHN0cmluZztcbiAgICBjbGFzc092ZXJsYXlUZXh0Pzogc3RyaW5nO1xuICAgIGNsYXNzQ2xvc2U/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE92ZXJsYXlTdHlsZShvcHRpb25zOiBPdmVybGF5U3R5bGVPcHRpb25zKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IHsgaWQsIGJhY2tncm91bmQsIHRyYW5zaXRpb25EdXJhdGlvbiwgY2xhc3NMYXlvdXQsIGNsYXNzT3ZlcmxheVRleHQsIGNsYXNzQ2xvc2UgfSA9XG4gICAgICAgIG9wdGlvbnM7XG4gICAgY29uc3Qgc3R5bGVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBjb25zdCBhZGRDbGFzc0xheW91dCA9IGNsYXNzTGF5b3V0ID8gYCwgLiR7Y2xhc3NMYXlvdXR9YCA6ICcnO1xuXG4gICAgc3R5bGVzLmlkID0gYCR7aWR9LS1zdHlsZXNgO1xuICAgIHN0eWxlcy50eXBlID0gJ3RleHQvY3NzJztcbiAgICBzdHlsZXMuaW5uZXJUZXh0ID0gYFxuICAgICAgICAjJHtpZH0ke2FkZENsYXNzTGF5b3V0fSB7XG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICAgIHotaW5kZXg6IDIxNDc0ODM2NDc7XG4gICAgICAgIH1cbiAgICAgICAgIyR7aWR9IHtcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgJHt0cmFuc2l0aW9uRHVyYXRpb259bXMgZWFzZS1vdXQ7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiAke2JhY2tncm91bmR9O1xuICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgfVxuICAgIGA7XG5cbiAgICBpZiAoY2xhc3NPdmVybGF5VGV4dCkge1xuICAgICAgICBzdHlsZXMuaW5uZXJUZXh0ICs9IGBcbiAgICAgICAgICAgICAjJHtpZH0ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIyR7aWR9IC4ke2NsYXNzT3ZlcmxheVRleHR9IHtcbiAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAzMzBweDtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEuMmVtO1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgfVxuXG4gICAgaWYgKGNsYXNzQ2xvc2UpIHtcbiAgICAgICAgc3R5bGVzLmlubmVyVGV4dCArPSBgXG4gICAgICAgICAgICAjJHtpZH0ge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuJHtjbGFzc0xheW91dH0gLiR7Y2xhc3NDbG9zZX0ge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICAgICAgICByaWdodDogMTZweDtcbiAgICAgICAgICAgICAgICB0b3A6IDE2cHg7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgei1pbmRleDogMzE0NzQ4MzY0NztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC4ke2NsYXNzTGF5b3V0fSAuJHtjbGFzc0Nsb3NlfTo6YWZ0ZXIsIC4ke2NsYXNzTGF5b3V0fSAuJHtjbGFzc0Nsb3NlfTo6YmVmb3JlIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgbGVmdDogOHB4O1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTZweDtcbiAgICAgICAgICAgICAgICB3aWR0aDogMnB4O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuJHtjbGFzc0xheW91dH0gLiR7Y2xhc3NDbG9zZX06OmFmdGVyIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtNDVkZWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLiR7Y2xhc3NMYXlvdXR9IC4ke2NsYXNzQ2xvc2V9OjpiZWZvcmUge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gc3R5bGVzO1xufVxuIiwiaW1wb3J0IHtcbiAgICBMb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyU3R5bGVzLFxuICAgIExvYWRpbmdJbmRpY2F0b3JTdHlsZXMsXG59IGZyb20gJy4vbG9hZGluZy1pbmRpY2F0b3Itc3R5bGVzJztcblxuY29uc3QgREVGQVVMVF9TVFlMRVM6IExvYWRpbmdJbmRpY2F0b3JTdHlsZXMgPSB7XG4gICAgc2l6ZTogNzAsXG4gICAgY29sb3I6ICcjZDlkOWQ5JyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmZmZmJyxcbn07XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0NPTlRBSU5FUl9TVFlMRVMgPSB7XG4gICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgJ2JhY2tncm91bmQtY29sb3InOiAncmdiYSgwLCAwLCAwLCAwLjQpJyxcbiAgICAnei1pbmRleCc6ICcxMDAwJyxcbn07XG5cbmNvbnN0IFJPVEFUSU9OX0FOSU1BVElPTiA9ICdlbWJlZGRlZC1jaGVja291dC1sb2FkaW5nLWluZGljYXRvci1yb3RhdGlvbic7XG5cbmludGVyZmFjZSBMb2FkaW5nSW5kaWNhdG9yT3B0aW9ucyB7XG4gICAgc3R5bGVzPzogTG9hZGluZ0luZGljYXRvclN0eWxlcztcbiAgICBjb250YWluZXJTdHlsZXM/OiBMb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyU3R5bGVzO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2FkaW5nSW5kaWNhdG9yIHtcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBpbmRpY2F0b3I6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgc3R5bGVzOiBMb2FkaW5nSW5kaWNhdG9yU3R5bGVzO1xuICAgIHByaXZhdGUgY29udGFpbmVyU3R5bGVzOiBMb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyU3R5bGVzO1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucz86IExvYWRpbmdJbmRpY2F0b3JPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuc3R5bGVzID0geyAuLi5ERUZBVUxUX1NUWUxFUywgLi4uKG9wdGlvbnMgJiYgb3B0aW9ucy5zdHlsZXMpIH07XG4gICAgICAgIHRoaXMuY29udGFpbmVyU3R5bGVzID0geyAuLi4ob3B0aW9ucyAmJiBvcHRpb25zLmNvbnRhaW5lclN0eWxlcykgfTtcblxuICAgICAgICB0aGlzLmRlZmluZUFuaW1hdGlvbigpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5idWlsZENvbnRhaW5lcigpO1xuICAgICAgICB0aGlzLmluZGljYXRvciA9IHRoaXMuYnVpbGRJbmRpY2F0b3IoKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmluZGljYXRvcik7XG4gICAgfVxuXG4gICAgc2hvdyhwYXJlbnRJZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAocGFyZW50SWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudElkKTtcblxuICAgICAgICAgICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICdVbmFibGUgdG8gYXR0YWNoIHRoZSBsb2FkaW5nIGluZGljYXRvciBiZWNhdXNlIHRoZSBwYXJlbnQgSUQgaXMgbm90IHZhbGlkLicsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgfVxuXG4gICAgaGlkZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaGFuZGxlVHJhbnNpdGlvbkVuZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcblxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGhhbmRsZVRyYW5zaXRpb25FbmQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBoYW5kbGVUcmFuc2l0aW9uRW5kKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRDb250YWluZXIoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3R0b20gPSAnMCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5yaWdodCA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnRvcCA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSAnYWxsIDI1MG1zIGVhc2Utb3V0JztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cbiAgICAgICAgdGhpcy5zZXRTdHlsZUF0dHJpYnV0ZShjb250YWluZXIsIHRoaXMuY29udGFpbmVyU3R5bGVzKTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRJbmRpY2F0b3IoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBpbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS53aWR0aCA9IGAke3RoaXMuc3R5bGVzLnNpemV9cHhgO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5zdHlsZXMuc2l6ZX1weGA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXJSYWRpdXMgPSBgJHt0aGlzLnN0eWxlcy5zaXplfXB4YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJvcmRlciA9ICdzb2xpZCAxcHgnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyQ29sb3IgPSBgJHt0aGlzLnN0eWxlcy5iYWNrZ3JvdW5kQ29sb3J9ICR7dGhpcy5zdHlsZXMuYmFja2dyb3VuZENvbG9yfSAke3RoaXMuc3R5bGVzLmNvbG9yfSAke3RoaXMuc3R5bGVzLmNvbG9yfWA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5tYXJnaW4gPSAnMCBhdXRvJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5yaWdodCA9ICcwJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnRvcCA9ICc1MCUnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKDBkZWcpJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnRyYW5zZm9ybVN0eWxlID0gJ3ByZXNlcnZlLTNkJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmFuaW1hdGlvbiA9IGAke1JPVEFUSU9OX0FOSU1BVElPTn0gNTAwbXMgaW5maW5pdGUgY3ViaWMtYmV6aWVyKDAuNjksIDAuMzEsIDAuNTYsIDAuODMpYDtcblxuICAgICAgICByZXR1cm4gaW5kaWNhdG9yO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0U3R5bGVBdHRyaWJ1dGUoZWxlbWVudDogSFRNTEVsZW1lbnQsIGF0dHJzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KTogdm9pZCB7XG4gICAgICAgIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKChrKSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGssIGF0dHJzW2tdKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWZpbmVBbmltYXRpb24oKTogdm9pZCB7XG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGRlZmluZSBDU1MgYW5pbWF0aW9uLCB3ZSBuZWVkIHRvIGluc2VydCBhIHN0eWxlc2hlZXQgaW50byB0aGUgaG9zdCBmcmFtZS5cbiAgICAgICAgLy8gV2Ugb25seSBoYXZlIHRvIGRvIGl0IG9uY2UuXG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChST1RBVElPTl9BTklNQVRJT04pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cbiAgICAgICAgc3R5bGUuaWQgPSBST1RBVElPTl9BTklNQVRJT047XG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS1jb25kaXRpb25cbiAgICAgICAgZG9jdW1lbnQuaGVhZD8uYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXG4gICAgICAgIGlmIChzdHlsZS5zaGVldCBpbnN0YW5jZW9mIENTU1N0eWxlU2hlZXQpIHtcbiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gcHJvdmlkZSB0aGUgMm5kIHBhcmFtZXRlciBmb3IgSUUxMSwgZXZlbiB0aG91Z2ggaXQgaXNcbiAgICAgICAgICAgIC8vIDAgYnkgZGVmYXVsdCBmb3IgYWxsIG90aGVyIGJyb3dzZXJzLlxuICAgICAgICAgICAgc3R5bGUuc2hlZXQuaW5zZXJ0UnVsZShcbiAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgQGtleWZyYW1lcyAke1JPVEFUSU9OX0FOSU1BVElPTn0ge1xuICAgICAgICAgICAgICAgICAgICAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoMGRlZyk7IH1cbiAgICAgICAgICAgICAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoMzYwZGVnKTsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGAsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgY29uc3QgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTID0ge1xuICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ3JnYmEoMCwgMCwgMCwgMC40KScsXG4gICAgJ3otaW5kZXgnOiAnMTAwMCcsXG59O1xuIiwiaW1wb3J0IHsgQnJhaW50cmVlRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQnJhaW50cmVlRXJyb3IoXG4gICAgZXJyb3I6IEJyYWludHJlZUVycm9yIHwgRXJyb3IgfCB1bmtub3duLFxuKTogZXJyb3IgaXMgQnJhaW50cmVlRXJyb3Ige1xuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgZXJyb3IgIT09IG51bGwgJiZcbiAgICAgICAgJ25hbWUnIGluIGVycm9yICYmXG4gICAgICAgIChlcnJvciBhcyBCcmFpbnRyZWVFcnJvcikubmFtZSA9PT0gJ0JyYWludHJlZUVycm9yJ1xuICAgICk7XG59XG4iLCJpbXBvcnQgeyBCcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3NPdmVycmlkZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYnJhaW50cmVlLXV0aWxzJztcbmltcG9ydCB7IEFkZHJlc3MgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFwVG9CcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3NPdmVycmlkZShcbiAgICBhZGRyZXNzOiBBZGRyZXNzLFxuKTogQnJhaW50cmVlU2hpcHBpbmdBZGRyZXNzT3ZlcnJpZGUge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlY2lwaWVudE5hbWU6IGAke2FkZHJlc3MuZmlyc3ROYW1lfSAke2FkZHJlc3MubGFzdE5hbWV9YCxcbiAgICAgICAgbGluZTE6IGFkZHJlc3MuYWRkcmVzczEsXG4gICAgICAgIGxpbmUyOiBhZGRyZXNzLmFkZHJlc3MyLFxuICAgICAgICBjaXR5OiBhZGRyZXNzLmNpdHksXG4gICAgICAgIHN0YXRlOiBhZGRyZXNzLnN0YXRlT3JQcm92aW5jZUNvZGUsXG4gICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgY291bnRyeUNvZGU6IGFkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgIHBob25lOiBhZGRyZXNzLnBob25lLFxuICAgIH07XG59XG4iLCJpbXBvcnQge1xuICAgIEJyYWludHJlZUVycm9yLFxuICAgIEJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgQnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIEJyYWludHJlZUludGVncmF0aW9uU2VydmljZSxcbiAgICBCcmFpbnRyZWVNZXNzYWdlcyxcbiAgICBCcmFpbnRyZWVQYXlwYWxDaGVja291dCxcbiAgICBCcmFpbnRyZWVQYXlwYWxTZGtDcmVhdG9yQ29uZmlnLFxuICAgIEJyYWludHJlZVRva2VuaXplUGF5bG9hZCxcbiAgICBNZXNzYWdpbmdQbGFjZW1lbnRzLFxuICAgIFBheXBhbEF1dGhvcml6ZURhdGEsXG4gICAgUGF5cGFsQnV0dG9uUmVuZGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5pbXBvcnQge1xuICAgIEZvcm1hdHRlZFBheWxvYWQsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc0hvc3RlZFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIGlzVmF1bHRlZEluc3RydW1lbnQsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yLFxuICAgIFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFBheXBhbEluc3RydW1lbnQsXG4gICAgU3RhbmRhcmRFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBpc0JyYWludHJlZUVycm9yIGZyb20gJy4uL2lzLWJyYWludHJlZS1lcnJvcic7XG5pbXBvcnQgaXNCcmFpbnRyZWVQYXlwYWxQcm92aWRlckVycm9yIGZyb20gJy4uL2lzLWJyYWludHJlZS1wYXlwYWwtcHJvdmlkZXItZXJyb3InO1xuaW1wb3J0IG1hcFRvQnJhaW50cmVlU2hpcHBpbmdBZGRyZXNzT3ZlcnJpZGUgZnJvbSAnLi4vbWFwLXRvLWJyYWludHJlZS1zaGlwcGluZy1hZGRyZXNzLW92ZXJyaWRlJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVQYXlwYWxQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgV2l0aEJyYWludHJlZVBheXBhbFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9icmFpbnRyZWUtcGF5cGFsLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJhaW50cmVlUGF5cGFsUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIHBheW1lbnRNZXRob2Q/OiBQYXltZW50TWV0aG9kPEJyYWludHJlZUluaXRpYWxpemF0aW9uRGF0YT47XG4gICAgcHJpdmF0ZSBicmFpbnRyZWVIb3N0V2luZG93OiBCcmFpbnRyZWVIb3N0V2luZG93ID0gd2luZG93O1xuICAgIHByaXZhdGUgYnJhaW50cmVlPzogQnJhaW50cmVlUGF5cGFsUGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuICAgIHByaXZhdGUgYnJhaW50cmVlVG9rZW5pemVQYXlsb2FkPzogQnJhaW50cmVlVG9rZW5pemVQYXlsb2FkO1xuICAgIHByaXZhdGUgcGF5cGFsQnV0dG9uUmVuZGVyPzogUGF5cGFsQnV0dG9uUmVuZGVyO1xuICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj86IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlOiBCcmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYnJhaW50cmVlTWVzc2FnZXM6IEJyYWludHJlZU1lc3NhZ2VzLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aEJyYWludHJlZVBheXBhbFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApIHtcbiAgICAgICAgY29uc3QgeyBicmFpbnRyZWU6IGJyYWludHJlZU9wdGlvbnMsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIHRoaXMuYnJhaW50cmVlID0gYnJhaW50cmVlT3B0aW9ucztcblxuICAgICAgICBpZiAoIXRoaXMucGF5bWVudE1ldGhvZCB8fCAhdGhpcy5wYXltZW50TWV0aG9kLm5vbmNlKSB7XG4gICAgICAgICAgICB0aGlzLnBheW1lbnRNZXRob2QgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2VcbiAgICAgICAgICAgICAgICAuZ2V0U3RhdGUoKVxuICAgICAgICAgICAgICAgIC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wYXltZW50TWV0aG9kLmNsaWVudFRva2VuICYmIGJyYWludHJlZU9wdGlvbnM/LmJhbm5lckNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlwYWwoKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZFBheXBhbENoZWNrb3V0SW5zdGFuY2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnBheW1lbnRNZXRob2QuY2xpZW50VG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRQYXlwYWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICB0aGlzLnBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKGJyYWludHJlZU9wdGlvbnM/LmJhbm5lckNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkUGF5cGFsQ2hlY2tvdXRJbnN0YW5jZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnBheW1lbnRNZXRob2QuY2xpZW50VG9rZW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRQYXlwYWwoKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKG9yZGVyUmVxdWVzdDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBvcmRlclJlcXVlc3Q7XG5cbiAgICAgICAgY29uc3QgeyBvbkVycm9yIH0gPSB0aGlzLmJyYWludHJlZSB8fCB7fTtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0gYXdhaXQgdGhpcy5wcmVwYXJlUGF5bWVudERhdGEocGF5bWVudCwgb3JkZXIudXNlU3RvcmVDcmVkaXQpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocGF5bWVudERhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcm92aWRlckVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheXBhbCgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxCdXR0b25SZW5kZXI/LmNsb3NlKCk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlwYWxDaGVja291dEluc3RhbmNlKCk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcihuZXcgRXJyb3IoJ0lOU1RSVU1FTlRfREVDTElORUQnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLmJyYWludHJlZVRva2VuaXplUGF5bG9hZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvblJlbmRlcj8uY2xvc2UoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UudGVhcmRvd24oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHByZXBhcmVQYXltZW50RGF0YShcbiAgICAgICAgcGF5bWVudDogT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgICAgIHVzZVN0b3JlQ3JlZGl0PzogYm9vbGVhbixcbiAgICApOiBQcm9taXNlPFBheW1lbnQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICBjb25zdCBncmFuZFRvdGFsID0gc3RhdGUuZ2V0T3V0c3RhbmRpbmdCYWxhbmNlKHVzZVN0b3JlQ3JlZGl0KTtcbiAgICAgICAgY29uc3QgY29uZmlnID0gc3RhdGUuZ2V0U3RvcmVDb25maWcoKTtcblxuICAgICAgICBpZiAoIWdyYW5kVG90YWwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbmZpZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5wYXltZW50TWV0aG9kKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY3VycmVuY3ksXG4gICAgICAgICAgICBzdG9yZVByb2ZpbGU6IHsgc3RvcmVMYW5ndWFnZSB9LFxuICAgICAgICB9ID0gY29uZmlnO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBub25jZSxcbiAgICAgICAgICAgIGNvbmZpZzogeyBpc1ZhdWx0aW5nRW5hYmxlZCB9LFxuICAgICAgICB9ID0gdGhpcy5wYXltZW50TWV0aG9kO1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXltZW50RGF0YSA9IHt9IH0gPSBwYXltZW50O1xuXG4gICAgICAgIGNvbnN0IHRva2VuID0gdGhpcy5icmFpbnRyZWVUb2tlbml6ZVBheWxvYWQ/Lm5vbmNlIHx8IG5vbmNlO1xuXG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgICAgICB0aGlzLnBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5wYXltZW50LFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB0aGlzLmZvcm1hdHRlZFBheWxvYWQodG9rZW4pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnREYXRhKSB8fCBpc0hvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnREYXRhKSkge1xuICAgICAgICAgICAgaWYgKCFpc1ZhdWx0aW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgJ1ZhdWx0aW5nIGlzIGRpc2FibGVkIGJ1dCBhIHZhdWx0ZWQgaW5zdHJ1bWVudCB3YXMgYmVpbmcgdXNlZCBmb3IgdGhpcyB0cmFuc2FjdGlvbicsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwYXltZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgfSA9IHBheW1lbnREYXRhO1xuXG4gICAgICAgIGlmIChzaG91bGRTYXZlSW5zdHJ1bWVudCAmJiAhaXNWYXVsdGluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVmF1bHRpbmcgaXMgZGlzYWJsZWQgYnV0IHNob3VsZFNhdmVJbnN0cnVtZW50IGlzIHNldCB0byB0cnVlJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRTaGlwcGluZ0FkZHJlc3MoKTtcblxuICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3NPdmVycmlkZSA9IHNoaXBwaW5nQWRkcmVzc1xuICAgICAgICAgICAgPyBtYXBUb0JyYWludHJlZVNoaXBwaW5nQWRkcmVzc092ZXJyaWRlKHNoaXBwaW5nQWRkcmVzcylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5wYXlwYWwoe1xuICAgICAgICAgICAgICAgIGFtb3VudDogZ3JhbmRUb3RhbCxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IHN0b3JlTGFuZ3VhZ2UsXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICAgICAgb2ZmZXJDcmVkaXQ6IHRoaXMucGF5bWVudE1ldGhvZC5pZCA9PT0gJ2JyYWludHJlZXBheXBhbGNyZWRpdCcsXG4gICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzT3ZlcnJpZGUsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQ6IHNob3VsZFNhdmVJbnN0cnVtZW50IHx8IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzc0VkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2Vzc2lvbklkKCksXG4gICAgICAgIF0pLnRoZW4oKFt7IG5vbmNlLCBkZXRhaWxzIH0gPSB7fSBhcyBhbnksIHNlc3Npb25JZF0pID0+ICh7XG4gICAgICAgICAgICAuLi5wYXltZW50LFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHRoaXMuZm9ybWF0dGVkUGF5bG9hZChcbiAgICAgICAgICAgICAgICBub25jZSxcbiAgICAgICAgICAgICAgICBkZXRhaWxzICYmIGRldGFpbHMuZW1haWwsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICApLFxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmb3JtYXR0ZWRQYXlsb2FkKFxuICAgICAgICB0b2tlbjogc3RyaW5nLFxuICAgICAgICBlbWFpbD86IHN0cmluZyxcbiAgICAgICAgc2Vzc2lvbklkPzogc3RyaW5nLFxuICAgICAgICB2YXVsdFBheW1lbnRJbnN0cnVtZW50PzogYm9vbGVhbixcbiAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudD86IGJvb2xlYW4sXG4gICAgKTogRm9ybWF0dGVkUGF5bG9hZDxQYXlwYWxJbnN0cnVtZW50PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OiB2YXVsdFBheW1lbnRJbnN0cnVtZW50IHx8IG51bGwsXG4gICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICBkZXZpY2VfaW5mbzogc2Vzc2lvbklkIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCB8fCBudWxsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFBheXBhbENoZWNrb3V0SW5zdGFuY2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSwgaWQ6IHBheW1lbnRNZXRob2RJZCB9ID0gdGhpcy5wYXltZW50TWV0aG9kIHx8IHt9O1xuXG4gICAgICAgIGlmICghY2xpZW50VG9rZW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5pbml0aWFsaXplKGNsaWVudFRva2VuKTtcblxuICAgICAgICAgICAgY29uc3QgY3VycmVuY3lDb2RlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKVxuICAgICAgICAgICAgICAgIC5jdXJyZW5jeS5jb2RlO1xuXG4gICAgICAgICAgICBjb25zdCBwYXlwYWxDaGVja291dENvbmZpZzogUGFydGlhbDxCcmFpbnRyZWVQYXlwYWxTZGtDcmVhdG9yQ29uZmlnPiA9IHtcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGludGVudDogaW5pdGlhbGl6YXRpb25EYXRhPy5pbnRlbnQsXG4gICAgICAgICAgICAgICAgaXNDcmVkaXRFbmFibGVkOiBpbml0aWFsaXphdGlvbkRhdGE/LmlzQ3JlZGl0RW5hYmxlZCxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGlzQnJhaW50cmVlUGF5cGFsQ3JlZGl0ID0gcGF5bWVudE1ldGhvZElkID09PSAnYnJhaW50cmVlcGF5cGFsY3JlZGl0JztcbiAgICAgICAgICAgIGNvbnN0IHNob3VsZFNob3dQYXlQYWxDcmVkaXRCYW5uZXIgPVxuICAgICAgICAgICAgICAgIGlzQnJhaW50cmVlUGF5cGFsQ3JlZGl0IHx8ICFpbml0aWFsaXphdGlvbkRhdGE/LmlzQ3JlZGl0RW5hYmxlZDtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5cGFsQ2hlY2tvdXQoXG4gICAgICAgICAgICAgICAgcGF5cGFsQ2hlY2tvdXRDb25maWcsXG4gICAgICAgICAgICAgICAgKGJyYWludHJlZVBheXBhbENoZWNrb3V0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFNob3dQYXlQYWxDcmVkaXRCYW5uZXIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2RJZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5icmFpbnRyZWU/LmJhbm5lckNvbnRhaW5lcklkXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJQYXlQYWxNZXNzYWdlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5icmFpbnRyZWUuYmFubmVyQ29udGFpbmVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJQYXlQYWxCdXR0b24oYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcixcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyUGF5UGFsTWVzc2FnZXMobWV0aG9kSWQ6IHN0cmluZywgY29udGFpbmVySWQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLmJyYWludHJlZU1lc3NhZ2VzLnJlbmRlcihtZXRob2RJZCwgY29udGFpbmVySWQsIE1lc3NhZ2luZ1BsYWNlbWVudHMuUEFZTUVOVCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJQYXlQYWxCdXR0b24oYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQ6IEJyYWludHJlZVBheXBhbENoZWNrb3V0KSB7XG4gICAgICAgIGNvbnN0IHsgb25QYXltZW50RXJyb3IsIHN1Ym1pdEZvcm0sIG9uUmVuZGVyQnV0dG9uLCBjb250YWluZXJJZCwgb25FcnJvciB9ID1cbiAgICAgICAgICAgIHRoaXMuYnJhaW50cmVlIHx8IHt9O1xuXG4gICAgICAgIGlmICghY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5wYXltZW50TWV0aG9kKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gY29udGFpbmVySWQuc3BsaXQoJyMnKVsxXTtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIGNvbmZpZzogeyB0ZXN0TW9kZSB9LFxuICAgICAgICB9ID0gdGhpcy5wYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGNvbnN0IHsgcGF5cGFsIH0gPSB0aGlzLmJyYWludHJlZUhvc3RXaW5kb3c7XG4gICAgICAgIGNvbnN0IGZ1bmRpbmdTb3VyY2UgPSBwYXlwYWw/LkZVTkRJTkcuUEFZUEFMO1xuXG4gICAgICAgIGlmIChwYXlwYWwgJiYgZnVuZGluZ1NvdXJjZSkge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxCdXR0b25SZW5kZXIgPSBwYXlwYWwuQnV0dG9ucyh7XG4gICAgICAgICAgICAgICAgZW52OiB0ZXN0TW9kZSA/ICdzYW5kYm94JyA6ICdwcm9kdWN0aW9uJyxcbiAgICAgICAgICAgICAgICBjb21taXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2UsXG4gICAgICAgICAgICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT4gdGhpcy5zZXR1cFBheW1lbnQoYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsIGlkLCBvblBheW1lbnRFcnJvciksXG4gICAgICAgICAgICAgICAgb25BcHByb3ZlOiBhc3luYyAoYXV0aG9yaXplRGF0YTogUGF5cGFsQXV0aG9yaXplRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJyYWludHJlZVRva2VuaXplUGF5bG9hZCA9IGF3YWl0IHRoaXMudG9rZW5pemVQYXltZW50T3JUaHJvdyhcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml6ZURhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBicmFpbnRyZWVQYXlwYWxDaGVja291dCxcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc3VibWl0Rm9ybSAmJiB0eXBlb2Ygc3VibWl0Rm9ybSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VibWl0Rm9ybSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25FcnJvcjogKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIG9uRXJyb3I/LihlcnJvcik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAob25SZW5kZXJCdXR0b24gJiYgdHlwZW9mIG9uUmVuZGVyQnV0dG9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25SZW5kZXJCdXR0b24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMucGF5cGFsQnV0dG9uUmVuZGVyLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQnV0dG9uUmVuZGVyLnJlbmRlcihgJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRWxlbWVudChjb250YWluZXJJZC5zcGxpdCgnIycpWzFdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgc2V0dXBQYXltZW50KFxuICAgICAgICBicmFpbnRyZWVQYXlwYWxDaGVja291dDogQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgICAgIG1ldGhvZDogc3RyaW5nLFxuICAgICAgICBvblBheW1lbnRFcnJvcjogQnJhaW50cmVlUGF5cGFsUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvblBheW1lbnRFcnJvciddLFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbWVyID0gc3RhdGUuZ2V0Q3VzdG9tZXIoKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IHN0YXRlLmdldENoZWNrb3V0T3JUaHJvdygpLm91dHN0YW5kaW5nQmFsYW5jZTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9IHN0YXRlLmdldFNoaXBwaW5nQWRkcmVzcygpO1xuXG4gICAgICAgICAgICBjb25zdCBhZGRyZXNzID0gc2hpcHBpbmdBZGRyZXNzIHx8IGN1c3RvbWVyPy5hZGRyZXNzZXNbMF07XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzc092ZXJyaWRlID0gYWRkcmVzc1xuICAgICAgICAgICAgICAgID8gbWFwVG9CcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3NPdmVycmlkZShhZGRyZXNzKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQuY3JlYXRlUGF5bWVudCh7XG4gICAgICAgICAgICAgICAgZmxvdzogJ2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICBlbmFibGVTaGlwcGluZ0FkZHJlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzRWRpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzc092ZXJyaWRlLFxuICAgICAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIG9mZmVyQ3JlZGl0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQ6IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhLmludGVudCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKG9uUGF5bWVudEVycm9yICYmIChpc0JyYWludHJlZUVycm9yKGVycm9yKSB8fCBlcnJvciBpbnN0YW5jZW9mIFN0YW5kYXJkRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgb25QYXltZW50RXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgdG9rZW5pemVQYXltZW50T3JUaHJvdyhcbiAgICAgICAgYXV0aG9yaXplRGF0YTogUGF5cGFsQXV0aG9yaXplRGF0YSxcbiAgICAgICAgYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQ6IEJyYWludHJlZVBheXBhbENoZWNrb3V0LFxuICAgICAgICBvbkVycm9yPzogKGVycm9yOiBCcmFpbnRyZWVFcnJvciB8IFN0YW5kYXJkRXJyb3IpID0+IHZvaWQsXG4gICAgKTogUHJvbWlzZTxCcmFpbnRyZWVUb2tlbml6ZVBheWxvYWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBicmFpbnRyZWVQYXlwYWxDaGVja291dC50b2tlbml6ZVBheW1lbnQoYXV0aG9yaXplRGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAob25FcnJvciAmJiAoaXNCcmFpbnRyZWVFcnJvcihlcnJvcikgfHwgZXJyb3IgaW5zdGFuY2VvZiBTdGFuZGFyZEVycm9yKSkge1xuICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFBheXBhbCgpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiwgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSB0aGlzLnBheW1lbnRNZXRob2QgfHwge307XG5cbiAgICAgICAgaWYgKCFjbGllbnRUb2tlbiB8fCAhaW5pdGlhbGl6YXRpb25EYXRhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZShjbGllbnRUb2tlbik7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheXBhbCgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogQnJhaW50cmVlRXJyb3IgfCBFcnJvciB8IHVua25vd24pOiBuZXZlciB7XG4gICAgICAgIGlmICghaXNCcmFpbnRyZWVFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdQQVlQQUxfUE9QVVBfQ0xPU0VEJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1Byb3ZpZGVyRXJyb3IoZXJyb3I6IHVua25vd24pOiBib29sZWFuIHtcbiAgICAgICAgaWYgKGlzQnJhaW50cmVlUGF5cGFsUHJvdmlkZXJFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgIGNvbnN0IHBheXBhbFByb3ZpZGVyRXJyb3IgPSBlcnJvcj8uZXJyb3JzPy5maWx0ZXIoKGUpID0+IGUucHJvdmlkZXJfZXJyb3IpIHx8IFtdO1xuXG4gICAgICAgICAgICByZXR1cm4gcGF5cGFsUHJvdmlkZXJFcnJvclswXT8ucHJvdmlkZXJfZXJyb3I/LmNvZGUgPT09ICcyMDQ2JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbW92ZUVsZW1lbnQoZWxlbWVudElkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50SWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcblxuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTG9hZGluZyBJbmRpY2F0b3IgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgUHJvdmlkZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBlcnJvcnM/OiBFcnJvckVsZW1lbnRbXTtcbiAgICBzdGF0dXM/OiBzdHJpbmc7XG4gICAgdGhyZWVfZHNfcmVzdWx0Pzoge1xuICAgICAgICBhY3NfdXJsOiB1bmtub3duO1xuICAgICAgICBwYXllcl9hdXRoX3JlcXVlc3Q6IHVua25vd247XG4gICAgICAgIG1lcmNoYW50X2RhdGE6IHVua25vd247XG4gICAgICAgIGNhbGxiYWNrX3VybDogdW5rbm93bjtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yRWxlbWVudCB7XG4gICAgY29kZTogc3RyaW5nO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICBwcm92aWRlcl9lcnJvcj86IHtcbiAgICAgICAgY29kZTogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQnJhaW50cmVlUGF5cGFsUHJvdmlkZXJFcnJvcihlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIFByb3ZpZGVyRXJyb3Ige1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdlcnJvcnMnIGluIGVycm9yO1xufVxuIiwiaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIEJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgQnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIEJyYWludHJlZU1lc3NhZ2VzLFxuICAgIEJyYWludHJlZVNjcmlwdExvYWRlcixcbiAgICBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9icmFpbnRyZWUtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yLCBPdmVybGF5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCB7IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyB9IGZyb20gJy4uL2JyYWludHJlZS1wYXlwYWwtY29uc3RhbnRzJztcblxuaW1wb3J0IEJyYWludHJlZVBheXBhbFBheW1lbnRTdHJhdGVneSBmcm9tICcuL2JyYWludHJlZS1wYXlwYWwtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJyYWludHJlZVBheXBhbFBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCcmFpbnRyZWVQYXlwYWxQYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT4ge1xuICAgIGNvbnN0IGJyYWludHJlZUhvc3RXaW5kb3c6IEJyYWludHJlZUhvc3RXaW5kb3cgPSB3aW5kb3c7XG4gICAgY29uc3Qgb3ZlcmxheSA9IG5ldyBPdmVybGF5KCk7XG5cbiAgICBjb25zdCBicmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlciA9IG5ldyBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcihwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKTtcbiAgICBjb25zdCBicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UgPSBuZXcgQnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlKFxuICAgICAgICBuZXcgQnJhaW50cmVlU2NyaXB0TG9hZGVyKFxuICAgICAgICAgICAgZ2V0U2NyaXB0TG9hZGVyKCksXG4gICAgICAgICAgICBicmFpbnRyZWVIb3N0V2luZG93LFxuICAgICAgICAgICAgYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIsXG4gICAgICAgICksXG4gICAgICAgIGJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgICAgIG92ZXJsYXksXG4gICAgKTtcbiAgICBjb25zdCBicmFpbnRyZWVNZXNzYWdlcyA9IG5ldyBCcmFpbnRyZWVNZXNzYWdlcyhwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKTtcblxuICAgIHJldHVybiBuZXcgQnJhaW50cmVlUGF5cGFsUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGJyYWludHJlZU1lc3NhZ2VzLFxuICAgICAgICBuZXcgTG9hZGluZ0luZGljYXRvcih7XG4gICAgICAgICAgICBjb250YWluZXJTdHlsZXM6IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyxcbiAgICAgICAgfSksXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCcmFpbnRyZWVQYXlwYWxQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAnYnJhaW50cmVlcGF5cGFsJyB9LFxuICAgIHsgaWQ6ICdicmFpbnRyZWVwYXlwYWxjcmVkaXQnIH0sXG5dKTtcbiIsImVudW0gQ29udGVudFR5cGUge1xuICAgIEpzb24gPSAnYXBwbGljYXRpb24vanNvbicsXG4gICAgSnNvblYxID0gJ2FwcGxpY2F0aW9uL3ZuZC5iYy52MStqc29uJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udGVudFR5cGU7XG4iLCJleHBvcnQgY29uc3QgU0RLX1ZFUlNJT05fSEVBREVSUyA9IHsgJ1gtQ2hlY2tvdXQtU0RLLVZlcnNpb24nOiBMSUJSQVJZX1ZFUlNJT04gfTtcbiIsImltcG9ydCB7IFJlcXVlc3RTZW5kZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgeyBCcmFpbnRyZWVPcmRlclN0YXR1c0RhdGEgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5pbXBvcnQge1xuICAgIENvbnRlbnRUeXBlLFxuICAgIElOVEVSTkFMX1VTRV9PTkxZLFxuICAgIFJlcXVlc3RPcHRpb25zLFxuICAgIFNES19WRVJTSU9OX0hFQURFUlMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCcmFpbnRyZWVSZXF1ZXN0U2VuZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlcXVlc3RTZW5kZXI6IFJlcXVlc3RTZW5kZXIpIHt9XG5cbiAgICBhc3luYyBnZXRPcmRlclN0YXR1cyhcbiAgICAgICAgbWV0aG9kSWQgPSAnYnJhaW50cmVlbG9jYWxtZXRob2RzJyxcbiAgICAgICAgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zLFxuICAgICk6IFByb21pc2U8QnJhaW50cmVlT3JkZXJTdGF0dXNEYXRhPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3N0b3JlZnJvbnQvaW5pdGlhbGl6YXRpb24vJHttZXRob2RJZH1gO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgJ1gtQVBJLUlOVEVSTkFMJzogSU5URVJOQUxfVVNFX09OTFksXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogQ29udGVudFR5cGUuSnNvbixcbiAgICAgICAgICAgIC4uLlNES19WRVJTSU9OX0hFQURFUlMsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0U2VuZGVyLmdldDxCcmFpbnRyZWVPcmRlclN0YXR1c0RhdGE+KHVybCwge1xuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuYm9keTtcbiAgICB9XG59XG4iLCJleHBvcnQgY29uc3QgSU5URVJOQUxfVVNFX09OTFkgPVxuICAgICdUaGlzIEFQSSBlbmRwb2ludCBpcyBmb3IgaW50ZXJuYWwgdXNlIG9ubHkgYW5kIG1heSBjaGFuZ2UgaW4gdGhlIGZ1dHVyZSc7XG4iLCJpbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5jb25zdCBERUZBVUxUX1JFU1BPTlNFID0ge1xuICAgIGJvZHk6IHt9LFxuICAgIGhlYWRlcnM6IHt9LFxuICAgIHN0YXR1czogMCxcbn07XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdW5hYmxlIHRvIG1ha2UgYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIuIEl0IHdyYXBzXG4gKiBhbnkgc2VydmVyIHJlc3BvbnNlIGludG8gYSBKUyBlcnJvciBvYmplY3QuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlcXVlc3RFcnJvcjxUQm9keSA9IGFueT4gZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBib2R5OiBUQm9keSB8IHt9O1xuICAgIGhlYWRlcnM6IHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gICAgZXJyb3JzOiBBcnJheTx7IGNvZGU6IHN0cmluZzsgbWVzc2FnZT86IHN0cmluZyB9PjtcbiAgICBzdGF0dXM6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICByZXNwb25zZT86IFJlc3BvbnNlPFRCb2R5IHwge30+LFxuICAgICAgICB7XG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZXJyb3JzLFxuICAgICAgICB9OiB7XG4gICAgICAgICAgICBtZXNzYWdlPzogc3RyaW5nO1xuICAgICAgICAgICAgZXJyb3JzPzogQXJyYXk8eyBjb2RlOiBzdHJpbmc7IG1lc3NhZ2U/OiBzdHJpbmcgfT47XG4gICAgICAgIH0gPSB7fSxcbiAgICApIHtcbiAgICAgICAgY29uc3QgeyBib2R5LCBoZWFkZXJzLCBzdGF0dXMgfSA9IHJlc3BvbnNlIHx8IERFRkFVTFRfUkVTUE9OU0U7XG5cbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1JlcXVlc3RFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdyZXF1ZXN0JztcbiAgICAgICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzIHx8IFtdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHVuYWJsZSB0byBzdWNjZXNzZnVsbHkgc3VibWl0IGEgc2VydmVyIHJlcXVlc3RcbiAqIHVzaW5nIGEgcGF5bWVudCBtZXRob2QgYmVjYXVzZSB0aGUgbWV0aG9kIGhhcyBpbnZhbGlkIGNvbmZpZ3VyYXRpb24gb3IgaXMgaW5cbiAqIGFuIGludmFsaWQgc3RhdGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3I8VCA9IGFueT4gZXh0ZW5kcyBSZXF1ZXN0RXJyb3I8VD4ge1xuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlPzogUmVzcG9uc2U8VD4pIHtcbiAgICAgICAgc3VwZXIocmVzcG9uc2UsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGVyZSBpcyBhIHByb2JsZW0gcHJvY2Vzc2luZyB5b3VyIHBheW1lbnQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RJbnZhbGlkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfaW52YWxpZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIHJlcXVlc3QgZmFpbHMgdG8gY29tcGxldGUgd2l0aGluIGl0cyByZXF1aXJlZCB0aW1lZnJhbWVcbiAqIGJlY2F1c2Ugb2YgYSBuZXR3b3JrIGlzc3VlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lb3V0RXJyb3I8VCA9IGFueT4gZXh0ZW5kcyBSZXF1ZXN0RXJyb3I8VD4ge1xuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlPzogUmVzcG9uc2U8VD4pIHtcbiAgICAgICAgc3VwZXIocmVzcG9uc2UsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgcmVxdWVzdCBoYXMgdGltZWQgb3V0IG9yIGFib3J0ZWQuJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1RpbWVvdXRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICd0aW1lb3V0JztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgQnJhaW50cmVlTG9jYWxQYXltZW50LFxuICAgIEJyYWludHJlZUxvY2FsUGF5bWVudENvbmZpZyxcbiAgICBCcmFpbnRyZWVMb2NhbFBheW1lbnRNZXRob2RSZWRpcmVjdEFjdGlvbixcbiAgICBCcmFpbnRyZWVMb2NhbFBheW1lbnRzUGF5bG9hZCxcbiAgICBCcmFpbnRyZWVMUE1QYXltZW50U3RhcnREYXRhLFxuICAgIEJyYWludHJlZUxQTVN0YXJ0UGF5bWVudEVycm9yLFxuICAgIEJyYWludHJlZU9yZGVyU2F2ZWRSZXNwb25zZSxcbiAgICBCcmFpbnRyZWVPcmRlclN0YXR1cyxcbiAgICBCcmFpbnRyZWVSZWRpcmVjdEVycm9yLFxuICAgIEJyYWludHJlZVNkayxcbiAgICBOb25JbnN0YW50TG9jYWxQYXltZW50TWV0aG9kcyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9icmFpbnRyZWUtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEluc3RydW1lbnRNZXRhLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFJlcXVlc3RPcHRpb25zLFxuICAgIFRpbWVvdXRFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5pbXBvcnQgeyBpc0V4cGVyaW1lbnRFbmFibGVkIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcblxuaW1wb3J0IEJyYWludHJlZVJlcXVlc3RTZW5kZXIgZnJvbSAnLi4vYnJhaW50cmVlLXJlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVMb2NhbE1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgV2l0aEJyYWludHJlZUxvY2FsTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9icmFpbnRyZWUtbG9jYWwtbWV0aG9kcy1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmNvbnN0IFBPTExJTkdfSU5URVJWQUwgPSAzMDAwO1xuY29uc3QgTUFYX1BPTExJTkdfVElNRSA9IDMwMDAwMDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJhaW50cmVlTG9jYWxNZXRob2RzUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGJyYWludHJlZWxvY2FsbWV0aG9kcz86IEJyYWludHJlZUxvY2FsTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucztcbiAgICBwcml2YXRlIGJyYWludHJlZUxvY2FsUGF5bWVudD86IEJyYWludHJlZUxvY2FsUGF5bWVudDtcbiAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgZ2F0ZXdheUlkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgaXNMUE1zVXBkYXRlRXhwZXJpbWVudEVuYWJsZWQgPSBmYWxzZTtcbiAgICBwcml2YXRlIHBvbGxpbmdUaW1lciA9IDA7XG4gICAgcHJpdmF0ZSBzdG9wUG9sbGluZyA9IG5vb3A7XG4gICAgcHJpdmF0ZSBpc1BvbGxpbmdFbmFibGVkID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJyYWludHJlZVNkazogQnJhaW50cmVlU2RrLFxuICAgICAgICBwcml2YXRlIGJyYWludHJlZVJlcXVlc3RTZW5kZXI6IEJyYWludHJlZVJlcXVlc3RTZW5kZXIsXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICAgICAgcHJpdmF0ZSBwb2xsaW5nSW50ZXJ2YWw6IG51bWJlciA9IFBPTExJTkdfSU5URVJWQUwsXG4gICAgICAgIHByaXZhdGUgbWF4UG9sbGluZ0ludGVydmFsVGltZTogbnVtYmVyID0gTUFYX1BPTExJTkdfVElNRSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQnJhaW50cmVlTG9jYWxNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGdhdGV3YXlJZCwgbWV0aG9kSWQsIGJyYWludHJlZWxvY2FsbWV0aG9kcyB9ID0gb3B0aW9ucztcblxuICAgICAgICB0aGlzLmdhdGV3YXlJZCA9IGdhdGV3YXlJZDtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWdhdGV3YXlJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmdhdGV3YXlJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYnJhaW50cmVlbG9jYWxtZXRob2RzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYnJhaW50cmVlbG9jYWxtZXRob2RzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5icmFpbnRyZWVsb2NhbG1ldGhvZHMgPSBicmFpbnRyZWVsb2NhbG1ldGhvZHM7XG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IGJyYWludHJlZWxvY2FsbWV0aG9kcy5jb250YWluZXIuc3BsaXQoJyMnKVsxXTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoZ2F0ZXdheUlkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhPihnYXRld2F5SWQpO1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuLCBjb25maWcsIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcbiAgICAgICAgY29uc3QgZmVhdHVyZXMgPSBzdGF0ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzO1xuXG4gICAgICAgIHRoaXMuaXNQb2xsaW5nRW5hYmxlZCA9IGlzRXhwZXJpbWVudEVuYWJsZWQoXG4gICAgICAgICAgICBmZWF0dXJlcyxcbiAgICAgICAgICAgICdQQVlQQUwtNTI1OC5icmFpbnRyZWVfbG9jYWxfbWV0aG9kc19wb2xsaW5nJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmlzTFBNc1VwZGF0ZUV4cGVyaW1lbnRFbmFibGVkID0gaXNFeHBlcmltZW50RW5hYmxlZChcbiAgICAgICAgICAgIGZlYXR1cmVzLFxuICAgICAgICAgICAgJ1BBWVBBTC00ODUzLmFkZF9uZXdfcGF5bWVudF9mbG93X2Zvcl9icmFpbnRyZWVfbHBtcycsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCFjbGllbnRUb2tlbiB8fCAhaW5pdGlhbGl6YXRpb25EYXRhIHx8ICFjb25maWcubWVyY2hhbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuYnJhaW50cmVlU2RrLmluaXRpYWxpemUoY2xpZW50VG9rZW4pO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNOb25JbnN0YW50UGF5bWVudE1ldGhvZChtZXRob2RJZCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJyYWludHJlZUxvY2FsUGF5bWVudCA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2RrLmdldEJyYWludHJlZUxvY2FsUGF5bWVudChcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLm1lcmNoYW50SWQsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQgfSA9IHBheW1lbnQ7XG5cbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRydWUpO1xuXG4gICAgICAgIGlmICh0aGlzLmlzTm9uSW5zdGFudFBheW1lbnRNZXRob2QobWV0aG9kSWQpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVXaXRoTm90SW5zdGFudExQTShtZXRob2RJZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVXaXRoSW5zdGFudExQTShtZXRob2RJZCwgb3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBleGVjdXRlV2l0aE5vdEluc3RhbnRMUE0obWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYmFzaWNQYXltZW50RGF0YSA9IGF3YWl0IHRoaXMuZ2V0TFBNc0Jhc2ljUGF5bWVudERhdGEoKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYmFzaWNQYXltZW50RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0JyYWludHJlZVJlZGlyZWN0RXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVkaXJlY3RVcmwgPSBlcnJvci5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkLmRhdGEucmVkaXJlY3RfdXJsO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UocmVkaXJlY3RVcmwpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBleGVjdXRlV2l0aEluc3RhbnRMUE0oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIG9yZGVyOiBPbWl0PE9yZGVyUmVxdWVzdEJvZHksICdwYXltZW50Jz4sXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICghdGhpcy5icmFpbnRyZWVMb2NhbFBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KTogdm9pZCA9PiB7XG4gICAgICAgICAgICB0aGlzLmJyYWludHJlZUxvY2FsUGF5bWVudD8uc3RhcnRQYXltZW50KFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW5zdGFudExQTUNvbmZpZyhtZXRob2RJZCwgb3JkZXIsIG9wdGlvbnMpLFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW5zdGFudExQTUNhbGxiYWNrKHJlc29sdmUsIHJlamVjdCwgbWV0aG9kSWQsIG9yZGVyLCBvcHRpb25zKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZ2V0TFBNc0Jhc2ljUGF5bWVudERhdGEoKTogUHJvbWlzZTxQYXltZW50SW5zdHJ1bWVudE1ldGE+IHtcbiAgICAgICAgY29uc3QgeyBkZXZpY2VEYXRhIH0gPSBhd2FpdCB0aGlzLmJyYWludHJlZVNkay5nZXREYXRhQ29sbGVjdG9yT3JUaHJvdygpO1xuXG4gICAgICAgIHJldHVybiB7IGRldmljZVNlc3Npb25JZDogZGV2aWNlRGF0YSB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SW5zdGFudExQTUNvbmZpZyhcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgb3JkZXI6IE9taXQ8T3JkZXJSZXF1ZXN0Qm9keSwgJ3BheW1lbnQnPixcbiAgICAgICAgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zLFxuICAgICk6IEJyYWludHJlZUxvY2FsUGF5bWVudENvbmZpZyB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBiaWxsaW5nID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHsgZmlyc3ROYW1lLCBsYXN0TmFtZSwgY291bnRyeUNvZGUgfSA9IGJpbGxpbmc7XG4gICAgICAgIGNvbnN0IHsgY3VycmVuY3ksIGVtYWlsLCBsaW5lSXRlbXMgfSA9IGNhcnQ7XG4gICAgICAgIGNvbnN0IGlzU2hpcHBpbmdSZXF1aXJlZCA9IGxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDA7XG4gICAgICAgIGNvbnN0IGdyYW5kVG90YWwgPSBzdGF0ZS5nZXRDaGVja291dE9yVGhyb3coKS5vdXRzdGFuZGluZ0JhbGFuY2U7XG4gICAgICAgIGNvbnN0IGNoZWNrb3V0VXJsID0gc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCkubGlua3MuY2hlY2tvdXRMaW5rO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYXltZW50VHlwZTogbWV0aG9kSWQsXG4gICAgICAgICAgICBhbW91bnQ6IGdyYW5kVG90YWwsXG4gICAgICAgICAgICBmYWxsYmFjazoge1xuICAgICAgICAgICAgICAgIHVybDogY2hlY2tvdXRVcmwsXG4gICAgICAgICAgICAgICAgYnV0dG9uVGV4dDogJ0NvbXBsZXRlIFBheW1lbnQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZTogY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzc1JlcXVpcmVkOiBpc1NoaXBwaW5nUmVxdWlyZWQsXG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgIGdpdmVuTmFtZTogZmlyc3ROYW1lLFxuICAgICAgICAgICAgc3VybmFtZTogbGFzdE5hbWUsXG4gICAgICAgICAgICBhZGRyZXNzOiB7XG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25QYXltZW50U3RhcnQ6IGFzeW5jIChkYXRhOiBCcmFpbnRyZWVMUE1QYXltZW50U3RhcnREYXRhLCBzdGFydDogKCkgPT4gdm9pZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0xQTXNVcGRhdGVFeHBlcmltZW50RW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBkYXRhLnBheW1lbnRJZDtcblxuICAgICAgICAgICAgICAgICAgICBzdGFydCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBiYXNpY1BheW1lbnREYXRhID0gYXdhaXQgdGhpcy5nZXRMUE1zQmFzaWNQYXltZW50RGF0YSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5iYXNpY1BheW1lbnREYXRhLFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgW2Ake21ldGhvZElkfV9hY2NvdW50YF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogZGF0YS5wYXltZW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTdWJtaXQgb3JkZXIgYW5kIHBheW1lbnQgc2hvdWxkIGJlIHBlcmZvcm1lZCB0byBwYXNzIG9yZGVyX2lkIHRvIHRoZSBiYWNrZW5kXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudERhdGEsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNCcmFpbnRyZWVPcmRlclNhdmVkUmVzcG9uc2UoZXJyb3IpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkLmRhdGEub3JkZXJfaWRfc2F2ZWRfc3VjY2Vzc2Z1bGx5XG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgbWV0aG9kIGNhbGwgaW5pdGlhdGVzIHRoZSBwb3B1cFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQb2xsaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SW5zdGFudExQTUNhbGxiYWNrKFxuICAgICAgICByZXNvbHZlOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQsXG4gICAgICAgIHJlamVjdDogKHJlYXNvbj86IHVua25vd24pID0+IHZvaWQsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIG9yZGVyOiBPbWl0PE9yZGVyUmVxdWVzdEJvZHksICdwYXltZW50Jz4sXG4gICAgICAgIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyxcbiAgICApIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG5cbiAgICAgICAgcmV0dXJuIGFzeW5jIChcbiAgICAgICAgICAgIHN0YXJ0UGF5bWVudEVycm9yOiBCcmFpbnRyZWVMUE1TdGFydFBheW1lbnRFcnJvciB8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHBheWxvYWREYXRhOiBCcmFpbnRyZWVMb2NhbFBheW1lbnRzUGF5bG9hZCxcbiAgICAgICAgKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3RhcnRQYXltZW50RXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRQYXltZW50RXJyb3IuY29kZSA9PT0gJ0xPQ0FMX1BBWU1FTlRfV0lORE9XX0NMT1NFRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldFBvbGxpbmdNZWNoYW5pc20oKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQb2xsaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0UG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBiYXNpY1BheW1lbnREYXRhID0gYXdhaXQgdGhpcy5nZXRMUE1zQmFzaWNQYXltZW50RGF0YSgpO1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudERhdGEgPSB7XG4gICAgICAgICAgICAgICAgLi4uYmFzaWNQYXltZW50RGF0YSxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIFtgJHttZXRob2RJZH1fYWNjb3VudGBdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogY2FydC5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBwYXlsb2FkRGF0YS5ub25jZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLighdGhpcy5pc0xQTXNVcGRhdGVFeHBlcmltZW50RW5hYmxlZCA/IHsgb3JkZXJfaWQ6IHRoaXMub3JkZXJJZCB9IDoge30pLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0xQTXNVcGRhdGVFeHBlcmltZW50RW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnREYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgIGNvbnN0IHsgb25FcnJvciB9ID0gdGhpcy5icmFpbnRyZWVsb2NhbG1ldGhvZHMgfHwge307XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQb2xsaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBVdGlsc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIGlzTm9uSW5zdGFudFBheW1lbnRNZXRob2QobWV0aG9kSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gbWV0aG9kSWQudG9VcHBlckNhc2UoKSBpbiBOb25JbnN0YW50TG9jYWxQYXltZW50TWV0aG9kcztcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQnJhaW50cmVlUmVkaXJlY3RFcnJvcihlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIEJyYWludHJlZVJlZGlyZWN0RXJyb3Ige1xuICAgICAgICBpZiAodHlwZW9mIGVycm9yICE9PSAnb2JqZWN0JyB8fCBlcnJvciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBib2R5IH06IFBhcnRpYWw8QnJhaW50cmVlTG9jYWxQYXltZW50TWV0aG9kUmVkaXJlY3RBY3Rpb24+ID0gZXJyb3I7XG5cbiAgICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISFib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkPy5kYXRhLnJlZGlyZWN0X3VybDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQnJhaW50cmVlT3JkZXJTYXZlZFJlc3BvbnNlKFxuICAgICAgICByZXNwb25zZTogdW5rbm93bixcbiAgICApOiByZXNwb25zZSBpcyBCcmFpbnRyZWVPcmRlclNhdmVkUmVzcG9uc2Uge1xuICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlICE9PSAnb2JqZWN0JyB8fCByZXNwb25zZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBib2R5IH06IFBhcnRpYWw8QnJhaW50cmVlT3JkZXJTYXZlZFJlc3BvbnNlPiA9IHJlc3BvbnNlO1xuXG4gICAgICAgIGlmICghYm9keSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ/LmRhdGEuaGFzT3duUHJvcGVydHkoJ29yZGVyX2lkX3NhdmVkX3N1Y2Nlc3NmdWxseScpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUG9sbGluZyBtZWNoYW5pc21cbiAgICAgKlxuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICByZXNvbHZlUHJvbWlzZTogKCkgPT4gdm9pZCxcbiAgICAgICAgcmVqZWN0UHJvbWlzZTogKCkgPT4gdm9pZCxcbiAgICAgICAgZ2F0ZXdheUlkPzogc3RyaW5nLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChyZXNvbHZlLCB0aGlzLnBvbGxpbmdJbnRlcnZhbCk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RvcFBvbGxpbmcgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5wb2xsaW5nVGltZXIgKz0gdGhpcy5wb2xsaW5nSW50ZXJ2YWw7XG5cbiAgICAgICAgICAgIGNvbnN0IG9yZGVyU3RhdHVzID0gYXdhaXQgdGhpcy5icmFpbnRyZWVSZXF1ZXN0U2VuZGVyLmdldE9yZGVyU3RhdHVzKGdhdGV3YXlJZCwge1xuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICB1c2VNZXRhZGF0YTogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBpc09yZGVyUGVuZGluZyA9IG9yZGVyU3RhdHVzLnN0YXR1cyA9PT0gQnJhaW50cmVlT3JkZXJTdGF0dXMuUGVuZGluZztcbiAgICAgICAgICAgIGNvbnN0IGlzT3JkZXJBcHByb3ZlZCA9IG9yZGVyU3RhdHVzLnN0YXR1cyA9PT0gQnJhaW50cmVlT3JkZXJTdGF0dXMuQ29tcGxldGVkO1xuICAgICAgICAgICAgY29uc3QgaXNQb2xsaW5nRXJyb3IgPSBvcmRlclN0YXR1cy5zdGF0dXMgPT09IEJyYWludHJlZU9yZGVyU3RhdHVzLkZhaWxlZDtcblxuICAgICAgICAgICAgaWYgKGlzT3JkZXJBcHByb3ZlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc1BvbGxpbmdFcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3RQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhaXNPcmRlckFwcHJvdmVkICYmXG4gICAgICAgICAgICAgICAgaXNPcmRlclBlbmRpbmcgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnBvbGxpbmdUaW1lciA8IHRoaXMubWF4UG9sbGluZ0ludGVydmFsVGltZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0UHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVpbml0aWFsaXplU3RyYXRlZ3koe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICBicmFpbnRyZWVsb2NhbG1ldGhvZHM6IHRoaXMuYnJhaW50cmVlbG9jYWxtZXRob2RzLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IFRpbWVvdXRFcnJvcigpKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdFByb21pc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xuICAgICAgICB0aGlzLnBvbGxpbmdUaW1lciA9IDA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXNldFBvbGxpbmdNZWNoYW5pc20oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcmVpbml0aWFsaXplU3RyYXRlZ3koXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhCcmFpbnRyZWVMb2NhbE1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVpbml0aWFsaXplKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZShvcHRpb25zKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVSZXF1ZXN0U2VuZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcbmltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVIb3N0V2luZG93LFxuICAgIEJyYWludHJlZVNjcmlwdExvYWRlcixcbiAgICBCcmFpbnRyZWVTZGssXG4gICAgQnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYnJhaW50cmVlLXV0aWxzJztcbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgQnJhaW50cmVlUmVxdWVzdFNlbmRlciBmcm9tICcuLi9icmFpbnRyZWUtcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgQnJhaW50cmVlTG9jYWxNZXRob2RzUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vYnJhaW50cmVlLWxvY2FsLW1ldGhvZHMtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJyYWludHJlZUxvY2FsTWV0aG9kc1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCcmFpbnRyZWVMb2NhbE1ldGhvZHNQYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT4ge1xuICAgIGNvbnN0IGJyYWludHJlZUhvc3RXaW5kb3c6IEJyYWludHJlZUhvc3RXaW5kb3cgPSB3aW5kb3c7XG4gICAgY29uc3QgYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIgPSBuZXcgQnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIocGF5bWVudEludGVncmF0aW9uU2VydmljZSk7XG4gICAgY29uc3QgYnJhaW50cmVlU2RrID0gbmV3IEJyYWludHJlZVNkayhcbiAgICAgICAgbmV3IEJyYWludHJlZVNjcmlwdExvYWRlcihcbiAgICAgICAgICAgIGdldFNjcmlwdExvYWRlcigpLFxuICAgICAgICAgICAgYnJhaW50cmVlSG9zdFdpbmRvdyxcbiAgICAgICAgICAgIGJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyLFxuICAgICAgICApLFxuICAgICk7XG4gICAgY29uc3QgcmVxdWVzdFNlbmRlciA9IGNyZWF0ZVJlcXVlc3RTZW5kZXIoKTtcbiAgICBjb25zdCBicmFpbnRyZWVSZXF1ZXN0U2VuZGVyID0gbmV3IEJyYWludHJlZVJlcXVlc3RTZW5kZXIocmVxdWVzdFNlbmRlcik7XG5cbiAgICByZXR1cm4gbmV3IEJyYWludHJlZUxvY2FsTWV0aG9kc1BheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgYnJhaW50cmVlU2RrLFxuICAgICAgICBicmFpbnRyZWVSZXF1ZXN0U2VuZGVyLFxuICAgICAgICBuZXcgTG9hZGluZ0luZGljYXRvcih7IHN0eWxlczogeyBiYWNrZ3JvdW5kQ29sb3I6ICdibGFjaycgfSB9KSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJyYWludHJlZUxvY2FsTWV0aG9kc1BheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgZ2F0ZXdheTogJ2JyYWludHJlZWxvY2FsbWV0aG9kcycgfSxcbl0pO1xuIiwiaW1wb3J0IHsgb21pdEJ5IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgQnJhaW50cmVlRmFzdGxhbmVTdHlsZXNPcHRpb24sIEZhc3RsYW5lU3R5bGVzU2V0dGluZ3MgfSBmcm9tICcuLi9pbmRleCc7XG5cbmZ1bmN0aW9uIGlzSW52YWxpZFN0eWxlT3B0aW9uKHN0eWxlT3B0aW9uOiB1bmtub3duKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBzdHlsZU9wdGlvbiAhPT0gJ3N0cmluZyc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEZhc3RsYW5lU3R5bGVzKFxuICAgIHN0eWxlU2V0dGluZ3M/OiBGYXN0bGFuZVN0eWxlc1NldHRpbmdzLFxuICAgIHVpU3R5bGVzPzogQnJhaW50cmVlRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4pOiBCcmFpbnRyZWVGYXN0bGFuZVN0eWxlc09wdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKCF1aVN0eWxlcyAmJiAhc3R5bGVTZXR0aW5ncykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiBjbGVhblVwRmFzdGxhbmVTdHlsZXMobWVyZ2VGYXN0bGFuZVN0eWxlcyhzdHlsZVNldHRpbmdzLCB1aVN0eWxlcykpO1xufVxuXG5mdW5jdGlvbiBtZXJnZUZhc3RsYW5lU3R5bGVzKFxuICAgIHN0eWxlU2V0dGluZ3M/OiBGYXN0bGFuZVN0eWxlc1NldHRpbmdzLFxuICAgIHVpU3R5bGVzPzogQnJhaW50cmVlRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4pOiBCcmFpbnRyZWVGYXN0bGFuZVN0eWxlc09wdGlvbiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcm9vdDoge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yUHJpbWFyeTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc0JhY2tncm91bmRDb2xvciB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy5yb290Py5iYWNrZ3JvdW5kQ29sb3JQcmltYXJ5LFxuICAgICAgICAgICAgZXJyb3JDb2xvcjogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NFcnJvckNvbG9yIHx8IHVpU3R5bGVzPy5yb290Py5lcnJvckNvbG9yLFxuICAgICAgICAgICAgZm9udEZhbWlseTogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NGb250RmFtaWx5IHx8IHVpU3R5bGVzPy5yb290Py5mb250RmFtaWx5LFxuICAgICAgICAgICAgZm9udFNpemVCYXNlOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzRm9udFNpemUgfHwgdWlTdHlsZXM/LnJvb3Q/LmZvbnRTaXplQmFzZSxcbiAgICAgICAgICAgIHBhZGRpbmc6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZyB8fCB1aVN0eWxlcz8ucm9vdD8ucGFkZGluZyxcbiAgICAgICAgICAgIHByaW1hcnlDb2xvcjpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc1ByaW1hcnlDb2xvciB8fCB1aVN0eWxlcz8ucm9vdD8ucHJpbWFyeUNvbG9yLFxuICAgICAgICB9LFxuICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgYm9yZGVyUmFkaXVzOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlclJhZGl1cyB8fCB1aVN0eWxlcz8uaW5wdXQ/LmJvcmRlclJhZGl1cyxcbiAgICAgICAgICAgIGJvcmRlckNvbG9yOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlckNvbG9yIHx8IHVpU3R5bGVzPy5pbnB1dD8uYm9yZGVyQ29sb3IsXG4gICAgICAgICAgICBmb2N1c0JvcmRlckNvbG9yOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0ZvY3VzQm9yZGVyQmFzZSB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy5pbnB1dD8uZm9jdXNCb3JkZXJDb2xvcixcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IgfHxcbiAgICAgICAgICAgICAgICB1aVN0eWxlcz8uaW5wdXQ/LmJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgIGJvcmRlcldpZHRoOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlcldpZHRoIHx8IHVpU3R5bGVzPy5pbnB1dD8uYm9yZGVyV2lkdGgsXG4gICAgICAgICAgICB0ZXh0Q29sb3JCYXNlOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc1RleHRDb2xvckJhc2UgfHwgdWlTdHlsZXM/LmlucHV0Py50ZXh0Q29sb3JCYXNlLFxuICAgICAgICB9LFxuICAgICAgICB0b2dnbGU6IHtcbiAgICAgICAgICAgIGNvbG9yUHJpbWFyeTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JQcmltYXJ5IHx8IHVpU3R5bGVzPy50b2dnbGU/LmNvbG9yUHJpbWFyeSxcbiAgICAgICAgICAgIGNvbG9yU2Vjb25kYXJ5OlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclNlY29uZGFyeSB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy50b2dnbGU/LmNvbG9yU2Vjb25kYXJ5LFxuICAgICAgICB9LFxuICAgICAgICB0ZXh0OiB7XG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0NvbG9yIHx8IHVpU3R5bGVzPy50ZXh0Py5ib2R5Py5jb2xvcixcbiAgICAgICAgICAgICAgICBmb250U2l6ZTpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzRm9udFNpemUgfHxcbiAgICAgICAgICAgICAgICAgICAgdWlTdHlsZXM/LnRleHQ/LmJvZHk/LmZvbnRTaXplLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhcHRpb246IHtcbiAgICAgICAgICAgICAgICBjb2xvcjpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzQ29sb3IgfHxcbiAgICAgICAgICAgICAgICAgICAgdWlTdHlsZXM/LnRleHQ/LmNhcHRpb24/LmNvbG9yLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRleHRDYXB0aW9uU2V0dGluZ3NGb250U2l6ZSB8fFxuICAgICAgICAgICAgICAgICAgICB1aVN0eWxlcz8udGV4dD8uY2FwdGlvbj8uZm9udFNpemUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBicmFuZGluZzogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVCcmFuZGluZ1NldHRpbmdzIHx8IHVpU3R5bGVzPy5icmFuZGluZyxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjbGVhblVwRmFzdGxhbmVTdHlsZXMoc3R5bGVzOiBCcmFpbnRyZWVGYXN0bGFuZVN0eWxlc09wdGlvbikge1xuICAgIGNvbnN0IGZhc3RsYW5lU3R5bGVzOiBCcmFpbnRyZWVGYXN0bGFuZVN0eWxlc09wdGlvbiA9IHt9O1xuXG4gICAgY29uc3Qgcm9vdCA9IG9taXRCeShzdHlsZXMucm9vdCwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IGlucHV0ID0gb21pdEJ5KHN0eWxlcy5pbnB1dCwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IHRvZ2dsZSA9IG9taXRCeShzdHlsZXMudG9nZ2xlLCBpc0ludmFsaWRTdHlsZU9wdGlvbik7XG4gICAgY29uc3QgdGV4dEJvZHkgPSBvbWl0Qnkoc3R5bGVzLnRleHQ/LmJvZHksIGlzSW52YWxpZFN0eWxlT3B0aW9uKTtcbiAgICBjb25zdCB0ZXh0Q2FwdGlvbiA9IG9taXRCeShzdHlsZXMudGV4dD8uY2FwdGlvbiwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IGJyYW5kaW5nID0gc3R5bGVzLmJyYW5kaW5nO1xuXG4gICAgaWYgKE9iamVjdC5rZXlzKHJvb3QpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy5yb290ID0gcm9vdDtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoaW5wdXQpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy5pbnB1dCA9IGlucHV0O1xuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyh0b2dnbGUpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50b2dnbGUgPSB0b2dnbGU7XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKHRleHRCb2R5KS5sZW5ndGgpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudGV4dCA9IHt9O1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50ZXh0LmJvZHkgPSB0ZXh0Qm9keTtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXModGV4dENhcHRpb24pLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50ZXh0ID0ge1xuICAgICAgICAgICAgLi4uZmFzdGxhbmVTdHlsZXMudGV4dCxcbiAgICAgICAgfTtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudGV4dC5jYXB0aW9uID0gdGV4dENhcHRpb247XG4gICAgfVxuXG4gICAgaWYgKGJyYW5kaW5nKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLmJyYW5kaW5nID0gYnJhbmRpbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhc3RsYW5lU3R5bGVzO1xufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50UHJvdmlkZXJDdXN0b21lcixcbiAgICBQYXlQYWxDb25uZWN0Q3VzdG9tZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0JyYWludHJlZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lcihcbiAgICBjdXN0b21lcj86IFBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuKTogY3VzdG9tZXIgaXMgUGF5UGFsQ29ubmVjdEN1c3RvbWVyIHtcbiAgICBpZiAoIWN1c3RvbWVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICAnYXV0aGVudGljYXRpb25TdGF0ZScgaW4gY3VzdG9tZXIgfHwgJ2FkZHJlc3NlcycgaW4gY3VzdG9tZXIgfHwgJ2luc3RydW1lbnRzJyBpbiBjdXN0b21lclxuICAgICk7XG59XG4iLCJpbXBvcnQgeyBIb3N0ZWRJbnN0cnVtZW50LCBOb25jZUluc3RydW1lbnQgfSBmcm9tICcuL3BheW1lbnQnO1xuXG50eXBlIFBheW1lbnRJbnN0cnVtZW50ID0gQ2FyZEluc3RydW1lbnQgfCBBY2NvdW50SW5zdHJ1bWVudCB8IEhvc3RlZEluc3RydW1lbnQgfCBOb25jZUluc3RydW1lbnQ7XG5cbmV4cG9ydCBkZWZhdWx0IFBheW1lbnRJbnN0cnVtZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VJbnN0cnVtZW50IHtcbiAgICBiaWdwYXlUb2tlbjogc3RyaW5nO1xuICAgIGRlZmF1bHRJbnN0cnVtZW50OiBib29sZWFuO1xuICAgIHByb3ZpZGVyOiBzdHJpbmc7XG4gICAgdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczogYm9vbGVhbjtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUge1xuICAgIENWViA9ICdjdnYnLFxuICAgIFBBTiA9ICdwYW4nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRJbnN0cnVtZW50IGV4dGVuZHMgQmFzZUluc3RydW1lbnQge1xuICAgIGJyYW5kOiBzdHJpbmc7XG4gICAgZXhwaXJ5TW9udGg6IHN0cmluZztcbiAgICBleHBpcnlZZWFyOiBzdHJpbmc7XG4gICAgaWluOiBzdHJpbmc7XG4gICAgbGFzdDQ6IHN0cmluZztcbiAgICB0eXBlOiAnY2FyZCc7XG4gICAgdW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uTW9kZTogVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZTtcbn1cblxuaW50ZXJmYWNlIEJhc2VBY2NvdW50SW5zdHJ1bWVudCBleHRlbmRzIEJhc2VJbnN0cnVtZW50IHtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiAnYWNjb3VudCcgfCAnYmFuayc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VBY2NvdW50SW5zdHJ1bWVudCB7XG4gICAgZXh0ZXJuYWxJZDogc3RyaW5nO1xuICAgIG1ldGhvZDogJ3BheXBhbCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWNoSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VBY2NvdW50SW5zdHJ1bWVudCB7XG4gICAgaXNzdWVyOiBzdHJpbmc7XG4gICAgYWNjb3VudE51bWJlcjogc3RyaW5nO1xuICAgIHR5cGU6ICdiYW5rJztcbiAgICBtZXRob2Q6ICdhY2gnIHwgJ2VjcCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFua0luc3RydW1lbnQgZXh0ZW5kcyBCYXNlQWNjb3VudEluc3RydW1lbnQge1xuICAgIGFjY291bnROdW1iZXI6IHN0cmluZztcbiAgICBpc3N1ZXI6IHN0cmluZztcbiAgICBpYmFuOiBzdHJpbmc7XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdHlwZTogJ2JhbmsnO1xufVxuXG5leHBvcnQgdHlwZSBBY2NvdW50SW5zdHJ1bWVudCA9IFBheVBhbEluc3RydW1lbnQgfCBCYW5rSW5zdHJ1bWVudCB8IEFjaEluc3RydW1lbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRBY2Nlc3NUb2tlbiB7XG4gICAgdmF1bHRBY2Nlc3NUb2tlbjogc3RyaW5nO1xuICAgIHZhdWx0QWNjZXNzRXhwaXJ5OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2Vzc2lvbkNvbnRleHQge1xuICAgIGN1c3RvbWVySWQ6IG51bWJlcjtcbiAgICBzdG9yZUlkOiBzdHJpbmc7XG4gICAgY3VycmVuY3lDb2RlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluc3RydW1lbnRSZXF1ZXN0Q29udGV4dCBleHRlbmRzIFNlc3Npb25Db250ZXh0IHtcbiAgICBhdXRoVG9rZW46IHN0cmluZztcbn1cbiIsImltcG9ydCB7XG4gICAgQnJhaW50cmVlM0RTVmVyaWZ5Q2FyZEVycm9yLFxuICAgIEJyYWludHJlZTNEU1ZlcmlmeUNhcmRQYXlsb2FkLFxuICAgIEJyYWludHJlZUZhc3RsYW5lQWRkcmVzcyxcbiAgICBCcmFpbnRyZWVGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgQnJhaW50cmVlRmFzdGxhbmVDYXJkQ29tcG9uZW50LFxuICAgIEJyYWludHJlZUZhc3RsYW5lQ2FyZENvbXBvbmVudE9wdGlvbnMsXG4gICAgQnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIEJyYWludHJlZVNkayxcbiAgICBnZXRGYXN0bGFuZVN0eWxlcyxcbiAgICBpc0JyYWludHJlZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9icmFpbnRyZWUtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBBZGRyZXNzLFxuICAgIENhcmRJbnN0cnVtZW50LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcixcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IGlzRXhwZXJpbWVudEVuYWJsZWQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3V0aWxpdHknO1xuXG5pbXBvcnQgeyBXaXRoQnJhaW50cmVlRmFzdGxhbmVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgfSBmcm9tICcuL2JyYWludHJlZS1mYXN0bGFuZS1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5pbXBvcnQgQnJhaW50cmVlRmFzdGxhbmVVdGlscyBmcm9tICcuL2JyYWludHJlZS1mYXN0bGFuZS11dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJyYWludHJlZUZhc3RsYW5lUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGJyYWludHJlZUNhcmRDb21wb25lbnQ/OiBCcmFpbnRyZWVGYXN0bGFuZUNhcmRDb21wb25lbnQ7XG4gICAgcHJpdmF0ZSBpczNEU0VuYWJsZWQ/OiBib29sZWFuO1xuICAgIHByaXZhdGUgb25FcnJvcj86IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJyYWludHJlZUZhc3RsYW5lVXRpbHM6IEJyYWludHJlZUZhc3RsYW5lVXRpbHMsXG4gICAgICAgIHByaXZhdGUgYnJhaW50cmVlU2RrOiBCcmFpbnRyZWVTZGssXG4gICAgKSB7fVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBEZWZhdWx0IG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhCcmFpbnRyZWVGYXN0bGFuZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgYnJhaW50cmVlZmFzdGxhbmUgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFicmFpbnRyZWVmYXN0bGFuZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJyYWludHJlZWZhc3RsYW5lXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFicmFpbnRyZWVmYXN0bGFuZS5vbkluaXQgfHwgdHlwZW9mIGJyYWludHJlZWZhc3RsYW5lLm9uSW5pdCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJyYWludHJlZWZhc3RsYW5lLm9uSW5pdFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYnJhaW50cmVlZmFzdGxhbmUub25DaGFuZ2UgfHwgdHlwZW9mIGJyYWludHJlZWZhc3RsYW5lLm9uQ2hhbmdlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYnJhaW50cmVlZmFzdGxhbmUub25DaGFuZ2VcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCcmFpbnRyZWVJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpbml0aWFsaXphdGlvbkRhdGEsIGNsaWVudFRva2VuIH0gPSBwYXltZW50TWV0aG9kIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZCB9ID0gaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCBmZWF0dXJlcyA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXM7XG4gICAgICAgIGNvbnN0IGlzVGhyZWVEU0V4cGVyaW1lbnRFbmFibGVkID0gaXNFeHBlcmltZW50RW5hYmxlZChcbiAgICAgICAgICAgIGZlYXR1cmVzLFxuICAgICAgICAgICAgJ1BST0pFQ1QtNzA4MC5icmFpbnRyZWVfZmFzdGxhbmVfdGhyZWVfZHMnLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuaXMzRFNFbmFibGVkID0gcGF5bWVudE1ldGhvZC5jb25maWcuaXMzZHNFbmFibGVkO1xuXG4gICAgICAgIGlmIChjbGllbnRUb2tlbiAmJiBpc1RocmVlRFNFeHBlcmltZW50RW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVTZGsuaW5pdGlhbGl6ZShjbGllbnRUb2tlbik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZVN0eWxlU2V0dGluZ3MgPSBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWRcbiAgICAgICAgICAgID8gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LmZhc3RsYW5lU3R5bGVzXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICBjb25zdCBmYXN0bGFuZVN0eWxlcyA9IGdldEZhc3RsYW5lU3R5bGVzKFxuICAgICAgICAgICAgcGF5cGFsRmFzdGxhbmVTdHlsZVNldHRpbmdzLFxuICAgICAgICAgICAgYnJhaW50cmVlZmFzdGxhbmUuc3R5bGVzLFxuICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuYnJhaW50cmVlRmFzdGxhbmVVdGlscy5pbml0aWFsaXplQnJhaW50cmVlRmFzdGxhbmVPclRocm93KFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBmYXN0bGFuZVN0eWxlcyxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodGhpcy5zaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3coKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5icmFpbnRyZWVGYXN0bGFuZVV0aWxzLnJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUNhcmRDb21wb25lbnQoKTtcblxuICAgICAgICB0aGlzLm9uRXJyb3IgPSBicmFpbnRyZWVmYXN0bGFuZS5vbkVycm9yO1xuXG4gICAgICAgIGJyYWludHJlZWZhc3RsYW5lLm9uSW5pdCgoY29udGFpbmVyKSA9PiB0aGlzLnJlbmRlckJyYWludHJlZUNhcmRDb21wb25lbnQoY29udGFpbmVyKSk7XG4gICAgICAgIGJyYWludHJlZWZhc3RsYW5lLm9uQ2hhbmdlKCgpID0+IHRoaXMuaGFuZGxlQnJhaW50cmVlU3RvcmVkSW5zdHJ1bWVudENoYW5nZShtZXRob2RJZCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUob3JkZXJSZXF1ZXN0OiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IG9yZGVyUmVxdWVzdDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IGF3YWl0IHRoaXMucHJlcGFyZVBheW1lbnRQYXlsb2FkKHBheW1lbnQubWV0aG9kSWQpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcblxuICAgICAgICB0aGlzLmJyYWludHJlZUZhc3RsYW5lVXRpbHMucmVtb3ZlU2Vzc2lvbklkRnJvbUNvb2tpZXMoKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLmJyYWludHJlZUNhcmRDb21wb25lbnQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnJhaW50cmVlIEZhc3RsYW5lIENvbXBvbmVudCByZW5kZXJpbmcgbWV0aG9kXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVDYXJkQ29tcG9uZW50KCkge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IHBob25lLCBmaXJzdE5hbWUsIGxhc3ROYW1lIH0gPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgZnVsbE5hbWUgPSBgJHtmaXJzdE5hbWV9ICR7bGFzdE5hbWV9YDtcblxuICAgICAgICBjb25zdCBjYXJkQ29tcG9uZW50T3B0aW9uczogQnJhaW50cmVlRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHN0eWxlczoge30sXG4gICAgICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgICAgICBjYXJkaG9sZGVyTmFtZToge1xuICAgICAgICAgICAgICAgICAgICBwcmVmaWxsOiBmdWxsTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC4uLihwaG9uZSAmJiB7XG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmaWxsOiBwaG9uZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsUGF5bWVudENvbXBvbmVudCA9XG4gICAgICAgICAgICB0aGlzLmJyYWludHJlZUZhc3RsYW5lVXRpbHMuZ2V0QnJhaW50cmVlRmFzdGxhbmVDb21wb25lbnRPclRocm93KCk7XG5cbiAgICAgICAgdGhpcy5icmFpbnRyZWVDYXJkQ29tcG9uZW50ID0gYXdhaXQgcGF5cGFsUGF5bWVudENvbXBvbmVudChjYXJkQ29tcG9uZW50T3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCcmFpbnRyZWVDYXJkQ29tcG9uZW50KGNvbnRhaW5lcj86IHN0cmluZykge1xuICAgICAgICBjb25zdCBicmFpbnRyZWVDYXJkQ29tcG9uZW50ID0gdGhpcy5nZXRCcmFpbnRyZWVDYXJkQ29tcG9uZW50T3JUaHJvdygpO1xuXG4gICAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcImNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyYWludHJlZUNhcmRDb21wb25lbnQucmVuZGVyKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXltZW50IFBheWxvYWQgcHJlcGFyYXRpb24gbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBwcmVwYXJlUGF5bWVudFBheWxvYWQobWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8UGF5bWVudD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBmdWxsTmFtZSA9IGAke2JpbGxpbmdBZGRyZXNzLmZpcnN0TmFtZX0gJHtiaWxsaW5nQWRkcmVzcy5sYXN0TmFtZX1gO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEluc3RydW1lbnQgPSB0aGlzLmdldFBheVBhbEluc3RydW1lbnRzKClbMF07XG5cbiAgICAgICAgY29uc3QgZGV2aWNlU2Vzc2lvbklkID0gYXdhaXQgdGhpcy5icmFpbnRyZWVGYXN0bGFuZVV0aWxzLmdldERldmljZVNlc3Npb25JZCgpO1xuICAgICAgICBjb25zdCBmZWF0dXJlcyA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXM7XG4gICAgICAgIGNvbnN0IGlzVGhyZWVEU0V4cGVyaW1lbnRFbmFibGVkID0gaXNFeHBlcmltZW50RW5hYmxlZChcbiAgICAgICAgICAgIGZlYXR1cmVzLFxuICAgICAgICAgICAgJ1BST0pFQ1QtNzA4MC5icmFpbnRyZWVfZmFzdGxhbmVfdGhyZWVfZHMnLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChwYXlwYWxJbnN0cnVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCB0aHJlZURTVG9rZW4gPVxuICAgICAgICAgICAgICAgIHRoaXMuaXMzRFNFbmFibGVkICYmIGlzVGhyZWVEU0V4cGVyaW1lbnRFbmFibGVkXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgdGhpcy5nZXQzRFMocGF5cGFsSW5zdHJ1bWVudC5iaWdwYXlUb2tlbiwgcGF5cGFsSW5zdHJ1bWVudD8uaWluIHx8ICcnKVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICBkZXZpY2VTZXNzaW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheXBhbF9mYXN0bGFuZV90b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiB0aHJlZURTVG9rZW4gfHwgcGF5cGFsSW5zdHJ1bWVudC5iaWdwYXlUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGdldFBheW1lbnRUb2tlbiB9ID0gdGhpcy5nZXRCcmFpbnRyZWVDYXJkQ29tcG9uZW50T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHBheW1lbnRUb2tlbiA9IGF3YWl0IGdldFBheW1lbnRUb2tlbih7XG4gICAgICAgICAgICBuYW1lOiB7IGZ1bGxOYW1lIH0sXG4gICAgICAgICAgICBiaWxsaW5nQWRkcmVzczogdGhpcy5tYXBUb1BheVBhbEFkZHJlc3MoYmlsbGluZ0FkZHJlc3MpLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBiaW5HdWVzdCA9IHBheW1lbnRUb2tlbi5wYXltZW50U291cmNlLmNhcmQ/LmJpbkRldGFpbHM/LmJpbiB8fCAnJztcbiAgICAgICAgY29uc3QgdGhyZWVEU1Rva2VuID1cbiAgICAgICAgICAgIHRoaXMuaXMzRFNFbmFibGVkICYmIGlzVGhyZWVEU0V4cGVyaW1lbnRFbmFibGVkXG4gICAgICAgICAgICAgICAgPyBhd2FpdCB0aGlzLmdldDNEUyhwYXltZW50VG9rZW4uaWQsIGJpbkd1ZXN0KVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgZGV2aWNlU2Vzc2lvbklkLFxuICAgICAgICAgICAgICAgIG5vbmNlOiB0aHJlZURTVG9rZW4gfHwgcGF5bWVudFRva2VuLmlkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAzRFNcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGdldDNEUyhub25jZTogc3RyaW5nLCBiaW46IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHRocmVlRFNlY3VyZSA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2RrLmdldEJyYWludHJlZVRocmVlRFMoKTtcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBzdGF0ZS5nZXRPcmRlck9yVGhyb3coKTtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB2b2lkIHRocmVlRFNlY3VyZS52ZXJpZnlDYXJkKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBvcmRlcj8ub3JkZXJBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlLFxuICAgICAgICAgICAgICAgICAgICBiaW4sXG4gICAgICAgICAgICAgICAgICAgIG9uTG9va3VwQ29tcGxldGU6IChfZGF0YSwgbmV4dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyZWVEU2VjdXJlLm9uKCdjdXN0b21lci1jYW5jZWxlZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXJyb3IobmV3IFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgIHZlcmlmeUVycm9yOiBCcmFpbnRyZWUzRFNWZXJpZnlDYXJkRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEJyYWludHJlZTNEU1ZlcmlmeUNhcmRQYXlsb2FkLFxuICAgICAgICAgICAgICAgICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlFcnJvciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5RXJyb3IuY29kZSA9PT0gJ1RIUkVFRFNfVkVSSUZZX0NBUkRfQ0FOQ0VMRURfQllfTUVSQ0hBTlQnXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXJyb3IobmV3IFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShwYXlsb2FkLm5vbmNlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBNYXBwZXIgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXBUb1BheVBhbEFkZHJlc3MoYWRkcmVzcz86IEFkZHJlc3MpOiBCcmFpbnRyZWVGYXN0bGFuZUFkZHJlc3Mge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RyZWV0QWRkcmVzczogYWRkcmVzcz8uYWRkcmVzczEgfHwgJycsXG4gICAgICAgICAgICBsb2NhbGl0eTogYWRkcmVzcz8uY2l0eSB8fCAnJyxcbiAgICAgICAgICAgIHJlZ2lvbjogYWRkcmVzcz8uc3RhdGVPclByb3ZpbmNlQ29kZSB8fCBhZGRyZXNzPy5zdGF0ZU9yUHJvdmluY2UgfHwgJycsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzPy5wb3N0YWxDb2RlIHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGVBbHBoYTI6IGFkZHJlc3M/LmNvdW50cnlDb2RlIHx8ICcnLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogT3RoZXIgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBzaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3coKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBjdXN0b21lciA9IHN0YXRlLmdldEN1c3RvbWVyT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwYXltZW50UHJvdmlkZXJDdXN0b21lciA9IHN0YXRlLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCk7XG4gICAgICAgIGNvbnN0IGJyYWludHJlZVBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gaXNCcmFpbnRyZWVBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIoXG4gICAgICAgICAgICBwYXltZW50UHJvdmlkZXJDdXN0b21lcixcbiAgICAgICAgKVxuICAgICAgICAgICAgPyBwYXltZW50UHJvdmlkZXJDdXN0b21lclxuICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZVNlc3Npb25JZCA9IHRoaXMuYnJhaW50cmVlRmFzdGxhbmVVdGlscy5nZXRTZXNzaW9uSWRGcm9tQ29va2llcygpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFjdXN0b21lci5pc0d1ZXN0IHx8XG4gICAgICAgICAgICBicmFpbnRyZWVQYXltZW50UHJvdmlkZXJDdXN0b21lcj8uYXV0aGVudGljYXRpb25TdGF0ZSA9PT1cbiAgICAgICAgICAgICAgICBCcmFpbnRyZWVGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUuQ0FOQ0VMRURcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgIWJyYWludHJlZVBheW1lbnRQcm92aWRlckN1c3RvbWVyPy5hdXRoZW50aWNhdGlvblN0YXRlICYmXG4gICAgICAgICAgICBwYXlwYWxGYXN0bGFuZVNlc3Npb25JZCA9PT0gY2FydC5pZFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QnJhaW50cmVlQ2FyZENvbXBvbmVudE9yVGhyb3coKSB7XG4gICAgICAgIGlmICghdGhpcy5icmFpbnRyZWVDYXJkQ29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmJyYWludHJlZUNhcmRDb21wb25lbnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxJbnN0cnVtZW50cygpOiBDYXJkSW5zdHJ1bWVudFtdIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgPSBzdGF0ZS5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lck9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgYnJhaW50cmVlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgPSBpc0JyYWludHJlZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lcihcbiAgICAgICAgICAgIHBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuICAgICAgICApXG4gICAgICAgICAgICA/IHBheW1lbnRQcm92aWRlckN1c3RvbWVyXG4gICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgIHJldHVybiBicmFpbnRyZWVQYXltZW50UHJvdmlkZXJDdXN0b21lci5pbnN0cnVtZW50cyB8fCBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJyYWludHJlZSBGYXN0bGFuZSBpbnN0cnVtZW50IGNoYW5nZVxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVCcmFpbnRyZWVTdG9yZWRJbnN0cnVtZW50Q2hhbmdlKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICk6IFByb21pc2U8Q2FyZEluc3RydW1lbnQgfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgY29uc3QgcGF5cGFsQXhvU2RrID0gdGhpcy5icmFpbnRyZWVGYXN0bGFuZVV0aWxzLmdldEJyYWludHJlZUZhc3RsYW5lT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHsgc2VsZWN0aW9uQ2hhbmdlZCwgc2VsZWN0ZWRDYXJkIH0gPSBhd2FpdCBwYXlwYWxBeG9TZGsucHJvZmlsZS5zaG93Q2FyZFNlbGVjdG9yKCk7XG5cbiAgICAgICAgaWYgKHNlbGVjdGlvbkNoYW5nZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50UHJvdmlkZXJDdXN0b21lciA9IHN0YXRlLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCk7XG4gICAgICAgICAgICBjb25zdCBicmFpbnRyZWVGYXN0bGFuZUN1c3RvbWVyID0gaXNCcmFpbnRyZWVBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIoXG4gICAgICAgICAgICAgICAgcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgPyBwYXltZW50UHJvdmlkZXJDdXN0b21lclxuICAgICAgICAgICAgICAgIDoge307XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5zdHJ1bWVudHMgPSB0aGlzLmJyYWludHJlZUZhc3RsYW5lVXRpbHMubWFwUGF5UGFsVG9CY0luc3RydW1lbnQoXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgW3NlbGVjdGVkQ2FyZF0sXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRJbnN0cnVtZW50cyAmJiBzZWxlY3RlZEluc3RydW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe1xuICAgICAgICAgICAgICAgICAgICAuLi5icmFpbnRyZWVGYXN0bGFuZUN1c3RvbWVyLFxuICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50czogWy4uLnNlbGVjdGVkSW5zdHJ1bWVudHNdLFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkSW5zdHJ1bWVudHNbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbiIsImludGVyZmFjZSBDb29raWVPcHRpb25zIHtcbiAgICBleHBpcmVzPzogRGF0ZTtcbiAgICBwYXRoPzogc3RyaW5nO1xuICAgIGRvbWFpbj86IHN0cmluZztcbiAgICBzZWN1cmU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb29raWVTdG9yYWdlIHtcbiAgICBzdGF0aWMgZ2V0KG5hbWU6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBjb25zdCBjb29raWVLZXkgPSBgJHtlbmNvZGVVUklDb21wb25lbnQoYCR7bmFtZX1gKX09YDtcbiAgICAgICAgY29uc3QgY29va2llID0gZG9jdW1lbnQuY29va2llO1xuXG4gICAgICAgIGxldCB2YWx1ZSA9IG51bGw7XG5cbiAgICAgICAgY29uc3QgZmlyc3RJbmRleCA9IGNvb2tpZS5pbmRleE9mKGNvb2tpZUtleSk7XG5cbiAgICAgICAgaWYgKGZpcnN0SW5kZXggPiAtMSkge1xuICAgICAgICAgICAgbGV0IGxhc3RJbmRleCA9IGNvb2tpZS5pbmRleE9mKCc7JywgZmlyc3RJbmRleCk7XG5cbiAgICAgICAgICAgIGlmIChsYXN0SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gY29va2llLmxlbmd0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFsdWUgPSBkZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZyhmaXJzdEluZGV4ICsgY29va2llS2V5Lmxlbmd0aCwgbGFzdEluZGV4KSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgc3RhdGljIHNldChuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIG9wdGlvbnM6IENvb2tpZU9wdGlvbnMgPSB7IHNlY3VyZTogdHJ1ZSB9KSB7XG4gICAgICAgIGxldCBjb29raWVUZXh0ID0gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcblxuICAgICAgICBjb25zdCB7IGV4cGlyZXMsIHBhdGgsIGRvbWFpbiwgc2VjdXJlIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmIChleHBpcmVzKSB7XG4gICAgICAgICAgICBjb29raWVUZXh0ICs9IGA7IGV4cGlyZXM9JHtleHBpcmVzLnRvVVRDU3RyaW5nKCl9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAvLyBpbmZvOiBkZWZhdWx0IGNvb2tpZSBleHBpcmF0aW9uIHRpbWUgYWZ0ZXIgc2V0dXBcbiAgICAgICAgICAgIGNvbnN0IG1pbnV0ZXMgPSA2MDtcblxuICAgICAgICAgICAgbm93LnNldFRpbWUobm93LmdldFRpbWUoKSArIG1pbnV0ZXMgKiA2MCAqIDEwMDApO1xuXG4gICAgICAgICAgICBjb29raWVUZXh0ICs9IGA7IGV4cGlyZXM9JHtub3cudG9VVENTdHJpbmcoKX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgcGF0aD0ke3BhdGh9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgZG9tYWluPSR7ZG9tYWlufWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VjdXJlKSB7XG4gICAgICAgICAgICBjb29raWVUZXh0ICs9ICc7IHNlY3VyZSc7XG4gICAgICAgIH1cblxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWVUZXh0O1xuICAgIH1cblxuICAgIHN0YXRpYyByZW1vdmUobmFtZTogc3RyaW5nLCBvcHRpb25zPzogQ29va2llT3B0aW9ucykge1xuICAgICAgICBDb29raWVTdG9yYWdlLnNldChuYW1lLCAnJywgeyBleHBpcmVzOiBuZXcgRGF0ZSgwKSwgLi4ub3B0aW9ucyB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc0VxdWFsLCBvbWl0IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVGYXN0bGFuZSxcbiAgICBCcmFpbnRyZWVGYXN0bGFuZUFkZHJlc3MsXG4gICAgQnJhaW50cmVlRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLFxuICAgIEJyYWludHJlZUZhc3RsYW5lUHJvZmlsZURhdGEsXG4gICAgQnJhaW50cmVlRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4gICAgQnJhaW50cmVlRmFzdGxhbmVWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBCcmFpbnRyZWVJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgQnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5pbXBvcnQge1xuICAgIENhcmRJbnN0cnVtZW50LFxuICAgIEN1c3RvbWVyQWRkcmVzcyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG4gICAgVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBDb29raWVTdG9yYWdlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9zdG9yYWdlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJhaW50cmVlRmFzdGxhbmVVdGlscyB7XG4gICAgcHJpdmF0ZSBicmFpbnRyZWVGYXN0bGFuZT86IEJyYWludHJlZUZhc3RsYW5lO1xuICAgIHByaXZhdGUgbWV0aG9kSWQ/OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJyYWludHJlZUludGVncmF0aW9uU2VydmljZTogQnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGdldERldmljZVNlc3Npb25JZCgpOiBQcm9taXNlPHN0cmluZyB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBjb25zdCBjYXJ0ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydCgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5nZXRTZXNzaW9uSWQoY2FydD8uaWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogSW5pdGlhbGl6YXRpb24gbWV0aG9kXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBpbml0aWFsaXplQnJhaW50cmVlRmFzdGxhbmVPclRocm93KFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBzdHlsZXM/OiBCcmFpbnRyZWVGYXN0bGFuZVN0eWxlc09wdGlvbixcbiAgICApIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnQoKTtcbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiwgY29uZmlnIH0gPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFjbGllbnRUb2tlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tZXRob2RJZCA9IG1ldGhvZElkO1xuXG4gICAgICAgIHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmluaXRpYWxpemUoY2xpZW50VG9rZW4pO1xuXG4gICAgICAgIHRoaXMuYnJhaW50cmVlRmFzdGxhbmUgPSBhd2FpdCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5nZXRCcmFpbnRyZWVGYXN0bGFuZShcbiAgICAgICAgICAgIGNhcnQ/LmlkLFxuICAgICAgICAgICAgY29uZmlnLnRlc3RNb2RlLFxuICAgICAgICAgICAgc3R5bGVzLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGdldEJyYWludHJlZUZhc3RsYW5lT3JUaHJvdygpOiBCcmFpbnRyZWVGYXN0bGFuZSB7XG4gICAgICAgIGlmICghdGhpcy5icmFpbnRyZWVGYXN0bGFuZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5icmFpbnRyZWVGYXN0bGFuZTtcbiAgICB9XG5cbiAgICBnZXRCcmFpbnRyZWVGYXN0bGFuZUNvbXBvbmVudE9yVGhyb3coKTogQnJhaW50cmVlRmFzdGxhbmVbJ0Zhc3RsYW5lQ2FyZENvbXBvbmVudCddIHtcbiAgICAgICAgY29uc3QgYnJhaW50cmVlRmFzdGxhbmUgPSB0aGlzLmdldEJyYWludHJlZUZhc3RsYW5lT3JUaHJvdygpO1xuXG4gICAgICAgIHJldHVybiBicmFpbnRyZWVGYXN0bGFuZS5GYXN0bGFuZUNhcmRDb21wb25lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBBdXRoZW50aWNhdGlvbiBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIC8vIFJlbW92ZSB0aGlzIHJ1bGUgZGlzYWJsaW5nIGFmdGVyIG1ldGhvZCByZWZhY3RvclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG4gICAgYXN5bmMgcnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhcbiAgICAgICAgZW1haWw/OiBzdHJpbmcsXG4gICAgICAgIHNob3VsZFNldFNoaXBwaW5nT3B0aW9uPzogYm9vbGVhbixcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZElkID0gdGhpcy5nZXRNZXRob2RJZE9yVGhyb3coKTtcbiAgICAgICAgICAgIGNvbnN0IGJyYWludHJlZUZhc3RsYW5lID0gdGhpcy5nZXRCcmFpbnRyZWVGYXN0bGFuZU9yVGhyb3coKTtcbiAgICAgICAgICAgIGNvbnN0IHsgbG9va3VwQ3VzdG9tZXJCeUVtYWlsLCB0cmlnZ2VyQXV0aGVudGljYXRpb25GbG93IH0gPSBicmFpbnRyZWVGYXN0bGFuZS5pZGVudGl0eTtcblxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBzdGF0ZS5nZXRDdXN0b21lcigpO1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzcygpO1xuICAgICAgICAgICAgY29uc3QgeyBpc0Zhc3RsYW5lU2hpcHBpbmdPcHRpb25BdXRvU2VsZWN0RW5hYmxlZCB9ID1cbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCcmFpbnRyZWVJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKVxuICAgICAgICAgICAgICAgICAgICAuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgICAgICBjb25zdCBjdXN0b21lckVtYWlsID0gZW1haWwgfHwgY3VzdG9tZXI/LmVtYWlsIHx8IGJpbGxpbmdBZGRyZXNzPy5lbWFpbCB8fCAnJztcblxuICAgICAgICAgICAgY29uc3QgeyBjdXN0b21lckNvbnRleHRJZCB9ID0gYXdhaXQgbG9va3VwQ3VzdG9tZXJCeUVtYWlsKGN1c3RvbWVyRW1haWwpO1xuXG4gICAgICAgICAgICBpZiAoIWN1c3RvbWVyQ29udGV4dElkKSB7XG4gICAgICAgICAgICAgICAgLy8gSW5mbzogd2Ugc2hvdWxkIGNsZWFuIHVwIHByZXZpb3VzIGV4cGVyaWVuY2Ugd2l0aCBkZWZhdWx0IGRhdGEgYW5kIHJlbGF0ZWQgYXV0aGVudGljYXRpb25TdGF0ZVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcih7XG4gICAgICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGU6IEJyYWludHJlZUZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZS5VTlJFQ09HTklaRUQsXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3NlczogW10sXG4gICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnRzOiBbXSxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVNlc3Npb25JZFRvQ29va2llcyhjYXJ0LmlkKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgeyBhdXRoZW50aWNhdGlvblN0YXRlLCBwcm9maWxlRGF0YSB9ID0gYXdhaXQgdHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdyhcbiAgICAgICAgICAgICAgICBjdXN0b21lckNvbnRleHRJZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBob25lTnVtYmVyID0gcHJvZmlsZURhdGE/LnNoaXBwaW5nQWRkcmVzcz8ucGhvbmVOdW1iZXIgfHwgJyc7XG5cbiAgICAgICAgICAgIGlmIChhdXRoZW50aWNhdGlvblN0YXRlID09PSBCcmFpbnRyZWVGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUuQ0FOQ0VMRUQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe1xuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlLFxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50czogW10sXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVNlc3Npb25JZEZyb21Db29raWVzKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzc2VzID1cbiAgICAgICAgICAgICAgICB0aGlzLm1hcFBheVBhbFRvQmNBZGRyZXNzKFtwcm9maWxlRGF0YS5zaGlwcGluZ0FkZHJlc3NdLCBbcGhvbmVOdW1iZXJdKSB8fCBbXTtcbiAgICAgICAgICAgIGNvbnN0IHBheXBhbEJpbGxpbmdBZGRyZXNzID0gdGhpcy5nZXRQYXlQYWxCaWxsaW5nQWRkcmVzc2VzKHByb2ZpbGVEYXRhKTtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzZXMgPSBwYXlwYWxCaWxsaW5nQWRkcmVzc1xuICAgICAgICAgICAgICAgID8gdGhpcy5tYXBQYXlQYWxUb0JjQWRkcmVzcyhbcGF5cGFsQmlsbGluZ0FkZHJlc3NdLCBbcGhvbmVOdW1iZXJdKVxuICAgICAgICAgICAgICAgIDogW107XG4gICAgICAgICAgICBjb25zdCBpbnN0cnVtZW50cyA9IHByb2ZpbGVEYXRhLmNhcmRcbiAgICAgICAgICAgICAgICA/IHRoaXMubWFwUGF5UGFsVG9CY0luc3RydW1lbnQobWV0aG9kSWQsIFtwcm9maWxlRGF0YS5jYXJkXSlcbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICAgICAgY29uc3QgYWRkcmVzc2VzID0gdGhpcy5tZXJnZVNoaXBwaW5nQW5kQmlsbGluZ0FkZHJlc3NlcyhcbiAgICAgICAgICAgICAgICBzaGlwcGluZ0FkZHJlc3NlcyxcbiAgICAgICAgICAgICAgICBiaWxsaW5nQWRkcmVzc2VzLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhpcy5zYXZlU2Vzc2lvbklkVG9Db29raWVzKGNhcnQuaWQpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe1xuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgICAgICAgICAgICAgYWRkcmVzc2VzLFxuICAgICAgICAgICAgICAgIGluc3RydW1lbnRzLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChiaWxsaW5nQWRkcmVzc2VzLmxlbmd0aCA+IDAgJiYgY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzZXNbMF0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBQcmVmaWxsIGJpbGxpbmcgZm9ybSBpZiBvbmx5IGRpZ2l0YWwgaXRlbXMgaW4gY2FydCB3aXRoIGJpbGxpbmcgZGF0YSBhbmQgZmlyc3ROYW1lIGFuZCBsYXN0TmFtZVxuICAgICAgICAgICAgLy8gZnJvbSBzaGlwcGluZ0FkZHJlc3NlcyBiZWNhdXNlIHRoZXJlIGFyZSBlbXB0eSBpbiBiaWxsaW5nXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3Nlcy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgY2FydC5saW5lSXRlbXMuZGlnaXRhbEl0ZW1zLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICBjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBmaXJzdE5hbWUsIGxhc3ROYW1lIH0gPSBhZGRyZXNzZXNbMF07XG4gICAgICAgICAgICAgICAgY29uc3QgZGlnaXRhbEl0ZW1CaWxsaW5nID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5iaWxsaW5nQWRkcmVzc2VzWzBdLFxuICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoZGlnaXRhbEl0ZW1CaWxsaW5nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNoaXBwaW5nQWRkcmVzc2VzLmxlbmd0aCA+IDAgJiYgY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3Nlc1swXSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkU2V0U2hpcHBpbmdPcHRpb24gJiYgaXNGYXN0bGFuZVNoaXBwaW5nT3B0aW9uQXV0b1NlbGVjdEVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRTaGlwcGluZ09wdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IHdlIHNob3VsZCBmaWd1cmUgb3V0IHdoYXQgdG8gZG8gaGVyZVxuICAgICAgICAgICAgLy8gVE9ETzogYmVjYXVzZSB3ZSBzaG91bGQgbm90IHRvIHN0b3AgdGhlIGZsb3cgaWYgdGhlIGVycm9yIG9jY3VycyBvbiBwYXlwYWwgc2lkZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBTZXNzaW9uIGlkIG1hbmFnZW1lbnRcbiAgICAgKlxuICAgICAqL1xuICAgIGdldFNlc3Npb25JZEZyb21Db29raWVzKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBDb29raWVTdG9yYWdlLmdldCgnYmMtZmFzdGxhbmUtc2Vzc2lvbklkJykgfHwgJyc7XG4gICAgfVxuXG4gICAgc2F2ZVNlc3Npb25JZFRvQ29va2llcyhzZXNzaW9uSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBleHBpcmVzID0gbmV3IERhdGUoKTtcblxuICAgICAgICBleHBpcmVzLnNldERhdGUoZXhwaXJlcy5nZXREYXRlKCkgKyAxNCk7IC8vIDIgd2Vla3MgZXhwaXJ5XG5cbiAgICAgICAgQ29va2llU3RvcmFnZS5zZXQoJ2JjLWZhc3RsYW5lLXNlc3Npb25JZCcsIHNlc3Npb25JZCwge1xuICAgICAgICAgICAgZXhwaXJlcyxcbiAgICAgICAgICAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlU2Vzc2lvbklkRnJvbUNvb2tpZXMoKTogdm9pZCB7XG4gICAgICAgIENvb2tpZVN0b3JhZ2UucmVtb3ZlKCdiYy1mYXN0bGFuZS1zZXNzaW9uSWQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheVBhbCB0byBCQyBkYXRhIG1hcHBlcnNcbiAgICAgKlxuICAgICAqICovXG4gICAgbWFwUGF5UGFsVG9CY0luc3RydW1lbnQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGluc3RydW1lbnRzPzogQnJhaW50cmVlRmFzdGxhbmVWYXVsdGVkSW5zdHJ1bWVudFtdLFxuICAgICk6IENhcmRJbnN0cnVtZW50W10gfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoIWluc3RydW1lbnRzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5zdHJ1bWVudHMubWFwKChpbnN0cnVtZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGlkLCBwYXltZW50U291cmNlIH0gPSBpbnN0cnVtZW50O1xuICAgICAgICAgICAgY29uc3QgeyBicmFuZCwgZXhwaXJ5LCBsYXN0RGlnaXRzLCBiaW5EZXRhaWxzIH0gPSBwYXltZW50U291cmNlLmNhcmQ7XG5cbiAgICAgICAgICAgIGNvbnN0IFtleHBpcnlZZWFyLCBleHBpcnlNb250aF0gPSBleHBpcnkuc3BsaXQoJy0nKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBiaWdwYXlUb2tlbjogaWQsXG4gICAgICAgICAgICAgICAgYnJhbmQsXG4gICAgICAgICAgICAgICAgZGVmYXVsdEluc3RydW1lbnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGV4cGlyeU1vbnRoLFxuICAgICAgICAgICAgICAgIGV4cGlyeVllYXIsXG4gICAgICAgICAgICAgICAgaWluOiBiaW5EZXRhaWxzPy5iaW4gfHwgJycsXG4gICAgICAgICAgICAgICAgbGFzdDQ6IGxhc3REaWdpdHMsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwcm92aWRlcjogbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2NhcmQnLFxuICAgICAgICAgICAgICAgIHVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvbk1vZGU6IFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUuUEFOLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYXBQYXlQYWxUb0JjQWRkcmVzcyhcbiAgICAgICAgYWRkcmVzc2VzPzogQnJhaW50cmVlRmFzdGxhbmVBZGRyZXNzW10sXG4gICAgICAgIHBob25lcz86IHN0cmluZ1tdLFxuICAgICk6IEN1c3RvbWVyQWRkcmVzc1tdIHtcbiAgICAgICAgaWYgKCFhZGRyZXNzZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvdW50cmllcyA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENvdW50cmllcygpIHx8IFtdO1xuXG4gICAgICAgIGNvbnN0IGdldENvdW50cnlOYW1lQnlDb3VudHJ5Q29kZSA9IChjb3VudHJ5Q29kZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVkQ291bnRyeSA9IGNvdW50cmllcy5maW5kKChjb3VudHJ5KSA9PiBjb3VudHJ5LmNvZGUgPT09IGNvdW50cnlDb2RlKTtcblxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZWRDb3VudHJ5Py5uYW1lIHx8ICcnO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBhZGRyZXNzZXMubWFwKChhZGRyZXNzKSA9PiAoe1xuICAgICAgICAgICAgaWQ6IERhdGUubm93KCksXG4gICAgICAgICAgICB0eXBlOiAncGF5cGFsLWFkZHJlc3MnLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBhZGRyZXNzLmZpcnN0TmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBhZGRyZXNzLmxhc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgY29tcGFueTogYWRkcmVzcy5jb21wYW55IHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzczE6IGFkZHJlc3Muc3RyZWV0QWRkcmVzcyxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBhZGRyZXNzLmV4dGVuZGVkQWRkcmVzcyB8fCAnJyxcbiAgICAgICAgICAgIGNpdHk6IGFkZHJlc3MubG9jYWxpdHksXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6IGFkZHJlc3MucmVnaW9uLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogYWRkcmVzcy5yZWdpb24sXG4gICAgICAgICAgICBjb3VudHJ5OiBnZXRDb3VudHJ5TmFtZUJ5Q291bnRyeUNvZGUoYWRkcmVzcy5jb3VudHJ5Q29kZUFscGhhMiksXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcy5jb3VudHJ5Q29kZUFscGhhMixcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHBob25lOiAocGhvbmVzICYmIHBob25lc1swXSkgfHwgJycsXG4gICAgICAgICAgICBjdXN0b21GaWVsZHM6IFtdLFxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBHZXQgUGF5UGFsIGJpbGxpbmcgYWRkcmVzc2VzIGZyb20gc3RvcmVkIGJyYWludHJlZSBpbnN0cnVtZW50cyBpbmZvXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgZ2V0UGF5UGFsQmlsbGluZ0FkZHJlc3NlcyhcbiAgICAgICAgcHJvZmlsZURhdGE/OiBCcmFpbnRyZWVGYXN0bGFuZVByb2ZpbGVEYXRhLFxuICAgICk6IEJyYWludHJlZUZhc3RsYW5lQWRkcmVzcyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGNvbnN0IHsgY2FyZCwgbmFtZSB9ID0gcHJvZmlsZURhdGEgfHwge307XG5cbiAgICAgICAgaWYgKCFjYXJkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGZpcnN0TmFtZSwgbGFzdE5hbWUgfSA9IGNhcmQucGF5bWVudFNvdXJjZS5jYXJkLmJpbGxpbmdBZGRyZXNzO1xuICAgICAgICBjb25zdCB7IGZpcnN0TmFtZTogZ2l2ZW5fbmFtZSwgbGFzdE5hbWU6IHN1cm5hbWUgfSA9IG5hbWUgfHwge307XG4gICAgICAgIGNvbnN0IHsgc2hpcHBpbmdBZGRyZXNzIH0gPSBwcm9maWxlRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgYWRkcmVzcyA9IHtcbiAgICAgICAgICAgIC4uLmNhcmQucGF5bWVudFNvdXJjZS5jYXJkLmJpbGxpbmdBZGRyZXNzLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBmaXJzdE5hbWUgfHwgZ2l2ZW5fbmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBsYXN0TmFtZSB8fCBzdXJuYW1lLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGlzQWRkcmVzc0V4aXN0ID1cbiAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzcyAmJlxuICAgICAgICAgICAgaXNFcXVhbCh0aGlzLm5vcm1hbGl6ZUFkZHJlc3MoYWRkcmVzcyksIHRoaXMubm9ybWFsaXplQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpKTtcblxuICAgICAgICByZXR1cm4gaXNBZGRyZXNzRXhpc3QgPyBzaGlwcGluZ0FkZHJlc3MgOiBhZGRyZXNzO1xuICAgIH1cblxuICAgIHByaXZhdGUgbm9ybWFsaXplQWRkcmVzcyhhZGRyZXNzOiBDdXN0b21lckFkZHJlc3MgfCBCcmFpbnRyZWVGYXN0bGFuZUFkZHJlc3MpIHtcbiAgICAgICAgcmV0dXJuIG9taXQoYWRkcmVzcywgWydpZCddKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1lcmdlU2hpcHBpbmdBbmRCaWxsaW5nQWRkcmVzc2VzKFxuICAgICAgICBzaGlwcGluZ0FkZHJlc3NlczogQ3VzdG9tZXJBZGRyZXNzW10sXG4gICAgICAgIGJpbGxpbmdBZGRyZXNzZXM6IEN1c3RvbWVyQWRkcmVzc1tdLFxuICAgICk6IEN1c3RvbWVyQWRkcmVzc1tdIHtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRCaWxsaW5nQWRkcmVzc2VzID0gYmlsbGluZ0FkZHJlc3Nlcy5maWx0ZXIoXG4gICAgICAgICAgICAoYmlsbGluZ0FkZHJlc3M6IEN1c3RvbWVyQWRkcmVzcykgPT5cbiAgICAgICAgICAgICAgICAhc2hpcHBpbmdBZGRyZXNzZXMuc29tZSgoc2hpcHBpbmdBZGRyZXNzOiBDdXN0b21lckFkZHJlc3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzRXF1YWwoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vcm1hbGl6ZUFkZHJlc3Moc2hpcHBpbmdBZGRyZXNzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9ybWFsaXplQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyksXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIFsuLi5zaGlwcGluZ0FkZHJlc3NlcywgLi4uZmlsdGVyZWRCaWxsaW5nQWRkcmVzc2VzXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIE90aGVyXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgZ2V0TWV0aG9kSWRPclRocm93KCk6IHN0cmluZyB7XG4gICAgICAgIGlmICghdGhpcy5tZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwibWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5tZXRob2RJZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNldFNoaXBwaW5nT3B0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjb25zaWdubWVudHMgPSBzdGF0ZS5nZXRDb25zaWdubWVudHMoKSB8fCBbXTtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zID0gY29uc2lnbm1lbnRzWzBdPy5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgfHwgW107XG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24gPSBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMuZmluZChcbiAgICAgICAgICAgIChvcHRpb24pID0+IG9wdGlvbi5pc1JlY29tbWVuZGVkLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChyZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uIHx8IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uID0gcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiB8fCBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnNbMF07XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzZWxlY3RlZE9wdGlvbi5pZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgQnJhaW50cmVlSG9zdFdpbmRvdyxcbiAgICBCcmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgQnJhaW50cmVlU2NyaXB0TG9hZGVyLFxuICAgIEJyYWludHJlZVNkayxcbiAgICBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9icmFpbnRyZWUtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCcmFpbnRyZWVGYXN0bGFuZVBheW1lbnRTdHJhdGVneSBmcm9tICcuL2JyYWludHJlZS1mYXN0bGFuZS1wYXltZW50LXN0cmF0ZWd5JztcbmltcG9ydCBCcmFpbnRyZWVGYXN0bGFuZVV0aWxzIGZyb20gJy4vYnJhaW50cmVlLWZhc3RsYW5lLXV0aWxzJztcblxuY29uc3QgY3JlYXRlQnJhaW50cmVlRmFzdGxhbmVQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgQnJhaW50cmVlRmFzdGxhbmVQYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT4ge1xuICAgIGNvbnN0IGJyYWludHJlZUhvc3RXaW5kb3c6IEJyYWludHJlZUhvc3RXaW5kb3cgPSB3aW5kb3c7XG4gICAgY29uc3QgYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIgPSBuZXcgQnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIocGF5bWVudEludGVncmF0aW9uU2VydmljZSk7XG4gICAgY29uc3QgYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlID0gbmV3IEJyYWludHJlZUludGVncmF0aW9uU2VydmljZShcbiAgICAgICAgbmV3IEJyYWludHJlZVNjcmlwdExvYWRlcihcbiAgICAgICAgICAgIGdldFNjcmlwdExvYWRlcigpLFxuICAgICAgICAgICAgYnJhaW50cmVlSG9zdFdpbmRvdyxcbiAgICAgICAgICAgIGJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyLFxuICAgICAgICApLFxuICAgICAgICBicmFpbnRyZWVIb3N0V2luZG93LFxuICAgICk7XG5cbiAgICBjb25zdCBicmFpbnRyZWVGYXN0bGFuZVV0aWxzID0gbmV3IEJyYWludHJlZUZhc3RsYW5lVXRpbHMoXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGJyYWludHJlZUludGVncmF0aW9uU2VydmljZSxcbiAgICApO1xuXG4gICAgY29uc3QgYnJhaW50cmVlU2NyaXB0TG9hZGVyID0gbmV3IEJyYWludHJlZVNjcmlwdExvYWRlcihcbiAgICAgICAgZ2V0U2NyaXB0TG9hZGVyKCksXG4gICAgICAgIGJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgICAgIGJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyLFxuICAgICk7XG5cbiAgICBjb25zdCBicmFpbnRyZWVTZGsgPSBuZXcgQnJhaW50cmVlU2RrKGJyYWludHJlZVNjcmlwdExvYWRlcik7XG5cbiAgICByZXR1cm4gbmV3IEJyYWludHJlZUZhc3RsYW5lUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBicmFpbnRyZWVGYXN0bGFuZVV0aWxzLFxuICAgICAgICBicmFpbnRyZWVTZGssXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCcmFpbnRyZWVGYXN0bGFuZVBheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdicmFpbnRyZWVhY2NlbGVyYXRlZGNoZWNrb3V0JyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEJyYWludHJlZURhdGFDb2xsZWN0b3IsXG4gICAgQnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIEJyYWludHJlZVNkayxcbiAgICBCcmFpbnRyZWVWaXNhQ2hlY2tvdXQsXG4gICAgVmlzYUNoZWNrb3V0QWRkcmVzcyxcbiAgICBWaXNhQ2hlY2tvdXRQYXltZW50U3VjY2Vzc1BheWxvYWQsXG4gICAgVmlzYUNoZWNrb3V0VG9rZW5pemVkUGF5bG9hZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9icmFpbnRyZWUtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBBZGRyZXNzLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIExlZ2FjeUFkZHJlc3MsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgV2l0aEJyYWludHJlZVZpc2FDaGVja291dFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyB9IGZyb20gJy4vYnJhaW50cmVlLXZpc2EtY2hlY2tvdXQtcGF5bWVudC1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJhaW50cmVlVmlzYUNoZWNrb3V0UGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIHBheW1lbnRNZXRob2Q/OiBQYXltZW50TWV0aG9kPEJyYWludHJlZUluaXRpYWxpemF0aW9uRGF0YT47XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGZvcm1Qb3N0ZXI6IEZvcm1Qb3N0ZXIsXG4gICAgICAgIHByaXZhdGUgYnJhaW50cmVlU2RrOiBCcmFpbnRyZWVTZGssXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aEJyYWludHJlZVZpc2FDaGVja291dFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBicmFpbnRyZWV2aXNhY2hlY2tvdXQ6IHZpc2FDaGVja291dE9wdGlvbnMsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghdmlzYUNoZWNrb3V0T3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJyYWludHJlZXZpc2FjaGVja291dFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICB0aGlzLnBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3QgY2hlY2tvdXQgPSBzdGF0ZS5nZXRDaGVja291dE9yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RvcmVDb25maWcgPSBzdGF0ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuLCBjb25maWcgfSA9IHRoaXMucGF5bWVudE1ldGhvZCB8fCB7fTtcblxuICAgICAgICBpZiAoIWNsaWVudFRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IG9uRXJyb3IgPSBub29wLCBvblBheW1lbnRTZWxlY3QgPSBub29wIH0gPSB2aXNhQ2hlY2tvdXRPcHRpb25zO1xuXG4gICAgICAgIHRoaXMuYnJhaW50cmVlU2RrLmluaXRpYWxpemUoY2xpZW50VG9rZW4pO1xuXG4gICAgICAgIGNvbnN0IGJyYWludHJlZVZpc2FDaGVja291dCA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2RrLmdldEJyYWludHJlZVZpc2FDaGVja291dCgpO1xuXG4gICAgICAgIGNvbnN0IHZpc2FDaGVja291dFNkayA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2RrLmdldFZpc2FDaGVja291dFNkayhjb25maWc/LnRlc3RNb2RlKTtcblxuICAgICAgICBjb25zdCBpbml0T3B0aW9ucyA9IGJyYWludHJlZVZpc2FDaGVja291dC5jcmVhdGVJbml0T3B0aW9ucyh7XG4gICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgIGxvY2FsZTogc3RvcmVDb25maWcuc3RvcmVQcm9maWxlLnN0b3JlTGFuZ3VhZ2UsXG4gICAgICAgICAgICAgICAgc2hpcHBpbmc6IHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdFNoaXBwaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBheW1lbnRSZXF1ZXN0OiB7XG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBzdG9yZUNvbmZpZy5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgICAgIHN1YnRvdGFsOiBTdHJpbmcoY2hlY2tvdXQuc3VidG90YWwpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgdmlzYUNoZWNrb3V0U2RrLmluaXQoaW5pdE9wdGlvbnMpO1xuXG4gICAgICAgIHZpc2FDaGVja291dFNkay5vbihcbiAgICAgICAgICAgICdwYXltZW50LnN1Y2Nlc3MnLFxuICAgICAgICAgICAgKHBheW1lbnRTdWNjZXNzUGF5bG9hZDogVmlzYUNoZWNrb3V0UGF5bWVudFN1Y2Nlc3NQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMudG9rZW5pemVQYXltZW50KGJyYWludHJlZVZpc2FDaGVja291dCwgcGF5bWVudFN1Y2Nlc3NQYXlsb2FkKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gb25QYXltZW50U2VsZWN0KCkpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IG9uRXJyb3IoZXJyb3IpKSxcbiAgICAgICAgKTtcbiAgICAgICAgdmlzYUNoZWNrb3V0U2RrLm9uKCdwYXltZW50LmVycm9yJywgKF8sIGVycm9yKSA9PiBvbkVycm9yKGVycm9yKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBiZWNhdXNlIFwicGF5bG9hZC5wYXltZW50XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnBheW1lbnRNZXRob2Q/LmluaXRpYWxpemF0aW9uRGF0YT8ubm9uY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbm9uY2UgfSA9IHRoaXMucGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7XG4gICAgICAgICAgICAgICAgLi4ucGF5bWVudCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YTogeyBub25jZSB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5icmFpbnRyZWVTZGsuZGVpbml0aWFsaXplKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB0b2tlbml6ZVBheW1lbnQoXG4gICAgICAgIGJyYWludHJlZVZpc2FDaGVja291dDogQnJhaW50cmVlVmlzYUNoZWNrb3V0LFxuICAgICAgICBwYXltZW50OiBWaXNhQ2hlY2tvdXRQYXltZW50U3VjY2Vzc1BheWxvYWQsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICBicmFpbnRyZWVWaXNhQ2hlY2tvdXQudG9rZW5pemUocGF5bWVudCksXG4gICAgICAgICAgICB0aGlzLmJyYWludHJlZVNkay5nZXREYXRhQ29sbGVjdG9yT3JUaHJvdygpLFxuICAgICAgICBdKS50aGVuKChbcGF5bG9hZCwgZGV2aWNlRGF0YV0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nID0gc3RhdGUuZ2V0U2hpcHBpbmdBZGRyZXNzKCk7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3MoKTtcblxuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzcyA9IHRoaXMubWFwVG9WaXNhQ2hlY2tvdXRBZGRyZXNzKHNoaXBwaW5nKSxcbiAgICAgICAgICAgICAgICBiaWxsaW5nQWRkcmVzcyA9IHRoaXMubWFwVG9WaXNhQ2hlY2tvdXRBZGRyZXNzKGJpbGxpbmcpLFxuICAgICAgICAgICAgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc3RGb3JtKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICBiaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRldmljZURhdGEsXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1hcFRvVmlzYUNoZWNrb3V0QWRkcmVzcyhhZGRyZXNzPzogQWRkcmVzcyk6IFZpc2FDaGVja291dEFkZHJlc3Mge1xuICAgICAgICBpZiAoIWFkZHJlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaXJzdE5hbWU6IGFkZHJlc3MuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGFkZHJlc3MubGFzdE5hbWUsXG4gICAgICAgICAgICBwaG9uZU51bWJlcjogYWRkcmVzcy5waG9uZSxcbiAgICAgICAgICAgIHN0cmVldEFkZHJlc3M6IGFkZHJlc3MuYWRkcmVzczEsXG4gICAgICAgICAgICBleHRlbmRlZEFkZHJlc3M6IGFkZHJlc3MuYWRkcmVzczIsXG4gICAgICAgICAgICBsb2NhbGl0eTogYWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgcmVnaW9uOiBhZGRyZXNzLnN0YXRlT3JQcm92aW5jZUNvZGUsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHBvc3RGb3JtKFxuICAgICAgICBwYXltZW50RGF0YTogVmlzYUNoZWNrb3V0VG9rZW5pemVkUGF5bG9hZCxcbiAgICAgICAgZGF0YUNvbGxlY3RvcjogQnJhaW50cmVlRGF0YUNvbGxlY3RvcixcbiAgICApIHtcbiAgICAgICAgY29uc3QgeyB1c2VyRGF0YSwgYmlsbGluZ0FkZHJlc3MsIHNoaXBwaW5nQWRkcmVzcywgZGV0YWlsczogY2FyZEluZm9ybWF0aW9uIH0gPSBwYXltZW50RGF0YTtcbiAgICAgICAgY29uc3QgeyB1c2VyRW1haWwgfSA9IHVzZXJEYXRhO1xuICAgICAgICBjb25zdCB7IGRldmljZURhdGEgfSA9IGRhdGFDb2xsZWN0b3I7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybSgnL2NoZWNrb3V0LnBocCcsIHtcbiAgICAgICAgICAgIHBheW1lbnRfdHlwZTogcGF5bWVudERhdGEudHlwZSxcbiAgICAgICAgICAgIG5vbmNlOiBwYXltZW50RGF0YS5ub25jZSxcbiAgICAgICAgICAgIHByb3ZpZGVyOiAnYnJhaW50cmVldmlzYWNoZWNrb3V0JyxcbiAgICAgICAgICAgIGFjdGlvbjogJ3NldF9leHRlcm5hbF9jaGVja291dCcsXG4gICAgICAgICAgICBkZXZpY2VfZGF0YTogZGV2aWNlRGF0YSxcbiAgICAgICAgICAgIGNhcmRfaW5mb3JtYXRpb246IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB0eXBlOiBjYXJkSW5mb3JtYXRpb24uY2FyZFR5cGUsXG4gICAgICAgICAgICAgICAgbnVtYmVyOiBjYXJkSW5mb3JtYXRpb24ubGFzdFR3byxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgYmlsbGluZ19hZGRyZXNzOiBKU09OLnN0cmluZ2lmeSh0aGlzLmdldEFkZHJlc3ModXNlckVtYWlsLCBiaWxsaW5nQWRkcmVzcykpLFxuICAgICAgICAgICAgc2hpcHBpbmdfYWRkcmVzczogSlNPTi5zdHJpbmdpZnkodGhpcy5nZXRBZGRyZXNzKHVzZXJFbWFpbCwgc2hpcHBpbmdBZGRyZXNzKSksXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QWRkcmVzcyhlbWFpbDogc3RyaW5nLCBhZGRyZXNzOiBWaXNhQ2hlY2tvdXRBZGRyZXNzID0ge30pOiBQYXJ0aWFsPExlZ2FjeUFkZHJlc3M+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgZmlyc3RfbmFtZTogYWRkcmVzcy5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0X25hbWU6IGFkZHJlc3MubGFzdE5hbWUsXG4gICAgICAgICAgICBwaG9uZV9udW1iZXI6IGFkZHJlc3MucGhvbmVOdW1iZXIsXG4gICAgICAgICAgICBhZGRyZXNzX2xpbmVfMTogYWRkcmVzcy5zdHJlZXRBZGRyZXNzLFxuICAgICAgICAgICAgYWRkcmVzc19saW5lXzI6IGFkZHJlc3MuZXh0ZW5kZWRBZGRyZXNzLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcy5sb2NhbGl0eSxcbiAgICAgICAgICAgIHN0YXRlOiBhZGRyZXNzLnJlZ2lvbixcbiAgICAgICAgICAgIGNvdW50cnlfY29kZTogYWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIHBvc3RhbF9jb2RlOiBhZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bik6IG5ldmVyIHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ0JyYWludHJlZUVycm9yJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIEJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgQnJhaW50cmVlU2NyaXB0TG9hZGVyLFxuICAgIEJyYWludHJlZVNkayxcbiAgICBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcixcbiAgICBWaXNhQ2hlY2tvdXRIb3N0V2luZG93LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJyYWludHJlZVZpc2FDaGVja291dFBheW1lbnRTdHJhdGVneSBmcm9tICcuL2JyYWludHJlZS12aXNhLWNoZWNrb3V0LXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCcmFpbnRyZWVWaXNhQ2hlY2tvdXRQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgQnJhaW50cmVlVmlzYUNoZWNrb3V0UGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+IHtcbiAgICBjb25zdCBob3N0V2luZG93OiBWaXNhQ2hlY2tvdXRIb3N0V2luZG93ICYgQnJhaW50cmVlSG9zdFdpbmRvdyA9IHdpbmRvdztcbiAgICBjb25zdCBicmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlciA9IG5ldyBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcihwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKTtcbiAgICBjb25zdCBicmFpbnRyZWVTZGsgPSBuZXcgQnJhaW50cmVlU2RrKFxuICAgICAgICBuZXcgQnJhaW50cmVlU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpLCBob3N0V2luZG93LCBicmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlciksXG4gICAgKTtcblxuICAgIHJldHVybiBuZXcgQnJhaW50cmVlVmlzYUNoZWNrb3V0UGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVGb3JtUG9zdGVyKCksXG4gICAgICAgIGJyYWludHJlZVNkayxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJyYWludHJlZVZpc2FDaGVja291dFBheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdicmFpbnRyZWV2aXNhY2hlY2tvdXQnIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgQnJhaW50cmVlRXJyb3IsXG4gICAgQnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIEJyYWludHJlZVRva2VuaXplUGF5bG9hZCxcbiAgICBCcmFpbnRyZWVWZW5tb0NoZWNrb3V0LFxuICAgIGlzQnJhaW50cmVlRXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYnJhaW50cmVlLXV0aWxzJztcbmltcG9ydCB7XG4gICAgRm9ybWF0dGVkUGF5bG9hZCxcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yLFxuICAgIFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcixcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgUGF5cGFsSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBpc0V4cGVyaW1lbnRFbmFibGVkIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcbmltcG9ydCBCcmFpbnRyZWVWZW5tb1BheW1lbnRTdHJhdGVneUluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJyYWludHJlZVZlbm1vSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYnJhaW50cmVlLXZlbm1vLXBheW1lbnQtc3RyYXRlZ3ktaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJhaW50cmVlVmVubW9QYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgYnJhaW50cmVlVmVubW9DaGVja291dD86IEJyYWludHJlZVZlbm1vQ2hlY2tvdXQ7XG4gICAgcHJpdmF0ZSB2ZW5tb09wdGlvbnM/OiBCcmFpbnRyZWVWZW5tb1BheW1lbnRTdHJhdGVneUluaXRpYWxpemVPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2U6IEJyYWludHJlZUludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQnJhaW50cmVlVmVubW9Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIHRoaXMudmVubW9PcHRpb25zID0gb3B0aW9ucy5icmFpbnRyZWV2ZW5tbztcblxuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUJyYWludHJlZVZlbm1vKHBheW1lbnRNZXRob2QpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUob3JkZXJSZXF1ZXN0OiBPcmRlclJlcXVlc3RCb2R5KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IG9yZGVyUmVxdWVzdDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0gYXdhaXQgdGhpcy5wcmVwYXJlUGF5bWVudERhdGEocGF5bWVudCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocGF5bWVudERhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS50ZWFyZG93bigpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiB1bmtub3duKTogbmV2ZXIge1xuICAgICAgICBpZiAoIWlzQnJhaW50cmVlRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSAnUEFZUEFMX1BPUFVQX0NMT1NFRCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZUJyYWludHJlZVZlbm1vKHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2QpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWNsaWVudFRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBmZWF0dXJlcyA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXM7XG4gICAgICAgIGNvbnN0IGlzQnJhaW50cmVlVmVubW9XZWJGYWxsYmFja1N1cHBvcnQgPSBpc0V4cGVyaW1lbnRFbmFibGVkKFxuICAgICAgICAgICAgZmVhdHVyZXMsXG4gICAgICAgICAgICAnUEFZUEFMLTU0MDYuYnJhaW50cmVlX3Zlbm1vX3dlYl9mYWxsYmFja19zdXBwb3J0JyxcbiAgICAgICAgKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZShjbGllbnRUb2tlbik7XG4gICAgICAgICAgICB0aGlzLmJyYWludHJlZVZlbm1vQ2hlY2tvdXQgPSBhd2FpdCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5nZXRWZW5tb0NoZWNrb3V0KHtcbiAgICAgICAgICAgICAgICAuLi4odGhpcy52ZW5tb09wdGlvbnM/LmFsbG93RGVza3RvcCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8geyBhbGxvd0Rlc2t0b3A6IHRoaXMudmVubW9PcHRpb25zLmFsbG93RGVza3RvcCB9XG4gICAgICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgICAgIC4uLihpc0JyYWludHJlZVZlbm1vV2ViRmFsbGJhY2tTdXBwb3J0XG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVXZWJGYWxsQmFjazogaXNCcmFpbnRyZWVWZW5tb1dlYkZhbGxiYWNrU3VwcG9ydCxcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcHJlcGFyZVBheW1lbnREYXRhKHBheW1lbnQ6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5KTogUHJvbWlzZTxQYXltZW50PiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgbm9uY2UgfSA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KHBheW1lbnQubWV0aG9kSWQpO1xuXG4gICAgICAgIGlmIChub25jZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4ucGF5bWVudCwgcGF5bWVudERhdGE6IHRoaXMuZm9ybWF0dGVkUGF5bG9hZChub25jZSkgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b2tlbml6ZVJlc3VsdCA9IGF3YWl0IHRoaXMuYnJhaW50cmVlVmVubW9Ub2tlbml6ZSgpO1xuICAgICAgICBjb25zdCBzZXNzaW9uSWQgPSBhd2FpdCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5nZXRTZXNzaW9uSWQoKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucGF5bWVudCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB0aGlzLmZvcm1hdHRlZFBheWxvYWQoXG4gICAgICAgICAgICAgICAgdG9rZW5pemVSZXN1bHQubm9uY2UsXG4gICAgICAgICAgICAgICAgdG9rZW5pemVSZXN1bHQuZGV0YWlscy5lbWFpbCxcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgICAgICApLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZm9ybWF0dGVkUGF5bG9hZChcbiAgICAgICAgdG9rZW46IHN0cmluZyxcbiAgICAgICAgZW1haWw/OiBzdHJpbmcsXG4gICAgICAgIHNlc3Npb25JZD86IHN0cmluZyxcbiAgICApOiBGb3JtYXR0ZWRQYXlsb2FkPFBheXBhbEluc3RydW1lbnQ+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICB2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgZGV2aWNlX2luZm86IHNlc3Npb25JZCB8fCBudWxsLFxuICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJyYWludHJlZVZlbm1vVG9rZW5pemUoKTogUHJvbWlzZTxCcmFpbnRyZWVUb2tlbml6ZVBheWxvYWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYnJhaW50cmVlVmVubW9DaGVja291dD8udG9rZW5pemUoXG4gICAgICAgICAgICAgICAgKGVycm9yOiBCcmFpbnRyZWVFcnJvciB8IHVuZGVmaW5lZCwgcGF5bG9hZDogQnJhaW50cmVlVG9rZW5pemVQYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHBheWxvYWQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgQnJhaW50cmVlVmVubW9QYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9icmFpbnRyZWUtdmVubW8tcGF5bWVudC1zdHJhdGVneSc7XG5pbXBvcnQge1xuICAgIEJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgQnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIEJyYWludHJlZVNjcmlwdExvYWRlcixcbiAgICBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9icmFpbnRyZWUtdXRpbHMnO1xuaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5jb25zdCBjcmVhdGVCcmFpbnRyZWVWZW5tb1BheW1lbnRTdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8XG4gICAgQnJhaW50cmVlVmVubW9QYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT4ge1xuICAgIGNvbnN0IGJyYWludHJlZUhvc3RXaW5kb3c6IEJyYWludHJlZUhvc3RXaW5kb3cgPSB3aW5kb3c7XG4gICAgY29uc3Qgc2NyaXB0TG9hZGVyID0gZ2V0U2NyaXB0TG9hZGVyKCk7XG4gICAgY29uc3QgYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIgPSBuZXcgQnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIocGF5bWVudEludGVncmF0aW9uU2VydmljZSk7XG4gICAgY29uc3QgYnJhaW50cmVlU2NyaXB0TG9hZGVyID0gbmV3IEJyYWludHJlZVNjcmlwdExvYWRlcihcbiAgICAgICAgc2NyaXB0TG9hZGVyLFxuICAgICAgICBicmFpbnRyZWVIb3N0V2luZG93LFxuICAgICAgICBicmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcixcbiAgICApO1xuICAgIGNvbnN0IGJyYWludHJlZUludGVncmF0aW9uU2VydmljZSA9IG5ldyBCcmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UoXG4gICAgICAgIGJyYWludHJlZVNjcmlwdExvYWRlcixcbiAgICAgICAgYnJhaW50cmVlSG9zdFdpbmRvdyxcbiAgICApO1xuXG4gICAgcmV0dXJuIG5ldyBCcmFpbnRyZWVWZW5tb1BheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQnJhaW50cmVlVmVubW9QYXltZW50U3RyYXRlZ3ksIFt7IGlkOiAnYnJhaW50cmVldmVubW8nIH1dKTtcbiIsImltcG9ydCB7IHNvbWUgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEJyYWludHJlZUludGVncmF0aW9uU2VydmljZSxcbiAgICBCcmFpbnRyZWVUaHJlZURTZWN1cmVPcHRpb25zLFxuICAgIGlzQnJhaW50cmVlQWNjZWxlcmF0ZWRDaGVja291dEN1c3RvbWVyLFxuICAgIGlzQnJhaW50cmVlUGF5bWVudFJlcXVlc3QzRFNFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9icmFpbnRyZWUtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBBZGRyZXNzLFxuICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UsXG4gICAgaXNSZXF1ZXN0RXJyb3IsXG4gICAgaXNWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIE5vbmNlSW5zdHJ1bWVudCxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnN0cnVtZW50LFxuICAgIFBheW1lbnRJbnN0cnVtZW50TWV0YSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCcmFpbnRyZWVIb3N0ZWRGb3JtIGZyb20gJy4uL2JyYWludHJlZS1ob3N0ZWQtZm9ybS9icmFpbnRyZWUtaG9zdGVkLWZvcm0nO1xuaW1wb3J0IGlzQnJhaW50cmVlRXJyb3IgZnJvbSAnLi4vaXMtYnJhaW50cmVlLWVycm9yJztcblxuaW1wb3J0IHsgV2l0aEJyYWludHJlZUNyZWRpdENhcmRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgfSBmcm9tICcuL2JyYWludHJlZS1jcmVkaXQtY2FyZC1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJyYWludHJlZUNyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgaXMzZHNFbmFibGVkPzogYm9vbGVhbjtcbiAgICBwcml2YXRlIGlzSG9zdGVkRm9ybUluaXRpYWxpemVkPzogYm9vbGVhbjtcbiAgICBwcml2YXRlIGRldmljZVNlc3Npb25JZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheW1lbnRNZXRob2Q/OiBQYXltZW50TWV0aG9kO1xuICAgIHByaXZhdGUgdGhyZWVEU2VjdXJlPzogQnJhaW50cmVlVGhyZWVEU2VjdXJlT3B0aW9ucztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlOiBCcmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYnJhaW50cmVlSG9zdGVkRm9ybTogQnJhaW50cmVlSG9zdGVkRm9ybSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQnJhaW50cmVlQ3JlZGl0Q2FyZFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgZ2F0ZXdheUlkLCBicmFpbnRyZWUgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIHRoaXMucGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuIH0gPSB0aGlzLnBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFjbGllbnRUb2tlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50aHJlZURTZWN1cmUgPSBicmFpbnRyZWU/LnRocmVlRFNlY3VyZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZShjbGllbnRUb2tlbiwgdGhpcy50aHJlZURTZWN1cmUpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChtZXRob2RJZCwgZ2F0ZXdheUlkKSAmJiBicmFpbnRyZWU/LmZvcm0pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJyYWludHJlZUhvc3RlZEZvcm0uaW5pdGlhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgYnJhaW50cmVlLmZvcm0sXG4gICAgICAgICAgICAgICAgICAgIGJyYWludHJlZS51bnN1cHBvcnRlZENhcmRCcmFuZHMsXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudFRva2VuLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmlzSG9zdGVkRm9ybUluaXRpYWxpemVkID0gdGhpcy5icmFpbnRyZWVIb3N0ZWRGb3JtLmlzSW5pdGlhbGl6ZWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5pczNkc0VuYWJsZWQgPSB0aGlzLnBheW1lbnRNZXRob2QuY29uZmlnLmlzM2RzRW5hYmxlZDtcbiAgICAgICAgICAgIHRoaXMuZGV2aWNlU2Vzc2lvbklkID0gYXdhaXQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2Vzc2lvbklkKCk7XG5cbiAgICAgICAgICAgIC8vIFRPRE86IFJlbW92ZSB3aGVuIEJUIEFYTyBBL0IgdGVzdGluZyBpcyBmaW5pc2hlZFxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkSW5pdGlhbGl6ZUJyYWludHJlZUZhc3RsYW5lKCkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVCcmFpbnRyZWVGYXN0bGFuZU9yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShvcmRlclJlcXVlc3Q6IE9yZGVyUmVxdWVzdEJvZHkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gb3JkZXJSZXF1ZXN0O1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc0hvc3RlZEZvcm1Jbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVIb3N0ZWRGb3JtLnZhbGlkYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyQW1vdW50ID0gc3RhdGUuZ2V0T3JkZXJPclRocm93KCkub3JkZXJBbW91bnQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0gdGhpcy5pc0hvc3RlZEZvcm1Jbml0aWFsaXplZFxuICAgICAgICAgICAgICAgID8gYXdhaXQgdGhpcy5wcmVwYXJlSG9zdGVkUGF5bWVudERhdGEocGF5bWVudCwgYmlsbGluZ0FkZHJlc3MsIG9yZGVyQW1vdW50KVxuICAgICAgICAgICAgICAgIDogYXdhaXQgdGhpcy5wcmVwYXJlUGF5bWVudERhdGEocGF5bWVudCwgYmlsbGluZ0FkZHJlc3MsIG9yZGVyQW1vdW50KTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe1xuICAgICAgICAgICAgICAgIC4uLnBheW1lbnQsXG4gICAgICAgICAgICAgICAgcGF5bWVudERhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGVycm9yLCBwYXltZW50LCBvcmRlckFtb3VudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLmlzSG9zdGVkRm9ybUluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UudGVhcmRvd24oKSxcbiAgICAgICAgICAgIHRoaXMuYnJhaW50cmVlSG9zdGVkRm9ybS5kZWluaXRpYWxpemUoKSxcbiAgICAgICAgXSk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pOiBuZXZlciB7XG4gICAgICAgIGlmIChpc0JyYWludHJlZUVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcHJlcGFyZVBheW1lbnREYXRhKFxuICAgICAgICBwYXltZW50OiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICAgICAgYmlsbGluZ0FkZHJlc3M6IEFkZHJlc3MsXG4gICAgICAgIG9yZGVyQW1vdW50OiBudW1iZXIsXG4gICAgKTogUHJvbWlzZTxQYXltZW50SW5zdHJ1bWVudCAmIFBheW1lbnRJbnN0cnVtZW50TWV0YT4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnREYXRhIH0gPSBwYXltZW50O1xuICAgICAgICBjb25zdCBjb21tb25QYXltZW50RGF0YSA9IHsgZGV2aWNlU2Vzc2lvbklkOiB0aGlzLmRldmljZVNlc3Npb25JZCB9O1xuXG4gICAgICAgIGlmICh0aGlzLmlzU3VibWl0dGluZ1dpdGhTdG9yZWRDYXJkKHBheW1lbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmNvbW1vblBheW1lbnREYXRhLFxuICAgICAgICAgICAgICAgIC4uLnBheW1lbnREYXRhLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlIH0gPVxuICAgICAgICAgICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSkgPyBwYXltZW50RGF0YSA6IHt9O1xuXG4gICAgICAgIGNvbnN0IHsgbm9uY2UgfSA9IHRoaXMuc2hvdWxkUGVyZm9ybTNEU1ZlcmlmaWNhdGlvbihwYXltZW50KVxuICAgICAgICAgICAgPyBhd2FpdCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS52ZXJpZnlDYXJkKFxuICAgICAgICAgICAgICAgICAgcGF5bWVudCxcbiAgICAgICAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgb3JkZXJBbW91bnQsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogYXdhaXQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVDYXJkKHBheW1lbnQsIGJpbGxpbmdBZGRyZXNzKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uY29tbW9uUGF5bWVudERhdGEsXG4gICAgICAgICAgICBub25jZSxcbiAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHByZXBhcmVIb3N0ZWRQYXltZW50RGF0YShcbiAgICAgICAgcGF5bWVudDogT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgICAgIGJpbGxpbmdBZGRyZXNzOiBBZGRyZXNzLFxuICAgICAgICBvcmRlckFtb3VudDogbnVtYmVyLFxuICAgICk6IFByb21pc2U8UGF5bWVudEluc3RydW1lbnQgJiBQYXltZW50SW5zdHJ1bWVudE1ldGE+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50RGF0YSB9ID0gcGF5bWVudDtcbiAgICAgICAgY29uc3QgY29tbW9uUGF5bWVudERhdGEgPSB7IGRldmljZVNlc3Npb25JZDogdGhpcy5kZXZpY2VTZXNzaW9uSWQgfTtcblxuICAgICAgICBpZiAodGhpcy5pc1N1Ym1pdHRpbmdXaXRoU3RvcmVkQ2FyZChwYXltZW50KSkge1xuICAgICAgICAgICAgY29uc3QgeyBub25jZSB9ID0gYXdhaXQgdGhpcy5icmFpbnRyZWVIb3N0ZWRGb3JtLnRva2VuaXplRm9yU3RvcmVkQ2FyZFZlcmlmaWNhdGlvbigpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmNvbW1vblBheW1lbnREYXRhLFxuICAgICAgICAgICAgICAgIC4uLnBheW1lbnREYXRhLFxuICAgICAgICAgICAgICAgIG5vbmNlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlIH0gPVxuICAgICAgICAgICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSkgPyBwYXltZW50RGF0YSA6IHt9O1xuXG4gICAgICAgIGNvbnN0IHsgbm9uY2UgfSA9IHRoaXMuc2hvdWxkUGVyZm9ybTNEU1ZlcmlmaWNhdGlvbihwYXltZW50KVxuICAgICAgICAgICAgPyBhd2FpdCB0aGlzLnZlcmlmeUNhcmRXaXRoSG9zdGVkRm9ybShiaWxsaW5nQWRkcmVzcywgb3JkZXJBbW91bnQpXG4gICAgICAgICAgICA6IGF3YWl0IHRoaXMuYnJhaW50cmVlSG9zdGVkRm9ybS50b2tlbml6ZShiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNvbW1vblBheW1lbnREYXRhLFxuICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgbm9uY2UsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB2ZXJpZnlDYXJkV2l0aEhvc3RlZEZvcm0oXG4gICAgICAgIGJpbGxpbmdBZGRyZXNzOiBBZGRyZXNzLFxuICAgICAgICBvcmRlckFtb3VudDogbnVtYmVyLFxuICAgICk6IFByb21pc2U8Tm9uY2VJbnN0cnVtZW50PiB7XG4gICAgICAgIGNvbnN0IHRva2VuaXphdGlvblBheWxvYWQgPSBhd2FpdCB0aGlzLmJyYWludHJlZUhvc3RlZEZvcm0udG9rZW5pemUoYmlsbGluZ0FkZHJlc3MpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5jaGFsbGVuZ2UzRFNWZXJpZmljYXRpb24oXG4gICAgICAgICAgICB0b2tlbml6YXRpb25QYXlsb2FkLFxuICAgICAgICAgICAgb3JkZXJBbW91bnQsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzQWRkaXRpb25hbEFjdGlvbihcbiAgICAgICAgZXJyb3I6IHVua25vd24sXG4gICAgICAgIHBheW1lbnQ6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5LFxuICAgICAgICBvcmRlckFtb3VudDogbnVtYmVyLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhaXNSZXF1ZXN0RXJyb3IoZXJyb3IpIHx8XG4gICAgICAgICAgICAhc29tZShlcnJvci5ib2R5LmVycm9ycywgeyBjb2RlOiAndGhyZWVfZF9zZWN1cmVfcmVxdWlyZWQnIH0pXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgcGF5ZXJfYXV0aF9yZXF1ZXN0OiBzdG9yZWRDcmVkaXRDYXJkTm9uY2UgfSA9XG4gICAgICAgICAgICAgICAgKGlzQnJhaW50cmVlUGF5bWVudFJlcXVlc3QzRFNFcnJvcihlcnJvcikgJiYgZXJyb3IuYm9keS50aHJlZV9kc19yZXN1bHQpIHx8IHt9O1xuICAgICAgICAgICAgY29uc3QgeyBwYXltZW50RGF0YSB9ID0gcGF5bWVudDtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgICAgIGlmICghcGF5bWVudERhdGEgfHwgIWlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ2luc3RydW1lbnRJZCddKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaW5zdHJ1bWVudCA9IHN0YXRlLmdldENhcmRJbnN0cnVtZW50T3JUaHJvdyhwYXltZW50RGF0YS5pbnN0cnVtZW50SWQpO1xuICAgICAgICAgICAgY29uc3QgeyBub25jZSB9ID0gYXdhaXQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuY2hhbGxlbmdlM0RTVmVyaWZpY2F0aW9uKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IHN0b3JlZENyZWRpdENhcmROb25jZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgYmluOiBpbnN0cnVtZW50LmlpbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9yZGVyQW1vdW50LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe1xuICAgICAgICAgICAgICAgIC4uLnBheW1lbnQsXG4gICAgICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlU2Vzc2lvbklkOiB0aGlzLmRldmljZVNlc3Npb25JZCxcbiAgICAgICAgICAgICAgICAgICAgbm9uY2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChtZXRob2RJZD86IHN0cmluZywgZ2F0ZXdheUlkPzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCwgZ2F0ZXdheUlkKTtcblxuICAgICAgICByZXR1cm4gcGF5bWVudE1ldGhvZC5jb25maWcuaXNIb3N0ZWRGb3JtRW5hYmxlZCA9PT0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzU3VibWl0dGluZ1dpdGhTdG9yZWRDYXJkKHBheW1lbnQ6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIShwYXltZW50LnBheW1lbnREYXRhICYmIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudC5wYXltZW50RGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2hvdWxkUGVyZm9ybTNEU1ZlcmlmaWNhdGlvbihwYXltZW50OiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISEodGhpcy5pczNkc0VuYWJsZWQgJiYgIXRoaXMuaXNTdWJtaXR0aW5nV2l0aFN0b3JlZENhcmQocGF5bWVudCkpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IFJlbW92ZSB3aGVuIEJUIEFYTyBBL0IgdGVzdGluZyBpcyBmaW5pc2hlZFxuICAgIHByaXZhdGUgc2hvdWxkSW5pdGlhbGl6ZUJyYWludHJlZUZhc3RsYW5lKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50UHJvdmlkZXJDdXN0b21lciA9IHN0YXRlLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBicmFpbnRyZWVDdXN0b21lciA9IGlzQnJhaW50cmVlQWNjZWxlcmF0ZWRDaGVja291dEN1c3RvbWVyKHBheW1lbnRQcm92aWRlckN1c3RvbWVyKVxuICAgICAgICAgICAgPyBwYXltZW50UHJvdmlkZXJDdXN0b21lclxuICAgICAgICAgICAgOiB7fTtcbiAgICAgICAgY29uc3QgaXNGYXN0bGFuZUVuYWJsZWQ6IGJvb2xlYW4gPVxuICAgICAgICAgICAgdGhpcy5wYXltZW50TWV0aG9kPy5pbml0aWFsaXphdGlvbkRhdGEuaXNBY2NlbGVyYXRlZENoZWNrb3V0RW5hYmxlZDtcblxuICAgICAgICByZXR1cm4gaXNGYXN0bGFuZUVuYWJsZWQgJiYgIWJyYWludHJlZUN1c3RvbWVyPy5hdXRoZW50aWNhdGlvblN0YXRlO1xuICAgIH1cblxuICAgIC8vIFRPRE86IFJlbW92ZSB3aGVuIEJUIEFYTyBBL0IgdGVzdGluZyBpcyBmaW5pc2hlZFxuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZUJyYWludHJlZUZhc3RsYW5lT3JUaHJvdyhtZXRob2RJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuLCBjb25maWcgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFjbGllbnRUb2tlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZShjbGllbnRUb2tlbiwgdGhpcy50aHJlZURTZWN1cmUpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEJyYWludHJlZUZhc3RsYW5lKGNhcnQuaWQsIGNvbmZpZy50ZXN0TW9kZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vLyBIYXZlIHRvIHVzZSBgYXNgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzczOTg3MDQ0L3R5cGVndWFyZGluZy1hbi11bmtub3duLW5lc3RlZC1vYmplY3Qgc2hvdWxkIGJlIGZpeGVkIGluIDQuOCtcbmNvbnN0IGlzUmVxdWVzdEVycm9yID0gKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVxdWVzdEVycm9yID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnYm9keScgaW4gZXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpc1JlcXVlc3RFcnJvcjtcbiIsImV4cG9ydCBpbnRlcmZhY2UgQnJhaW50cmVlUGF5bWVudDNEU1JlcXVlc3RFcnJvcnMge1xuICAgIGNvZGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCcmFpbnRyZWVQYXltZW50UmVxdWVzdDNEU0Vycm9yIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYm9keToge1xuICAgICAgICBzdGF0dXM6IHN0cmluZztcbiAgICAgICAgdGhyZWVfZHNfcmVzdWx0OiB7XG4gICAgICAgICAgICBwYXllcl9hdXRoX3JlcXVlc3Q6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgZXJyb3JzOiBCcmFpbnRyZWVQYXltZW50M0RTUmVxdWVzdEVycm9yc1tdO1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQnJhaW50cmVlUGF5bWVudFJlcXVlc3QzRFNFcnJvcihcbiAgICBlcnJvcjogdW5rbm93bixcbik6IGVycm9yIGlzIEJyYWludHJlZVBheW1lbnRSZXF1ZXN0M0RTRXJyb3Ige1xuICAgIGlmICh0eXBlb2YgZXJyb3IgIT09ICdvYmplY3QnIHx8IGVycm9yID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zICovXG4gICAgcmV0dXJuIChcbiAgICAgICAgJ25hbWUnIGluIGVycm9yICYmXG4gICAgICAgICdib2R5JyBpbiBlcnJvciAmJlxuICAgICAgICAnc3RhdHVzJyBpbiAoZXJyb3IgYXMgQnJhaW50cmVlUGF5bWVudFJlcXVlc3QzRFNFcnJvcikuYm9keSAmJlxuICAgICAgICAndGhyZWVfZHNfcmVzdWx0JyBpbiAoZXJyb3IgYXMgQnJhaW50cmVlUGF5bWVudFJlcXVlc3QzRFNFcnJvcikuYm9keSAmJlxuICAgICAgICAncGF5ZXJfYXV0aF9yZXF1ZXN0JyBpbiAoZXJyb3IgYXMgQnJhaW50cmVlUGF5bWVudFJlcXVlc3QzRFNFcnJvcikuYm9keS50aHJlZV9kc19yZXN1bHQgJiZcbiAgICAgICAgJ2Vycm9ycycgaW4gKGVycm9yIGFzIEJyYWludHJlZVBheW1lbnRSZXF1ZXN0M0RTRXJyb3IpLmJvZHlcbiAgICApO1xufVxuIiwiaW1wb3J0IHsgQnJhaW50cmVlRm9ybUZpZWxkc01hcCwgQnJhaW50cmVlU3RvcmVkQ2FyZEZpZWxkc01hcCB9IGZyb20gJy4uL2luZGV4JztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzQnJhaW50cmVlRm9ybUZpZWxkc01hcChcbiAgICBmaWVsZHM6IEJyYWludHJlZUZvcm1GaWVsZHNNYXAgfCBCcmFpbnRyZWVTdG9yZWRDYXJkRmllbGRzTWFwLFxuKTogZmllbGRzIGlzIEJyYWludHJlZUZvcm1GaWVsZHNNYXAge1xuICAgIHJldHVybiAnY2FyZE51bWJlcicgaW4gZmllbGRzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCcmFpbnRyZWVTdG9yZWRDYXJkRmllbGRzTWFwKFxuICAgIGZpZWxkczogQnJhaW50cmVlRm9ybUZpZWxkc01hcCB8IEJyYWludHJlZVN0b3JlZENhcmRGaWVsZHNNYXAsXG4pOiBmaWVsZHMgaXMgQnJhaW50cmVlU3RvcmVkQ2FyZEZpZWxkc01hcCB7XG4gICAgcmV0dXJuICEhKFxuICAgICAgICBPYmplY3Qua2V5cyhmaWVsZHMpLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtYXNzZXJ0aW9uc1xuICAgICAgICAoKGZpZWxkcyBhcyBCcmFpbnRyZWVTdG9yZWRDYXJkRmllbGRzTWFwKS5jYXJkQ29kZVZlcmlmaWNhdGlvbiB8fFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtYXNzZXJ0aW9uc1xuICAgICAgICAgICAgKGZpZWxkcyBhcyBCcmFpbnRyZWVTdG9yZWRDYXJkRmllbGRzTWFwKS5jYXJkTnVtYmVyVmVyaWZpY2F0aW9uKVxuICAgICk7XG59XG4iLCJpbXBvcnQgaXNCcmFpbnRyZWVFcnJvciBmcm9tICcuL2lzLWJyYWludHJlZS1lcnJvcic7XG5pbXBvcnQgeyBCcmFpbnRyZWVIb3N0ZWRGb3JtRXJyb3IgfSBmcm9tICcuLi90eXBlcyc7XG5cbmZ1bmN0aW9uIGlzVmFsaWRJbnZhbGlkRmllbGRLZXlzKGludmFsaWRGaWVsZEtleXM6IHVua25vd24pOiBpbnZhbGlkRmllbGRLZXlzIGlzIHN0cmluZ1tdIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBBcnJheS5pc0FycmF5KGludmFsaWRGaWVsZEtleXMpICYmIGludmFsaWRGaWVsZEtleXMuZXZlcnkoKGtleSkgPT4gdHlwZW9mIGtleSA9PT0gJ3N0cmluZycpXG4gICAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNCcmFpbnRyZWVIb3N0ZWRGb3JtRXJyb3IoXG4gICAgZXJyb3I6IHVua25vd24sXG4pOiBlcnJvciBpcyBCcmFpbnRyZWVIb3N0ZWRGb3JtRXJyb3Ige1xuICAgIGlmICghaXNCcmFpbnRyZWVFcnJvcihlcnJvcikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGV0YWlscyB9ID0gZXJyb3I7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICBkZXRhaWxzID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgKHR5cGVvZiBkZXRhaWxzID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgZGV0YWlscyAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtYXNzZXJ0aW9uc1xuICAgICAgICAgICAgKGRldGFpbHMgYXMgeyBpbnZhbGlkRmllbGRLZXlzPzogdW5rbm93biB9KS5pbnZhbGlkRmllbGRLZXlzID09PSB1bmRlZmluZWQpIHx8XG4gICAgICAgIGlzVmFsaWRJbnZhbGlkRmllbGRLZXlzKGRldGFpbHMpXG4gICAgKTtcbn1cbiIsImltcG9ydCB7IERpY3Rpb25hcnksIGlzRW1wdHksIGlzTmlsLCBvbWl0QnkgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEJSQUlOVFJFRV9TREtfSE9TVEVEX0ZJRUxEU19GSVhfVkVSU0lPTixcbiAgICBCcmFpbnRyZWVCaWxsaW5nQWRkcmVzc1JlcXVlc3REYXRhLFxuICAgIEJyYWludHJlZUNsaWVudCxcbiAgICBCcmFpbnRyZWVGb3JtRXJyb3JEYXRhS2V5cyxcbiAgICBCcmFpbnRyZWVGb3JtRXJyb3JzRGF0YSxcbiAgICBCcmFpbnRyZWVGb3JtRmllbGRzTWFwLFxuICAgIEJyYWludHJlZUZvcm1GaWVsZFN0eWxlcyxcbiAgICBCcmFpbnRyZWVGb3JtRmllbGRTdHlsZXNNYXAsXG4gICAgQnJhaW50cmVlRm9ybUZpZWxkVHlwZSxcbiAgICBCcmFpbnRyZWVGb3JtRmllbGRWYWxpZGF0ZUVycm9yRGF0YSxcbiAgICBCcmFpbnRyZWVGb3JtRmllbGRWYWxpZGF0ZUV2ZW50RGF0YSxcbiAgICBCcmFpbnRyZWVGb3JtT3B0aW9ucyxcbiAgICBCcmFpbnRyZWVIb3N0ZWRGaWVsZHMsXG4gICAgQnJhaW50cmVlSG9zdGVkRmllbGRzQ3JlYXRvckNvbmZpZyxcbiAgICBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNTdGF0ZSxcbiAgICBCcmFpbnRyZWVIb3N0ZWRGb3JtRXJyb3IsXG4gICAgQnJhaW50cmVlU2NyaXB0TG9hZGVyLFxuICAgIEJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyLFxuICAgIEJyYWludHJlZVN0b3JlZENhcmRGaWVsZHNNYXAsXG4gICAgaXNCcmFpbnRyZWVGb3JtRmllbGRzTWFwLFxuICAgIGlzQnJhaW50cmVlSG9zdGVkRm9ybUVycm9yLFxuICAgIGlzQnJhaW50cmVlU3VwcG9ydGVkQ2FyZEJyYW5kLFxuICAgIFRva2VuaXphdGlvblBheWxvYWQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYnJhaW50cmVlLXV0aWxzJztcbmltcG9ydCB7XG4gICAgQWRkcmVzcyxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yLFxuICAgIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmVudW0gQnJhaW50cmVlSG9zdGVkRm9ybVR5cGUge1xuICAgIENyZWRpdENhcmQsXG4gICAgU3RvcmVkQ2FyZFZlcmlmaWNhdGlvbixcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJhaW50cmVlSG9zdGVkRm9ybSB7XG4gICAgcHJpdmF0ZSBjYXJkRmllbGRzPzogQnJhaW50cmVlSG9zdGVkRmllbGRzO1xuICAgIHByaXZhdGUgZm9ybU9wdGlvbnM/OiBCcmFpbnRyZWVGb3JtT3B0aW9ucztcbiAgICBwcml2YXRlIHR5cGU/OiBCcmFpbnRyZWVIb3N0ZWRGb3JtVHlwZTtcbiAgICBwcml2YXRlIGNsaWVudD86IFByb21pc2U8QnJhaW50cmVlQ2xpZW50PjtcbiAgICBwcml2YXRlIGNsaWVudFRva2VuPzogc3RyaW5nO1xuICAgIHByaXZhdGUgaXNJbml0aWFsaXplZEhvc3RlZEZvcm0gPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGJyYWludHJlZVNjcmlwdExvYWRlcjogQnJhaW50cmVlU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIGJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyOiBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBCcmFpbnRyZWVGb3JtT3B0aW9ucyxcbiAgICAgICAgdW5zdXBwb3J0ZWRDYXJkQnJhbmRzPzogc3RyaW5nW10sXG4gICAgICAgIGNsaWVudFRva2VuPzogc3RyaW5nLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLmNsaWVudFRva2VuID0gY2xpZW50VG9rZW47XG4gICAgICAgIHRoaXMuZm9ybU9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLnR5cGUgPSBpc0JyYWludHJlZUZvcm1GaWVsZHNNYXAob3B0aW9ucy5maWVsZHMpXG4gICAgICAgICAgICA/IEJyYWludHJlZUhvc3RlZEZvcm1UeXBlLkNyZWRpdENhcmRcbiAgICAgICAgICAgIDogQnJhaW50cmVlSG9zdGVkRm9ybVR5cGUuU3RvcmVkQ2FyZFZlcmlmaWNhdGlvbjtcblxuICAgICAgICBjb25zdCBmaWVsZHMgPSB0aGlzLm1hcEZpZWxkT3B0aW9ucyhvcHRpb25zLmZpZWxkcywgdW5zdXBwb3J0ZWRDYXJkQnJhbmRzKTtcblxuICAgICAgICBpZiAoaXNFbXB0eShmaWVsZHMpKSB7XG4gICAgICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWRIb3N0ZWRGb3JtID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FyZEZpZWxkcyA9IGF3YWl0IHRoaXMuY3JlYXRlSG9zdGVkRmllbGRzKHtcbiAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgIHN0eWxlczogb3B0aW9ucy5zdHlsZXMgJiYgdGhpcy5tYXBTdHlsZU9wdGlvbnMob3B0aW9ucy5zdHlsZXMpLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNhcmRGaWVsZHM/Lm9uKCdibHVyJywgdGhpcy5oYW5kbGVCbHVyKTtcbiAgICAgICAgdGhpcy5jYXJkRmllbGRzPy5vbignZm9jdXMnLCB0aGlzLmhhbmRsZUZvY3VzKTtcbiAgICAgICAgdGhpcy5jYXJkRmllbGRzPy5vbignY2FyZFR5cGVDaGFuZ2UnLCB0aGlzLmhhbmRsZUNhcmRUeXBlQ2hhbmdlKTtcbiAgICAgICAgdGhpcy5jYXJkRmllbGRzPy5vbigndmFsaWRpdHlDaGFuZ2UnLCB0aGlzLmhhbmRsZVZhbGlkaXR5Q2hhbmdlKTtcbiAgICAgICAgdGhpcy5jYXJkRmllbGRzPy5vbignaW5wdXRTdWJtaXRSZXF1ZXN0JywgdGhpcy5oYW5kbGVJbnB1dFN1Ym1pdFJlcXVlc3QpO1xuXG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXplZEhvc3RlZEZvcm0gPSB0cnVlO1xuICAgIH1cblxuICAgIGlzSW5pdGlhbGl6ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuaXNJbml0aWFsaXplZEhvc3RlZEZvcm07XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkSG9zdGVkRm9ybSkge1xuICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkSG9zdGVkRm9ybSA9IGZhbHNlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jYXJkRmllbGRzPy50ZWFyZG93bigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFsaWRhdGUoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5jYXJkRmllbGRzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmNhcmRGaWVsZHMuZ2V0U3RhdGUoKTtcblxuICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZEZvcm0oc3RhdGUpKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVZhbGlkaXR5Q2hhbmdlKHN0YXRlKTtcblxuICAgICAgICAgICAgY29uc3QgZXJyb3JzID0gdGhpcy5tYXBWYWxpZGF0aW9uRXJyb3JzKHN0YXRlLmZpZWxkcyk7XG5cbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50SW52YWxpZEZvcm1FcnJvcihlcnJvcnMgYXMgUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHRva2VuaXplKGJpbGxpbmdBZGRyZXNzOiBBZGRyZXNzKTogUHJvbWlzZTxUb2tlbml6YXRpb25QYXlsb2FkPiB7XG4gICAgICAgIGlmICghdGhpcy5jYXJkRmllbGRzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB0aGlzLmNhcmRGaWVsZHMudG9rZW5pemUoXG4gICAgICAgICAgICAgICAgb21pdEJ5KFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiaWxsaW5nQWRkcmVzczogYmlsbGluZ0FkZHJlc3MgJiYgdGhpcy5tYXBCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGlzTmlsLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLmZvcm1PcHRpb25zPy5vblZhbGlkYXRlPy4oeyBpc1ZhbGlkOiB0cnVlLCBlcnJvcnM6IHt9IH0pO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5vbmNlOiBwYXlsb2FkLm5vbmNlLFxuICAgICAgICAgICAgICAgIGJpbjogcGF5bG9hZC5kZXRhaWxzPy5iaW4sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGlzQnJhaW50cmVlSG9zdGVkRm9ybUVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9ycyA9IHRoaXMubWFwVG9rZW5pemVFcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybU9wdGlvbnM/Lm9uVmFsaWRhdGU/Lih7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcnMgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50SW52YWxpZEZvcm1FcnJvcihlcnJvcnMgYXMgUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgdG9rZW5pemVGb3JTdG9yZWRDYXJkVmVyaWZpY2F0aW9uKCk6IFByb21pc2U8VG9rZW5pemF0aW9uUGF5bG9hZD4ge1xuICAgICAgICBpZiAoIXRoaXMuY2FyZEZpZWxkcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgdGhpcy5jYXJkRmllbGRzLnRva2VuaXplKCk7XG5cbiAgICAgICAgICAgIHRoaXMuZm9ybU9wdGlvbnM/Lm9uVmFsaWRhdGU/Lih7IGlzVmFsaWQ6IHRydWUsIGVycm9yczoge30gfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbm9uY2U6IHBheWxvYWQubm9uY2UsXG4gICAgICAgICAgICAgICAgYmluOiBwYXlsb2FkLmRldGFpbHM/LmJpbixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoaXNCcmFpbnRyZWVIb3N0ZWRGb3JtRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JzID0gdGhpcy5tYXBUb2tlbml6ZUVycm9yKGVycm9yLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIGlmIChlcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtT3B0aW9ucz8ub25WYWxpZGF0ZT8uKHsgaXNWYWxpZDogZmFsc2UsIGVycm9ycyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yKGVycm9ycyBhcyBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVIb3N0ZWRGaWVsZHMoXG4gICAgICAgIG9wdGlvbnM6IFBpY2s8QnJhaW50cmVlSG9zdGVkRmllbGRzQ3JlYXRvckNvbmZpZywgJ2ZpZWxkcycgfCAnc3R5bGVzJz4sXG4gICAgKTogUHJvbWlzZTxCcmFpbnRyZWVIb3N0ZWRGaWVsZHM+IHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5nZXRDbGllbnQoKTtcbiAgICAgICAgY29uc3QgaG9zdGVkRmllbGRzID0gYXdhaXQgdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZEhvc3RlZEZpZWxkcygpO1xuXG4gICAgICAgIGNvbnN0IGN1cnJlbnRTZGtWZXJzaW9uID0gdGhpcy5icmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlci5nZXRTREtWZXJzaW9uKCk7XG4gICAgICAgIGNvbnN0IGhvc3RlZEZpZWxkc09wdGlvbnMgPVxuICAgICAgICAgICAgY3VycmVudFNka1ZlcnNpb24gPT09IEJSQUlOVFJFRV9TREtfSE9TVEVEX0ZJRUxEU19GSVhfVkVSU0lPTlxuICAgICAgICAgICAgICAgID8geyAuLi5vcHRpb25zLCBwcmV2ZW50Q3Vyc29ySnVtcHM6IHRydWUgfVxuICAgICAgICAgICAgICAgIDogb3B0aW9ucztcblxuICAgICAgICByZXR1cm4gaG9zdGVkRmllbGRzLmNyZWF0ZSh7IC4uLmhvc3RlZEZpZWxkc09wdGlvbnMsIGNsaWVudCB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRDbGllbnQoKTogUHJvbWlzZTxCcmFpbnRyZWVDbGllbnQ+IHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudFRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZENsaWVudCgpO1xuXG4gICAgICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudC5jcmVhdGUoeyBhdXRob3JpemF0aW9uOiB0aGlzLmNsaWVudFRva2VuIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgbWFwQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3M6IEFkZHJlc3MpOiBCcmFpbnRyZWVCaWxsaW5nQWRkcmVzc1JlcXVlc3REYXRhIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvdW50cnlOYW1lOiBiaWxsaW5nQWRkcmVzcy5jb3VudHJ5LFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogYmlsbGluZ0FkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHN0cmVldEFkZHJlc3M6IGJpbGxpbmdBZGRyZXNzLmFkZHJlc3MyXG4gICAgICAgICAgICAgICAgPyBgJHtiaWxsaW5nQWRkcmVzcy5hZGRyZXNzMX0gJHtiaWxsaW5nQWRkcmVzcy5hZGRyZXNzMn1gXG4gICAgICAgICAgICAgICAgOiBiaWxsaW5nQWRkcmVzcy5hZGRyZXNzMSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1hcEZpZWxkT3B0aW9ucyhcbiAgICAgICAgZmllbGRzOiBCcmFpbnRyZWVGb3JtRmllbGRzTWFwIHwgQnJhaW50cmVlU3RvcmVkQ2FyZEZpZWxkc01hcCxcbiAgICAgICAgdW5zdXBwb3J0ZWRDYXJkQnJhbmRzPzogc3RyaW5nW10sXG4gICAgKTogQnJhaW50cmVlSG9zdGVkRmllbGRzQ3JlYXRvckNvbmZpZ1snZmllbGRzJ10ge1xuICAgICAgICBpZiAoaXNCcmFpbnRyZWVGb3JtRmllbGRzTWFwKGZpZWxkcykpIHtcbiAgICAgICAgICAgIGNvbnN0IHN1cHBvcnRlZENhcmRCcmFuZHM6IFBhcnRpYWw8UmVjb3JkPHN0cmluZywgYm9vbGVhbj4+ID0ge307XG5cbiAgICAgICAgICAgIHVuc3VwcG9ydGVkQ2FyZEJyYW5kcz8uZm9yRWFjaCgoY2FyZEJyYW5kKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzQnJhaW50cmVlU3VwcG9ydGVkQ2FyZEJyYW5kKGNhcmRCcmFuZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydGVkQ2FyZEJyYW5kc1tjYXJkQnJhbmRdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBvbWl0QnkoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBudW1iZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogYCMke2ZpZWxkcy5jYXJkTnVtYmVyLmNvbnRhaW5lcklkfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogZmllbGRzLmNhcmROdW1iZXIucGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbExhYmVsOiBmaWVsZHMuY2FyZE51bWJlci5hY2Nlc3NpYmlsaXR5TGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4oT2JqZWN0LmtleXMoc3VwcG9ydGVkQ2FyZEJyYW5kcykubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8geyBzdXBwb3J0ZWRDYXJkQnJhbmRzIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbkRhdGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogYCMke2ZpZWxkcy5jYXJkRXhwaXJ5LmNvbnRhaW5lcklkfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogZmllbGRzLmNhcmRFeHBpcnkucGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbExhYmVsOiBmaWVsZHMuY2FyZEV4cGlyeS5hY2Nlc3NpYmlsaXR5TGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGN2djogZmllbGRzLmNhcmRDb2RlICYmIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogYCMke2ZpZWxkcy5jYXJkQ29kZS5jb250YWluZXJJZH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGZpZWxkcy5jYXJkQ29kZS5wbGFjZWhvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVybmFsTGFiZWw6IGZpZWxkcy5jYXJkQ29kZS5hY2Nlc3NpYmlsaXR5TGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhcmRob2xkZXJOYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IGAjJHtmaWVsZHMuY2FyZE5hbWUuY29udGFpbmVySWR9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBmaWVsZHMuY2FyZE5hbWUucGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbExhYmVsOiBmaWVsZHMuY2FyZE5hbWUuYWNjZXNzaWJpbGl0eUxhYmVsLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXNOaWwsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9taXRCeShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBudW1iZXI6IGZpZWxkcy5jYXJkTnVtYmVyVmVyaWZpY2F0aW9uICYmIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBgIyR7ZmllbGRzLmNhcmROdW1iZXJWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGZpZWxkcy5jYXJkTnVtYmVyVmVyaWZpY2F0aW9uLnBsYWNlaG9sZGVyLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY3Z2OiBmaWVsZHMuY2FyZENvZGVWZXJpZmljYXRpb24gJiYge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IGAjJHtmaWVsZHMuY2FyZENvZGVWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGZpZWxkcy5jYXJkQ29kZVZlcmlmaWNhdGlvbi5wbGFjZWhvbGRlcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzTmlsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWFwU3R5bGVPcHRpb25zKFxuICAgICAgICBvcHRpb25zOiBCcmFpbnRyZWVGb3JtRmllbGRTdHlsZXNNYXAsXG4gICAgKTogQnJhaW50cmVlSG9zdGVkRmllbGRzQ3JlYXRvckNvbmZpZ1snc3R5bGVzJ10ge1xuICAgICAgICBjb25zdCBtYXBTdHlsZXMgPSAoc3R5bGVzOiBCcmFpbnRyZWVGb3JtRmllbGRTdHlsZXMgPSB7fSkgPT5cbiAgICAgICAgICAgIG9taXRCeShcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBzdHlsZXMuY29sb3IsXG4gICAgICAgICAgICAgICAgICAgICdmb250LWZhbWlseSc6IHN0eWxlcy5mb250RmFtaWx5LFxuICAgICAgICAgICAgICAgICAgICAnZm9udC1zaXplJzogc3R5bGVzLmZvbnRTaXplLFxuICAgICAgICAgICAgICAgICAgICAnZm9udC13ZWlnaHQnOiBzdHlsZXMuZm9udFdlaWdodCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlzTmlsLFxuICAgICAgICAgICAgKSBhcyBEaWN0aW9uYXJ5PHN0cmluZz47XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlucHV0OiBtYXBTdHlsZXMob3B0aW9ucy5kZWZhdWx0KSxcbiAgICAgICAgICAgICcuaW52YWxpZCc6IG1hcFN0eWxlcyhvcHRpb25zLmVycm9yKSxcbiAgICAgICAgICAgICc6Zm9jdXMnOiBtYXBTdHlsZXMob3B0aW9ucy5mb2N1cyksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYXBGaWVsZFR5cGUodHlwZTogc3RyaW5nKTogQnJhaW50cmVlRm9ybUZpZWxkVHlwZSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSBCcmFpbnRyZWVIb3N0ZWRGb3JtVHlwZS5TdG9yZWRDYXJkVmVyaWZpY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgID8gQnJhaW50cmVlRm9ybUZpZWxkVHlwZS5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgIDogQnJhaW50cmVlRm9ybUZpZWxkVHlwZS5DYXJkTnVtYmVyO1xuXG4gICAgICAgICAgICBjYXNlICdleHBpcmF0aW9uRGF0ZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEJyYWludHJlZUZvcm1GaWVsZFR5cGUuQ2FyZEV4cGlyeTtcblxuICAgICAgICAgICAgY2FzZSAnY3Z2JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSBCcmFpbnRyZWVIb3N0ZWRGb3JtVHlwZS5TdG9yZWRDYXJkVmVyaWZpY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgID8gQnJhaW50cmVlRm9ybUZpZWxkVHlwZS5DYXJkQ29kZVZlcmlmaWNhdGlvblxuICAgICAgICAgICAgICAgICAgICA6IEJyYWludHJlZUZvcm1GaWVsZFR5cGUuQ2FyZENvZGU7XG5cbiAgICAgICAgICAgIGNhc2UgJ2NhcmRob2xkZXJOYW1lJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gQnJhaW50cmVlRm9ybUZpZWxkVHlwZS5DYXJkTmFtZTtcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZmllbGQgdHlwZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYXBFcnJvcnMoZmllbGRzOiBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNTdGF0ZVsnZmllbGRzJ10pOiBCcmFpbnRyZWVGb3JtRXJyb3JzRGF0YSB7XG4gICAgICAgIGNvbnN0IGVycm9yczogQnJhaW50cmVlRm9ybUVycm9yc0RhdGEgPSB7fTtcblxuICAgICAgICBpZiAoZmllbGRzKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZpZWxkcykpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgdGhpcy5pc1ZhbGlkUGFyYW0oa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGlzVmFsaWQsIGlzRW1wdHksIGlzUG90ZW50aWFsbHlWYWxpZCB9ID0gdmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzW2tleV0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFbXB0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUG90ZW50aWFsbHlWYWxpZCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZXJyb3JzO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWFwVmFsaWRhdGlvbkVycm9ycyhcbiAgICAgICAgZmllbGRzOiBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNTdGF0ZVsnZmllbGRzJ10sXG4gICAgKTogQnJhaW50cmVlRm9ybUZpZWxkVmFsaWRhdGVFdmVudERhdGFbJ2Vycm9ycyddIHtcbiAgICAgICAgcmV0dXJuIChPYmplY3Qua2V5cyhmaWVsZHMpIGFzIEFycmF5PGtleW9mIEJyYWludHJlZUhvc3RlZEZpZWxkc1N0YXRlWydmaWVsZHMnXT4pLnJlZHVjZShcbiAgICAgICAgICAgIChyZXN1bHQsIGZpZWxkS2V5KSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgICAgICBbdGhpcy5tYXBGaWVsZFR5cGUoZmllbGRLZXkpXTogZmllbGRzW2ZpZWxkS2V5XT8uaXNWYWxpZFxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IFt0aGlzLmNyZWF0ZUludmFsaWRFcnJvcih0aGlzLm1hcEZpZWxkVHlwZShmaWVsZEtleSkpXSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAge30sXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYXBUb2tlbml6ZUVycm9yKFxuICAgICAgICBlcnJvcjogQnJhaW50cmVlSG9zdGVkRm9ybUVycm9yLFxuICAgICAgICBpc1N0b3JlZENhcmQgPSBmYWxzZSxcbiAgICApOiBCcmFpbnRyZWVGb3JtRmllbGRWYWxpZGF0ZUV2ZW50RGF0YVsnZXJyb3JzJ10gfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ0hPU1RFRF9GSUVMRFNfRklFTERTX0VNUFRZJykge1xuICAgICAgICAgICAgY29uc3QgY3Z2ID0gW3RoaXMuY3JlYXRlUmVxdWlyZWRFcnJvcih0aGlzLm1hcEZpZWxkVHlwZSgnY3Z2JykpXTtcblxuICAgICAgICAgICAgaWYgKGlzU3RvcmVkQ2FyZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IFt0aGlzLm1hcEZpZWxkVHlwZSgnY3Z2JyldOiBjdnYgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBbdGhpcy5tYXBGaWVsZFR5cGUoJ2N2dicpXTogY3Z2LFxuICAgICAgICAgICAgICAgIFt0aGlzLm1hcEZpZWxkVHlwZSgnZXhwaXJhdGlvbkRhdGUnKV06IFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVSZXF1aXJlZEVycm9yKHRoaXMubWFwRmllbGRUeXBlKCdleHBpcmF0aW9uRGF0ZScpKSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIFt0aGlzLm1hcEZpZWxkVHlwZSgnbnVtYmVyJyldOiBbXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUmVxdWlyZWRFcnJvcih0aGlzLm1hcEZpZWxkVHlwZSgnbnVtYmVyJykpLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgW3RoaXMubWFwRmllbGRUeXBlKCdjYXJkaG9sZGVyTmFtZScpXTogW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVJlcXVpcmVkRXJyb3IodGhpcy5tYXBGaWVsZFR5cGUoJ2NhcmRob2xkZXJOYW1lJykpLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVycm9yLmRldGFpbHM/LmludmFsaWRGaWVsZEtleXM/LnJlZHVjZSgocmVzdWx0LCBrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLm1hcEZpZWxkVHlwZShrZXkpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgICAgICBbdHlwZV06IFt0aGlzLmNyZWF0ZUludmFsaWRFcnJvcih0eXBlKV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCB7fSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVSZXF1aXJlZEVycm9yKFxuICAgICAgICBmaWVsZFR5cGU6IEJyYWludHJlZUZvcm1GaWVsZFR5cGUsXG4gICAgKTogQnJhaW50cmVlRm9ybUZpZWxkVmFsaWRhdGVFcnJvckRhdGEge1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IHtcbiAgICAgICAgICAgIFtCcmFpbnRyZWVGb3JtRmllbGRUeXBlLkNhcmRDb2RlXTogJ0NWViBpcyByZXF1aXJlZCcsXG4gICAgICAgICAgICBbQnJhaW50cmVlRm9ybUZpZWxkVHlwZS5DYXJkQ29kZVZlcmlmaWNhdGlvbl06ICdDVlYgaXMgcmVxdWlyZWQnLFxuICAgICAgICAgICAgW0JyYWludHJlZUZvcm1GaWVsZFR5cGUuQ2FyZE51bWJlcl06ICdDcmVkaXQgY2FyZCBudW1iZXIgaXMgcmVxdWlyZWQnLFxuICAgICAgICAgICAgW0JyYWludHJlZUZvcm1GaWVsZFR5cGUuQ2FyZE51bWJlclZlcmlmaWNhdGlvbl06ICdDcmVkaXQgY2FyZCBudW1iZXIgaXMgcmVxdWlyZWQnLFxuICAgICAgICAgICAgW0JyYWludHJlZUZvcm1GaWVsZFR5cGUuQ2FyZEV4cGlyeV06ICdFeHBpcmF0aW9uIGRhdGUgaXMgcmVxdWlyZWQnLFxuICAgICAgICAgICAgW0JyYWludHJlZUZvcm1GaWVsZFR5cGUuQ2FyZE5hbWVdOiAnRnVsbCBuYW1lIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZXNbZmllbGRUeXBlXSA/PyAnRmllbGQgaXMgcmVxdWlyZWQnLFxuICAgICAgICAgICAgdHlwZTogJ3JlcXVpcmVkJyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUludmFsaWRFcnJvcihcbiAgICAgICAgZmllbGRUeXBlOiBCcmFpbnRyZWVGb3JtRmllbGRUeXBlLFxuICAgICk6IEJyYWludHJlZUZvcm1GaWVsZFZhbGlkYXRlRXJyb3JEYXRhIHtcbiAgICAgICAgY29uc3QgZm9ybUZpZWxkcyA9IHtcbiAgICAgICAgICAgIFtCcmFpbnRyZWVGb3JtRmllbGRUeXBlLkNhcmRDb2RlXToge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGNhcmQgY29kZScsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2ludmFsaWRfY2FyZF9jb2RlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbQnJhaW50cmVlRm9ybUZpZWxkVHlwZS5DYXJkQ29kZVZlcmlmaWNhdGlvbl06IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBjYXJkIGNvZGUnLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkX2NhcmRfY29kZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW0JyYWludHJlZUZvcm1GaWVsZFR5cGUuQ2FyZE51bWJlcl06IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBjYXJkIG51bWJlcicsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2ludmFsaWRfY2FyZF9udW1iZXInLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtCcmFpbnRyZWVGb3JtRmllbGRUeXBlLkNhcmROdW1iZXJWZXJpZmljYXRpb25dOiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgY2FyZCBudW1iZXInLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkX2NhcmRfbnVtYmVyJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbQnJhaW50cmVlRm9ybUZpZWxkVHlwZS5DYXJkRXhwaXJ5XToge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGNhcmQgZXhwaXJ5JyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW52YWxpZF9jYXJkX2V4cGlyeScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW0JyYWludHJlZUZvcm1GaWVsZFR5cGUuQ2FyZE5hbWVdOiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgY2FyZCBuYW1lJyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW52YWxpZF9jYXJkX25hbWUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgbWVzc2FnZTogZm9ybUZpZWxkc1tmaWVsZFR5cGVdPy5tZXNzYWdlID8/ICdJbnZhbGlkIGZpZWxkJyxcbiAgICAgICAgICAgIHR5cGU6IGZvcm1GaWVsZHNbZmllbGRUeXBlXT8udHlwZSA/PyAnaW52YWxpZCcsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVCbHVyID0gKGV2ZW50OiBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNTdGF0ZSk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLmZvcm1PcHRpb25zPy5vbkJsdXI/Lih7XG4gICAgICAgICAgICBmaWVsZFR5cGU6IHRoaXMubWFwRmllbGRUeXBlKGV2ZW50LmVtaXR0ZWRCeSksXG4gICAgICAgICAgICBlcnJvcnM6IHRoaXMubWFwRXJyb3JzKGV2ZW50LmZpZWxkcyksXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBwcml2YXRlIGhhbmRsZUZvY3VzID0gKGV2ZW50OiBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNTdGF0ZSk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLmZvcm1PcHRpb25zPy5vbkZvY3VzPy4oe1xuICAgICAgICAgICAgZmllbGRUeXBlOiB0aGlzLm1hcEZpZWxkVHlwZShldmVudC5lbWl0dGVkQnkpLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBoYW5kbGVDYXJkVHlwZUNoYW5nZSA9IChldmVudDogQnJhaW50cmVlSG9zdGVkRmllbGRzU3RhdGUpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3QgY2FyZFR5cGUgPVxuICAgICAgICAgICAgZXZlbnQuY2FyZHMubGVuZ3RoID09PSAxXG4gICAgICAgICAgICAgICAgPyBldmVudC5jYXJkc1swXS50eXBlLnJlcGxhY2UoL15tYXN0ZXItY2FyZCQvLCAnbWFzdGVyY2FyZCcpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgdGhpcy5mb3JtT3B0aW9ucz8ub25DYXJkVHlwZUNoYW5nZT8uKHsgY2FyZFR5cGUgfSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgaGFuZGxlSW5wdXRTdWJtaXRSZXF1ZXN0ID0gKGV2ZW50OiBCcmFpbnRyZWVIb3N0ZWRGaWVsZHNTdGF0ZSk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLmZvcm1PcHRpb25zPy5vbkVudGVyPy4oe1xuICAgICAgICAgICAgZmllbGRUeXBlOiB0aGlzLm1hcEZpZWxkVHlwZShldmVudC5lbWl0dGVkQnkpLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBoYW5kbGVWYWxpZGl0eUNoYW5nZSA9IChldmVudDogQnJhaW50cmVlSG9zdGVkRmllbGRzU3RhdGUpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5mb3JtT3B0aW9ucz8ub25WYWxpZGF0ZT8uKHtcbiAgICAgICAgICAgIGlzVmFsaWQ6IHRoaXMuaXNWYWxpZEZvcm0oZXZlbnQpLFxuICAgICAgICAgICAgZXJyb3JzOiB0aGlzLm1hcFZhbGlkYXRpb25FcnJvcnMoZXZlbnQuZmllbGRzKSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgaXNWYWxpZEZvcm0oZXZlbnQ6IEJyYWludHJlZUhvc3RlZEZpZWxkc1N0YXRlKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhldmVudC5maWVsZHMpIGFzIEFycmF5PGtleW9mIEJyYWludHJlZUhvc3RlZEZpZWxkc1N0YXRlWydmaWVsZHMnXT5cbiAgICAgICAgKS5ldmVyeSgoa2V5KSA9PiBldmVudC5maWVsZHNba2V5XT8uaXNWYWxpZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1ZhbGlkUGFyYW0oa2V5OiBzdHJpbmcpOiBrZXkgaXMgQnJhaW50cmVlRm9ybUVycm9yRGF0YUtleXMge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgJ251bWJlcicsXG4gICAgICAgICAgICAnY3Z2JyxcbiAgICAgICAgICAgICdleHBpcmF0aW9uRGF0ZScsXG4gICAgICAgICAgICAncG9zdGFsQ29kZScsXG4gICAgICAgICAgICAnY2FyZGhvbGRlck5hbWUnLFxuICAgICAgICAgICAgJ2NhcmRUeXBlJyxcbiAgICAgICAgXS5pbmNsdWRlcyhrZXkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEJyYWludHJlZVN1cHBvcnRlZENhcmRCcmFuZHMgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBpc0JyYWludHJlZVN1cHBvcnRlZENhcmRCcmFuZCA9IChcbiAgICBjYXJkQnJhbmQ6IHN0cmluZyxcbik6IGNhcmRCcmFuZCBpcyBCcmFpbnRyZWVTdXBwb3J0ZWRDYXJkQnJhbmRzID0+IHtcbiAgICBjb25zdCBzdXBwb3J0ZWRDYXJkQnJhbmRzID0gT2JqZWN0LnZhbHVlcyhCcmFpbnRyZWVTdXBwb3J0ZWRDYXJkQnJhbmRzKTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWFzc2VydGlvbnNcbiAgICByZXR1cm4gc3VwcG9ydGVkQ2FyZEJyYW5kcy5pbmNsdWRlcyhjYXJkQnJhbmQgYXMgQnJhaW50cmVlU3VwcG9ydGVkQ2FyZEJyYW5kcyk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpc0JyYWludHJlZVN1cHBvcnRlZENhcmRCcmFuZDtcbiIsImltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVIb3N0V2luZG93LFxuICAgIEJyYWludHJlZUludGVncmF0aW9uU2VydmljZSxcbiAgICBCcmFpbnRyZWVTY3JpcHRMb2FkZXIsXG4gICAgQnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYnJhaW50cmVlLXV0aWxzJztcblxuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCcmFpbnRyZWVDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vYnJhaW50cmVlLWNyZWRpdC1jYXJkLXBheW1lbnQtc3RyYXRlZ3knO1xuaW1wb3J0IEJyYWludHJlZUhvc3RlZEZvcm0gZnJvbSAnLi4vYnJhaW50cmVlLWhvc3RlZC1mb3JtL2JyYWludHJlZS1ob3N0ZWQtZm9ybSc7XG5cbmNvbnN0IGNyZWF0ZUJyYWludHJlZUNyZWRpdENhcmRQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgQnJhaW50cmVlQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PiB7XG4gICAgY29uc3QgYnJhaW50cmVlSG9zdFdpbmRvdzogQnJhaW50cmVlSG9zdFdpbmRvdyA9IHdpbmRvdztcblxuICAgIGNvbnN0IGJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyID0gbmV3IEJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpO1xuXG4gICAgY29uc3QgYnJhaW50cmVlU2NyaXB0TG9hZGVyID0gbmV3IEJyYWludHJlZVNjcmlwdExvYWRlcihcbiAgICAgICAgZ2V0U2NyaXB0TG9hZGVyKCksXG4gICAgICAgIGJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgICAgIGJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyLFxuICAgICk7XG5cbiAgICBjb25zdCBicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UgPSBuZXcgQnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlKFxuICAgICAgICBicmFpbnRyZWVTY3JpcHRMb2FkZXIsXG4gICAgICAgIGJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgKTtcblxuICAgIGNvbnN0IGJyYWludHJlZUhvc3RlZEZvcm0gPSBuZXcgQnJhaW50cmVlSG9zdGVkRm9ybShcbiAgICAgICAgYnJhaW50cmVlU2NyaXB0TG9hZGVyLFxuICAgICAgICBicmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcixcbiAgICApO1xuXG4gICAgcmV0dXJuIG5ldyBCcmFpbnRyZWVDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGJyYWludHJlZUhvc3RlZEZvcm0sXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCcmFpbnRyZWVDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5LCBbeyBpZDogJ2JyYWludHJlZScgfV0pO1xuIiwiaW1wb3J0IHsgRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5pbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVFcnJvcixcbiAgICBCcmFpbnRyZWVIb3N0V2luZG93LFxuICAgIEJyYWludHJlZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBCcmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgQnJhaW50cmVlUGF5cGFsU2RrQ3JlYXRvckNvbmZpZyxcbiAgICBCcmFpbnRyZWVUb2tlbml6ZVBheWxvYWQsXG4gICAgaXNCcmFpbnRyZWVFcnJvcixcbiAgICBQYXlwYWxBdXRob3JpemVEYXRhLFxuICAgIFBheXBhbFN0eWxlT3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9icmFpbnRyZWUtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBDdXN0b21lckNyZWRlbnRpYWxzLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG4gICAgU3RhbmRhcmRFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCcmFpbnRyZWVQYXlwYWxDdXN0b21lckluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJyYWludHJlZVBheXBhbEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYnJhaW50cmVlLXBheXBhbC1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCcmFpbnRyZWVQYXlwYWxDdXN0b21lclN0cmF0ZWd5IGltcGxlbWVudHMgQ3VzdG9tZXJTdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBmb3JtUG9zdGVyOiBGb3JtUG9zdGVyLFxuICAgICAgICBwcml2YXRlIGJyYWludHJlZUludGVncmF0aW9uU2VydmljZTogQnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJyYWludHJlZUhvc3RXaW5kb3c6IEJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhCcmFpbnRyZWVQYXlwYWxDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGJyYWludHJlZXBheXBhbCwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkVycm9yIH0gPSBicmFpbnRyZWVwYXlwYWwgfHwge307XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFicmFpbnRyZWVwYXlwYWwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5icmFpbnRyZWVwYXlwYWxcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJyYWludHJlZXBheXBhbC5jb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgbGV0IHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhPjtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkKTtcblxuICAgICAgICAgICAgaWYgKCFwYXltZW50TWV0aG9kLmNsaWVudFRva2VuKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRUb2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKF9lKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiwgY29uZmlnLCBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGlmICghY2xpZW50VG9rZW4gfHwgIWluaXRpYWxpemF0aW9uRGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY3VycmVuY3lDb2RlID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuICAgICAgICBjb25zdCBwYXlwYWxDaGVja291dE9wdGlvbnM6IFBhcnRpYWw8QnJhaW50cmVlUGF5cGFsU2RrQ3JlYXRvckNvbmZpZz4gPSB7XG4gICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgaW50ZW50OiBpbml0aWFsaXphdGlvbkRhdGEuaW50ZW50LFxuICAgICAgICAgICAgaXNDcmVkaXRFbmFibGVkOiBpbml0aWFsaXphdGlvbkRhdGEuaXNDcmVkaXRFbmFibGVkLFxuICAgICAgICAgICAgY29tbWl0OiBmYWxzZSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxDaGVja291dFN1Y2Nlc3NDYWxsYmFjayA9IChcbiAgICAgICAgICAgIGJyYWludHJlZVBheXBhbENoZWNrb3V0OiBCcmFpbnRyZWVQYXlwYWxDaGVja291dCxcbiAgICAgICAgKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclBheVBhbEJ1dHRvbihcbiAgICAgICAgICAgICAgICBicmFpbnRyZWVQYXlwYWxDaGVja291dCxcbiAgICAgICAgICAgICAgICBicmFpbnRyZWVwYXlwYWwsXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgQm9vbGVhbihjb25maWcudGVzdE1vZGUpLFxuICAgICAgICAgICAgICAgIGNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcGF5cGFsQ2hlY2tvdXRFcnJvckNhbGxiYWNrID0gKGVycm9yOiBCcmFpbnRyZWVFcnJvcikgPT5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGNvbnRhaW5lciwgb25FcnJvcik7XG5cbiAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZShjbGllbnRUb2tlbik7XG4gICAgICAgIGF3YWl0IHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheXBhbENoZWNrb3V0KFxuICAgICAgICAgICAgcGF5cGFsQ2hlY2tvdXRPcHRpb25zLFxuICAgICAgICAgICAgcGF5cGFsQ2hlY2tvdXRTdWNjZXNzQ2FsbGJhY2ssXG4gICAgICAgICAgICBwYXlwYWxDaGVja291dEVycm9yQ2FsbGJhY2ssXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS50ZWFyZG93bigpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25JbihjcmVkZW50aWFsczogQ3VzdG9tZXJDcmVkZW50aWFscywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihjcmVkZW50aWFscywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbk91dChvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihvcHRpb25zKTtcbiAgICB9XG5cbiAgICBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBvcHRpb25zPy5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrPy4oKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJQYXlQYWxCdXR0b24oXG4gICAgICAgIGJyYWludHJlZVBheXBhbENoZWNrb3V0OiBCcmFpbnRyZWVQYXlwYWxDaGVja291dCxcbiAgICAgICAgYnJhaW50cmVlcGF5cGFsOiBCcmFpbnRyZWVQYXlwYWxDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICB0ZXN0TW9kZTogYm9vbGVhbixcbiAgICAgICAgYnV0dG9uU3R5bGVzOiBQYXlwYWxTdHlsZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkNsaWNrID0gbm9vcCB9ID0gYnJhaW50cmVlcGF5cGFsO1xuXG4gICAgICAgIGNvbnN0IHsgcGF5cGFsIH0gPSB0aGlzLmJyYWludHJlZUhvc3RXaW5kb3c7XG4gICAgICAgIGNvbnN0IGZ1bmRpbmdTb3VyY2UgPSBwYXlwYWw/LkZVTkRJTkcuUEFZUEFMO1xuXG4gICAgICAgIGlmIChwYXlwYWwgJiYgZnVuZGluZ1NvdXJjZSkge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uUmVuZGVyID0gcGF5cGFsLkJ1dHRvbnMoe1xuICAgICAgICAgICAgICAgIGVudjogdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QnJhaW50cmVlRW52KHRlc3RNb2RlKSxcbiAgICAgICAgICAgICAgICBmdW5kaW5nU291cmNlLFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7IC4uLmJ1dHRvblN0eWxlcywgaGVpZ2h0OiBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQgfSxcbiAgICAgICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cFBheW1lbnQoYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsIGJyYWludHJlZXBheXBhbCwgbWV0aG9kSWQpLFxuICAgICAgICAgICAgICAgIG9uQXBwcm92ZTogKGF1dGhvcml6ZURhdGE6IFBheXBhbEF1dGhvcml6ZURhdGEpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW5pemVQYXltZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXplRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyYWludHJlZVBheXBhbENoZWNrb3V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBicmFpbnRyZWVwYXlwYWwsXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgb25DbGljayxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocGF5cGFsQnV0dG9uUmVuZGVyLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvblJlbmRlci5yZW5kZXIoYCMke2NvbnRhaW5lcn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgc2V0dXBQYXltZW50KFxuICAgICAgICBicmFpbnRyZWVQYXlwYWxDaGVja291dDogQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgICAgIGJyYWludHJlZXBheXBhbDogQnJhaW50cmVlUGF5cGFsQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPHN0cmluZyB8IHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICBjb25zdCBhbW91bnQgPSBzdGF0ZS5nZXRDaGVja291dE9yVGhyb3coKS5vdXRzdGFuZGluZ0JhbGFuY2U7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW5jeSA9IHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbWVyID0gc3RhdGUuZ2V0Q3VzdG9tZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhPiA9XG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICAgICAgY29uc3QgYWRkcmVzcyA9IGN1c3RvbWVyPy5hZGRyZXNzZXNbMF07XG4gICAgICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3NPdmVycmlkZSA9IGFkZHJlc3NcbiAgICAgICAgICAgICAgICA/IHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLm1hcFRvQnJhaW50cmVlU2hpcHBpbmdBZGRyZXNzT3ZlcnJpZGUoYWRkcmVzcylcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGJyYWludHJlZVBheXBhbENoZWNrb3V0LmNyZWF0ZVBheW1lbnQoe1xuICAgICAgICAgICAgICAgIGZsb3c6ICdjaGVja291dCcsXG4gICAgICAgICAgICAgICAgZW5hYmxlU2hpcHBpbmdBZGRyZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzc0VkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzaGlwcGluZ0FkZHJlc3NPdmVycmlkZSxcbiAgICAgICAgICAgICAgICBhbW91bnQsXG4gICAgICAgICAgICAgICAgY3VycmVuY3ksXG4gICAgICAgICAgICAgICAgb2ZmZXJDcmVkaXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGludGVudDogcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LmludGVudCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uRXJyb3IgfSA9IGJyYWludHJlZXBheXBhbDtcblxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgY29udGFpbmVyLCBvbkVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgdG9rZW5pemVQYXltZW50KFxuICAgICAgICBhdXRob3JpemVEYXRhOiBQYXlwYWxBdXRob3JpemVEYXRhLFxuICAgICAgICBicmFpbnRyZWVQYXlwYWxDaGVja291dDogQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJyYWludHJlZXBheXBhbDogQnJhaW50cmVlUGF5cGFsQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPEJyYWludHJlZVRva2VuaXplUGF5bG9hZCB8IHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGV2aWNlRGF0YSB9ID0gYXdhaXQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0RGF0YUNvbGxlY3Rvcih7XG4gICAgICAgICAgICAgICAgcGF5cGFsOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB0b2tlbml6ZVBheWxvYWQgPSBhd2FpdCBicmFpbnRyZWVQYXlwYWxDaGVja291dC50b2tlbml6ZVBheW1lbnQoYXV0aG9yaXplRGF0YSk7XG4gICAgICAgICAgICBjb25zdCB7IGRldGFpbHMsIG5vbmNlIH0gPSB0b2tlbml6ZVBheWxvYWQ7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UubWFwVG9MZWdhY3lCaWxsaW5nQWRkcmVzcyhkZXRhaWxzKTtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UubWFwVG9MZWdhY3lTaGlwcGluZ0FkZHJlc3MoZGV0YWlscyk7XG5cbiAgICAgICAgICAgIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybSgnL2NoZWNrb3V0LnBocCcsIHtcbiAgICAgICAgICAgICAgICBwYXltZW50X3R5cGU6ICdwYXlwYWwnLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdzZXRfZXh0ZXJuYWxfY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgIG5vbmNlLFxuICAgICAgICAgICAgICAgIGRldmljZV9kYXRhOiBkZXZpY2VEYXRhLFxuICAgICAgICAgICAgICAgIGJpbGxpbmdfYWRkcmVzczogSlNPTi5zdHJpbmdpZnkoYmlsbGluZ0FkZHJlc3MpLFxuICAgICAgICAgICAgICAgIHNoaXBwaW5nX2FkZHJlc3M6IEpTT04uc3RyaW5naWZ5KHNoaXBwaW5nQWRkcmVzcyksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRva2VuaXplUGF5bG9hZDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkVycm9yIH0gPSBicmFpbnRyZWVwYXlwYWw7XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGNvbnRhaW5lciwgb25FcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKFxuICAgICAgICBlcnJvcjogdW5rbm93bixcbiAgICAgICAgYnV0dG9uQ29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgb25FcnJvckNhbGxiYWNrPzogKGVycm9yOiBCcmFpbnRyZWVFcnJvciB8IFN0YW5kYXJkRXJyb3IpID0+IHZvaWQsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoYnV0dG9uQ29udGFpbmVySWQpO1xuXG4gICAgICAgIGlmIChvbkVycm9yQ2FsbGJhY2sgJiYgaXNCcmFpbnRyZWVFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgIG9uRXJyb3JDYWxsYmFjayhlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImNvbnN0IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCA9IDM2O1xuXG5leHBvcnQgZGVmYXVsdCBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQ7XG4iLCJpbXBvcnQgeyBjcmVhdGVGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcbmltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVIb3N0V2luZG93LFxuICAgIEJyYWludHJlZUludGVncmF0aW9uU2VydmljZSxcbiAgICBCcmFpbnRyZWVTY3JpcHRMb2FkZXIsXG4gICAgQnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYnJhaW50cmVlLXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ3VzdG9tZXJTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJyYWludHJlZVBheXBhbEN1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9icmFpbnRyZWUtcGF5cGFsLWN1c3RvbWVyLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQnJhaW50cmVlUGF5cGFsQ3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8XG4gICAgQnJhaW50cmVlUGF5cGFsQ3VzdG9tZXJTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PiB7XG4gICAgY29uc3QgYnJhaW50cmVlSG9zdFdpbmRvdzogQnJhaW50cmVlSG9zdFdpbmRvdyA9IHdpbmRvdztcbiAgICBjb25zdCBicmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlciA9IG5ldyBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcihwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKTtcbiAgICBjb25zdCBicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UgPSBuZXcgQnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlKFxuICAgICAgICBuZXcgQnJhaW50cmVlU2NyaXB0TG9hZGVyKFxuICAgICAgICAgICAgZ2V0U2NyaXB0TG9hZGVyKCksXG4gICAgICAgICAgICBicmFpbnRyZWVIb3N0V2luZG93LFxuICAgICAgICAgICAgYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIsXG4gICAgICAgICksXG4gICAgICAgIGJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgKTtcblxuICAgIHJldHVybiBuZXcgQnJhaW50cmVlUGF5cGFsQ3VzdG9tZXJTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlRm9ybVBvc3RlcigpLFxuICAgICAgICBicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCcmFpbnRyZWVQYXlwYWxDdXN0b21lclN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JyYWludHJlZXBheXBhbCcgfSxcbl0pO1xuIiwiaW1wb3J0IHsgRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5pbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVFcnJvcixcbiAgICBCcmFpbnRyZWVIb3N0V2luZG93LFxuICAgIEJyYWludHJlZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBCcmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgQnJhaW50cmVlUGF5cGFsU2RrQ3JlYXRvckNvbmZpZyxcbiAgICBCcmFpbnRyZWVUb2tlbml6ZVBheWxvYWQsXG4gICAgaXNCcmFpbnRyZWVFcnJvcixcbiAgICBQYXlwYWxBdXRob3JpemVEYXRhLFxuICAgIFBheXBhbFN0eWxlT3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9icmFpbnRyZWUtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBDdXN0b21lckNyZWRlbnRpYWxzLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG4gICAgU3RhbmRhcmRFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCcmFpbnRyZWVQYXlwYWxDcmVkaXRDdXN0b21lckluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJyYWludHJlZVBheXBhbENyZWRpdEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYnJhaW50cmVlLXBheXBhbC1jcmVkaXQtY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJhaW50cmVlUGF5cGFsQ3JlZGl0Q3VzdG9tZXJTdHJhdGVneSBpbXBsZW1lbnRzIEN1c3RvbWVyU3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgZm9ybVBvc3RlcjogRm9ybVBvc3RlcixcbiAgICAgICAgcHJpdmF0ZSBicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2U6IEJyYWludHJlZUludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBicmFpbnRyZWVIb3N0V2luZG93OiBCcmFpbnRyZWVIb3N0V2luZG93LFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQnJhaW50cmVlUGF5cGFsQ3JlZGl0Q3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBicmFpbnRyZWVwYXlwYWxjcmVkaXQsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25FcnJvciB9ID0gYnJhaW50cmVlcGF5cGFsY3JlZGl0IHx8IHt9O1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYnJhaW50cmVlcGF5cGFsY3JlZGl0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYnJhaW50cmVlcGF5cGFsY3JlZGl0XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5icmFpbnRyZWVwYXlwYWxjcmVkaXQuY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGxldCBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPEJyYWludHJlZUluaXRpYWxpemF0aW9uRGF0YT47XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG5cbiAgICAgICAgICAgIGlmICghcGF5bWVudE1ldGhvZC5jbGllbnRUb2tlbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50VG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChfZSkge1xuICAgICAgICAgICAgc3RhdGUgPSBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGNvbmZpZywgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRCdXR0b25TdHlsZXMgfSA9IGluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFRvcEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcblxuICAgICAgICBpZiAoIWNsaWVudFRva2VuIHx8ICFpbml0aWFsaXphdGlvbkRhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcbiAgICAgICAgY29uc3QgcGF5cGFsQ2hlY2tvdXRPcHRpb25zOiBQYXJ0aWFsPEJyYWludHJlZVBheXBhbFNka0NyZWF0b3JDb25maWc+ID0ge1xuICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgIGludGVudDogaW5pdGlhbGl6YXRpb25EYXRhLmludGVudCxcbiAgICAgICAgICAgIGlzQ3JlZGl0RW5hYmxlZDogaW5pdGlhbGl6YXRpb25EYXRhLmlzQ3JlZGl0RW5hYmxlZCxcbiAgICAgICAgICAgIGNvbW1pdDogZmFsc2UsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQ2hlY2tvdXRTdWNjZXNzQ2FsbGJhY2sgPSAoXG4gICAgICAgICAgICBicmFpbnRyZWVQYXlwYWxDaGVja291dDogQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgICAgICkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQYXlQYWxCdXR0b24oXG4gICAgICAgICAgICAgICAgYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgICAgICAgICAgICAgYnJhaW50cmVlcGF5cGFsY3JlZGl0LFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIEJvb2xlYW4oY29uZmlnLnRlc3RNb2RlKSxcbiAgICAgICAgICAgICAgICB7IC4uLmNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzLCBoZWlnaHQ6IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCB9LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcGF5cGFsQ2hlY2tvdXRFcnJvckNhbGxiYWNrID0gKGVycm9yOiBCcmFpbnRyZWVFcnJvcikgPT5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGNvbnRhaW5lciwgb25FcnJvcik7XG5cbiAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZShjbGllbnRUb2tlbik7XG4gICAgICAgIGF3YWl0IHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheXBhbENoZWNrb3V0KFxuICAgICAgICAgICAgcGF5cGFsQ2hlY2tvdXRPcHRpb25zLFxuICAgICAgICAgICAgcGF5cGFsQ2hlY2tvdXRTdWNjZXNzQ2FsbGJhY2ssXG4gICAgICAgICAgICBwYXlwYWxDaGVja291dEVycm9yQ2FsbGJhY2ssXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS50ZWFyZG93bigpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25JbihjcmVkZW50aWFsczogQ3VzdG9tZXJDcmVkZW50aWFscywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihjcmVkZW50aWFscywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbk91dChvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihvcHRpb25zKTtcbiAgICB9XG5cbiAgICBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBvcHRpb25zPy5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrPy4oKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJQYXlQYWxCdXR0b24oXG4gICAgICAgIGJyYWludHJlZVBheXBhbENoZWNrb3V0OiBCcmFpbnRyZWVQYXlwYWxDaGVja291dCxcbiAgICAgICAgYnJhaW50cmVlcGF5cGFsY3JlZGl0OiBCcmFpbnRyZWVQYXlwYWxDcmVkaXRDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICB0ZXN0TW9kZTogYm9vbGVhbixcbiAgICAgICAgYnV0dG9uU3R5bGVzOiBQYXlwYWxTdHlsZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkNsaWNrID0gbm9vcCB9ID0gYnJhaW50cmVlcGF5cGFsY3JlZGl0O1xuICAgICAgICBjb25zdCB7IHBheXBhbCB9ID0gdGhpcy5icmFpbnRyZWVIb3N0V2luZG93O1xuXG4gICAgICAgIGxldCBoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHBheXBhbCkge1xuICAgICAgICAgICAgY29uc3QgZnVuZGluZ1NvdXJjZXMgPSBbcGF5cGFsLkZVTkRJTkcuUEFZTEFURVIsIHBheXBhbC5GVU5ESU5HLkNSRURJVF07XG5cbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2VzLmZvckVhY2goKGZ1bmRpbmdTb3VyY2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc1JlbmRlcmVkU21hcnRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uUmVuZGVyID0gcGF5cGFsLkJ1dHRvbnMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZW52OiB0ZXN0TW9kZSA/ICdzYW5kYm94JyA6ICdwcm9kdWN0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogYnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cFBheW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyYWludHJlZVBheXBhbENoZWNrb3V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmFpbnRyZWVwYXlwYWxjcmVkaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFwcHJvdmU6IChhdXRob3JpemVEYXRhOiBQYXlwYWxBdXRob3JpemVEYXRhKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW5pemVQYXltZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JpemVEYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmFpbnRyZWVQYXlwYWxDaGVja291dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyYWludHJlZXBheXBhbGNyZWRpdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljayxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBheXBhbEJ1dHRvblJlbmRlci5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvblJlbmRlci5yZW5kZXIoYCMke2NvbnRhaW5lcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbCB8fCAhaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBzZXR1cFBheW1lbnQoXG4gICAgICAgIGJyYWludHJlZVBheXBhbENoZWNrb3V0OiBCcmFpbnRyZWVQYXlwYWxDaGVja291dCxcbiAgICAgICAgYnJhaW50cmVlcGF5cGFsY3JlZGl0OiBCcmFpbnRyZWVQYXlwYWxDcmVkaXRDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICk6IFByb21pc2U8c3RyaW5nIHwgdm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKTtcblxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IHN0YXRlLmdldENoZWNrb3V0T3JUaHJvdygpLm91dHN0YW5kaW5nQmFsYW5jZTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbmN5ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBzdGF0ZS5nZXRDdXN0b21lcigpO1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxCcmFpbnRyZWVJbml0aWFsaXphdGlvbkRhdGE+ID1cbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgICAgICBjb25zdCBhZGRyZXNzID0gY3VzdG9tZXI/LmFkZHJlc3Nlc1swXTtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzc092ZXJyaWRlID0gYWRkcmVzc1xuICAgICAgICAgICAgICAgID8gdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UubWFwVG9CcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3NPdmVycmlkZShhZGRyZXNzKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQuY3JlYXRlUGF5bWVudCh7XG4gICAgICAgICAgICAgICAgZmxvdzogJ2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICBlbmFibGVTaGlwcGluZ0FkZHJlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzRWRpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzc092ZXJyaWRlLFxuICAgICAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeSxcbiAgICAgICAgICAgICAgICBvZmZlckNyZWRpdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQ6IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5pbnRlbnQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkVycm9yIH0gPSBicmFpbnRyZWVwYXlwYWxjcmVkaXQ7XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGNvbnRhaW5lciwgb25FcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHRva2VuaXplUGF5bWVudChcbiAgICAgICAgYXV0aG9yaXplRGF0YTogUGF5cGFsQXV0aG9yaXplRGF0YSxcbiAgICAgICAgYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQ6IEJyYWludHJlZVBheXBhbENoZWNrb3V0LFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBicmFpbnRyZWVwYXlwYWxjcmVkaXQ6IEJyYWludHJlZVBheXBhbENyZWRpdEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxCcmFpbnRyZWVUb2tlbml6ZVBheWxvYWQgfCB2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGRldmljZURhdGEgfSA9IGF3YWl0IHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmdldERhdGFDb2xsZWN0b3Ioe1xuICAgICAgICAgICAgICAgIHBheXBhbDogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgdG9rZW5pemVQYXlsb2FkID0gYXdhaXQgYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQudG9rZW5pemVQYXltZW50KGF1dGhvcml6ZURhdGEpO1xuICAgICAgICAgICAgY29uc3QgeyBkZXRhaWxzLCBub25jZSB9ID0gdG9rZW5pemVQYXlsb2FkO1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgIHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLm1hcFRvTGVnYWN5QmlsbGluZ0FkZHJlc3MoZGV0YWlscyk7XG4gICAgICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgIHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLm1hcFRvTGVnYWN5U2hpcHBpbmdBZGRyZXNzKGRldGFpbHMpO1xuXG4gICAgICAgICAgICB0aGlzLmZvcm1Qb3N0ZXIucG9zdEZvcm0oJy9jaGVja291dC5waHAnLCB7XG4gICAgICAgICAgICAgICAgcGF5bWVudF90eXBlOiAncGF5cGFsJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlcjogbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnc2V0X2V4dGVybmFsX2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICBub25jZSxcbiAgICAgICAgICAgICAgICBkZXZpY2VfZGF0YTogZGV2aWNlRGF0YSxcbiAgICAgICAgICAgICAgICBiaWxsaW5nX2FkZHJlc3M6IEpTT04uc3RyaW5naWZ5KGJpbGxpbmdBZGRyZXNzKSxcbiAgICAgICAgICAgICAgICBzaGlwcGluZ19hZGRyZXNzOiBKU09OLnN0cmluZ2lmeShzaGlwcGluZ0FkZHJlc3MpLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0b2tlbml6ZVBheWxvYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25FcnJvciB9ID0gYnJhaW50cmVlcGF5cGFsY3JlZGl0O1xuXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBjb250YWluZXIsIG9uRXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihcbiAgICAgICAgZXJyb3I6IHVua25vd24sXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG9uRXJyb3JDYWxsYmFjaz86IChlcnJvcjogQnJhaW50cmVlRXJyb3IgfCBTdGFuZGFyZEVycm9yKSA9PiB2b2lkLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGJ1dHRvbkNvbnRhaW5lcklkKTtcblxuICAgICAgICBpZiAob25FcnJvckNhbGxiYWNrICYmIGlzQnJhaW50cmVlRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICBvbkVycm9yQ2FsbGJhY2soZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcbmltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVIb3N0V2luZG93LFxuICAgIEJyYWludHJlZUludGVncmF0aW9uU2VydmljZSxcbiAgICBCcmFpbnRyZWVTY3JpcHRMb2FkZXIsXG4gICAgQnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYnJhaW50cmVlLXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ3VzdG9tZXJTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJyYWludHJlZVBheXBhbENyZWRpdEN1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9icmFpbnRyZWUtcGF5cGFsLWNyZWRpdC1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJyYWludHJlZVBheXBhbENyZWRpdEN1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJyYWludHJlZVBheXBhbENyZWRpdEN1c3RvbWVyU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT4ge1xuICAgIGNvbnN0IGJyYWludHJlZUhvc3RXaW5kb3c6IEJyYWludHJlZUhvc3RXaW5kb3cgPSB3aW5kb3c7XG4gICAgY29uc3QgYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIgPSBuZXcgQnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIocGF5bWVudEludGVncmF0aW9uU2VydmljZSk7XG4gICAgY29uc3QgYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlID0gbmV3IEJyYWludHJlZUludGVncmF0aW9uU2VydmljZShcbiAgICAgICAgbmV3IEJyYWludHJlZVNjcmlwdExvYWRlcihcbiAgICAgICAgICAgIGdldFNjcmlwdExvYWRlcigpLFxuICAgICAgICAgICAgYnJhaW50cmVlSG9zdFdpbmRvdyxcbiAgICAgICAgICAgIGJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyLFxuICAgICAgICApLFxuICAgICAgICBicmFpbnRyZWVIb3N0V2luZG93LFxuICAgICk7XG5cbiAgICByZXR1cm4gbmV3IEJyYWludHJlZVBheXBhbENyZWRpdEN1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUZvcm1Qb3N0ZXIoKSxcbiAgICAgICAgYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBicmFpbnRyZWVIb3N0V2luZG93LFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQnJhaW50cmVlUGF5cGFsQ3JlZGl0Q3VzdG9tZXJTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdicmFpbnRyZWVwYXlwYWxjcmVkaXQnIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgQnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIGdldEZhc3RsYW5lU3R5bGVzLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5pbXBvcnQge1xuICAgIEN1c3RvbWVyQ3JlZGVudGlhbHMsXG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IFdpdGhCcmFpbnRyZWVGYXN0bGFuZUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgfSBmcm9tICcuL2JyYWludHJlZS1mYXN0bGFuZS1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuaW1wb3J0IEJyYWludHJlZUZhc3RsYW5lVXRpbHMgZnJvbSAnLi9icmFpbnRyZWUtZmFzdGxhbmUtdXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCcmFpbnRyZWVGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQgPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYnJhaW50cmVlRmFzdGxhbmVVdGlsczogQnJhaW50cmVlRmFzdGxhbmVVdGlscyxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKHtcbiAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgIGJyYWludHJlZWZhc3RsYW5lLFxuICAgIH06IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQnJhaW50cmVlRmFzdGxhbmVDdXN0b21lckluaXRpYWxpemVPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IGF3YWl0IHRoaXMuZ2V0VmFsaWRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3QgeyBpc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkLCBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZVN0eWxlc1NldHRpbmdzID0gaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkXG4gICAgICAgICAgICA/IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5mYXN0bGFuZVN0eWxlc1xuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgdGhpcy5pc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkID0gISFpc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmFzdGxhbmVTdHlsZXMgPSBnZXRGYXN0bGFuZVN0eWxlcyhcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsRmFzdGxhbmVTdHlsZXNTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgYnJhaW50cmVlZmFzdGxhbmU/LnN0eWxlcyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5icmFpbnRyZWVGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVCcmFpbnRyZWVGYXN0bGFuZU9yVGhyb3coXG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaWQsXG4gICAgICAgICAgICAgICAgICAgIGZhc3RsYW5lU3R5bGVzLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgIC8vIEluZm86IERvIG5vdCB0aHJvdyBhbnl0aGluZyBoZXJlIHRvIGF2b2lkIGJsb2NraW5nIGN1c3RvbWVyIGZyb20gcGFzc2luZyBjaGVja291dCBmbG93XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbkluKGNyZWRlbnRpYWxzOiBDdXN0b21lckNyZWRlbnRpYWxzLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGNyZWRlbnRpYWxzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduT3V0KG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoXG4gICAgICAgIG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCwgY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAodHlwZW9mIGNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcImNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2tcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgYW5kIGl0IG11c3QgYmUgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGN1c3RvbWVyID0gc3RhdGUuZ2V0Q3VzdG9tZXJPclRocm93KCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNBY2NlbGVyYXRlZENoZWNrb3V0RW5hYmxlZCAmJiBjdXN0b21lci5pc0d1ZXN0KSB7XG4gICAgICAgICAgICBjb25zdCBzaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3cgPSBhd2FpdCB0aGlzLnNob3VsZFJ1bkF1dGhlbnRpY2F0aW9uRmxvdygpO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudE1ldGhvZEV4ZWN1dGVkKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3cpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJyYWludHJlZUZhc3RsYW5lVXRpbHMucnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgbWV0aG9kIGFmdGVyIEEvQiB0ZXN0aW5nIGZpbmlzaGVkXG4gICAgcHJpdmF0ZSBhc3luYyBzaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3coKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IHByaW1hcnlNZXRob2RJZCA9ICdicmFpbnRyZWVhY2NlbGVyYXRlZGNoZWNrb3V0JztcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW5mbzogd2Ugc2hvdWxkIGxvYWQgcGF5bWVudCBtZXRob2QgZWFjaCB0aW1lIHRvIGRldGVjdCBpZiB0aGUgdXNlclxuICAgICAgICAgICAgLy8gc2hvdWxkIGJlIGluIGEgdGVzdCBvciBpbiBhIGNvbnRyb2wgZ3JvdXBcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChwcmltYXJ5TWV0aG9kSWQpO1xuXG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhPihwcmltYXJ5TWV0aG9kSWQpO1xuXG4gICAgICAgICAgICAvLyBJbmZvOiBzaG91bGRSdW5BY2NlbGVyYXRlZENoZWNrb3V0IGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgZmxvdyBvZiBBL0IgdGVzdGluZyBwdXJwb3Nlc1xuICAgICAgICAgICAgLy8gd2hlbiBzaG91bGRSdW5BY2NlbGVyYXRlZENoZWNrb3V0IGlzIHRydWUsIHRoZSBsb29rdXAgUGF5UGFsIENvbm5lY3QgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQsXG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgQWNjZWxlcmF0ZWRDaGVja291dCBzaG91bGQgbm90IGJlIGF2YWlsYWJsZSBmb3IgdGhlIGN1c3RvbWVyXG4gICAgICAgICAgICByZXR1cm4gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LnNob3VsZFJ1bkFjY2VsZXJhdGVkQ2hlY2tvdXQgfHwgZmFsc2U7XG4gICAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZ2V0VmFsaWRQYXltZW50TWV0aG9kT3JUaHJvdyhcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheW1lbnRNZXRob2Q8QnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhPj4ge1xuICAgICAgICBsZXQgdmFsaWRQYXltZW50TWV0aG9kSWQgPSBtZXRob2RJZDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKHZhbGlkUGF5bWVudE1ldGhvZElkKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICB2YWxpZFBheW1lbnRNZXRob2RJZCA9XG4gICAgICAgICAgICAgICAgbWV0aG9kSWQgPT09ICdicmFpbnRyZWUnID8gJ2JyYWludHJlZWFjY2VsZXJhdGVkY2hlY2tvdXQnIDogJ2JyYWludHJlZSc7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QodmFsaWRQYXltZW50TWV0aG9kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgIC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCcmFpbnRyZWVJbml0aWFsaXphdGlvbkRhdGE+KHZhbGlkUGF5bWVudE1ldGhvZElkKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgQnJhaW50cmVlSG9zdFdpbmRvdyxcbiAgICBCcmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgQnJhaW50cmVlU2NyaXB0TG9hZGVyLFxuICAgIEJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5pbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCcmFpbnRyZWVGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9icmFpbnRyZWUtZmFzdGxhbmUtY3VzdG9tZXItc3RyYXRlZ3knO1xuaW1wb3J0IEJyYWludHJlZUZhc3RsYW5lVXRpbHMgZnJvbSAnLi9icmFpbnRyZWUtZmFzdGxhbmUtdXRpbHMnO1xuXG5jb25zdCBjcmVhdGVCcmFpbnRyZWVGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJyYWludHJlZUZhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PiB7XG4gICAgY29uc3QgYnJhaW50cmVlSG9zdFdpbmRvdzogQnJhaW50cmVlSG9zdFdpbmRvdyA9IHdpbmRvdztcbiAgICBjb25zdCBicmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlciA9IG5ldyBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcihwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKTtcbiAgICBjb25zdCBicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UgPSBuZXcgQnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlKFxuICAgICAgICBuZXcgQnJhaW50cmVlU2NyaXB0TG9hZGVyKFxuICAgICAgICAgICAgZ2V0U2NyaXB0TG9hZGVyKCksXG4gICAgICAgICAgICBicmFpbnRyZWVIb3N0V2luZG93LFxuICAgICAgICAgICAgYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIsXG4gICAgICAgICksXG4gICAgICAgIGJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgKTtcbiAgICBjb25zdCBicmFpbnRyZWVGYXN0bGFuZVV0aWxzID0gbmV3IEJyYWludHJlZUZhc3RsYW5lVXRpbHMoXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGJyYWludHJlZUludGVncmF0aW9uU2VydmljZSxcbiAgICApO1xuXG4gICAgcmV0dXJuIG5ldyBCcmFpbnRyZWVGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kocGF5bWVudEludGVncmF0aW9uU2VydmljZSwgYnJhaW50cmVlRmFzdGxhbmVVdGlscyk7XG59O1xuXG4vLyBJbmZvOiBicmFpbnRyZWUgbWV0aG9kIGlkIHdhcyBhZGRlZCBvbmx5IGZvciBBL0IgdGVzdGluZyBwdXJwb3Nlcy5cbi8vIFRoZSBtYWluIHJlYXNvbiB3aHkgd2UgY2FuJ3QgZ28gaW4gb3RoZXIgd2F5LCBiZWNhdXNlIGJyYWludHJlZWFjY2VsZXJhdGVkY2hlY2tvdXRcbi8vIG1heSBiZSB0dXJuZWQgb24gb25seSB3aGVuIEJFIGtub3dzIGN1c3RvbWVyJ3MgZW1haWwgYWRkcmVzcyAodG8gdW5kZXJzdGFuZCBzaG91bGQgd2Ugc2hvdyB0aGUgZmVhdHVyZSBmb3IgdGhlIHVzZXIgb3Igbm90KS5cbi8vIFNvIHsgaWQ6ICdicmFpbnRyZWUnIH0sIHNob3VsZCBiZSByZW1vdmVkIGFmdGVyIEEvQiB0ZXN0aW5nXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQnJhaW50cmVlRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JyYWludHJlZWFjY2VsZXJhdGVkY2hlY2tvdXQnIH0sXG4gICAgeyBpZDogJ2JyYWludHJlZScgfSxcbl0pO1xuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSB0cnkgdG8gY2FsbCBhIG1ldGhvZCB0aGF0IGlzIG9ubHkgYSBzdHViIGFuZCBoYXMgbm90XG4gKiBiZWVuIGZ1bGx5IGltcGxlbWVudGVkLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RJbXBsZW1lbnRlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdOb3QgaW1wbGVtZW50ZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdEltcGxlbWVudGVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm90X2ltcGxlbWVudGVkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEJyYWludHJlZURhdGFDb2xsZWN0b3IsXG4gICAgQnJhaW50cmVlU2RrLFxuICAgIEJyYWludHJlZVZpc2FDaGVja291dCxcbiAgICBWaXNhQ2hlY2tvdXRBZGRyZXNzLFxuICAgIFZpc2FDaGVja291dFBheW1lbnRTdWNjZXNzUGF5bG9hZCxcbiAgICBWaXNhQ2hlY2tvdXRUb2tlbml6ZWRQYXlsb2FkLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5pbXBvcnQge1xuICAgIEFkZHJlc3MsXG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIExlZ2FjeUFkZHJlc3MsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBOb3RJbXBsZW1lbnRlZEVycm9yLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBXaXRoQnJhaW50cmVlVmlzYUNoZWNrb3V0Q3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyB9IGZyb20gJy4vYnJhaW50cmVlLXZpc2EtY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJhaW50cmVlVmlzYUNoZWNrb3V0Q3VzdG9tZXJTdHJhdGVneSBpbXBsZW1lbnRzIEN1c3RvbWVyU3RyYXRlZ3kge1xuICAgIHByaXZhdGUgYnV0dG9uQ2xhc3NOYW1lID0gJ3Zpc2EtY2hlY2tvdXQtd3JhcHBlcic7XG4gICAgcHJpdmF0ZSBvbkVycm9yID0gbm9vcDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgZm9ybVBvc3RlcjogRm9ybVBvc3RlcixcbiAgICAgICAgcHJpdmF0ZSBicmFpbnRyZWVTZGs6IEJyYWludHJlZVNkayxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDdXN0b21lckluaXRpYWxpemVPcHRpb25zICYgV2l0aEJyYWludHJlZVZpc2FDaGVja291dEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgYnJhaW50cmVldmlzYWNoZWNrb3V0OiB2aXNhQ2hlY2tvdXRPcHRpb25zLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdmlzYUNoZWNrb3V0T3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwib3B0aW9ucy5icmFpbnRyZWV2aXNhY2hlY2tvdXRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgY29uc3QgY2hlY2tvdXQgPSBzdGF0ZS5nZXRDaGVja291dE9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuLCBjb25maWcgfSA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdG9yZUNvbmZpZyA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpO1xuXG4gICAgICAgIGlmICghY2xpZW50VG9rZW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYnJhaW50cmVlU2RrLmluaXRpYWxpemUoY2xpZW50VG9rZW4pO1xuXG4gICAgICAgIGNvbnN0IGJyYWludHJlZVZpc2FDaGVja291dCA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2RrLmdldEJyYWludHJlZVZpc2FDaGVja291dCgpO1xuXG4gICAgICAgIGNvbnN0IHZpc2FDaGVja291dEluc3RhbmNlID0gYXdhaXQgdGhpcy5icmFpbnRyZWVTZGsuZ2V0VmlzYUNoZWNrb3V0U2RrKGNvbmZpZy50ZXN0TW9kZSk7XG5cbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uRXJyb3IgfSA9IHZpc2FDaGVja291dE9wdGlvbnM7XG5cbiAgICAgICAgdGhpcy5vbkVycm9yID0gb25FcnJvciB8fCBub29wO1xuXG4gICAgICAgIGNvbnN0IGluaXRPcHRpb25zID0gYnJhaW50cmVlVmlzYUNoZWNrb3V0LmNyZWF0ZUluaXRPcHRpb25zKHtcbiAgICAgICAgICAgIHBheW1lbnRSZXF1ZXN0OiB7XG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBzdG9yZUNvbmZpZy5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgICAgIHN1YnRvdGFsOiBTdHJpbmcoY2hlY2tvdXQuc3VidG90YWwpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgbG9jYWxlOiBzdG9yZUNvbmZpZy5zdG9yZVByb2ZpbGUuc3RvcmVMYW5ndWFnZSxcbiAgICAgICAgICAgICAgICBzaGlwcGluZzoge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0U2hpcHBpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHNpZ25JbkJ1dHRvbiA9IHRoaXMuY3JlYXRlU2lnbkluQnV0dG9uKGNvbnRhaW5lciwgdGhpcy5idXR0b25DbGFzc05hbWUpO1xuXG4gICAgICAgIGF3YWl0IHZpc2FDaGVja291dEluc3RhbmNlLmluaXQoaW5pdE9wdGlvbnMpO1xuXG4gICAgICAgIHZpc2FDaGVja291dEluc3RhbmNlLm9uKFxuICAgICAgICAgICAgJ3BheW1lbnQuc3VjY2VzcycsXG4gICAgICAgICAgICAocGF5bWVudFN1Y2Nlc3NQYXlsb2FkOiBWaXNhQ2hlY2tvdXRQYXltZW50U3VjY2Vzc1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy50b2tlbml6ZVBheW1lbnQoYnJhaW50cmVlVmlzYUNoZWNrb3V0LCBwYXltZW50U3VjY2Vzc1BheWxvYWQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoKSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnJvcikpLFxuICAgICAgICApO1xuXG4gICAgICAgIHZpc2FDaGVja291dEluc3RhbmNlLm9uKCdwYXltZW50LmVycm9yJywgKF8sIGVycm9yKSA9PiB0aGlzLmhhbmRsZUVycm9yKGVycm9yKSk7XG5cbiAgICAgICAgc2lnbkluQnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmJyYWludHJlZVNkay5kZWluaXRpYWxpemUoKTtcbiAgICB9XG5cbiAgICBzaWduSW4oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKFxuICAgICAgICAgICAgJ0luIG9yZGVyIHRvIHNpZ24gaW4gdmlhIFZpc2FDaGVja291dCwgdGhlIHNob3BwZXIgbXVzdCBjbGljayBvbiBcIlZpc2EgQ2hlY2tvdXRcIiBidXR0b24uJyxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduT3V0KG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyKG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBvcHRpb25zPy5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrPy4oKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB0b2tlbml6ZVBheW1lbnQoXG4gICAgICAgIGJyYWludHJlZVZpc2FDaGVja291dDogQnJhaW50cmVlVmlzYUNoZWNrb3V0LFxuICAgICAgICBwYXltZW50OiBWaXNhQ2hlY2tvdXRQYXltZW50U3VjY2Vzc1BheWxvYWQsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICBicmFpbnRyZWVWaXNhQ2hlY2tvdXQudG9rZW5pemUocGF5bWVudCksXG4gICAgICAgICAgICB0aGlzLmJyYWludHJlZVNkay5nZXREYXRhQ29sbGVjdG9yT3JUaHJvdygpLFxuICAgICAgICBdKS50aGVuKChbcGF5bG9hZCwgZGV2aWNlRGF0YV0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nID0gc3RhdGUuZ2V0U2hpcHBpbmdBZGRyZXNzKCk7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3MoKTtcblxuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzcyA9IHRoaXMubWFwVG9WaXNhQ2hlY2tvdXRBZGRyZXNzKHNoaXBwaW5nKSxcbiAgICAgICAgICAgICAgICBiaWxsaW5nQWRkcmVzcyA9IHRoaXMubWFwVG9WaXNhQ2hlY2tvdXRBZGRyZXNzKGJpbGxpbmcpLFxuICAgICAgICAgICAgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc3RGb3JtKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICBiaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRldmljZURhdGEsXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHBvc3RGb3JtKFxuICAgICAgICBwYXltZW50RGF0YTogVmlzYUNoZWNrb3V0VG9rZW5pemVkUGF5bG9hZCxcbiAgICAgICAgZGF0YUNvbGxlY3RvcjogQnJhaW50cmVlRGF0YUNvbGxlY3RvcixcbiAgICApIHtcbiAgICAgICAgY29uc3QgeyB1c2VyRGF0YSwgYmlsbGluZ0FkZHJlc3MsIHNoaXBwaW5nQWRkcmVzcywgZGV0YWlsczogY2FyZEluZm9ybWF0aW9uIH0gPSBwYXltZW50RGF0YTtcbiAgICAgICAgY29uc3QgeyB1c2VyRW1haWwgfSA9IHVzZXJEYXRhO1xuICAgICAgICBjb25zdCB7IGRldmljZURhdGEgfSA9IGRhdGFDb2xsZWN0b3I7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybSgnL2NoZWNrb3V0LnBocCcsIHtcbiAgICAgICAgICAgIHBheW1lbnRfdHlwZTogcGF5bWVudERhdGEudHlwZSxcbiAgICAgICAgICAgIG5vbmNlOiBwYXltZW50RGF0YS5ub25jZSxcbiAgICAgICAgICAgIHByb3ZpZGVyOiAnYnJhaW50cmVldmlzYWNoZWNrb3V0JyxcbiAgICAgICAgICAgIGFjdGlvbjogJ3NldF9leHRlcm5hbF9jaGVja291dCcsXG4gICAgICAgICAgICBkZXZpY2VfZGF0YTogZGV2aWNlRGF0YSxcbiAgICAgICAgICAgIGNhcmRfaW5mb3JtYXRpb246IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB0eXBlOiBjYXJkSW5mb3JtYXRpb24uY2FyZFR5cGUsXG4gICAgICAgICAgICAgICAgbnVtYmVyOiBjYXJkSW5mb3JtYXRpb24ubGFzdFR3byxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgYmlsbGluZ19hZGRyZXNzOiBKU09OLnN0cmluZ2lmeSh0aGlzLmdldEFkZHJlc3ModXNlckVtYWlsLCBiaWxsaW5nQWRkcmVzcykpLFxuICAgICAgICAgICAgc2hpcHBpbmdfYWRkcmVzczogSlNPTi5zdHJpbmdpZnkodGhpcy5nZXRBZGRyZXNzKHVzZXJFbWFpbCwgc2hpcHBpbmdBZGRyZXNzKSksXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWFwVG9WaXNhQ2hlY2tvdXRBZGRyZXNzKGFkZHJlc3M/OiBBZGRyZXNzKTogVmlzYUNoZWNrb3V0QWRkcmVzcyB7XG4gICAgICAgIGlmICghYWRkcmVzcykge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpcnN0TmFtZTogYWRkcmVzcy5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogYWRkcmVzcy5sYXN0TmFtZSxcbiAgICAgICAgICAgIHBob25lTnVtYmVyOiBhZGRyZXNzLnBob25lLFxuICAgICAgICAgICAgc3RyZWV0QWRkcmVzczogYWRkcmVzcy5hZGRyZXNzMSxcbiAgICAgICAgICAgIGV4dGVuZGVkQWRkcmVzczogYWRkcmVzcy5hZGRyZXNzMixcbiAgICAgICAgICAgIGxvY2FsaXR5OiBhZGRyZXNzLmNpdHksXG4gICAgICAgICAgICByZWdpb246IGFkZHJlc3Muc3RhdGVPclByb3ZpbmNlQ29kZSxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBhZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogYWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QWRkcmVzcyhlbWFpbDogc3RyaW5nLCBhZGRyZXNzOiBWaXNhQ2hlY2tvdXRBZGRyZXNzID0ge30pOiBQYXJ0aWFsPExlZ2FjeUFkZHJlc3M+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgZmlyc3RfbmFtZTogYWRkcmVzcy5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0X25hbWU6IGFkZHJlc3MubGFzdE5hbWUsXG4gICAgICAgICAgICBwaG9uZV9udW1iZXI6IGFkZHJlc3MucGhvbmVOdW1iZXIsXG4gICAgICAgICAgICBhZGRyZXNzX2xpbmVfMTogYWRkcmVzcy5zdHJlZXRBZGRyZXNzLFxuICAgICAgICAgICAgYWRkcmVzc19saW5lXzI6IGFkZHJlc3MuZXh0ZW5kZWRBZGRyZXNzLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcy5sb2NhbGl0eSxcbiAgICAgICAgICAgIHN0YXRlOiBhZGRyZXNzLnJlZ2lvbixcbiAgICAgICAgICAgIGNvdW50cnlfY29kZTogYWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIHBvc3RhbF9jb2RlOiBhZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVTaWduSW5CdXR0b24oY29udGFpbmVySWQ6IHN0cmluZywgYnV0dG9uQ2xhc3M6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Y29udGFpbmVySWR9YCk7XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcHJvdmlkZWQgY29udGFpbmVyIElEIGlzIG5vdCB2YWxpZC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmluc2VydFZpc2FDaGVja291dEJ1dHRvbihjb250YWluZXIsIGJ1dHRvbkNsYXNzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluc2VydFZpc2FDaGVja291dEJ1dHRvbihjb250YWluZXI6IEVsZW1lbnQsIGJ1dHRvbkNsYXNzOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGJ1dHRvblNvdXJjZSA9XG4gICAgICAgICAgICAnaHR0cHM6Ly9zZWN1cmUuY2hlY2tvdXQudmlzYS5jb20vd2FsbGV0LXNlcnZpY2VzLXdlYi94by9idXR0b24ucG5nP2FjY2VwdENhbmFkaWFuVmlzYURlYml0PWZhbHNlJmNvYnJhbmQ9dHJ1ZSZoZWlnaHQ9MzQmd2lkdGg9MTc4JztcbiAgICAgICAgY29uc3QgYnV0dG9uVGVtcGxhdGUgPSBgXG4gICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgYWx0PVwiVmlzYSBDaGVja291dFwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJ2LWJ1dHRvblwiXG4gICAgICAgICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgc3JjPVwiJHtidXR0b25Tb3VyY2V9XCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGEgY2xhc3M9XCJ2LWxlYXJuIHYtbGVhcm4tZGVmYXVsdFwiIHN0eWxlPVwidGV4dC1hbGlnbjogcmlnaHQ7IGRpc3BsYXk6IGJsb2NrOyBmb250LXNpemU6IDEwcHg7IGNvbG9yOiAjMDAzMzY2O1wiIGhyZWY9XCIjXCIgZGF0YS1sb2NhbGU9XCJlbl9VU1wiPlRlbGwgTWUgTW9yZTwvYT5gO1xuXG4gICAgICAgIGNvbnN0IHZpc2FDaGVja291dEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIHZpc2FDaGVja291dEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICB2aXNhQ2hlY2tvdXRCdXR0b24uc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuICAgICAgICB2aXNhQ2hlY2tvdXRCdXR0b24uc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICB2aXNhQ2hlY2tvdXRCdXR0b24uc3R5bGUud2lkdGggPSAnbWF4LWNvbnRlbnQnO1xuXG4gICAgICAgIHZpc2FDaGVja291dEJ1dHRvbi5jbGFzc05hbWUgPSBidXR0b25DbGFzcztcbiAgICAgICAgdmlzYUNoZWNrb3V0QnV0dG9uLmlubmVySFRNTCA9IGJ1dHRvblRlbXBsYXRlO1xuXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh2aXNhQ2hlY2tvdXRCdXR0b24pO1xuXG4gICAgICAgIHJldHVybiB2aXNhQ2hlY2tvdXRCdXR0b247XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogRXJyb3IpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub25FcnJvcihlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIEJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgQnJhaW50cmVlU2NyaXB0TG9hZGVyLFxuICAgIEJyYWludHJlZVNkayxcbiAgICBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcixcbiAgICBWaXNhQ2hlY2tvdXRIb3N0V2luZG93LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5pbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCcmFpbnRyZWVWaXNhQ2hlY2tvdXRDdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vYnJhaW50cmVlLXZpc2EtY2hlY2tvdXQtY3VzdG9tZXItc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCcmFpbnRyZWVWaXNhQ2hlY2tvdXRDdXN0b21lclN0cmF0ZWd5OiBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCcmFpbnRyZWVWaXNhQ2hlY2tvdXRDdXN0b21lclN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+IHtcbiAgICBjb25zdCBob3N0V2luZG93OiBWaXNhQ2hlY2tvdXRIb3N0V2luZG93ICYgQnJhaW50cmVlSG9zdFdpbmRvdyA9IHdpbmRvdztcbiAgICBjb25zdCBicmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlciA9IG5ldyBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcihwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKTtcbiAgICBjb25zdCBicmFpbnRyZWVTZGsgPSBuZXcgQnJhaW50cmVlU2RrKFxuICAgICAgICBuZXcgQnJhaW50cmVlU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpLCBob3N0V2luZG93LCBicmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlciksXG4gICAgKTtcblxuICAgIHJldHVybiBuZXcgQnJhaW50cmVlVmlzYUNoZWNrb3V0Q3VzdG9tZXJTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlRm9ybVBvc3RlcigpLFxuICAgICAgICBicmFpbnRyZWVTZGssXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCcmFpbnRyZWVWaXNhQ2hlY2tvdXRDdXN0b21lclN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JyYWludHJlZXZpc2FjaGVja291dCcgfSxcbl0pO1xuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBzaG9wcGVyIHRyaWVzIHRvIHNpZ24gaW4gYXMgYSBndWVzdCBidXRcbiAqIHRoZXkgYXJlIGFscmVhZHkgc2lnbmVkIGluIGFzIGEgcmVnaXN0ZXJlZCBjdXN0b21lci5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnV5Tm93Q2FydENyZWF0aW9uRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZCBkdXJpbmcgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uIHByb2Nlc3MuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnQnV5Tm93Q2FydENyZWF0aW9uRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnYnV5X25vd19jYXJ0X2NyZWF0aW9uX2Vycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc05pbCwgb21pdEJ5IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgUGF5cGFsU3R5bGVPcHRpb25zIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9icmFpbnRyZWUtdXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlPzogUGF5cGFsU3R5bGVPcHRpb25zKTogUGF5cGFsU3R5bGVPcHRpb25zIHtcbiAgICBjb25zdCB7IGNvbG9yLCBmdW5kaW5naWNvbnMsIGhlaWdodCA9IDQwLCBsYXlvdXQsIHNoYXBlLCBzaXplLCB0YWdsaW5lIH0gPSBzdHlsZSB8fCB7fTtcblxuICAgIGNvbnN0IHZhbGlkU3R5bGVzID0ge1xuICAgICAgICBjb2xvcixcbiAgICAgICAgZnVuZGluZ2ljb25zLFxuICAgICAgICBoZWlnaHQ6IGdldFZhbGlkSGVpZ2h0KGhlaWdodCksXG4gICAgICAgIGxheW91dCxcbiAgICAgICAgc2hhcGU6IHNoYXBlIHx8ICdyZWN0JyxcbiAgICAgICAgc2l6ZSxcbiAgICAgICAgdGFnbGluZSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIG9taXRCeSh2YWxpZFN0eWxlcywgaXNOaWwpO1xufVxuXG5mdW5jdGlvbiBnZXRWYWxpZEhlaWdodChoZWlnaHQ6IG51bWJlciB8IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3QgbWluSGVpZ2h0ID0gMjU7XG4gICAgY29uc3QgZGVmYXVsdEhlaWdodCA9IDQwO1xuICAgIGNvbnN0IG1heEhlaWdodCA9IDU1O1xuXG4gICAgY29uc3QgY3VycmVudEhlaWdodCA9IE51bWJlcihoZWlnaHQpO1xuXG4gICAgaWYgKCFjdXJyZW50SGVpZ2h0IHx8IE51bWJlci5pc05hTihjdXJyZW50SGVpZ2h0KSkge1xuICAgICAgICByZXR1cm4gZGVmYXVsdEhlaWdodDtcbiAgICB9XG5cbiAgICBpZiAoY3VycmVudEhlaWdodCA+IG1heEhlaWdodCkge1xuICAgICAgICByZXR1cm4gbWF4SGVpZ2h0O1xuICAgIH1cblxuICAgIGlmIChjdXJyZW50SGVpZ2h0IDwgbWluSGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiBtaW5IZWlnaHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1cnJlbnRIZWlnaHQ7XG59XG4iLCJpbXBvcnQgeyBGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVFcnJvcixcbiAgICBCcmFpbnRyZWVIb3N0V2luZG93LFxuICAgIEJyYWludHJlZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBCcmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgQnJhaW50cmVlUGF5cGFsU2RrQ3JlYXRvckNvbmZpZyxcbiAgICBCcmFpbnRyZWVUb2tlbml6ZVBheWxvYWQsXG4gICAgaXNCcmFpbnRyZWVFcnJvcixcbiAgICBQYXlwYWxBdXRob3JpemVEYXRhLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5pbXBvcnQge1xuICAgIEJ1eU5vd0NhcnRDcmVhdGlvbkVycm9yLFxuICAgIEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSxcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgU3RhbmRhcmRFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBnZXRWYWxpZEJ1dHRvblN0eWxlIGZyb20gJy4uL2dldC12YWxpZC1idXR0b24tc3R5bGUnO1xuaW1wb3J0IG1hcFRvQnJhaW50cmVlU2hpcHBpbmdBZGRyZXNzT3ZlcnJpZGUgZnJvbSAnLi4vbWFwLXRvLWJyYWludHJlZS1zaGlwcGluZy1hZGRyZXNzLW92ZXJyaWRlJztcblxuaW1wb3J0IEJyYWludHJlZVBheXBhbEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJyYWludHJlZVBheXBhbEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JyYWludHJlZS1wYXlwYWwtYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJyYWludHJlZVBheXBhbEJ1dHRvblN0cmF0ZWd5IGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBidXlOb3dDYXJ0SWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgZm9ybVBvc3RlcjogRm9ybVBvc3RlcixcbiAgICAgICAgcHJpdmF0ZSBicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2U6IEJyYWludHJlZUludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBicmFpbnRyZWVIb3N0V2luZG93OiBCcmFpbnRyZWVIb3N0V2luZG93LFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQnJhaW50cmVlUGF5cGFsQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgYnJhaW50cmVlcGF5cGFsLCBjb250YWluZXJJZCwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFicmFpbnRyZWVwYXlwYWwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5icmFpbnRyZWVwYXlwYWxcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgbGV0IGN1cnJlbmN5Q29kZTogc3RyaW5nO1xuXG4gICAgICAgIGlmIChicmFpbnRyZWVwYXlwYWwuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghYnJhaW50cmVlcGF5cGFsLmN1cnJlbmN5Q29kZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYnJhaW50cmVlcGF5cGFsY3JlZGl0LmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZSA9IGJyYWludHJlZXBheXBhbC5jdXJyZW5jeUNvZGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO1xuXG4gICAgICAgICAgICBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY3VycmVuY3lDb2RlID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJyYWludHJlZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuLCBjb25maWcsIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWNsaWVudFRva2VuIHx8ICFpbml0aWFsaXphdGlvbkRhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheXBhbENoZWNrb3V0T3B0aW9uczogUGFydGlhbDxCcmFpbnRyZWVQYXlwYWxTZGtDcmVhdG9yQ29uZmlnPiA9IHtcbiAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBpbnRlbnQ6IGluaXRpYWxpemF0aW9uRGF0YS5pbnRlbnQsXG4gICAgICAgICAgICBpc0NyZWRpdEVuYWJsZWQ6IGluaXRpYWxpemF0aW9uRGF0YS5pc0NyZWRpdEVuYWJsZWQsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQ2hlY2tvdXRTdWNjZXNzQ2FsbGJhY2sgPSAoXG4gICAgICAgICAgICBicmFpbnRyZWVQYXlwYWxDaGVja291dDogQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgICAgICkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQYXlQYWxCdXR0b24oXG4gICAgICAgICAgICAgICAgYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgICAgICAgICAgICAgYnJhaW50cmVlcGF5cGFsLFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICEhY29uZmlnLnRlc3RNb2RlLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcGF5cGFsQ2hlY2tvdXRFcnJvckNhbGxiYWNrID0gKGVycm9yOiBCcmFpbnRyZWVFcnJvcikgPT5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGNvbnRhaW5lcklkLCBicmFpbnRyZWVwYXlwYWwub25FcnJvcik7XG5cbiAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZShjbGllbnRUb2tlbik7XG4gICAgICAgIGF3YWl0IHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheXBhbENoZWNrb3V0KFxuICAgICAgICAgICAgcGF5cGFsQ2hlY2tvdXRPcHRpb25zLFxuICAgICAgICAgICAgcGF5cGFsQ2hlY2tvdXRTdWNjZXNzQ2FsbGJhY2ssXG4gICAgICAgICAgICBwYXlwYWxDaGVja291dEVycm9yQ2FsbGJhY2ssXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS50ZWFyZG93bigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyUGF5UGFsQnV0dG9uKFxuICAgICAgICBicmFpbnRyZWVQYXlwYWxDaGVja291dDogQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgICAgIGJyYWludHJlZXBheXBhbDogQnJhaW50cmVlUGF5cGFsQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHRlc3RNb2RlOiBib29sZWFuLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IHN0eWxlLCBzaG91bGRQcm9jZXNzUGF5bWVudCwgb25BdXRob3JpemVFcnJvciwgb25FbGlnaWJpbGl0eUZhaWx1cmUgfSA9XG4gICAgICAgICAgICBicmFpbnRyZWVwYXlwYWw7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsIH0gPSB0aGlzLmJyYWludHJlZUhvc3RXaW5kb3c7XG5cbiAgICAgICAgaWYgKHBheXBhbCkge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uUmVuZGVyID0gcGF5cGFsLkJ1dHRvbnMoe1xuICAgICAgICAgICAgICAgIGVudjogdGVzdE1vZGUgPyAnc2FuZGJveCcgOiAncHJvZHVjdGlvbicsXG4gICAgICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsLkZVTkRJTkcuUEFZUEFMLFxuICAgICAgICAgICAgICAgIHN0eWxlOiBnZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlKSxcbiAgICAgICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cFBheW1lbnQoYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsIGJyYWludHJlZXBheXBhbCwgbWV0aG9kSWQpLFxuICAgICAgICAgICAgICAgIG9uQXBwcm92ZTogKGF1dGhvcml6ZURhdGE6IFBheXBhbEF1dGhvcml6ZURhdGEpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW5pemVQYXltZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXplRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyYWludHJlZVBheXBhbENoZWNrb3V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRQcm9jZXNzUGF5bWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQXV0aG9yaXplRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHBheXBhbEJ1dHRvblJlbmRlci5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b25SZW5kZXIucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob25FbGlnaWJpbGl0eUZhaWx1cmUgJiYgdHlwZW9mIG9uRWxpZ2liaWxpdHlGYWlsdXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25FbGlnaWJpbGl0eUZhaWx1cmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVySWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBzZXR1cFBheW1lbnQoXG4gICAgICAgIGJyYWludHJlZVBheXBhbENoZWNrb3V0OiBCcmFpbnRyZWVQYXlwYWxDaGVja291dCxcbiAgICAgICAgYnJhaW50cmVlcGF5cGFsOiBCcmFpbnRyZWVQYXlwYWxCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPHN0cmluZyB8IHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBvblBheW1lbnRFcnJvciwgc2hpcHBpbmdBZGRyZXNzLCBidXlOb3dJbml0aWFsaXplT3B0aW9ucyB9ID0gYnJhaW50cmVlcGF5cGFsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBidXlOb3dDYXJ0ID1cbiAgICAgICAgICAgICAgICB0eXBlb2YgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgICAgICAgICA/IGF3YWl0IHRoaXMuY3JlYXRlQnV5Tm93Q2FydChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KCksXG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdGhpcy5idXlOb3dDYXJ0SWQgPSBidXlOb3dDYXJ0Py5pZDtcblxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbWVyID0gc3RhdGUuZ2V0Q3VzdG9tZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhPiA9XG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuXG4gICAgICAgICAgICBjb25zdCBhbW91bnQgPSBidXlOb3dDYXJ0ID8gYnV5Tm93Q2FydC5jYXJ0QW1vdW50IDogc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jYXJ0QW1vdW50O1xuICAgICAgICAgICAgY29uc3QgY3VycmVuY3lDb2RlID0gYnV5Tm93Q2FydFxuICAgICAgICAgICAgICAgID8gYnJhaW50cmVlcGF5cGFsLmN1cnJlbmN5Q29kZVxuICAgICAgICAgICAgICAgIDogc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuXG4gICAgICAgICAgICBjb25zdCBhZGRyZXNzID0gc2hpcHBpbmdBZGRyZXNzIHx8IGN1c3RvbWVyPy5hZGRyZXNzZXNbMF07XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzc092ZXJyaWRlID0gYWRkcmVzc1xuICAgICAgICAgICAgICAgID8gbWFwVG9CcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3NPdmVycmlkZShhZGRyZXNzKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQuY3JlYXRlUGF5bWVudCh7XG4gICAgICAgICAgICAgICAgZmxvdzogJ2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICBlbmFibGVTaGlwcGluZ0FkZHJlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzRWRpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzc092ZXJyaWRlLFxuICAgICAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIG9mZmVyQ3JlZGl0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQ6IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5pbnRlbnQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIGlmIChvblBheW1lbnRFcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChpc0JyYWludHJlZUVycm9yKGVycm9yKSB8fCBlcnJvciBpbnN0YW5jZW9mIFN0YW5kYXJkRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgb25QYXltZW50RXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHRva2VuaXplUGF5bWVudChcbiAgICAgICAgYXV0aG9yaXplRGF0YTogUGF5cGFsQXV0aG9yaXplRGF0YSxcbiAgICAgICAgYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQ6IEJyYWludHJlZVBheXBhbENoZWNrb3V0LFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBzaG91bGRQcm9jZXNzUGF5bWVudD86IGJvb2xlYW4sXG4gICAgICAgIG9uRXJyb3I/OiAoZXJyb3I6IEJyYWludHJlZUVycm9yIHwgU3RhbmRhcmRFcnJvcikgPT4gdm9pZCxcbiAgICApOiBQcm9taXNlPEJyYWludHJlZVRva2VuaXplUGF5bG9hZCB8IHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGV2aWNlRGF0YSB9ID0gYXdhaXQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0RGF0YUNvbGxlY3Rvcih7XG4gICAgICAgICAgICAgICAgcGF5cGFsOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB0b2tlbml6ZVBheWxvYWQgPSBhd2FpdCBicmFpbnRyZWVQYXlwYWxDaGVja291dC50b2tlbml6ZVBheW1lbnQoYXV0aG9yaXplRGF0YSk7XG4gICAgICAgICAgICBjb25zdCB7IGRldGFpbHMsIG5vbmNlIH0gPSB0b2tlbml6ZVBheWxvYWQ7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UubWFwVG9MZWdhY3lCaWxsaW5nQWRkcmVzcyhkZXRhaWxzKTtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UubWFwVG9MZWdhY3lTaGlwcGluZ0FkZHJlc3MoZGV0YWlscyk7XG5cbiAgICAgICAgICAgIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybSgnL2NoZWNrb3V0LnBocCcsIHtcbiAgICAgICAgICAgICAgICBwYXltZW50X3R5cGU6ICdwYXlwYWwnLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBhY3Rpb246IHNob3VsZFByb2Nlc3NQYXltZW50ID8gJ3Byb2Nlc3NfcGF5bWVudCcgOiAnc2V0X2V4dGVybmFsX2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICBub25jZSxcbiAgICAgICAgICAgICAgICBkZXZpY2VfZGF0YTogZGV2aWNlRGF0YSxcbiAgICAgICAgICAgICAgICBiaWxsaW5nX2FkZHJlc3M6IEpTT04uc3RyaW5naWZ5KGJpbGxpbmdBZGRyZXNzKSxcbiAgICAgICAgICAgICAgICBzaGlwcGluZ19hZGRyZXNzOiBKU09OLnN0cmluZ2lmeShzaGlwcGluZ0FkZHJlc3MpLFxuICAgICAgICAgICAgICAgIC4uLih0aGlzLmJ1eU5vd0NhcnRJZCAmJiB7IGNhcnRfaWQ6IHRoaXMuYnV5Tm93Q2FydElkIH0pLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0b2tlbml6ZVBheWxvYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChpc0JyYWludHJlZUVycm9yKGVycm9yKSB8fCBlcnJvciBpbnN0YW5jZW9mIFN0YW5kYXJkRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlQnV5Tm93Q2FydChidXlOb3dDYXJkUmVxdWVzdEJvZHk/OiBCdXlOb3dDYXJ0UmVxdWVzdEJvZHkgfCB2b2lkKSB7XG4gICAgICAgIGlmICghYnV5Tm93Q2FyZFJlcXVlc3RCb2R5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydCk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0KGJ1eU5vd0NhcmRSZXF1ZXN0Qm9keSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQnV5Tm93Q2FydENyZWF0aW9uRXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoXG4gICAgICAgIGVycm9yOiB1bmtub3duLFxuICAgICAgICBidXR0b25Db250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBvbkVycm9yQ2FsbGJhY2s/OiAoZXJyb3I6IEJyYWludHJlZUVycm9yIHwgU3RhbmRhcmRFcnJvcikgPT4gdm9pZCxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChidXR0b25Db250YWluZXJJZCk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3JDYWxsYmFjayAmJiBpc0JyYWludHJlZUVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgb25FcnJvckNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5pbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgQnJhaW50cmVlSG9zdFdpbmRvdyxcbiAgICBCcmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgQnJhaW50cmVlU2NyaXB0TG9hZGVyLFxuICAgIEJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5pbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCcmFpbnRyZWVQYXlwYWxCdXR0b25TdHJhdGVneSBmcm9tICcuL2JyYWludHJlZS1wYXlwYWwtYnV0dG9uLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQnJhaW50cmVlUGF5cGFsQnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJyYWludHJlZVBheXBhbEJ1dHRvblN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+IHtcbiAgICBjb25zdCBicmFpbnRyZWVIb3N0V2luZG93OiBCcmFpbnRyZWVIb3N0V2luZG93ID0gd2luZG93O1xuICAgIGNvbnN0IGJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyID0gbmV3IEJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpO1xuICAgIGNvbnN0IGJyYWludHJlZUludGVncmF0aW9uU2VydmljZSA9IG5ldyBCcmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UoXG4gICAgICAgIG5ldyBCcmFpbnRyZWVTY3JpcHRMb2FkZXIoXG4gICAgICAgICAgICBnZXRTY3JpcHRMb2FkZXIoKSxcbiAgICAgICAgICAgIGJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgICAgICAgICBicmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcixcbiAgICAgICAgKSxcbiAgICAgICAgYnJhaW50cmVlSG9zdFdpbmRvdyxcbiAgICApO1xuXG4gICAgcmV0dXJuIG5ldyBCcmFpbnRyZWVQYXlwYWxCdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlRm9ybVBvc3RlcigpLFxuICAgICAgICBicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCcmFpbnRyZWVQYXlwYWxCdXR0b25TdHJhdGVneSwgW3sgaWQ6ICdicmFpbnRyZWVwYXlwYWwnIH1dKTtcbiIsImltcG9ydCB7IEZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuXG5pbXBvcnQge1xuICAgIEJyYWludHJlZUVycm9yLFxuICAgIEJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgQnJhaW50cmVlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIEJyYWludHJlZUludGVncmF0aW9uU2VydmljZSxcbiAgICBCcmFpbnRyZWVNZXNzYWdlcyxcbiAgICBCcmFpbnRyZWVQYXlwYWxDaGVja291dCxcbiAgICBCcmFpbnRyZWVQYXlwYWxTZGtDcmVhdG9yQ29uZmlnLFxuICAgIEJyYWludHJlZVRva2VuaXplUGF5bG9hZCxcbiAgICBpc0JyYWludHJlZUVycm9yLFxuICAgIE1lc3NhZ2luZ1BsYWNlbWVudHMsXG4gICAgUGF5cGFsQXV0aG9yaXplRGF0YSxcbiAgICBQYXlwYWxCdXR0b25TdHlsZUxhYmVsT3B0aW9uLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5pbXBvcnQge1xuICAgIEJ1eU5vd0NhcnRDcmVhdGlvbkVycm9yLFxuICAgIEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSxcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgU3RhbmRhcmRFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBpc0V4cGVyaW1lbnRFbmFibGVkIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcblxuaW1wb3J0IGdldFZhbGlkQnV0dG9uU3R5bGUgZnJvbSAnLi4vZ2V0LXZhbGlkLWJ1dHRvbi1zdHlsZSc7XG5pbXBvcnQgbWFwVG9CcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3NPdmVycmlkZSBmcm9tICcuLi9tYXAtdG8tYnJhaW50cmVlLXNoaXBwaW5nLWFkZHJlc3Mtb3ZlcnJpZGUnO1xuXG5pbXBvcnQgQnJhaW50cmVlUGF5cGFsQ3JlZGl0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQnJhaW50cmVlUGF5cGFsQ3JlZGl0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYnJhaW50cmVlLXBheXBhbC1jcmVkaXQtYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJyYWludHJlZVBheXBhbENyZWRpdEJ1dHRvblN0cmF0ZWd5IGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBidXlOb3dDYXJ0SWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgZm9ybVBvc3RlcjogRm9ybVBvc3RlcixcbiAgICAgICAgcHJpdmF0ZSBicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2U6IEJyYWludHJlZUludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBicmFpbnRyZWVNZXNzYWdlczogQnJhaW50cmVlTWVzc2FnZXMsXG4gICAgICAgIHByaXZhdGUgYnJhaW50cmVlSG9zdFdpbmRvdzogQnJhaW50cmVlSG9zdFdpbmRvdyxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zICYgV2l0aEJyYWludHJlZVBheXBhbENyZWRpdEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGJyYWludHJlZXBheXBhbGNyZWRpdCwgY29udGFpbmVySWQsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYnJhaW50cmVlcGF5cGFsY3JlZGl0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYnJhaW50cmVlcGF5cGFsY3JlZGl0XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGxldCBjdXJyZW5jeUNvZGU6IHN0cmluZztcblxuICAgICAgICBpZiAoYnJhaW50cmVlcGF5cGFsY3JlZGl0LmJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIWJyYWludHJlZXBheXBhbGNyZWRpdC5jdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJyYWludHJlZXBheXBhbGNyZWRpdC5jdXJyZW5jeUNvZGVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGUgPSBicmFpbnRyZWVwYXlwYWxjcmVkaXQuY3VycmVuY3lDb2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKTtcblxuICAgICAgICAgICAgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZSA9IHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCcmFpbnRyZWVJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiwgY29uZmlnLCBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFjbGllbnRUb2tlbiB8fCAhaW5pdGlhbGl6YXRpb25EYXRhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXlwYWxDaGVja291dE9wdGlvbnM6IFBhcnRpYWw8QnJhaW50cmVlUGF5cGFsU2RrQ3JlYXRvckNvbmZpZz4gPSB7XG4gICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgaW50ZW50OiBpbml0aWFsaXphdGlvbkRhdGEuaW50ZW50LFxuICAgICAgICAgICAgaXNDcmVkaXRFbmFibGVkOiBpbml0aWFsaXphdGlvbkRhdGEuaXNDcmVkaXRFbmFibGVkLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFRPRE86IHJlbW92ZSBiYW5uZXIgcmVuZGVyaW5nIGltcGxlbWVudGF0aW9uIGluIHRoaXMgZmlsZSB3aGVuIFBBWVBBTC01NjYzLmhpZGVfYnJhaW50cmVlX2NhcmRfYmFubmVyX2ltcGxlbWVudGF0aW9uX2luX2NoZWNrb3V0X3NkayB3aWxsIGJlIHJvbGxlZCBvdXQgdG8gMTAwJVxuICAgICAgICBjb25zdCBmZWF0dXJlcyA9IHN0YXRlLmdldFN0b3JlQ29uZmlnKCk/LmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXMgPz8ge307XG4gICAgICAgIGNvbnN0IGlzQmFubmVySW1wbGVtZW50YXRpb25EaXNhYmxlZCA9IGlzRXhwZXJpbWVudEVuYWJsZWQoXG4gICAgICAgICAgICBmZWF0dXJlcyxcbiAgICAgICAgICAgICdQQVlQQUwtNTY2My5oaWRlX2JyYWludHJlZV9jYXJkX2Jhbm5lcl9pbXBsZW1lbnRhdGlvbl9pbl9jaGVja291dF9zZGsnLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbENoZWNrb3V0U3VjY2Vzc0NhbGxiYWNrID0gKFxuICAgICAgICAgICAgYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQ6IEJyYWludHJlZVBheXBhbENoZWNrb3V0LFxuICAgICAgICApID0+IHtcbiAgICAgICAgICAgIGlmICghaXNCYW5uZXJJbXBsZW1lbnRhdGlvbkRpc2FibGVkICYmIGJyYWludHJlZXBheXBhbGNyZWRpdC5tZXNzYWdpbmdDb250YWluZXJJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUGF5UGFsTWVzc2FnZXMobWV0aG9kSWQsIGJyYWludHJlZXBheXBhbGNyZWRpdC5tZXNzYWdpbmdDb250YWluZXJJZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyUGF5UGFsQnV0dG9uKFxuICAgICAgICAgICAgICAgIGJyYWludHJlZVBheXBhbENoZWNrb3V0LFxuICAgICAgICAgICAgICAgIGJyYWludHJlZXBheXBhbGNyZWRpdCxcbiAgICAgICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAhIWNvbmZpZy50ZXN0TW9kZSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHBheXBhbENoZWNrb3V0RXJyb3JDYWxsYmFjayA9IChlcnJvcjogQnJhaW50cmVlRXJyb3IpID0+XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBjb250YWluZXJJZCwgYnJhaW50cmVlcGF5cGFsY3JlZGl0Lm9uRXJyb3IpO1xuXG4gICAgICAgIHRoaXMuYnJhaW50cmVlSW50ZWdyYXRpb25TZXJ2aWNlLmluaXRpYWxpemUoY2xpZW50VG9rZW4pO1xuICAgICAgICBhd2FpdCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlwYWxDaGVja291dChcbiAgICAgICAgICAgIHBheXBhbENoZWNrb3V0T3B0aW9ucyxcbiAgICAgICAgICAgIHBheXBhbENoZWNrb3V0U3VjY2Vzc0NhbGxiYWNrLFxuICAgICAgICAgICAgcGF5cGFsQ2hlY2tvdXRFcnJvckNhbGxiYWNrLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UudGVhcmRvd24oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclBheVBhbE1lc3NhZ2VzKG1ldGhvZElkOiBzdHJpbmcsIG1lc3NhZ2luZ0NvbnRhaW5lcklkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5icmFpbnRyZWVNZXNzYWdlcy5yZW5kZXIobWV0aG9kSWQsIG1lc3NhZ2luZ0NvbnRhaW5lcklkLCBNZXNzYWdpbmdQbGFjZW1lbnRzLkNBUlQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyUGF5UGFsQnV0dG9uKFxuICAgICAgICBicmFpbnRyZWVQYXlwYWxDaGVja291dDogQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgICAgIGJyYWludHJlZXBheXBhbGNyZWRpdDogQnJhaW50cmVlUGF5cGFsQ3JlZGl0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHRlc3RNb2RlOiBib29sZWFuLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IHN0eWxlLCBzaG91bGRQcm9jZXNzUGF5bWVudCwgb25BdXRob3JpemVFcnJvciwgb25FbGlnaWJpbGl0eUZhaWx1cmUgfSA9XG4gICAgICAgICAgICBicmFpbnRyZWVwYXlwYWxjcmVkaXQ7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsIH0gPSB0aGlzLmJyYWludHJlZUhvc3RXaW5kb3c7XG5cbiAgICAgICAgbGV0IGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSBmYWxzZTtcblxuICAgICAgICBpZiAocGF5cGFsKSB7XG4gICAgICAgICAgICBjb25zdCBmdW5kaW5nU291cmNlcyA9IFtwYXlwYWwuRlVORElORy5QQVlMQVRFUiwgcGF5cGFsLkZVTkRJTkcuQ1JFRElUXTtcblxuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZXMuZm9yRWFjaCgoZnVuZGluZ1NvdXJjZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvblN0eWxlID1cbiAgICAgICAgICAgICAgICAgICAgZnVuZGluZ1NvdXJjZSA9PT0gcGF5cGFsLkZVTkRJTkcuQ1JFRElUXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBQYXlwYWxCdXR0b25TdHlsZUxhYmVsT3B0aW9uLkNSRURJVCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IGdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvblJlbmRlciA9IHBheXBhbC5CdXR0b25zKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudjogdGVzdE1vZGUgPyAnc2FuZGJveCcgOiAncHJvZHVjdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5kaW5nU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGJ1dHRvblN0eWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cFBheW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyYWludHJlZVBheXBhbENoZWNrb3V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmFpbnRyZWVwYXlwYWxjcmVkaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFwcHJvdmU6IChhdXRob3JpemVEYXRhOiBQYXlwYWxBdXRob3JpemVEYXRhKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW5pemVQYXltZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JpemVEYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmFpbnRyZWVQYXlwYWxDaGVja291dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFByb2Nlc3NQYXltZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkF1dGhvcml6ZUVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXlwYWxCdXR0b25SZW5kZXIuaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b25SZW5kZXIucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5cGFsLkZVTkRJTkcuQ1JFRElUICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVsaWdpYmlsaXR5RmFpbHVyZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIG9uRWxpZ2liaWxpdHlGYWlsdXJlID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGNvbmRpdGlvbiBpcyByZWxhdGVkIHRvIHBheXBhbC5GVU5ESU5HLkNSRURJVCBiZWNhdXNlIHdoZW4gcGF5cGFsLkZVTkRJTkcuUEFZTEFURVIgaXMgbm90IGVsaWdpYmxlIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENSRURJVCBidXR0b24gc2hvdWxkIGJlIGNvbmZpZ3VyZWQgYW5kIHRyaWdnZXJlZCB0byByZW5kZXIgd2l0aCBlbGlnaWJpbGl0eSBjaGVja1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGlmIGl0IGlzIG5vdCBlbGlnaWJsZSwgdGhlbiBvbkVsaWdpYmlsaXR5RmFpbHVyZSBjYWxsYmFjayBzaG91bGQgYmUgY2FsbGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVsaWdpYmlsaXR5RmFpbHVyZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbCB8fCAhaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXJJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNldHVwUGF5bWVudChcbiAgICAgICAgYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQ6IEJyYWludHJlZVBheXBhbENoZWNrb3V0LFxuICAgICAgICBicmFpbnRyZWVwYXlwYWxjcmVkaXQ6IEJyYWludHJlZVBheXBhbENyZWRpdEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICk6IFByb21pc2U8c3RyaW5nIHwgdm9pZD4ge1xuICAgICAgICBjb25zdCB7IG9uUGF5bWVudEVycm9yLCBzaGlwcGluZ0FkZHJlc3MsIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zIH0gPSBicmFpbnRyZWVwYXlwYWxjcmVkaXQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJ1eU5vd0NhcnQgPVxuICAgICAgICAgICAgICAgIHR5cGVvZiBidXlOb3dJbml0aWFsaXplT3B0aW9ucz8uZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5ID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgdGhpcy5jcmVhdGVCdXlOb3dDYXJ0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkoKSxcbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0aGlzLmJ1eU5vd0NhcnRJZCA9IGJ1eU5vd0NhcnQ/LmlkO1xuXG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBzdGF0ZS5nZXRDdXN0b21lcigpO1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxCcmFpbnRyZWVJbml0aWFsaXphdGlvbkRhdGE+ID1cbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IGJ1eU5vd0NhcnQgPyBidXlOb3dDYXJ0LmNhcnRBbW91bnQgOiBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmNhcnRBbW91bnQ7IC8vIHN0YXRlLmdldENoZWNrb3V0T3JUaHJvdygpLm91dHN0YW5kaW5nQmFsYW5jZVxuICAgICAgICAgICAgY29uc3QgY3VycmVuY3lDb2RlID0gYnV5Tm93Q2FydFxuICAgICAgICAgICAgICAgID8gYnJhaW50cmVlcGF5cGFsY3JlZGl0LmN1cnJlbmN5Q29kZVxuICAgICAgICAgICAgICAgIDogc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuXG4gICAgICAgICAgICBjb25zdCBhZGRyZXNzID0gc2hpcHBpbmdBZGRyZXNzIHx8IGN1c3RvbWVyPy5hZGRyZXNzZXNbMF07XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzc092ZXJyaWRlID0gYWRkcmVzc1xuICAgICAgICAgICAgICAgID8gbWFwVG9CcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3NPdmVycmlkZShhZGRyZXNzKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQuY3JlYXRlUGF5bWVudCh7XG4gICAgICAgICAgICAgICAgZmxvdzogJ2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICBlbmFibGVTaGlwcGluZ0FkZHJlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzRWRpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzc092ZXJyaWRlLFxuICAgICAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIG9mZmVyQ3JlZGl0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGludGVudDogcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LmludGVudCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgICAgICAgaWYgKG9uUGF5bWVudEVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzQnJhaW50cmVlRXJyb3IoZXJyb3IpIHx8IGVycm9yIGluc3RhbmNlb2YgU3RhbmRhcmRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBvblBheW1lbnRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgdG9rZW5pemVQYXltZW50KFxuICAgICAgICBhdXRob3JpemVEYXRhOiBQYXlwYWxBdXRob3JpemVEYXRhLFxuICAgICAgICBicmFpbnRyZWVQYXlwYWxDaGVja291dDogQnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHNob3VsZFByb2Nlc3NQYXltZW50PzogYm9vbGVhbixcbiAgICAgICAgb25FcnJvcj86IChlcnJvcjogQnJhaW50cmVlRXJyb3IgfCBTdGFuZGFyZEVycm9yKSA9PiB2b2lkLFxuICAgICk6IFByb21pc2U8QnJhaW50cmVlVG9rZW5pemVQYXlsb2FkIHwgdm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBkZXZpY2VEYXRhIH0gPSBhd2FpdCB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5nZXREYXRhQ29sbGVjdG9yKHtcbiAgICAgICAgICAgICAgICBwYXlwYWw6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuaXplUGF5bG9hZCA9IGF3YWl0IGJyYWludHJlZVBheXBhbENoZWNrb3V0LnRva2VuaXplUGF5bWVudChhdXRob3JpemVEYXRhKTtcbiAgICAgICAgICAgIGNvbnN0IHsgZGV0YWlscywgbm9uY2UgfSA9IHRva2VuaXplUGF5bG9hZDtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5tYXBUb0xlZ2FjeUJpbGxpbmdBZGRyZXNzKGRldGFpbHMpO1xuICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5tYXBUb0xlZ2FjeVNoaXBwaW5nQWRkcmVzcyhkZXRhaWxzKTtcblxuICAgICAgICAgICAgdGhpcy5mb3JtUG9zdGVyLnBvc3RGb3JtKCcvY2hlY2tvdXQucGhwJywge1xuICAgICAgICAgICAgICAgIHBheW1lbnRfdHlwZTogJ3BheXBhbCcsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogc2hvdWxkUHJvY2Vzc1BheW1lbnQgPyAncHJvY2Vzc19wYXltZW50JyA6ICdzZXRfZXh0ZXJuYWxfY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgIG5vbmNlLFxuICAgICAgICAgICAgICAgIGRldmljZV9kYXRhOiBkZXZpY2VEYXRhLFxuICAgICAgICAgICAgICAgIGJpbGxpbmdfYWRkcmVzczogSlNPTi5zdHJpbmdpZnkoYmlsbGluZ0FkZHJlc3MpLFxuICAgICAgICAgICAgICAgIHNoaXBwaW5nX2FkZHJlc3M6IEpTT04uc3RyaW5naWZ5KHNoaXBwaW5nQWRkcmVzcyksXG4gICAgICAgICAgICAgICAgLi4uKHRoaXMuYnV5Tm93Q2FydElkICYmIHsgY2FydF9pZDogdGhpcy5idXlOb3dDYXJ0SWQgfSksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRva2VuaXplUGF5bG9hZDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzQnJhaW50cmVlRXJyb3IoZXJyb3IpIHx8IGVycm9yIGluc3RhbmNlb2YgU3RhbmRhcmRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVCdXlOb3dDYXJ0KGJ1eU5vd0NhcmRSZXF1ZXN0Qm9keT86IEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSB8IHZvaWQpIHtcbiAgICAgICAgaWYgKCFidXlOb3dDYXJkUmVxdWVzdEJvZHkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDYXJ0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnQoYnV5Tm93Q2FyZFJlcXVlc3RCb2R5KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihcbiAgICAgICAgZXJyb3I6IHVua25vd24sXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG9uRXJyb3JDYWxsYmFjaz86IChlcnJvcjogQnJhaW50cmVlRXJyb3IgfCBTdGFuZGFyZEVycm9yKSA9PiB2b2lkLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLmJyYWludHJlZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGJ1dHRvbkNvbnRhaW5lcklkKTtcblxuICAgICAgICBpZiAob25FcnJvckNhbGxiYWNrICYmIGlzQnJhaW50cmVlRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICBvbkVycm9yQ2FsbGJhY2soZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcbmltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVIb3N0V2luZG93LFxuICAgIEJyYWludHJlZUludGVncmF0aW9uU2VydmljZSxcbiAgICBCcmFpbnRyZWVNZXNzYWdlcyxcbiAgICBCcmFpbnRyZWVTY3JpcHRMb2FkZXIsXG4gICAgQnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYnJhaW50cmVlLXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJyYWludHJlZVBheXBhbENyZWRpdEJ1dHRvblN0cmF0ZWd5IGZyb20gJy4vYnJhaW50cmVlLXBheXBhbC1jcmVkaXQtYnV0dG9uLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQnJhaW50cmVlUGF5cGFsQ3JlZGl0QnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJyYWludHJlZVBheXBhbENyZWRpdEJ1dHRvblN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+IHtcbiAgICBjb25zdCBicmFpbnRyZWVIb3N0V2luZG93OiBCcmFpbnRyZWVIb3N0V2luZG93ID0gd2luZG93O1xuICAgIGNvbnN0IGJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyID0gbmV3IEJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpO1xuICAgIGNvbnN0IGJyYWludHJlZUludGVncmF0aW9uU2VydmljZSA9IG5ldyBCcmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UoXG4gICAgICAgIG5ldyBCcmFpbnRyZWVTY3JpcHRMb2FkZXIoXG4gICAgICAgICAgICBnZXRTY3JpcHRMb2FkZXIoKSxcbiAgICAgICAgICAgIGJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgICAgICAgICBicmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcixcbiAgICAgICAgKSxcbiAgICAgICAgYnJhaW50cmVlSG9zdFdpbmRvdyxcbiAgICApO1xuICAgIGNvbnN0IGJyYWludHJlZU1lc3NhZ2VzID0gbmV3IEJyYWludHJlZU1lc3NhZ2VzKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpO1xuXG4gICAgcmV0dXJuIG5ldyBCcmFpbnRyZWVQYXlwYWxDcmVkaXRCdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlRm9ybVBvc3RlcigpLFxuICAgICAgICBicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGJyYWludHJlZU1lc3NhZ2VzLFxuICAgICAgICBicmFpbnRyZWVIb3N0V2luZG93LFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQnJhaW50cmVlUGF5cGFsQ3JlZGl0QnV0dG9uU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAnYnJhaW50cmVlcGF5cGFsY3JlZGl0JyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVEYXRhQ29sbGVjdG9yLFxuICAgIEJyYWludHJlZVNkayxcbiAgICBCcmFpbnRyZWVWaXNhQ2hlY2tvdXQsXG4gICAgVmlzYUNoZWNrb3V0QWRkcmVzcyxcbiAgICBWaXNhQ2hlY2tvdXRQYXltZW50U3VjY2Vzc1BheWxvYWQsXG4gICAgVmlzYUNoZWNrb3V0VG9rZW5pemVkUGF5bG9hZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9icmFpbnRyZWUtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBBZGRyZXNzLFxuICAgIENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBMZWdhY3lBZGRyZXNzLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJyYWludHJlZVZpc2FDaGVja291dEJ1dHRvblN0cmF0ZWd5IGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBmb3JtUG9zdGVyOiBGb3JtUG9zdGVyLFxuICAgICAgICBwcml2YXRlIGJyYWludHJlZVNkazogQnJhaW50cmVlU2RrLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUob3B0aW9uczogQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lcklkLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiwgaW5pdGlhbGl6YXRpb25EYXRhLCBjb25maWcgfSA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIWNsaWVudFRva2VuIHx8ICFpbml0aWFsaXphdGlvbkRhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYnJhaW50cmVlU2RrLmluaXRpYWxpemUoY2xpZW50VG9rZW4pO1xuXG4gICAgICAgIGNvbnN0IGJyYWludHJlZVZpc2FDaGVja291dCA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2RrLmdldEJyYWludHJlZVZpc2FDaGVja291dCgpO1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGN1cnJlbmN5OiB7IGNvZGUgfSxcbiAgICAgICAgICAgIGNhcnRBbW91bnQsXG4gICAgICAgIH0gPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHZpc2FDaGVja291dEluc3RhbmNlID0gYXdhaXQgdGhpcy5icmFpbnRyZWVTZGsuZ2V0VmlzYUNoZWNrb3V0U2RrKGNvbmZpZy50ZXN0TW9kZSk7XG5cbiAgICAgICAgY29uc3QgaW5pdE9wdGlvbnMgPSBicmFpbnRyZWVWaXNhQ2hlY2tvdXQuY3JlYXRlSW5pdE9wdGlvbnMoe1xuICAgICAgICAgICAgcGF5bWVudFJlcXVlc3Q6IHtcbiAgICAgICAgICAgICAgICBjdXJyZW5jeUNvZGU6IGNvZGUsXG4gICAgICAgICAgICAgICAgc3VidG90YWw6IFN0cmluZyhjYXJ0QW1vdW50KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgIHNoaXBwaW5nOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3RTaGlwcGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVTaWduSW5CdXR0b24oY29udGFpbmVySWQpO1xuXG4gICAgICAgIGF3YWl0IHZpc2FDaGVja291dEluc3RhbmNlLmluaXQoaW5pdE9wdGlvbnMpO1xuXG4gICAgICAgIHZpc2FDaGVja291dEluc3RhbmNlLm9uKCdwYXltZW50LnN1Y2Nlc3MnLCBhc3luYyAocGF5bWVudCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50U3VjY2VzcyhicmFpbnRyZWVWaXNhQ2hlY2tvdXQsIHBheW1lbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHBheW1lbnRTdWNjZXNzKFxuICAgICAgICBicmFpbnRyZWVWaXNhQ2hlY2tvdXQ6IEJyYWludHJlZVZpc2FDaGVja291dCxcbiAgICAgICAgcGF5bWVudDogVmlzYUNoZWNrb3V0UGF5bWVudFN1Y2Nlc3NQYXlsb2FkLFxuICAgICkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgYnJhaW50cmVlVmlzYUNoZWNrb3V0LnRva2VuaXplKHBheW1lbnQpLFxuICAgICAgICAgICAgdGhpcy5icmFpbnRyZWVTZGsuZ2V0RGF0YUNvbGxlY3Rvck9yVGhyb3coKSxcbiAgICAgICAgXSkudGhlbigoW3BheWxvYWQsIGRldmljZURhdGFdKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgICAgICBjb25zdCBzaGlwcGluZyA9IHN0YXRlLmdldFNoaXBwaW5nQWRkcmVzcygpO1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgICBzaGlwcGluZ0FkZHJlc3MgPSB0aGlzLnRvVmlzYUNoZWNrb3V0QWRkcmVzcyhzaGlwcGluZyksXG4gICAgICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3MgPSB0aGlzLnRvVmlzYUNoZWNrb3V0QWRkcmVzcyhiaWxsaW5nKSxcbiAgICAgICAgICAgIH0gPSBwYXlsb2FkO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3N0Rm9ybShcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnBheWxvYWQsXG4gICAgICAgICAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3MsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZXZpY2VEYXRhLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwb3N0Rm9ybShcbiAgICAgICAgcGF5bWVudERhdGE6IFZpc2FDaGVja291dFRva2VuaXplZFBheWxvYWQsXG4gICAgICAgIGRhdGFDb2xsZWN0b3I6IEJyYWludHJlZURhdGFDb2xsZWN0b3IsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHsgdXNlckRhdGEsIGJpbGxpbmdBZGRyZXNzLCBzaGlwcGluZ0FkZHJlc3MsIGRldGFpbHM6IGNhcmRJbmZvcm1hdGlvbiB9ID0gcGF5bWVudERhdGE7XG4gICAgICAgIGNvbnN0IHsgdXNlckVtYWlsIH0gPSB1c2VyRGF0YTtcbiAgICAgICAgY29uc3QgeyBkZXZpY2VEYXRhIH0gPSBkYXRhQ29sbGVjdG9yO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1Qb3N0ZXIucG9zdEZvcm0oJy9jaGVja291dC5waHAnLCB7XG4gICAgICAgICAgICBwYXltZW50X3R5cGU6IHBheW1lbnREYXRhLnR5cGUsXG4gICAgICAgICAgICBub25jZTogcGF5bWVudERhdGEubm9uY2UsXG4gICAgICAgICAgICBwcm92aWRlcjogJ2JyYWludHJlZXZpc2FjaGVja291dCcsXG4gICAgICAgICAgICBhY3Rpb246ICdzZXRfZXh0ZXJuYWxfY2hlY2tvdXQnLFxuICAgICAgICAgICAgZGV2aWNlX2RhdGE6IGRldmljZURhdGEsXG4gICAgICAgICAgICBjYXJkX2luZm9ybWF0aW9uOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgdHlwZTogY2FyZEluZm9ybWF0aW9uLmNhcmRUeXBlLFxuICAgICAgICAgICAgICAgIG51bWJlcjogY2FyZEluZm9ybWF0aW9uLmxhc3RUd28sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGJpbGxpbmdfYWRkcmVzczogSlNPTi5zdHJpbmdpZnkodGhpcy5nZXRBZGRyZXNzKHVzZXJFbWFpbCwgYmlsbGluZ0FkZHJlc3MpKSxcbiAgICAgICAgICAgIHNoaXBwaW5nX2FkZHJlc3M6IEpTT04uc3RyaW5naWZ5KHRoaXMuZ2V0QWRkcmVzcyh1c2VyRW1haWwsIHNoaXBwaW5nQWRkcmVzcykpLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRvVmlzYUNoZWNrb3V0QWRkcmVzcyhhZGRyZXNzPzogQWRkcmVzcyk6IFZpc2FDaGVja291dEFkZHJlc3Mge1xuICAgICAgICBpZiAoIWFkZHJlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaXJzdE5hbWU6IGFkZHJlc3MuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGFkZHJlc3MubGFzdE5hbWUsXG4gICAgICAgICAgICBwaG9uZU51bWJlcjogYWRkcmVzcy5waG9uZSxcbiAgICAgICAgICAgIHN0cmVldEFkZHJlc3M6IGFkZHJlc3MuYWRkcmVzczEsXG4gICAgICAgICAgICBleHRlbmRlZEFkZHJlc3M6IGFkZHJlc3MuYWRkcmVzczIsXG4gICAgICAgICAgICBsb2NhbGl0eTogYWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgcmVnaW9uOiBhZGRyZXNzLnN0YXRlT3JQcm92aW5jZUNvZGUsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEFkZHJlc3MoZW1haWw6IHN0cmluZywgYWRkcmVzczogVmlzYUNoZWNrb3V0QWRkcmVzcyA9IHt9KTogUGFydGlhbDxMZWdhY3lBZGRyZXNzPiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgIGZpcnN0X25hbWU6IGFkZHJlc3MuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdF9uYW1lOiBhZGRyZXNzLmxhc3ROYW1lLFxuICAgICAgICAgICAgcGhvbmVfbnVtYmVyOiBhZGRyZXNzLnBob25lTnVtYmVyLFxuICAgICAgICAgICAgYWRkcmVzc19saW5lXzE6IGFkZHJlc3Muc3RyZWV0QWRkcmVzcyxcbiAgICAgICAgICAgIGFkZHJlc3NfbGluZV8yOiBhZGRyZXNzLmV4dGVuZGVkQWRkcmVzcyxcbiAgICAgICAgICAgIGNpdHk6IGFkZHJlc3MubG9jYWxpdHksXG4gICAgICAgICAgICBzdGF0ZTogYWRkcmVzcy5yZWdpb24sXG4gICAgICAgICAgICBjb3VudHJ5X2NvZGU6IGFkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICBwb3N0YWxfY29kZTogYWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlU2lnbkluQnV0dG9uKGNvbnRhaW5lcklkOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2NvbnRhaW5lcklkfWApO1xuXG4gICAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05lZWQgYSBjb250YWluZXIgdG8gcGxhY2UgdGhlIGJ1dHRvbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0VmlzYUNoZWNrb3V0QnV0dG9uKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbnNlcnRWaXNhQ2hlY2tvdXRCdXR0b24oY29udGFpbmVyOiBFbGVtZW50KTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBidXR0b25Tb3VyY2UgPVxuICAgICAgICAgICAgJ2h0dHBzOi8vc2VjdXJlLmNoZWNrb3V0LnZpc2EuY29tL3dhbGxldC1zZXJ2aWNlcy13ZWIveG8vYnV0dG9uLnBuZz9hY2NlcHRDYW5hZGlhblZpc2FEZWJpdD1mYWxzZSZjb2JyYW5kPXRydWUmaGVpZ2h0PTM0JndpZHRoPTE3OCc7XG4gICAgICAgIGNvbnN0IGJ1dHRvblRlbXBsYXRlID0gYFxuICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgIGFsdD1cIlZpc2EgQ2hlY2tvdXRcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwidi1idXR0b25cIlxuICAgICAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIHNyYz1cIiR7YnV0dG9uU291cmNlfVwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxhIGNsYXNzPVwidi1sZWFybiB2LWxlYXJuLWRlZmF1bHRcIiBzdHlsZT1cInRleHQtYWxpZ246IHJpZ2h0OyBkaXNwbGF5OiBibG9jazsgZm9udC1zaXplOiAxMHB4OyBjb2xvcjogIzAwMzM2NjtcIiBocmVmPVwiI1wiIGRhdGEtbG9jYWxlPVwiZW5fVVNcIj5UZWxsIE1lIE1vcmU8L2E+YDtcblxuICAgICAgICBjb25zdCB2aXNhQ2hlY2tvdXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICB2aXNhQ2hlY2tvdXRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgdmlzYUNoZWNrb3V0QnV0dG9uLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICAgICAgdmlzYUNoZWNrb3V0QnV0dG9uLnN0eWxlLmFsaWduSXRlbXMgPSAnZmxleC1lbmQnO1xuXG4gICAgICAgIHZpc2FDaGVja291dEJ1dHRvbi5pbm5lckhUTUwgPSBidXR0b25UZW1wbGF0ZTtcblxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodmlzYUNoZWNrb3V0QnV0dG9uKTtcblxuICAgICAgICByZXR1cm4gdmlzYUNoZWNrb3V0QnV0dG9uO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIEJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgQnJhaW50cmVlU2NyaXB0TG9hZGVyLFxuICAgIEJyYWludHJlZVNkayxcbiAgICBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcixcbiAgICBWaXNhQ2hlY2tvdXRIb3N0V2luZG93LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5pbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCcmFpbnRyZWVWaXNhQ2hlY2tvdXRCdXR0b25TdHJhdGVneSBmcm9tICcuL2JyYWludHJlZS12aXNhLWNoZWNrb3V0LWJ1dHRvbi1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJyYWludHJlZVZpc2FDaGVja291dEJ1dHRvblN0cmF0ZWd5OiBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCcmFpbnRyZWVWaXNhQ2hlY2tvdXRCdXR0b25TdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PiB7XG4gICAgY29uc3QgaG9zdFdpbmRvdzogVmlzYUNoZWNrb3V0SG9zdFdpbmRvdyAmIEJyYWludHJlZUhvc3RXaW5kb3cgPSB3aW5kb3c7XG4gICAgY29uc3QgYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIgPSBuZXcgQnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIocGF5bWVudEludGVncmF0aW9uU2VydmljZSk7XG4gICAgY29uc3QgYnJhaW50cmVlU2RrID0gbmV3IEJyYWludHJlZVNkayhcbiAgICAgICAgbmV3IEJyYWludHJlZVNjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSwgaG9zdFdpbmRvdywgYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIpLFxuICAgICk7XG5cbiAgICByZXR1cm4gbmV3IEJyYWludHJlZVZpc2FDaGVja291dEJ1dHRvblN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVGb3JtUG9zdGVyKCksXG4gICAgICAgIGJyYWludHJlZVNkayxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJyYWludHJlZVZpc2FDaGVja291dEJ1dHRvblN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JyYWludHJlZXZpc2FjaGVja291dCcgfSxcbl0pO1xuIiwiaW1wb3J0IHsgTGVnYWN5QWRkcmVzcyB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBCcmFpbnRyZWVUb2tlbml6YXRpb25EZXRhaWxzIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1hcFRvTGVnYWN5QmlsbGluZ0FkZHJlc3MoXG4gICAgZGV0YWlsczogQnJhaW50cmVlVG9rZW5pemF0aW9uRGV0YWlscyxcbik6IFBhcnRpYWw8TGVnYWN5QWRkcmVzcz4ge1xuICAgIGNvbnN0IHsgYmlsbGluZ0FkZHJlc3MsIGVtYWlsLCBmaXJzdE5hbWUsIGxhc3ROYW1lLCBwaG9uZSwgc2hpcHBpbmdBZGRyZXNzIH0gPSBkZXRhaWxzO1xuXG4gICAgY29uc3QgYWRkcmVzcyA9IGJpbGxpbmdBZGRyZXNzIHx8IHNoaXBwaW5nQWRkcmVzcztcblxuICAgIHJldHVybiB7XG4gICAgICAgIGVtYWlsLFxuICAgICAgICBmaXJzdF9uYW1lOiBmaXJzdE5hbWUsXG4gICAgICAgIGxhc3RfbmFtZTogbGFzdE5hbWUsXG4gICAgICAgIHBob25lX251bWJlcjogcGhvbmUsXG4gICAgICAgIGFkZHJlc3NfbGluZV8xOiBhZGRyZXNzPy5saW5lMSxcbiAgICAgICAgYWRkcmVzc19saW5lXzI6IGFkZHJlc3M/LmxpbmUyLFxuICAgICAgICBjaXR5OiBhZGRyZXNzPy5jaXR5LFxuICAgICAgICBzdGF0ZTogYWRkcmVzcz8uc3RhdGUsXG4gICAgICAgIGNvdW50cnlfY29kZTogYWRkcmVzcz8uY291bnRyeUNvZGUsXG4gICAgICAgIHBvc3RhbF9jb2RlOiBhZGRyZXNzPy5wb3N0YWxDb2RlLFxuICAgIH07XG59XG4iLCJpbXBvcnQgeyBMZWdhY3lBZGRyZXNzIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IEJyYWludHJlZVRva2VuaXphdGlvbkRldGFpbHMgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFwVG9MZWdhY3lTaGlwcGluZ0FkZHJlc3MoXG4gICAgZGV0YWlsczogQnJhaW50cmVlVG9rZW5pemF0aW9uRGV0YWlscyxcbik6IFBhcnRpYWw8TGVnYWN5QWRkcmVzcz4ge1xuICAgIGNvbnN0IHsgZW1haWwsIHBob25lLCBzaGlwcGluZ0FkZHJlc3MgfSA9IGRldGFpbHM7XG5cbiAgICBjb25zdCByZWNpcGllbnROYW1lID0gc2hpcHBpbmdBZGRyZXNzPy5yZWNpcGllbnROYW1lIHx8ICcnO1xuICAgIGNvbnN0IFtmaXJzdE5hbWUsIGxhc3ROYW1lXSA9IHJlY2lwaWVudE5hbWUuc3BsaXQoJyAnKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGVtYWlsLFxuICAgICAgICBmaXJzdF9uYW1lOiBmaXJzdE5hbWUgfHwgJycsXG4gICAgICAgIGxhc3RfbmFtZTogbGFzdE5hbWUgfHwgJycsXG4gICAgICAgIHBob25lX251bWJlcjogcGhvbmUsXG4gICAgICAgIGFkZHJlc3NfbGluZV8xOiBzaGlwcGluZ0FkZHJlc3M/LmxpbmUxLFxuICAgICAgICBhZGRyZXNzX2xpbmVfMjogc2hpcHBpbmdBZGRyZXNzPy5saW5lMixcbiAgICAgICAgY2l0eTogc2hpcHBpbmdBZGRyZXNzPy5jaXR5LFxuICAgICAgICBzdGF0ZTogc2hpcHBpbmdBZGRyZXNzPy5zdGF0ZSxcbiAgICAgICAgY291bnRyeV9jb2RlOiBzaGlwcGluZ0FkZHJlc3M/LmNvdW50cnlDb2RlLFxuICAgICAgICBwb3N0YWxfY29kZTogc2hpcHBpbmdBZGRyZXNzPy5wb3N0YWxDb2RlLFxuICAgIH07XG59XG4iLCJpbXBvcnQgeyBGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEJyYWludHJlZUVycm9yLFxuICAgIEJyYWludHJlZVNkayxcbiAgICBCcmFpbnRyZWVUb2tlbml6ZVBheWxvYWQsXG4gICAgQnJhaW50cmVlVmVubW9DaGVja291dCxcbiAgICBtYXBUb0xlZ2FjeUJpbGxpbmdBZGRyZXNzLFxuICAgIG1hcFRvTGVnYWN5U2hpcHBpbmdBZGRyZXNzLFxuICAgIFBheXBhbEJ1dHRvblN0eWxlQ29sb3JPcHRpb24sXG4gICAgUGF5cGFsU3R5bGVPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JyYWludHJlZS11dGlscyc7XG5pbXBvcnQge1xuICAgIEJ1eU5vd0NhcnRDcmVhdGlvbkVycm9yLFxuICAgIEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSxcbiAgICBDYXJ0LFxuICAgIENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBVbnN1cHBvcnRlZEJyb3dzZXJFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBpc0JyYWludHJlZUVycm9yIGZyb20gJy4uL2lzLWJyYWludHJlZS1lcnJvcic7XG5pbXBvcnQgeyBpc1Vuc3VwcG9ydGVkQnJvd3NlckVycm9yIH0gZnJvbSAnLi4vaXNVbnN1cHBvcnRlZEJyb3dzZXJFcnJvcic7XG5cbmltcG9ydCB7IFdpdGhCcmFpbnRyZWVWZW5tb0luaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnLi9icmFpbnRyZWUtdmVubW8taW5pdGlhbGl6ZS1vcHRpb25zJztcblxuY29uc3QgZ2V0VmVubW9CdXR0b25TdHlsZSA9IChzdHlsZXM6IFBheXBhbFN0eWxlT3B0aW9ucyk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPT4ge1xuICAgIGNvbnN0IHsgY29sb3IsIGhlaWdodCB9ID0gc3R5bGVzO1xuXG4gICAgY29uc3QgY29sb3JQYXJzZXIgPSAoYzogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmIChjID09PSBQYXlwYWxCdXR0b25TdHlsZUNvbG9yT3B0aW9uLldISVRFKSB7XG4gICAgICAgICAgICByZXR1cm4gJyNGRkZGRkYnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICcjM0Q5NUNFJztcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvclBhcnNlcihjb2xvciB8fCAnJyksXG4gICAgICAgIGJhY2tncm91bmRQb3NpdGlvbjogJzUwJSA1MCUnLFxuICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogJzgwcHggYXV0bycsXG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogYHVybChcIi9hcHAvYXNzZXRzL2ltZy9wYXltZW50LXByb3ZpZGVycy92ZW5tby1sb2dvLSR7XG4gICAgICAgICAgICBjb2xvciA9PT0gUGF5cGFsQnV0dG9uU3R5bGVDb2xvck9wdGlvbi5XSElURVxuICAgICAgICAgICAgICAgID8gUGF5cGFsQnV0dG9uU3R5bGVDb2xvck9wdGlvbi5CTFVFXG4gICAgICAgICAgICAgICAgOiBQYXlwYWxCdXR0b25TdHlsZUNvbG9yT3B0aW9uLldISVRFXG4gICAgICAgIH0uc3ZnXCIpYCxcbiAgICAgICAgYmFja2dyb3VuZFJlcGVhdDogJ25vLXJlcGVhdCcsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICB0cmFuc2l0aW9uOiAnMC4ycyBlYXNlJyxcbiAgICAgICAgbWluSGVpZ2h0OiBgJHtoZWlnaHQgfHwgNDB9cHhgLFxuICAgICAgICBtaW5XaWR0aDogJzE1MHB4JyxcbiAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgIGJvcmRlcjogY29sb3IgPT09IFBheXBhbEJ1dHRvblN0eWxlQ29sb3JPcHRpb24uV0hJVEUgPyAnMXB4IHNvbGlkIGJsYWNrJyA6ICdub25lJyxcbiAgICB9O1xufTtcblxuY29uc3QgdmVubW9CdXR0b25TdHlsZUhvdmVyID0ge1xuICAgIGJhY2tncm91bmRDb2xvcjogJyMwYTdmYzInLFxufTtcblxuaW50ZXJmYWNlIEJ1eU5vd0luaXRpYWxpemVPcHRpb25zIHtcbiAgICBnZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHk/KCk6IEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSB8IHZvaWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJyYWludHJlZVZlbm1vQnV0dG9uU3RyYXRlZ3kgaW1wbGVtZW50cyBDaGVja291dEJ1dHRvblN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIG9uRXJyb3IgPSBub29wO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBmb3JtUG9zdGVyOiBGb3JtUG9zdGVyLFxuICAgICAgICBwcml2YXRlIGJyYWludHJlZVNkazogQnJhaW50cmVlU2RrLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQnJhaW50cmVlVmVubW9Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBicmFpbnRyZWV2ZW5tbywgY29udGFpbmVySWQsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9OiBQYXltZW50TWV0aG9kID0gcGF5bWVudE1ldGhvZDtcbiAgICAgICAgY29uc3QgeyBwYXltZW50QnV0dG9uU3R5bGVzIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG4gICAgICAgIGNvbnN0IHsgY2FydEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcbiAgICAgICAgY29uc3Qgc3R5bGVzID0gYnJhaW50cmVldmVubW8/LnN0eWxlIHx8IGNhcnRCdXR0b25TdHlsZXM7XG5cbiAgICAgICAgaWYgKCFjbGllbnRUb2tlbiB8fCAhaW5pdGlhbGl6YXRpb25EYXRhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO1xuXG4gICAgICAgIHRoaXMub25FcnJvciA9IGJyYWludHJlZXZlbm1vPy5vbkVycm9yIHx8IHRoaXMuaGFuZGxlRXJyb3I7XG4gICAgICAgIHRoaXMuYnJhaW50cmVlU2RrLmluaXRpYWxpemUoY2xpZW50VG9rZW4pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBicmFpbnRyZWVWZW5tb0NoZWNrb3V0ID0gYXdhaXQgdGhpcy5icmFpbnRyZWVTZGsuZ2V0VmVubW9DaGVja291dE9yVGhyb3coKTtcblxuICAgICAgICAgICAgdGhpcy5yZW5kZXJWZW5tb0J1dHRvbihcbiAgICAgICAgICAgICAgICBicmFpbnRyZWVWZW5tb0NoZWNrb3V0LFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgIGJyYWludHJlZXZlbm1vPy5idXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBzdHlsZXMsXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGlzQnJhaW50cmVlRXJyb3IoZXJyb3IpIHx8IGlzVW5zdXBwb3J0ZWRCcm93c2VyRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVJbml0aWFsaXphdGlvblZlbm1vRXJyb3IoZXJyb3IsIGNvbnRhaW5lcklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5icmFpbnRyZWVTZGsuZGVpbml0aWFsaXplKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IEJyYWludHJlZUVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZUJ1eU5vd0NhcnQoXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPzogQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxDYXJ0IHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIGlmICh0eXBlb2YgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29uc3QgY2FydFJlcXVlc3RCb2R5ID0gYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSgpO1xuXG4gICAgICAgICAgICBpZiAoIWNhcnRSZXF1ZXN0Qm9keSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDYXJ0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBidXlOb3dDYXJ0ID0gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnQoXG4gICAgICAgICAgICAgICAgICAgIGNhcnRSZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1eU5vd0NhcnQ7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUluaXRpYWxpemF0aW9uVmVubW9FcnJvcihcbiAgICAgICAgZXJyb3I6IEJyYWludHJlZUVycm9yIHwgVW5zdXBwb3J0ZWRCcm93c2VyRXJyb3IsXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVtb3ZlVmVubW9Db250YWluZXIoY29udGFpbmVySWQpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLm9uRXJyb3IoZXJyb3IpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVtb3ZlVmVubW9Db250YWluZXIoY29udGFpbmVySWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJJZCk7XG5cbiAgICAgICAgaWYgKGJ1dHRvbkNvbnRhaW5lcikge1xuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJWZW5tb0J1dHRvbihcbiAgICAgICAgYnJhaW50cmVlVmVubW9DaGVja291dDogQnJhaW50cmVlVmVubW9DaGVja291dCxcbiAgICAgICAgY29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/OiBCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgYnV0dG9uU3R5bGVzPzogUGF5cGFsU3R5bGVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB2ZW5tb0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcklkKTtcbiAgICAgICAgY29uc3QgeyBjb2xvciB9ID0gYnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGlmICghdmVubW9CdXR0b24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGNyZWF0ZSB3YWxsZXQgYnV0dG9uIHdpdGhvdXQgdmFsaWQgY29udGFpbmVyIElELicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdmVubW9CdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1Zlbm1vJyk7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odmVubW9CdXR0b24uc3R5bGUsIGdldFZlbm1vQnV0dG9uU3R5bGUoYnV0dG9uU3R5bGVzIHx8IHt9KSk7XG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1taXN1c2VkLXByb21pc2VzXG4gICAgICAgIHZlbm1vQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdmVubW9CdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICd0cnVlJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGJ1eUJvd0NhcnQgPSBhd2FpdCB0aGlzLmNyZWF0ZUJ1eU5vd0NhcnQoYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpO1xuXG4gICAgICAgICAgICBpZiAoYnJhaW50cmVlVmVubW9DaGVja291dC50b2tlbml6ZSkge1xuICAgICAgICAgICAgICAgIGJyYWludHJlZVZlbm1vQ2hlY2tvdXQudG9rZW5pemUoXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBCcmFpbnRyZWVFcnJvciB8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEJyYWludHJlZVRva2VuaXplUGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZW5tb0J1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlUG9zdEZvcm0ocGF5bG9hZCwgYnV5Qm93Q2FydD8uaWQpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChjb2xvciA9PT0gUGF5cGFsQnV0dG9uU3R5bGVDb2xvck9wdGlvbi5CTFVFKSB7XG4gICAgICAgICAgICB2ZW5tb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZlbm1vQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHZlbm1vQnV0dG9uU3R5bGVIb3Zlci5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmVubW9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICB2ZW5tb0J1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBnZXRWZW5tb0J1dHRvblN0eWxlKFxuICAgICAgICAgICAgICAgICAgICBidXR0b25TdHlsZXMgfHwge30sXG4gICAgICAgICAgICAgICAgKS5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlUG9zdEZvcm0oXG4gICAgICAgIHBheWxvYWQ6IEJyYWludHJlZVRva2VuaXplUGF5bG9hZCxcbiAgICAgICAgYnV5Tm93Q2FydElkPzogc3RyaW5nLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGRldmljZURhdGEgfSA9IGF3YWl0IHRoaXMuYnJhaW50cmVlU2RrLmdldERhdGFDb2xsZWN0b3JPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHsgbm9uY2UsIGRldGFpbHMgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgdGhpcy5mb3JtUG9zdGVyLnBvc3RGb3JtKCcvY2hlY2tvdXQucGhwJywge1xuICAgICAgICAgICAgbm9uY2UsXG4gICAgICAgICAgICBwcm92aWRlcjogJ2JyYWludHJlZXZlbm1vJyxcbiAgICAgICAgICAgIHBheW1lbnRfdHlwZTogJ3BheXBhbCcsXG4gICAgICAgICAgICBkZXZpY2VfZGF0YTogZGV2aWNlRGF0YSxcbiAgICAgICAgICAgIGFjdGlvbjogJ3NldF9leHRlcm5hbF9jaGVja291dCcsXG4gICAgICAgICAgICBiaWxsaW5nX2FkZHJlc3M6IEpTT04uc3RyaW5naWZ5KG1hcFRvTGVnYWN5QmlsbGluZ0FkZHJlc3MoZGV0YWlscykpLFxuICAgICAgICAgICAgc2hpcHBpbmdfYWRkcmVzczogSlNPTi5zdHJpbmdpZnkobWFwVG9MZWdhY3lTaGlwcGluZ0FkZHJlc3MoZGV0YWlscykpLFxuICAgICAgICAgICAgLi4uKGJ1eU5vd0NhcnRJZCAmJiB7IGNhcnRfaWQ6IGJ1eU5vd0NhcnRJZCB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVW5zdXBwb3J0ZWRCcm93c2VyRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzVW5zdXBwb3J0ZWRCcm93c2VyRXJyb3IoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBVbnN1cHBvcnRlZEJyb3dzZXJFcnJvciB7XG4gICAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgVW5zdXBwb3J0ZWRCcm93c2VyRXJyb3I7XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcbmltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBCcmFpbnRyZWVIb3N0V2luZG93LFxuICAgIEJyYWludHJlZVNjcmlwdExvYWRlcixcbiAgICBCcmFpbnRyZWVTZGssXG4gICAgQnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYnJhaW50cmVlLXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJyYWludHJlZVZlbm1vQnV0dG9uU3RyYXRlZ3kgZnJvbSAnLi9icmFpbnRyZWUtdmVubW8tYnV0dG9uLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQnJhaW50cmVlVmVubW9CdXR0b25TdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8XG4gICAgQnJhaW50cmVlVmVubW9CdXR0b25TdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PiB7XG4gICAgY29uc3QgYnJhaW50cmVlSG9zdFdpbmRvdzogQnJhaW50cmVlSG9zdFdpbmRvdyA9IHdpbmRvdztcbiAgICBjb25zdCBzY3JpcHRMb2FkZXIgPSBnZXRTY3JpcHRMb2FkZXIoKTtcbiAgICBjb25zdCBicmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlciA9IG5ldyBCcmFpbnRyZWVTREtWZXJzaW9uTWFuYWdlcihwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKTtcbiAgICBjb25zdCBicmFpbnRyZWVTY3JpcHRMb2FkZXIgPSBuZXcgQnJhaW50cmVlU2NyaXB0TG9hZGVyKFxuICAgICAgICBzY3JpcHRMb2FkZXIsXG4gICAgICAgIGJyYWludHJlZUhvc3RXaW5kb3csXG4gICAgICAgIGJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyLFxuICAgICk7XG5cbiAgICBjb25zdCBicmFpbnRyZWVTZGsgPSBuZXcgQnJhaW50cmVlU2RrKGJyYWludHJlZVNjcmlwdExvYWRlcik7XG5cbiAgICByZXR1cm4gbmV3IEJyYWludHJlZVZlbm1vQnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUZvcm1Qb3N0ZXIoKSxcbiAgICAgICAgYnJhaW50cmVlU2RrLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQnJhaW50cmVlVmVubW9CdXR0b25TdHJhdGVneSwgW3sgaWQ6ICdicmFpbnRyZWV2ZW5tbycgfV0pO1xuIl0sIm5hbWVzIjpbIkJyYWludHJlZUVudiIsIkJyYWludHJlZU1vZHVsZU5hbWUiLCJCcmFpbnRyZWVGb3JtRmllbGRUeXBlIiwiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwicHJvdG90eXBlIiwic3VwZXIiLCJuYW1lIiwidHlwZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwidGhpcyIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciIsIkJSQUlOVFJFRV9TREtfSE9TVEVEX0ZJRUxEU19GSVhfVkVSU0lPTiIsIkJSQUlOVFJFRV9TREtfREVGQVVMVF9WRVJTSU9OIiwiQlJBSU5UUkVFX1NES19TVEFCTEVfVkVSU0lPTiIsIkJSQUlOVFJFRV9TREtfU0NSSVBUU19JTlRFR1JJVFkiLCJDbGllbnQiLCJQYXlwYWxDaGVja291dCIsIlBheXBhbCIsIkxvY2FsUGF5bWVudCIsIkRhdGFDb2xsZWN0b3IiLCJVc0JhbmtBY2NvdW50IiwiR29vZ2xlUGF5bWVudCIsIlRocmVlRFNlY3VyZSIsIlZpc2FDaGVja291dCIsIlZlbm1vIiwiSG9zdGVkRmllbGRzIiwiRmFzdGxhbmUiLCJOb3RJbml0aWFsaXplZEVycm9yVHlwZSIsIlRvdGFsUHJpY2VTdGF0dXNUeXBlIiwiQnJhaW50cmVlT3JkZXJTdGF0dXMiLCJOb25JbnN0YW50TG9jYWxQYXltZW50TWV0aG9kcyIsIkJyYWludHJlZUZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSIsIkJyYWludHJlZUVycm9yVHlwZSIsIkJyYWludHJlZUVycm9yQ29kZSIsIkJyYWludHJlZVN1cHBvcnRlZENhcmRCcmFuZHMiLCJCcmFpbnRyZWVTY3JpcHRMb2FkZXIiLCJzY3JpcHRMb2FkZXIiLCJicmFpbnRyZWVIb3N0V2luZG93IiwiYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIiLCJsb2FkQ2xpZW50IiwibG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3ciLCJsb2FkRmFzdGxhbmUiLCJsb2FkUGF5cGFsQ2hlY2tvdXQiLCJsb2FkUGF5cGFsIiwibG9hZExvY2FsUGF5bWVudCIsImxvYWREYXRhQ29sbGVjdG9yIiwibG9hZFVzQmFua0FjY291bnQiLCJsb2FkR29vZ2xlUGF5bWVudCIsImxvYWQzRFMiLCJsb2FkVmlzYUNoZWNrb3V0IiwibG9hZFZlbm1vQ2hlY2tvdXQiLCJsb2FkSG9zdGVkRmllbGRzIiwibG9hZFZpc2FDaGVja291dFNkayIsInRlc3RNb2RlIiwiViIsImhhc2giLCJsb2FkU2NyaXB0IiwiYXN5bmMiLCJhdHRyaWJ1dGVzIiwiaW50ZWdyaXR5IiwiY3Jvc3NvcmlnaW4iLCJ0aGVuIiwiYnJhaW50cmVlTW9kdWxlTmFtZSIsImZpbGVOYW1lIiwibW9kdWxlIiwiZ2V0QnJhaW50cmVlTW9kdWxlIiwiYnJhaW50cmVlU2RrVmVyc2lvbiIsImdldFNES1ZlcnNpb24iLCJzY3JpcHRQYXRoIiwiZ2V0SW50ZWdyaXR5VmFsdWVzQnlNb2R1bGVOYW1lIiwidW5kZWZpbmVkIiwiYnJhaW50cmVlIiwibW9kdWxlTmFtZSIsInZlcnNpb24iLCJVbnN1cHBvcnRlZEJyb3dzZXJFcnJvciIsIk5vdEluaXRpYWxpemVkRXJyb3IiLCJzdWJ0eXBlIiwiQ3VzdG9tZXJOb3RJbml0aWFsaXplZCIsIlBheW1lbnROb3RJbml0aWFsaXplZCIsIlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQiLCJTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkIiwiZ2V0RXJyb3JNZXNzYWdlIiwiaXNCcmFpbnRyZWVFcnJvciIsImVycm9yIiwiQm9vbGVhbiIsIkJyYWludHJlZVNkayIsImJyYWludHJlZVNjcmlwdExvYWRlciIsImluaXRpYWxpemUiLCJjbGllbnRUb2tlbiIsInNldENsaWVudFRva2VuIiwiZGVpbml0aWFsaXplIiwidGVhcmRvd25Nb2R1bGUiLCJkYXRhQ29sbGVjdG9yIiwiZ2V0Q2xpZW50IiwiY2xpZW50IiwiZ2V0Q2xpZW50VG9rZW5PclRocm93IiwiY2xpZW50Q3JlYXRvciIsImNyZWF0ZSIsImF1dGhvcml6YXRpb24iLCJnZXREYXRhQ29sbGVjdG9yT3JUaHJvdyIsIm9wdGlvbnMiLCJlbXB0eURhdGFDb2xsZWN0b3IiLCJkZXZpY2VEYXRhIiwidGVhcmRvd24iLCJQcm9taXNlIiwicmVzb2x2ZSIsImRhdGFDb2xsZWN0b3JDb25maWciLCJrb3VudCIsImNvZGUiLCJLb3VudE5vdEVuYWJsZWQiLCJnZXRCcmFpbnRyZWVHb29nbGVQYXltZW50IiwiZ29vZ2xlUGF5bWVudCIsImJyYWludHJlZUdvb2dsZVBheW1lbnQiLCJhbGwiLCJnZXRCcmFpbnRyZWVUaHJlZURTIiwidGhyZWVEUyIsInRocmVlRFNlY3VyZSIsImdldEJyYWludHJlZUxvY2FsUGF5bWVudCIsIm1lcmNoYW50QWNjb3VudElkIiwiYnJhaW50cmVlTG9jYWxQYXltZW50IiwibG9jYWxQYXltZW50Q3JlYXRvciIsInJlamVjdCIsImdldFVzQmFua0FjY291bnQiLCJ1c0JhbmtBY2NvdW50IiwiZ2V0QnJhaW50cmVlVmlzYUNoZWNrb3V0IiwidmlzYUNoZWNrb3V0IiwicGF5cGFsIiwiZ2V0VmlzYUNoZWNrb3V0U2RrIiwidmlzYUNoZWNrb3V0U0RLIiwiZ2V0VmVubW9DaGVja291dE9yVGhyb3ciLCJicmFpbnRyZWVWZW5tbyIsInZlbm1vQ2hlY2tvdXQiLCJ2ZW5tb0NoZWNrb3V0Q29uZmlnIiwiYWxsb3dEZXNrdG9wIiwicGF5bWVudE1ldGhvZFVzYWdlIiwiYnJhaW50cmVlVmVubW9DaGVja291dCIsImlzQnJvd3NlclN1cHBvcnRlZCIsImlzRXhwZXJpbWVudEVuYWJsZWQiLCJmZWF0dXJlcyIsImV4cGVyaW1lbnROYW1lIiwiZmFsbGJhY2tWYWx1ZSIsIkJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyIiwicGF5bWVudEludGVncmF0aW9uU2VydmljZSIsImJyYWludHJlZVdpbmRvdyIsIndpbmRvdyIsInN0b3JlQ29uZmlnIiwiZ2V0U3RhdGUiLCJnZXRTdG9yZUNvbmZpZyIsImNoZWNrb3V0U2V0dGluZ3MiLCJnZXRQcmVsb2FkZWRTREtWZXJzaW9uIiwicHJlbG9hZGVkVmVyc2lvbiIsImZpbmQiLCJ2YWx1ZXMiLCJWRVJTSU9OIiwidG9SZXNvbHZhYmxlTW9kdWxlIiwicmVzb2x2ZUlkcyIsImNvbnNvbGUiLCJsb2ciLCJhc3NpZ24iLCJJbnZhbGlkQXJndW1lbnRFcnJvciIsIk1pc3NpbmdEYXRhRXJyb3JUeXBlIiwiTWlzc2luZ0RhdGFFcnJvciIsIk1pc3NpbmdCaWxsaW5nQWRkcmVzcyIsIk1pc3NpbmdDYXJ0IiwiTWlzc2luZ0NvbnNpZ25tZW50cyIsIk1pc3NpbmdDaGVja291dCIsIk1pc3NpbmdDdXN0b21lciIsIk1pc3NpbmdDaGVja291dENvbmZpZyIsIk1pc3NpbmdPcmRlckNvbmZpZyIsIk1pc3NpbmdPcmRlciIsIk1pc3NpbmdPcmRlcklkIiwiTWlzc2luZ1BheW1lbnQiLCJNaXNzaW5nUGF5bWVudFRva2VuIiwiTWlzc2luZ1BheW1lbnRNZXRob2QiLCJNaXNzaW5nU2hpcHBpbmdBZGRyZXNzIiwiUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIiwiaW52YWxpZEZpZWxkcyIsImpvaW4iLCJpc1ZhdWx0ZWRJbnN0cnVtZW50IiwiaW5zdHJ1bWVudCIsImluc3RydW1lbnRJZCIsIk9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciIsImlzSG9zdGVkSW5zdHJ1bWVudExpa2UiLCJzaG91bGRTYXZlSW5zdHJ1bWVudCIsInNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQiLCJQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IiLCJpc1VzQmFua0FjY291bnRJbnN0cnVtZW50TGlrZSIsIkJyYWludHJlZUFjaFBheW1lbnRTdHJhdGVneSIsImJyYWludHJlZVNkayIsIm1ldGhvZElkIiwiYnJhaW50cmVlYWNoIiwiZ2V0TWFuZGF0ZVRleHQiLCJsb2FkUGF5bWVudE1ldGhvZCIsInBheW1lbnRNZXRob2QiLCJnZXRQYXltZW50TWV0aG9kT3JUaHJvdyIsImluaXRpYWxpemF0aW9uRGF0YSIsImhhbmRsZUJyYWludHJlZUVycm9yIiwiZXhlY3V0ZSIsIm9yZGVyUmVxdWVzdCIsInBheW1lbnQiLCJvcmRlciIsImlzU3VibWl0dGluZ1dpdGhWYXVsdGluZ0luc3RydW1lbnQiLCJwYXltZW50RGF0YSIsIm5vbmNlIiwidG9rZW5pemVQYXltZW50Rm9yVmF1bHRlZEluc3RydW1lbnQiLCJ0b2tlbml6ZVBheW1lbnQiLCJzdWJtaXRQYXltZW50UGF5bG9hZCIsInByZXBhcmVQYXltZW50RGF0YUZvclZhdWx0ZWRJbnN0cnVtZW50IiwicHJlcGFyZVBheW1lbnREYXRhIiwic3VibWl0T3JkZXIiLCJzdWJtaXRQYXltZW50IiwiZmluYWxpemUiLCJnZXRVc0JhbmtBY2NvdW50T3JUaHJvdyIsIm1hbmRhdGVUZXh0IiwidG9rZW5pemUiLCJiYW5rRGV0YWlscyIsImdldEJhbmtEZXRhaWxzIiwic3RhdGUiLCJjb25maWciLCJpc1ZhdWx0aW5nRW5hYmxlZCIsInJvdXRpbmdOdW1iZXIiLCJhY2NvdW50TnVtYmVyIiwiZGV2aWNlU2Vzc2lvbklkIiwiZm9ybWF0dGVkUGF5bG9hZCIsInRva2VuaXplZF9iYW5rX2FjY291bnQiLCJpc3N1ZXIiLCJtYXNrZWRfYWNjb3VudF9udW1iZXIiLCJzdWJzdHIiLCJ0b2tlbiIsImJpbGxpbmdBZGRyZXNzIiwiZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93Iiwib3duZXJzaGlwVHlwZSIsInRvTG93ZXJDYXNlIiwiYWNjb3VudFR5cGUiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImJ1c2luZXNzTmFtZSIsInN0cmVldEFkZHJlc3MiLCJhZGRyZXNzMSIsImV4dGVuZGVkQWRkcmVzcyIsImFkZHJlc3MyIiwibG9jYWxpdHkiLCJjaXR5IiwicmVnaW9uIiwic3RhdGVPclByb3ZpbmNlQ29kZSIsInBvc3RhbENvZGUiLCJnZXRTY3JpcHRMb2FkZXIiLCJpZCIsIlBheW1lbnRJbnZhbGlkRm9ybUVycm9yIiwiZGV0YWlscyIsIlBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvciIsIkNhbmNlbGxhYmxlUHJvbWlzZSIsInByb21pc2UiLCJjYW5jZWxsYWJsZSIsIl8iLCJjYW5jZWwiLCJyYWNlIiwiUEFZUEFMX0NPTVBPTkVOVFMiLCJQYXlwYWxCdXR0b25TdHlsZUxheW91dE9wdGlvbiIsIlBheXBhbEJ1dHRvblN0eWxlU2l6ZU9wdGlvbiIsIlBheXBhbEJ1dHRvblN0eWxlQ29sb3JPcHRpb24iLCJQYXlwYWxCdXR0b25TdHlsZUxhYmVsT3B0aW9uIiwiUGF5cGFsQnV0dG9uU3R5bGVTaGFwZU9wdGlvbiIsIk1lc3NhZ2luZ1BsYWNlbWVudHMiLCJCcmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UiLCJvdmVybGF5IiwiZGF0YUNvbGxlY3RvcnMiLCJ0aHJlZURTZWN1cmVPcHRpb25zIiwiZ2V0QnJhaW50cmVlRmFzdGxhbmUiLCJjYXJkSWQiLCJpc1Rlc3RNb2RlRW5hYmxlZCIsInN0eWxlcyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJicmFpbnRyZWVGYXN0bGFuZSIsImdldFNlc3Npb25JZCIsImJyYWludHJlZUZhc3RsYW5lQ3JlYXRvciIsImRlZmF1bHRTdHlsZXMiLCJyb290IiwiYmFja2dyb3VuZENvbG9yUHJpbWFyeSIsImdldFBheXBhbCIsImJyYWludHJlZVBheXBhbCIsIm5ld1dpbmRvd0Zsb3ciLCJzdXBwb3J0c1BvcHVwcyIsInNob3ciLCJvbkNsaWNrIiwiZm9jdXNXaW5kb3ciLCJlbmFibGVTaGlwcGluZ0FkZHJlc3MiLCJmbG93IiwidXNlcmFjdGlvbiIsInJlc3BvbnNlIiwicmVtb3ZlIiwiY2F0Y2giLCJnZXRQYXlwYWxDaGVja291dCIsIm9uU3VjY2VzcyIsIm9uRXJyb3IiLCJwYXlwYWxDaGVja291dCIsInBheXBhbENoZWNrb3V0Q29uZmlnIiwiYnJhaW50cmVlUGF5cGFsQ2hlY2tvdXQiLCJwYXlwYWxTZGtMb2FkQ29uZmlnIiwiY3VycmVuY3kiLCJpc0NyZWRpdEVuYWJsZWQiLCJjb21wb25lbnRzIiwidG9TdHJpbmciLCJpbnRlbnQiLCJjb21taXQiLCJsb2FkUGF5UGFsU0RLIiwiZ2V0RGF0YUNvbGxlY3RvciIsImNhY2hlS2V5IiwiY2FjaGVkIiwiZ2V0QnJhaW50cmVlRW52IiwiaXNUZXN0TW9kZSIsIlNhbmRib3giLCJQcm9kdWN0aW9uIiwibWFwVG9CcmFpbnRyZWVTaGlwcGluZ0FkZHJlc3NPdmVycmlkZSIsImFkZHJlc3MiLCJyZWNpcGllbnROYW1lIiwibGluZTEiLCJsaW5lMiIsImNvdW50cnlDb2RlIiwicGhvbmUiLCJtYXBUb0xlZ2FjeVNoaXBwaW5nQWRkcmVzcyIsImVtYWlsIiwic2hpcHBpbmdBZGRyZXNzIiwic3BsaXQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwicGhvbmVfbnVtYmVyIiwiYWRkcmVzc19saW5lXzEiLCJhZGRyZXNzX2xpbmVfMiIsImNvdW50cnlfY29kZSIsInBvc3RhbF9jb2RlIiwibWFwVG9MZWdhY3lCaWxsaW5nQWRkcmVzcyIsInJlbW92ZUVsZW1lbnQiLCJlbGVtZW50SWQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNhcnRJZCIsInJpc2tDb3JyZWxhdGlvbklkIiwiZGVmYXVsdCIsImdldDNEUyIsImdldFZlbm1vQ2hlY2tvdXQiLCJ2ZW5tb0NvbmZpZyIsInZlcmlmeUNhcmQiLCJhbW91bnQiLCJ0b2tlbml6YXRpb25QYXlsb2FkIiwidG9rZW5pemVDYXJkIiwiY2hhbGxlbmdlM0RTVmVyaWZpY2F0aW9uIiwiY3JlZGl0Q2FyZEluc3RydW1lbnQiLCJjY0V4cGlyeSIsImNjTnVtYmVyIiwiY2NOYW1lIiwiaXNDcmVkaXRDYXJkSW5zdHJ1bWVudExpa2UiLCJlcnJvcnMiLCJnZXRFcnJvcnNSZXF1aXJlZEZpZWxkcyIsImlzRW1wdHkiLCJyZXF1ZXN0RGF0YSIsIm1hcFRvQ3JlZGl0Q2FyZCIsImNyZWRpdENhcmRzIiwicmVxdWVzdCIsImJpbiIsInByZXNlbnQzRFNDaGFsbGVuZ2UiLCJjcmVkaXRDYXJkIiwiZGF0YSIsImNhcmRob2xkZXJOYW1lIiwibnVtYmVyIiwiY3Z2IiwiY2NDdnYiLCJleHBpcmF0aW9uRGF0ZSIsIm1vbnRoIiwieWVhciIsInZhbGlkYXRlIiwiY291bnRyeUNvZGVBbHBoYTIiLCJjb3VudHJ5TmFtZSIsImNvdW50cnkiLCJlbmRwb2ludCIsIm1ldGhvZCIsImFkZEZyYW1lIiwicmVtb3ZlRnJhbWUiLCJjaGFsbGVuZ2VSZXF1ZXN0ZWQiLCJhZGRpdGlvbmFsSW5mb3JtYXRpb24iLCJjYW5jZWxWZXJpZnlDYXJkIiwidmVyaWZpY2F0aW9uIiwicm91bmRlZEFtb3VudCIsInRvRml4ZWQiLCJpZnJhbWUiLCJOdW1iZXIiLCJvbkxvb2t1cENvbXBsZXRlIiwiX2RhdGEiLCJuZXh0IiwiY29sbGVjdERldmljZURhdGEiLCJCcmFpbnRyZWVNZXNzYWdlcyIsInJlbmRlciIsImNvbnRhaW5lcklkIiwicGxhY2VtZW50IiwibWVzc2FnaW5nQ29udGFpbmVyIiwiY2FydCIsImdldENhcnRPclRocm93IiwicGF5cGFsQk5QTENvbmZpZ3VyYXRpb24iLCJiYW5uZWRJZCIsIlBBWU1FTlQiLCJiYW5uZXJDb25maWd1cmF0aW9uIiwic3RhdHVzIiwiQ0FSVCIsInJlbW92ZUF0dHJpYnV0ZSIsIk1lc3NhZ2VzIiwiY2FydEFtb3VudCIsImJ1eWVyQ291bnRyeSIsInN0eWxlIiwiZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyIsIm1lc3NhZ2VzU3R5bGVzIiwiY29sb3IiLCJsYXlvdXQiLCJsb2dvIiwicG9zaXRpb24iLCJyYXRpbyIsInRleHQiLCJzaXplIiwiT3ZlcmxheSIsImNsb3NlRWxlbWVudCIsIm1haW5FbGVtZW50IiwiX2NyZWF0ZUVsZW1lbnRzIiwiX2VsZW1lbnQiLCJfY2xvc2VFbGVtZW50IiwiX21haW5FbGVtZW50IiwicGFyZW50RWxlbWVudCIsIl9yZWdpc3RlckNsaWNrIiwiYm9keSIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsIm9wYWNpdHkiLCJfdW5yZWdpc3RlckNsaWNrIiwiX3JlbW92ZUFmdGVyVHJhbnNpdGlvbiIsImNyZWF0ZUVsZW1lbnQiLCJiYWNrZ3JvdW5kIiwidHJhbnNpdGlvbkR1cmF0aW9uIiwiaGFzQ2xvc2VCdXR0b24iLCJpbm5lckh0bWwiLCJjbGFzc0xheW91dCIsImNsYXNzQ2xvc2UiLCJjbGFzc092ZXJsYXlUZXh0Iiwib3ZlcmxheVRleHQiLCJjbGFzc05hbWUiLCJhZGRDbGFzc0xheW91dCIsImlubmVyVGV4dCIsImdldE92ZXJsYXlTdHlsZSIsIl9hZGRFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9yZW1vdmVFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uQ2xpY2tDbG9zZSIsImhhbmRsZVRyYW5zaXRpb24iLCJldmVudCIsInByb3BlcnR5TmFtZSIsIkRFRkFVTFRfU1RZTEVTIiwiYmFja2dyb3VuZENvbG9yIiwiUk9UQVRJT05fQU5JTUFUSU9OIiwiTG9hZGluZ0luZGljYXRvciIsImNvbnRhaW5lclN0eWxlcyIsImRlZmluZUFuaW1hdGlvbiIsImNvbnRhaW5lciIsImJ1aWxkQ29udGFpbmVyIiwiaW5kaWNhdG9yIiwiYnVpbGRJbmRpY2F0b3IiLCJwYXJlbnRJZCIsInBhcmVudCIsInZpc2liaWxpdHkiLCJoaWRlIiwiaGFuZGxlVHJhbnNpdGlvbkVuZCIsImRpc3BsYXkiLCJib3R0b20iLCJsZWZ0IiwiaGVpZ2h0Iiwid2lkdGgiLCJyaWdodCIsInRvcCIsInRyYW5zaXRpb24iLCJzZXRTdHlsZUF0dHJpYnV0ZSIsImJvcmRlclJhZGl1cyIsImJvcmRlciIsImJvcmRlckNvbG9yIiwibWFyZ2luIiwidHJhbnNmb3JtIiwidHJhbnNmb3JtU3R5bGUiLCJhbmltYXRpb24iLCJhdHRycyIsImtleXMiLCJmb3JFYWNoIiwiayIsInNldFByb3BlcnR5IiwiaGVhZCIsInNoZWV0IiwiQ1NTU3R5bGVTaGVldCIsImluc2VydFJ1bGUiLCJMT0FESU5HX0lORElDQVRPUl9TVFlMRVMiLCJCcmFpbnRyZWVQYXlwYWxQYXltZW50U3RyYXRlZ3kiLCJicmFpbnRyZWVJbnRlZ3JhdGlvblNlcnZpY2UiLCJicmFpbnRyZWVNZXNzYWdlcyIsImxvYWRpbmdJbmRpY2F0b3IiLCJicmFpbnRyZWVPcHRpb25zIiwiYmFubmVyQ29udGFpbmVySWQiLCJsb2FkUGF5cGFsQ2hlY2tvdXRJbnN0YW5jZSIsInVzZVN0b3JlQ3JlZGl0IiwiaXNQcm92aWRlckVycm9yIiwicGF5cGFsQnV0dG9uUmVuZGVyIiwiY2xvc2UiLCJfcmVzb2x2ZSIsImhhbmRsZUVycm9yIiwiYnJhaW50cmVlVG9rZW5pemVQYXlsb2FkIiwiZ3JhbmRUb3RhbCIsImdldE91dHN0YW5kaW5nQmFsYW5jZSIsInN0b3JlUHJvZmlsZSIsInN0b3JlTGFuZ3VhZ2UiLCJnZXRQYXltZW50TWV0aG9kIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZ2V0U2hpcHBpbmdBZGRyZXNzIiwic2hpcHBpbmdBZGRyZXNzT3ZlcnJpZGUiLCJsb2NhbGUiLCJvZmZlckNyZWRpdCIsInNoaXBwaW5nQWRkcmVzc0VkaXRhYmxlIiwic2Vzc2lvbklkIiwidmF1bHRQYXltZW50SW5zdHJ1bWVudCIsInZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudCIsInNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50IiwiZGV2aWNlX2luZm8iLCJwYXlwYWxfYWNjb3VudCIsInBheW1lbnRNZXRob2RJZCIsInNob3VsZFNob3dQYXlQYWxDcmVkaXRCYW5uZXIiLCJyZW5kZXJQYXlQYWxNZXNzYWdlcyIsInJlbmRlclBheVBhbEJ1dHRvbiIsIm9uUGF5bWVudEVycm9yIiwic3VibWl0Rm9ybSIsIm9uUmVuZGVyQnV0dG9uIiwibG9hZGluZ0luZGljYXRvckNvbnRhaW5lciIsImZ1bmRpbmdTb3VyY2UiLCJGVU5ESU5HIiwiUEFZUEFMIiwiQnV0dG9ucyIsImVudiIsInRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IiLCJjcmVhdGVPcmRlciIsInNldHVwUGF5bWVudCIsIm9uQXBwcm92ZSIsImF1dGhvcml6ZURhdGEiLCJ0b2tlbml6ZVBheW1lbnRPclRocm93Iiwib25DYW5jZWwiLCJpc0VsaWdpYmxlIiwiY3VzdG9tZXIiLCJnZXRDdXN0b21lciIsImdldENoZWNrb3V0T3JUaHJvdyIsIm91dHN0YW5kaW5nQmFsYW5jZSIsImN1cnJlbmN5Q29kZSIsImdldFN0b3JlQ29uZmlnT3JUaHJvdyIsImFkZHJlc3NlcyIsImNyZWF0ZVBheW1lbnQiLCJpc0JyYWludHJlZVBheXBhbFByb3ZpZGVyRXJyb3IiLCJmaWx0ZXIiLCJlIiwicHJvdmlkZXJfZXJyb3IiLCJpc0xvYWRpbmciLCJDb250ZW50VHlwZSIsIlNES19WRVJTSU9OX0hFQURFUlMiLCJCcmFpbnRyZWVSZXF1ZXN0U2VuZGVyIiwicmVxdWVzdFNlbmRlciIsImdldE9yZGVyU3RhdHVzIiwidXJsIiwiaGVhZGVycyIsIkpzb24iLCJnZXQiLCJERUZBVUxUX1JFU1BPTlNFIiwiUmVxdWVzdEVycm9yIiwiUGF5bWVudE1ldGhvZEludmFsaWRFcnJvciIsIlRpbWVvdXRFcnJvciIsIkJyYWludHJlZUxvY2FsTWV0aG9kc1BheW1lbnRTdHJhdGVneSIsImJyYWludHJlZVJlcXVlc3RTZW5kZXIiLCJwb2xsaW5nSW50ZXJ2YWwiLCJtYXhQb2xsaW5nSW50ZXJ2YWxUaW1lIiwiaXNMUE1zVXBkYXRlRXhwZXJpbWVudEVuYWJsZWQiLCJwb2xsaW5nVGltZXIiLCJzdG9wUG9sbGluZyIsIm5vb3AiLCJpc1BvbGxpbmdFbmFibGVkIiwiZ2F0ZXdheUlkIiwiYnJhaW50cmVlbG9jYWxtZXRob2RzIiwibWVyY2hhbnRJZCIsImlzTm9uSW5zdGFudFBheW1lbnRNZXRob2QiLCJwYXlsb2FkIiwiZXhlY3V0ZVdpdGhOb3RJbnN0YW50TFBNIiwiZXhlY3V0ZVdpdGhJbnN0YW50TFBNIiwiYmFzaWNQYXltZW50RGF0YSIsImdldExQTXNCYXNpY1BheW1lbnREYXRhIiwiaXNCcmFpbnRyZWVSZWRpcmVjdEVycm9yIiwicmVkaXJlY3RVcmwiLCJhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCIsInJlZGlyZWN0X3VybCIsImxvY2F0aW9uIiwicmVwbGFjZSIsInN0YXJ0UGF5bWVudCIsImdldEluc3RhbnRMUE1Db25maWciLCJnZXRJbnN0YW50TFBNQ2FsbGJhY2siLCJiaWxsaW5nIiwibGluZUl0ZW1zIiwiaXNTaGlwcGluZ1JlcXVpcmVkIiwicGh5c2ljYWxJdGVtcyIsImxlbmd0aCIsImNoZWNrb3V0VXJsIiwibGlua3MiLCJjaGVja291dExpbmsiLCJwYXltZW50VHlwZSIsImZhbGxiYWNrIiwiYnV0dG9uVGV4dCIsInNoaXBwaW5nQWRkcmVzc1JlcXVpcmVkIiwiZ2l2ZW5OYW1lIiwic3VybmFtZSIsIm9uUGF5bWVudFN0YXJ0Iiwic3RhcnQiLCJvcmRlcklkIiwicGF5bWVudElkIiwib3JkZXJfaWQiLCJpc0JyYWludHJlZU9yZGVyU2F2ZWRSZXNwb25zZSIsIm9yZGVyX2lkX3NhdmVkX3N1Y2Nlc3NmdWxseSIsImluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtIiwic3RhcnRQYXltZW50RXJyb3IiLCJwYXlsb2FkRGF0YSIsInJlc2V0UG9sbGluZ01lY2hhbmlzbSIsInRvVXBwZXJDYXNlIiwicmVzb2x2ZVByb21pc2UiLCJyZWplY3RQcm9taXNlIiwidGltZW91dCIsImNsZWFyVGltZW91dCIsIm9yZGVyU3RhdHVzIiwicGFyYW1zIiwidXNlTWV0YWRhdGEiLCJpc09yZGVyUGVuZGluZyIsIlBlbmRpbmciLCJpc09yZGVyQXBwcm92ZWQiLCJDb21wbGV0ZWQiLCJpc1BvbGxpbmdFcnJvciIsIkZhaWxlZCIsImRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20iLCJyZWluaXRpYWxpemVTdHJhdGVneSIsImNyZWF0ZVJlcXVlc3RTZW5kZXIiLCJnYXRld2F5IiwiaXNJbnZhbGlkU3R5bGVPcHRpb24iLCJzdHlsZU9wdGlvbiIsImdldEZhc3RsYW5lU3R5bGVzIiwic3R5bGVTZXR0aW5ncyIsInVpU3R5bGVzIiwiZmFzdGxhbmVTdHlsZXMiLCJvbWl0QnkiLCJpbnB1dCIsInRvZ2dsZSIsInRleHRCb2R5IiwidGV4dENhcHRpb24iLCJjYXB0aW9uIiwiYnJhbmRpbmciLCJjbGVhblVwRmFzdGxhbmVTdHlsZXMiLCJmYXN0bGFuZVJvb3RTZXR0aW5nc0JhY2tncm91bmRDb2xvciIsImVycm9yQ29sb3IiLCJmYXN0bGFuZVJvb3RTZXR0aW5nc0Vycm9yQ29sb3IiLCJmb250RmFtaWx5IiwiZmFzdGxhbmVSb290U2V0dGluZ3NGb250RmFtaWx5IiwiZm9udFNpemVCYXNlIiwiZmFzdGxhbmVSb290U2V0dGluZ3NGb250U2l6ZSIsInBhZGRpbmciLCJmYXN0bGFuZVJvb3RTZXR0aW5nc1BhZGRpbmciLCJwcmltYXJ5Q29sb3IiLCJmYXN0bGFuZVJvb3RTZXR0aW5nc1ByaW1hcnlDb2xvciIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlclJhZGl1cyIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlckNvbG9yIiwiZm9jdXNCb3JkZXJDb2xvciIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0ZvY3VzQm9yZGVyQmFzZSIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0JhY2tncm91bmRDb2xvciIsImJvcmRlcldpZHRoIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyV2lkdGgiLCJ0ZXh0Q29sb3JCYXNlIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzVGV4dENvbG9yQmFzZSIsImNvbG9yUHJpbWFyeSIsImZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclByaW1hcnkiLCJjb2xvclNlY29uZGFyeSIsImZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclNlY29uZGFyeSIsImZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0NvbG9yIiwiZm9udFNpemUiLCJmYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NGb250U2l6ZSIsImZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0NvbG9yIiwiZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzRm9udFNpemUiLCJmYXN0bGFuZUJyYW5kaW5nU2V0dGluZ3MiLCJtZXJnZUZhc3RsYW5lU3R5bGVzIiwiaXNCcmFpbnRyZWVBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIiLCJVbnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25UeXBlIiwiQnJhaW50cmVlRmFzdGxhbmVQYXltZW50U3RyYXRlZ3kiLCJicmFpbnRyZWVGYXN0bGFuZVV0aWxzIiwiYnJhaW50cmVlZmFzdGxhbmUiLCJvbkluaXQiLCJvbkNoYW5nZSIsImlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZCIsImlzVGhyZWVEU0V4cGVyaW1lbnRFbmFibGVkIiwiaXMzRFNFbmFibGVkIiwiaXMzZHNFbmFibGVkIiwiaW5pdGlhbGl6ZUJyYWludHJlZUZhc3RsYW5lT3JUaHJvdyIsInNob3VsZFJ1bkF1dGhlbnRpY2F0aW9uRmxvdyIsInJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3ciLCJpbml0aWFsaXplQ2FyZENvbXBvbmVudCIsInJlbmRlckJyYWludHJlZUNhcmRDb21wb25lbnQiLCJoYW5kbGVCcmFpbnRyZWVTdG9yZWRJbnN0cnVtZW50Q2hhbmdlIiwicGF5bWVudFBheWxvYWQiLCJwcmVwYXJlUGF5bWVudFBheWxvYWQiLCJyZW1vdmVTZXNzaW9uSWRGcm9tQ29va2llcyIsImJyYWludHJlZUNhcmRDb21wb25lbnQiLCJmdWxsTmFtZSIsImNhcmRDb21wb25lbnRPcHRpb25zIiwiZmllbGRzIiwicHJlZmlsbCIsImVuYWJsZWQiLCJwaG9uZU51bWJlciIsInBheXBhbFBheW1lbnRDb21wb25lbnQiLCJnZXRCcmFpbnRyZWVGYXN0bGFuZUNvbXBvbmVudE9yVGhyb3ciLCJnZXRCcmFpbnRyZWVDYXJkQ29tcG9uZW50T3JUaHJvdyIsInBheXBhbEluc3RydW1lbnQiLCJnZXRQYXlQYWxJbnN0cnVtZW50cyIsImdldERldmljZVNlc3Npb25JZCIsInRocmVlRFNUb2tlbiIsImJpZ3BheVRva2VuIiwiaWluIiwicGF5cGFsX2Zhc3RsYW5lX3Rva2VuIiwiZ2V0UGF5bWVudFRva2VuIiwicGF5bWVudFRva2VuIiwibWFwVG9QYXlQYWxBZGRyZXNzIiwiYmluR3Vlc3QiLCJwYXltZW50U291cmNlIiwiY2FyZCIsImJpbkRldGFpbHMiLCJnZXRPcmRlck9yVGhyb3ciLCJvcmRlckFtb3VudCIsIm9uIiwidmVyaWZ5RXJyb3IiLCJzdGF0ZU9yUHJvdmluY2UiLCJnZXRDdXN0b21lck9yVGhyb3ciLCJwYXltZW50UHJvdmlkZXJDdXN0b21lciIsImdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyIiwiYnJhaW50cmVlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJwYXlwYWxGYXN0bGFuZVNlc3Npb25JZCIsImdldFNlc3Npb25JZEZyb21Db29raWVzIiwiaXNHdWVzdCIsImF1dGhlbnRpY2F0aW9uU3RhdGUiLCJDQU5DRUxFRCIsImdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyT3JUaHJvdyIsImluc3RydW1lbnRzIiwicGF5cGFsQXhvU2RrIiwiZ2V0QnJhaW50cmVlRmFzdGxhbmVPclRocm93Iiwic2VsZWN0aW9uQ2hhbmdlZCIsInNlbGVjdGVkQ2FyZCIsInByb2ZpbGUiLCJzaG93Q2FyZFNlbGVjdG9yIiwiYnJhaW50cmVlRmFzdGxhbmVDdXN0b21lciIsInNlbGVjdGVkSW5zdHJ1bWVudHMiLCJtYXBQYXlQYWxUb0JjSW5zdHJ1bWVudCIsInVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyIiwiQ29va2llU3RvcmFnZSIsImNvb2tpZUtleSIsImVuY29kZVVSSUNvbXBvbmVudCIsImNvb2tpZSIsInZhbHVlIiwiZmlyc3RJbmRleCIsImluZGV4T2YiLCJsYXN0SW5kZXgiLCJkZWNvZGVVUklDb21wb25lbnQiLCJzdWJzdHJpbmciLCJzZXQiLCJzZWN1cmUiLCJjb29raWVUZXh0IiwiZXhwaXJlcyIsInBhdGgiLCJkb21haW4iLCJ0b1VUQ1N0cmluZyIsIm5vdyIsIkRhdGUiLCJtaW51dGVzIiwic2V0VGltZSIsImdldFRpbWUiLCJCcmFpbnRyZWVGYXN0bGFuZVV0aWxzIiwiZ2V0Q2FydCIsIkZhc3RsYW5lQ2FyZENvbXBvbmVudCIsInNob3VsZFNldFNoaXBwaW5nT3B0aW9uIiwiZ2V0TWV0aG9kSWRPclRocm93IiwibG9va3VwQ3VzdG9tZXJCeUVtYWlsIiwidHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdyIsImlkZW50aXR5IiwiZ2V0QmlsbGluZ0FkZHJlc3MiLCJpc0Zhc3RsYW5lU2hpcHBpbmdPcHRpb25BdXRvU2VsZWN0RW5hYmxlZCIsImN1c3RvbWVyRW1haWwiLCJjdXN0b21lckNvbnRleHRJZCIsIlVOUkVDT0dOSVpFRCIsInNhdmVTZXNzaW9uSWRUb0Nvb2tpZXMiLCJwcm9maWxlRGF0YSIsInNoaXBwaW5nQWRkcmVzc2VzIiwibWFwUGF5UGFsVG9CY0FkZHJlc3MiLCJwYXlwYWxCaWxsaW5nQWRkcmVzcyIsImdldFBheVBhbEJpbGxpbmdBZGRyZXNzZXMiLCJiaWxsaW5nQWRkcmVzc2VzIiwibWVyZ2VTaGlwcGluZ0FuZEJpbGxpbmdBZGRyZXNzZXMiLCJ1cGRhdGVCaWxsaW5nQWRkcmVzcyIsImRpZ2l0YWxJdGVtcyIsImRpZ2l0YWxJdGVtQmlsbGluZyIsInVwZGF0ZVNoaXBwaW5nQWRkcmVzcyIsInNldFNoaXBwaW5nT3B0aW9uIiwic2V0RGF0ZSIsImdldERhdGUiLCJtYXAiLCJicmFuZCIsImV4cGlyeSIsImxhc3REaWdpdHMiLCJleHBpcnlZZWFyIiwiZXhwaXJ5TW9udGgiLCJkZWZhdWx0SW5zdHJ1bWVudCIsImxhc3Q0IiwicHJvdmlkZXIiLCJ0cnVzdGVkU2hpcHBpbmdBZGRyZXNzIiwidW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uTW9kZSIsIlBBTiIsInBob25lcyIsImNvdW50cmllcyIsImdldENvdW50cmllcyIsImdldENvdW50cnlOYW1lQnlDb3VudHJ5Q29kZSIsIm1hdGNoZWRDb3VudHJ5IiwiY29tcGFueSIsImN1c3RvbUZpZWxkcyIsImdpdmVuX25hbWUiLCJpc0VxdWFsIiwibm9ybWFsaXplQWRkcmVzcyIsIm9taXQiLCJmaWx0ZXJlZEJpbGxpbmdBZGRyZXNzZXMiLCJzb21lIiwiY29uc2lnbm1lbnRzIiwiZ2V0Q29uc2lnbm1lbnRzIiwiYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zIiwicmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiIsIm9wdGlvbiIsImlzUmVjb21tZW5kZWQiLCJzZWxlY3RlZE9wdGlvbiIsInNlbGVjdFNoaXBwaW5nT3B0aW9uIiwiQnJhaW50cmVlVmlzYUNoZWNrb3V0UGF5bWVudFN0cmF0ZWd5IiwiZm9ybVBvc3RlciIsImJyYWludHJlZXZpc2FjaGVja291dCIsInZpc2FDaGVja291dE9wdGlvbnMiLCJjaGVja291dCIsIm9uUGF5bWVudFNlbGVjdCIsImJyYWludHJlZVZpc2FDaGVja291dCIsInZpc2FDaGVja291dFNkayIsImluaXRPcHRpb25zIiwiY3JlYXRlSW5pdE9wdGlvbnMiLCJzZXR0aW5ncyIsInNoaXBwaW5nIiwiY29sbGVjdFNoaXBwaW5nIiwicGF5bWVudFJlcXVlc3QiLCJzdWJ0b3RhbCIsIlN0cmluZyIsImluaXQiLCJwYXltZW50U3VjY2Vzc1BheWxvYWQiLCJsb2FkQ2hlY2tvdXQiLCJtYXBUb1Zpc2FDaGVja291dEFkZHJlc3MiLCJwb3N0Rm9ybSIsInVzZXJEYXRhIiwiY2FyZEluZm9ybWF0aW9uIiwidXNlckVtYWlsIiwicGF5bWVudF90eXBlIiwiYWN0aW9uIiwiZGV2aWNlX2RhdGEiLCJjYXJkX2luZm9ybWF0aW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRUeXBlIiwibGFzdFR3byIsImJpbGxpbmdfYWRkcmVzcyIsImdldEFkZHJlc3MiLCJzaGlwcGluZ19hZGRyZXNzIiwiaG9zdFdpbmRvdyIsImNyZWF0ZUZvcm1Qb3N0ZXIiLCJCcmFpbnRyZWVWZW5tb1BheW1lbnRTdHJhdGVneSIsInZlbm1vT3B0aW9ucyIsImJyYWludHJlZXZlbm1vIiwiaW5pdGlhbGl6ZUJyYWludHJlZVZlbm1vIiwiaXNCcmFpbnRyZWVWZW5tb1dlYkZhbGxiYWNrU3VwcG9ydCIsIm1vYmlsZVdlYkZhbGxCYWNrIiwidG9rZW5pemVSZXN1bHQiLCJicmFpbnRyZWVWZW5tb1Rva2VuaXplIiwiQnJhaW50cmVlQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSIsImJyYWludHJlZUhvc3RlZEZvcm0iLCJpc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZCIsImZvcm0iLCJ1bnN1cHBvcnRlZENhcmRCcmFuZHMiLCJpc0hvc3RlZEZvcm1Jbml0aWFsaXplZCIsImlzSW5pdGlhbGl6ZWQiLCJzaG91bGRJbml0aWFsaXplQnJhaW50cmVlRmFzdGxhbmUiLCJwcmVwYXJlSG9zdGVkUGF5bWVudERhdGEiLCJwcm9jZXNzQWRkaXRpb25hbEFjdGlvbiIsImNvbW1vblBheW1lbnREYXRhIiwiaXNTdWJtaXR0aW5nV2l0aFN0b3JlZENhcmQiLCJzaG91bGRQZXJmb3JtM0RTVmVyaWZpY2F0aW9uIiwidG9rZW5pemVGb3JTdG9yZWRDYXJkVmVyaWZpY2F0aW9uIiwidmVyaWZ5Q2FyZFdpdGhIb3N0ZWRGb3JtIiwicGF5ZXJfYXV0aF9yZXF1ZXN0Iiwic3RvcmVkQ3JlZGl0Q2FyZE5vbmNlIiwidGhyZWVfZHNfcmVzdWx0IiwiaXNCcmFpbnRyZWVQYXltZW50UmVxdWVzdDNEU0Vycm9yIiwiZ2V0Q2FyZEluc3RydW1lbnRPclRocm93IiwiaXNIb3N0ZWRGb3JtRW5hYmxlZCIsImJyYWludHJlZUN1c3RvbWVyIiwiaXNBY2NlbGVyYXRlZENoZWNrb3V0RW5hYmxlZCIsImlzQnJhaW50cmVlRm9ybUZpZWxkc01hcCIsImlzQnJhaW50cmVlSG9zdGVkRm9ybUVycm9yIiwiaW52YWxpZEZpZWxkS2V5cyIsIkFycmF5IiwiaXNBcnJheSIsImV2ZXJ5Iiwia2V5IiwiQnJhaW50cmVlSG9zdGVkRm9ybVR5cGUiLCJCcmFpbnRyZWVIb3N0ZWRGb3JtIiwiaXNJbml0aWFsaXplZEhvc3RlZEZvcm0iLCJoYW5kbGVCbHVyIiwiZm9ybU9wdGlvbnMiLCJvbkJsdXIiLCJmaWVsZFR5cGUiLCJtYXBGaWVsZFR5cGUiLCJlbWl0dGVkQnkiLCJtYXBFcnJvcnMiLCJoYW5kbGVGb2N1cyIsIm9uRm9jdXMiLCJoYW5kbGVDYXJkVHlwZUNoYW5nZSIsImNhcmRzIiwib25DYXJkVHlwZUNoYW5nZSIsImhhbmRsZUlucHV0U3VibWl0UmVxdWVzdCIsIm9uRW50ZXIiLCJoYW5kbGVWYWxpZGl0eUNoYW5nZSIsIm9uVmFsaWRhdGUiLCJpc1ZhbGlkIiwiaXNWYWxpZEZvcm0iLCJtYXBWYWxpZGF0aW9uRXJyb3JzIiwiQ3JlZGl0Q2FyZCIsIlN0b3JlZENhcmRWZXJpZmljYXRpb24iLCJtYXBGaWVsZE9wdGlvbnMiLCJjYXJkRmllbGRzIiwiY3JlYXRlSG9zdGVkRmllbGRzIiwibWFwU3R5bGVPcHRpb25zIiwibWFwQmlsbGluZ0FkZHJlc3MiLCJpc05pbCIsIm1hcFRva2VuaXplRXJyb3IiLCJob3N0ZWRGaWVsZHMiLCJob3N0ZWRGaWVsZHNPcHRpb25zIiwicHJldmVudEN1cnNvckp1bXBzIiwic3VwcG9ydGVkQ2FyZEJyYW5kcyIsImNhcmRCcmFuZCIsImluY2x1ZGVzIiwiY2FyZE51bWJlciIsInBsYWNlaG9sZGVyIiwiaW50ZXJuYWxMYWJlbCIsImFjY2Vzc2liaWxpdHlMYWJlbCIsImNhcmRFeHBpcnkiLCJjYXJkQ29kZSIsImNhcmROYW1lIiwiY2FyZE51bWJlclZlcmlmaWNhdGlvbiIsImNhcmRDb2RlVmVyaWZpY2F0aW9uIiwibWFwU3R5bGVzIiwiZm9udFdlaWdodCIsImZvY3VzIiwiQ2FyZE51bWJlclZlcmlmaWNhdGlvbiIsIkNhcmROdW1iZXIiLCJDYXJkRXhwaXJ5IiwiQ2FyZENvZGVWZXJpZmljYXRpb24iLCJDYXJkQ29kZSIsIkNhcmROYW1lIiwiZW50cmllcyIsImlzVmFsaWRQYXJhbSIsImlzUG90ZW50aWFsbHlWYWxpZCIsInJlZHVjZSIsInJlc3VsdCIsImZpZWxkS2V5IiwiY3JlYXRlSW52YWxpZEVycm9yIiwiaXNTdG9yZWRDYXJkIiwiY3JlYXRlUmVxdWlyZWRFcnJvciIsImZvcm1GaWVsZHMiLCJCcmFpbnRyZWVQYXlwYWxDdXN0b21lclN0cmF0ZWd5IiwiYnJhaW50cmVlcGF5cGFsIiwiX2UiLCJwYXltZW50QnV0dG9uU3R5bGVzIiwiY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMiLCJwYXlwYWxDaGVja291dE9wdGlvbnMiLCJzaWduSW4iLCJjcmVkZW50aWFscyIsInNpZ25JbkN1c3RvbWVyIiwic2lnbk91dCIsInNpZ25PdXRDdXN0b21lciIsImV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQiLCJjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrIiwiYnV0dG9uU3R5bGVzIiwibG9hZERlZmF1bHRDaGVja291dCIsInRva2VuaXplUGF5bG9hZCIsImJ1dHRvbkNvbnRhaW5lcklkIiwib25FcnJvckNhbGxiYWNrIiwiQnJhaW50cmVlUGF5cGFsQ3JlZGl0Q3VzdG9tZXJTdHJhdGVneSIsImJyYWludHJlZXBheXBhbGNyZWRpdCIsImhhc1JlbmRlcmVkU21hcnRCdXR0b24iLCJQQVlMQVRFUiIsIkNSRURJVCIsIkJyYWludHJlZUZhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneSIsImdldFZhbGlkUGF5bWVudE1ldGhvZE9yVGhyb3ciLCJwYXlwYWxGYXN0bGFuZVN0eWxlc1NldHRpbmdzIiwiY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQiLCJwcmltYXJ5TWV0aG9kSWQiLCJzaG91bGRSdW5BY2NlbGVyYXRlZENoZWNrb3V0IiwidmFsaWRQYXltZW50TWV0aG9kSWQiLCJOb3RJbXBsZW1lbnRlZEVycm9yIiwiQnJhaW50cmVlVmlzYUNoZWNrb3V0Q3VzdG9tZXJTdHJhdGVneSIsImJ1dHRvbkNsYXNzTmFtZSIsInZpc2FDaGVja291dEluc3RhbmNlIiwic2lnbkluQnV0dG9uIiwiY3JlYXRlU2lnbkluQnV0dG9uIiwiYnV0dG9uQ2xhc3MiLCJxdWVyeVNlbGVjdG9yIiwiaW5zZXJ0VmlzYUNoZWNrb3V0QnV0dG9uIiwidmlzYUNoZWNrb3V0QnV0dG9uIiwiZmxleERpcmVjdGlvbiIsImlubmVySFRNTCIsIkJ1eU5vd0NhcnRDcmVhdGlvbkVycm9yIiwiZ2V0VmFsaWRCdXR0b25TdHlsZSIsImZ1bmRpbmdpY29ucyIsInNoYXBlIiwidGFnbGluZSIsInZhbGlkU3R5bGVzIiwiZ2V0VmFsaWRIZWlnaHQiLCJjdXJyZW50SGVpZ2h0IiwiaXNOYU4iLCJCcmFpbnRyZWVQYXlwYWxCdXR0b25TdHJhdGVneSIsImJ1eU5vd0luaXRpYWxpemVPcHRpb25zIiwic2hvdWxkUHJvY2Vzc1BheW1lbnQiLCJvbkF1dGhvcml6ZUVycm9yIiwib25FbGlnaWJpbGl0eUZhaWx1cmUiLCJidXlOb3dDYXJ0IiwiZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5IiwiY3JlYXRlQnV5Tm93Q2FydCIsImJ1eU5vd0NhcnRJZCIsImNhcnRfaWQiLCJidXlOb3dDYXJkUmVxdWVzdEJvZHkiLCJCcmFpbnRyZWVQYXlwYWxDcmVkaXRCdXR0b25TdHJhdGVneSIsImlzQmFubmVySW1wbGVtZW50YXRpb25EaXNhYmxlZCIsIm1lc3NhZ2luZ0NvbnRhaW5lcklkIiwiYnV0dG9uU3R5bGUiLCJsYWJlbCIsIkJyYWludHJlZVZpc2FDaGVja291dEJ1dHRvblN0cmF0ZWd5IiwicGF5bWVudFN1Y2Nlc3MiLCJ0b1Zpc2FDaGVja291dEFkZHJlc3MiLCJhbGlnbkl0ZW1zIiwiZ2V0VmVubW9CdXR0b25TdHlsZSIsImMiLCJXSElURSIsImJhY2tncm91bmRQb3NpdGlvbiIsImJhY2tncm91bmRTaXplIiwiYmFja2dyb3VuZEltYWdlIiwiQkxVRSIsImJhY2tncm91bmRSZXBlYXQiLCJjdXJzb3IiLCJtaW5IZWlnaHQiLCJtaW5XaWR0aCIsIkJyYWludHJlZVZlbm1vQnV0dG9uU3RyYXRlZ3kiLCJjYXJ0QnV0dG9uU3R5bGVzIiwicmVuZGVyVmVubW9CdXR0b24iLCJpc1Vuc3VwcG9ydGVkQnJvd3NlckVycm9yIiwiaGFuZGxlSW5pdGlhbGl6YXRpb25WZW5tb0Vycm9yIiwiY2FydFJlcXVlc3RCb2R5IiwicmVtb3ZlVmVubW9Db250YWluZXIiLCJidXR0b25Db250YWluZXIiLCJ2ZW5tb0J1dHRvbiIsInNldEF0dHJpYnV0ZSIsImJ1eUJvd0NhcnQiLCJoYW5kbGVQb3N0Rm9ybSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/braintree.js\n\n}");

/***/ })

}]);
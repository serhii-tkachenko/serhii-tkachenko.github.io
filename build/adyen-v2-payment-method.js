"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["adyen-v2-payment-method"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/adyen.js":
/*!*********************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/adyen.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAdyenV2PaymentStrategy: () => (/* binding */ A),\n/* harmony export */   createAdyenV3PaymentStrategy: () => (/* binding */ N)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nclass i extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class a extends i{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}var o,r,s,d,c,l,p,h;class u{constructor(e,t,n=window){this._scriptLoader=e,this._stylesheetLoader=t,this._window=n}load(e){var t,n,i,o,r,s;return i=this,o=void 0,s=function*(){if(yield Promise.all([this._stylesheetLoader.loadStylesheet(`https://checkoutshopper-${null!==(t=e.environment)&&void 0!==t?t:\"\"}.adyen.com/checkoutshopper/sdk/3.10.1/adyen.css`,{prepend:!1,attributes:{integrity:\"sha384-8ofgICZZ/k5cC5N7xegqFZOA73H9RQ7H13439JfAZW8Gj3qjuKL2isaTD3GMIhDE\",crossorigin:\"anonymous\"}}),this._scriptLoader.loadScript(`https://checkoutshopper-${null!==(n=e.environment)&&void 0!==n?n:\"\"}.adyen.com/checkoutshopper/sdk/3.10.1/adyen.js`,{async:!0,attributes:{integrity:\"sha384-wG2z9zSQo61EIvyXmiFCo+zB3y0ZB4hsrXVcANmpP8HLthjoQJQPBh7tZKJSV8jA\",crossorigin:\"anonymous\"}})]),!this._window.AdyenCheckout)throw new a;return new this._window.AdyenCheckout(e)},new((r=void 0)||(r=Promise))(function(e,t){function n(e){try{d(s.next(e))}catch(e){t(e)}}function a(e){try{d(s.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r(function(e){e(i)})).then(n,a)}d((s=s.apply(i,o||[])).next())})}}function y(e,t){return console.log(\"resolveIds\",t),Object.assign(e,{resolveIds:t})}function m(e){return\"object\"==typeof e&&\"string\"==typeof e.data.paymentMethod.encryptedSecurityCode||\"string\"==typeof e.data.paymentMethod.encryptedExpiryMonth}!function(e){e.ThreeDS2Fingerprint=\"threeDS2Fingerprint\",e.ThreeDS2=\"threeDS2\",e.Redirect=\"redirect\",e.QRCode=\"qrCode\",e.Voucher=\"voucher\",e.Sdk=\"sdk\"}(o||(o={})),function(e){e.ThreeDS2Fingerprint=\"threeDS2Fingerprint\",e.ThreeDS2Challenge=\"threeDS2Challenge\",e.Redirect=\"redirect\",e.QRCode=\"qrCode\",e.Voucher=\"voucher\"}(r||(r={})),function(e){e.SecuredFields=\"securedfields\"}(s||(s={})),function(e){e.ACH=\"ach\",e.AliPay=\"alipay\",e.Bancontact=\"bcmc\",e.CreditCard=\"scheme\",e.Klarna=\"klarna\",e.KlarnaPayNow=\"klarna_paynow\",e.KlarnaAccount=\"klarna_account\",e.IDEAL=\"ideal\",e.GiroPay=\"giropay\",e.GooglePay=\"paywithgoogle\",e.SEPA=\"sepadirectdebit\",e.Sofort=\"directEbanking\",e.Vipps=\"vipps\",e.WeChatPayQR=\"wechatpayQR\"}(d||(d={})),function(e){e.POST=\"POST\"}(c||(c={})),function(e){e.ChallengeShopper=\"ChallengeShopper\",e.Error=\"Error\",e.IdentifyShopper=\"IdentifyShopper\"}(l||(l={})),function(e){e.CardNumber=\"encryptedCardNumber\",e.SecurityCode=\"encryptedSecurityCode\",e.ExpiryDate=\"encryptedExpiryDate\"}(p||(p={}));class g extends i{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class _ extends g{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(h||(h={}));class f extends i{constructor(e){super(function(e){switch(e){case h.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case h.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case h.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case h.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}function v(e){return Boolean(e.instrumentId)}function C(){const{navigator:e}=window;let t;return t=e.language?e.language:e.userLanguage,{color_depth:window.screen.colorDepth||24,java_enabled:\"function\"==typeof e.javaEnabled&&e.javaEnabled(),language:t,screen_height:window.screen.height,screen_width:window.screen.width,time_zone_offset:(new Date).getTimezoneOffset().toString()}}class b extends i{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class w extends i{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}const S=e=>\"object\"==typeof e&&null!==e&&\"body\"in e;class I extends i{constructor(e,t){super(t||\"Unable to proceed because the payment form contains invalid data.\"),this.details=e,this.name=\"PaymentInvalidFormError\",this.type=\"payment_invalid_form\"}}var O=function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}d((i=i.apply(e,t||[])).next())})};class P{constructor(e,t){this._paymentIntegrationService=e,this._scriptLoader=t}initialize(e){return O(this,void 0,void 0,function*(){const{adyenv2:t}=e;if(!t)throw new g('Unable to initialize payment because \"options.adyenv2\" argument is not provided.');this._paymentInitializeOptions=t;const n=this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId),{originKey:i,clientKey:a,environment:o,paymentMethodsResponse:r}=n.initializationData||{},s={key:\"\",value:\"\"};return i?(s.key=\"originKey\",s.value=i):(s.key=\"clientKey\",s.value=a||\"\"),this._adyenClient=yield this._scriptLoader.load({environment:o,locale:this._paymentIntegrationService.getState().getLocale(),[s.key]:s.value,paymentMethodsResponse:r,translations:{es:{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-AR\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-ES\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-MX\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CL\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CO\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-PE\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"}}}),this._paymentComponent=yield this._mountPaymentComponent(n),n.method!==d.CreditCard&&n.method!==d.Bancontact||(this._cardVerificationComponent=yield this._mountCardVerificationComponent()),Promise.resolve()})}execute(e,t){return O(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(e,[\"payment\"]),a=n&&n.paymentData,o=a&&a.shouldSaveInstrument,r=a&&a.shouldSetAsDefaultInstrument;if(!n)return Promise.reject(new _([\"payment\"]));this._validateCardData(),yield this._paymentIntegrationService.submitOrder(i,t);const s=this._componentState;if(!s)throw new f(h.PaymentNotInitialized);if(a&&v(a)){let e={};if(m(s)){const{encryptedCardNumber:t,encryptedSecurityCode:n,encryptedExpiryMonth:i,encryptedExpiryYear:a}=s.data.paymentMethod;e={credit_card_number_confirmation:t,expiry_month:i,expiry_year:a,verification_value:n}}if(m(s)||-1!==[\"ideal\",\"sepadirectdebit\",\"directEbanking\",\"giropay\"].indexOf(s.data.paymentMethod.type))try{return void(yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:{formattedPayload:{bigpay_token:Object.assign(Object.assign({},e),{token:a.instrumentId}),origin:window.location.origin,browser_info:C(),set_as_default_stored_instrument:r||null}}})))}catch(e){return void(yield this._processAdditionalAction(e,o,r))}}try{yield this._paymentIntegrationService.submitPayment({methodId:n.methodId,paymentData:{formattedPayload:{credit_card_token:{token:JSON.stringify(Object.assign(Object.assign({},s.data.paymentMethod),{origin:window.location.origin}))},browser_info:C(),vault_payment_instrument:o||null,set_as_default_stored_instrument:r||null}}})}catch(e){yield this._processAdditionalAction(e,o,r)}})}finalize(){return Promise.reject(new b)}deinitialize(){return this._componentState=void 0,this._paymentComponent&&(this._paymentComponent.unmount(),this._paymentComponent=void 0),this._cardVerificationComponent&&(this._cardVerificationComponent.unmount(),this._cardVerificationComponent=void 0),Promise.resolve()}_getAdyenClient(){if(!this._adyenClient)throw new f(h.PaymentNotInitialized);return this._adyenClient}_getPaymentInitializeOptions(){if(!this._paymentInitializeOptions)throw new g('\"options.adyenv2\" argument was not provided during initialization.');return this._paymentInitializeOptions}_getThreeDS2ChallengeWidgetSize(){const{additionalActionOptions:e,threeDS2Options:t}=this._getPaymentInitializeOptions();return e.widgetSize||(null==t?void 0:t.widgetSize)||\"05\"}_handleAction(e){return new Promise((t,n)=>{const{threeDS2ContainerId:i,additionalActionOptions:a}=this._getPaymentInitializeOptions(),{onBeforeLoad:o,containerId:s,onLoad:d,onComplete:c}=a,l=JSON.parse(e.action),p=this._getAdyenClient().createFromAction(l,{onAdditionalDetails:e=>{const n={methodId:l.paymentMethodType,paymentData:{nonce:JSON.stringify(e.data)}};c&&c(),t(n)},size:this._getThreeDS2ChallengeWidgetSize(),onError:e=>n(e)});o&&o(l.type===r.ThreeDS2Challenge||l.type===r.QRCode),p.mount(`#${s||i}`),d&&d(()=>{n(new w),p.unmount()})})}_mapAdyenPlaceholderData(e,t){if(!e)return{};const{firstName:n,lastName:i,address1:a,address2:o,postalCode:r,city:s,stateOrProvinceCode:d,countryCode:c}=e;return{holderName:t?`${n} ${i}`:\"\",billingAddress:{street:a,houseNumberOrName:o,postalCode:r,city:s,stateOrProvince:d,country:c}}}_mountCardVerificationComponent(){const e=this._getPaymentInitializeOptions(),t=this._getAdyenClient();let n;return new Promise((i,a)=>{var o,r,d;if(e.cardVerificationContainerId){n=t.create(s.SecuredFields,Object.assign(Object.assign({},e.options),{styles:Object.assign(Object.assign({},null===(o=e.options)||void 0===o?void 0:o.styles),{placeholder:Object.assign({color:\"transparent\",caretColor:\"#000\"},null===(d=null===(r=e.options)||void 0===r?void 0:r.styles)||void 0===d?void 0:d.placeholder)}),onChange:e=>this._updateComponentState(e),onError:t=>e.validateCardFields(t),onFieldValid:t=>e.validateCardFields(t)}));try{n.mount(`#${e.cardVerificationContainerId}`)}catch(e){a(new f(h.PaymentNotInitialized))}}i(n)})}_mountPaymentComponent(e){let t;const n=this._getPaymentInitializeOptions(),i=this._getAdyenClient();return new Promise((a,o)=>{switch(e.method){case d.CreditCard:case d.ACH:case d.Bancontact:{const a=this._paymentIntegrationService.getState().getBillingAddress(),{prefillCardHolderName:r}=e.initializationData;t=i.create(e.method,Object.assign(Object.assign({},n.options),{onChange:e=>this._updateComponentState(e),data:this._mapAdyenPlaceholderData(a,r)}));try{t.mount(`#${n.containerId}`)}catch(e){o(new f(h.PaymentNotInitialized))}break}case d.IDEAL:case d.SEPA:if(n.hasVaultedInstruments)this._updateComponentState({data:{paymentMethod:{type:e.method}}});else{t=i.create(e.method,Object.assign(Object.assign({},n.options),{onChange:e=>this._updateComponentState(e)}));try{t.mount(`#${n.containerId}`)}catch(e){o(new f(h.PaymentNotInitialized))}}break;case d.AliPay:case d.GiroPay:case d.Sofort:case d.Klarna:case d.KlarnaPayNow:case d.KlarnaAccount:case d.Vipps:case d.WeChatPayQR:this._updateComponentState({data:{paymentMethod:{type:e.method}}})}a(t)})}_processAdditionalAction(e,t,i){return O(this,void 0,void 0,function*(){if(!S(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"additional_action_required\"}))throw e;const a=yield this._handleAction(e.body.provider_data);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},a),{paymentData:Object.assign(Object.assign({},a.paymentData),{shouldSaveInstrument:t,shouldSetAsDefaultInstrument:i})}))}catch(e){return this._processAdditionalAction(e,t,i)}})}_updateComponentState(e){this._componentState=e}_validateCardData(){var e,t;const n=this._getPaymentInitializeOptions().hasVaultedInstruments?this._cardVerificationComponent:this._paymentComponent;if((null===(e=null==n?void 0:n.componentRef)||void 0===e?void 0:e.showValidation)&&n.state&&(n.componentRef.showValidation(),0===Object.keys(n.state).length||!n.state.isValid&&!n.state.issuer||\"sepadirectdebit\"===(null===(t=n.props)||void 0===t?void 0:t.type)&&n.state.data&&Object.values(n.state.data).some(e=>0===e.toString().trim().length)))throw new I(this._mapCardErrors(n.state.errors))}_mapCardErrors(e={}){const t={};return Object.keys(e).forEach(n=>{t[n]=[{message:e[n],type:n}]}),t}}const A=y(n=>new P(n,new u((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getStylesheetLoader)())),[{gateway:\"adyenv2\"}]);class j{constructor(e,t,n=window){this._scriptLoader=e,this._stylesheetLoader=t,this._window=n}load(e){var t,n,i,o,r,s;return i=this,o=void 0,s=function*(){if(yield Promise.all([this._stylesheetLoader.loadStylesheet(`https://checkoutshopper-${null!==(t=e.environment)&&void 0!==t?t:\"\"}.adyen.com/checkoutshopper/sdk/5.71.1/adyen.css`,{prepend:!1,attributes:{integrity:\"sha384-5MvB4RnzvviA3VBT4KYABZ4HXNZG5LRqREEgd41xt/pf/QvKmsj2O9GuNuywRXx9\",crossorigin:\"anonymous\"}}),this._scriptLoader.loadScript(`https://checkoutshopper-${null!==(n=e.environment)&&void 0!==n?n:\"\"}.adyen.com/checkoutshopper/sdk/5.71.1/adyen.js`,{async:!0,attributes:{integrity:\"sha384-yvY2yFNR4WqIjPqP9MzjI+gJimmaJnAvj4rLHKvgJbgFD5fMuf8zIJrFJOW8Lhhf\",crossorigin:\"anonymous\"}})]),!this._window.AdyenCheckout)throw new a;return yield this._window.AdyenCheckout(e)},new((r=void 0)||(r=Promise))(function(e,t){function n(e){try{d(s.next(e))}catch(e){t(e)}}function a(e){try{d(s.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r(function(e){e(i)})).then(n,a)}d((s=s.apply(i,o||[])).next())})}}var z=function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}d((i=i.apply(e,t||[])).next())})};class D{constructor(e,t){this._paymentIntegrationService=e,this._scriptLoader=t}initialize(e){return z(this,void 0,void 0,function*(){const{adyenv3:t}=e;if(!t)throw new g('Unable to initialize payment because \"options.adyenv3\" argument is not provided.');this._paymentInitializeOptions=t;const n=this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId),{environment:i,clientKey:a,paymentMethodsResponse:o,installmentOptions:r}=n.initializationData||{};return this._adyenClient=yield this._scriptLoader.load({paymentMethodsConfiguration:Object.assign({klarna:{useKlarnaWidget:!0},klarna_account:{useKlarnaWidget:!0},klarna_paynow:{useKlarnaWidget:!0}},r?{card:{installmentOptions:Object.assign({showInstallmentAmounts:!0},r)}}:{}),environment:i,locale:this._getLocale(),clientKey:a,paymentMethodsResponse:o,showPayButton:!1,translations:{es:{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-AR\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-ES\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-MX\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CL\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CO\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-PE\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"}}}),this._paymentComponent=yield this._mountPaymentComponent(n),n.method!==d.CreditCard&&n.method!==d.Bancontact||(this._cardVerificationComponent=yield this._mountCardVerificationComponent()),Promise.resolve()})}execute(e,t){var n;return z(this,void 0,void 0,function*(){const{payment:i}=e,a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(e,[\"payment\"]);if(!i)throw new _([\"payment\"]);const o=i.paymentData,{shouldSaveInstrument:r,shouldSetAsDefaultInstrument:s}=\"object\"!=typeof(d=o)||null===d||void 0!==d.shouldSaveInstrument&&\"boolean\"!=typeof d.shouldSaveInstrument||void 0!==d.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof d.shouldSetAsDefaultInstrument?{shouldSaveInstrument:!1,shouldSetAsDefaultInstrument:!1}:o;var d;this._validateCardData(),\"klarna\"!==i.methodId&&\"klarna_account\"!==i.methodId&&\"klarna_paynow\"!==i.methodId||null===(n=this._paymentComponent)||void 0===n||n.submit(),yield this._paymentIntegrationService.submitOrder(a,t);const c=this._componentState||{data:{paymentMethod:{type:i.methodId}}};if(o&&v(o)){let e={};if(m(c)){const{encryptedCardNumber:t,encryptedSecurityCode:n,encryptedExpiryMonth:i,encryptedExpiryYear:a}=c.data.paymentMethod;e={credit_card_number_confirmation:t,expiry_month:i,expiry_year:a,verification_value:n}}try{return void(yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},i),{paymentData:{formattedPayload:{bigpay_token:Object.assign(Object.assign({},e),{token:o.instrumentId}),origin:window.location.origin,browser_info:C(),set_as_default_stored_instrument:s||null}}})))}catch(e){return void(yield this._processAdditionalAction(e,r,s))}}let l=JSON.stringify(Object.assign(Object.assign({},c.data.paymentMethod),{type:i.methodId,origin:window.location.origin}));\"boletobancario\"===i.methodId&&function(e){var t,n;return\"string\"===(\"object\"==typeof e&&typeof e.data.socialSecurityNumber)&&\"string\"==typeof(null===(t=e.data.shopperName)||void 0===t?void 0:t.firstName)&&\"string\"==typeof(null===(n=e.data.shopperName)||void 0===n?void 0:n.lastName)}(c)&&(l=JSON.stringify(Object.assign(Object.assign({socialSecurityNumber:c.data.socialSecurityNumber},c.data.shopperName),{type:i.methodId,origin:window.location.origin})));try{yield this._paymentIntegrationService.submitPayment({methodId:i.methodId,paymentData:{formattedPayload:Object.assign(Object.assign({credit_card_token:{token:l}},m(c)&&c.data.installments?{installments:{value:c.data.installments.value,plan:c.data.installments.plan||\"regular\"}}:{}),{browser_info:C(),vault_payment_instrument:r||null,set_as_default_stored_instrument:s||null})}})}catch(e){yield this._processAdditionalAction(e,r,s)}})}finalize(){return Promise.reject(new b)}deinitialize(){return this._componentState=void 0,this._paymentComponent&&(this._paymentComponent.unmount(),this._paymentComponent=void 0),this._cardVerificationComponent&&(this._cardVerificationComponent.unmount(),this._cardVerificationComponent=void 0),Promise.resolve()}_updateComponentState(e){this._componentState=e}_getLocale(){const e=this._paymentIntegrationService.getState().getLocale();return e&&\"es\"===e.substring(0,2)?\"es\":e}_getAdyenClient(){if(!this._adyenClient)throw new f(h.PaymentNotInitialized);return this._adyenClient}_getPaymentInitializeOptions(){if(!this._paymentInitializeOptions)throw new g('\"options.adyenv3\" argument was not provided during initialization.');return this._paymentInitializeOptions}_handleAction(e){return new Promise((t,n)=>{const{additionalActionOptions:i}=this._getPaymentInitializeOptions(),{onBeforeLoad:a,containerId:r,onLoad:s,onComplete:d,widgetSize:c,onActionHandled:l}=i,p=JSON.parse(e.action),h=this._getAdyenClient().createFromAction(p,{onActionHandled:e=>{l&&\"function\"==typeof l&&\"3DS2Fingerprint\"!==e.componentType&&l()},onAdditionalDetails:e=>{const n={methodId:p.paymentMethodType,paymentData:{nonce:JSON.stringify(e.data)}};d&&\"function\"==typeof d&&d(),t(n)},challengeWindowSize:c||\"05\",onError:e=>n(e)});a&&\"function\"==typeof a&&a(p.type===o.ThreeDS2||p.type===o.QRCode||p.type===o.Sdk),this._mountElement(h,r),s&&\"function\"==typeof s&&s(()=>{n(new w),h.unmount()})})}_mapAdyenPlaceholderData(e,t){if(!e)return{};const{firstName:n,lastName:i,address1:a,address2:o,postalCode:r,city:s,stateOrProvinceCode:d,countryCode:c}=e;return{holderName:t?`${n} ${i}`:\"\",firstName:t?n:\"\",lastName:t?i:\"\",billingAddress:{street:a,houseNumberOrName:o,postalCode:r,city:s,stateOrProvince:d,country:c}}}_mountCardVerificationComponent(){const e=this._getPaymentInitializeOptions(),t=this._getAdyenClient();let n;return new Promise((i,a)=>{var o,r,d;if(e.cardVerificationContainerId){n=t.create(s.SecuredFields,Object.assign(Object.assign({},e.options),{styles:Object.assign(Object.assign({},null===(o=e.options)||void 0===o?void 0:o.styles),{placeholder:Object.assign({color:\"transparent\",caretColor:\"#000\"},null===(d=null===(r=e.options)||void 0===r?void 0:r.styles)||void 0===d?void 0:d.placeholder)}),onChange:e=>this._updateComponentState(e),onError:t=>e.validateCardFields(t),onFieldValid:t=>e.validateCardFields(t)}));try{this._mountElement(n,e.cardVerificationContainerId)}catch(e){a(new f(h.PaymentNotInitialized))}}i(n)})}_mountPaymentComponent(e){let t;const n=this._getPaymentInitializeOptions(),i=this._getAdyenClient();return new Promise((a,o)=>{const r=this._paymentIntegrationService.getState().getBillingAddress(),{prefillCardHolderName:s}=e.initializationData;t=i.create(e.method,Object.assign(Object.assign(Object.assign({},n.options),{showBrandsUnderCardNumber:!1,billingAddressRequired:!1,showEmailAddress:!1,onChange:e=>this._updateComponentState(e),onSubmit:e=>this._updateComponentState(e)}),r?{data:this._mapAdyenPlaceholderData(r,s)}:{}));try{this._mountElement(t,n.containerId)}catch(e){o(new f(h.PaymentNotInitialized))}a(t)})}_processAdditionalAction(e,t,i){return z(this,void 0,void 0,function*(){if(!S(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"additional_action_required\"}))throw e;const a=yield this._handleAction(e.body.provider_data);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},a),{paymentData:Object.assign(Object.assign({},a.paymentData),{shouldSaveInstrument:t,shouldSetAsDefaultInstrument:i})}))}catch(e){return this._processAdditionalAction(e,t,i)}})}_validateCardData(){var e;const t=this._getPaymentInitializeOptions().hasVaultedInstruments?this._cardVerificationComponent:this._paymentComponent;if((null===(e=null==t?void 0:t.componentRef)||void 0===e?void 0:e.showValidation)&&t.state&&(t.componentRef.showValidation(),0===Object.keys(t.state).length||!t.state.isValid))throw new I(this._mapCardErrors(t.state.errors))}_mapCardErrors(e={}){const t={};return Object.keys(e).forEach(n=>{t[n]=[{message:e[n],type:n}]}),t}_mountElement(e,t){document.getElementById(t)&&e.mount(`#${t}`)}}const N=y(n=>new D(n,new j((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getStylesheetLoader)())),[{gateway:\"adyenv3\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9hZHllbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQU9lLE1BQWVBLFVBQXNCQyxNQUloRCxXQUFBQyxDQUFZQyxHQ1hELElBQXFDQyxFRFk1Q0MsTUFBTUYsR0FBVyxxQ0FKckIsS0FBQUcsS0FBTyxnQkFDUCxLQUFBQyxLQUFPLFdDVHlDSCxhRGNaQSxVQ2JoQ0ksT0FBT0MsZUFDUEQsT0FBT0MsZURZUUMsS0NaZU4sR0RZZk0sS0NWUkMsVUFBWVAsRURZb0IsbUJBQTVCSCxNQUFNVyxrQkFDYlgsTUFBTVcsa0JBQWtCRixpQkFFeEJBLEtBQUtHLE1BQVEsSUFBSVosTUFBTVMsS0FBS1AsU0FBU1UsS0FFN0MsRUVmVyxNQUFNQyxVQUE0Q2QsRUFDN0QsV0FBQUUsQ0FBWUMsR0FDUkUsTUFDSUYsR0FDSSx1R0FHUk8sS0FBS0osS0FBTyxzQ0FDWkksS0FBS0gsS0FBTyxtQ0FDaEIsRSxJQ2ZRUSxFQWlDQUMsRUE0QkFDLEVBSUFDLEVBaUJBQyxFQUlBQyxFQXM4QkFDLEVDMWhDQUMsRUNJRyxNQUFNQyxFQUNqQixXQUFBckIsQ0FDWXNCLEVBQ0FDLEVBQ0FDLEVBQTZCQyxRQUY3QixLQUFBSCxjQUFBQSxFQUNBLEtBQUFDLGtCQUFBQSxFQUNBLEtBQUFDLFFBQUFBLENBQ1QsQ0FFRyxJQUFBRSxDQUFLQyxHLHFEQThCUCxTQTdCTUMsUUFBUUMsSUFBSSxDQUNkckIsS0FBS2Usa0JBQWtCTyxlQUNuQiwyQkFDNkIsUUFBekIsRUFBQUgsRUFBY0ksbUJBQVcsUUFBSSxvREFFakMsQ0FDSUMsU0FBUyxFQUNUQyxXQUFZLENBQ1JDLFVBQ0ksMEVBQ0pDLFlBQWEsZUFJekIzQixLQUFLYyxjQUFjYyxXQUNmLDJCQUM2QixRQUF6QixFQUFBVCxFQUFjSSxtQkFBVyxRQUFJLG1EQUVqQyxDQUNJTSxPQUFPLEVBQ1BKLFdBQVksQ0FDUkMsVUFDSSwwRUFDSkMsWUFBYSxrQkFNeEIzQixLQUFLZ0Is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c291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtY2xpZW50LXVuYXZhaWxhYmxlLWVycm9yLnRzP2Y4ZWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FkeWVuLXV0aWxzL3NyYy90eXBlcy50cz9jNzVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL25vdC1pbml0aWFsaXplZC1lcnJvci50cz84YjRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hZHllbi11dGlscy9zcmMvYWR5ZW52Mi9hZHllbnYyLXNjcmlwdC1sb2FkZXIudHM/YTNkMiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3RvLXJlc29sdmFibGUtbW9kdWxlLnRzP2Q1MjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FkeWVuLXV0aWxzL3NyYy91dGlscy9pcy1jYXJkLXN0YXRlLnRzPzQ0ZDciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaW52YWxpZC1hcmd1bWVudC1lcnJvci50cz8zOTIxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy12YXVsdGVkLWluc3RydW1lbnQudHM/MTgwZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NvbW1vbi9icm93c2VyLWluZm8vZ2V0LWJyb3dzZXItaW5mby50cz84YmE0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL29yZGVyLWZpbmFsaXphdGlvbi1ub3QtcmVxdWlyZWQtZXJyb3IudHM/YjVhMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1jYW5jZWxsZWQtZXJyb3IudHM/MDg5MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pcy1yZXF1ZXN0LWVycm9yLnRzP2I0M2QiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1pbnZhbGlkLWZvcm0tZXJyb3IudHM/YzBmYiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjIvYWR5ZW52Mi1wYXltZW50LXN0cmF0ZWd5LnRzPzhlNDkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FkeWVuLXV0aWxzL3NyYy91dGlscy9pcy1hY2NvdW50LXN0YXRlLnRzP2ViNmYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FkeWVuLWludGVncmF0aW9uL3NyYy9hZHllbnYyL2NyZWF0ZS1hZHllbnYyLXBheW1lbnQtc3RyYXRlZ3kudHM/NDIwMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYWR5ZW4tdXRpbHMvc3JjL2FkeWVudjMvYWR5ZW52My1zY3JpcHQtbG9hZGVyLnRzPzYwMmYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FkeWVuLWludGVncmF0aW9uL3NyYy9hZHllbnYzL2FkeWVudjMtcGF5bWVudC1zdHJhdGVneS50cz9jM2IyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy1ob3N0ZWQtaW50cnVtZW50LWxpa2UudHM/ODc2MyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYWR5ZW4tdXRpbHMvc3JjL3V0aWxzL2lzLWJvbGV0by1zdGF0ZS50cz83MjdmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52My9jcmVhdGUtYWR5ZW52My1wYXltZW50LXN0cmF0ZWd5LnRzPzUxYTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEN1c3RvbUVycm9yIGZyb20gJy4vY3VzdG9tLWVycm9yJztcbmltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tICcuL3NldC1wcm90b3R5cGUtb2YnO1xuXG4vKipcbiAqIFRoaXMgZXJyb3IgdHlwZSBzaG91bGQgbm90IGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LiBJdCBpcyBhIGJhc2UgY2xhc3MgZm9yXG4gKiBhbGwgY3VzdG9tIGVycm9ycyB0aHJvd24gaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBDdXN0b21FcnJvciB7XG4gICAgbmFtZSA9ICdTdGFuZGFyZEVycm9yJztcbiAgICB0eXBlID0gJ3N0YW5kYXJkJztcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIG5ldy50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpLnN0YWNrO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0UHJvdG90eXBlT2Yob2JqZWN0OiBhbnksIHByb3RvdHlwZTogb2JqZWN0KSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqZWN0LCBwcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGZhaWxzXG4gKiB0byBsb2FkLCBvciBmb3Igc29tZSByZWFzb24sIGl0IGlzIGluYWNjZXNzaWJsZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGlzIG5vdCBsb2FkZWQgb3IgcmVhZHkgdG8gYmUgdXNlZC4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X21ldGhvZF9jbGllbnRfdW5hdmFpbGFibGUnO1xuICAgIH1cbn1cbiIsImV4cG9ydCBlbnVtIEFkeWVuVjNBY3Rpb25UeXBlIHtcbiAgICAvKlxuICAgICAqIFRoZSBwYXltZW50IHF1YWxpZmllcyBmb3IgM0QgU2VjdXJlIDIsIGFuZCB3aWxsIGdvIHRocm91Z2ggZWl0aGVyIHRoZSBmcmljdGlvbmxlc3NcbiAgICAgKiBvciB0aGUgY2hhbGxlbmdlIGZsb3cuXG4gICAgICogKi9cbiAgICBUaHJlZURTMkZpbmdlcnByaW50ID0gJ3RocmVlRFMyRmluZ2VycHJpbnQnLFxuXG4gICAgLypcbiAgICAgKiBUaGUgcGF5bWVudCBxdWFsaWZpZXMgZm9yIDNEIFNlY3VyZSAyLCBhbmQgdGhlIGlzc3VlciBpcyBpbml0aWF0aW5nIGEgY2hhbGxlbmdlIGZsb3cuXG4gICAgICogKi9cbiAgICBUaHJlZURTMiA9ICd0aHJlZURTMicsXG5cbiAgICAvKlxuICAgICAqIFdlIHdpbGwgaW5pdGlhdGUgYSAzRCBTZWN1cmUgMSBmYWxsYmFjaywgYmVjYXVzZSB0aGUgaXNzdWVyIGRvZXMgbm90IHN1cHBvcnQgM0QgU2VjdXJlIDIuXG4gICAgICogKi9cbiAgICBSZWRpcmVjdCA9ICdyZWRpcmVjdCcsXG5cbiAgICAvKlxuICAgICAqIFRoZSBDb21wb25lbnQgcHJlc2VudHMgdGhlIFFSIGNvZGUgYW5kIGNhbGxzIHRoZSBvbkFkZGl0aW9uYWxEZXRhaWxzIGV2ZW50LlxuICAgICAqICovXG4gICAgUVJDb2RlID0gJ3FyQ29kZScsXG5cbiAgICAvKlxuICAgICAqIFRoZSBDb21wb25lbnQgZGlzcGxheXMgdGhlIHZvdWNoZXIgd2hpY2ggdGhlIHNob3BwZXIgdXNlcyB0byBjb21wbGV0ZSB0aGUgcGF5bWVudC5cbiAgICAgKiAqL1xuICAgIFZvdWNoZXIgPSAndm91Y2hlcicsXG5cbiAgICAvKlxuICAgICAqIFRoZSBDb21wb25lbnQgZGlzcGxheXMgdGhlIHdpZGdldCB3aGljaCB0aGUgc2hvcHBlciB1c2VzIHRvIGNvbXBsZXRlIHRoZSBwYXltZW50LlxuICAgICAqICovXG4gICAgU2RrID0gJ3NkaycsXG59XG5cbmV4cG9ydCBlbnVtIEFkeWVuVjJBY3Rpb25UeXBlIHtcbiAgICAvKlxuICAgICAqIFRoZSBwYXltZW50IHF1YWxpZmllcyBmb3IgM0QgU2VjdXJlIDIsIGFuZCB3aWxsIGdvIHRocm91Z2ggZWl0aGVyIHRoZSBmcmljdGlvbmxlc3NcbiAgICAgKiBvciB0aGUgY2hhbGxlbmdlIGZsb3cuXG4gICAgICogKi9cbiAgICBUaHJlZURTMkZpbmdlcnByaW50ID0gJ3RocmVlRFMyRmluZ2VycHJpbnQnLFxuXG4gICAgLypcbiAgICAgKiBUaGUgcGF5bWVudCBxdWFsaWZpZXMgZm9yIDNEIFNlY3VyZSAyLCBhbmQgdGhlIGlzc3VlciBpcyBpbml0aWF0aW5nIGEgY2hhbGxlbmdlIGZsb3cuXG4gICAgICogKi9cbiAgICBUaHJlZURTMkNoYWxsZW5nZSA9ICd0aHJlZURTMkNoYWxsZW5nZScsXG5cbiAgICAvKlxuICAgICAqIFdlIHdpbGwgaW5pdGlhdGUgYSAzRCBTZWN1cmUgMSBmYWxsYmFjaywgYmVjYXVzZSB0aGUgaXNzdWVyIGRvZXMgbm90IHN1cHBvcnQgM0QgU2VjdXJlIDIuXG4gICAgICogKi9cbiAgICBSZWRpcmVjdCA9ICdyZWRpcmVjdCcsXG5cbiAgICAvKlxuICAgICAqIFRoZSBDb21wb25lbnQgcHJlc2VudHMgdGhlIFFSIGNvZGUgYW5kIGNhbGxzIHRoZSBvbkFkZGl0aW9uYWxEZXRhaWxzIGV2ZW50LlxuICAgICAqICovXG4gICAgUVJDb2RlID0gJ3FyQ29kZScsXG5cbiAgICAvKlxuICAgICAqIFRoZSBDb21wb25lbnQgZGlzcGxheXMgdGhlIHZvdWNoZXIgd2hpY2ggdGhlIHNob3BwZXIgdXNlcyB0byBjb21wbGV0ZSB0aGUgcGF5bWVudC5cbiAgICAgKiAqL1xuICAgIFZvdWNoZXIgPSAndm91Y2hlcicsXG59XG5cbmV4cG9ydCBlbnVtIEFkeWVuQ29tcG9uZW50VHlwZSB7XG4gICAgU2VjdXJlZEZpZWxkcyA9ICdzZWN1cmVkZmllbGRzJyxcbn1cblxuZXhwb3J0IGVudW0gQWR5ZW5QYXltZW50TWV0aG9kVHlwZSB7XG4gICAgQUNIID0gJ2FjaCcsXG4gICAgQWxpUGF5ID0gJ2FsaXBheScsXG4gICAgQmFuY29udGFjdCA9ICdiY21jJyxcbiAgICBDcmVkaXRDYXJkID0gJ3NjaGVtZScsXG4gICAgS2xhcm5hID0gJ2tsYXJuYScsXG4gICAgS2xhcm5hUGF5Tm93ID0gJ2tsYXJuYV9wYXlub3cnLFxuICAgIEtsYXJuYUFjY291bnQgPSAna2xhcm5hX2FjY291bnQnLFxuICAgIElERUFMID0gJ2lkZWFsJyxcbiAgICBHaXJvUGF5ID0gJ2dpcm9wYXknLFxuICAgIEdvb2dsZVBheSA9ICdwYXl3aXRoZ29vZ2xlJyxcbiAgICBTRVBBID0gJ3NlcGFkaXJlY3RkZWJpdCcsXG4gICAgU29mb3J0ID0gJ2RpcmVjdEViYW5raW5nJyxcbiAgICBWaXBwcyA9ICd2aXBwcycsXG4gICAgV2VDaGF0UGF5UVIgPSAnd2VjaGF0cGF5UVInLFxufVxuXG5leHBvcnQgZW51bSBIVFRQTWV0aG9kIHtcbiAgICBQT1NUID0gJ1BPU1QnLFxufVxuXG5leHBvcnQgZW51bSBSZXN1bHRDb2RlIHtcbiAgICBDaGFsbGVuZ2VTaG9wcGVyID0gJ0NoYWxsZW5nZVNob3BwZXInLFxuICAgIEVycm9yID0gJ0Vycm9yJyxcbiAgICBJZGVudGlmeVNob3BwZXIgPSAnSWRlbnRpZnlTaG9wcGVyJyxcbn1cblxuaW50ZXJmYWNlIEFkeWVuUGF5bWVudE1ldGhvZFN0YXRlIHtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBXZWNoYXREYXRhUGF5bWVudE1ldGhvZFN0YXRlIHtcbiAgICBwYXltZW50TWV0aG9kOiBBZHllblBheW1lbnRNZXRob2RTdGF0ZTtcbn1cblxuaW50ZXJmYWNlIEJvbGV0b0RhdGFQYXltZW50TWV0aG9kU3RhdGUge1xuICAgIHBheW1lbnRNZXRob2Q6IEFkeWVuUGF5bWVudE1ldGhvZFN0YXRlO1xuICAgIHNob3BwZXJOYW1lPzoge1xuICAgICAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgICAgIGxhc3ROYW1lPzogc3RyaW5nO1xuICAgIH07XG4gICAgc29jaWFsU2VjdXJpdHlOdW1iZXI/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBDYXJkUGF5bWVudE1ldGhvZFN0YXRlIGV4dGVuZHMgQWR5ZW5QYXltZW50TWV0aG9kU3RhdGUge1xuICAgIGVuY3J5cHRlZENhcmROdW1iZXI6IHN0cmluZztcbiAgICBlbmNyeXB0ZWRFeHBpcnlNb250aDogc3RyaW5nO1xuICAgIGVuY3J5cHRlZEV4cGlyeVllYXI6IHN0cmluZztcbiAgICBlbmNyeXB0ZWRTZWN1cml0eUNvZGU6IHN0cmluZztcbiAgICBob2xkZXJOYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WMkFjdGlvbiB7XG4gICAgbWV0aG9kOiBIVFRQTWV0aG9kO1xuXG4gICAgLyoqXG4gICAgICogVmFsdWUgdGhhdCB5b3UgbmVlZCB0byBzdWJtaXQgaW4geW91ciAvcGF5bWVudHMvZGV0YWlscyByZXF1ZXN0IHdoZW4gaGFuZGxpbmdcbiAgICAgKiB0aGUgcmVkaXJlY3QuXG4gICAgICovXG4gICAgcGF5bWVudERhdGE6IHN0cmluZztcblxuICAgIHBheW1lbnRNZXRob2RUeXBlOiBBZHllblBheW1lbnRNZXRob2RUeXBlO1xuXG4gICAgLypcbiAgICAgKiBUaGUgQ29tcG9uZW50IHBlcmZvcm1zIGFkZGl0aW9uYWwgZnJvbnQtZW5kIGFjdGlvbnMgZGVwZW5kaW5nIG9uIHRoZSBhY3Rpb24udHlwZS5cbiAgICAgKiBZb3VyIG5leHQgc3RlcHMgZGVwZW5kIG9uIHRoZSB0eXBlIG9mIGFjdGlvbiB0aGF0IHRoZSBDb21wb25lbnQgcGVyZm9ybXMuXG4gICAgICovXG4gICAgdHlwZTogQWR5ZW5WMkFjdGlvblR5cGU7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgSFRUUCByZXF1ZXN0IG1ldGhvZCB0aGF0IHlvdSBzaG91bGQgdXNlLiBBZnRlciB0aGUgc2hvcHBlciBjb21wbGV0ZXMgdGhlIHBheW1lbnQsXG4gICAgICogdGhleSB3aWxsIGJlIHJlZGlyZWN0ZWQgYmFjayB0byB5b3VyIHJldHVyblVSTCB1c2luZyB0aGUgc2FtZSBtZXRob2QuXG4gICAgICovXG4gICAgdXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WM0FjdGlvbiB7XG4gICAgbWV0aG9kOiBIVFRQTWV0aG9kO1xuXG4gICAgLyoqXG4gICAgICogVmFsdWUgdGhhdCB5b3UgbmVlZCB0byBzdWJtaXQgaW4geW91ciAvcGF5bWVudHMvZGV0YWlscyByZXF1ZXN0IHdoZW4gaGFuZGxpbmdcbiAgICAgKiB0aGUgcmVkaXJlY3QuXG4gICAgICovXG4gICAgcGF5bWVudERhdGE6IHN0cmluZztcblxuICAgIHBheW1lbnRNZXRob2RUeXBlOiBBZHllblBheW1lbnRNZXRob2RUeXBlO1xuXG4gICAgLypcbiAgICAgKiBUaGUgQ29tcG9uZW50IHBlcmZvcm1zIGFkZGl0aW9uYWwgZnJvbnQtZW5kIGFjdGlvbnMgZGVwZW5kaW5nIG9uIHRoZSBhY3Rpb24udHlwZS5cbiAgICAgKiBZb3VyIG5leHQgc3RlcHMgZGVwZW5kIG9uIHRoZSB0eXBlIG9mIGFjdGlvbiB0aGF0IHRoZSBDb21wb25lbnQgcGVyZm9ybXMuXG4gICAgICovXG4gICAgdHlwZTogQWR5ZW5WM0FjdGlvblR5cGU7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgSFRUUCByZXF1ZXN0IG1ldGhvZCB0aGF0IHlvdSBzaG91bGQgdXNlLiBBZnRlciB0aGUgc2hvcHBlciBjb21wbGV0ZXMgdGhlIHBheW1lbnQsXG4gICAgICogdGhleSB3aWxsIGJlIHJlZGlyZWN0ZWQgYmFjayB0byB5b3VyIHJldHVyblVSTCB1c2luZyB0aGUgc2FtZSBtZXRob2QuXG4gICAgICovXG4gICAgdXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIEFkeWVuQWN0aW9uID0gQWR5ZW5WMkFjdGlvbiB8IEFkeWVuVjNBY3Rpb247XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5BZGRpdGlvbmFsQWN0aW9uIHtcbiAgICByZXN1bHRDb2RlOiBSZXN1bHRDb2RlO1xuICAgIGFjdGlvbjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuQWRkaXRpb25hbEFjdGlvbkNhbGxiYWNrcyB7XG4gICAgLyoqXG4gICAgICogQSBjYWxsYmFjayB0aGF0IGdldHMgY2FsbGVkIGJlZm9yZSBhZHllbiBjb21wb25lbnQgaXMgbG9hZGVkXG4gICAgICovXG4gICAgb25CZWZvcmVMb2FkPyhzaG9wcGVySW50ZXJhY3Rpb24/OiBib29sZWFuKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIEEgY2FsbGJhY2sgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIGFkeWVuIGNvbXBvbmVudCBpcyBsb2FkZWRcbiAgICAgKi9cbiAgICBvbkxvYWQ/KGNhbmNlbD86ICgpID0+IHZvaWQpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogQSBjYWxsYmFjayB0aGF0IGdldHMgY2FsbGVkIHdoZW4gYWR5ZW4gY29tcG9uZW50IHZlcmlmaWNhdGlvblxuICAgICAqIGlzIGNvbXBsZXRlZFxuICAgICAqL1xuICAgIG9uQ29tcGxldGU/KCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBBIGNhbGxiYWNrIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiBhbiBhY3Rpb24sIGZvciBleGFtcGxlIGEgUVIgY29kZSBvciAzRCBTZWN1cmUgMiBhdXRoZW50aWNhdGlvbiBzY3JlZW4sIGlzIHNob3duIHRvIHRoZSBzaG9wcGVyXG4gICAgICovXG4gICAgb25BY3Rpb25IYW5kbGVkPygpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuQWRkaXRpb25hbEFjdGlvbkVycm9yUmVzcG9uc2Uge1xuICAgIHByb3ZpZGVyX2RhdGE6IEFkeWVuQWRkaXRpb25hbEFjdGlvbjtcbiAgICBlcnJvcnM6IFt7IGNvZGU6IHN0cmluZyB9XTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkFkZGl0aW9uYWxBY3Rpb25PcHRpb25zIGV4dGVuZHMgQWR5ZW5BZGRpdGlvbmFsQWN0aW9uQ2FsbGJhY2tzIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYXRpb24gdG8gaW5zZXJ0IHRoZSBhZGRpdGlvbmFsIGFjdGlvbiBjb21wb25lbnQuXG4gICAgICovXG4gICAgY29udGFpbmVySWQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFNwZWNpZnkgVGhyZWUzRFMyQ2hhbGxlbmdlIFdpZGdldCBTaXplXG4gICAgICpcbiAgICAgKiBWYWx1ZXNcbiAgICAgKiAnMDEnID0gMjUwcHggeCA0MDBweFxuICAgICAqICcwMicgPSAzOTBweCB4IDQwMHB4XG4gICAgICogJzAzJyA9IDUwMHB4IHggNjAwcHhcbiAgICAgKiAnMDQnID0gNjAwcHggeCA0MDBweFxuICAgICAqICcwNScgPSAxMDAlIHggMTAwJVxuICAgICAqL1xuICAgIHdpZGdldFNpemU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5BZGRpdGlvbmFsQWN0aW9uU3RhdGUge1xuICAgIGRhdGE6IEFkeWVuQWRkaXRpb25hbEFjdGlvbjtcbiAgICBpc1ZhbGlkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkJhc2VDYXJkQ29tcG9uZW50T3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogQXJyYXkgb2YgY2FyZCBicmFuZHMgdGhhdCB3aWxsIGJlIHJlY29nbml6ZWQgYnkgdGhlIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqL1xuICAgIGJyYW5kcz86IHN0cmluZ1tdO1xuXG4gICAgLyoqXG4gICAgICogU2V0IGEgc3R5bGUgb2JqZWN0IHRvIGN1c3RvbWl6ZSB0aGUgaW5wdXQgZmllbGRzLiBTZWUgU3R5bGluZyBTZWN1cmVkIEZpZWxkc1xuICAgICAqIGZvciBhIGxpc3Qgb2Ygc3VwcG9ydGVkIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgc3R5bGVzPzogU3R5bGVPcHRpb25zO1xuXG4gICAgc2hvd0JyYW5kc1VuZGVyQ2FyZE51bWJlcj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5Db21wb25lbnRFdmVudHMge1xuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aGVuIHRoZSBzaG9wcGVyIGVudGVycyBkYXRhIGluIHRoZSBjYXJkIGlucHV0IGZpZWxkcy5cbiAgICAgKiBIZXJlIHlvdSBoYXZlIHRoZSBvcHRpb24gdG8gb3ZlcnJpZGUgeW91ciBtYWluIEFkeWVuIENoZWNrb3V0IGNvbmZpZ3VyYXRpb24uXG4gICAgICovXG4gICAgb25DaGFuZ2U/KHN0YXRlOiBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUsIGNvbXBvbmVudDogQWR5ZW5Db21wb25lbnQpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIHNob3BwZXIgc2VsZWN0cyB0aGUgUGF5IGJ1dHRvbiBhbmQgcGF5bWVudCBkZXRhaWxzIGFyZSB2YWxpZC5cbiAgICAgKi9cbiAgICBvblN1Ym1pdD8oc3RhdGU6IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSwgY29tcG9uZW50OiBBZHllbkNvbXBvbmVudCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgaW4gY2FzZSBvZiBhbiBpbnZhbGlkIGNhcmQgbnVtYmVyLCBpbnZhbGlkIGV4cGlyeSBkYXRlLCBvclxuICAgICAqICBpbmNvbXBsZXRlIGZpZWxkLiBDYWxsZWQgYWdhaW4gd2hlbiBlcnJvcnMgYXJlIGNsZWFyZWQuXG4gICAgICovXG4gICAgb25FcnJvcj8oc3RhdGU6IEFkeWVuVmFsaWRhdGlvblN0YXRlLCBjb21wb25lbnQ6IEFkeWVuQ29tcG9uZW50KTogdm9pZDtcblxuICAgIG9uRmllbGRWYWxpZD8oc3RhdGU6IEFkeWVuVmFsaWRhdGlvblN0YXRlLCBjb21wb25lbnQ6IEFkeWVuQ29tcG9uZW50KTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkNsaWVudCB7XG4gICAgY3JlYXRlKHR5cGU6IHN0cmluZywgY29tcG9uZW50T3B0aW9ucz86IEFkeWVuQ29tcG9uZW50T3B0aW9ucyk6IEFkeWVuQ29tcG9uZW50O1xuXG4gICAgY3JlYXRlRnJvbUFjdGlvbihcbiAgICAgICAgYWN0aW9uOiBBZHllblYyQWN0aW9uIHwgQWR5ZW5WM0FjdGlvbixcbiAgICAgICAgY29tcG9uZW50T3B0aW9ucz86XG4gICAgICAgICAgICB8IFRocmVlRFMyRGV2aWNlRmluZ2VycHJpbnRDb21wb25lbnRPcHRpb25zXG4gICAgICAgICAgICB8IEFkeWVuVjNUaHJlZURTMkNoYWxsZW5nZUNvbXBvbmVudE9wdGlvbnNcbiAgICAgICAgICAgIHwgQWR5ZW5WMlRocmVlRFMyQ2hhbGxlbmdlQ29tcG9uZW50T3B0aW9ucyxcbiAgICApOiBBZHllbkNvbXBvbmVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkNvbXBvbmVudCB7XG4gICAgY29tcG9uZW50UmVmPzoge1xuICAgICAgICBzaG93VmFsaWRhdGlvbigpOiB2b2lkO1xuICAgIH07XG4gICAgcHJvcHM/OiB7XG4gICAgICAgIHR5cGU/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBzdGF0ZT86IEFkeWVuQ29tcG9uZW50U3RhdGU7XG4gICAgbW91bnQoY29udGFpbmVySWQ6IHN0cmluZyk6IEhUTUxFbGVtZW50O1xuICAgIHVubW91bnQoKTogdm9pZDtcbiAgICBzdWJtaXQoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkNvbmZpZ3VyYXRpb24ge1xuICAgIC8qXG4gICAgICogVXNlIHRlc3QsIGFuZCB0aGVuIGNoYW5nZSB0aGlzIHRvIGxpdmUgd2hlbiB5b3UncmUgcmVhZHkgdG8gYWNjZXB0IGxpdmUgcGF5bWVudHMuXG4gICAgICovXG4gICAgZW52aXJvbm1lbnQ/OiBzdHJpbmc7XG5cbiAgICAvKlxuICAgICAqIFRoZSBzaG9wcGVyJ3MgbG9jYWxlLiBUaGlzIGlzIHVzZWQgdG8gc2V0IHRoZSBsYW5ndWFnZSByZW5kZXJlZCBpbiB0aGUgQ29tcG9uZW50cy5cbiAgICAgKi9cbiAgICBsb2NhbGU/OiBzdHJpbmc7XG5cbiAgICAvKlxuICAgICAqIFRoZSBPcmlnaW4gS2V5IG9mIHlvdXIgd2Vic2l0ZS5cbiAgICAgKi9cbiAgICBvcmlnaW5LZXk/OiBzdHJpbmc7XG5cbiAgICAvKlxuICAgICAqIFRoZSBDbGllbnQgS2V5IG9mIHlvdXIgQWR5ZW4gYWNjb3VudC5cbiAgICAgKi9cbiAgICBjbGllbnRLZXk/OiBzdHJpbmc7XG5cbiAgICAvKlxuICAgICAqIFN1cHBvcnRlZCBmcm9tIENvbXBvbmVudHMgdmVyc2lvbiAzLjAuMCBhbmQgbGF0ZXIuIFRoZSBmdWxsIHBheW1lbnRNZXRob2RzIHJlc3BvbnNlLFxuICAgICAqIHJldHVybmVkIGluIHN0ZXAgMS4gV2UgcmVjb21tZW5kIHRoYXQgeW91IHBhc3MgdGhpcyBvbiB0aGUgQWR5ZW5DaGVja291dCBpbnN0YW5jZS5cbiAgICAgKiBPdGhlcndpc2UsIHlvdSBuZWVkIHRvIHBhc3MgdGhlIHNwZWNpZmljIHBheW1lbnQgbWV0aG9kIGRldGFpbHMgc2VwYXJhdGVseSBmb3IgZWFjaFxuICAgICAqIENvbXBvbmVudC5cbiAgICAgKi9cbiAgICBwYXltZW50TWV0aG9kc1Jlc3BvbnNlPzogUGF5bWVudE1ldGhvZHNSZXNwb25zZTtcblxuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyYXRpb24gZm9yIHNwZWNpZmljIHBheW1lbnQgbWV0aG9kcy5cbiAgICAgKi9cbiAgICBwYXltZW50TWV0aG9kc0NvbmZpZ3VyYXRpb24/OiB7XG4gICAgICAgIGtsYXJuYToge1xuICAgICAgICAgICAgdXNlS2xhcm5hV2lkZ2V0OiBib29sZWFuO1xuICAgICAgICB9O1xuICAgICAgICBrbGFybmFfYWNjb3VudDoge1xuICAgICAgICAgICAgdXNlS2xhcm5hV2lkZ2V0OiBib29sZWFuO1xuICAgICAgICB9O1xuICAgICAgICBrbGFybmFfcGF5bm93OiB7XG4gICAgICAgICAgICB1c2VLbGFybmFXaWRnZXQ6IGJvb2xlYW47XG4gICAgICAgIH07XG4gICAgICAgIGNhcmQ/OiB7XG4gICAgICAgICAgICBpbnN0YWxsbWVudE9wdGlvbnM/OiB7XG4gICAgICAgICAgICAgICAgY2FyZD86IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBudW1iZXJbXTtcbiAgICAgICAgICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZpc2E/OiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogbnVtYmVyW107XG4gICAgICAgICAgICAgICAgICAgIHBsYW5zPzogc3RyaW5nW107XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBtYz86IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBudW1iZXJbXTtcbiAgICAgICAgICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRpbmVycz86IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBudW1iZXJbXTtcbiAgICAgICAgICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGpjYj86IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBudW1iZXJbXTtcbiAgICAgICAgICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHNob3dJbnN0YWxsbWVudEFtb3VudHM/OiBib29sZWFuO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgc2hvd1BheUJ1dHRvbj86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBJZiB5b3VyIHNob3BwZXJzIHVzZSBhIGxhbmd1YWdlIHRoYXQgaXNuJ3Qgc3VwcG9ydGVkIGJ5IHRoZSBDb21wb25lbnRzLCB5b3UgY2FuIGNyZWF0ZSB5b3VyIG93biBsb2NhbGl6YXRpb24uXG4gICAgICogVG8gY3JlYXRlIGEgbG9jYWxpemF0aW9uOlxuICAgICAqIEFkZCBhIHRyYW5zbGF0aW9ucyBvYmplY3QgdG8geW91ciBwYXltZW50IHBhZ2UsIHNwZWNpZnlpbmc6XG4gICAgICogVGhlIGxvY2FsaXphdGlvbiB5b3Ugd2FudCB0byBjcmVhdGUuXG4gICAgICogQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGZpZWxkcyB0aGF0IGFyZSB1c2VkIGluIHRoZSBDb21wb25lbnRzLCBhcyB3ZWxsIGFzIHRoZSB0ZXh0IHlvdSB3YW50IGRpc3BsYXllZCBmb3IgZWFjaCBmaWVsZC5cbiAgICAgKlxuICAgICAqIFwiZW5cIjoge1xuICAgICAqICBcInBheW1lbnRNZXRob2RzLm1vcmVNZXRob2RzQnV0dG9uXCI6IFwiTW9yZSBwYXltZW50IG1ldGhvZHNcIixcbiAgICAgKiAgXCJwYXlCdXR0b25cIjogXCJQYXlcIixcbiAgICAgKiAgXCJzdG9yZURldGFpbHNcIjogXCJTYXZlIGZvciBteSBuZXh0IHBheW1lbnRcIixcbiAgICAgKiAgIC4uLlxuICAgICAqIH1cbiAgICAgKi9cbiAgICB0cmFuc2xhdGlvbnM/OiB7XG4gICAgICAgIFtpbmRleDogc3RyaW5nXToge1xuICAgICAgICAgICAgW2luZGV4OiBzdHJpbmddOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qXG4gICAgICogU3BlY2lmeSB0aGUgZnVuY3Rpb24gdGhhdCB5b3UgY3JlYXRlZCwgZm9yIGV4YW1wbGUsIGhhbmRsZU9uQ2hhbmdlLiBJZiB5b3Ugd2lzaFxuICAgICAqIHRvIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb24sIHlvdSBjYW4gYWxzbyBkZWZpbmUgYW4gb25DaGFuZ2UgZXZlbnQgb24gdGhlIENvbXBvbmVudFxuICAgICAqIGxldmVsLlxuICAgICAqL1xuICAgIG9uQ2hhbmdlPyhzdGF0ZTogQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlLCBjb21wb25lbnQ/OiBBZHllbkNvbXBvbmVudCk6IHZvaWQ7XG5cbiAgICBvbkFkZGl0aW9uYWxEZXRhaWxzPyhzdGF0ZTogQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlLCBjb21wb25lbnQ/OiBBZHllbkNvbXBvbmVudCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5QbGFjZWhvbGRlckRhdGEge1xuICAgIGZpcnN0TmFtZT86IHN0cmluZztcbiAgICBsYXN0TmFtZT86IHN0cmluZztcbiAgICBob2xkZXJOYW1lPzogc3RyaW5nO1xuICAgIHByZWZpbGxDYXJkSG9sZGVyTmFtZT86IGJvb2xlYW47XG4gICAgYmlsbGluZ0FkZHJlc3M/OiB7XG4gICAgICAgIHN0cmVldDogc3RyaW5nO1xuICAgICAgICBob3VzZU51bWJlck9yTmFtZTogc3RyaW5nO1xuICAgICAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgICAgIGNpdHk6IHN0cmluZztcbiAgICAgICAgc3RhdGVPclByb3ZpbmNlOiBzdHJpbmc7XG4gICAgICAgIGNvdW50cnk6IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuQ3JlZGl0Q2FyZENvbXBvbmVudE9wdGlvbnNcbiAgICBleHRlbmRzIEFkeWVuQmFzZUNhcmRDb21wb25lbnRPcHRpb25zLFxuICAgICAgICBBZHllbkNvbXBvbmVudEV2ZW50cyB7XG4gICAgLyoqXG4gICAgICogU2V0IGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBkZXRhaWxzIGFycmF5IGZvciB0eXBlOiBzY2hlbWUgZnJvbVxuICAgICAqIHRoZSAvcGF5bWVudE1ldGhvZHMgcmVzcG9uc2UuXG4gICAgICovXG4gICAgZGV0YWlscz86IElucHV0RGV0YWlsW107XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdG8gdHJ1ZSB0byBzaG93IHRoZSBjaGVja2JveCB0byBzYXZlIGNhcmQgZGV0YWlscyBmb3IgdGhlIG5leHQgcGF5bWVudC5cbiAgICAgKi9cbiAgICBlbmFibGVTdG9yZURldGFpbHM/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogU2V0IHRvIHRydWUgdG8gcmVxdWVzdCB0aGUgbmFtZSBvZiB0aGUgY2FyZCBob2xkZXIuXG4gICAgICovXG4gICAgaGFzSG9sZGVyTmFtZT86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdG8gdHJ1ZSB0byByZXF1aXJlIHRoZSBjYXJkIGhvbGRlciBuYW1lLlxuICAgICAqL1xuICAgIGhvbGRlck5hbWVSZXF1aXJlZD86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBJbmZvcm1hdGlvbiB0byBwcmVmaWxsIGZpZWxkcy5cbiAgICAgKi9cbiAgICBkYXRhPzogQWR5ZW5QbGFjZWhvbGRlckRhdGE7XG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0cyB0byBbJ21jJywndmlzYScsJ2FtZXgnXS4gQ29uZmlndXJlIHN1cHBvcnRlZCBjYXJkIHR5cGVzIHRvXG4gICAgICogZmFjaWxpdGF0ZSBicmFuZCByZWNvZ25pdGlvbiB1c2VkIGluIHRoZSBTZWN1cmVkIEZpZWxkcyBvbkJyYW5kIGNhbGxiYWNrLlxuICAgICAqIFNlZSBsaXN0IG9mIGF2YWlsYWJsZSBjYXJkIHR5cGVzLiBJZiBhIHNob3BwZXIgZW50ZXJzIGEgY2FyZCB0eXBlIG5vdFxuICAgICAqIHNwZWNpZmllZCBpbiB0aGUgR3JvdXBUeXBlcyBjb25maWd1cmF0aW9uLCB0aGUgb25CcmFuZCBjYWxsYmFjayB3aWxsIG5vdCBiZSBpbnZva2VkLlxuICAgICAqL1xuICAgIGdyb3VwVHlwZXM/OiBzdHJpbmdbXTtcblxuICAgIC8qKlxuICAgICAqIFNwZWNpZnkgdGhlIHNhbXBsZSB2YWx1ZXMgeW91IHdhbnQgdG8gYXBwZWFyIGZvciBjYXJkIGRldGFpbCBpbnB1dCBmaWVsZHMuXG4gICAgICovXG4gICAgcGxhY2Vob2xkZXJzPzogQ3JlZGl0Q2FyZFBsYWNlSG9sZGVyIHwgU2VwYVBsYWNlSG9sZGVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuQ3VzdG9tQ2FyZENvbXBvbmVudE9wdGlvbnNcbiAgICBleHRlbmRzIEFkeWVuQmFzZUNhcmRDb21wb25lbnRPcHRpb25zLFxuICAgICAgICBBZHllbkNvbXBvbmVudEV2ZW50cyB7XG4gICAgLyoqXG4gICAgICogU3BlY2lmeSBhcmlhIGF0dHJpYnV0ZXMgZm9yIHRoZSBpbnB1dCBmaWVsZHMgZm9yIHdlYiBhY2Nlc3NpYmlsaXR5LlxuICAgICAqL1xuICAgIGFyaWFMYWJlbHM/OiBDdXN0b21DYXJkQXJpYUxhYmVscztcblxuICAgIC8qKlxuICAgICAqIEF1dG9tYXRpY2FsbHkgc2hpZnQgdGhlIGZvY3VzIGZyb20gZGF0ZSBmaWVsZCB0byB0aGUgQ1ZDIGZpZWxkLlxuICAgICAqL1xuICAgIGF1dG9mb2N1cz86IGJvb2xlYW47XG59XG5cbnR5cGUgQWR5ZW5DbGllbnRDb25zdHJ1Y3RvciA9IChjb25maWd1cmF0aW9uOiBBZHllbkNvbmZpZ3VyYXRpb24pID0+IFByb21pc2U8QWR5ZW5DbGllbnQ+O1xuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuRXJyb3Ige1xuICAgIGVycm9yQ29kZTogc3RyaW5nO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllblYzSG9zdFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgQWR5ZW5DaGVja291dD86IEFkeWVuQ2xpZW50Q29uc3RydWN0b3I7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WMkhvc3RXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIEFkeWVuQ2hlY2tvdXQ/OiBuZXcgKGNvbmZpZ3VyYXRpb246IEFkeWVuQ29uZmlndXJhdGlvbikgPT4gQWR5ZW5DbGllbnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5JZGVhbENvbXBvbmVudE9wdGlvbnNcbiAgICBleHRlbmRzIEFkeWVuQmFzZUNhcmRDb21wb25lbnRPcHRpb25zLFxuICAgICAgICBBZHllbkNvbXBvbmVudEV2ZW50cyB7XG4gICAgLyoqXG4gICAgICogT3B0aW9uYWwuIFNldCB0byAqKmZhbHNlKiogdG8gcmVtb3ZlIHRoZSBiYW5rIGxvZ29zIGZyb20gdGhlIGlERUFMIGZvcm0uXG4gICAgICovXG4gICAgc2hvd0ltYWdlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkJvbGV0b0NvbXBvbmVudE9wdGlvbnMgZXh0ZW5kcyBBZHllbkNvbXBvbmVudEV2ZW50cyB7XG4gICAgcGVyc29uYWxEZXRhaWxzUmVxdWlyZWQ/OiBib29sZWFuO1xuICAgIGJpbGxpbmdBZGRyZXNzUmVxdWlyZWQ/OiBib29sZWFuO1xuICAgIHNob3dFbWFpbEFkZHJlc3M/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuU3RvcmVkUGF5bWVudE1ldGhvZCB7XG4gICAgLyoqXG4gICAgICogVGhlIGJyYW5kIG9mIHRoZSBjYXJkLlxuICAgICAqL1xuICAgIGJyYW5kPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG1vbnRoIHRoZSBjYXJkIGV4cGlyZXMuXG4gICAgICovXG4gICAgZXhwaXJ5TW9udGg/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgeWVhciB0aGUgY2FyZCBleHBpcmVzLlxuICAgICAqL1xuICAgIGV4cGlyeVllYXI/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdW5pcXVlIHBheW1lbnQgbWV0aG9kIGNvZGUuXG4gICAgICovXG4gICAgaG9sZGVyTmFtZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhpcyBzdG9yZWQgcGF5bWVudCBtZXRob2QuXG4gICAgICovXG4gICAgaWQ/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbGFzdCBmb3VyIGRpZ2l0cyBvZiB0aGUgUEFOLlxuICAgICAqL1xuICAgIGxhc3RGb3VyPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGRpc3BsYXkgbmFtZSBvZiB0aGUgc3RvcmVkIHBheW1lbnQgbWV0aG9kLlxuICAgICAqL1xuICAgIG5hbWU6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBzaG9wcGVy4oCZcyBlbWFpbCBhZGRyZXNzLlxuICAgICAqL1xuICAgIHNob3BwZXJFbWFpbD86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBzdXBwb3J0ZWQgc2hvcHBlciBpbnRlcmFjdGlvbnMgZm9yIHRoaXMgc3RvcmVkIHBheW1lbnQgbWV0aG9kLlxuICAgICAqL1xuICAgIHN1cHBvcnRlZFNob3BwZXJJbnRlcmFjdGlvbnM/OiBzdHJpbmdbXTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHBheW1lbnQgbWV0aG9kLlxuICAgICAqL1xuICAgIHR5cGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5UaHJlZURTMk9wdGlvbnMgZXh0ZW5kcyBBZHllbkFkZGl0aW9uYWxBY3Rpb25DYWxsYmFja3Mge1xuICAgIC8qKlxuICAgICAqIFNwZWNpZnkgVGhyZWUzRFMyQ2hhbGxlbmdlIFdpZGdldCBTaXplXG4gICAgICpcbiAgICAgKiBWYWx1ZXNcbiAgICAgKiAnMDEnID0gMjUwcHggeCA0MDBweFxuICAgICAqICcwMicgPSAzOTBweCB4IDQwMHB4XG4gICAgICogJzAzJyA9IDUwMHB4IHggNjAwcHhcbiAgICAgKiAnMDQnID0gNjAwcHggeCA0MDBweFxuICAgICAqICcwNScgPSAxMDAlIHggMTAwJVxuICAgICAqL1xuICAgIHdpZGdldFNpemU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFuayB7XG4gICAgLyoqXG4gICAgICogVGhlIGJhbmsgYWNjb3VudCBudW1iZXIgKHdpdGhvdXQgc2VwYXJhdG9ycykuXG4gICAgICovXG4gICAgYmFua0FjY291bnROdW1iZXI/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFuayBjaXR5LlxuICAgICAqL1xuICAgIGJhbmtDaXR5Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGxvY2F0aW9uIGlkIG9mIHRoZSBiYW5rLiBUaGUgZmllbGQgdmFsdWUgaXMgbmlsIGluIG1vc3QgY2FzZXMuXG4gICAgICovXG4gICAgYmFua0xvY2F0aW9uSWQ/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgYmFuay5cbiAgICAgKi9cbiAgICBiYW5rTmFtZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBCdXNpbmVzcyBJZGVudGlmaWVyIENvZGUgKEJJQykgaXMgdGhlIFNXSUZUIGFkZHJlc3MgYXNzaWduZWQgdG9cbiAgICAgKiBhIGJhbmsuIFRoZSBmaWVsZCB2YWx1ZSBpcyBuaWwgaW4gbW9zdCBjYXNlcy5cbiAgICAgKi9cbiAgICBiaWM/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBDb3VudHJ5IGNvZGUgd2hlcmUgdGhlIGJhbmsgaXMgbG9jYXRlZC5cbiAgICAgKiBBIHZhbGlkIHZhbHVlIGlzIGFuIElTTyB0d28tY2hhcmFjdGVyIGNvdW50cnkgY29kZSAoZS5nLiAnTkwnKS5cbiAgICAgKi9cbiAgICBjb3VudHJ5Q29kZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBJbnRlcm5hdGlvbmFsIEJhbmsgQWNjb3VudCBOdW1iZXIgKElCQU4pLlxuICAgICAqL1xuICAgIGliYW4/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgYmFuayBhY2NvdW50IGhvbGRlci4gSWYgeW91IHN1Ym1pdCBhIG5hbWUgd2l0aCBub24tTGF0aW5cbiAgICAgKiBjaGFyYWN0ZXJzLCB3ZSBhdXRvbWF0aWNhbGx5IHJlcGxhY2Ugc29tZSBvZiB0aGVtIHdpdGggY29ycmVzcG9uZGluZyBMYXRpblxuICAgICAqIGNoYXJhY3RlcnMgdG8gbWVldCB0aGUgRkFURiByZWNvbW1lbmRhdGlvbnMuIEZvciBleGFtcGxlOlxuICAgICAqIM+HMTIgaXMgY29udmVydGVkIHRvIGNoMTIuXG4gICAgICogw7xBIGlzIGNvbnZlcnRlZCB0byBldUEuXG4gICAgICogUGV0ZXIgTcO4bGxlciBpcyBjb252ZXJ0ZWQgdG8gUGV0ZXIgTWxsZXIsIGJlY2F1c2UgYmFua3MgZG9uJ3QgYWNjZXB0ICfDuCcuXG4gICAgICogQWZ0ZXIgcmVwbGFjZW1lbnQsIHRoZSBvd25lck5hbWUgbXVzdCBoYXZlIGF0IGxlYXN0IHRocmVlIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzXG4gICAgICogKEEtWiwgYS16LCAwLTkpLCBhbmQgYXQgbGVhc3Qgb25lIG9mIHRoZW0gbXVzdCBiZSBhIHZhbGlkIExhdGluIGNoYXJhY3RlclxuICAgICAqIChBLVosIGEteikuIEZvciBleGFtcGxlOlxuICAgICAqIEpvaG4xNyAtIGFsbG93ZWQuXG4gICAgICogSjE3IC0gYWxsb3dlZC5cbiAgICAgKiAxNzEgLSBub3QgYWxsb3dlZC5cbiAgICAgKiBKb2huLTcgLSBhbGxvd2VkLlxuICAgICAqL1xuICAgIG93bmVyTmFtZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBiYW5rIGFjY291bnQgaG9sZGVyJ3MgdGF4IElELlxuICAgICAqL1xuICAgIHRheElkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmQge1xuICAgIC8qKlxuICAgICAqIFRoZSBjYXJkIHZlcmlmaWNhdGlvbiBjb2RlICgxLTIwIGNoYXJhY3RlcnMpLiBEZXBlbmRpbmcgb24gdGhlIGNhcmQgYnJhbmQsIGl0XG4gICAgICogaXMga25vd24gYWxzbyBhczpcbiAgICAgKiBDVlYyL0NWQzIg4oCTIGxlbmd0aDogMyBkaWdpdHNcbiAgICAgKiBDSUQg4oCTIGxlbmd0aDogNCBkaWdpdHNcbiAgICAgKi9cbiAgICBjdmM/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2FyZCBleHBpcnkgbW9udGguIEZvcm1hdDogMiBkaWdpdHMsIHplcm8tcGFkZGVkIGZvciBzaW5nbGUgZGlnaXRzLiBGb3IgZXhhbXBsZTpcbiAgICAgKiAwMyA9IE1hcmNoXG4gICAgICogMTEgPSBOb3ZlbWJlclxuICAgICAqIFJlcXVpcmVkXG4gICAgICovXG4gICAgZXhwaXJ5TW9udGg6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBjYXJkIGV4cGlyeSB5ZWFyLiBGb3JtYXQ6IDQgZGlnaXRzLiBGb3IgZXhhbXBsZTogMjAyMFxuICAgICAqIFJlcXVpcmVkXG4gICAgICovXG4gICAgZXhwaXJ5WWVhcjogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGNhcmRob2xkZXIsIGFzIHByaW50ZWQgb24gdGhlIGNhcmQuXG4gICAgICogUmVxdWlyZWRcbiAgICAgKi9cbiAgICBob2xkZXJOYW1lOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaXNzdWUgbnVtYmVyIG9mIHRoZSBjYXJkIChmb3Igc29tZSBVSyBkZWJpdCBjYXJkcyBvbmx5KS5cbiAgICAgKi9cbiAgICBpc3N1ZU51bWJlcj86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBjYXJkIG51bWJlciAoNC0xOSBjaGFyYWN0ZXJzKS4gRG8gbm90IHVzZSBhbnkgc2VwYXJhdG9ycy4gV2hlbiB0aGlzIHZhbHVlIGlzXG4gICAgICogcmV0dXJuZWQgaW4gYSByZXNwb25zZSwgb25seSB0aGUgbGFzdCA0IGRpZ2l0cyBvZiB0aGUgY2FyZCBudW1iZXIgYXJlIHJldHVybmVkLlxuICAgICAqIFJlcXVpcmVkXG4gICAgICovXG4gICAgbnVtYmVyOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbW9udGggY29tcG9uZW50IG9mIHRoZSBzdGFydCBkYXRlIChmb3Igc29tZSBVSyBkZWJpdCBjYXJkcyBvbmx5KS5cbiAgICAgKi9cbiAgICBzdGFydE51bWJlcj86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSB5ZWFyIGNvbXBvbmVudCBvZiB0aGUgc3RhcnQgZGF0ZSAoZm9yIHNvbWUgVUsgZGViaXQgY2FyZHMgb25seSkuXG4gICAgICovXG4gICAgc3RhcnRZZWFyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRTdGF0ZSB7XG4gICAgZGF0YTogQ2FyZERhdGFQYXltZW50TWV0aG9kU3RhdGU7XG4gICAgaXNWYWxpZD86IGJvb2xlYW47XG4gICAgdmFsaWQ/OiB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfTtcbiAgICBlcnJvcnM/OiBDYXJkU3RhdGVFcnJvcnM7XG59XG5cbmludGVyZmFjZSBJZGVhbFN0YXRlRGF0YSB7XG4gICAgaXNzdWVyOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBTZXBhU3RhdGVEYXRhIHtcbiAgICBvd25lck5hbWU6IHN0cmluZztcbiAgICBpYmFuTnVtYmVyOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBDYXJkU3RhdGVEYXRhIHtcbiAgICBlbmNyeXB0ZWRDYXJkTnVtYmVyOiBzdHJpbmc7XG4gICAgZW5jcnlwdGVkRXhwaXJ5TW9udGg6IHN0cmluZztcbiAgICBlbmNyeXB0ZWRFeHBpcnlZZWFyOiBzdHJpbmc7XG4gICAgZW5jcnlwdGVkU2VjdXJpdHlDb2RlOiBzdHJpbmc7XG4gICAgaG9sZGVyTmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuQ29tcG9uZW50U3RhdGUge1xuICAgIGRhdGE/OiBDYXJkU3RhdGVEYXRhIHwgSWRlYWxTdGF0ZURhdGEgfCBTZXBhU3RhdGVEYXRhO1xuICAgIGlzc3Vlcj86IHN0cmluZztcbiAgICBpc1ZhbGlkPzogYm9vbGVhbjtcbiAgICB2YWxpZD86IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9O1xuICAgIGVycm9ycz86IENhcmRTdGF0ZUVycm9ycztcbn1cblxuaW50ZXJmYWNlIENhcmREYXRhUGF5bWVudE1ldGhvZFN0YXRlIHtcbiAgICBwYXltZW50TWV0aG9kOiBDYXJkUGF5bWVudE1ldGhvZFN0YXRlO1xuICAgIGluc3RhbGxtZW50cz86IHsgdmFsdWU6IG51bWJlcjsgcGxhbj86ICdzdHJpbmcnIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZFN0YXRlRXJyb3JzIHtcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2VjaGF0U3RhdGUge1xuICAgIGRhdGE6IFdlY2hhdERhdGFQYXltZW50TWV0aG9kU3RhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQm9sZXRvU3RhdGUge1xuICAgIGRhdGE6IEJvbGV0b0RhdGFQYXltZW50TWV0aG9kU3RhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlZGl0Q2FyZFBsYWNlSG9sZGVyIHtcbiAgICBlbmNyeXB0ZWRDYXJkTnVtYmVyPzogc3RyaW5nO1xuICAgIGVuY3J5cHRlZEV4cGlyeURhdGU/OiBzdHJpbmc7XG4gICAgZW5jcnlwdGVkU2VjdXJpdHlDb2RlOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBBY2NvdW50RGF0YVBheW1lbnRNZXRob2RTdGF0ZSB7XG4gICAgcGF5bWVudE1ldGhvZDogQWR5ZW5QYXltZW50TWV0aG9kU3RhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWNjb3VudFN0YXRlIHtcbiAgICBkYXRhOiBBY2NvdW50RGF0YVBheW1lbnRNZXRob2RTdGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDc3NQcm9wZXJ0aWVzIHtcbiAgICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xuICAgIGNhcmV0Q29sb3I/OiBzdHJpbmc7XG4gICAgY29sb3I/OiBzdHJpbmc7XG4gICAgZGlzcGxheT86IHN0cmluZztcbiAgICBmb250Pzogc3RyaW5nO1xuICAgIGZvbnRGYW1pbHk/OiBzdHJpbmc7XG4gICAgZm9udFNpemU/OiBzdHJpbmc7XG4gICAgZm9udFNpemVBZGp1c3Q/OiBzdHJpbmc7XG4gICAgZm9udFNtb290aGluZz86IHN0cmluZztcbiAgICBmb250U3RyZXRjaD86IHN0cmluZztcbiAgICBmb250U3R5bGU/OiBzdHJpbmc7XG4gICAgZm9udFZhcmlhbnQ/OiBzdHJpbmc7XG4gICAgZm9udFZhcmlhbnRBbHRlcm5hdGVzPzogc3RyaW5nO1xuICAgIGZvbnRWYXJpYW50Q2Fwcz86IHN0cmluZztcbiAgICBmb250VmFyaWFudEVhc3RBc2lhbj86IHN0cmluZztcbiAgICBmb250VmFyaWFudExpZ2F0dXJlcz86IHN0cmluZztcbiAgICBmb250VmFyaWFudE51bWVyaWM/OiBzdHJpbmc7XG4gICAgZm9udFdlaWdodD86IHN0cmluZztcbiAgICBsZXR0ZXJTcGFjaW5nPzogc3RyaW5nO1xuICAgIGxpbmVIZWlnaHQ/OiBzdHJpbmc7XG4gICAgbW96T3N4Rm9udFNtb290aGluZz86IHN0cmluZztcbiAgICBtb3pUcmFuc2l0aW9uPzogc3RyaW5nO1xuICAgIG91dGxpbmU/OiBzdHJpbmc7XG4gICAgb3BhY2l0eT86IHN0cmluZyB8IG51bWJlcjtcbiAgICBwYWRkaW5nPzogc3RyaW5nO1xuICAgIHRleHRBbGlnbj86IHN0cmluZztcbiAgICB0ZXh0U2hhZG93Pzogc3RyaW5nO1xuICAgIHRyYW5zaXRpb24/OiBzdHJpbmc7XG4gICAgd2Via2l0Rm9udFNtb290aGluZz86IHN0cmluZztcbiAgICB3ZWJraXRUcmFuc2l0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1c3RvbUNhcmRBcmlhTGFiZWwge1xuICAgIGxhYmVsPzogc3RyaW5nO1xuICAgIGlmcmFtZVRpdGxlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1c3RvbUNhcmRBcmlhTGFiZWxzIHtcbiAgICBsYW5nPzogc3RyaW5nO1xuICAgIGVuY3J5cHRlZENhcmROdW1iZXI/OiBDdXN0b21DYXJkQXJpYUxhYmVsO1xuICAgIGVuY3J5cHRlZEV4cGlyeURhdGU/OiBDdXN0b21DYXJkQXJpYUxhYmVsO1xuICAgIGVuY3J5cHRlZFNlY3VyaXR5Q29kZT86IEN1c3RvbUNhcmRBcmlhTGFiZWw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JvdXAge1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBncm91cC5cbiAgICAgKi9cbiAgICBuYW1lPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogRWNobyBkYXRhIHRvIGJlIHVzZWQgaWYgdGhlIHBheW1lbnQgbWV0aG9kIGlzIGRpc3BsYXllZCBhcyBwYXJ0IG9mIHRoaXMgZ3JvdXAuXG4gICAgICovXG4gICAgcGF5bWVudE1ldGhvZERhdGE/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdW5pcXVlIGNvZGUgb2YgdGhlIGdyb3VwLlxuICAgICAqL1xuICAgIHR5cGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5wdXREZXRhaWwge1xuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyBmb3IgdGhlIHJlcXVpcmVkIGlucHV0LlxuICAgICAqL1xuICAgIGNvbmZpZ3VyYXRpb24/OiBvYmplY3Q7XG5cbiAgICAvKipcbiAgICAgKiBJbnB1dCBkZXRhaWxzIGNhbiBhbHNvIGJlIHByb3ZpZGVkIHJlY3Vyc2l2ZWx5LlxuICAgICAqL1xuICAgIGRldGFpbHM/OiBTdWJJbnB1dERldGFpbFtdO1xuXG4gICAgLyoqXG4gICAgICogSW4gY2FzZSBvZiBhIHNlbGVjdCwgdGhlIFVSTCBmcm9tIHdoaWNoIHRvIHF1ZXJ5IHRoZSBpdGVtcy5cbiAgICAgKi9cbiAgICBpdGVtU2VhcmNoVXJsPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogSW4gY2FzZSBvZiBhIHNlbGVjdCwgdGhlIGl0ZW1zIHRvIGNob29zZSBmcm9tLlxuICAgICAqL1xuICAgIGl0ZW1zPzogSXRlbVtdO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIHRvIHByb3ZpZGUgaW4gdGhlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBrZXk/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUcnVlIGlmIHRoaXMgaW5wdXQgdmFsdWUgaXMgb3B0aW9uYWwuXG4gICAgICovXG4gICAgb3B0aW9uYWw/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgb2YgdGhlIHJlcXVpcmVkIGlucHV0LlxuICAgICAqL1xuICAgIHR5cGU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgY2FuIGJlIHByZS1maWxsZWQsIGlmIGF2YWlsYWJsZS5cbiAgICAgKi9cbiAgICB2YWx1ZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJdGVtIHtcbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgdG8gcHJvdmlkZSBpbiB0aGUgcmVzdWx0LlxuICAgICAqL1xuICAgIGlkPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGRpc3BsYXkgbmFtZS5cbiAgICAgKi9cbiAgICBuYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnRNZXRob2Qge1xuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgcG9zc2libGUgYnJhbmRzLiBGb3IgZXhhbXBsZTogdmlzYSwgbWMuXG4gICAgICovXG4gICAgYnJhbmRzPzogc3RyaW5nW107XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29uZmlndXJhdGlvbiBvZiB0aGUgcGF5bWVudCBtZXRob2QuXG4gICAgICovXG4gICAgY29uZmlndXJhdGlvbj86IG9iamVjdDtcblxuICAgIC8qKlxuICAgICAqIEFsbCBpbnB1dCBkZXRhaWxzIHRvIGJlIHByb3ZpZGVkIHRvIGNvbXBsZXRlIHRoZSBwYXltZW50IHdpdGggdGhpcyBwYXltZW50XG4gICAgICogbWV0aG9kLlxuICAgICAqL1xuICAgIGRldGFpbHM/OiBJbnB1dERldGFpbFtdO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGdyb3VwIHdoZXJlIHRoaXMgcGF5bWVudCBtZXRob2QgYmVsb25ncyB0by5cbiAgICAgKi9cbiAgICBncm91cD86IEdyb3VwO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGRpc3BsYXlhYmxlIG5hbWUgb2YgdGhpcyBwYXltZW50IG1ldGhvZC5cbiAgICAgKi9cbiAgICBuYW1lPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogRWNobyBkYXRhIHJlcXVpcmVkIHRvIHNlbmQgaW4gbmV4dCBjYWxscy5cbiAgICAgKi9cbiAgICBwYXltZW50TWV0aG9kRGF0YT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoaXMgcGF5bWVudCBtZXRob2Qgc3VwcG9ydHMgdG9rZW5pemF0aW9uIG9yIG5vdC5cbiAgICAgKi9cbiAgICBzdXBwb3J0c1JlY3VycmluZz86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdW5pcXVlIHBheW1lbnQgbWV0aG9kIGNvZGUuXG4gICAgICovXG4gICAgdHlwZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXltZW50TWV0aG9kR3JvdXAge1xuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIHRvIHN1Ym1pdCBmb3IgYW55IHBheW1lbnQgbWV0aG9kIGluIHRoaXMgZ3JvdXAuXG4gICAgICovXG4gICAgZ3JvdXBUeXBlPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGh1bWFuLXJlYWRhYmxlIG5hbWUgb2YgdGhpcyBncm91cC5cbiAgICAgKi9cbiAgICBuYW1lPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHR5cGVzIG9mIHBheW1lbnQgbWV0aG9kcyB0aGF0IGJlbG9uZyBpbiB0aGlzIGdyb3VwLlxuICAgICAqL1xuICAgIHR5cGVzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudE1ldGhvZHNSZXNwb25zZSB7XG4gICAgLyoqXG4gICAgICogR3JvdXBzIG9mIHBheW1lbnQgbWV0aG9kcy5cbiAgICAgKi9cbiAgICBncm91cHM/OiBQYXltZW50TWV0aG9kR3JvdXBbXTtcblxuICAgIC8qKlxuICAgICAqIERldGFpbGVkIGxpc3Qgb2Ygb25lLWNsaWNrIHBheW1lbnQgbWV0aG9kcy5cbiAgICAgKi9cbiAgICBvbmVDbGlja1BheW1lbnRNZXRob2RzPzogUmVjdXJyaW5nRGV0YWlsO1xuXG4gICAgLyoqXG4gICAgICogRGV0YWlsZWQgbGlzdCBvZiBwYXltZW50IG1ldGhvZHMgcmVxdWlyZWQgdG8gZ2VuZXJhdGUgcGF5bWVudCBmb3Jtcy5cbiAgICAgKi9cbiAgICBwYXltZW50TWV0aG9kcz86IFBheW1lbnRNZXRob2RbXTtcblxuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgYWxsIHN0b3JlZCBwYXltZW50IG1ldGhvZHMuXG4gICAgICovXG4gICAgc3RvcmVkUGF5bWVudE1ldGhvZHM/OiBBZHllblN0b3JlZFBheW1lbnRNZXRob2RbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWN1cnJpbmdEZXRhaWwgZXh0ZW5kcyBQYXltZW50TWV0aG9kIHtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVmZXJlbmNlIHRoYXQgdW5pcXVlbHkgaWRlbnRpZmllcyB0aGUgcmVjdXJyaW5nIGRldGFpbC5cbiAgICAgKi9cbiAgICByZWN1cnJpbmdEZXRhaWxSZWZlcmVuY2U/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBDb250YWlucyBpbmZvcm1hdGlvbiBvbiBwcmV2aW91c2x5IHN0b3JlZCBwYXltZW50IGRldGFpbHMuXG4gICAgICovXG4gICAgc3RvcmVkRGV0YWlscz86IFN0b3JlZERldGFpbHM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VwYVBsYWNlSG9sZGVyIHtcbiAgICBvd25lck5hbWU/OiBzdHJpbmc7XG4gICAgaWJhbk51bWJlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdG9yZWREZXRhaWxzIHtcbiAgICAvKipcbiAgICAgKiBUaGUgc3RvcmVkIGJhbmsgYWNjb3VudC5cbiAgICAgKi9cbiAgICBiYW5rPzogQmFuaztcblxuICAgIC8qKlxuICAgICAqIFRoZSBzdG9yZWQgY2FyZCBpbmZvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBjYXJkPzogQ2FyZDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBlbWFpbCBhc3NvY2lhdGVkIHdpdGggc3RvcmVkIHBheW1lbnQgZGV0YWlscy5cbiAgICAgKi9cbiAgICBlbWFpbEFkZHJlc3M/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3R5bGVPcHRpb25zIHtcbiAgICAvKipcbiAgICAgKiBCYXNlIHN0eWxpbmcgYXBwbGllZCB0byB0aGUgaWZyYW1lLiBBbGwgc3R5bGluZyBleHRlbmRzIGZyb20gdGhpcyBzdHlsZS5cbiAgICAgKi9cbiAgICBiYXNlPzogQ3NzUHJvcGVydGllcztcblxuICAgIC8qKlxuICAgICAqIFN0eWxpbmcgYXBwbGllZCB3aGVuIGEgZmllbGQgZmFpbHMgdmFsaWRhdGlvbi5cbiAgICAgKi9cbiAgICBlcnJvcj86IENzc1Byb3BlcnRpZXM7XG5cbiAgICAvKipcbiAgICAgKiBTdHlsaW5nIGFwcGxpZWQgdG8gdGhlIGZpZWxkJ3MgcGxhY2Vob2xkZXIgdmFsdWVzLlxuICAgICAqL1xuICAgIHBsYWNlaG9sZGVyPzogQ3NzUHJvcGVydGllcztcblxuICAgIC8qKlxuICAgICAqIFN0eWxpbmcgYXBwbGllZCBvbmNlIGEgZmllbGQgcGFzc2VzIHZhbGlkYXRpb24uXG4gICAgICovXG4gICAgdmFsaWRhdGVkPzogQ3NzUHJvcGVydGllcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJJbnB1dERldGFpbCB7XG4gICAgLyoqXG4gICAgICogQ29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzIGZvciB0aGUgcmVxdWlyZWQgaW5wdXQuXG4gICAgICovXG4gICAgY29uZmlndXJhdGlvbj86IG9iamVjdDtcblxuICAgIC8qKlxuICAgICAqIEluIGNhc2Ugb2YgYSBzZWxlY3QsIHRoZSBpdGVtcyB0byBjaG9vc2UgZnJvbS5cbiAgICAgKi9cbiAgICBpdGVtcz86IEl0ZW1bXTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB2YWx1ZSB0byBwcm92aWRlIGluIHRoZSByZXN1bHQuXG4gICAgICovXG4gICAga2V5Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiB0aGlzIGlucHV0IGlzIG9wdGlvbmFsIHRvIHByb3ZpZGUuXG4gICAgICovXG4gICAgb3B0aW9uYWw/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgb2YgdGhlIHJlcXVpcmVkIGlucHV0LlxuICAgICAqL1xuICAgIHR5cGU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgY2FuIGJlIHByZS1maWxsZWQsIGlmIGF2YWlsYWJsZS5cbiAgICAgKi9cbiAgICB2YWx1ZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllblYzVGhyZWVEUzJDaGFsbGVuZ2VDb21wb25lbnRPcHRpb25zIHtcbiAgICBjaGFsbGVuZ2VXaW5kb3dTaXplPzogc3RyaW5nO1xuICAgIG9uQWRkaXRpb25hbERldGFpbHM/KHN0YXRlOiBBZHllbkFkZGl0aW9uYWxBY3Rpb25TdGF0ZSwgY29tcG9uZW50PzogQWR5ZW5Db21wb25lbnQpOiB2b2lkO1xuICAgIG9uQWN0aW9uSGFuZGxlZD8ocnRuT2JqOiBBY3Rpb25IYW5kbGVkUmV0dXJuT2JqZWN0KTogdm9pZDtcbiAgICBvbkVycm9yKGVycm9yOiBBZHllbkVycm9yKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllblYyVGhyZWVEUzJDaGFsbGVuZ2VDb21wb25lbnRPcHRpb25zIHtcbiAgICBzaXplPzogc3RyaW5nO1xuICAgIG9uQWRkaXRpb25hbERldGFpbHM/KHN0YXRlOiBBZHllbkFkZGl0aW9uYWxBY3Rpb25TdGF0ZSwgY29tcG9uZW50PzogQWR5ZW5Db21wb25lbnQpOiB2b2lkO1xuICAgIG9uQWN0aW9uSGFuZGxlZD8ocnRuT2JqOiBBY3Rpb25IYW5kbGVkUmV0dXJuT2JqZWN0KTogdm9pZDtcbiAgICBvbkVycm9yKGVycm9yOiBBZHllbkVycm9yKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25IYW5kbGVkUmV0dXJuT2JqZWN0IHtcbiAgICBjb21wb25lbnRUeXBlOiBzdHJpbmc7XG4gICAgYWN0aW9uRGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUaHJlZURTMkRldmljZUZpbmdlcnByaW50Q29tcG9uZW50T3B0aW9ucyB7XG4gICAgb25BY3Rpb25IYW5kbGVkPyhydG5PYmo6IEFjdGlvbkhhbmRsZWRSZXR1cm5PYmplY3QpOiB2b2lkO1xuICAgIG9uQWRkaXRpb25hbERldGFpbHM/KHN0YXRlOiBBZHllbkFkZGl0aW9uYWxBY3Rpb25TdGF0ZSwgY29tcG9uZW50PzogQWR5ZW5Db21wb25lbnQpOiB2b2lkO1xuICAgIG9uRXJyb3IoZXJyb3I6IEFkeWVuRXJyb3IpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuVmFsaWRhdGlvblN0YXRlIHtcbiAgICB2YWxpZDogYm9vbGVhbjtcbiAgICBmaWVsZFR5cGU/OiBBZHllbkNhcmRGaWVsZHM7XG4gICAgZW5kRGlnaXRzPzogc3RyaW5nO1xuICAgIGVuY3J5cHRlZEZpZWxkTmFtZT86IHN0cmluZztcbiAgICBpMThuPzogc3RyaW5nO1xuICAgIGVycm9yPzogc3RyaW5nO1xuICAgIGVycm9yS2V5Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBBZHllbkNhcmRGaWVsZHMge1xuICAgIENhcmROdW1iZXIgPSAnZW5jcnlwdGVkQ2FyZE51bWJlcicsXG4gICAgU2VjdXJpdHlDb2RlID0gJ2VuY3J5cHRlZFNlY3VyaXR5Q29kZScsXG4gICAgRXhwaXJ5RGF0ZSA9ICdlbmNyeXB0ZWRFeHBpcnlEYXRlJyxcbn1cblxuZXhwb3J0IHR5cGUgQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlID0gQ2FyZFN0YXRlIHwgQm9sZXRvU3RhdGUgfCBXZWNoYXRTdGF0ZTtcblxuZXhwb3J0IHR5cGUgQWR5ZW5Db21wb25lbnRPcHRpb25zID1cbiAgICB8IEFkeWVuQ3JlZGl0Q2FyZENvbXBvbmVudE9wdGlvbnNcbiAgICB8IEFkeWVuSWRlYWxDb21wb25lbnRPcHRpb25zXG4gICAgfCBBZHllbkJvbGV0b0NvbXBvbmVudE9wdGlvbnNcbiAgICB8IEFkeWVuQ3VzdG9tQ2FyZENvbXBvbmVudE9wdGlvbnM7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WM1BheW1lbnRNZXRob2RJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIGNsaWVudEtleT86IHN0cmluZztcbiAgICBlbnZpcm9ubWVudD86IHN0cmluZztcbiAgICBwYXltZW50TWV0aG9kc1Jlc3BvbnNlPzogUGF5bWVudE1ldGhvZHNSZXNwb25zZTtcbiAgICBwcmVmaWxsQ2FyZEhvbGRlck5hbWU/OiBib29sZWFuO1xuICAgIGluc3RhbGxtZW50T3B0aW9ucz86IG51bGwgfCB7XG4gICAgICAgIGNhcmQ/OiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG51bWJlcltdO1xuICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgfTtcbiAgICAgICAgdmlzYT86IHtcbiAgICAgICAgICAgIHZhbHVlczogbnVtYmVyW107XG4gICAgICAgICAgICBwbGFucz86IHN0cmluZ1tdO1xuICAgICAgICB9O1xuICAgICAgICBtYz86IHtcbiAgICAgICAgICAgIHZhbHVlczogbnVtYmVyW107XG4gICAgICAgICAgICBwbGFucz86IHN0cmluZ1tdO1xuICAgICAgICB9O1xuICAgICAgICBkaW5lcnM/OiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG51bWJlcltdO1xuICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgfTtcbiAgICAgICAgamNiPzoge1xuICAgICAgICAgICAgdmFsdWVzOiBudW1iZXJbXTtcbiAgICAgICAgICAgIHBsYW5zPzogc3RyaW5nW107XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllblYyUGF5bWVudE1ldGhvZEluaXRpYWxpemF0aW9uRGF0YSB7XG4gICAgb3JpZ2luS2V5Pzogc3RyaW5nO1xuICAgIGNsaWVudEtleT86IHN0cmluZztcbiAgICBlbnZpcm9ubWVudD86IHN0cmluZztcbiAgICBwYXltZW50TWV0aG9kc1Jlc3BvbnNlPzogUGF5bWVudE1ldGhvZHNSZXNwb25zZTtcbiAgICBwcmVmaWxsQ2FyZEhvbGRlck5hbWU/OiBib29sZWFuO1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlIHtcbiAgICBDaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkLFxuICAgIEN1c3RvbWVyTm90SW5pdGlhbGl6ZWQsXG4gICAgUGF5bWVudE5vdEluaXRpYWxpemVkLFxuICAgIFNoaXBwaW5nTm90SW5pdGlhbGl6ZWQsXG4gICAgU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIGEgbWV0aG9kIHJlcXVpcmVzIGEgY2VydGFpbiBpbml0aWFsaXphdGlvbiBjYWxsIHRvIGJlXG4gKiBtYWRlIGZpcnN0LiBTb21lIG9iamVjdHMgY2FuIGJlIGNvbnN0cnVjdGVkIGJ1dCB0aGV5IGNhbm5vdCBiZSB1c2VkIHVudGlsIGFcbiAqIHNlcGFyYXRlIGluaXRpYWxpemF0aW9uIGNhbGwgaXMgbWFkZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW5pdGlhbGl6ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbml0aWFsaXplZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbml0aWFsaXplZCc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGN1c3RvbWVyIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHNoaXBwaW5nIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjaGVja291dCBzcGFtIHByb3RlY3Rpb24gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciwgU3R5bGVzaGVldExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgQWR5ZW5DbGllbnQsIEFkeWVuQ29uZmlndXJhdGlvbiwgQWR5ZW5WMkhvc3RXaW5kb3cgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkeWVuVjJTY3JpcHRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIF9zY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSBfc3R5bGVzaGVldExvYWRlcjogU3R5bGVzaGVldExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSBfd2luZG93OiBBZHllblYySG9zdFdpbmRvdyA9IHdpbmRvdyxcbiAgICApIHt9XG5cbiAgICBhc3luYyBsb2FkKGNvbmZpZ3VyYXRpb246IEFkeWVuQ29uZmlndXJhdGlvbik6IFByb21pc2U8QWR5ZW5DbGllbnQ+IHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgdGhpcy5fc3R5bGVzaGVldExvYWRlci5sb2FkU3R5bGVzaGVldChcbiAgICAgICAgICAgICAgICBgaHR0cHM6Ly9jaGVja291dHNob3BwZXItJHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5lbnZpcm9ubWVudCA/PyAnJ1xuICAgICAgICAgICAgICAgIH0uYWR5ZW4uY29tL2NoZWNrb3V0c2hvcHBlci9zZGsvMy4xMC4xL2FkeWVuLmNzc2AsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcmVwZW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyaXR5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaGEzODQtOG9mZ0lDWlovazVjQzVON3hlZ3FGWk9BNzNIOVJRN0gxMzQzOUpmQVpXOEdqM3FqdUtMMmlzYVREM0dNSWhERScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjcm9zc29yaWdpbjogJ2Fub255bW91cycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChcbiAgICAgICAgICAgICAgICBgaHR0cHM6Ly9jaGVja291dHNob3BwZXItJHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5lbnZpcm9ubWVudCA/PyAnJ1xuICAgICAgICAgICAgICAgIH0uYWR5ZW4uY29tL2NoZWNrb3V0c2hvcHBlci9zZGsvMy4xMC4xL2FkeWVuLmpzYCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JpdHk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NoYTM4NC13RzJ6OXpTUW82MUVJdnlYbWlGQ28rekIzeTBaQjRoc3JYVmNBTm1wUDhITHRoam9RSlFQQmg3dFpLSlNWOGpBJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyb3Nzb3JpZ2luOiAnYW5vbnltb3VzJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKSxcbiAgICAgICAgXSk7XG5cbiAgICAgICAgaWYgKCF0aGlzLl93aW5kb3cuQWR5ZW5DaGVja291dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuX3dpbmRvdy5BZHllbkNoZWNrb3V0KGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIGNvbnNvbGUubG9nKCdyZXNvbHZlSWRzJywgcmVzb2x2ZUlkcyk7XG5cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2R1bGUsIHsgcmVzb2x2ZUlkcyB9KTtcbn1cbiIsImltcG9ydCB7IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSwgQ2FyZFN0YXRlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0NhcmRTdGF0ZShwYXJhbTogQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlKTogcGFyYW0gaXMgQ2FyZFN0YXRlIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAodHlwZW9mIHBhcmFtID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgdHlwZW9mIChwYXJhbSBhcyBDYXJkU3RhdGUpLmRhdGEucGF5bWVudE1ldGhvZC5lbmNyeXB0ZWRTZWN1cml0eUNvZGUgPT09ICdzdHJpbmcnKSB8fFxuICAgICAgICB0eXBlb2YgKHBhcmFtIGFzIENhcmRTdGF0ZSkuZGF0YS5wYXltZW50TWV0aG9kLmVuY3J5cHRlZEV4cGlyeU1vbnRoID09PSAnc3RyaW5nJ1xuICAgICk7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIG1ldGhvZCBpcyB1bmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZVxuICogY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSBhcmd1bWVudHMgYWNjb3JkaW5nIHRvIHRoZWlyIHJlcXVpcmVtZW50cyxcbiAqIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdJbnZhbGlkIGFyZ3VtZW50cyBoYXZlIGJlZW4gcHJvdmlkZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ0ludmFsaWRBcmd1bWVudEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ2ludmFsaWRfYXJndW1lbnQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBJbnZhbGlkQXJndW1lbnRFcnJvciBmcm9tICcuL2ludmFsaWQtYXJndW1lbnQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHdlIGFyZSB1bmFibGUgdG8gc3VibWl0IGEgcGF5bWVudCBiZWNhdXNlXG4gKiB0aGUgY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSByZXF1aXJlZCBmaWVsZHMsIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzXG4gKiBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IgZXh0ZW5kcyBJbnZhbGlkQXJndW1lbnRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoaW52YWxpZEZpZWxkcz86IHN0cmluZ1tdKSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBmb3IgdGhlIG9yZGVyIGJlY2F1c2UgdGhlIHBheWxvYWQgaXMgaW52YWxpZC4nO1xuXG4gICAgICAgIGlmIChpbnZhbGlkRmllbGRzKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gYCR7bWVzc2FnZX0gTWFrZSBzdXJlIHRoZSBmb2xsb3dpbmcgZmllbGRzIGFyZSBwcm92aWRlZCBjb3JyZWN0bHk6ICR7aW52YWxpZEZpZWxkcy5qb2luKFxuICAgICAgICAgICAgICAgICcsICcsXG4gICAgICAgICAgICApfS5gO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcic7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBGb3JtYXR0ZWRQYXlsb2FkLFxuICAgIEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnLi9wYXltZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gQm9vbGVhbigoaW5zdHJ1bWVudCBhcyBWYXVsdGVkSW5zdHJ1bWVudCkuaW5zdHJ1bWVudElkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSG9zdGVkVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgQm9vbGVhbigoaW5zdHJ1bWVudCBhcyBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCkuaW5zdHJ1bWVudElkKSAmJlxuICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RydW1lbnQsICdjY051bWJlcicpICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdHJ1bWVudCwgJ2NjQ3Z2JylcbiAgICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIEZvcm1hdHRlZFBheWxvYWQ8Rm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQ+IHtcbiAgICBjb25zdCBmb3JtYXR0ZWRJbnN0cnVtZW50ID0gKGluc3RydW1lbnQgYXMgRm9ybWF0dGVkUGF5bG9hZDxGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudD4pXG4gICAgICAgIC5mb3JtYXR0ZWRQYXlsb2FkO1xuXG4gICAgaWYgKCFmb3JtYXR0ZWRJbnN0cnVtZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4gPT09ICdzdHJpbmcnIHx8XG4gICAgICAgIEJvb2xlYW4oZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4gJiYgZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4udG9rZW4pXG4gICAgKTtcbn1cbiIsImltcG9ydCBCcm93c2VySW5mbyBmcm9tICcuL2Jyb3dzZXItaW5mbyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEJyb3dzZXJJbmZvKCk6IEJyb3dzZXJJbmZvIHtcbiAgICBjb25zdCB7IG5hdmlnYXRvciB9ID0gd2luZG93O1xuXG4gICAgbGV0IGxhbmd1YWdlOiBzdHJpbmc7XG5cbiAgICBpZiAobmF2aWdhdG9yLmxhbmd1YWdlKSB7XG4gICAgICAgIGxhbmd1YWdlID0gbmF2aWdhdG9yLmxhbmd1YWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxhbmd1YWdlID0gKG5hdmlnYXRvciBhcyBhbnkpLnVzZXJMYW5ndWFnZTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjb2xvcl9kZXB0aDogd2luZG93LnNjcmVlbi5jb2xvckRlcHRoIHx8IDI0LFxuICAgICAgICBqYXZhX2VuYWJsZWQ6IHR5cGVvZiBuYXZpZ2F0b3IuamF2YUVuYWJsZWQgPT09ICdmdW5jdGlvbicgPyBuYXZpZ2F0b3IuamF2YUVuYWJsZWQoKSA6IGZhbHNlLFxuICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgc2NyZWVuX2hlaWdodDogd2luZG93LnNjcmVlbi5oZWlnaHQsXG4gICAgICAgIHNjcmVlbl93aWR0aDogd2luZG93LnNjcmVlbi53aWR0aCxcbiAgICAgICAgdGltZV96b25lX29mZnNldDogbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpLnRvU3RyaW5nKCksXG4gICAgfTtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHRyeWluZyB0byBtYWtlIGFuIG9yZGVyIGZpbmFsaXphdGlvbiByZXF1ZXN0IGZvciBhXG4gKiBwYXltZW50IG1ldGhvZCB0aGF0IGRvZXMgbm90IHJlcXVpcmUgc3VjaCBwcm9jZWR1cmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBwYXltZW50IGZsb3cgaXMgY2FuY2VsbGVkLiBJdCBjb3VsZCBiZVxuICogZHVlIHRvIGEgZGVsaWJlcmF0ZSB1c2VyIGludGVyYWN0aW9uLCBpLmUuOiB0aGUgdXNlciBjbGlja3Mgb24gYSBjYW5jZWxcbiAqIGJ1dHRvbiB3aGljaCBkaXNtaXNzZXMgdGhlIHBheW1lbnQgbW9kYWwuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnUGF5bWVudCBwcm9jZXNzIHdhcyBjYW5jZWxsZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X2NhbmNlbGxlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vLyBIYXZlIHRvIHVzZSBgYXNgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzczOTg3MDQ0L3R5cGVndWFyZGluZy1hbi11bmtub3duLW5lc3RlZC1vYmplY3Qgc2hvdWxkIGJlIGZpeGVkIGluIDQuOCtcbmNvbnN0IGlzUmVxdWVzdEVycm9yID0gKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVxdWVzdEVycm9yID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnYm9keScgaW4gZXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpc1JlcXVlc3RFcnJvcjtcbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyB7XG4gICAgW2tleTogc3RyaW5nXTogQXJyYXk8eyBtZXNzYWdlOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9Pjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEludmFsaWRGb3JtRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgZGV0YWlsczogUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzLCBtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgZm9ybSBjb250YWlucyBpbnZhbGlkIGRhdGEuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRJbnZhbGlkRm9ybUVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfaW52YWxpZF9mb3JtJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBzb21lIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBBZHllbkFjdGlvbixcbiAgICBBZHllbkFkZGl0aW9uYWxBY3Rpb24sXG4gICAgQWR5ZW5BZGRpdGlvbmFsQWN0aW9uU3RhdGUsXG4gICAgQWR5ZW5DbGllbnQsXG4gICAgQWR5ZW5Db21wb25lbnQsXG4gICAgQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlLFxuICAgIEFkeWVuQ29tcG9uZW50VHlwZSxcbiAgICBBZHllbkVycm9yLFxuICAgIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUsXG4gICAgQWR5ZW5QbGFjZWhvbGRlckRhdGEsXG4gICAgQWR5ZW5WMkFjdGlvblR5cGUsXG4gICAgQWR5ZW5WMlBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBBZHllblYyUGF5bWVudE1ldGhvZEluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBBZHllblYyU2NyaXB0TG9hZGVyLFxuICAgIENhcmRTdGF0ZUVycm9ycyxcbiAgICBpc0FjY291bnRTdGF0ZSxcbiAgICBpc0NhcmRTdGF0ZSxcbiAgICBXaXRoQWR5ZW5WMlBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9hZHllbi11dGlscyc7XG5pbXBvcnQge1xuICAgIEJpbGxpbmdBZGRyZXNzLFxuICAgIGdldEJyb3dzZXJJbmZvLFxuICAgIEhvc3RlZEluc3RydW1lbnQsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNSZXF1ZXN0RXJyb3IsXG4gICAgaXNWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50SW52YWxpZEZvcm1FcnJvcixcbiAgICBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkeWVuVjJQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgX2FkeWVuQ2xpZW50PzogQWR5ZW5DbGllbnQ7XG4gICAgcHJpdmF0ZSBfY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudD86IEFkeWVuQ29tcG9uZW50O1xuICAgIHByaXZhdGUgX2NvbXBvbmVudFN0YXRlPzogQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlO1xuICAgIHByaXZhdGUgX3BheW1lbnRDb21wb25lbnQ/OiBBZHllbkNvbXBvbmVudDtcbiAgICBwcml2YXRlIF9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM/OiBBZHllblYyUGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgX3NjcmlwdExvYWRlcjogQWR5ZW5WMlNjcmlwdExvYWRlcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQWR5ZW5WMlBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBhZHllbnYyIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghYWR5ZW52Mikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmFkeWVudjJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgPSBhZHllbnYyO1xuXG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlXG4gICAgICAgICAgICAuZ2V0U3RhdGUoKVxuICAgICAgICAgICAgLmdldFBheW1lbnRNZXRob2RPclRocm93PEFkeWVuVjJQYXltZW50TWV0aG9kSW5pdGlhbGl6YXRpb25EYXRhPihvcHRpb25zLm1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBvcmlnaW5LZXksIGNsaWVudEtleSwgZW52aXJvbm1lbnQsIHBheW1lbnRNZXRob2RzUmVzcG9uc2UgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgY2xpZW50U2lkZUF1dGhlbnRpY2F0aW9uID0ge1xuICAgICAgICAgICAga2V5OiAnJyxcbiAgICAgICAgICAgIHZhbHVlOiAnJyxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAob3JpZ2luS2V5KSB7XG4gICAgICAgICAgICBjbGllbnRTaWRlQXV0aGVudGljYXRpb24ua2V5ID0gJ29yaWdpbktleSc7XG4gICAgICAgICAgICBjbGllbnRTaWRlQXV0aGVudGljYXRpb24udmFsdWUgPSBvcmlnaW5LZXk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbGllbnRTaWRlQXV0aGVudGljYXRpb24ua2V5ID0gJ2NsaWVudEtleSc7XG4gICAgICAgICAgICBjbGllbnRTaWRlQXV0aGVudGljYXRpb24udmFsdWUgPSBjbGllbnRLZXkgfHwgJyc7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9hZHllbkNsaWVudCA9IGF3YWl0IHRoaXMuX3NjcmlwdExvYWRlci5sb2FkKHtcbiAgICAgICAgICAgIGVudmlyb25tZW50LFxuICAgICAgICAgICAgbG9jYWxlOiB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0TG9jYWxlKCksXG4gICAgICAgICAgICBbY2xpZW50U2lkZUF1dGhlbnRpY2F0aW9uLmtleV06IGNsaWVudFNpZGVBdXRoZW50aWNhdGlvbi52YWx1ZSxcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2RzUmVzcG9uc2UsXG4gICAgICAgICAgICB0cmFuc2xhdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBlczogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgICAgICdlcy1BUic6IHsgJ2NyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlJzogJ0ZlY2hhIGRlIGNhZHVjaWRhZCcgfSxcbiAgICAgICAgICAgICAgICAnZXMtRVMnOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICAgICAgJ2VzLU1YJzogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgICAgICdlcy1DTCc6IHsgJ2NyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlJzogJ0ZlY2hhIGRlIGNhZHVjaWRhZCcgfSxcbiAgICAgICAgICAgICAgICAnZXMtQ08nOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICAgICAgJ2VzLVBFJzogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fcGF5bWVudENvbXBvbmVudCA9IGF3YWl0IHRoaXMuX21vdW50UGF5bWVudENvbXBvbmVudChwYXltZW50TWV0aG9kKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5DcmVkaXRDYXJkIHx8XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5CYW5jb250YWN0XG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5fY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCA9IGF3YWl0IHRoaXMuX21vdW50Q2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHBheW1lbnQgJiYgcGF5bWVudC5wYXltZW50RGF0YTtcbiAgICAgICAgY29uc3Qgc2hvdWxkU2F2ZUluc3RydW1lbnQgPVxuICAgICAgICAgICAgcGF5bWVudERhdGEgJiYgKHBheW1lbnREYXRhIGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNhdmVJbnN0cnVtZW50O1xuICAgICAgICBjb25zdCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID1cbiAgICAgICAgICAgIHBheW1lbnREYXRhICYmIChwYXltZW50RGF0YSBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50O1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlQ2FyZERhdGEoKTtcblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBjb25zdCBjb21wb25lbnRTdGF0ZSA9IHRoaXMuX2NvbXBvbmVudFN0YXRlO1xuXG4gICAgICAgIGlmICghY29tcG9uZW50U3RhdGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIGxldCBiaWdwYXlUb2tlbiA9IHt9O1xuXG4gICAgICAgICAgICBpZiAoaXNDYXJkU3RhdGUoY29tcG9uZW50U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRDYXJkTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRTZWN1cml0eUNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZEV4cGlyeU1vbnRoLFxuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRFeHBpcnlZZWFyLFxuICAgICAgICAgICAgICAgIH0gPSBjb21wb25lbnRTdGF0ZS5kYXRhLnBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgICAgICAgICBiaWdwYXlUb2tlbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgY3JlZGl0X2NhcmRfbnVtYmVyX2NvbmZpcm1hdGlvbjogZW5jcnlwdGVkQ2FyZE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5X21vbnRoOiBlbmNyeXB0ZWRFeHBpcnlNb250aCxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5X3llYXI6IGVuY3J5cHRlZEV4cGlyeVllYXIsXG4gICAgICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbl92YWx1ZTogZW5jcnlwdGVkU2VjdXJpdHlDb2RlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0NhcmRTdGF0ZShjb21wb25lbnRTdGF0ZSkgfHwgaXNBY2NvdW50U3RhdGUoY29tcG9uZW50U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBheW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmlncGF5X3Rva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5iaWdwYXlUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBwYXltZW50RGF0YS5pbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3Nlcl9pbmZvOiBnZXRCcm93c2VySW5mbygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkOiBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWRpdF9jYXJkX3Rva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29tcG9uZW50U3RhdGUuZGF0YS5wYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3Nlcl9pbmZvOiBnZXRCcm93c2VySW5mbygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OiBzaG91bGRTYXZlSW5zdHJ1bWVudCB8fCBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihcbiAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudFN0YXRlID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmICh0aGlzLl9wYXltZW50Q29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9wYXltZW50Q29tcG9uZW50LnVubW91bnQoKTtcbiAgICAgICAgICAgIHRoaXMuX3BheW1lbnRDb21wb25lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCkge1xuICAgICAgICAgICAgdGhpcy5fY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudC51bm1vdW50KCk7XG4gICAgICAgICAgICB0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldEFkeWVuQ2xpZW50KCk6IEFkeWVuQ2xpZW50IHtcbiAgICAgICAgaWYgKCF0aGlzLl9hZHllbkNsaWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9hZHllbkNsaWVudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMoKTogQWR5ZW5WMlBheW1lbnRJbml0aWFsaXplT3B0aW9ucyB7XG4gICAgICAgIGlmICghdGhpcy5fcGF5bWVudEluaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1wib3B0aW9ucy5hZHllbnYyXCIgYXJndW1lbnQgd2FzIG5vdCBwcm92aWRlZCBkdXJpbmcgaW5pdGlhbGl6YXRpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fcGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldFRocmVlRFMyQ2hhbGxlbmdlV2lkZ2V0U2l6ZSgpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB7IGFkZGl0aW9uYWxBY3Rpb25PcHRpb25zLCB0aHJlZURTMk9wdGlvbnMgfSA9IHRoaXMuX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpO1xuICAgICAgICBjb25zdCB3aWRnZXRTaXplID0gYWRkaXRpb25hbEFjdGlvbk9wdGlvbnMud2lkZ2V0U2l6ZSB8fCB0aHJlZURTMk9wdGlvbnM/LndpZGdldFNpemU7XG5cbiAgICAgICAgaWYgKCF3aWRnZXRTaXplKSB7XG4gICAgICAgICAgICByZXR1cm4gJzA1JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB3aWRnZXRTaXplO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2hhbmRsZUFjdGlvbihhZGRpdGlvbmFsQWN0aW9uOiBBZHllbkFkZGl0aW9uYWxBY3Rpb24pOiBQcm9taXNlPFBheW1lbnQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgdGhyZWVEUzJDb250YWluZXJJZCwgYWRkaXRpb25hbEFjdGlvbk9wdGlvbnMgfSA9XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgICAgICBjb25zdCB7IG9uQmVmb3JlTG9hZCwgY29udGFpbmVySWQsIG9uTG9hZCwgb25Db21wbGV0ZSB9ID0gYWRkaXRpb25hbEFjdGlvbk9wdGlvbnM7XG4gICAgICAgICAgICBjb25zdCBhZHllbkFjdGlvbjogQWR5ZW5BY3Rpb24gPSBKU09OLnBhcnNlKGFkZGl0aW9uYWxBY3Rpb24uYWN0aW9uKTtcblxuICAgICAgICAgICAgY29uc3QgYWRkaXRpb25hbEFjdGlvbkNvbXBvbmVudCA9IHRoaXMuX2dldEFkeWVuQ2xpZW50KCkuY3JlYXRlRnJvbUFjdGlvbihhZHllbkFjdGlvbiwge1xuICAgICAgICAgICAgICAgIG9uQWRkaXRpb25hbERldGFpbHM6IChhZGRpdGlvbmFsQWN0aW9uU3RhdGU6IEFkeWVuQWRkaXRpb25hbEFjdGlvblN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQ6IGFkeWVuQWN0aW9uLnBheW1lbnRNZXRob2RUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25jZTogSlNPTi5zdHJpbmdpZnkoYWRkaXRpb25hbEFjdGlvblN0YXRlLmRhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAob25Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwYXltZW50UGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzaXplOiB0aGlzLl9nZXRUaHJlZURTMkNoYWxsZW5nZVdpZGdldFNpemUoKSxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoZXJyb3I6IEFkeWVuRXJyb3IpID0+IHJlamVjdChlcnJvciksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKG9uQmVmb3JlTG9hZCkge1xuICAgICAgICAgICAgICAgIG9uQmVmb3JlTG9hZChcbiAgICAgICAgICAgICAgICAgICAgYWR5ZW5BY3Rpb24udHlwZSA9PT0gQWR5ZW5WMkFjdGlvblR5cGUuVGhyZWVEUzJDaGFsbGVuZ2UgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkeWVuQWN0aW9uLnR5cGUgPT09IEFkeWVuVjJBY3Rpb25UeXBlLlFSQ29kZSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhZGRpdGlvbmFsQWN0aW9uQ29tcG9uZW50Lm1vdW50KGAjJHtjb250YWluZXJJZCB8fCB0aHJlZURTMkNvbnRhaW5lcklkfWApO1xuXG4gICAgICAgICAgICBpZiAob25Mb2FkKSB7XG4gICAgICAgICAgICAgICAgb25Mb2FkKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IoKSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db21wb25lbnQudW5tb3VudCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBBZHllblBsYWNlaG9sZGVyRGF0YShcbiAgICAgICAgYmlsbGluZ0FkZHJlc3M/OiBCaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgcHJlZmlsbENhcmRIb2xkZXJOYW1lPzogYm9vbGVhbixcbiAgICApOiBBZHllblBsYWNlaG9sZGVyRGF0YSB7XG4gICAgICAgIGlmICghYmlsbGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lLFxuICAgICAgICAgICAgYWRkcmVzczE6IHN0cmVldCxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBob3VzZU51bWJlck9yTmFtZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGUsXG4gICAgICAgICAgICBjaXR5LFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogc3RhdGVPclByb3ZpbmNlLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGNvdW50cnksXG4gICAgICAgIH0gPSBiaWxsaW5nQWRkcmVzcztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaG9sZGVyTmFtZTogcHJlZmlsbENhcmRIb2xkZXJOYW1lID8gYCR7Zmlyc3ROYW1lfSAke2xhc3ROYW1lfWAgOiAnJyxcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzOiB7XG4gICAgICAgICAgICAgICAgc3RyZWV0LFxuICAgICAgICAgICAgICAgIGhvdXNlTnVtYmVyT3JOYW1lLFxuICAgICAgICAgICAgICAgIHBvc3RhbENvZGUsXG4gICAgICAgICAgICAgICAgY2l0eSxcbiAgICAgICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2UsXG4gICAgICAgICAgICAgICAgY291bnRyeSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbW91bnRDYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50KCk6IFByb21pc2U8QWR5ZW5Db21wb25lbnQ+IHtcbiAgICAgICAgY29uc3QgYWR5ZW52MiA9IHRoaXMuX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpO1xuICAgICAgICBjb25zdCBhZHllbkNsaWVudCA9IHRoaXMuX2dldEFkeWVuQ2xpZW50KCk7XG4gICAgICAgIGxldCBjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50OiBBZHllbkNvbXBvbmVudDtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKGFkeWVudjIuY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICAgICAgY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCA9IGFkeWVuQ2xpZW50LmNyZWF0ZShBZHllbkNvbXBvbmVudFR5cGUuU2VjdXJlZEZpZWxkcywge1xuICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYyLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uYWR5ZW52Mi5vcHRpb25zPy5zdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0Q29sb3I6ICcjMDAwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYyLm9wdGlvbnM/LnN0eWxlcz8ucGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGNvbXBvbmVudFN0YXRlKSA9PiB0aGlzLl91cGRhdGVDb21wb25lbnRTdGF0ZShjb21wb25lbnRTdGF0ZSksXG4gICAgICAgICAgICAgICAgICAgIG9uRXJyb3I6ICh2YWxpZGF0ZVN0YXRlKSA9PiBhZHllbnYyLnZhbGlkYXRlQ2FyZEZpZWxkcyh2YWxpZGF0ZVN0YXRlKSxcbiAgICAgICAgICAgICAgICAgICAgb25GaWVsZFZhbGlkOiAodmFsaWRhdGVTdGF0ZSkgPT4gYWR5ZW52Mi52YWxpZGF0ZUNhcmRGaWVsZHModmFsaWRhdGVTdGF0ZSksXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50Lm1vdW50KGAjJHthZHllbnYyLmNhcmRWZXJpZmljYXRpb25Db250YWluZXJJZH1gKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNvbHZlKGNhcmRWZXJpZmljYXRpb25Db21wb25lbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tb3VudFBheW1lbnRDb21wb25lbnQocGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZCk6IFByb21pc2U8QWR5ZW5Db21wb25lbnQ+IHtcbiAgICAgICAgbGV0IHBheW1lbnRDb21wb25lbnQ6IEFkeWVuQ29tcG9uZW50O1xuICAgICAgICBjb25zdCBhZHllbnYyID0gdGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IGFkeWVuQ2xpZW50ID0gdGhpcy5fZ2V0QWR5ZW5DbGllbnQoKTtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChwYXltZW50TWV0aG9kLm1ldGhvZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5DcmVkaXRDYXJkOlxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5BQ0g6XG4gICAgICAgICAgICAgICAgY2FzZSBBZHllblBheW1lbnRNZXRob2RUeXBlLkJhbmNvbnRhY3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0U3RhdGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldEJpbGxpbmdBZGRyZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcHJlZmlsbENhcmRIb2xkZXJOYW1lIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICAgICAgICAgICAgICBwYXltZW50Q29tcG9uZW50ID0gYWR5ZW5DbGllbnQuY3JlYXRlKHBheW1lbnRNZXRob2QubWV0aG9kLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYyLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGNvbXBvbmVudFN0YXRlKSA9PiB0aGlzLl91cGRhdGVDb21wb25lbnRTdGF0ZShjb21wb25lbnRTdGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLl9tYXBBZHllblBsYWNlaG9sZGVyRGF0YShiaWxsaW5nQWRkcmVzcywgcHJlZmlsbENhcmRIb2xkZXJOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRDb21wb25lbnQubW91bnQoYCMke2FkeWVudjIuY29udGFpbmVySWR9YCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjYXNlIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUuSURFQUw6XG4gICAgICAgICAgICAgICAgY2FzZSBBZHllblBheW1lbnRNZXRob2RUeXBlLlNFUEE6XG4gICAgICAgICAgICAgICAgICAgIGlmICghYWR5ZW52Mi5oYXNWYXVsdGVkSW5zdHJ1bWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRDb21wb25lbnQgPSBhZHllbkNsaWVudC5jcmVhdGUocGF5bWVudE1ldGhvZC5tZXRob2QsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYyLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IChjb21wb25lbnRTdGF0ZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ29tcG9uZW50U3RhdGUoY29tcG9uZW50U3RhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudENvbXBvbmVudC5tb3VudChgIyR7YWR5ZW52Mi5jb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ29tcG9uZW50U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcGF5bWVudE1ldGhvZC5tZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUuQWxpUGF5OlxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5HaXJvUGF5OlxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5Tb2ZvcnQ6XG4gICAgICAgICAgICAgICAgY2FzZSBBZHllblBheW1lbnRNZXRob2RUeXBlLktsYXJuYTpcbiAgICAgICAgICAgICAgICBjYXNlIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUuS2xhcm5hUGF5Tm93OlxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5LbGFybmFBY2NvdW50OlxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5WaXBwczpcbiAgICAgICAgICAgICAgICBjYXNlIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUuV2VDaGF0UGF5UVI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNvbXBvbmVudFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHBheW1lbnRNZXRob2QubWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzb2x2ZShwYXltZW50Q29tcG9uZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oXG4gICAgICAgIGVycm9yOiB1bmtub3duLFxuICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudD86IGJvb2xlYW4sXG4gICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzIHwgdm9pZD4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhaXNSZXF1ZXN0RXJyb3IoZXJyb3IpIHx8XG4gICAgICAgICAgICAhc29tZShlcnJvci5ib2R5LmVycm9ycywgeyBjb2RlOiAnYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQnIH0pXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXltZW50ID0gYXdhaXQgdGhpcy5faGFuZGxlQWN0aW9uKGVycm9yLmJvZHkucHJvdmlkZXJfZGF0YSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7XG4gICAgICAgICAgICAgICAgLi4ucGF5bWVudCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXltZW50LnBheW1lbnREYXRhLFxuICAgICAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKHBheW1lbnRFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICAgICAgICAgIHBheW1lbnRFcnJvcixcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX3VwZGF0ZUNvbXBvbmVudFN0YXRlKGNvbXBvbmVudFN0YXRlOiBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUpIHtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50U3RhdGUgPSBjb21wb25lbnRTdGF0ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF92YWxpZGF0ZUNhcmREYXRhKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBhZHllbnYyID0gdGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IGNhcmRDb21wb25lbnQgPSBhZHllbnYyLmhhc1ZhdWx0ZWRJbnN0cnVtZW50c1xuICAgICAgICAgICAgPyB0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50XG4gICAgICAgICAgICA6IHRoaXMuX3BheW1lbnRDb21wb25lbnQ7XG4gICAgICAgIGNvbnN0IGlzRW1wdHlTdHJpbmcgPSAodmFsdWU6IHN0cmluZykgPT4gdmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoID09PSAwO1xuXG4gICAgICAgIGlmICghY2FyZENvbXBvbmVudD8uY29tcG9uZW50UmVmPy5zaG93VmFsaWRhdGlvbiB8fCAhY2FyZENvbXBvbmVudC5zdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FyZENvbXBvbmVudC5jb21wb25lbnRSZWYuc2hvd1ZhbGlkYXRpb24oKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRm9yIHNvbWUgcmVhc29uIGFkeWVuIHNkayBkb2Vzbid0IHJldHVybiBpc1ZhbGlkIGZvciBwYXltZW50IG1ldGhvZHMgd2l0aCBzZWxlY3QgZmllbGQgaW4gZm9ybShpRGVhbCBmb3IgZXhhbXBsZSlcbiAgICAgICAgICogc28gd2UgbmVlZCB0byBjaGVjayBzdGF0ZSBpc3N1ZXIgZmllbGRcbiAgICAgICAgICovXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGNhcmRDb21wb25lbnQuc3RhdGUpLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgKCFjYXJkQ29tcG9uZW50LnN0YXRlLmlzVmFsaWQgJiYgIWNhcmRDb21wb25lbnQuc3RhdGUuaXNzdWVyKSB8fFxuICAgICAgICAgICAgLy8gcHJldmVudCBlbXB0eSBzZXBhIGZpZWxkcyBmcm9tIGJlaW5nIHNlbnRcbiAgICAgICAgICAgIChjYXJkQ29tcG9uZW50LnByb3BzPy50eXBlID09PSAnc2VwYWRpcmVjdGRlYml0JyAmJlxuICAgICAgICAgICAgICAgIGNhcmRDb21wb25lbnQuc3RhdGUuZGF0YSAmJlxuICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoY2FyZENvbXBvbmVudC5zdGF0ZS5kYXRhKS5zb21lKGlzRW1wdHlTdHJpbmcpKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50SW52YWxpZEZvcm1FcnJvcih0aGlzLl9tYXBDYXJkRXJyb3JzKGNhcmRDb21wb25lbnQuc3RhdGUuZXJyb3JzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBDYXJkRXJyb3JzKGNhcmRTdGF0ZUVycm9yczogQ2FyZFN0YXRlRXJyb3JzID0ge30pOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMge1xuICAgICAgICBjb25zdCBlcnJvcnM6IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyA9IHt9O1xuXG4gICAgICAgIE9iamVjdC5rZXlzKGNhcmRTdGF0ZUVycm9ycykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBlcnJvcnNba2V5XSA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNhcmRTdGF0ZUVycm9yc1trZXldLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBrZXksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQWNjb3VudFN0YXRlLCBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQWNjb3VudFN0YXRlKHBhcmFtOiBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUpOiBwYXJhbSBpcyBBY2NvdW50U3RhdGUge1xuICAgIGNvbnN0IGJhbmtTdXBwb3J0ZWQgPSBbJ2lkZWFsJywgJ3NlcGFkaXJlY3RkZWJpdCcsICdkaXJlY3RFYmFua2luZycsICdnaXJvcGF5J107XG5cbiAgICByZXR1cm4gYmFua1N1cHBvcnRlZC5pbmRleE9mKChwYXJhbSBhcyBBY2NvdW50U3RhdGUpLmRhdGEucGF5bWVudE1ldGhvZC50eXBlKSAhPT0gLTE7XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIsIGdldFN0eWxlc2hlZXRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IEFkeWVuVjJTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2FkeWVuLXV0aWxzJztcbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQWR5ZW5WMlBheW1lbnRTdHJhdGVneSBmcm9tICcuL2FkeWVudjItcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUFkeWVuVjJQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8QWR5ZW5WMlBheW1lbnRTdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT4ge1xuICAgIHJldHVybiBuZXcgQWR5ZW5WMlBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgbmV3IEFkeWVuVjJTY3JpcHRMb2FkZXIoZ2V0U2NyaXB0TG9hZGVyKCksIGdldFN0eWxlc2hlZXRMb2FkZXIoKSksXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVBZHllblYyUGF5bWVudFN0cmF0ZWd5LCBbeyBnYXRld2F5OiAnYWR5ZW52MicgfV0pO1xuIiwiaW1wb3J0IHsgU2NyaXB0TG9hZGVyLCBTdHlsZXNoZWV0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQgeyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBBZHllbkNsaWVudCwgQWR5ZW5Db25maWd1cmF0aW9uLCBBZHllblYzSG9zdFdpbmRvdyB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWR5ZW5WM1NjcmlwdExvYWRlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgX3NjcmlwdExvYWRlcjogU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIF9zdHlsZXNoZWV0TG9hZGVyOiBTdHlsZXNoZWV0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIF93aW5kb3c6IEFkeWVuVjNIb3N0V2luZG93ID0gd2luZG93LFxuICAgICkge31cblxuICAgIGFzeW5jIGxvYWQoY29uZmlndXJhdGlvbjogQWR5ZW5Db25maWd1cmF0aW9uKTogUHJvbWlzZTxBZHllbkNsaWVudD4ge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0aGlzLl9zdHlsZXNoZWV0TG9hZGVyLmxvYWRTdHlsZXNoZWV0KFxuICAgICAgICAgICAgICAgIGBodHRwczovL2NoZWNrb3V0c2hvcHBlci0ke1xuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmVudmlyb25tZW50ID8/ICcnXG4gICAgICAgICAgICAgICAgfS5hZHllbi5jb20vY2hlY2tvdXRzaG9wcGVyL3Nkay81LjcxLjEvYWR5ZW4uY3NzYCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByZXBlbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JpdHk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NoYTM4NC01TXZCNFJuenZ2aUEzVkJUNEtZQUJaNEhYTlpHNUxScVJFRWdkNDF4dC9wZi9Rdkttc2oyTzlHdU51eXdSWHg5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyb3Nzb3JpZ2luOiAnYW5vbnltb3VzJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkU2NyaXB0KFxuICAgICAgICAgICAgICAgIGBodHRwczovL2NoZWNrb3V0c2hvcHBlci0ke1xuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmVudmlyb25tZW50ID8/ICcnXG4gICAgICAgICAgICAgICAgfS5hZHllbi5jb20vY2hlY2tvdXRzaG9wcGVyL3Nkay81LjcxLjEvYWR5ZW4uanNgLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVncml0eTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2hhMzg0LXl2WTJ5Rk5SNFdxSWpQcVA5TXpqSStnSmltbWFKbkF2ajRyTEhLdmdKYmdGRDVmTXVmOHpJSnJGSk9XOExoaGYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3Jvc3NvcmlnaW46ICdhbm9ueW1vdXMnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApLFxuICAgICAgICBdKTtcblxuICAgICAgICBpZiAoIXRoaXMuX3dpbmRvdy5BZHllbkNoZWNrb3V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNoZWNrb3V0ID0gYXdhaXQgdGhpcy5fd2luZG93LkFkeWVuQ2hlY2tvdXQoY29uZmlndXJhdGlvbik7XG5cbiAgICAgICAgcmV0dXJuIGNoZWNrb3V0O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IHNvbWUgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEFkeWVuQWN0aW9uLFxuICAgIEFkeWVuQWRkaXRpb25hbEFjdGlvbixcbiAgICBBZHllbkFkZGl0aW9uYWxBY3Rpb25TdGF0ZSxcbiAgICBBZHllbkNsaWVudCxcbiAgICBBZHllbkNvbXBvbmVudCxcbiAgICBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUsXG4gICAgQWR5ZW5Db21wb25lbnRUeXBlLFxuICAgIEFkeWVuRXJyb3IsXG4gICAgQWR5ZW5QYXltZW50TWV0aG9kVHlwZSxcbiAgICBBZHllblBsYWNlaG9sZGVyRGF0YSxcbiAgICBBZHllblYzQWN0aW9uVHlwZSxcbiAgICBBZHllblYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIEFkeWVuVjNQYXltZW50TWV0aG9kSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIEFkeWVuVjNTY3JpcHRMb2FkZXIsXG4gICAgQ2FyZFN0YXRlRXJyb3JzLFxuICAgIGlzQm9sZXRvU3RhdGUsXG4gICAgaXNDYXJkU3RhdGUsXG4gICAgV2l0aEFkeWVuVjNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYWR5ZW4tdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBCaWxsaW5nQWRkcmVzcyxcbiAgICBnZXRCcm93c2VySW5mbyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlLFxuICAgIGlzUmVxdWVzdEVycm9yLFxuICAgIGlzVmF1bHRlZEluc3RydW1lbnQsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudEludmFsaWRGb3JtRXJyb3IsXG4gICAgUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZHllbnYzUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIF9hZHllbkNsaWVudD86IEFkeWVuQ2xpZW50O1xuICAgIHByaXZhdGUgX2NhcmRWZXJpZmljYXRpb25Db21wb25lbnQ/OiBBZHllbkNvbXBvbmVudDtcbiAgICBwcml2YXRlIF9jb21wb25lbnRTdGF0ZT86IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZTtcbiAgICBwcml2YXRlIF9wYXltZW50Q29tcG9uZW50PzogQWR5ZW5Db21wb25lbnQ7XG4gICAgcHJpdmF0ZSBfcGF5bWVudEluaXRpYWxpemVPcHRpb25zPzogQWR5ZW5WM1BheW1lbnRJbml0aWFsaXplT3B0aW9ucztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIF9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIF9zY3JpcHRMb2FkZXI6IEFkeWVuVjNTY3JpcHRMb2FkZXIsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aEFkeWVuVjNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgYWR5ZW52MyB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIWFkeWVudjMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5hZHllbnYzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcGF5bWVudEluaXRpYWxpemVPcHRpb25zID0gYWR5ZW52MztcblxuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgIC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxBZHllblYzUGF5bWVudE1ldGhvZEluaXRpYWxpemF0aW9uRGF0YT4ob3B0aW9ucy5tZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgZW52aXJvbm1lbnQsIGNsaWVudEtleSwgcGF5bWVudE1ldGhvZHNSZXNwb25zZSwgaW5zdGFsbG1lbnRPcHRpb25zIH0gPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgdGhpcy5fYWR5ZW5DbGllbnQgPSBhd2FpdCB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZCh7XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kc0NvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgICAgICAgICBrbGFybmE6IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlS2xhcm5hV2lkZ2V0OiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAga2xhcm5hX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlS2xhcm5hV2lkZ2V0OiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAga2xhcm5hX3BheW5vdzoge1xuICAgICAgICAgICAgICAgICAgICB1c2VLbGFybmFXaWRnZXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAuLi4oaW5zdGFsbG1lbnRPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YWxsbWVudE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93SW5zdGFsbG1lbnRBbW91bnRzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmluc3RhbGxtZW50T3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGxvY2FsZTogdGhpcy5fZ2V0TG9jYWxlKCksXG4gICAgICAgICAgICBjbGllbnRLZXksXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kc1Jlc3BvbnNlLFxuICAgICAgICAgICAgc2hvd1BheUJ1dHRvbjogZmFsc2UsXG4gICAgICAgICAgICB0cmFuc2xhdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBlczogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgICAgICdlcy1BUic6IHsgJ2NyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlJzogJ0ZlY2hhIGRlIGNhZHVjaWRhZCcgfSxcbiAgICAgICAgICAgICAgICAnZXMtRVMnOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICAgICAgJ2VzLU1YJzogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgICAgICdlcy1DTCc6IHsgJ2NyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlJzogJ0ZlY2hhIGRlIGNhZHVjaWRhZCcgfSxcbiAgICAgICAgICAgICAgICAnZXMtQ08nOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICAgICAgJ2VzLVBFJzogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fcGF5bWVudENvbXBvbmVudCA9IGF3YWl0IHRoaXMuX21vdW50UGF5bWVudENvbXBvbmVudChwYXltZW50TWV0aG9kKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5DcmVkaXRDYXJkIHx8XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5CYW5jb250YWN0XG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5fY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCA9IGF3YWl0IHRoaXMuX21vdW50Q2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHBheW1lbnQucGF5bWVudERhdGE7XG5cbiAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCB9ID0gaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShcbiAgICAgICAgICAgIHBheW1lbnREYXRhLFxuICAgICAgICApXG4gICAgICAgICAgICA/IHBheW1lbnREYXRhXG4gICAgICAgICAgICA6IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQ6IGZhbHNlLCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OiBmYWxzZSB9O1xuXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlQ2FyZERhdGEoKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBwYXltZW50Lm1ldGhvZElkID09PSAna2xhcm5hJyB8fFxuICAgICAgICAgICAgcGF5bWVudC5tZXRob2RJZCA9PT0gJ2tsYXJuYV9hY2NvdW50JyB8fFxuICAgICAgICAgICAgcGF5bWVudC5tZXRob2RJZCA9PT0gJ2tsYXJuYV9wYXlub3cnXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5fcGF5bWVudENvbXBvbmVudD8uc3VibWl0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBjb25zdCBjb21wb25lbnRTdGF0ZSA9IHRoaXMuX2NvbXBvbmVudFN0YXRlIHx8IHtcbiAgICAgICAgICAgIGRhdGE6IHsgcGF5bWVudE1ldGhvZDogeyB0eXBlOiBwYXltZW50Lm1ldGhvZElkIH0gfSxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAocGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIGxldCBiaWdwYXlUb2tlbiA9IHt9O1xuXG4gICAgICAgICAgICBpZiAoaXNDYXJkU3RhdGUoY29tcG9uZW50U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRDYXJkTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRTZWN1cml0eUNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZEV4cGlyeU1vbnRoLFxuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRFeHBpcnlZZWFyLFxuICAgICAgICAgICAgICAgIH0gPSBjb21wb25lbnRTdGF0ZS5kYXRhLnBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgICAgICAgICBiaWdwYXlUb2tlbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgY3JlZGl0X2NhcmRfbnVtYmVyX2NvbmZpcm1hdGlvbjogZW5jcnlwdGVkQ2FyZE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5X21vbnRoOiBlbmNyeXB0ZWRFeHBpcnlNb250aCxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5X3llYXI6IGVuY3J5cHRlZEV4cGlyeVllYXIsXG4gICAgICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbl92YWx1ZTogZW5jcnlwdGVkU2VjdXJpdHlDb2RlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGF5bWVudCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaWdwYXlfdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYmlncGF5VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBwYXltZW50RGF0YS5pbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3Nlcl9pbmZvOiBnZXRCcm93c2VySW5mbygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OiBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcGF5bWVudFRva2VuID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgLi4uY29tcG9uZW50U3RhdGUuZGF0YS5wYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgdHlwZTogcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgIG9yaWdpbjogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHBheW1lbnQubWV0aG9kSWQgPT09ICdib2xldG9iYW5jYXJpbycgJiYgaXNCb2xldG9TdGF0ZShjb21wb25lbnRTdGF0ZSkpIHtcbiAgICAgICAgICAgIHBheW1lbnRUb2tlbiA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBzb2NpYWxTZWN1cml0eU51bWJlcjogY29tcG9uZW50U3RhdGUuZGF0YS5zb2NpYWxTZWN1cml0eU51bWJlcixcbiAgICAgICAgICAgICAgICAuLi5jb21wb25lbnRTdGF0ZS5kYXRhLnNob3BwZXJOYW1lLFxuICAgICAgICAgICAgICAgIHR5cGU6IHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgb3JpZ2luOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZDogcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVkaXRfY2FyZF90b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBwYXltZW50VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGlzQ2FyZFN0YXRlKGNvbXBvbmVudFN0YXRlKSAmJiBjb21wb25lbnRTdGF0ZS5kYXRhLmluc3RhbGxtZW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbGxtZW50czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY29tcG9uZW50U3RhdGUuZGF0YS5pbnN0YWxsbWVudHMudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYW46IGNvbXBvbmVudFN0YXRlLmRhdGEuaW5zdGFsbG1lbnRzLnBsYW4gfHwgJ3JlZ3VsYXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyX2luZm86IGdldEJyb3dzZXJJbmZvKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6IHNob3VsZFNhdmVJbnN0cnVtZW50IHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCB8fCBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50U3RhdGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMuX3BheW1lbnRDb21wb25lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3BheW1lbnRDb21wb25lbnQudW5tb3VudCgpO1xuICAgICAgICAgICAgdGhpcy5fcGF5bWVudENvbXBvbmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50LnVubW91bnQoKTtcbiAgICAgICAgICAgIHRoaXMuX2NhcmRWZXJpZmljYXRpb25Db21wb25lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdXBkYXRlQ29tcG9uZW50U3RhdGUoY29tcG9uZW50U3RhdGU6IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSkge1xuICAgICAgICB0aGlzLl9jb21wb25lbnRTdGF0ZSA9IGNvbXBvbmVudFN0YXRlO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldExvY2FsZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBsb2NhbGUgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0TG9jYWxlKCk7XG5cbiAgICAgICAgaWYgKGxvY2FsZSAmJiBsb2NhbGUuc3Vic3RyaW5nKDAsIDIpID09PSAnZXMnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2VzJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsb2NhbGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0QWR5ZW5DbGllbnQoKTogQWR5ZW5DbGllbnQge1xuICAgICAgICBpZiAoIXRoaXMuX2FkeWVuQ2xpZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkeWVuQ2xpZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpOiBBZHllblYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zIHtcbiAgICAgICAgaWYgKCF0aGlzLl9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnXCJvcHRpb25zLmFkeWVudjNcIiBhcmd1bWVudCB3YXMgbm90IHByb3ZpZGVkIGR1cmluZyBpbml0aWFsaXphdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlQWN0aW9uKGFkZGl0aW9uYWxBY3Rpb246IEFkeWVuQWRkaXRpb25hbEFjdGlvbik6IFByb21pc2U8UGF5bWVudD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBhZGRpdGlvbmFsQWN0aW9uT3B0aW9ucyB9ID0gdGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgICAgICBjb25zdCB7IG9uQmVmb3JlTG9hZCwgY29udGFpbmVySWQsIG9uTG9hZCwgb25Db21wbGV0ZSwgd2lkZ2V0U2l6ZSwgb25BY3Rpb25IYW5kbGVkIH0gPVxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25PcHRpb25zO1xuICAgICAgICAgICAgY29uc3QgYWR5ZW5BY3Rpb246IEFkeWVuQWN0aW9uID0gSlNPTi5wYXJzZShhZGRpdGlvbmFsQWN0aW9uLmFjdGlvbik7XG5cbiAgICAgICAgICAgIGNvbnN0IGFkZGl0aW9uYWxBY3Rpb25Db21wb25lbnQgPSB0aGlzLl9nZXRBZHllbkNsaWVudCgpLmNyZWF0ZUZyb21BY3Rpb24oYWR5ZW5BY3Rpb24sIHtcbiAgICAgICAgICAgICAgICBvbkFjdGlvbkhhbmRsZWQ6IChhZGRpdGlvbmFsQWN0aW9uU3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY3Rpb25IYW5kbGVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb25BY3Rpb25IYW5kbGVkID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsQWN0aW9uU3RhdGUuY29tcG9uZW50VHlwZSAhPT0gJzNEUzJGaW5nZXJwcmludCdcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjdGlvbkhhbmRsZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25BZGRpdGlvbmFsRGV0YWlsczogKGFkZGl0aW9uYWxBY3Rpb25TdGF0ZTogQWR5ZW5BZGRpdGlvbmFsQWN0aW9uU3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF5bWVudFBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RJZDogYWR5ZW5BY3Rpb24ucGF5bWVudE1ldGhvZFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbmNlOiBKU09OLnN0cmluZ2lmeShhZGRpdGlvbmFsQWN0aW9uU3RhdGUuZGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICYmIHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNoYWxsZW5nZVdpbmRvd1NpemU6IHdpZGdldFNpemUgfHwgJzA1JyxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoZXJyb3I6IEFkeWVuRXJyb3IpID0+IHJlamVjdChlcnJvciksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKG9uQmVmb3JlTG9hZCAmJiB0eXBlb2Ygb25CZWZvcmVMb2FkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25CZWZvcmVMb2FkKFxuICAgICAgICAgICAgICAgICAgICBhZHllbkFjdGlvbi50eXBlID09PSBBZHllblYzQWN0aW9uVHlwZS5UaHJlZURTMiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgYWR5ZW5BY3Rpb24udHlwZSA9PT0gQWR5ZW5WM0FjdGlvblR5cGUuUVJDb2RlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBhZHllbkFjdGlvbi50eXBlID09PSBBZHllblYzQWN0aW9uVHlwZS5TZGssXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fbW91bnRFbGVtZW50KGFkZGl0aW9uYWxBY3Rpb25Db21wb25lbnQsIGNvbnRhaW5lcklkKTtcblxuICAgICAgICAgICAgaWYgKG9uTG9hZCAmJiB0eXBlb2Ygb25Mb2FkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Mb2FkKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IoKSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db21wb25lbnQudW5tb3VudCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBBZHllblBsYWNlaG9sZGVyRGF0YShcbiAgICAgICAgYmlsbGluZ0FkZHJlc3M/OiBCaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgcHJlZmlsbENhcmRIb2xkZXJOYW1lPzogYm9vbGVhbixcbiAgICApOiBBZHllblBsYWNlaG9sZGVyRGF0YSB7XG4gICAgICAgIGlmICghYmlsbGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lLFxuICAgICAgICAgICAgYWRkcmVzczE6IHN0cmVldCxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBob3VzZU51bWJlck9yTmFtZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGUsXG4gICAgICAgICAgICBjaXR5LFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogc3RhdGVPclByb3ZpbmNlLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGNvdW50cnksXG4gICAgICAgIH0gPSBiaWxsaW5nQWRkcmVzcztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaG9sZGVyTmFtZTogcHJlZmlsbENhcmRIb2xkZXJOYW1lID8gYCR7Zmlyc3ROYW1lfSAke2xhc3ROYW1lfWAgOiAnJyxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogcHJlZmlsbENhcmRIb2xkZXJOYW1lID8gZmlyc3ROYW1lIDogJycsXG4gICAgICAgICAgICBsYXN0TmFtZTogcHJlZmlsbENhcmRIb2xkZXJOYW1lID8gbGFzdE5hbWUgOiAnJyxcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzOiB7XG4gICAgICAgICAgICAgICAgc3RyZWV0LFxuICAgICAgICAgICAgICAgIGhvdXNlTnVtYmVyT3JOYW1lLFxuICAgICAgICAgICAgICAgIHBvc3RhbENvZGUsXG4gICAgICAgICAgICAgICAgY2l0eSxcbiAgICAgICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2UsXG4gICAgICAgICAgICAgICAgY291bnRyeSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbW91bnRDYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50KCk6IFByb21pc2U8QWR5ZW5Db21wb25lbnQ+IHtcbiAgICAgICAgY29uc3QgYWR5ZW52MyA9IHRoaXMuX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpO1xuICAgICAgICBjb25zdCBhZHllbkNsaWVudCA9IHRoaXMuX2dldEFkeWVuQ2xpZW50KCk7XG4gICAgICAgIGxldCBjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50OiBBZHllbkNvbXBvbmVudDtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKGFkeWVudjMuY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICAgICAgY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCA9IGFkeWVuQ2xpZW50LmNyZWF0ZShBZHllbkNvbXBvbmVudFR5cGUuU2VjdXJlZEZpZWxkcywge1xuICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYzLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uYWR5ZW52My5vcHRpb25zPy5zdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0Q29sb3I6ICcjMDAwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYzLm9wdGlvbnM/LnN0eWxlcz8ucGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGNvbXBvbmVudFN0YXRlKSA9PiB0aGlzLl91cGRhdGVDb21wb25lbnRTdGF0ZShjb21wb25lbnRTdGF0ZSksXG4gICAgICAgICAgICAgICAgICAgIG9uRXJyb3I6ICh2YWxpZGF0ZVN0YXRlKSA9PiBhZHllbnYzLnZhbGlkYXRlQ2FyZEZpZWxkcyh2YWxpZGF0ZVN0YXRlKSxcbiAgICAgICAgICAgICAgICAgICAgb25GaWVsZFZhbGlkOiAodmFsaWRhdGVTdGF0ZSkgPT4gYWR5ZW52My52YWxpZGF0ZUNhcmRGaWVsZHModmFsaWRhdGVTdGF0ZSksXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3VudEVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgYWR5ZW52My5jYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWQsXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzb2x2ZShjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbW91bnRQYXltZW50Q29tcG9uZW50KHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2QpOiBQcm9taXNlPEFkeWVuQ29tcG9uZW50PiB7XG4gICAgICAgIGxldCBwYXltZW50Q29tcG9uZW50OiBBZHllbkNvbXBvbmVudDtcbiAgICAgICAgY29uc3QgYWR5ZW52MyA9IHRoaXMuX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpO1xuICAgICAgICBjb25zdCBhZHllbkNsaWVudCA9IHRoaXMuX2dldEFkeWVuQ2xpZW50KCk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEJpbGxpbmdBZGRyZXNzKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgcHJlZmlsbENhcmRIb2xkZXJOYW1lIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICAgICAgcGF5bWVudENvbXBvbmVudCA9IGFkeWVuQ2xpZW50LmNyZWF0ZShwYXltZW50TWV0aG9kLm1ldGhvZCwge1xuICAgICAgICAgICAgICAgIC4uLmFkeWVudjMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBzaG93QnJhbmRzVW5kZXJDYXJkTnVtYmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBiaWxsaW5nQWRkcmVzc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzaG93RW1haWxBZGRyZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGNvbXBvbmVudFN0YXRlKSA9PiB0aGlzLl91cGRhdGVDb21wb25lbnRTdGF0ZShjb21wb25lbnRTdGF0ZSksXG4gICAgICAgICAgICAgICAgb25TdWJtaXQ6IChjb21wb25lbnRTdGF0ZSkgPT4gdGhpcy5fdXBkYXRlQ29tcG9uZW50U3RhdGUoY29tcG9uZW50U3RhdGUpLFxuICAgICAgICAgICAgICAgIC4uLihiaWxsaW5nQWRkcmVzc1xuICAgICAgICAgICAgICAgICAgICA/IHsgZGF0YTogdGhpcy5fbWFwQWR5ZW5QbGFjZWhvbGRlckRhdGEoYmlsbGluZ0FkZHJlc3MsIHByZWZpbGxDYXJkSG9sZGVyTmFtZSkgfVxuICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdW50RWxlbWVudChwYXltZW50Q29tcG9uZW50LCBhZHllbnYzLmNvbnRhaW5lcklkKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNvbHZlKHBheW1lbnRDb21wb25lbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihcbiAgICAgICAgZXJyb3I6IHVua25vd24sXG4gICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50PzogYm9vbGVhbixcbiAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudD86IGJvb2xlYW4sXG4gICAgKTogUHJvbWlzZTxQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMgfCB2b2lkPiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFpc1JlcXVlc3RFcnJvcihlcnJvcikgfHxcbiAgICAgICAgICAgICFzb21lKGVycm9yLmJvZHkuZXJyb3JzLCB7IGNvZGU6ICdhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCcgfSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheW1lbnQgPSBhd2FpdCB0aGlzLl9oYW5kbGVBY3Rpb24oZXJyb3IuYm9keS5wcm92aWRlcl9kYXRhKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICAuLi5wYXltZW50LFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnBheW1lbnQucGF5bWVudERhdGEsXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAocGF5bWVudEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oXG4gICAgICAgICAgICAgICAgcGF5bWVudEVycm9yLFxuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdmFsaWRhdGVDYXJkRGF0YSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYWR5ZW52MyA9IHRoaXMuX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpO1xuICAgICAgICBjb25zdCBjYXJkQ29tcG9uZW50ID0gYWR5ZW52My5oYXNWYXVsdGVkSW5zdHJ1bWVudHNcbiAgICAgICAgICAgID8gdGhpcy5fY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudFxuICAgICAgICAgICAgOiB0aGlzLl9wYXltZW50Q29tcG9uZW50O1xuXG4gICAgICAgIGlmICghY2FyZENvbXBvbmVudD8uY29tcG9uZW50UmVmPy5zaG93VmFsaWRhdGlvbiB8fCAhY2FyZENvbXBvbmVudC5zdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FyZENvbXBvbmVudC5jb21wb25lbnRSZWYuc2hvd1ZhbGlkYXRpb24oKTtcblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoY2FyZENvbXBvbmVudC5zdGF0ZSkubGVuZ3RoID09PSAwIHx8ICFjYXJkQ29tcG9uZW50LnN0YXRlLmlzVmFsaWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50SW52YWxpZEZvcm1FcnJvcih0aGlzLl9tYXBDYXJkRXJyb3JzKGNhcmRDb21wb25lbnQuc3RhdGUuZXJyb3JzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBDYXJkRXJyb3JzKGNhcmRTdGF0ZUVycm9yczogQ2FyZFN0YXRlRXJyb3JzID0ge30pOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMge1xuICAgICAgICBjb25zdCBlcnJvcnM6IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyA9IHt9O1xuXG4gICAgICAgIE9iamVjdC5rZXlzKGNhcmRTdGF0ZUVycm9ycykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBlcnJvcnNba2V5XSA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNhcmRTdGF0ZUVycm9yc1trZXldLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBrZXksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbW91bnRFbGVtZW50KGFkeWVuQ29tcG9uZW50OiBBZHllbkNvbXBvbmVudCwgY29udGFpbmVySWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcklkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYWR5ZW5Db21wb25lbnQubW91bnQoYCMke2NvbnRhaW5lcklkfWApO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEhvc3RlZEluc3RydW1lbnQgfSBmcm9tICcuL3BheW1lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0hvc3RlZEluc3RydW1lbnRMaWtlKFxuICAgIGluc3RydW1lbnQ6IHVua25vd24sXG4pOiBpbnN0cnVtZW50IGlzIEhvc3RlZEluc3RydW1lbnQge1xuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBpbnN0cnVtZW50ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBpbnN0cnVtZW50ICE9PSBudWxsICYmXG4gICAgICAgICh0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2F2ZUluc3RydW1lbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2F2ZUluc3RydW1lbnQgPT09ICdib29sZWFuJykgJiZcbiAgICAgICAgKHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPT09ICdib29sZWFuJylcbiAgICApO1xufVxuIiwiaW1wb3J0IHsgQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlLCBCb2xldG9TdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNCb2xldG9TdGF0ZShwYXJhbTogQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlKTogcGFyYW0gaXMgQm9sZXRvU3RhdGUge1xuICAgIHJldHVybiAoXG4gICAgICAgICh0eXBlb2YgcGFyYW0gPT09ICdvYmplY3QnICYmIHR5cGVvZiAocGFyYW0gYXMgQm9sZXRvU3RhdGUpLmRhdGEuc29jaWFsU2VjdXJpdHlOdW1iZXIpID09PVxuICAgICAgICAgICAgJ3N0cmluZycgJiZcbiAgICAgICAgdHlwZW9mIChwYXJhbSBhcyBCb2xldG9TdGF0ZSkuZGF0YS5zaG9wcGVyTmFtZT8uZmlyc3ROYW1lID09PSAnc3RyaW5nJyAmJlxuICAgICAgICB0eXBlb2YgKHBhcmFtIGFzIEJvbGV0b1N0YXRlKS5kYXRhLnNob3BwZXJOYW1lPy5sYXN0TmFtZSA9PT0gJ3N0cmluZydcbiAgICApO1xufVxuIiwiaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyLCBnZXRTdHlsZXNoZWV0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQgeyBBZHllblYzU2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9hZHllbi11dGlscyc7XG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEFkeWVuVjNQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9hZHllbnYzLXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVBZHllblYzUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PEFkeWVuVjNQYXltZW50U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICByZXR1cm4gbmV3IEFkeWVuVjNQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIG5ldyBBZHllblYzU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpLCBnZXRTdHlsZXNoZWV0TG9hZGVyKCkpLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQWR5ZW5WM1BheW1lbnRTdHJhdGVneSwgW3sgZ2F0ZXdheTogJ2FkeWVudjMnIH1dKTtcbiJdLCJuYW1lcyI6WyJTdGFuZGFyZEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJwcm90b3R5cGUiLCJzdXBlciIsIm5hbWUiLCJ0eXBlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJ0aGlzIiwiX19wcm90b19fIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJzdGFjayIsIlBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIiwiQWR5ZW5WM0FjdGlvblR5cGUiLCJBZHllblYyQWN0aW9uVHlwZSIsIkFkeWVuQ29tcG9uZW50VHlwZSIsIkFkeWVuUGF5bWVudE1ldGhvZFR5cGUiLCJIVFRQTWV0aG9kIiwiUmVzdWx0Q29kZSIsIkFkeWVuQ2FyZEZpZWxkcyIsIk5vdEluaXRpYWxpemVkRXJyb3JUeXBlIiwiQWR5ZW5WMlNjcmlwdExvYWRlciIsIl9zY3JpcHRMb2FkZXIiLCJfc3R5bGVzaGVldExvYWRlciIsIl93aW5kb3ciLCJ3aW5kb3ciLCJsb2FkIiwiY29uZmlndXJhdGlvbiIsIlByb21pc2UiLCJhbGwiLCJsb2FkU3R5bGVzaGVldCIsImVudmlyb25tZW50IiwicHJlcGVuZCIsImF0dHJpYnV0ZXMiLCJpbnRlZ3JpdHkiLCJjcm9zc29yaWdpbiIsImxvYWRTY3JpcHQiLCJhc3luYyIsIkFkeWVuQ2hlY2tvdXQiLCJ0b1Jlc29sdmFibGVNb2R1bGUiLCJtb2R1bGUiLCJyZXNvbHZlSWRzIiwiY29uc29sZSIsImxvZyIsImFzc2lnbiIsImlzQ2FyZFN0YXRlIiwicGFyYW0iLCJkYXRhIiwicGF5bWVudE1ldGhvZCIsImVuY3J5cHRlZFNlY3VyaXR5Q29kZSIsImVuY3J5cHRlZEV4cGlyeU1vbnRoIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiam9pbiIsIk5vdEluaXRpYWxpemVkRXJyb3IiLCJzdWJ0eXBlIiwiQ3VzdG9tZXJOb3RJbml0aWFsaXplZCIsIlBheW1lbnROb3RJbml0aWFsaXplZCIsIlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQiLCJTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkIiwiZ2V0RXJyb3JNZXNzYWdlIiwiaXNWYXVsdGVkSW5zdHJ1bWVudCIsImluc3RydW1lbnQiLCJCb29sZWFuIiwiaW5zdHJ1bWVudElkIiwiZ2V0QnJvd3NlckluZm8iLCJuYXZpZ2F0b3IiLCJsYW5ndWFnZSIsInVzZXJMYW5ndWFnZSIsImNvbG9yX2RlcHRoIiwic2NyZWVuIiwiY29sb3JEZXB0aCIsImphdmFfZW5hYmxlZCIsImphdmFFbmFibGVkIiwic2NyZWVuX2hlaWdodCIsImhlaWdodCIsInNjcmVlbl93aWR0aCIsIndpZHRoIiwidGltZV96b25lX29mZnNldCIsIkRhdGUiLCJnZXRUaW1lem9uZU9mZnNldCIsInRvU3RyaW5nIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yIiwiZXJyb3IiLCJQYXltZW50SW52YWxpZEZvcm1FcnJvciIsImRldGFpbHMiLCJBZHllblYyUGF5bWVudFN0cmF0ZWd5IiwiX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJpbml0aWFsaXplIiwib3B0aW9ucyIsImFkeWVudjIiLCJfcGF5bWVudEluaXRpYWxpemVPcHRpb25zIiwiZ2V0U3RhdGUiLCJnZXRQYXltZW50TWV0aG9kT3JUaHJvdyIsIm1ldGhvZElkIiwib3JpZ2luS2V5IiwiY2xpZW50S2V5IiwicGF5bWVudE1ldGhvZHNSZXNwb25zZSIsImluaXRpYWxpemF0aW9uRGF0YSIsImNsaWVudFNpZGVBdXRoZW50aWNhdGlvbiIsImtleSIsInZhbHVlIiwiX2FkeWVuQ2xpZW50IiwibG9jYWxlIiwiZ2V0TG9jYWxlIiwidHJhbnNsYXRpb25zIiwiZXMiLCJfcGF5bWVudENvbXBvbmVudCIsIl9tb3VudFBheW1lbnRDb21wb25lbnQiLCJtZXRob2QiLCJDcmVkaXRDYXJkIiwiQmFuY29udGFjdCIsIl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50IiwiX21vdW50Q2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCIsInJlc29sdmUiLCJleGVjdXRlIiwicGF5bG9hZCIsInBheW1lbnQiLCJvcmRlciIsInBheW1lbnREYXRhIiwic2hvdWxkU2F2ZUluc3RydW1lbnQiLCJzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IiwicmVqZWN0IiwiX3ZhbGlkYXRlQ2FyZERhdGEiLCJzdWJtaXRPcmRlciIsImNvbXBvbmVudFN0YXRlIiwiX2NvbXBvbmVudFN0YXRlIiwiYmlncGF5VG9rZW4iLCJlbmNyeXB0ZWRDYXJkTnVtYmVyIiwiZW5jcnlwdGVkRXhwaXJ5WWVhciIsImNyZWRpdF9jYXJkX251bWJlcl9jb25maXJtYXRpb24iLCJleHBpcnlfbW9udGgiLCJleHBpcnlfeWVhciIsInZlcmlmaWNhdGlvbl92YWx1ZSIsImluZGV4T2YiLCJzdWJtaXRQYXltZW50IiwiZm9ybWF0dGVkUGF5bG9hZCIsImJpZ3BheV90b2tlbiIsInRva2VuIiwib3JpZ2luIiwibG9jYXRpb24iLCJicm93c2VyX2luZm8iLCJzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudCIsIl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbiIsImNyZWRpdF9jYXJkX3Rva2VuIiwiSlNPTiIsInN0cmluZ2lmeSIsInZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudCIsImZpbmFsaXplIiwiZGVpbml0aWFsaXplIiwidW5kZWZpbmVkIiwidW5tb3VudCIsIl9nZXRBZHllbkNsaWVudCIsIl9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMiLCJfZ2V0VGhyZWVEUzJDaGFsbGVuZ2VXaWRnZXRTaXplIiwiYWRkaXRpb25hbEFjdGlvbk9wdGlvbnMiLCJ0aHJlZURTMk9wdGlvbnMiLCJ3aWRnZXRTaXplIiwiX2hhbmRsZUFjdGlvbiIsImFkZGl0aW9uYWxBY3Rpb24iLCJ0aHJlZURTMkNvbnRhaW5lcklkIiwib25CZWZvcmVMb2FkIiwiY29udGFpbmVySWQiLCJvbkxvYWQiLCJvbkNvbXBsZXRlIiwiYWR5ZW5BY3Rpb24iLCJwYXJzZSIsImFjdGlvbiIsImFkZGl0aW9uYWxBY3Rpb25Db21wb25lbnQiLCJjcmVhdGVGcm9tQWN0aW9uIiwib25BZGRpdGlvbmFsRGV0YWlscyIsImFkZGl0aW9uYWxBY3Rpb25TdGF0ZSIsInBheW1lbnRQYXlsb2FkIiwicGF5bWVudE1ldGhvZFR5cGUiLCJub25jZSIsInNpemUiLCJvbkVycm9yIiwiVGhyZWVEUzJDaGFsbGVuZ2UiLCJRUkNvZGUiLCJtb3VudCIsIl9tYXBBZHllblBsYWNlaG9sZGVyRGF0YSIsImJpbGxpbmdBZGRyZXNzIiwicHJlZmlsbENhcmRIb2xkZXJOYW1lIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJhZGRyZXNzMSIsInN0cmVldCIsImFkZHJlc3MyIiwiaG91c2VOdW1iZXJPck5hbWUiLCJwb3N0YWxDb2RlIiwiY2l0eSIsInN0YXRlT3JQcm92aW5jZUNvZGUiLCJzdGF0ZU9yUHJvdmluY2UiLCJjb3VudHJ5Q29kZSIsImNvdW50cnkiLCJob2xkZXJOYW1lIiwiYWR5ZW5DbGllbnQiLCJjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50IiwiY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkIiwiY3JlYXRlIiwiU2VjdXJlZEZpZWxkcyIsInN0eWxlcyIsInBsYWNlaG9sZGVyIiwiY29sb3IiLCJjYXJldENvbG9yIiwib25DaGFuZ2UiLCJfdXBkYXRlQ29tcG9uZW50U3RhdGUiLCJ2YWxpZGF0ZVN0YXRlIiwidmFsaWRhdGVDYXJkRmllbGRzIiwib25GaWVsZFZhbGlkIiwicGF5bWVudENvbXBvbmVudCIsIkFDSCIsImdldEJpbGxpbmdBZGRyZXNzIiwiSURFQUwiLCJTRVBBIiwiaGFzVmF1bHRlZEluc3RydW1lbnRzIiwiQWxpUGF5IiwiR2lyb1BheSIsIlNvZm9ydCIsIktsYXJuYSIsIktsYXJuYVBheU5vdyIsIktsYXJuYUFjY291bnQiLCJWaXBwcyIsIldlQ2hhdFBheVFSIiwic29tZSIsImJvZHkiLCJlcnJvcnMiLCJjb2RlIiwicHJvdmlkZXJfZGF0YSIsInBheW1lbnRFcnJvciIsImNhcmRDb21wb25lbnQiLCJjb21wb25lbnRSZWYiLCJzaG93VmFsaWRhdGlvbiIsInN0YXRlIiwia2V5cyIsImxlbmd0aCIsImlzVmFsaWQiLCJpc3N1ZXIiLCJwcm9wcyIsInZhbHVlcyIsInRyaW0iLCJfbWFwQ2FyZEVycm9ycyIsImNhcmRTdGF0ZUVycm9ycyIsImZvckVhY2giLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwiZ2V0U2NyaXB0TG9hZGVyIiwiZ2V0U3R5bGVzaGVldExvYWRlciIsImdhdGV3YXkiLCJBZHllblYzU2NyaXB0TG9hZGVyIiwiQWR5ZW52M1BheW1lbnRTdHJhdGVneSIsImFkeWVudjMiLCJpbnN0YWxsbWVudE9wdGlvbnMiLCJwYXltZW50TWV0aG9kc0NvbmZpZ3VyYXRpb24iLCJrbGFybmEiLCJ1c2VLbGFybmFXaWRnZXQiLCJrbGFybmFfYWNjb3VudCIsImtsYXJuYV9wYXlub3ciLCJjYXJkIiwic2hvd0luc3RhbGxtZW50QW1vdW50cyIsIl9nZXRMb2NhbGUiLCJzaG93UGF5QnV0dG9uIiwic3VibWl0IiwicGF5bWVudFRva2VuIiwic29jaWFsU2VjdXJpdHlOdW1iZXIiLCJzaG9wcGVyTmFtZSIsImlzQm9sZXRvU3RhdGUiLCJpbnN0YWxsbWVudHMiLCJwbGFuIiwic3Vic3RyaW5nIiwib25BY3Rpb25IYW5kbGVkIiwiY29tcG9uZW50VHlwZSIsImNoYWxsZW5nZVdpbmRvd1NpemUiLCJUaHJlZURTMiIsIlNkayIsIl9tb3VudEVsZW1lbnQiLCJzaG93QnJhbmRzVW5kZXJDYXJkTnVtYmVyIiwiYmlsbGluZ0FkZHJlc3NSZXF1aXJlZCIsInNob3dFbWFpbEFkZHJlc3MiLCJvblN1Ym1pdCIsImFkeWVuQ29tcG9uZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/adyen.js\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv2/AdyenV2CardValidation.tsx":
/*!**************************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv2/AdyenV2CardValidation.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classnames */ \"./node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar AdyenCardFields;\n(function (AdyenCardFields) {\n    AdyenCardFields[\"CardNumber\"] = \"encryptedCardNumber\";\n    AdyenCardFields[\"SecurityCode\"] = \"encryptedSecurityCode\";\n    AdyenCardFields[\"ExpiryDate\"] = \"encryptedExpiryDate\";\n})(AdyenCardFields || (AdyenCardFields = {}));\nconst getInitialValidationState = ({ shouldShowNumberField, method, }) => {\n    const validationState = {};\n    if (shouldShowNumberField) {\n        validationState[AdyenCardFields.CardNumber] = { valid: false };\n    }\n    if (method === 'scheme') {\n        validationState[AdyenCardFields.SecurityCode] = { valid: false };\n    }\n    if (method === 'bcmc') {\n        validationState[AdyenCardFields.ExpiryDate] = { valid: false };\n    }\n    return validationState;\n};\nconst isFieldInvalid = (fieldKey, fieldsValidation) => !!fieldsValidation[fieldKey] && !fieldsValidation[fieldKey].valid;\nconst AdyenV2CardValidation = ({ verificationFieldsContainerId, shouldShowNumberField, selectedInstrument, paymentMethod, cardValidationState, language, }) => {\n    const [fieldsValidation, setFieldsValidation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }));\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        var _a;\n        if (!cardValidationState) {\n            return;\n        }\n        if (cardValidationState.fieldType &&\n            (!fieldsValidation[cardValidationState.fieldType] ||\n                ((_a = fieldsValidation[cardValidationState.fieldType]) === null || _a === void 0 ? void 0 : _a.valid) !==\n                    cardValidationState.valid)) {\n            if (cardValidationState.fieldType === AdyenCardFields.CardNumber) {\n                setFieldsValidation(Object.assign(Object.assign({}, fieldsValidation), { [AdyenCardFields.CardNumber]: cardValidationState.endDigits !== (selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.last4)\n                        ? Object.assign(Object.assign({}, cardValidationState), { valid: false }) : Object.assign({}, cardValidationState) }));\n            }\n            else {\n                setFieldsValidation(Object.assign(Object.assign({}, fieldsValidation), { [cardValidationState.fieldType]: cardValidationState }));\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [cardValidationState, setFieldsValidation, selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.last4]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        if (selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken) {\n            setFieldsValidation(getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }));\n        }\n    }, [selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken, paymentMethod.method, shouldShowNumberField]);\n    const showValidationIcon = (key) => isFieldInvalid(key, fieldsValidation) && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", { className: \"adyen-checkout-input__inline-validation adyen-checkout-input__inline-validation--invalid\", style: { transform: 'none', right: '20px' } },\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"img\", { alt: \"adyen-checkout-icon\", className: \"adyen-checkout__icon\", src: \"https://checkoutshopper-test.adyen.com/checkoutshopper/images/components/field_error.svg\" })));\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null,\n        shouldShowNumberField && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"p\", null,\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"strong\", null, language === null || language === void 0 ? void 0 : language.translate('payment.instrument_trusted_shipping_address_title_text')),\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"br\", null), language === null || language === void 0 ? void 0 :\n            language.translate('payment.instrument_trusted_shipping_address_text'))),\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-ccFields\", id: verificationFieldsContainerId },\n            shouldShowNumberField && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-field', 'form-field--ccNumber', {\n                    'form-field--ccNumber--hasExpiryDate': paymentMethod.method === 'bcmc',\n                }, \n                // This div is hiding by CSS because there is an Adyen library in\n                // checkout-sdk which mounts verification fields and if is removed with JS this mounting event will be thrown an error\n                { 'form-field-ccNumber--hide': !shouldShowNumberField }) },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.CardNumber }, language === null || language === void 0 ? void 0 : language.translate('payment.credit_card_number_label')),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.CardNumber, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.CardNumber, id: AdyenCardFields.CardNumber }),\n                showValidationIcon(AdyenCardFields.CardNumber))),\n            paymentMethod.method === 'scheme' && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-field form-ccFields-field--ccCvv\" },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.SecurityCode }, language === null || language === void 0 ? void 0 : language.translate('payment.credit_card_cvv_label')),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.SecurityCode, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.SecurityCode, id: AdyenCardFields.SecurityCode }),\n                showValidationIcon(AdyenCardFields.SecurityCode))),\n            paymentMethod.method === 'bcmc' && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-field form-field--ccExpiry\" },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.ExpiryDate }, language === null || language === void 0 ? void 0 : language.translate('payment.credit_card_expiration_label')),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.ExpiryDate, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.ExpiryDate, id: AdyenCardFields.ExpiryDate }),\n                showValidationIcon(AdyenCardFields.ExpiryDate))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdyenV2CardValidation);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52Mi9BZHllblYyQ2FyZFZhbGlkYXRpb24udHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBTW9DO0FBQ3VDO0FBSTNFLElBQUssZUFJSjtBQUpELFdBQUssZUFBZTtJQUNoQixxREFBa0M7SUFDbEMseURBQXNDO0lBQ3RDLHFEQUFrQztBQUN0QyxDQUFDLEVBSkksZUFBZSxLQUFmLGVBQWUsUUFJbkI7QUFXRCxNQUFNLHlCQUF5QixHQUFHLENBQUMsRUFDL0IscUJBQXFCLEVBQ3JCLE1BQU0sR0FJVCxFQUFFLEVBQUU7SUFDRCxNQUFNLGVBQWUsR0FBcUIsRUFBRSxDQUFDO0lBRTdDLElBQUkscUJBQXFCLEVBQUUsQ0FBQztRQUN4QixlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ25FLENBQUM7SUFFRCxJQUFJLE1BQU0sS0FBSyxRQUFRLEVBQUUsQ0FBQztRQUN0QixlQUFlLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ3JFLENBQUM7SUFFRCxJQUFJLE1BQU0sS0FBSyxNQUFNLEVBQUUsQ0FBQztRQUNwQixlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ25FLENBQUM7SUFFRCxPQUFPLGVBQWUsQ0FBQztBQUMzQixDQUFDLENBQUM7QUFFRixNQUFNLGNBQWMsR0FBRyxDQUFDLFFBQXlCLEVBQUUsZ0JBQWtDLEVBQVcsRUFBRSxDQUM5RixDQUFDLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFFdEUsTUFBTSxxQkFBcUIsR0FBa0QsQ0FBQyxFQUMxRSw2QkFBNkIsRUFDN0IscUJBQXFCLEVB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QUNsQztnQkFDRCxrQkFBa0IsQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQy9DLENBQ1Q7WUFDQSxhQUFhLENBQUMsTUFBTSxLQUFLLE1BQU0sSUFBSSxDQUNoQyxvRUFBSyxTQUFTLEVBQUMsaUNBQWlDO2dCQUM1QyxzRUFBTyxPQUFPLEVBQUUsZUFBZSxDQUFDLFVBQVUsSUFDckMsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLFNBQVMsQ0FBQyxzQ0FBc0MsQ0FBQyxDQUN4RDtnQkFDUixvRUFDSSxTQUFTLEVBQUUsaURBQVUsQ0FDakIsWUFBWSxFQUNaLDhCQUE4QixFQUM5QixVQUFVLEVBQ1YsK0JBQStCLEVBQy9CO3dCQUNJLDhCQUE4QixFQUFFLGNBQWMsQ0FDMUMsZUFBZSxDQUFDLFVBQVUsRUFDMUIsZ0JBQWdCLENBQ25CO3FCQUNKLENBQ0osY0FDUyxlQUFlLENBQUMsVUFBVSxFQUNwQyxFQUFFLEVBQUUsZUFBZSxDQUFDLFVBQVUsR0FDaEM7Z0JBQ0Qsa0JBQWtCLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUM3QyxDQUNULENBQ0MsQ0FDSixDQUNULENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSxxQkFBcUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjIvQWR5ZW5WMkNhcmRWYWxpZGF0aW9uLnRzeD81OTgxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgdHlwZSBBZHllblZhbGlkYXRpb25TdGF0ZSxcbiAgICB0eXBlIENhcmRJbnN0cnVtZW50LFxuICAgIHR5cGUgTGFuZ3VhZ2VTZXJ2aWNlLFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBSZWFjdCwgeyB0eXBlIEZ1bmN0aW9uQ29tcG9uZW50LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgdHlwZSBGaWVsZHNWYWxpZGF0aW9uID0geyBba2V5IGluIEFkeWVuQ2FyZEZpZWxkc10/OiBBZHllblZhbGlkYXRpb25TdGF0ZSB9O1xuXG5lbnVtIEFkeWVuQ2FyZEZpZWxkcyB7XG4gICAgQ2FyZE51bWJlciA9ICdlbmNyeXB0ZWRDYXJkTnVtYmVyJyxcbiAgICBTZWN1cml0eUNvZGUgPSAnZW5jcnlwdGVkU2VjdXJpdHlDb2RlJyxcbiAgICBFeHBpcnlEYXRlID0gJ2VuY3J5cHRlZEV4cGlyeURhdGUnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuVjJDYXJkVmFsaWRhdGlvblByb3BzIHtcbiAgICB2ZXJpZmljYXRpb25GaWVsZHNDb250YWluZXJJZD86IHN0cmluZztcbiAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ6IGJvb2xlYW47XG4gICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDtcbiAgICBjYXJkVmFsaWRhdGlvblN0YXRlPzogQWR5ZW5WYWxpZGF0aW9uU3RhdGU7XG4gICAgc2VsZWN0ZWRJbnN0cnVtZW50PzogQ2FyZEluc3RydW1lbnQ7XG4gICAgbGFuZ3VhZ2U/OiBMYW5ndWFnZVNlcnZpY2U7XG59XG5cbmNvbnN0IGdldEluaXRpYWxWYWxpZGF0aW9uU3RhdGUgPSAoe1xuICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZCxcbiAgICBtZXRob2QsXG59OiB7XG4gICAgc2hvdWxkU2hvd051bWJlckZpZWxkOiBib29sZWFuO1xuICAgIG1ldGhvZDogc3RyaW5nO1xufSkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRpb25TdGF0ZTogRmllbGRzVmFsaWRhdGlvbiA9IHt9O1xuXG4gICAgaWYgKHNob3VsZFNob3dOdW1iZXJGaWVsZCkge1xuICAgICAgICB2YWxpZGF0aW9uU3RhdGVbQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXJdID0geyB2YWxpZDogZmFsc2UgfTtcbiAgICB9XG5cbiAgICBpZiAobWV0aG9kID09PSAnc2NoZW1lJykge1xuICAgICAgICB2YWxpZGF0aW9uU3RhdGVbQWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZV0gPSB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cblxuICAgIGlmIChtZXRob2QgPT09ICdiY21jJykge1xuICAgICAgICB2YWxpZGF0aW9uU3RhdGVbQWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGVdID0geyB2YWxpZDogZmFsc2UgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsaWRhdGlvblN0YXRlO1xufTtcblxuY29uc3QgaXNGaWVsZEludmFsaWQgPSAoZmllbGRLZXk6IEFkeWVuQ2FyZEZpZWxkcywgZmllbGRzVmFsaWRhdGlvbjogRmllbGRzVmFsaWRhdGlvbik6IGJvb2xlYW4gPT5cbiAgICAhIWZpZWxkc1ZhbGlkYXRpb25bZmllbGRLZXldICYmICFmaWVsZHNWYWxpZGF0aW9uW2ZpZWxkS2V5XS52YWxpZDtcblxuY29uc3QgQWR5ZW5WMkNhcmRWYWxpZGF0aW9uOiBGdW5jdGlvbkNvbXBvbmVudDxBZHllblYyQ2FyZFZhbGlkYXRpb25Qcm9wcz4gPSAoe1xuICAgIHZlcmlmaWNhdGlvbkZpZWxkc0NvbnRhaW5lcklkLFxuICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZCxcbiAgICBzZWxlY3RlZEluc3RydW1lbnQsXG4gICAgcGF5bWVudE1ldGhvZCxcbiAgICBjYXJkVmFsaWRhdGlvblN0YXRlLFxuICAgIGxhbmd1YWdlLFxufSkgPT4ge1xuICAgIGNvbnN0IFtmaWVsZHNWYWxpZGF0aW9uLCBzZXRGaWVsZHNWYWxpZGF0aW9uXSA9IHVzZVN0YXRlPEZpZWxkc1ZhbGlkYXRpb24+KFxuICAgICAgICBnZXRJbml0aWFsVmFsaWRhdGlvblN0YXRlKHsgc2hvdWxkU2hvd051bWJlckZpZWxkLCBtZXRob2Q6IHBheW1lbnRNZXRob2QubWV0aG9kIH0pLFxuICAgICk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWNhcmRWYWxpZGF0aW9uU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNhcmRWYWxpZGF0aW9uU3RhdGUuZmllbGRUeXBlICYmXG4gICAgICAgICAgICAoIWZpZWxkc1ZhbGlkYXRpb25bY2FyZFZhbGlkYXRpb25TdGF0ZS5maWVsZFR5cGVdIHx8XG4gICAgICAgICAgICAgICAgZmllbGRzVmFsaWRhdGlvbltjYXJkVmFsaWRhdGlvblN0YXRlLmZpZWxkVHlwZV0/LnZhbGlkICE9PVxuICAgICAgICAgICAgICAgICAgICBjYXJkVmFsaWRhdGlvblN0YXRlLnZhbGlkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlmIChjYXJkVmFsaWRhdGlvblN0YXRlLmZpZWxkVHlwZSA9PT0gQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXIpIHtcbiAgICAgICAgICAgICAgICBzZXRGaWVsZHNWYWxpZGF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgW0FkeWVuQ2FyZEZpZWxkcy5DYXJkTnVtYmVyXTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRWYWxpZGF0aW9uU3RhdGUuZW5kRGlnaXRzICE9PSBzZWxlY3RlZEluc3RydW1lbnQ/Lmxhc3Q0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7IC4uLmNhcmRWYWxpZGF0aW9uU3RhdGUsIHZhbGlkOiBmYWxzZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7IC4uLmNhcmRWYWxpZGF0aW9uU3RhdGUgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0RmllbGRzVmFsaWRhdGlvbih7XG4gICAgICAgICAgICAgICAgICAgIC4uLmZpZWxkc1ZhbGlkYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIFtjYXJkVmFsaWRhdGlvblN0YXRlLmZpZWxkVHlwZV06IGNhcmRWYWxpZGF0aW9uU3RhdGUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtjYXJkVmFsaWRhdGlvblN0YXRlLCBzZXRGaWVsZHNWYWxpZGF0aW9uLCBzZWxlY3RlZEluc3RydW1lbnQ/Lmxhc3Q0XSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoc2VsZWN0ZWRJbnN0cnVtZW50Py5iaWdwYXlUb2tlbikge1xuICAgICAgICAgICAgc2V0RmllbGRzVmFsaWRhdGlvbihcbiAgICAgICAgICAgICAgICBnZXRJbml0aWFsVmFsaWRhdGlvblN0YXRlKHsgc2hvdWxkU2hvd051bWJlckZpZWxkLCBtZXRob2Q6IHBheW1lbnRNZXRob2QubWV0aG9kIH0pLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sIFtzZWxlY3RlZEluc3RydW1lbnQ/LmJpZ3BheVRva2VuLCBwYXltZW50TWV0aG9kLm1ldGhvZCwgc2hvdWxkU2hvd051bWJlckZpZWxkXSk7XG5cbiAgICBjb25zdCBzaG93VmFsaWRhdGlvbkljb24gPSAoa2V5OiBBZHllbkNhcmRGaWVsZHMpID0+XG4gICAgICAgIGlzRmllbGRJbnZhbGlkKGtleSwgZmllbGRzVmFsaWRhdGlvbikgJiYgKFxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhZHllbi1jaGVja291dC1pbnB1dF9faW5saW5lLXZhbGlkYXRpb24gYWR5ZW4tY2hlY2tvdXQtaW5wdXRfX2lubGluZS12YWxpZGF0aW9uLS1pbnZhbGlkXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB0cmFuc2Zvcm06ICdub25lJywgcmlnaHQ6ICcyMHB4JyB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgYWx0PVwiYWR5ZW4tY2hlY2tvdXQtaWNvblwiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFkeWVuLWNoZWNrb3V0X19pY29uXCJcbiAgICAgICAgICAgICAgICAgICAgc3JjPVwiaHR0cHM6Ly9jaGVja291dHNob3BwZXItdGVzdC5hZHllbi5jb20vY2hlY2tvdXRzaG9wcGVyL2ltYWdlcy9jb21wb25lbnRzL2ZpZWxkX2Vycm9yLnN2Z1wiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICB7c2hvdWxkU2hvd051bWJlckZpZWxkICYmIChcbiAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZT8udHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50Lmluc3RydW1lbnRfdHJ1c3RlZF9zaGlwcGluZ19hZGRyZXNzX3RpdGxlX3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHJvbmc+XG5cbiAgICAgICAgICAgICAgICAgICAgPGJyIC8+XG5cbiAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlPy50cmFuc2xhdGUoJ3BheW1lbnQuaW5zdHJ1bWVudF90cnVzdGVkX3NoaXBwaW5nX2FkZHJlc3NfdGV4dCcpfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1jY0ZpZWxkc1wiIGlkPXt2ZXJpZmljYXRpb25GaWVsZHNDb250YWluZXJJZH0+XG4gICAgICAgICAgICAgICAge3Nob3VsZFNob3dOdW1iZXJGaWVsZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1maWVsZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zvcm0tZmllbGQtLWNjTnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtLWZpZWxkLS1jY051bWJlci0taGFzRXhwaXJ5RGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gJ2JjbWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBkaXYgaXMgaGlkaW5nIGJ5IENTUyBiZWNhdXNlIHRoZXJlIGlzIGFuIEFkeWVuIGxpYnJhcnkgaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVja291dC1zZGsgd2hpY2ggbW91bnRzIHZlcmlmaWNhdGlvbiBmaWVsZHMgYW5kIGlmIGlzIHJlbW92ZWQgd2l0aCBKUyB0aGlzIG1vdW50aW5nIGV2ZW50IHdpbGwgYmUgdGhyb3duIGFuIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAnZm9ybS1maWVsZC1jY051bWJlci0taGlkZSc6ICFzaG91bGRTaG93TnVtYmVyRmllbGQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPXtBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlPy50cmFuc2xhdGUoJ3BheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zvcm0taW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3B0aW1pemVkQ2hlY2tvdXQtZm9ybS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoYXMtaWNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhZHllbi1jaGVja291dF9faW5wdXQtd3JhcHBlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhZHllbi1jaGVja291dF9faW5wdXQtLWVycm9yJzogaXNGaWVsZEludmFsaWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWNzZT17QWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e0FkeWVuQ2FyZEZpZWxkcy5DYXJkTnVtYmVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtzaG93VmFsaWRhdGlvbkljb24oQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXIpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAge3BheW1lbnRNZXRob2QubWV0aG9kID09PSAnc2NoZW1lJyAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1maWVsZCBmb3JtLWNjRmllbGRzLWZpZWxkLS1jY0N2dlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9e0FkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZT8udHJhbnNsYXRlKCdwYXltZW50LmNyZWRpdF9jYXJkX2N2dl9sYWJlbCcpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29wdGltaXplZENoZWNrb3V0LWZvcm0taW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGFzLWljb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWR5ZW4tY2hlY2tvdXRfX2lucHV0LXdyYXBwZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWR5ZW4tY2hlY2tvdXRfX2lucHV0LS1lcnJvcic6IGlzRmllbGRJbnZhbGlkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWNzZT17QWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2hvd1ZhbGlkYXRpb25JY29uKEFkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGUpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIHtwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gJ2JjbWMnICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWZpZWxkIGZvcm0tZmllbGQtLWNjRXhwaXJ5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj17QWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZT8udHJhbnNsYXRlKCdwYXltZW50LmNyZWRpdF9jYXJkX2V4cGlyYXRpb25fbGFiZWwnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcHRpbWl6ZWRDaGVja291dC1mb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hhcy1pY29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC13cmFwcGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC0tZXJyb3InOiBpc0ZpZWxkSW52YWxpZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtY3NlPXtBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAge3Nob3dWYWxpZGF0aW9uSWNvbihBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFkeWVuVjJDYXJkVmFsaWRhdGlvbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv2/AdyenV2CardValidation.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv2/AdyenV2Form.tsx":
/*!****************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv2/AdyenV2Form.tsx ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-widget-integration */ \"./packages/hosted-widget-integration/src/HostedWidgetPaymentComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/contexts/checkout-context/CheckoutContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/modal/Modal.tsx\");\n\n\n\n\n\n\nconst AdyenV2Form = (_a) => {\n    var { method, containerId, initializePayment, isAccountInstrument, shouldHideInstrumentExpiryDate, validateInstrument, language, showAdditionalActionContent, cancelAdditionalActionModalFlow, additionalActionContainerId, onUnhandledError, checkoutService, checkoutState, paymentForm } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"method\", \"containerId\", \"initializePayment\", \"isAccountInstrument\", \"shouldHideInstrumentExpiryDate\", \"validateInstrument\", \"language\", \"showAdditionalActionContent\", \"cancelAdditionalActionModalFlow\", \"additionalActionContainerId\", \"onUnhandledError\", \"checkoutService\", \"checkoutState\", \"paymentForm\"]);\n    const { hidePaymentSubmitButton, disableSubmit, setFieldValue, setSubmit, setValidationSchema, } = paymentForm;\n    const customer = checkoutState.data.getCustomer();\n    const { isLoadingInstruments } = checkoutState.statuses;\n    const instruments = checkoutState.data.getInstruments(method) || [];\n    const { checkoutState: { data: { isPaymentDataRequired }, }, } = (0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__.useCheckout)();\n    const isSignedIn = customer === null || customer === void 0 ? void 0 : customer.isGuest;\n    const isInstrumentFeatureAvailable = !isSignedIn && Boolean(method.config.isVaultingEnabled);\n    const isInstrumentCardCodeRequired = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(checkoutState);\n    const isInstrumentCardNumberRequired = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(checkoutState);\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null,\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_2__[\"default\"], Object.assign({}, rest, { containerId: containerId, deinitializePayment: checkoutService.deinitializePayment, disableSubmit: disableSubmit, hideContentWhenSignedOut: true, hidePaymentSubmitButton: hidePaymentSubmitButton, initializePayment: initializePayment, instruments: instruments, isAccountInstrument: isAccountInstrument, isInstrumentCardCodeRequired: isInstrumentCardCodeRequired, isInstrumentCardNumberRequired: isInstrumentCardNumberRequired, isInstrumentFeatureAvailable: isInstrumentFeatureAvailable, isLoadingInstruments: isLoadingInstruments(), isPaymentDataRequired: isPaymentDataRequired(), isSignedIn: !isSignedIn, loadInstruments: checkoutService.loadInstruments, method: method, onUnhandledError: onUnhandledError, setFieldValue: setFieldValue, setSubmit: setSubmit, setValidationSchema: setValidationSchema, shouldHideInstrumentExpiryDate: shouldHideInstrumentExpiryDate, shouldRenderCustomInstrument: true, signOut: checkoutService.signOutCustomer, validateInstrument: validateInstrument })),\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { additionalBodyClassName: \"modal-body--center\", closeButtonLabel: language.translate('common.close_action'), isOpen: showAdditionalActionContent, onRequestClose: cancelAdditionalActionModalFlow, shouldShowCloseButton: true },\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { id: additionalActionContainerId, style: { width: '100%' } })),\n        !showAdditionalActionContent && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { id: additionalActionContainerId, style: { display: 'none' } }))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdyenV2Form);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52Mi9BZHllblYyRm9ybS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUNzRTtBQUtiO0FBSVQ7QUFJTztBQUNOO0FBNEJqRCxNQUFNLFdBQVcsR0FBNkQsQ0FBQyxFQWdCOUUsRUFBRSxFQUFFO1FBaEIwRSxFQUMzRSxNQUFNLEVBQ04sV0FBVyxFQUNYLGlCQUFpQixFQUNqQixtQkFBbUIsRUFDbkIsOEJBQThCLEVBQzlCLGtCQUFrQixFQUNsQixRQUFRLEVBQ1IsMkJBQTJCLEVBQzNCLCtCQUErQixFQUMvQiwyQkFBMkIsRUFDM0IsZ0JBQWdCLEVBQ2hCLGVBQWUsRUFDZixhQUFhLEVBQ2IsV0FBVyxPQUVkLEVBRE0sSUFBSSxxREFmb0UsaVRBZ0I5RSxDQURVO0lBRVAsTUFBTSxFQUNGLHVCQUF1QixFQUN2QixhQUFhLEVBQ2IsYUFBYSxFQUNiLFNBQVMsRUFDVCxtQkFBbUIsR0FDdEIsR0FBRyxXQUFXLENBQUM7SUFDaEIsTUFBTSxRQUFRLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNsRCxNQUFNLEVBQUUsb0JBQW9CLEVBQUUsR0FBRyxhQUFhLENBQUMsUUFBUSxDQUFDO0lBRXhELE1BQU0sV0FBVyxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUVwRSxNQUFNLEVBQ0YsYUFBYSxFQUFFLEVBQ1gsSUFBSSxFQUFFLEVBQUUscUJBQXFCLEVBQUUsR0FDbEMsR0FDSixHQUFHLDBGQUFXLEVBQUUsQ0FBQztJQUNsQixNQUFNLFVBQVUsR0FBRyxRQUFRLGFBQVIsUUFBUSx1QkFBUixRQUFRLENBQUUsT0FBTyxDQUFDO0lBQ3JDLE1BQU0sNEJBQTRCLEdBQUcsQ0FBQyxVQUFVLElBQUksT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUM3RixNQUFNLDRCQUE0QixHQUFHLGtGQUFvQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3pGLE1BQU0sOEJBQThCLEdBQUcsa0ZBQXNDLENBQUMsYUFBYSxDQUFDLENBQUM7SUFFN0YsT0FBTyxDQUNIO1FBQ0ksMkRBQUMsdUZBQTRCLG9CQUNyQixJQUFJLElBQ1IsV0FBVyxFQUFFLFdBQVcsRUFDeEIsbUJBQW1CLEVBQUUsZUFBZSxDQUFDLG1CQUFtQixFQUN4RCxhQUFhLEVBQUUsYUFBYSxFQUM1Qix3QkFBd0IsUUFDeEIsdUJBQXVCLEVBQUUsdUJBQXVCLEVBQ2hELGlCQUFpQixFQUFFLGlCQUFpQixFQUNwQyxXQUFXLEVBQUUsV0FBVyxFQUN4QixtQkFBbUIsRUFBRSxtQkFBbUIsRUFDeEMsNEJBQTRCLEVBQUUsNEJBQTRCLEVBQzFELDhCQUE4QixFQUFFLDhCQUE4QixFQUM5RCw0QkFBNEIsRUFBRSw0QkFBNEIsRUFDMUQsb0JBQW9CLEVBQUUsb0JBQW9CLEVBQUUsRUFDNUMscUJBQXFCLEVBQUUscUJBQXFCLEVBQUUsRUFDOUMsVUFBVSxFQUFFLENBQUMsVUFBVSxFQUN2QixlQUFlLEVBQUUsZUFBZSxDQUFDLGVBQWUsRUFDaEQsTUFBTSxFQUFFLE1BQU0sRUFDZCxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFDbEMsYUFBYSxFQUFFLGFBQWEsRUFDNUIsU0FBUyxFQUFFLFNBQVMsRUFDcEIsbUJBQW1CLEVBQUUsbUJBQW1CLEVBQ3hDLDhCQUE4QixFQUFFLDhCQUE4QixFQUM5RCw0QkFBNEIsUUFDNUIsT0FBTyxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQ3hDLGtCQUFrQixFQUFFLGtCQUFrQixJQUN4QztRQUNGLDJEQUFDLGdFQUFLLElBQ0YsdUJBQXVCLEVBQUMsb0JBQW9CLEVBQzVDLGdCQUFnQixFQUFFLFFBQVEsQ0FBQyxTQUFTLENBQUMscUJBQXFCLENBQUMsRUFDM0QsTUFBTSxFQUFFLDJCQUEyQixFQUNuQyxjQUFjLEVBQUUsK0JBQStCLEVBQy9DLHFCQUFxQixFQUFFLElBQUk7WUFFM0Isb0VBQUssRUFBRSxFQUFFLDJCQUEyQixFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBSSxDQUM5RDtRQUNQLENBQUMsMkJBQTJCLElBQUksQ0FDN0Isb0VBQUssRUFBRSxFQUFFLDJCQUEyQixFQUFFLEtBQUssRUFBRSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsR0FBSSxDQUN2RSxDQUNGLENBQ04sQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLFdBQVcsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjIvQWR5ZW5WMkZvcm0udHN4P2EyNjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBDYXJkSW5zdHJ1bWVudCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsnO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHR5cGUgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQge1xuICAgIHR5cGUgSG9zdGVkV2lkZ2V0Q29tcG9uZW50UHJvcHMsXG4gICAgSG9zdGVkV2lkZ2V0UGF5bWVudENvbXBvbmVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2hvc3RlZC13aWRnZXQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHtcbiAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkU2VsZWN0b3IsXG4gICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkU2VsZWN0b3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9pbnN0cnVtZW50LXV0aWxzJztcbmltcG9ydCB7XG4gICAgdHlwZSBQYXltZW50TWV0aG9kUHJvcHMsXG4gICAgdXNlQ2hlY2tvdXQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC91aSc7XG5cbmV4cG9ydCB0eXBlIEFkeWVuVjJGb3JtUHJvcHMgPSBPbWl0PFxuICAgIEhvc3RlZFdpZGdldENvbXBvbmVudFByb3BzLFxuICAgIHwgJ29uU2lnbk91dCdcbiAgICB8ICdpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlJ1xuICAgIHwgJ2luc3RydW1lbnRzJ1xuICAgIHwgJ2lzTG9hZGluZ0luc3RydW1lbnRzJ1xuICAgIHwgJ2lzUGF5bWVudERhdGFSZXF1aXJlZCdcbiAgICB8ICdpc1NpZ25lZEluJ1xuICAgIHwgJ2lzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWQnXG4gICAgfCAnaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkJ1xuICAgIHwgJ2xvYWRJbnN0cnVtZW50cydcbiAgICB8ICdzaWduT3V0J1xuICAgIHwgJ2RlaW5pdGlhbGl6ZVBheW1lbnQnXG4+ICYge1xuICAgIGNvbnRhaW5lcklkOiBzdHJpbmc7XG4gICAgaXNBY2NvdW50SW5zdHJ1bWVudDogYm9vbGVhbjtcbiAgICBzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGU6IGJvb2xlYW47XG4gICAgdmFsaWRhdGVJbnN0cnVtZW50OiAoXG4gICAgICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZDogYm9vbGVhbixcbiAgICAgICAgc2VsZWN0ZWRJbnN0cnVtZW50OiBDYXJkSW5zdHJ1bWVudCxcbiAgICApID0+IFJlYWN0Tm9kZTtcbiAgICBzaG93QWRkaXRpb25hbEFjdGlvbkNvbnRlbnQ6IGJvb2xlYW47XG4gICAgY2FuY2VsQWRkaXRpb25hbEFjdGlvbk1vZGFsRmxvdzogKCkgPT4gdm9pZDtcbiAgICBhZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWQ6IHN0cmluZztcbn07XG5cbmNvbnN0IEFkeWVuVjJGb3JtOiBGdW5jdGlvbkNvbXBvbmVudDxBZHllblYyRm9ybVByb3BzICYgUGF5bWVudE1ldGhvZFByb3BzPiA9ICh7XG4gICAgbWV0aG9kLFxuICAgIGNvbnRhaW5lcklkLFxuICAgIGluaXRpYWxpemVQYXltZW50LFxuICAgIGlzQWNjb3VudEluc3RydW1lbnQsXG4gICAgc2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlLFxuICAgIHZhbGlkYXRlSW5zdHJ1bWVudCxcbiAgICBsYW5ndWFnZSxcbiAgICBzaG93QWRkaXRpb25hbEFjdGlvbkNvbnRlbnQsXG4gICAgY2FuY2VsQWRkaXRpb25hbEFjdGlvbk1vZGFsRmxvdyxcbiAgICBhZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWQsXG4gICAgb25VbmhhbmRsZWRFcnJvcixcbiAgICBjaGVja291dFNlcnZpY2UsXG4gICAgY2hlY2tvdXRTdGF0ZSxcbiAgICBwYXltZW50Rm9ybSxcbiAgICAuLi5yZXN0XG59KSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgICBoaWRlUGF5bWVudFN1Ym1pdEJ1dHRvbixcbiAgICAgICAgZGlzYWJsZVN1Ym1pdCxcbiAgICAgICAgc2V0RmllbGRWYWx1ZSxcbiAgICAgICAgc2V0U3VibWl0LFxuICAgICAgICBzZXRWYWxpZGF0aW9uU2NoZW1hLFxuICAgIH0gPSBwYXltZW50Rm9ybTtcbiAgICBjb25zdCBjdXN0b21lciA9IGNoZWNrb3V0U3RhdGUuZGF0YS5nZXRDdXN0b21lcigpO1xuICAgIGNvbnN0IHsgaXNMb2FkaW5nSW5zdHJ1bWVudHMgfSA9IGNoZWNrb3V0U3RhdGUuc3RhdHVzZXM7XG5cbiAgICBjb25zdCBpbnN0cnVtZW50cyA9IGNoZWNrb3V0U3RhdGUuZGF0YS5nZXRJbnN0cnVtZW50cyhtZXRob2QpIHx8IFtdO1xuXG4gICAgY29uc3Qge1xuICAgICAgICBjaGVja291dFN0YXRlOiB7XG4gICAgICAgICAgICBkYXRhOiB7IGlzUGF5bWVudERhdGFSZXF1aXJlZCB9LFxuICAgICAgICB9LFxuICAgIH0gPSB1c2VDaGVja291dCgpO1xuICAgIGNvbnN0IGlzU2lnbmVkSW4gPSBjdXN0b21lcj8uaXNHdWVzdDtcbiAgICBjb25zdCBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlID0gIWlzU2lnbmVkSW4gJiYgQm9vbGVhbihtZXRob2QuY29uZmlnLmlzVmF1bHRpbmdFbmFibGVkKTtcbiAgICBjb25zdCBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkID0gaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpO1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCA9IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPD5cbiAgICAgICAgICAgIDxIb3N0ZWRXaWRnZXRQYXltZW50Q29tcG9uZW50XG4gICAgICAgICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgICAgICAgICAgY29udGFpbmVySWQ9e2NvbnRhaW5lcklkfVxuICAgICAgICAgICAgICAgIGRlaW5pdGlhbGl6ZVBheW1lbnQ9e2NoZWNrb3V0U2VydmljZS5kZWluaXRpYWxpemVQYXltZW50fVxuICAgICAgICAgICAgICAgIGRpc2FibGVTdWJtaXQ9e2Rpc2FibGVTdWJtaXR9XG4gICAgICAgICAgICAgICAgaGlkZUNvbnRlbnRXaGVuU2lnbmVkT3V0XG4gICAgICAgICAgICAgICAgaGlkZVBheW1lbnRTdWJtaXRCdXR0b249e2hpZGVQYXltZW50U3VibWl0QnV0dG9ufVxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVQYXltZW50PXtpbml0aWFsaXplUGF5bWVudH1cbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50cz17aW5zdHJ1bWVudHN9XG4gICAgICAgICAgICAgICAgaXNBY2NvdW50SW5zdHJ1bWVudD17aXNBY2NvdW50SW5zdHJ1bWVudH1cbiAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkPXtpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkfVxuICAgICAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZD17aXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkfVxuICAgICAgICAgICAgICAgIGlzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGU9e2lzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGV9XG4gICAgICAgICAgICAgICAgaXNMb2FkaW5nSW5zdHJ1bWVudHM9e2lzTG9hZGluZ0luc3RydW1lbnRzKCl9XG4gICAgICAgICAgICAgICAgaXNQYXltZW50RGF0YVJlcXVpcmVkPXtpc1BheW1lbnREYXRhUmVxdWlyZWQoKX1cbiAgICAgICAgICAgICAgICBpc1NpZ25lZEluPXshaXNTaWduZWRJbn1cbiAgICAgICAgICAgICAgICBsb2FkSW5zdHJ1bWVudHM9e2NoZWNrb3V0U2VydmljZS5sb2FkSW5zdHJ1bWVudHN9XG4gICAgICAgICAgICAgICAgbWV0aG9kPXttZXRob2R9XG4gICAgICAgICAgICAgICAgb25VbmhhbmRsZWRFcnJvcj17b25VbmhhbmRsZWRFcnJvcn1cbiAgICAgICAgICAgICAgICBzZXRGaWVsZFZhbHVlPXtzZXRGaWVsZFZhbHVlfVxuICAgICAgICAgICAgICAgIHNldFN1Ym1pdD17c2V0U3VibWl0fVxuICAgICAgICAgICAgICAgIHNldFZhbGlkYXRpb25TY2hlbWE9e3NldFZhbGlkYXRpb25TY2hlbWF9XG4gICAgICAgICAgICAgICAgc2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlPXtzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGV9XG4gICAgICAgICAgICAgICAgc2hvdWxkUmVuZGVyQ3VzdG9tSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgIHNpZ25PdXQ9e2NoZWNrb3V0U2VydmljZS5zaWduT3V0Q3VzdG9tZXJ9XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVJbnN0cnVtZW50PXt2YWxpZGF0ZUluc3RydW1lbnR9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPE1vZGFsXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbEJvZHlDbGFzc05hbWU9XCJtb2RhbC1ib2R5LS1jZW50ZXJcIlxuICAgICAgICAgICAgICAgIGNsb3NlQnV0dG9uTGFiZWw9e2xhbmd1YWdlLnRyYW5zbGF0ZSgnY29tbW9uLmNsb3NlX2FjdGlvbicpfVxuICAgICAgICAgICAgICAgIGlzT3Blbj17c2hvd0FkZGl0aW9uYWxBY3Rpb25Db250ZW50fVxuICAgICAgICAgICAgICAgIG9uUmVxdWVzdENsb3NlPXtjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93fVxuICAgICAgICAgICAgICAgIHNob3VsZFNob3dDbG9zZUJ1dHRvbj17dHJ1ZX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPXthZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWR9IHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0gLz5cbiAgICAgICAgICAgIDwvTW9kYWw+XG4gICAgICAgICAgICB7IXNob3dBZGRpdGlvbmFsQWN0aW9uQ29udGVudCAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBpZD17YWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkfSBzdHlsZT17eyBkaXNwbGF5OiAnbm9uZScgfX0gLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgIDwvPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBZHllblYyRm9ybTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv2/AdyenV2Form.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv2/AdyenV2PaymentMethod.tsx":
/*!*************************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv2/AdyenV2PaymentMethod.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdyenV2PaymentMethodType: () => (/* binding */ AdyenV2PaymentMethodType),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_adyen__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/adyen */ \"../checkout-sdk-js/dist/esm/integrations/adyen.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/locale */ \"./packages/locale/src/LocaleProvider.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/contexts/checkout-context/CheckoutContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/contexts/payment-form-context/PaymentFormContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/form/contexts/FormContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/loading/LoadingOverlay.tsx\");\n/* harmony import */ var _AdyenV2CardValidation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./AdyenV2CardValidation */ \"./packages/adyen-integration/src/adyenv2/AdyenV2CardValidation.tsx\");\n/* harmony import */ var _AdyenV2Form__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./AdyenV2Form */ \"./packages/adyen-integration/src/adyenv2/AdyenV2Form.tsx\");\n\n\n\n\n\n\n\n\nvar AdyenV2PaymentMethodType;\n(function (AdyenV2PaymentMethodType) {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV2PaymentMethodType[\"scheme\"] = \"scheme\";\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV2PaymentMethodType[\"bcmc\"] = \"bcmc\";\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV2PaymentMethodType[\"ideal\"] = \"ideal\";\n})(AdyenV2PaymentMethodType || (AdyenV2PaymentMethodType = {}));\nconst AdyenV2PaymentMethod = (_a) => {\n    var { checkoutService, checkoutState, paymentForm, method, language } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"checkoutService\", \"checkoutState\", \"paymentForm\", \"method\", \"language\"]);\n    const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)({\n        shouldShowModal: true,\n    });\n    const [showAdditionalActionContent, setShowAdditionalActionContent] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [cardValidationState, setCardValidationState] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n    const containerId = `adyen-${method.id}-component-field`;\n    const additionalActionContainerId = `adyen-${method.id}-additional-action-component-field`;\n    const cardVerificationContainerId = `adyen-${method.id}-tsv-component-field`;\n    const threeDS2ContainerId = `adyen-${method.id}-additional-action-component-field`;\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n    const component = method.id;\n    const shouldHideInstrumentExpiryDate = component === AdyenV2PaymentMethodType.bcmc;\n    const onBeforeLoad = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((shopperInteraction) => {\n        ref.current.shouldShowModal = shopperInteraction;\n        setShowAdditionalActionContent(ref.current.shouldShowModal);\n    }, []);\n    const onComplete = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setShowAdditionalActionContent(false);\n        ref.current.cancelAdditionalAction = undefined;\n    }, []);\n    const onLoad = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((cancel) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        ref.current.cancelAdditionalAction = cancel;\n    }, []);\n    const cancelAdditionalActionModalFlow = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setShowAdditionalActionContent(false);\n        if (ref.current.cancelAdditionalAction) {\n            ref.current.cancelAdditionalAction();\n            ref.current.cancelAdditionalAction = undefined;\n        }\n    }, []);\n    const initializeAdyenPayment = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((options, selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        const selectedInstrumentId = selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken;\n        const adyenOptions = {\n            [AdyenV2PaymentMethodType.scheme]: {\n                hasHolderName: true,\n                holderNameRequired: true,\n            },\n            [AdyenV2PaymentMethodType.bcmc]: {\n                hasHolderName: false,\n            },\n            [AdyenV2PaymentMethodType.ideal]: {\n                showImage: true,\n            },\n        };\n        return checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_adyen__WEBPACK_IMPORTED_MODULE_1__.createAdyenV2PaymentStrategy], adyenv2: {\n                cardVerificationContainerId: selectedInstrumentId && cardVerificationContainerId,\n                containerId,\n                hasVaultedInstruments: !!selectedInstrumentId,\n                options: adyenOptions[component],\n                threeDS2ContainerId,\n                additionalActionOptions: {\n                    widgetSize: '05',\n                    containerId: additionalActionContainerId,\n                    onBeforeLoad,\n                    onComplete,\n                    onLoad,\n                },\n                shouldShowNumberField: ref.current.shouldShowNumberField,\n                validateCardFields: (state) => {\n                    setCardValidationState(state);\n                },\n            } }));\n    }), [\n        component,\n        cardVerificationContainerId,\n        containerId,\n        additionalActionContainerId,\n        threeDS2ContainerId,\n        onBeforeLoad,\n        onComplete,\n        onLoad,\n        checkoutService,\n    ]);\n    const validateInstrument = (shouldShowNumberField, selectedInstrument) => {\n        ref.current.shouldShowNumberField = shouldShowNumberField;\n        return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_AdyenV2CardValidation__WEBPACK_IMPORTED_MODULE_9__[\"default\"], { cardValidationState: cardValidationState, language: language, paymentMethod: method, selectedInstrument: selectedInstrument, shouldShowNumberField: shouldShowNumberField, verificationFieldsContainerId: cardVerificationContainerId }));\n    };\n    const isAccountInstrument = () => {\n        switch (method.method) {\n            case 'directEbanking':\n            case 'giropay':\n            case 'ideal':\n            case 'sepadirectdebit':\n                return true;\n            default:\n                return false;\n        }\n    };\n    const isLoading = checkoutState.statuses.isLoadingInstruments() ||\n        checkoutState.statuses.isLoadingPaymentMethod(method.id);\n    const formContextProps = {\n        isSubmitted: paymentForm.isSubmitted(),\n        setSubmitted: paymentForm.setSubmitted,\n    };\n    return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].Provider, { value: formContextProps },\n        react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Provider, { value: { checkoutState, checkoutService } },\n            react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_3__[\"default\"], { checkoutService: checkoutService },\n                react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__.PaymentFormContext.Provider, { value: { paymentForm } },\n                    react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__[\"default\"], { hideContentWhenLoading: true, isLoading: isLoading },\n                        react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_AdyenV2Form__WEBPACK_IMPORTED_MODULE_10__[\"default\"], Object.assign({}, rest, { additionalActionContainerId: additionalActionContainerId, cancelAdditionalActionModalFlow: cancelAdditionalActionModalFlow, checkoutService: checkoutService, checkoutState: checkoutState, containerId: containerId, initializePayment: initializeAdyenPayment, isAccountInstrument: isAccountInstrument(), language: language, method: method, paymentForm: paymentForm, shouldHideInstrumentExpiryDate: shouldHideInstrumentExpiryDate, showAdditionalActionContent: showAdditionalActionContent, validateInstrument: validateInstrument }))))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(AdyenV2PaymentMethod, [{ gateway: 'adyenv2' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52Mi9BZHllblYyUGF5bWVudE1ldGhvZC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTzRGO0FBQ1A7QUFHdkI7QUFPUDtBQUNnQjtBQUVYO0FBQ3BCO0FBUXhDLElBQVksd0JBT1g7QUFQRCxXQUFZLHdCQUF3QjtJQUNoQyxnRUFBZ0U7SUFDaEUsNkNBQWlCO0lBQ2pCLGdFQUFnRTtJQUNoRSx5Q0FBYTtJQUNiLGdFQUFnRTtJQUNoRSwyQ0FBZTtBQUNuQixDQUFDLEVBUFcsd0JBQXdCLEtBQXhCLHdCQUF3QixRQU9uQztBQVFELE1BQU0sb0JBQW9CLEdBQTBDLENBQUMsRUFPcEUsRUFBRSxFQUFFO1FBUGdFLEVBQ2pFLGVBQWUsRUFDZixhQUFhLEVBQ2IsV0FBVyxFQUNYLE1BQU0sRUFDTixRQUFRLE9BRVgsRUFETSxJQUFJLHFEQU4wRCx5RUFPcEUsQ0FEVTtJQUVQLE1BQU0sR0FBRyxHQUFHLDZDQUFNLENBQXdCO1FBQ3RDLGVBQWUsRUFBRSxJQUFJO0tBQ3hCLENBQUMsQ0FBQztJQUNILE1BQU0sQ0FBQywyQkFBMkIsRUFBRSw4QkFBOEIsQ0FBQyxHQUFHLCtDQUFRLENBQVUsS0FBSyxDQUFDLENBQUM7SUFDL0YsTUFBTSxDQUFDLG1CQUFtQixFQUFFLHNCQUFzQixDQUFDLEdBQUcsK0NBQVEsRUFBd0IsQ0FBQztJQUN2RixNQUFNLFdBQVcsR0FBRyxTQUFTLE1BQU0sQ0FBQyxFQUFFLGtCQUFrQixDQUFDO0lBQ3pELE1BQU0sMkJBQTJCLEdBQUcsU0FBUyxNQUFNLENBQUMsRUFBRSxvQ0FBb0MsQ0FBQztJQUMzRixNQUFNLDJCQUEyQixHQUFHLFNBQVMsTUFBTSxDQUFDLEVBQUUsc0JBQXNCLENBQUM7SUFDN0UsTUFBTSxtQkFBbUIsR0FBRyxTQUFTLE1BQU0sQ0FBQyxFQUFFLG9DQUFvQyxDQUFDO0lBQ25GLHlFQUF5RTtJQUN6RSxNQUFNLFNBQVMsR0FBRyxNQUFN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O1lBQy9ELDJEQUFDLG9FQUFjLElBQUMsZUFBZSxFQUFFLGVBQWU7Z0JBQzVDLDJEQUFDLDZGQUFrQixDQUFDLFFBQVEsSUFBQyxLQUFLLEVBQUUsRUFBRSxXQUFXLEVBQUU7b0JBQy9DLDJEQUFDLGdFQUFjLElBQUMsc0JBQXNCLFFBQUMsU0FBUyxFQUFFLFNBQVM7d0JBQ3ZELDJEQUFDLHFEQUFXLG9CQUNKLElBQUksSUFDUiwyQkFBMkIsRUFBRSwyQkFBMkIsRUFDeEQsK0JBQStCLEVBQUUsK0JBQStCLEVBQ2hFLGVBQWUsRUFBRSxlQUFlLEVBQ2hDLGFBQWEsRUFBRSxhQUFhLEVBQzVCLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLGlCQUFpQixFQUFFLHNCQUFzQixFQUN6QyxtQkFBbUIsRUFBRSxtQkFBbUIsRUFBRSxFQUMxQyxRQUFRLEVBQUUsUUFBUSxFQUNsQixNQUFNLEVBQUUsTUFBTSxFQUNkLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLDhCQUE4QixFQUFFLDhCQUE4QixFQUM5RCwyQkFBMkIsRUFBRSwyQkFBMkIsRUFDeEQsa0JBQWtCLEVBQUUsa0JBQWtCLElBQ3hDLENBQ1csQ0FDUyxDQUNqQixDQUNNLENBQ1IsQ0FDMUIsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLHlGQUFxQixDQUNoQyxvQkFBb0IsRUFDcEIsQ0FBQyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUMzQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52Mi9BZHllblYyUGF5bWVudE1ldGhvZC50c3g/MDhmYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIHR5cGUgQWR5ZW5DcmVkaXRDYXJkQ29tcG9uZW50T3B0aW9ucyxcbiAgICB0eXBlIEFkeWVuSWRlYWxDb21wb25lbnRPcHRpb25zLFxuICAgIHR5cGUgQWR5ZW5WYWxpZGF0aW9uU3RhdGUsXG4gICAgdHlwZSBDYXJkSW5zdHJ1bWVudCxcbiAgICB0eXBlIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgeyBjcmVhdGVBZHllblYyUGF5bWVudFN0cmF0ZWd5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9pbnRlZ3JhdGlvbnMvYWR5ZW4nO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyB0eXBlIEhvc3RlZFdpZGdldENvbXBvbmVudFByb3BzIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2hvc3RlZC13aWRnZXQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHsgTG9jYWxlUHJvdmlkZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvbG9jYWxlJztcbmltcG9ydCB7XG4gICAgQ2hlY2tvdXRDb250ZXh0LFxuICAgIFBheW1lbnRGb3JtQ29udGV4dCxcbiAgICB0eXBlIFBheW1lbnRNZXRob2RQcm9wcyxcbiAgICB0eXBlIFBheW1lbnRNZXRob2RSZXNvbHZlSWQsXG4gICAgdG9SZXNvbHZhYmxlQ29tcG9uZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgRm9ybUNvbnRleHQsIExvYWRpbmdPdmVybGF5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3VpJztcblxuaW1wb3J0IEFkeWVuVjJDYXJkVmFsaWRhdGlvbiBmcm9tICcuL0FkeWVuVjJDYXJkVmFsaWRhdGlvbic7XG5pbXBvcnQgQWR5ZW5WMkZvcm0gZnJvbSAnLi9BZHllblYyRm9ybSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5PcHRpb25zIHtcbiAgICBzY2hlbWU6IEFkeWVuQ3JlZGl0Q2FyZENvbXBvbmVudE9wdGlvbnM7XG4gICAgYmNtYzogQWR5ZW5DcmVkaXRDYXJkQ29tcG9uZW50T3B0aW9ucztcbiAgICBpZGVhbDogQWR5ZW5JZGVhbENvbXBvbmVudE9wdGlvbnM7XG59XG5cbmV4cG9ydCBlbnVtIEFkeWVuVjJQYXltZW50TWV0aG9kVHlwZSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICAgIHNjaGVtZSA9ICdzY2hlbWUnLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgICBiY21jID0gJ2JjbWMnLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgICBpZGVhbCA9ICdpZGVhbCcsXG59XG5cbmludGVyZmFjZSBBZHllblBheW1lbnRNZXRob2RSZWYge1xuICAgIHNob3VsZFNob3dNb2RhbDogYm9vbGVhbjtcbiAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ/OiBib29sZWFuO1xuICAgIGNhbmNlbEFkZGl0aW9uYWxBY3Rpb24/KCk6IHZvaWQ7XG59XG5cbmNvbnN0IEFkeWVuVjJQYXltZW50TWV0aG9kOiBGdW5jdGlvbkNvbXBvbmVudDxQYXltZW50TWV0aG9kUHJvcHM+ID0gKHtcbiAgICBjaGVja291dFNlcnZpY2UsXG4gICAgY2hlY2tvdXRTdGF0ZSxcbiAgICBwYXltZW50Rm9ybSxcbiAgICBtZXRob2QsXG4gICAgbGFuZ3VhZ2UsXG4gICAgLi4ucmVzdFxufSkgPT4ge1xuICAgIGNvbnN0IHJlZiA9IHVzZVJlZjxBZHllblBheW1lbnRNZXRob2RSZWY+KHtcbiAgICAgICAgc2hvdWxkU2hvd01vZGFsOiB0cnVlLFxuICAgIH0pO1xuICAgIGNvbnN0IFtzaG93QWRkaXRpb25hbEFjdGlvbkNvbnRlbnQsIHNldFNob3dBZGRpdGlvbmFsQWN0aW9uQ29udGVudF0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gICAgY29uc3QgW2NhcmRWYWxpZGF0aW9uU3RhdGUsIHNldENhcmRWYWxpZGF0aW9uU3RhdGVdID0gdXNlU3RhdGU8QWR5ZW5WYWxpZGF0aW9uU3RhdGU+KCk7XG4gICAgY29uc3QgY29udGFpbmVySWQgPSBgYWR5ZW4tJHttZXRob2QuaWR9LWNvbXBvbmVudC1maWVsZGA7XG4gICAgY29uc3QgYWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkID0gYGFkeWVuLSR7bWV0aG9kLmlkfS1hZGRpdGlvbmFsLWFjdGlvbi1jb21wb25lbnQtZmllbGRgO1xuICAgIGNvbnN0IGNhcmRWZXJpZmljYXRpb25Db250YWluZXJJZCA9IGBhZHllbi0ke21ldGhvZC5pZH0tdHN2LWNvbXBvbmVudC1maWVsZGA7XG4gICAgY29uc3QgdGhyZWVEUzJDb250YWluZXJJZCA9IGBhZHllbi0ke21ldGhvZC5pZH0tYWRkaXRpb25hbC1hY3Rpb24tY29tcG9uZW50LWZpZWxkYDtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zXG4gICAgY29uc3QgY29tcG9uZW50ID0gbWV0aG9kLmlkIGFzIEFkeWVuVjJQYXltZW50TWV0aG9kVHlwZTtcbiAgICBjb25zdCBzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGUgPSBjb21wb25lbnQgPT09IEFkeWVuVjJQYXltZW50TWV0aG9kVHlwZS5iY21jO1xuXG4gICAgY29uc3Qgb25CZWZvcmVMb2FkID0gdXNlQ2FsbGJhY2soKHNob3BwZXJJbnRlcmFjdGlvbjogYm9vbGVhbikgPT4ge1xuICAgICAgICByZWYuY3VycmVudC5zaG91bGRTaG93TW9kYWwgPSBzaG9wcGVySW50ZXJhY3Rpb247XG5cbiAgICAgICAgc2V0U2hvd0FkZGl0aW9uYWxBY3Rpb25Db250ZW50KHJlZi5jdXJyZW50LnNob3VsZFNob3dNb2RhbCk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3Qgb25Db21wbGV0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgc2V0U2hvd0FkZGl0aW9uYWxBY3Rpb25Db250ZW50KGZhbHNlKTtcbiAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBvbkxvYWQgPSB1c2VDYWxsYmFjaygoY2FuY2VsPzogYW55KSA9PiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbiA9IGNhbmNlbDtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBzZXRTaG93QWRkaXRpb25hbEFjdGlvbkNvbnRlbnQoZmFsc2UpO1xuXG4gICAgICAgIGlmIChyZWYuY3VycmVudC5jYW5jZWxBZGRpdGlvbmFsQWN0aW9uKSB7XG4gICAgICAgICAgICByZWYuY3VycmVudC5jYW5jZWxBZGRpdGlvbmFsQWN0aW9uKCk7XG4gICAgICAgICAgICByZWYuY3VycmVudC5jYW5jZWxBZGRpdGlvbmFsQWN0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgaW5pdGlhbGl6ZUFkeWVuUGF5bWVudDogSG9zdGVkV2lkZ2V0Q29tcG9uZW50UHJvcHNbJ2luaXRpYWxpemVQYXltZW50J10gPSB1c2VDYWxsYmFjayhcbiAgICAgICAgYXN5bmMgKG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucywgc2VsZWN0ZWRJbnN0cnVtZW50OiBDYXJkSW5zdHJ1bWVudCkgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS1jb25kaXRpb25cbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5zdHJ1bWVudElkID0gc2VsZWN0ZWRJbnN0cnVtZW50Py5iaWdwYXlUb2tlbjtcbiAgICAgICAgICAgIGNvbnN0IGFkeWVuT3B0aW9uczogQWR5ZW5PcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIFtBZHllblYyUGF5bWVudE1ldGhvZFR5cGUuc2NoZW1lXToge1xuICAgICAgICAgICAgICAgICAgICBoYXNIb2xkZXJOYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBob2xkZXJOYW1lUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbQWR5ZW5WMlBheW1lbnRNZXRob2RUeXBlLmJjbWNdOiB7XG4gICAgICAgICAgICAgICAgICAgIGhhc0hvbGRlck5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW0FkeWVuVjJQYXltZW50TWV0aG9kVHlwZS5pZGVhbF06IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0ltYWdlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gY2hlY2tvdXRTZXJ2aWNlLmluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGludGVncmF0aW9uczogW2NyZWF0ZUFkeWVuVjJQYXltZW50U3RyYXRlZ3ldLFxuICAgICAgICAgICAgICAgIGFkeWVudjI6IHtcbiAgICAgICAgICAgICAgICAgICAgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbnN0cnVtZW50SWQgJiYgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgaGFzVmF1bHRlZEluc3RydW1lbnRzOiAhIXNlbGVjdGVkSW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBhZHllbk9wdGlvbnNbY29tcG9uZW50XSxcbiAgICAgICAgICAgICAgICAgICAgdGhyZWVEUzJDb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbk9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldFNpemU6ICcwNScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogYWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25CZWZvcmVMb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTG9hZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2hvd051bWJlckZpZWxkOiByZWYuY3VycmVudC5zaG91bGRTaG93TnVtYmVyRmllbGQsXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQ2FyZEZpZWxkczogKHN0YXRlOiBBZHllblZhbGlkYXRpb25TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q2FyZFZhbGlkYXRpb25TdGF0ZShzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBbXG4gICAgICAgICAgICBjb21wb25lbnQsXG4gICAgICAgICAgICBjYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWQsXG4gICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZCxcbiAgICAgICAgICAgIHRocmVlRFMyQ29udGFpbmVySWQsXG4gICAgICAgICAgICBvbkJlZm9yZUxvYWQsXG4gICAgICAgICAgICBvbkNvbXBsZXRlLFxuICAgICAgICAgICAgb25Mb2FkLFxuICAgICAgICAgICAgY2hlY2tvdXRTZXJ2aWNlLFxuICAgICAgICBdLFxuICAgICk7XG5cbiAgICBjb25zdCB2YWxpZGF0ZUluc3RydW1lbnQgPSAoXG4gICAgICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZDogYm9vbGVhbixcbiAgICAgICAgc2VsZWN0ZWRJbnN0cnVtZW50OiBDYXJkSW5zdHJ1bWVudCxcbiAgICApID0+IHtcbiAgICAgICAgcmVmLmN1cnJlbnQuc2hvdWxkU2hvd051bWJlckZpZWxkID0gc2hvdWxkU2hvd051bWJlckZpZWxkO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8QWR5ZW5WMkNhcmRWYWxpZGF0aW9uXG4gICAgICAgICAgICAgICAgY2FyZFZhbGlkYXRpb25TdGF0ZT17Y2FyZFZhbGlkYXRpb25TdGF0ZX1cbiAgICAgICAgICAgICAgICBsYW5ndWFnZT17bGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZD17bWV0aG9kfVxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5zdHJ1bWVudD17c2VsZWN0ZWRJbnN0cnVtZW50fVxuICAgICAgICAgICAgICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZD17c2hvdWxkU2hvd051bWJlckZpZWxkfVxuICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbkZpZWxkc0NvbnRhaW5lcklkPXtjYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWR9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH07XG5cbiAgICBjb25zdCBpc0FjY291bnRJbnN0cnVtZW50ID0gKCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKG1ldGhvZC5tZXRob2QpIHtcbiAgICAgICAgICAgIGNhc2UgJ2RpcmVjdEViYW5raW5nJzpcbiAgICAgICAgICAgIGNhc2UgJ2dpcm9wYXknOlxuICAgICAgICAgICAgY2FzZSAnaWRlYWwnOlxuICAgICAgICAgICAgY2FzZSAnc2VwYWRpcmVjdGRlYml0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgaXNMb2FkaW5nID1cbiAgICAgICAgY2hlY2tvdXRTdGF0ZS5zdGF0dXNlcy5pc0xvYWRpbmdJbnN0cnVtZW50cygpIHx8XG4gICAgICAgIGNoZWNrb3V0U3RhdGUuc3RhdHVzZXMuaXNMb2FkaW5nUGF5bWVudE1ldGhvZChtZXRob2QuaWQpO1xuXG4gICAgY29uc3QgZm9ybUNvbnRleHRQcm9wcyA9IHtcbiAgICAgICAgaXNTdWJtaXR0ZWQ6IHBheW1lbnRGb3JtLmlzU3VibWl0dGVkKCksXG4gICAgICAgIHNldFN1Ym1pdHRlZDogcGF5bWVudEZvcm0uc2V0U3VibWl0dGVkLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8Rm9ybUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Zvcm1Db250ZXh0UHJvcHN9PlxuICAgICAgICAgICAgPENoZWNrb3V0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBjaGVja291dFN0YXRlLCBjaGVja291dFNlcnZpY2UgfX0+XG4gICAgICAgICAgICAgICAgPExvY2FsZVByb3ZpZGVyIGNoZWNrb3V0U2VydmljZT17Y2hlY2tvdXRTZXJ2aWNlfT5cbiAgICAgICAgICAgICAgICAgICAgPFBheW1lbnRGb3JtQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBwYXltZW50Rm9ybSB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMb2FkaW5nT3ZlcmxheSBoaWRlQ29udGVudFdoZW5Mb2FkaW5nIGlzTG9hZGluZz17aXNMb2FkaW5nfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWR5ZW5WMkZvcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZD17YWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93PXtjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja291dFNlcnZpY2U9e2NoZWNrb3V0U2VydmljZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tvdXRTdGF0ZT17Y2hlY2tvdXRTdGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ9e2NvbnRhaW5lcklkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplUGF5bWVudD17aW5pdGlhbGl6ZUFkeWVuUGF5bWVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBY2NvdW50SW5zdHJ1bWVudD17aXNBY2NvdW50SW5zdHJ1bWVudCgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZT17bGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZD17bWV0aG9kfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50Rm9ybT17cGF5bWVudEZvcm19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZEhpZGVJbnN0cnVtZW50RXhwaXJ5RGF0ZT17c2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWRkaXRpb25hbEFjdGlvbkNvbnRlbnQ9e3Nob3dBZGRpdGlvbmFsQWN0aW9uQ29udGVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVJbnN0cnVtZW50PXt2YWxpZGF0ZUluc3RydW1lbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvTG9hZGluZ092ZXJsYXk+XG4gICAgICAgICAgICAgICAgICAgIDwvUGF5bWVudEZvcm1Db250ZXh0LlByb3ZpZGVyPlxuICAgICAgICAgICAgICAgIDwvTG9jYWxlUHJvdmlkZXI+XG4gICAgICAgICAgICA8L0NoZWNrb3V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgPC9Gb3JtQ29udGV4dC5Qcm92aWRlcj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlQ29tcG9uZW50PFBheW1lbnRNZXRob2RQcm9wcywgUGF5bWVudE1ldGhvZFJlc29sdmVJZD4oXG4gICAgQWR5ZW5WMlBheW1lbnRNZXRob2QsXG4gICAgW3sgZ2F0ZXdheTogJ2FkeWVudjInIH1dLFxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv2/AdyenV2PaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv3/AdyenV3CardValidation.tsx":
/*!**************************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv3/AdyenV3CardValidation.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classnames */ \"./node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/locale */ \"./packages/locale/src/TranslatedString.tsx\");\n\n\n\nvar AdyenCardFields;\n(function (AdyenCardFields) {\n    AdyenCardFields[\"CardNumber\"] = \"encryptedCardNumber\";\n    AdyenCardFields[\"SecurityCode\"] = \"encryptedSecurityCode\";\n    AdyenCardFields[\"ExpiryDate\"] = \"encryptedExpiryDate\";\n})(AdyenCardFields || (AdyenCardFields = {}));\nconst getInitialValidationState = ({ shouldShowNumberField, method, }) => {\n    const validationState = {};\n    if (shouldShowNumberField) {\n        validationState[AdyenCardFields.CardNumber] = { valid: false };\n    }\n    if (method === 'scheme') {\n        validationState[AdyenCardFields.SecurityCode] = { valid: false };\n    }\n    if (method === 'bcmc') {\n        validationState[AdyenCardFields.ExpiryDate] = { valid: false };\n    }\n    return validationState;\n};\nconst isFieldInvalid = (fieldKey, fieldsValidation) => !!fieldsValidation[fieldKey] && !fieldsValidation[fieldKey].valid;\nconst AdyenV3CardValidation = ({ verificationFieldsContainerId, shouldShowNumberField, selectedInstrument, paymentMethod, cardValidationState, }) => {\n    const [fieldsValidation, setFieldsValidation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }));\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        var _a;\n        if (!cardValidationState) {\n            return;\n        }\n        if (cardValidationState.fieldType &&\n            (!fieldsValidation[cardValidationState.fieldType] ||\n                ((_a = fieldsValidation[cardValidationState.fieldType]) === null || _a === void 0 ? void 0 : _a.valid) !==\n                    cardValidationState.valid)) {\n            if (cardValidationState.fieldType === AdyenCardFields.CardNumber) {\n                setFieldsValidation(Object.assign(Object.assign({}, fieldsValidation), { [AdyenCardFields.CardNumber]: cardValidationState.endDigits !== (selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.last4)\n                        ? Object.assign(Object.assign({}, cardValidationState), { valid: false }) : Object.assign({}, cardValidationState) }));\n            }\n            else {\n                setFieldsValidation(Object.assign(Object.assign({}, fieldsValidation), { [cardValidationState.fieldType]: cardValidationState }));\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [cardValidationState, setFieldsValidation, selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.last4]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        if (selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken) {\n            setFieldsValidation(getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }));\n        }\n    }, [selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken, paymentMethod.method, shouldShowNumberField]);\n    const showValidationIcon = (key) => isFieldInvalid(key, fieldsValidation) && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", { className: \"adyen-checkout-input__inline-validation adyen-checkout-input__inline-validation--invalid\", style: { transform: 'none', right: '20px' } },\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"img\", { alt: \"adyen-checkout-icon\", className: \"adyen-checkout__icon\", src: \"https://checkoutshopper-test.adyen.com/checkoutshopper/images/components/field_error.svg\" })));\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null,\n        shouldShowNumberField && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"p\", null,\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"strong\", null,\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.instrument_trusted_shipping_address_title_text\" })),\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"br\", null),\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.instrument_trusted_shipping_address_text\" }))),\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-ccFields\", id: verificationFieldsContainerId },\n            shouldShowNumberField && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-field', 'form-field--ccNumber', {\n                    'form-field--ccNumber--hasExpiryDate': paymentMethod.method === 'bcmc',\n                }, \n                // This div is hiding by CSS because there is an Adyen library in\n                // checkout-sdk which mounts verification fields and if is removed with JS this mounting event will be thrown an error\n                { 'form-field-ccNumber--hide': !shouldShowNumberField }) },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.CardNumber },\n                    react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.credit_card_number_label\" })),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.CardNumber, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.CardNumber, id: AdyenCardFields.CardNumber }),\n                showValidationIcon(AdyenCardFields.CardNumber))),\n            paymentMethod.method === 'scheme' && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-field form-ccFields-field--ccCvv\" },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.SecurityCode },\n                    react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.credit_card_cvv_label\" })),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.SecurityCode, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.SecurityCode, id: AdyenCardFields.SecurityCode }),\n                showValidationIcon(AdyenCardFields.SecurityCode))),\n            paymentMethod.method === 'bcmc' && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-field form-field--ccExpiry\" },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.ExpiryDate },\n                    react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.credit_card_expiration_label\" })),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.ExpiryDate, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.ExpiryDate, id: AdyenCardFields.ExpiryDate }),\n                showValidationIcon(AdyenCardFields.ExpiryDate))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdyenV3CardValidation);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52My9BZHllblYzQ2FyZFZhbGlkYXRpb24udHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUtvQztBQUN1QztBQUVYO0FBSWhFLElBQUssZUFJSjtBQUpELFdBQUssZUFBZTtJQUNoQixxREFBa0M7SUFDbEMseURBQXNDO0lBQ3RDLHFEQUFrQztBQUN0QyxDQUFDLEVBSkksZUFBZSxLQUFmLGVBQWUsUUFJbkI7QUFVRCxNQUFNLHlCQUF5QixHQUFHLENBQUMsRUFDL0IscUJBQXFCLEVBQ3JCLE1BQU0sR0FJVCxFQUFFLEVBQUU7SUFDRCxNQUFNLGVBQWUsR0FBcUIsRUFBRSxDQUFDO0lBRTdDLElBQUkscUJBQXFCLEVBQUUsQ0FBQztRQUN4QixlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ25FLENBQUM7SUFFRCxJQUFJLE1BQU0sS0FBSyxRQUFRLEVBQUUsQ0FBQztRQUN0QixlQUFlLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ3JFLENBQUM7SUFFRCxJQUFJLE1BQU0sS0FBSyxNQUFNLEVBQUUsQ0FBQztRQUNwQixlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ25FLENBQUM7SUFFRCxPQUFPLGVBQWUsQ0FBQztBQUMzQixDQUFDLENBQUM7QUFFRixNQUFNLGNBQWMsR0FBRyxDQUFDLFFBQXlCLEVBQUUsZ0JBQWtDLEVBQVcsRUFBRSxDQUM5RixDQUFDLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFFdEUsTUFBTSxxQkFBcUIsR0FBa0QsQ0FBQyxFQUMxRSw2QkFBNkIsRUFDN0IscUJB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WUFDQSxhQUFhLENBQUMsTUFBTSxLQUFLLE1BQU0sSUFBSSxDQUNoQyxvRUFBSyxTQUFTLEVBQUMsaUNBQWlDO2dCQUM1QyxzRUFBTyxPQUFPLEVBQUUsZUFBZSxDQUFDLFVBQVU7b0JBQ3RDLDJEQUFDLG9FQUFnQixJQUFDLEVBQUUsRUFBQyxzQ0FBc0MsR0FBRyxDQUMxRDtnQkFDUixvRUFDSSxTQUFTLEVBQUUsaURBQVUsQ0FDakIsWUFBWSxFQUNaLDhCQUE4QixFQUM5QixVQUFVLEVBQ1YsK0JBQStCLEVBQy9CO3dCQUNJLDhCQUE4QixFQUFFLGNBQWMsQ0FDMUMsZUFBZSxDQUFDLFVBQVUsRUFDMUIsZ0JBQWdCLENBQ25CO3FCQUNKLENBQ0osY0FDUyxlQUFlLENBQUMsVUFBVSxFQUNwQyxFQUFFLEVBQUUsZUFBZSxDQUFDLFVBQVUsR0FDaEM7Z0JBQ0Qsa0JBQWtCLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUM3QyxDQUNULENBQ0MsQ0FDSixDQUNULENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSxxQkFBcUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjMvQWR5ZW5WM0NhcmRWYWxpZGF0aW9uLnRzeD9kZjgzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgdHlwZSBBZHllblZhbGlkYXRpb25TdGF0ZSxcbiAgICB0eXBlIENhcmRJbnN0cnVtZW50LFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBSZWFjdCwgeyB0eXBlIEZ1bmN0aW9uQ29tcG9uZW50LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBUcmFuc2xhdGVkU3RyaW5nIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2xvY2FsZSc7XG5cbmV4cG9ydCB0eXBlIEZpZWxkc1ZhbGlkYXRpb24gPSB7IFtrZXkgaW4gQWR5ZW5DYXJkRmllbGRzXT86IEFkeWVuVmFsaWRhdGlvblN0YXRlIH07XG5cbmVudW0gQWR5ZW5DYXJkRmllbGRzIHtcbiAgICBDYXJkTnVtYmVyID0gJ2VuY3J5cHRlZENhcmROdW1iZXInLFxuICAgIFNlY3VyaXR5Q29kZSA9ICdlbmNyeXB0ZWRTZWN1cml0eUNvZGUnLFxuICAgIEV4cGlyeURhdGUgPSAnZW5jcnlwdGVkRXhwaXJ5RGF0ZScsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WM0NhcmRWYWxpZGF0aW9uUHJvcHMge1xuICAgIHZlcmlmaWNhdGlvbkZpZWxkc0NvbnRhaW5lcklkPzogc3RyaW5nO1xuICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZDogYm9vbGVhbjtcbiAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kO1xuICAgIGNhcmRWYWxpZGF0aW9uU3RhdGU/OiBBZHllblZhbGlkYXRpb25TdGF0ZTtcbiAgICBzZWxlY3RlZEluc3RydW1lbnQ/OiBDYXJkSW5zdHJ1bWVudDtcbn1cblxuY29uc3QgZ2V0SW5pdGlhbFZhbGlkYXRpb25TdGF0ZSA9ICh7XG4gICAgc2hvdWxkU2hvd051bWJlckZpZWxkLFxuICAgIG1ldGhvZCxcbn06IHtcbiAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ6IGJvb2xlYW47XG4gICAgbWV0aG9kOiBzdHJpbmc7XG59KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdGlvblN0YXRlOiBGaWVsZHNWYWxpZGF0aW9uID0ge307XG5cbiAgICBpZiAoc2hvdWxkU2hvd051bWJlckZpZWxkKSB7XG4gICAgICAgIHZhbGlkYXRpb25TdGF0ZVtBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcl0gPSB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cblxuICAgIGlmIChtZXRob2QgPT09ICdzY2hlbWUnKSB7XG4gICAgICAgIHZhbGlkYXRpb25TdGF0ZVtBZHllbkNhcmRGaWVsZHMuU2VjdXJpdHlDb2RlXSA9IHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxuXG4gICAgaWYgKG1ldGhvZCA9PT0gJ2JjbWMnKSB7XG4gICAgICAgIHZhbGlkYXRpb25TdGF0ZVtBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZV0gPSB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cblxuICAgIHJldHVybiB2YWxpZGF0aW9uU3RhdGU7XG59O1xuXG5jb25zdCBpc0ZpZWxkSW52YWxpZCA9IChmaWVsZEtleTogQWR5ZW5DYXJkRmllbGRzLCBmaWVsZHNWYWxpZGF0aW9uOiBGaWVsZHNWYWxpZGF0aW9uKTogYm9vbGVhbiA9PlxuICAgICEhZmllbGRzVmFsaWRhdGlvbltmaWVsZEtleV0gJiYgIWZpZWxkc1ZhbGlkYXRpb25bZmllbGRLZXldLnZhbGlkO1xuXG5jb25zdCBBZHllblYzQ2FyZFZhbGlkYXRpb246IEZ1bmN0aW9uQ29tcG9uZW50PEFkeWVuVjNDYXJkVmFsaWRhdGlvblByb3BzPiA9ICh7XG4gICAgdmVyaWZpY2F0aW9uRmllbGRzQ29udGFpbmVySWQsXG4gICAgc2hvdWxkU2hvd051bWJlckZpZWxkLFxuICAgIHNlbGVjdGVkSW5zdHJ1bWVudCxcbiAgICBwYXltZW50TWV0aG9kLFxuICAgIGNhcmRWYWxpZGF0aW9uU3RhdGUsXG59KSA9PiB7XG4gICAgY29uc3QgW2ZpZWxkc1ZhbGlkYXRpb24sIHNldEZpZWxkc1ZhbGlkYXRpb25dID0gdXNlU3RhdGU8RmllbGRzVmFsaWRhdGlvbj4oXG4gICAgICAgIGdldEluaXRpYWxWYWxpZGF0aW9uU3RhdGUoeyBzaG91bGRTaG93TnVtYmVyRmllbGQsIG1ldGhvZDogcGF5bWVudE1ldGhvZC5tZXRob2QgfSksXG4gICAgKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FyZFZhbGlkYXRpb25TdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2FyZFZhbGlkYXRpb25TdGF0ZS5maWVsZFR5cGUgJiZcbiAgICAgICAgICAgICghZmllbGRzVmFsaWRhdGlvbltjYXJkVmFsaWRhdGlvblN0YXRlLmZpZWxkVHlwZV0gfHxcbiAgICAgICAgICAgICAgICBmaWVsZHNWYWxpZGF0aW9uW2NhcmRWYWxpZGF0aW9uU3RhdGUuZmllbGRUeXBlXT8udmFsaWQgIT09XG4gICAgICAgICAgICAgICAgICAgIGNhcmRWYWxpZGF0aW9uU3RhdGUudmFsaWQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgaWYgKGNhcmRWYWxpZGF0aW9uU3RhdGUuZmllbGRUeXBlID09PSBBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcikge1xuICAgICAgICAgICAgICAgIHNldEZpZWxkc1ZhbGlkYXRpb24oe1xuICAgICAgICAgICAgICAgICAgICAuLi5maWVsZHNWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBbQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXJdOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZFZhbGlkYXRpb25TdGF0ZS5lbmREaWdpdHMgIT09IHNlbGVjdGVkSW5zdHJ1bWVudD8ubGFzdDRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHsgLi4uY2FyZFZhbGlkYXRpb25TdGF0ZSwgdmFsaWQ6IGZhbHNlIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHsgLi4uY2FyZFZhbGlkYXRpb25TdGF0ZSB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRGaWVsZHNWYWxpZGF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgW2NhcmRWYWxpZGF0aW9uU3RhdGUuZmllbGRUeXBlXTogY2FyZFZhbGlkYXRpb25TdGF0ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgfSwgW2NhcmRWYWxpZGF0aW9uU3RhdGUsIHNldEZpZWxkc1ZhbGlkYXRpb24sIHNlbGVjdGVkSW5zdHJ1bWVudD8ubGFzdDRdKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChzZWxlY3RlZEluc3RydW1lbnQ/LmJpZ3BheVRva2VuKSB7XG4gICAgICAgICAgICBzZXRGaWVsZHNWYWxpZGF0aW9uKFxuICAgICAgICAgICAgICAgIGdldEluaXRpYWxWYWxpZGF0aW9uU3RhdGUoeyBzaG91bGRTaG93TnVtYmVyRmllbGQsIG1ldGhvZDogcGF5bWVudE1ldGhvZC5tZXRob2QgfSksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSwgW3NlbGVjdGVkSW5zdHJ1bWVudD8uYmlncGF5VG9rZW4sIHBheW1lbnRNZXRob2QubWV0aG9kLCBzaG91bGRTaG93TnVtYmVyRmllbGRdKTtcblxuICAgIGNvbnN0IHNob3dWYWxpZGF0aW9uSWNvbiA9IChrZXk6IEFkeWVuQ2FyZEZpZWxkcykgPT5cbiAgICAgICAgaXNGaWVsZEludmFsaWQoa2V5LCBmaWVsZHNWYWxpZGF0aW9uKSAmJiAoXG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFkeWVuLWNoZWNrb3V0LWlucHV0X19pbmxpbmUtdmFsaWRhdGlvbiBhZHllbi1jaGVja291dC1pbnB1dF9faW5saW5lLXZhbGlkYXRpb24tLWludmFsaWRcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHRyYW5zZm9ybTogJ25vbmUnLCByaWdodDogJzIwcHgnIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICBhbHQ9XCJhZHllbi1jaGVja291dC1pY29uXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWR5ZW4tY2hlY2tvdXRfX2ljb25cIlxuICAgICAgICAgICAgICAgICAgICBzcmM9XCJodHRwczovL2NoZWNrb3V0c2hvcHBlci10ZXN0LmFkeWVuLmNvbS9jaGVja291dHNob3BwZXIvaW1hZ2VzL2NvbXBvbmVudHMvZmllbGRfZXJyb3Iuc3ZnXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIHtzaG91bGRTaG93TnVtYmVyRmllbGQgJiYgKFxuICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZWRTdHJpbmcgaWQ9XCJwYXltZW50Lmluc3RydW1lbnRfdHJ1c3RlZF9zaGlwcGluZ19hZGRyZXNzX3RpdGxlX3RleHRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3N0cm9uZz5cblxuICAgICAgICAgICAgICAgICAgICA8YnIgLz5cblxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlZFN0cmluZyBpZD1cInBheW1lbnQuaW5zdHJ1bWVudF90cnVzdGVkX3NoaXBwaW5nX2FkZHJlc3NfdGV4dFwiIC8+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWNjRmllbGRzXCIgaWQ9e3ZlcmlmaWNhdGlvbkZpZWxkc0NvbnRhaW5lcklkfT5cbiAgICAgICAgICAgICAgICB7c2hvdWxkU2hvd051bWJlckZpZWxkICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtLWZpZWxkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1maWVsZC0tY2NOdW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zvcm0tZmllbGQtLWNjTnVtYmVyLS1oYXNFeHBpcnlEYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QubWV0aG9kID09PSAnYmNtYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGRpdiBpcyBoaWRpbmcgYnkgQ1NTIGJlY2F1c2UgdGhlcmUgaXMgYW4gQWR5ZW4gbGlicmFyeSBpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrb3V0LXNkayB3aGljaCBtb3VudHMgdmVyaWZpY2F0aW9uIGZpZWxkcyBhbmQgaWYgaXMgcmVtb3ZlZCB3aXRoIEpTIHRoaXMgbW91bnRpbmcgZXZlbnQgd2lsbCBiZSB0aHJvd24gYW4gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ICdmb3JtLWZpZWxkLWNjTnVtYmVyLS1oaWRlJzogIXNob3VsZFNob3dOdW1iZXJGaWVsZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9e0FkeWVuQ2FyZEZpZWxkcy5DYXJkTnVtYmVyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlZFN0cmluZyBpZD1cInBheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcHRpbWl6ZWRDaGVja291dC1mb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hhcy1pY29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC13cmFwcGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC0tZXJyb3InOiBpc0ZpZWxkSW52YWxpZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtY3NlPXtBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAge3Nob3dWYWxpZGF0aW9uSWNvbihBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcil9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAge3BheW1lbnRNZXRob2QubWV0aG9kID09PSAnc2NoZW1lJyAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1maWVsZCBmb3JtLWNjRmllbGRzLWZpZWxkLS1jY0N2dlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9e0FkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVkU3RyaW5nIGlkPVwicGF5bWVudC5jcmVkaXRfY2FyZF9jdnZfbGFiZWxcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29wdGltaXplZENoZWNrb3V0LWZvcm0taW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGFzLWljb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWR5ZW4tY2hlY2tvdXRfX2lucHV0LXdyYXBwZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWR5ZW4tY2hlY2tvdXRfX2lucHV0LS1lcnJvcic6IGlzRmllbGRJbnZhbGlkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWNzZT17QWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2hvd1ZhbGlkYXRpb25JY29uKEFkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGUpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIHtwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gJ2JjbWMnICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWZpZWxkIGZvcm0tZmllbGQtLWNjRXhwaXJ5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj17QWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVkU3RyaW5nIGlkPVwicGF5bWVudC5jcmVkaXRfY2FyZF9leHBpcmF0aW9uX2xhYmVsXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcHRpbWl6ZWRDaGVja291dC1mb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hhcy1pY29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC13cmFwcGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC0tZXJyb3InOiBpc0ZpZWxkSW52YWxpZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtY3NlPXtBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAge3Nob3dWYWxpZGF0aW9uSWNvbihBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFkeWVuVjNDYXJkVmFsaWRhdGlvbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv3/AdyenV3CardValidation.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv3/AdyenV3Form.tsx":
/*!****************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv3/AdyenV3Form.tsx ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UntrustedShippingCardVerificationType: () => (/* binding */ UntrustedShippingCardVerificationType),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-widget-integration */ \"./packages/hosted-widget-integration/src/HostedWidgetPaymentComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/contexts/payment-form-context/PaymentFormContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/modal/Modal.tsx\");\n\n\n\n\n\n\nvar UntrustedShippingCardVerificationType;\n(function (UntrustedShippingCardVerificationType) {\n    UntrustedShippingCardVerificationType[\"CVV\"] = \"cvv\";\n    UntrustedShippingCardVerificationType[\"PAN\"] = \"pan\";\n})(UntrustedShippingCardVerificationType || (UntrustedShippingCardVerificationType = {}));\nconst AdyenV3Form = (_a) => {\n    var { method, containerId, initializePayment, isAccountInstrument, shouldHideInstrumentExpiryDate, validateInstrument, language, shouldRenderAdditionalActionContentModal, isModalVisible, cancelAdditionalActionModalFlow, additionalActionContainerId, checkoutState, checkoutService, onUnhandledError } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"method\", \"containerId\", \"initializePayment\", \"isAccountInstrument\", \"shouldHideInstrumentExpiryDate\", \"validateInstrument\", \"language\", \"shouldRenderAdditionalActionContentModal\", \"isModalVisible\", \"cancelAdditionalActionModalFlow\", \"additionalActionContainerId\", \"checkoutState\", \"checkoutService\", \"onUnhandledError\"]);\n    const { paymentForm } = (0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__.usePaymentFormContext)();\n    const customer = checkoutState.data.getCustomer();\n    const { isLoadingInstruments } = checkoutState.statuses;\n    const { isPaymentDataRequired } = checkoutState.data;\n    const instruments = checkoutState.data.getInstruments(method) || [];\n    const isSignedIn = customer === null || customer === void 0 ? void 0 : customer.isGuest;\n    const isInstrumentFeatureAvailable = !isSignedIn && Boolean(method.config.isVaultingEnabled);\n    const isInstrumentCardCodeRequired = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(checkoutState);\n    const isInstrumentCardNumberRequired = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(checkoutState);\n    const { hidePaymentSubmitButton, disableSubmit, setFieldValue, setSubmit, setValidationSchema, } = paymentForm;\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null,\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_2__[\"default\"], Object.assign({}, rest, { containerId: containerId, deinitializePayment: checkoutService.deinitializePayment, disableSubmit: disableSubmit, hideContentWhenSignedOut: true, hidePaymentSubmitButton: hidePaymentSubmitButton, initializePayment: initializePayment, instruments: instruments, isAccountInstrument: isAccountInstrument, isInstrumentCardCodeRequired: isInstrumentCardCodeRequired, isInstrumentCardNumberRequired: isInstrumentCardNumberRequired, isInstrumentFeatureAvailable: isInstrumentFeatureAvailable, isLoadingInstruments: isLoadingInstruments(), isPaymentDataRequired: isPaymentDataRequired(), isSignedIn: !isSignedIn, loadInstruments: checkoutService.loadInstruments, method: method, onUnhandledError: onUnhandledError, setFieldValue: setFieldValue, setSubmit: setSubmit, setValidationSchema: setValidationSchema, shouldHideInstrumentExpiryDate: shouldHideInstrumentExpiryDate, shouldRenderCustomInstrument: true, signOut: checkoutService.signOutCustomer, validateInstrument: validateInstrument })),\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { additionalBodyClassName: \"modal-body--center\", closeButtonLabel: language.translate('common.close_action'), isOpen: shouldRenderAdditionalActionContentModal, onRequestClose: cancelAdditionalActionModalFlow, shouldShowCloseButton: true, style: !isModalVisible && method.id === 'scheme'\n                ? {\n                    overlay: {\n                        display: 'none',\n                    },\n                }\n                : {} },\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { id: additionalActionContainerId, style: { width: '100%' } })),\n        !shouldRenderAdditionalActionContentModal && react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { id: additionalActionContainerId })));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdyenV3Form);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52My9BZHllblYzRm9ybS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFDc0U7QUFNYjtBQUlUO0FBSU87QUFDTjtBQUVqRCxJQUFZLHFDQUdYO0FBSEQsV0FBWSxxQ0FBcUM7SUFDN0Msb0RBQVc7SUFDWCxvREFBVztBQUNmLENBQUMsRUFIVyxxQ0FBcUMsS0FBckMscUNBQXFDLFFBR2hEO0FBNkJELE1BQU0sV0FBVyxHQUE2RCxDQUFDLEVBZ0I5RSxFQUFFLEVBQUU7UUFoQjBFLEVBQzNFLE1BQU0sRUFDTixXQUFXLEVBQ1gsaUJBQWlCLEVBQ2pCLG1CQUFtQixFQUNuQiw4QkFBOEIsRUFDOUIsa0JBQWtCLEVBQ2xCLFFBQVEsRUFDUix3Q0FBd0MsRUFDeEMsY0FBYyxFQUNkLCtCQUErQixFQUMvQiwyQkFBMkIsRUFDM0IsYUFBYSxFQUNiLGVBQWUsRUFDZixnQkFBZ0IsT0FFbkIsRUFETSxJQUFJLHFEQWZvRSxpVUFnQjlFLENBRFU7SUFFUCxNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsb0dBQXFCLEVBQUUsQ0FBQztJQUNoRCxNQUFNLFFBQVEsR0FBRyxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ2xELE1BQU0sRUFBRSxvQkFBb0IsRUFBRSxHQUFHLGFBQWEsQ0FBQyxRQUFRLENBQUM7SUFDeEQsTUFBTSxFQUFFLHFCQUFxQixFQUFFLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQztJQUNyRCxNQUFNLFdBQVcsR0FBRyxhQUFhLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDcEUsTUFBTSxVQUFVLEdBQUcsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLE9BQU8sQ0FBQztJQUNyQyxNQUFNLDRCQUE0QixHQUFHLENBQUMsVUFBVSxJQUFJLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDN0YsTUFBTSw0QkFBNEIsR0FBRyxrRkFBb0MsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUN6RixNQUFNLDhCQUE4QixHQUFHLGtGQUFzQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBRTdGLE1BQU0sRUFDRix1QkFBdUIsRUFDdkIsYUFBYSxFQUNiLGFBQWEsRUFDYixTQUFTLEVBQ1QsbUJBQW1CLEdBQ3RCLEdBQUcsV0FBVyxDQUFDO0lBRWhCLE9BQU8sQ0FDSDtRQUNJLDJEQUFDLHVGQUE0QixvQkFDckIsSUFBSSxJQUNSLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLG1CQUFtQixFQUFFLGVBQWUsQ0FBQyxtQkFBbUIsRUFDeEQsYUFBYSxFQUFFLGFBQWEsRUFDNUIsd0JBQXdCLFFBQ3hCLHVCQUF1QixFQUFFLHVCQUF1QixFQUNoRCxpQkFBaUIsRUFBRSxpQkFBaUIsRUFDcEMsV0FBVyxFQUFFLFdBQVcsRUFDeEIsbUJBQW1CLEVBQUUsbUJBQW1CLEVBQ3hDLDRCQUE0QixFQUFFLDRCQUE0QixFQUMxRCw4QkFBOEIsRUFBRSw4QkFBOEIsRUFDOUQsNEJBQTRCLEVBQUUsNEJBQTRCLEVBQzFELG9CQUFvQixFQUFFLG9CQUFvQixFQUFFLEVBQzVDLHFCQUFxQixFQUFFLHFCQUFxQixFQUFFLEVBQzlDLFVBQVUsRUFBRSxDQUFDLFVBQVUsRUFDdkIsZUFBZSxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQ2hELE1BQU0sRUFBRSxNQUFNLEVBQ2QsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQ2xDLGFBQWEsRUFBRSxhQUFhLEVBQzVCLFNBQVMsRUFBRSxTQUFTLEVBQ3BCLG1CQUFtQixFQUFFLG1CQUFtQixFQUN4Qyw4QkFBOEIsRUFBRSw4QkFBOEIsRUFDOUQsNEJBQTRCLFFBQzVCLE9BQU8sRUFBRSxlQUFlLENBQUMsZUFBZSxFQUN4QyxrQkFBa0IsRUFBRSxrQkFBa0IsSUFDeEM7UUFDRiwyREFBQyxnRUFBSyxJQUNGLHVCQUF1QixFQUFDLG9CQUFvQixFQUM1QyxnQkFBZ0IsRUFBRSxRQUFRLENBQUMsU0FBUyxDQUFDLHFCQUFxQixDQUFDLEVBQzNELE1BQU0sRUFBRSx3Q0FBd0MsRUFDaEQsY0FBYyxFQUFFLCtCQUErQixFQUMvQyxxQkFBcUIsRUFBRSxJQUFJLEVBQzNCLEtBQUssRUFDRCxDQUFDLGNBQWMsSUFBSSxNQUFNLENBQUMsRUFBRSxLQUFLLFFBQVE7Z0JBQ3JDLENBQUMsQ0FBQztvQkFDSSxPQUFPLEVBQUU7d0JBQ0wsT0FBTyxFQUFFLE1BQU07cUJBQ2xCO2lCQUNKO2dCQUNILENBQUMsQ0FBQyxFQUFFO1lBR1osb0VBQUssRUFBRSxFQUFFLDJCQUEyQixFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBSSxDQUM5RDtRQUNQLENBQUMsd0NBQXdDLElBQUksb0VBQUssRUFBRSxFQUFFLDJCQUEyQixHQUFJLENBQ3ZGLENBQ04sQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLFdBQVcsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjMvQWR5ZW5WM0Zvcm0udHN4PzRkZTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBDYXJkSW5zdHJ1bWVudCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsnO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHR5cGUgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdHlwZSBPbWl0IH0gZnJvbSAndXRpbGl0eS10eXBlcyc7XG5cbmltcG9ydCB7XG4gICAgdHlwZSBIb3N0ZWRXaWRnZXRDb21wb25lbnRQcm9wcyxcbiAgICBIb3N0ZWRXaWRnZXRQYXltZW50Q29tcG9uZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaG9zdGVkLXdpZGdldC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRTZWxlY3RvcixcbiAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3Rvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2luc3RydW1lbnQtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICB0eXBlIFBheW1lbnRNZXRob2RQcm9wcyxcbiAgICB1c2VQYXltZW50Rm9ybUNvbnRleHQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC91aSc7XG5cbmV4cG9ydCBlbnVtIFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUge1xuICAgIENWViA9ICdjdnYnLFxuICAgIFBBTiA9ICdwYW4nLFxufVxuXG5leHBvcnQgdHlwZSBBZHllblYzRm9ybVByb3BzID0gT21pdDxcbiAgICBIb3N0ZWRXaWRnZXRDb21wb25lbnRQcm9wcyxcbiAgICB8ICdvblNpZ25PdXQnXG4gICAgfCAnaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZSdcbiAgICB8ICdpbnN0cnVtZW50cydcbiAgICB8ICdpc0xvYWRpbmdJbnN0cnVtZW50cydcbiAgICB8ICdpc1BheW1lbnREYXRhUmVxdWlyZWQnXG4gICAgfCAnaXNTaWduZWRJbidcbiAgICB8ICdpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkJ1xuICAgIHwgJ2lzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCdcbiAgICB8ICdsb2FkSW5zdHJ1bWVudHMnXG4gICAgfCAnc2lnbk91dCdcbiAgICB8ICdkZWluaXRpYWxpemVQYXltZW50J1xuPiAmIHtcbiAgICBjb250YWluZXJJZDogc3RyaW5nO1xuICAgIGlzQWNjb3VudEluc3RydW1lbnQ6IGJvb2xlYW47XG4gICAgc2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlOiBib29sZWFuO1xuICAgIHZhbGlkYXRlSW5zdHJ1bWVudDogKFxuICAgICAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ6IGJvb2xlYW4sXG4gICAgICAgIHNlbGVjdGVkSW5zdHJ1bWVudDogQ2FyZEluc3RydW1lbnQsXG4gICAgKSA9PiBSZWFjdE5vZGU7XG4gICAgc2hvdWxkUmVuZGVyQWRkaXRpb25hbEFjdGlvbkNvbnRlbnRNb2RhbDogYm9vbGVhbjtcbiAgICBpc01vZGFsVmlzaWJsZTogYm9vbGVhbjtcbiAgICBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93OiAoKSA9PiB2b2lkO1xuICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZDogc3RyaW5nO1xufTtcblxuY29uc3QgQWR5ZW5WM0Zvcm06IEZ1bmN0aW9uQ29tcG9uZW50PEFkeWVuVjNGb3JtUHJvcHMgJiBQYXltZW50TWV0aG9kUHJvcHM+ID0gKHtcbiAgICBtZXRob2QsXG4gICAgY29udGFpbmVySWQsXG4gICAgaW5pdGlhbGl6ZVBheW1lbnQsXG4gICAgaXNBY2NvdW50SW5zdHJ1bWVudCxcbiAgICBzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGUsXG4gICAgdmFsaWRhdGVJbnN0cnVtZW50LFxuICAgIGxhbmd1YWdlLFxuICAgIHNob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWwsXG4gICAgaXNNb2RhbFZpc2libGUsXG4gICAgY2FuY2VsQWRkaXRpb25hbEFjdGlvbk1vZGFsRmxvdyxcbiAgICBhZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWQsXG4gICAgY2hlY2tvdXRTdGF0ZSxcbiAgICBjaGVja291dFNlcnZpY2UsXG4gICAgb25VbmhhbmRsZWRFcnJvcixcbiAgICAuLi5yZXN0XG59KSA9PiB7XG4gICAgY29uc3QgeyBwYXltZW50Rm9ybSB9ID0gdXNlUGF5bWVudEZvcm1Db250ZXh0KCk7XG4gICAgY29uc3QgY3VzdG9tZXIgPSBjaGVja291dFN0YXRlLmRhdGEuZ2V0Q3VzdG9tZXIoKTtcbiAgICBjb25zdCB7IGlzTG9hZGluZ0luc3RydW1lbnRzIH0gPSBjaGVja291dFN0YXRlLnN0YXR1c2VzO1xuICAgIGNvbnN0IHsgaXNQYXltZW50RGF0YVJlcXVpcmVkIH0gPSBjaGVja291dFN0YXRlLmRhdGE7XG4gICAgY29uc3QgaW5zdHJ1bWVudHMgPSBjaGVja291dFN0YXRlLmRhdGEuZ2V0SW5zdHJ1bWVudHMobWV0aG9kKSB8fCBbXTtcbiAgICBjb25zdCBpc1NpZ25lZEluID0gY3VzdG9tZXI/LmlzR3Vlc3Q7XG4gICAgY29uc3QgaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZSA9ICFpc1NpZ25lZEluICYmIEJvb2xlYW4obWV0aG9kLmNvbmZpZy5pc1ZhdWx0aW5nRW5hYmxlZCk7XG4gICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCA9IGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRTZWxlY3RvcihjaGVja291dFN0YXRlKTtcbiAgICBjb25zdCBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWQgPSBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3RvcihjaGVja291dFN0YXRlKTtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgaGlkZVBheW1lbnRTdWJtaXRCdXR0b24sXG4gICAgICAgIGRpc2FibGVTdWJtaXQsXG4gICAgICAgIHNldEZpZWxkVmFsdWUsXG4gICAgICAgIHNldFN1Ym1pdCxcbiAgICAgICAgc2V0VmFsaWRhdGlvblNjaGVtYSxcbiAgICB9ID0gcGF5bWVudEZvcm07XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgICAgPEhvc3RlZFdpZGdldFBheW1lbnRDb21wb25lbnRcbiAgICAgICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgICAgICAgICBjb250YWluZXJJZD17Y29udGFpbmVySWR9XG4gICAgICAgICAgICAgICAgZGVpbml0aWFsaXplUGF5bWVudD17Y2hlY2tvdXRTZXJ2aWNlLmRlaW5pdGlhbGl6ZVBheW1lbnR9XG4gICAgICAgICAgICAgICAgZGlzYWJsZVN1Ym1pdD17ZGlzYWJsZVN1Ym1pdH1cbiAgICAgICAgICAgICAgICBoaWRlQ29udGVudFdoZW5TaWduZWRPdXRcbiAgICAgICAgICAgICAgICBoaWRlUGF5bWVudFN1Ym1pdEJ1dHRvbj17aGlkZVBheW1lbnRTdWJtaXRCdXR0b259XG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZVBheW1lbnQ9e2luaXRpYWxpemVQYXltZW50fVxuICAgICAgICAgICAgICAgIGluc3RydW1lbnRzPXtpbnN0cnVtZW50c31cbiAgICAgICAgICAgICAgICBpc0FjY291bnRJbnN0cnVtZW50PXtpc0FjY291bnRJbnN0cnVtZW50fVxuICAgICAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWQ9e2lzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkPXtpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZT17aXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZX1cbiAgICAgICAgICAgICAgICBpc0xvYWRpbmdJbnN0cnVtZW50cz17aXNMb2FkaW5nSW5zdHJ1bWVudHMoKX1cbiAgICAgICAgICAgICAgICBpc1BheW1lbnREYXRhUmVxdWlyZWQ9e2lzUGF5bWVudERhdGFSZXF1aXJlZCgpfVxuICAgICAgICAgICAgICAgIGlzU2lnbmVkSW49eyFpc1NpZ25lZElufVxuICAgICAgICAgICAgICAgIGxvYWRJbnN0cnVtZW50cz17Y2hlY2tvdXRTZXJ2aWNlLmxvYWRJbnN0cnVtZW50c31cbiAgICAgICAgICAgICAgICBtZXRob2Q9e21ldGhvZH1cbiAgICAgICAgICAgICAgICBvblVuaGFuZGxlZEVycm9yPXtvblVuaGFuZGxlZEVycm9yfVxuICAgICAgICAgICAgICAgIHNldEZpZWxkVmFsdWU9e3NldEZpZWxkVmFsdWV9XG4gICAgICAgICAgICAgICAgc2V0U3VibWl0PXtzZXRTdWJtaXR9XG4gICAgICAgICAgICAgICAgc2V0VmFsaWRhdGlvblNjaGVtYT17c2V0VmFsaWRhdGlvblNjaGVtYX1cbiAgICAgICAgICAgICAgICBzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGU9e3Nob3VsZEhpZGVJbnN0cnVtZW50RXhwaXJ5RGF0ZX1cbiAgICAgICAgICAgICAgICBzaG91bGRSZW5kZXJDdXN0b21JbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgc2lnbk91dD17Y2hlY2tvdXRTZXJ2aWNlLnNpZ25PdXRDdXN0b21lcn1cbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUluc3RydW1lbnQ9e3ZhbGlkYXRlSW5zdHJ1bWVudH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8TW9kYWxcbiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsQm9keUNsYXNzTmFtZT1cIm1vZGFsLWJvZHktLWNlbnRlclwiXG4gICAgICAgICAgICAgICAgY2xvc2VCdXR0b25MYWJlbD17bGFuZ3VhZ2UudHJhbnNsYXRlKCdjb21tb24uY2xvc2VfYWN0aW9uJyl9XG4gICAgICAgICAgICAgICAgaXNPcGVuPXtzaG91bGRSZW5kZXJBZGRpdGlvbmFsQWN0aW9uQ29udGVudE1vZGFsfVxuICAgICAgICAgICAgICAgIG9uUmVxdWVzdENsb3NlPXtjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93fVxuICAgICAgICAgICAgICAgIHNob3VsZFNob3dDbG9zZUJ1dHRvbj17dHJ1ZX1cbiAgICAgICAgICAgICAgICBzdHlsZT17XG4gICAgICAgICAgICAgICAgICAgICFpc01vZGFsVmlzaWJsZSAmJiBtZXRob2QuaWQgPT09ICdzY2hlbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9e2FkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZH0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fSAvPlxuICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgICAgIHshc2hvdWxkUmVuZGVyQWRkaXRpb25hbEFjdGlvbkNvbnRlbnRNb2RhbCAmJiA8ZGl2IGlkPXthZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWR9IC8+fVxuICAgICAgICA8Lz5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQWR5ZW5WM0Zvcm07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv3/AdyenV3Form.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv3/AdyenV3PaymentMethod.tsx":
/*!*************************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv3/AdyenV3PaymentMethod.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdyenV3PaymentMethodType: () => (/* binding */ AdyenV3PaymentMethodType),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_adyen__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/adyen */ \"../checkout-sdk-js/dist/esm/integrations/adyen.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/locale */ \"./packages/locale/src/LocaleProvider.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/contexts/checkout-context/CheckoutContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/contexts/payment-form-context/PaymentFormContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/form/contexts/FormContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/loading/LoadingOverlay.tsx\");\n/* harmony import */ var _AdyenV3CardValidation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./AdyenV3CardValidation */ \"./packages/adyen-integration/src/adyenv3/AdyenV3CardValidation.tsx\");\n/* harmony import */ var _AdyenV3Form__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./AdyenV3Form */ \"./packages/adyen-integration/src/adyenv3/AdyenV3Form.tsx\");\n\n\n\n\n\n\n\n\nvar AdyenV3PaymentMethodType;\n(function (AdyenV3PaymentMethodType) {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV3PaymentMethodType[\"scheme\"] = \"scheme\";\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV3PaymentMethodType[\"bcmc\"] = \"bcmc\";\n})(AdyenV3PaymentMethodType || (AdyenV3PaymentMethodType = {}));\nconst AdyenV3PaymentMethod = (_a) => {\n    var { checkoutService, checkoutState, paymentForm, method, language, onUnhandledError } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"checkoutService\", \"checkoutState\", \"paymentForm\", \"method\", \"language\", \"onUnhandledError\"]);\n    const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)({\n        shouldShowModal: true,\n    });\n    const [shouldRenderAdditionalActionContentModal, setShouldRenderAdditionalActionContentModal] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [isAdditionalActionContentModalVisible, setIsAdditionalActionContentModalVisible] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [cardValidationState, setCardValidationState] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n    const containerId = `adyen-${method.id}-component-field`;\n    const additionalActionContainerId = `adyen-${method.id}-additional-action-component-field`;\n    const cardVerificationContainerId = `adyen-${method.id}-tsv-component-field`;\n    const component = method.id;\n    const shouldHideInstrumentExpiryDate = component === AdyenV3PaymentMethodType.bcmc;\n    const onBeforeLoad = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((shopperInteraction) => {\n        ref.current.shouldShowModal = shopperInteraction;\n        setShouldRenderAdditionalActionContentModal(ref.current.shouldShowModal);\n    }, []);\n    const onComplete = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setIsAdditionalActionContentModalVisible(false);\n        setShouldRenderAdditionalActionContentModal(false);\n        ref.current.cancelAdditionalAction = undefined;\n    }, []);\n    const onActionHandled = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setIsAdditionalActionContentModalVisible(true);\n    }, []);\n    const onLoad = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((cancel) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        ref.current.cancelAdditionalAction = cancel;\n    }, []);\n    const cancelAdditionalActionModalFlow = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setIsAdditionalActionContentModalVisible(false);\n        setShouldRenderAdditionalActionContentModal(false);\n        if (ref.current.cancelAdditionalAction) {\n            ref.current.cancelAdditionalAction();\n            ref.current.cancelAdditionalAction = undefined;\n        }\n    }, []);\n    const initializeAdyenPayment = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((options, selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        const adyenOptions = {\n            [AdyenV3PaymentMethodType.scheme]: {\n                hasHolderName: true,\n                holderNameRequired: true,\n            },\n        };\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        const selectedInstrumentId = selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken;\n        return checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_adyen__WEBPACK_IMPORTED_MODULE_1__.createAdyenV3PaymentStrategy], adyenv3: {\n                cardVerificationContainerId: selectedInstrumentId && cardVerificationContainerId,\n                containerId,\n                hasVaultedInstruments: !!selectedInstrumentId,\n                options: adyenOptions[component],\n                additionalActionOptions: {\n                    widgetSize: '05',\n                    containerId: additionalActionContainerId,\n                    onBeforeLoad,\n                    onComplete,\n                    onLoad,\n                    onActionHandled,\n                },\n                shouldShowNumberField: ref.current.shouldShowNumberField,\n                validateCardFields: (state) => {\n                    setCardValidationState(state);\n                },\n            } }));\n    }), [\n        component,\n        cardVerificationContainerId,\n        containerId,\n        additionalActionContainerId,\n        onBeforeLoad,\n        onComplete,\n        onLoad,\n        onActionHandled,\n        checkoutService,\n    ]);\n    const validateInstrument = (shouldShowNumberField, selectedInstrument) => {\n        ref.current.shouldShowNumberField = shouldShowNumberField;\n        return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_AdyenV3CardValidation__WEBPACK_IMPORTED_MODULE_9__[\"default\"], { cardValidationState: cardValidationState, paymentMethod: method, selectedInstrument: selectedInstrument, shouldShowNumberField: shouldShowNumberField, verificationFieldsContainerId: cardVerificationContainerId }));\n    };\n    const isAccountInstrument = () => {\n        switch (method.method) {\n            case 'directEbanking':\n            case 'giropay':\n            case 'ideal':\n            case 'sepadirectdebit':\n                return true;\n            default:\n                return false;\n        }\n    };\n    const isLoading = checkoutState.statuses.isLoadingInstruments() ||\n        checkoutState.statuses.isLoadingPaymentMethod(method.id);\n    const formContextProps = {\n        isSubmitted: paymentForm.isSubmitted(),\n        setSubmitted: paymentForm.setSubmitted,\n    };\n    return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].Provider, { value: formContextProps },\n        react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Provider, { value: { checkoutState, checkoutService } },\n            react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_3__[\"default\"], { checkoutService: checkoutService },\n                react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_5__.PaymentFormContext.Provider, { value: { paymentForm } },\n                    react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__[\"default\"], { hideContentWhenLoading: true, isLoading: isLoading },\n                        react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_AdyenV3Form__WEBPACK_IMPORTED_MODULE_10__[\"default\"], Object.assign({}, rest, { additionalActionContainerId: additionalActionContainerId, cancelAdditionalActionModalFlow: cancelAdditionalActionModalFlow, checkoutService: checkoutService, checkoutState: checkoutState, containerId: containerId, hideContentWhenSignedOut: true, initializePayment: initializeAdyenPayment, isAccountInstrument: isAccountInstrument(), isModalVisible: isAdditionalActionContentModalVisible, language: language, method: method, onUnhandledError: onUnhandledError, paymentForm: paymentForm, shouldHideInstrumentExpiryDate: shouldHideInstrumentExpiryDate, shouldRenderAdditionalActionContentModal: shouldRenderAdditionalActionContentModal, validateInstrument: validateInstrument }))))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(AdyenV3PaymentMethod, [{ gateway: 'adyenv3' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52My9BZHllblYzUGF5bWVudE1ldGhvZC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTTRGO0FBQ1A7QUFHdkI7QUFPUDtBQUNnQjtBQUVYO0FBQ3BCO0FBTXhDLElBQVksd0JBS1g7QUFMRCxXQUFZLHdCQUF3QjtJQUNoQyxnRUFBZ0U7SUFDaEUsNkNBQWlCO0lBQ2pCLGdFQUFnRTtJQUNoRSx5Q0FBYTtBQUNqQixDQUFDLEVBTFcsd0JBQXdCLEtBQXhCLHdCQUF3QixRQUtuQztBQVFELE1BQU0sb0JBQW9CLEdBQTBDLENBQUMsRUFRcEUsRUFBRSxFQUFFO1FBUmdFLEVBQ2pFLGVBQWUsRUFDZixhQUFhLEVBQ2IsV0FBVyxFQUNYLE1BQU0sRUFDTixRQUFRLEVBQ1IsZ0JBQWdCLE9BRW5CLEVBRE0sSUFBSSxxREFQMEQsNkZBUXBFLENBRFU7SUFFUCxNQUFNLEdBQUcsR0FBRyw2Q0FBTSxDQUF3QjtRQUN0QyxlQUFlLEVBQUUsSUFBSTtLQUN4QixDQUFDLENBQUM7SUFFSCxNQUFNLENBQUMsd0NBQXdDLEVBQUUsMkNBQTJDLENBQUMsR0FDekYsK0NBQVEsQ0FBVSxLQUFLLENBQUMsQ0FBQztJQUM3QixNQUFNLENBQUMscUNBQXFDLEVBQUUsd0NBQXdDLENBQUMsR0FDbkYsK0NBQVEsQ0FBVSxLQUFLLENBQUMsQ0FBQztJQUM3QixNQUFNLENBQUMsbUJBQW1CLEVBQUUsc0JBQXNCLENBQUMsR0FBRywrQ0FBUSxFQUF3QixDQUFDO0lBQ3ZGLE1BQU0sV0FBVyxHQUFHLFNBQVMsTUFBTSxDQUFDLEVBQUUsa0JBQWtCLENBQUM7SUFDekQsTUFBTSwyQkFBMkIsR0FBRyxTQUFTLE1BQU0sQ0FBQyxFQUFFLG9DQUFvQyxDQUFDO0lBQzNGLE1BQU0sMkJBQTJCLEdBQUcsU0FBUyxNQUFNLENBQUMsRUFBRSxzQkFBc0IsQ0FBQztJQUM3RSxNQUFNLFNBQVMsR0FBRyxNQUFNLENBQUMs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QUFlLEVBQUU7WUFDL0QsMkRBQUMsb0VBQWMsSUFBQyxlQUFlLEVBQUUsZUFBZTtnQkFDNUMsMkRBQUMsNkZBQWtCLENBQUMsUUFBUSxJQUFDLEtBQUssRUFBRSxFQUFFLFdBQVcsRUFBRTtvQkFDL0MsMkRBQUMsZ0VBQWMsSUFBQyxzQkFBc0IsUUFBQyxTQUFTLEVBQUUsU0FBUzt3QkFDdkQsMkRBQUMscURBQVcsb0JBQ0osSUFBSSxJQUNSLDJCQUEyQixFQUFFLDJCQUEyQixFQUN4RCwrQkFBK0IsRUFBRSwrQkFBK0IsRUFDaEUsZUFBZSxFQUFFLGVBQWUsRUFDaEMsYUFBYSxFQUFFLGFBQWEsRUFDNUIsV0FBVyxFQUFFLFdBQVcsRUFDeEIsd0JBQXdCLFFBQ3hCLGlCQUFpQixFQUFFLHNCQUFzQixFQUN6QyxtQkFBbUIsRUFBRSxtQkFBbUIsRUFBRSxFQUMxQyxjQUFjLEVBQUUscUNBQXFDLEVBQ3JELFFBQVEsRUFBRSxRQUFRLEVBQ2xCLE1BQU0sRUFBRSxNQUFNLEVBQ2QsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQ2xDLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLDhCQUE4QixFQUFFLDhCQUE4QixFQUM5RCx3Q0FBd0MsRUFDcEMsd0NBQXdDLEVBRTVDLGtCQUFrQixFQUFFLGtCQUFrQixJQUN4QyxDQUNXLENBQ1MsQ0FDakIsQ0FDTSxDQUNSLENBQzFCLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSx5RkFBcUIsQ0FDaEMsb0JBQW9CLEVBQ3BCLENBQUMsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FDM0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjMvQWR5ZW5WM1BheW1lbnRNZXRob2QudHN4PzQ1ZTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICB0eXBlIEFkeWVuQ3JlZGl0Q2FyZENvbXBvbmVudE9wdGlvbnMsXG4gICAgdHlwZSBBZHllblZhbGlkYXRpb25TdGF0ZSxcbiAgICB0eXBlIENhcmRJbnN0cnVtZW50LFxuICAgIHR5cGUgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrJztcbmltcG9ydCB7IGNyZWF0ZUFkeWVuVjNQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2ludGVncmF0aW9ucy9hZHllbic7XG5pbXBvcnQgUmVhY3QsIHsgdHlwZSBGdW5jdGlvbkNvbXBvbmVudCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IHR5cGUgSG9zdGVkV2lkZ2V0Q29tcG9uZW50UHJvcHMgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaG9zdGVkLXdpZGdldC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQgeyBMb2NhbGVQcm92aWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9sb2NhbGUnO1xuaW1wb3J0IHtcbiAgICBDaGVja291dENvbnRleHQsXG4gICAgUGF5bWVudEZvcm1Db250ZXh0LFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZFByb3BzLFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZFJlc29sdmVJZCxcbiAgICB0b1Jlc29sdmFibGVDb21wb25lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBGb3JtQ29udGV4dCwgTG9hZGluZ092ZXJsYXkgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvdWknO1xuXG5pbXBvcnQgQWR5ZW5WM0NhcmRWYWxpZGF0aW9uIGZyb20gJy4vQWR5ZW5WM0NhcmRWYWxpZGF0aW9uJztcbmltcG9ydCBBZHllblYzRm9ybSBmcm9tICcuL0FkeWVuVjNGb3JtJztcblxuZXhwb3J0IGludGVyZmFjZSBBZHllbk9wdGlvbnMge1xuICAgIFtrZXk6IHN0cmluZ106IEFkeWVuQ3JlZGl0Q2FyZENvbXBvbmVudE9wdGlvbnM7XG59XG5cbmV4cG9ydCBlbnVtIEFkeWVuVjNQYXltZW50TWV0aG9kVHlwZSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICAgIHNjaGVtZSA9ICdzY2hlbWUnLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgICBiY21jID0gJ2JjbWMnLFxufVxuXG5pbnRlcmZhY2UgQWR5ZW5QYXltZW50TWV0aG9kUmVmIHtcbiAgICBzaG91bGRTaG93TW9kYWw6IGJvb2xlYW47XG4gICAgc2hvdWxkU2hvd051bWJlckZpZWxkPzogYm9vbGVhbjtcbiAgICBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uPygpOiB2b2lkO1xufVxuXG5jb25zdCBBZHllblYzUGF5bWVudE1ldGhvZDogRnVuY3Rpb25Db21wb25lbnQ8UGF5bWVudE1ldGhvZFByb3BzPiA9ICh7XG4gICAgY2hlY2tvdXRTZXJ2aWNlLFxuICAgIGNoZWNrb3V0U3RhdGUsXG4gICAgcGF5bWVudEZvcm0sXG4gICAgbWV0aG9kLFxuICAgIGxhbmd1YWdlLFxuICAgIG9uVW5oYW5kbGVkRXJyb3IsXG4gICAgLi4ucmVzdFxufSkgPT4ge1xuICAgIGNvbnN0IHJlZiA9IHVzZVJlZjxBZHllblBheW1lbnRNZXRob2RSZWY+KHtcbiAgICAgICAgc2hvdWxkU2hvd01vZGFsOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgY29uc3QgW3Nob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWwsIHNldFNob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxdID1cbiAgICAgICAgdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICAgIGNvbnN0IFtpc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlLCBzZXRJc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlXSA9XG4gICAgICAgIHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgICBjb25zdCBbY2FyZFZhbGlkYXRpb25TdGF0ZSwgc2V0Q2FyZFZhbGlkYXRpb25TdGF0ZV0gPSB1c2VTdGF0ZTxBZHllblZhbGlkYXRpb25TdGF0ZT4oKTtcbiAgICBjb25zdCBjb250YWluZXJJZCA9IGBhZHllbi0ke21ldGhvZC5pZH0tY29tcG9uZW50LWZpZWxkYDtcbiAgICBjb25zdCBhZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWQgPSBgYWR5ZW4tJHttZXRob2QuaWR9LWFkZGl0aW9uYWwtYWN0aW9uLWNvbXBvbmVudC1maWVsZGA7XG4gICAgY29uc3QgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkID0gYGFkeWVuLSR7bWV0aG9kLmlkfS10c3YtY29tcG9uZW50LWZpZWxkYDtcbiAgICBjb25zdCBjb21wb25lbnQgPSBtZXRob2QuaWQ7XG4gICAgY29uc3Qgc2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlID0gY29tcG9uZW50ID09PSBBZHllblYzUGF5bWVudE1ldGhvZFR5cGUuYmNtYztcblxuICAgIGNvbnN0IG9uQmVmb3JlTG9hZCA9IHVzZUNhbGxiYWNrKChzaG9wcGVySW50ZXJhY3Rpb246IGJvb2xlYW4pID0+IHtcbiAgICAgICAgcmVmLmN1cnJlbnQuc2hvdWxkU2hvd01vZGFsID0gc2hvcHBlckludGVyYWN0aW9uO1xuXG4gICAgICAgIHNldFNob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWwocmVmLmN1cnJlbnQuc2hvdWxkU2hvd01vZGFsKTtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBvbkNvbXBsZXRlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBzZXRJc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgc2V0U2hvdWxkUmVuZGVyQWRkaXRpb25hbEFjdGlvbkNvbnRlbnRNb2RhbChmYWxzZSk7XG4gICAgICAgIHJlZi5jdXJyZW50LmNhbmNlbEFkZGl0aW9uYWxBY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3Qgb25BY3Rpb25IYW5kbGVkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBzZXRJc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlKHRydWUpO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IG9uTG9hZCA9IHVzZUNhbGxiYWNrKChjYW5jZWw/OiBhbnkpID0+IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgICByZWYuY3VycmVudC5jYW5jZWxBZGRpdGlvbmFsQWN0aW9uID0gY2FuY2VsO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGNhbmNlbEFkZGl0aW9uYWxBY3Rpb25Nb2RhbEZsb3cgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIHNldElzQWRkaXRpb25hbEFjdGlvbkNvbnRlbnRNb2RhbFZpc2libGUoZmFsc2UpO1xuICAgICAgICBzZXRTaG91bGRSZW5kZXJBZGRpdGlvbmFsQWN0aW9uQ29udGVudE1vZGFsKGZhbHNlKTtcblxuICAgICAgICBpZiAocmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbikge1xuICAgICAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbigpO1xuICAgICAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGluaXRpYWxpemVBZHllblBheW1lbnQ6IEhvc3RlZFdpZGdldENvbXBvbmVudFByb3BzWydpbml0aWFsaXplUGF5bWVudCddID0gdXNlQ2FsbGJhY2soXG4gICAgICAgIGFzeW5jIChvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHNlbGVjdGVkSW5zdHJ1bWVudDogQ2FyZEluc3RydW1lbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFkeWVuT3B0aW9uczogQWR5ZW5PcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIFtBZHllblYzUGF5bWVudE1ldGhvZFR5cGUuc2NoZW1lXToge1xuICAgICAgICAgICAgICAgICAgICBoYXNIb2xkZXJOYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBob2xkZXJOYW1lUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvblxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbnN0cnVtZW50SWQgPSBzZWxlY3RlZEluc3RydW1lbnQ/LmJpZ3BheVRva2VuO1xuXG4gICAgICAgICAgICByZXR1cm4gY2hlY2tvdXRTZXJ2aWNlLmluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGludGVncmF0aW9uczogW2NyZWF0ZUFkeWVuVjNQYXltZW50U3RyYXRlZ3ldLFxuICAgICAgICAgICAgICAgIGFkeWVudjM6IHtcbiAgICAgICAgICAgICAgICAgICAgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbnN0cnVtZW50SWQgJiYgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgaGFzVmF1bHRlZEluc3RydW1lbnRzOiAhIXNlbGVjdGVkSW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBhZHllbk9wdGlvbnNbY29tcG9uZW50XSxcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbk9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldFNpemU6ICcwNScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogYWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25CZWZvcmVMb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTG9hZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uSGFuZGxlZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2hvd051bWJlckZpZWxkOiByZWYuY3VycmVudC5zaG91bGRTaG93TnVtYmVyRmllbGQsXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQ2FyZEZpZWxkczogKHN0YXRlOiBBZHllblZhbGlkYXRpb25TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q2FyZFZhbGlkYXRpb25TdGF0ZShzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBbXG4gICAgICAgICAgICBjb21wb25lbnQsXG4gICAgICAgICAgICBjYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWQsXG4gICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZCxcbiAgICAgICAgICAgIG9uQmVmb3JlTG9hZCxcbiAgICAgICAgICAgIG9uQ29tcGxldGUsXG4gICAgICAgICAgICBvbkxvYWQsXG4gICAgICAgICAgICBvbkFjdGlvbkhhbmRsZWQsXG4gICAgICAgICAgICBjaGVja291dFNlcnZpY2UsXG4gICAgICAgIF0sXG4gICAgKTtcblxuICAgIGNvbnN0IHZhbGlkYXRlSW5zdHJ1bWVudCA9IChcbiAgICAgICAgc2hvdWxkU2hvd051bWJlckZpZWxkOiBib29sZWFuLFxuICAgICAgICBzZWxlY3RlZEluc3RydW1lbnQ6IENhcmRJbnN0cnVtZW50LFxuICAgICkgPT4ge1xuICAgICAgICByZWYuY3VycmVudC5zaG91bGRTaG93TnVtYmVyRmllbGQgPSBzaG91bGRTaG93TnVtYmVyRmllbGQ7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxBZHllblYzQ2FyZFZhbGlkYXRpb25cbiAgICAgICAgICAgICAgICBjYXJkVmFsaWRhdGlvblN0YXRlPXtjYXJkVmFsaWRhdGlvblN0YXRlfVxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q9e21ldGhvZH1cbiAgICAgICAgICAgICAgICBzZWxlY3RlZEluc3RydW1lbnQ9e3NlbGVjdGVkSW5zdHJ1bWVudH1cbiAgICAgICAgICAgICAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ9e3Nob3VsZFNob3dOdW1iZXJGaWVsZH1cbiAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25GaWVsZHNDb250YWluZXJJZD17Y2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaXNBY2NvdW50SW5zdHJ1bWVudCA9ICgpID0+IHtcbiAgICAgICAgc3dpdGNoIChtZXRob2QubWV0aG9kKSB7XG4gICAgICAgICAgICBjYXNlICdkaXJlY3RFYmFua2luZyc6XG4gICAgICAgICAgICBjYXNlICdnaXJvcGF5JzpcbiAgICAgICAgICAgIGNhc2UgJ2lkZWFsJzpcbiAgICAgICAgICAgIGNhc2UgJ3NlcGFkaXJlY3RkZWJpdCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGlzTG9hZGluZyA9XG4gICAgICAgIGNoZWNrb3V0U3RhdGUuc3RhdHVzZXMuaXNMb2FkaW5nSW5zdHJ1bWVudHMoKSB8fFxuICAgICAgICBjaGVja291dFN0YXRlLnN0YXR1c2VzLmlzTG9hZGluZ1BheW1lbnRNZXRob2QobWV0aG9kLmlkKTtcblxuICAgIGNvbnN0IGZvcm1Db250ZXh0UHJvcHMgPSB7XG4gICAgICAgIGlzU3VibWl0dGVkOiBwYXltZW50Rm9ybS5pc1N1Ym1pdHRlZCgpLFxuICAgICAgICBzZXRTdWJtaXR0ZWQ6IHBheW1lbnRGb3JtLnNldFN1Ym1pdHRlZCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPEZvcm1Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXtmb3JtQ29udGV4dFByb3BzfT5cbiAgICAgICAgICAgIDxDaGVja291dENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgY2hlY2tvdXRTdGF0ZSwgY2hlY2tvdXRTZXJ2aWNlIH19PlxuICAgICAgICAgICAgICAgIDxMb2NhbGVQcm92aWRlciBjaGVja291dFNlcnZpY2U9e2NoZWNrb3V0U2VydmljZX0+XG4gICAgICAgICAgICAgICAgICAgIDxQYXltZW50Rm9ybUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgcGF5bWVudEZvcm0gfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TG9hZGluZ092ZXJsYXkgaGlkZUNvbnRlbnRXaGVuTG9hZGluZyBpc0xvYWRpbmc9e2lzTG9hZGluZ30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFkeWVuVjNGb3JtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsuLi5yZXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWQ9e2FkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQWRkaXRpb25hbEFjdGlvbk1vZGFsRmxvdz17Y2FuY2VsQWRkaXRpb25hbEFjdGlvbk1vZGFsRmxvd31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tvdXRTZXJ2aWNlPXtjaGVja291dFNlcnZpY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrb3V0U3RhdGU9e2NoZWNrb3V0U3RhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkPXtjb250YWluZXJJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUNvbnRlbnRXaGVuU2lnbmVkT3V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemVQYXltZW50PXtpbml0aWFsaXplQWR5ZW5QYXltZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FjY291bnRJbnN0cnVtZW50PXtpc0FjY291bnRJbnN0cnVtZW50KCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTW9kYWxWaXNpYmxlPXtpc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZT17bGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZD17bWV0aG9kfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVuaGFuZGxlZEVycm9yPXtvblVuaGFuZGxlZEVycm9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50Rm9ybT17cGF5bWVudEZvcm19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZEhpZGVJbnN0cnVtZW50RXhwaXJ5RGF0ZT17c2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRSZW5kZXJBZGRpdGlvbmFsQWN0aW9uQ29udGVudE1vZGFsPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUluc3RydW1lbnQ9e3ZhbGlkYXRlSW5zdHJ1bWVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Mb2FkaW5nT3ZlcmxheT5cbiAgICAgICAgICAgICAgICAgICAgPC9QYXltZW50Rm9ybUNvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgPC9Mb2NhbGVQcm92aWRlcj5cbiAgICAgICAgICAgIDwvQ2hlY2tvdXRDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgICA8L0Zvcm1Db250ZXh0LlByb3ZpZGVyPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVDb21wb25lbnQ8UGF5bWVudE1ldGhvZFByb3BzLCBQYXltZW50TWV0aG9kUmVzb2x2ZUlkPihcbiAgICBBZHllblYzUGF5bWVudE1ldGhvZCxcbiAgICBbeyBnYXRld2F5OiAnYWR5ZW52MycgfV0sXG4pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv3/AdyenV3PaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/index.ts":
/*!*************************************************!*\
  !*** ./packages/adyen-integration/src/index.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdyenV2PaymentMethod: () => (/* reexport safe */ _adyenv2_AdyenV2PaymentMethod__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   AdyenV3PaymentMethod: () => (/* reexport safe */ _adyenv3_AdyenV3PaymentMethod__WEBPACK_IMPORTED_MODULE_1__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _adyenv2_AdyenV2PaymentMethod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adyenv2/AdyenV2PaymentMethod */ \"./packages/adyen-integration/src/adyenv2/AdyenV2PaymentMethod.tsx\");\n/* harmony import */ var _adyenv3_AdyenV3PaymentMethod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./adyenv3/AdyenV3PaymentMethod */ \"./packages/adyen-integration/src/adyenv3/AdyenV3PaymentMethod.tsx\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpRjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvaW5kZXgudHM/ZTYxNyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBkZWZhdWx0IGFzIEFkeWVuVjJQYXltZW50TWV0aG9kIH0gZnJvbSAnLi9hZHllbnYyL0FkeWVuVjJQYXltZW50TWV0aG9kJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQWR5ZW5WM1BheW1lbnRNZXRob2QgfSBmcm9tICcuL2FkeWVudjMvQWR5ZW5WM1BheW1lbnRNZXRob2QnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/index.ts\n\n}");

/***/ })

}]);
"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["amazon-pay-v2-payment-method"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/amazon-pay.js":
/*!**************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/amazon-pay.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAmazonPayV2ButtonStrategy: () => (/* binding */ F),\n/* harmony export */   createAmazonPayV2CustomerStrategy: () => (/* binding */ N),\n/* harmony export */   createAmazonPayV2PaymentStrategy: () => (/* binding */ B)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"../checkout-sdk-js/node_modules/@bigcommerce/request-sender/esm/index.js\");\nvar o,a;class r extends Error{constructor(t){var e;super(t||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",e=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}!function(t){t[t.MissingBillingAddress=0]=\"MissingBillingAddress\",t[t.MissingCart=1]=\"MissingCart\",t[t.MissingCheckout=2]=\"MissingCheckout\",t[t.MissingConsignments=3]=\"MissingConsignments\",t[t.MissingCustomer=4]=\"MissingCustomer\",t[t.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",t[t.MissingOrder=6]=\"MissingOrder\",t[t.MissingOrderConfig=7]=\"MissingOrderConfig\",t[t.MissingOrderId=8]=\"MissingOrderId\",t[t.MissingPayment=9]=\"MissingPayment\",t[t.MissingPaymentId=10]=\"MissingPaymentId\",t[t.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",t[t.MissingPaymentMethod=12]=\"MissingPaymentMethod\",t[t.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",t[t.MissingPaymentStatus=14]=\"MissingPaymentStatus\",t[t.MissingPaymentToken=15]=\"MissingPaymentToken\",t[t.MissingShippingAddress=16]=\"MissingShippingAddress\"}(o||(o={}));class s extends r{constructor(t){super(function(t){switch(t){case o.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case o.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case o.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case o.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case o.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case o.MissingCheckoutConfig:case o.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case o.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case o.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case o.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case o.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case o.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case o.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(t)),this.subtype=t,this.name=\"MissingDataError\",this.type=\"missing_data\"}}function c(t){return e=t.lineItems.physicalItems.filter(t=>!t.addedByPromotion),(0,lodash__WEBPACK_IMPORTED_MODULE_1__.reduce)(e,(t,e)=>t+e.quantity,0);// removed by dead control flow\n var e; }function u(t,e){if(null==t)throw e?e():new Error(\"An unexpected error has occurred.\");return t}!function(t){t[t.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",t[t.CustomerNotInitialized=1]=\"CustomerNotInitialized\",t[t.PaymentNotInitialized=2]=\"PaymentNotInitialized\",t[t.ShippingNotInitialized=3]=\"ShippingNotInitialized\",t[t.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(a||(a={}));class d extends r{constructor(t){super(function(t){switch(t){case a.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case a.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case a.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case a.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(t)),this.subtype=t,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}const h={de:\"eu\",jp:\"fe\",uk:\"eu\",us:\"na\"};var l,y,m,p,g,P;!function(t){t.en_US=\"en_US\",t.en_GB=\"en_GB\",t.de_DE=\"de_DE\",t.fr_FR=\"fr_FR\",t.it_IT=\"it_IT\",t.es_ES=\"es_ES\",t.ja_JP=\"ja_JP\"}(l||(l={})),function(t){t.Home=\"Home\",t.Product=\"Product\",t.Cart=\"Cart\",t.Checkout=\"Checkout\",t.Other=\"Other\"}(y||(y={})),function(t){t.USD=\"USD\",t.EUR=\"EUR\",t.GBP=\"GBP\",t.JPY=\"JPY\"}(m||(m={})),function(t){t.PayAndShip=\"PayAndShip\",t.PayOnly=\"PayOnly\"}(p||(p={})),function(t){t.Gold=\"Gold\",t.LightGray=\"LightGray\",t.DarkGray=\"DarkGray\"}(g||(g={})),function(t){t.C0001=\"C0001\"}(P||(P={}));var f=function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((i=i.apply(t,e||[])).next())})};class b{constructor(t){this.amazonPayV2ScriptLoader=t}initialize(t){return f(this,void 0,void 0,function*(){this.amazonPayV2SDK=yield this.amazonPayV2ScriptLoader.load(t),this.buttonParentContainer=this.buttonParentContainer||this.createAmazonPayButtonParentContainer()})}deinitialize(){var t;return this.amazonPayV2Button=void 0,null===(t=this.buttonParentContainer)||void 0===t||t.remove(),this.buttonParentContainer=void 0,this.amazonPayV2SDK=void 0,Promise.resolve()}bindButton(t,e,n){this.getAmazonPayV2SDK().Pay.bindChangeAction(`#${t}`,{amazonCheckoutSessionId:e,changeAction:n})}createButton(t,e){this.amazonPayV2Button=this.getAmazonPayV2SDK().Pay.renderButton(`#${t}`,e)}prepareCheckout(t){const e=this.prepareRequestConfig(t);this.getAmazonPayV2Button().onClick(()=>{this.getAmazonPayV2Button().initCheckout(e)})}prepareCheckoutWithCreationRequestConfig(t){this.getAmazonPayV2Button().onClick(()=>f(this,void 0,void 0,function*(){const e=yield t();if(e){const t=this.prepareRequestConfig(e.createCheckoutSessionConfig,e.estimatedOrderAmount,e.productType);this.getAmazonPayV2Button().initCheckout(t)}}))}signout(){return f(this,void 0,void 0,function*(){return this.amazonPayV2SDK&&this.amazonPayV2SDK.Pay.signout(),Promise.resolve()})}renderAmazonPayButton({buttonColor:t,checkoutState:e,containerId:n,decoupleCheckoutInitiation:i=!1,methodId:o,options:a,placement:r,isButtonMicroTextDisabled:s=!1}){const c=document.querySelector(`#${n}`);if(!c)return;const{id:u}=c.appendChild(this.getButtonParentContainer());a&&s&&(a.design=P.C0001);const d=null!=a?a:this.getAmazonPayV2ButtonOptions(e,o,r,i,t);return this.createButton(u,d),this.getButtonParentContainer()}updateBuyNowFlowFlag(t){this.isBuyNowFlow=Boolean(t)}isPh4Enabled(t,e){const n=!!t[\"PROJECT-3483.amazon_pay_ph4\"],i=!!t[\"INT-6885.amazon_pay_ph4_us_only\"];return n&&i?\"US\"===e:n}prepareRequestConfig(t,e,n){const{publicKeyId:i}=t,o=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n}(t,[\"publicKeyId\"]);return Object.assign(Object.assign({createCheckoutSessionConfig:this.isEnvironmentSpecific(i)?o:t},e&&{estimatedOrderAmount:e}),n&&{productType:n})}createAmazonPayButtonParentContainer(){const t=Math.random().toString(16).substr(-4),e=document.createElement(\"div\");return e.id=`amazonpay_button_parent_container_${t}`,e}getAmazonPayV2ButtonOptions(t,e,n,i=!1,a=g.Gold){var r;const{getCart:u,getCheckout:d,getStoreConfigOrThrow:h,getPaymentMethodOrThrow:l}=this.getCheckoutState(t),{config:{merchantId:y,testMode:m},initializationData:f}=l(e);if(!f)throw new s(o.MissingPaymentMethod);const{checkoutLanguage:b,checkoutSessionMethod:v,createCheckoutSessionConfig:C,extractAmazonCheckoutSessionId:z,ledgerCurrency:w,publicKeyId:S=\"\",isButtonMicroTextDisabled:I}=f;if(!y||!w)throw new s(o.MissingPaymentMethod);const _=Object.assign({merchantId:y,ledgerCurrency:w,checkoutLanguage:b,placement:n,buttonColor:a},I?{design:P.C0001}:{});if(this.isBuyNowFlow)return Object.assign(Object.assign({},_),{sandbox:!!m});const O=u();_.productType=O&&0===c(O)?p.PayOnly:p.PayAndShip;const{checkoutSettings:{features:k},storeProfile:{shopPath:M,storeCountryCode:B}}=h();if(this.isPh4Enabled(k,B)){if(!C)throw new s(o.MissingPaymentMethod);const t=null===(r=d())||void 0===r?void 0:r.outstandingBalance.toString(),e=null==O?void 0:O.currency.code,n=Object.assign({},_);let a;return this.isEnvironmentSpecific(S)?(n.publicKeyId=S,a=C):(n.sandbox=!!m,a=Object.assign(Object.assign({},C),{publicKeyId:S})),i||(n.createCheckoutSessionConfig=a),t&&e&&(n.estimatedOrderAmount={amount:t,currencyCode:e}),n}const A={method:v,url:`${M}/remote-checkout/${e}/payment-session`,extractAmazonCheckoutSessionId:z};return Object.assign(Object.assign({},_),{createCheckoutSession:A,sandbox:!!m})}isEnvironmentSpecific(t){return/^(SANDBOX|LIVE)/.test(t)}getAmazonPayV2SDK(){return this.getOrThrow(this.amazonPayV2SDK)}getButtonParentContainer(){return this.getOrThrow(this.buttonParentContainer)}getAmazonPayV2Button(){return this.getOrThrow(this.amazonPayV2Button)}getOrThrow(t){return u(t,()=>new d(a.PaymentNotInitialized))}getCheckoutState(t){return\"object\"==typeof(e=t)&&null!==e&&\"cart\"in e&&\"checkout\"in e&&\"config\"in e&&\"paymentMethods\"in e?{getCart:t.cart.getCart,getCheckout:t.checkout.getCheckout,getStoreConfigOrThrow:t.config.getStoreConfigOrThrow,getPaymentMethodOrThrow:e=>t.paymentMethods.getPaymentMethodOrThrow(e)}:t;// removed by dead control flow\n var e; }}class v extends r{constructor(t){super(t||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class C{constructor(t,e=window){this.scriptLoader=t,this.windowWithAmazonPay=e}load(t){return e=this,n=void 0,o=function*(){const{initializationData:e}=t,n=(null==e?void 0:e.region)||\"us\",i=h[n];if(yield this.scriptLoader.loadScript(`https://static-${i}.payments-amazon.com/checkout.js`),!this.windowWithAmazonPay.amazon)throw new v;return this.windowWithAmazonPay.amazon},new((i=void 0)||(i=Promise))(function(t,a){function r(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i(function(t){t(n)})).then(r,s)}c((o=o.apply(e,n||[])).next())});// removed by dead control flow\n var e, n, i, o; }}function z(){return new b(new C((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()))}function w(t,e){return Object.assign(t,{resolveIds:e})}class S extends r{constructor(t){super(t||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class I extends S{constructor(t){let e=\"Unable to submit payment for the order because the payload is invalid.\";t&&(e=`${e} Make sure the following fields are provided correctly: ${t.join(\", \")}.`),super(e),this.name=\"PaymentArgumentInvalidError\"}}class _ extends r{constructor(t){super(t||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}class O extends r{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}var k=function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((i=i.apply(t,e||[])).next())})};class M{constructor(t,e){this.paymentIntegrationService=t,this.amazonPayV2PaymentProcessor=e}initialize(t){return k(this,void 0,void 0,function*(){const{methodId:e,amazonpay:n}=t;if(!e)throw new S('Unable to proceed because \"methodId\" argument is not provided.');const i=this.paymentIntegrationService.getState(),{features:o}=i.getStoreConfigOrThrow().checkoutSettings,a=i.getPaymentMethodOrThrow(e),r=a.initializationData||{},{paymentToken:s=\"\",region:c=\"\",isButtonMicroTextDisabled:u}=r;if(yield this.amazonPayV2PaymentProcessor.initialize(a),this._isReadyToPay(s))(null==n?void 0:n.editButtonId)&&this._bindEditButton(n.editButtonId,s,\"changePayment\",this._isModalFlow(c));else{const{id:t}=this._createContainer();if(this._amazonPayButton=this.amazonPayV2PaymentProcessor.renderAmazonPayButton({checkoutState:i,containerId:t,decoupleCheckoutInitiation:this._isOneTimeTransaction(o,c.toUpperCase()),methodId:e,placement:y.Checkout,isButtonMicroTextDisabled:u}),!this._amazonPayButton)throw new S(\"Unable to render the Amazon Pay button to an invalid HTML container element.\")}})}execute(t,n){return k(this,void 0,void 0,function*(){const{payment:i}=t;if(!i)throw new I([\"payment\"]);const{methodId:o}=i,a=this.paymentIntegrationService.getState(),{features:r}=a.getStoreConfigOrThrow().checkoutSettings,s=a.getPaymentMethodOrThrow(o).initializationData||{},{paymentToken:c=\"\",region:u=\"\"}=s;if(this._isReadyToPay(c)||this._isOneTimeTransaction(r,u.toUpperCase())){const e={methodId:o,paymentData:{nonce:c||\"apb\"}};yield this.paymentIntegrationService.submitOrder(t,n);try{return void(yield this.paymentIntegrationService.submitPayment(e))}catch(t){if(!((t=>\"object\"==typeof t&&null!==t&&\"body\"in t)(t)&&(d=t.body,\"object\"==typeof d&&null!==d&&\"status\"in d&&\"additional_action_required\"in d&&\"additional_action_required\"===d.status&&\"data\"in d.additional_action_required&&\"redirect_url\"in d.additional_action_required.data&&\"string\"==typeof d.additional_action_required.data.redirect_url)))throw t;const{additional_action_required:e}=t.body,{redirect_url:n}=e.data;if(c)return new Promise(()=>window.location.assign(n));this.amazonPayV2PaymentProcessor.prepareCheckout(JSON.parse(n))}}var d;return this._getAmazonPayButton().click(),this._isModalFlow(u)?new Promise((t,e)=>{const n=()=>{window.removeEventListener(\"focus\",n),e(new _(\"Shopper needs to login to Amazonpay to continue\"))};window.addEventListener(\"focus\",n)}):new Promise(lodash__WEBPACK_IMPORTED_MODULE_1__.noop)})}finalize(){return Promise.reject(new O)}deinitialize(){return k(this,void 0,void 0,function*(){yield this.amazonPayV2PaymentProcessor.deinitialize(),this._amazonPayButton=void 0})}_bindEditButton(t,e,n,i){const o=document.getElementById(t);if(o&&o.parentNode){if(!i){const t=o.cloneNode(!0);o.parentNode.replaceChild(t,o),t.addEventListener(\"click\",()=>{this._showLoadingSpinner()})}this.amazonPayV2PaymentProcessor.bindButton(t,e,n)}}_isModalFlow(t){return\"us\"===t}_showLoadingSpinner(){return k(this,void 0,void 0,function*(){yield this.paymentIntegrationService.widgetInteraction(()=>new Promise(lodash__WEBPACK_IMPORTED_MODULE_1__.noop))})}_createContainer(){let t=document.getElementById(\"AmazonPayButton\");return t||(t=document.createElement(\"div\"),t.id=\"AmazonPayButton\",t.style.display=\"none\",document.body.appendChild(t))}_getAmazonPayButton(){return u(this._amazonPayButton,()=>new d(a.PaymentNotInitialized))}_isOneTimeTransaction(t,e){return this.amazonPayV2PaymentProcessor.isPh4Enabled(t,e)&&t[\"INT-6399.amazon_pay_apb\"]}_isReadyToPay(t){return!!t}}const B=w(t=>new M(t,z()),[{id:\"amazonpay\"}]);class A extends r{constructor(t){super(t||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}var T=function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((i=i.apply(t,e||[])).next())})};class V{constructor(t,e){this.paymentIntegrationService=t,this.amazonPayV2PaymentProcessor=e}initialize(t){return T(this,void 0,void 0,function*(){const{methodId:e,amazonpay:n}=t;if(!e||!(null==n?void 0:n.container))throw new S('Unable to proceed because \"methodId\" or \"containerId\" argument is not provided.');let i;try{i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e)}catch(t){yield this.paymentIntegrationService.loadPaymentMethod(e),i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e)}yield this.amazonPayV2PaymentProcessor.initialize(i),this.amazonPayV2PaymentProcessor.renderAmazonPayButton({checkoutState:this.paymentIntegrationService.getState(),containerId:n.container,methodId:e,placement:y.Checkout})})}deinitialize(){return T(this,void 0,void 0,function*(){yield this.amazonPayV2PaymentProcessor.deinitialize()})}signIn(){throw new A('In order to sign in via Amazon, the shopper must click on \"Amazon Pay\" button.')}signOut(t){return T(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getPaymentId();e&&(yield this.amazonPayV2PaymentProcessor.signout(),yield this.paymentIntegrationService.remoteCheckoutSignOut(e.providerId,t))})}executePaymentMethodCheckout(t){var e;return null===(e=null==t?void 0:t.continueWithCheckoutCallback)||void 0===e||e.call(t),Promise.resolve()}}const N=w(t=>new V(t,z()),[{id:\"amazonpay\"}]);class x extends r{constructor(t){super(t||\"An unexpected error has occurred during buy now cart creation process. Please try again later.\"),this.name=\"BuyNowCartCreationError\",this.type=\"buy_now_cart_creation_error\"}}class E extends r{constructor(t){super(t||\"An unexpected error has occurred during config creation process. Please try again later.\"),this.name=\"AmazonPayV2ConfigCreationError\",this.type=\"amazon_pay_v2_config_creation_error\"}}function U(t){return t instanceof Object&&\"buyNowInitializeOptions\"in t}var j,D=function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((i=i.apply(t,e||[])).next())})};class q{constructor(t,e,n){this.paymentIntegrationService=t,this.amazonPayV2PaymentProcessor=e,this.amazonPayV2ConfigRequestSender=n}initialize(t){var e;return D(this,void 0,void 0,function*(){const{methodId:n,containerId:i,amazonpay:o}=t,{buttonColor:a}=o||{};if(!n||!i)throw new S('Unable to proceed because \"methodId\" or \"containerId\" argument is not provided.');const{getPaymentMethodOrThrow:r}=this.paymentIntegrationService.getState(),s=r(n),{initializationData:c}=s;yield this.amazonPayV2PaymentProcessor.initialize(s),o||(yield this.paymentIntegrationService.loadDefaultCheckout());const u=U(o)?void 0:o;U(o)&&\"function\"==typeof(null===(e=o.buyNowInitializeOptions)||void 0===e?void 0:e.getBuyNowCartRequestBody)&&(this._buyNowInitializeOptions=o.buyNowInitializeOptions,this.amazonPayV2PaymentProcessor.updateBuyNowFlowFlag(!0)),this.amazonPayV2PaymentProcessor.renderAmazonPayButton({checkoutState:this.paymentIntegrationService.getState(),containerId:i,methodId:n,options:u,placement:y.Cart,buttonColor:a,isButtonMicroTextDisabled:null==c?void 0:c.isButtonMicroTextDisabled}),this._buyNowInitializeOptions&&this.amazonPayV2PaymentProcessor.prepareCheckoutWithCreationRequestConfig(this._getCheckoutCreationRequestConfig.bind(this))})}deinitialize(){return this.amazonPayV2PaymentProcessor.deinitialize()}_createBuyNowCartOrThrow(){var t,e;return D(this,void 0,void 0,function*(){const n=null===(e=null===(t=this._buyNowInitializeOptions)||void 0===t?void 0:t.getBuyNowCartRequestBody)||void 0===e?void 0:e.call(t);if(!n)throw new s(o.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(n)}catch(t){throw new x}})}_createCheckoutConfig(t){return D(this,void 0,void 0,function*(){try{const e=(yield this.amazonPayV2ConfigRequestSender.createCheckoutConfig(t)).body,{payload:n,public_key:i}=e,o=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n}(e,[\"payload\",\"public_key\"]);return Object.assign({payloadJSON:n,publicKeyId:i},o)}catch(t){throw new E}})}_getCheckoutCreationRequestConfig(){return D(this,void 0,void 0,function*(){const t=yield this._createBuyNowCartOrThrow(),e={amount:String(t.baseAmount),currencyCode:t.currency.code};return{createCheckoutSessionConfig:yield this._createCheckoutConfig(t.id),estimatedOrderAmount:e,productType:0===c(t)?p.PayOnly:p.PayAndShip}})}}!function(t){t.Json=\"application/json\",t.JsonV1=\"application/vnd.bc.v1+json\"}(j||(j={}));const R=j,L={\"X-Checkout-SDK-Version\":\"1.808.0\"};class K{constructor(t){this._requestSender=t}createCheckoutConfig(t){const e={cartId:t},n=Object.assign({\"X-API-INTERNAL\":\"This API endpoint is for internal use only and may change in the future\",\"Content-Type\":R.Json},L);return this._requestSender.post(\"/api/storefront/payment/amazonpay\",{headers:n,body:e})}}const F=w(t=>{const e=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),n=new K(e),o=z();return new q(t,o,n)},[{id:\"amazonpay\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9hbWF6b24tcGF5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFDQSxJQ0NZQSxFQ0FBQyxFQ0tHLE1BQWVDLFVBQXNCQyxNQUloRCxXQUFBQyxDQUFZQyxHQ1hELElBQXFDQyxFRFk1Q0MsTUFBTUYsR0FBVyxxQ0FKckIsS0FBQUcsS0FBTyxnQkFDUCxLQUFBQyxLQUFPLFdDVHlDSCxhRGNaQSxVQ2JoQ0ksT0FBT0MsZUFDUEQsT0FBT0MsZURZUUMsS0NaZU4sR0RZZk0sS0NWUkMsVUFBWVAsRURZb0IsbUJBQTVCSCxNQUFNVyxrQkFDYlgsTUFBTVcsa0JBQWtCRixpQkFFeEJBLEtBQUtHLE1BQVEsSUFBSVosTUFBTVMsS0FBS1AsU0FBU1UsS0FFN0MsR0ZuQkosU0FBWWYsR0FDUixxREFDQSxpQ0FDQSx5Q0FDQSxpREFDQSx5Q0FDQSxxREFDQSxtQ0FDQSwrQ0FDQSx1Q0FDQSx1Q0FDQSw0Q0FDQSw0REFDQSxvREFDQSw4REFDQSxvREFDQSxrREFDQSx1REFDSCxDQWxCRCxDQUFZQSxJQUFBQSxFQUFvQixLQXlCakIsTUFBTWdCLFVBQXlCZCxFQUMxQyxXQUFBRSxDQUFtQmEsR0FDZlYsTUFPUixTQUF5QkUsR0FDckIsT0FBUUEsR0FDSixLQUFLVCxFQUFxQmtCLHNCQUN0QixNQUFPLGlFQUVYLEtBQUtsQixFQUFxQm1CLFlBQ3RCLE1BQU8sc0RBRVgsS0FBS25CLEVBQXFCb0Isb0JBQ3RCLE1BQU8sOERBRVgsS0FBS3BCLEVBQXFCcUIsZ0JBQ3RCLE1BQU8sMERBRVgsS0FBS3JCLEVBQXFCc0IsZ0JBQ3RCLE1BQU8sMERBRVgsS0FBS3RCLEVBQXFCdUIsc0JBQzFCLEtBQUt2QixFQUFxQndCLG1CQUN0QixNQUFPLCtEQUVYLEtBQUt4QixFQUFxQnlCLGFBQ3RCLE1BQU8sdURBRVgsS0FBS3pCLEVBQXFCMEIsZUFDdEIsTUFBTywwRUFFWCxLQUFLMUIsRUFBcUIyQixlQUN0QixNQUFPLHlEQUVYLEtBQUszQixFQUFxQjRCLG9CQUN0QixNQUFPLCtFQUVYLEtBQUs1QixFQUFxQjZCLHFCQUN0QixNQUFPLDJGQUVYLEtBQUs3QixFQUFxQjhCLHVCQUN0QixNQUFPLGtFQUVYLFFBQ0ksTUFBTyw4REFFbkIsQ0FqRGNDLENBQWdCZCxJQURQLEtBQUFBLFFBQUFBLEVBR2ZMLEtBQUtKLEtBQU8sbUJBQ1pJLEtBQUtILEtBQU8sY0FDaEIsRUk3QlcsU0FBU3VCLEVBQXVCQyxHQUMzQyxPQ0RzQ0MsRURDYkQsRUFBS0MsVUFBVUMsY0FBY0MsT0FBUUMsSUFBVUEsRUFBS0Msa0JDQXRFQyw4Q0FBQUEsQ0FBT0wsRUFBVyxDQUFDTSxFQUFPSCxJQUFtQkcsRUFBUUgsRUFBS0ksU0FBVSxHQURoRTtBQUFBLFFERWYsQ0VOZSxTQUFTQyxFQUFTQyxFQUFVQyxHQUN2QyxHQUFJRCxRQUNBLE1BQU1DLEVBQWVBLElBQWlCLElBQUl6QyxNQUFNLHFDQUdwRCxPQUFPd0MsQ0FDWCxFTEpBLFNBQVkxQyxHQUNSLG1FQUNBLHVEQUNBLHFEQUNBLHVEQUNBLGtFQUNILENBTkQsQ0FBWUEsSUFBQUEsRUFBdUIsS0FhcEIsTUFBTTRDLFVBQTRCM0MsRUFDN0MsV0FBQUUsQ0FBbUJhLEdBQ2ZWLE1BT1IsU0FBeUJFLEdBQ3JCLE9BQVFBLEdBQ0osS0FBS1IsRUFBd0I2Qyx1QkFDekIsTUFBTyxvRkFFWCxLQUFLN0MsRUFBd0I4QyxzQkFDekIsTUFBTyxtRkFFWCxLQUFLOUMsRUFBd0IrQyx1QkFDekIsTUFBTyxvRkFFWCxLQUFLL0MsRUFBd0JnRCw2QkFDekIsTUFBTyxtRkFFWCxRQUNJLE1BQU8sNkVBRW5CLENBeEJjLENBQWdCaEMsSUFEUCxLQUFBQSxRQUFBQSxFQUdmTCxLQUFLSixLQUFPLHNCQUNaSSxLQUFLSCxLQUFPLGlCQUNoQixFTWlMRyxNQUFNeUMsRUFBZ0QsQ0FDekRDLEdBQUksS0FDSkMsR0FBSSxLQUNKQyxHQUFJLEtBQ0pDLEdBQUksTUFJUixJQUFZQyxFQVlBQyxFQWtCQUMsRUFPQUMsRUFRQUMsRUFNQUMsR0FuRFosU0FBWUwsR0FDUixnQkFDQSxnQkFDQSxnQkFDQSxnQkFDQSxnQkFDQSxnQkFDQSxlQUNILENBUkQsQ0FBWUEsSUFBQUEsRUFBMkIsS0FZdkMsU0FBWUMsR0FFUixjQUdBLG9CQUdBLGNBR0Esc0JBR0EsZUFDSCxDQWZELENBQVlBLElBQUFBLEVBQW9CLEtBa0JoQyxTQUFZQyxHQUNSLFlBQ0EsWUFDQSxZQUNBLFdBQ0gsQ0FMRCxDQUFZQSxJQUFBQSxFQUF5QixLQU9yQyxTQUFZQyxHQUVSLDBCQUdBLG1CQUNILENBTkQsQ0FBWUEsSUFBQUEsRUFBcUIsS0FRakMsU0FBWUMsR0FDUixjQUNBLHdCQUNBLHFCQUNILENBSkQsQ0FBWUEsSUFBQUEsRUFBc0IsS0FNbEMsU0FBWUMsR0FDUixlQUNILENBRkQsQ0FBWUEsSUFBQUEsRUFBdUIsSyxzU0MvTnBCLE1BQU1DLEVBTWpCLFdBQUF6RCxDQUFvQjBELEdBQUEsS0FBQUEsd0JBQUFBLENBQW1ELENBRWpFLFVBQUFDLENBQVdDLEcsd0NBQ2JwRCxLQUFLcUQscUJBQXVCckQsS0FBS2tELHdCQUF3QkksS0FBS0YsR0FDOURwRCxLQUFLdUQsc0JBQ0R2RCxLQUFLdUQsdUJBQXlCdkQsS0FBS3dELHNDQUMzQyxFLENBRUEsWUFBQUMsRyxNQU1JLE9BTEF6RCxLQUFLMEQsdUJBQW9CQyxFQUNDLFFBQTFCLEVBQUEzRCxLQUFLdUQsNkJBQXFCLFNBQUVLLFNBQzVCNUQsS0FBS3VELDJCQUF3QkksRUFDN0IzRCxLQUFLcUQsb0JBQWlCTSxFQUVmRSxRQUFRQyxTQUNuQixDQUVBLFVBQUFDLENBQ0lDLEVBQ0FDLEVBQ0FDLEdBRUFsRSxLQUFLbUUsb0JBQW9CQyxJQUFJQyxpQkFBaUIsSUFBSUwsSUFBWSxDQUMxRE0sd0JBQXlCTCxFQUN6QkMsZ0JBRVIsQ0FFQSxZQUFBSyxDQUFhQyxFQUFxQkMsR0FDOUJ6RSxLQUFLMEQsa0JBQW9CMUQsS0FBS21FLG9CQUFvQkMsSUFBSU0sYUFDbEQsSUFBSUYsSUFDSkMsRUFFUixDQUVBLGVBQUFFLENBQWdCQyxHQUNaLE1BQU1DLEVBQWdCN0UsS0FBSzhFLHFCQUFxQkYsR0FFaEQ1RSxLQUFLK0UsdUJBQXVCQyxRQUFRLEtBQ2hDaEYsS0FBSytFLHVCQUF1QkUsYUFBYUosSUFFakQsQ0FFQSx3Q0FBQUssQ0FDSUMsR0FTQW5GLEtBQUsrRSx1QkFBdUJDLFFBQVEsSUFBWSxFQUFELCtCQUMzQyxNQUFNSSxRQUFlRCxJQUVyQixHQUFJQyxFQUFRLENBQ1IsTUFBTVAsRUFBZ0I3RSxLQUFLOEUscUJBQ3ZCTSxFQUFPUiw0QkFDUFEsRUFBT0MscUJBQ1BELEVBQU9FLGFBR1h0RixLQUFLK0UsdUJBQXVCRSxhQUFhSixFLENBRWpELEdBQ0osQ0FFTSxPQUFBVSxHLHdDQUtGLE9BSkl2RixLQUFLcUQsZ0JBQ0xyRCxLQUFLcUQsZUFBZWUsSUFBSW1CLFVBR3JCMUIsUUFBUUMsU0FDbkIsRSxDQUVBLHFCQUFBMEIsRUFBc0IsWUFDbEJDLEVBQVcsY0FDWEMsRUFBYSxZQUNibEIsRUFBVywyQkFDWG1CLEdBQTZCLEVBQUssU0FDbENDLEVBQVEsUUFDUm5CLEVBQU8sVUFDUG9CLEVBQVMsMEJBQ1RDLEdBQTRCLElBRTVCLE1BQU1DLEVBQVlDLFNBQVNDLGNBQTJCLElBQUl6QixLQUUxRCxJQUFLdUIsRUFDRCxPQUdKLE1BQVFHLEdBQUlDLEdBQXNCSixFQUFVSyxZQUFZcEcsS0FBS3FHLDRCQUV6RDVCLEdBQVdxQixJQUNYckIsRUFBUTZCLE9BQVN0RCxFQUF3QnVELE9BRzdDLE1BQU1DLEVBQ0YvQixRQUFBQSxFQUNBekUsS0FBS3lHLDRCQUNEZixFQUNBRSxFQUNBQyxFQUNBRixFQUNBRixHQUtSLE9BRkF6RixLQUFLdUUsYUFBYTRCLEVBQW1CSyxHQUU5QnhHLEtBQUtxRywwQkFDaEIsQ0FFQSxvQkFBQUssQ0FBcUJDLEdBQ2pCM0csS0FBSzJHLGFBQWVDLFFBQVFELEVBQ2hDLENBS0EsWUFBQUUsQ0FDSUMsRUFDQUMsR0FFQSxNQUFNRixJQUFpQkMsRUFBUywrQkFDMUJFLElBQWdCRixFQUFTLG1DQUUvQixPQUFJRCxHQUFnQkcsRUFDWSxPQUFyQkQsRUFHSkYsQ0FDWCxDQUVRLG9CQUFBL0IsQ0FDSkYsRUFDQVMsRUFDQUMsR0FFQSxNQUFNLFlBQUUyQixHQUFrQ3JDLEVBQWxCc0MsRSx5VUFBYSxDQUFLdEMsRUFBcEMsaUJBRU4sT0FBTyxPQUFQLHNCQUNJQSw0QkFBNkI1RSxLQUFLbUgsc0JBQXNCRixHQUNsREMsRUFDQXRDLEdBQ0ZTLEdBQXdCLENBQUVBLHlCQUMxQkMsR0FBZSxDQUFFQSxlQUU3QixDQUVRLG9DQUFBOUIsR0FDSixNQUFNNEQsRUFBTUMsS0FBS0MsU0FBU0MsU0FBUyxJQUFJQyxRQUFRLEdBQ3pDQyxFQUFrQnpCLFNBQVMwQixjQUFjLE9BSS9DLE9BRkFELEVBQWdCdkIsR0FBSyxxQ0FBcUNrQixJQUVuREssQ0FDWCxDQUVRLDJCQUFBaEIsQ0FDSmYsRUFDQUUsRUFDQUMsRUFDQUYsR0FBNkIsRUFDN0JGLEVBQWMxQyxFQUF1QjRFLE0sTUFFckMsTUFBTSxRQUFFQyxFQUFPLFlBQUVDLEVBQVcsc0JBQUVDLEVBQXFCLHdCQUFFQyxHQUNqRC9ILEtBQUtnSSxpQkFBaUJ0QyxJQUV0Qk4sUUFBUSxXQUFFNkMsRUFBVSxTQUFFQyxHQUFVLG1CQUNoQ0MsR0FDQUosRUFBc0RuQyxHQUUxRCxJQUFLdUMsRUFDRCxNQUFNLElBQUkvSCxFQUFpQmhCLEVBQXFCNkIsc0JBR3BELE1BQU0saUJBQ0ZtSCxFQUFnQixzQkFDaEJDLEVBQXFCLDRCQUNyQnpELEVBQTJCLCtCQUMzQjBELEVBQThCLGVBQzlCQyxFQUFjLFlBQ2R0QixFQUFjLEdBQUUsMEJBQ2hCbkIsR0FDQXFDLEVBRUosSUFBS0YsSUFBZU0sRUFDaEIsTUFBTSxJQUFJbkksRUFBaUJoQixFQUFxQjZCLHNCQUdwRCxNQUFNdUgsRUFBZ0IsZUFDbEJQLGFBQ0FNLGlCQUNBSCxtQkFDQXZDLFlBQ0FKLGVBQ0lLLEVBQTRCLENBQUVRLE9BQVF0RCxFQUF3QnVELE9BQVUsQ0FBQyxHQUdqRixHQUFJdkcsS0FBSzJHLGFBQ0wsT0FBTyxPQUFQLHdCQUNPNkIsR0FBZ0IsQ0FDbkJDLFVBQVdQLElBSW5CLE1BQU03RyxFQUFPdUcsSUFFYlksRUFBaUJsRCxZQUNiakUsR0FBeUMsSUFBakNELEVBQXVCQyxHQUN6QnlCLEVBQXNCNEYsUUFDdEI1RixFQUFzQjZGLFdBRWhDLE1BQ0lDLGtCQUFrQixTQUFFOUIsR0FDcEIrQixjQUFjLFNBQUVDLEVBQVEsaUJBQUUvQixJQUMxQmUsSUFFSixHQUFJOUgsS0FBSzZHLGFBQWFDLEVBQVVDLEdBQW1CLENBQy9DLElBQUtuQyxFQUNELE1BQU0sSUFBSXhFLEVBQWlCaEIsRUFBcUI2QixzQkFHcEQsTUFBTThILEVBQXNCLFFBQWIsRUFBQWxCLFdBQWEsZUFBRW1CLG1CQUFtQnpCLFdBQzNDMEIsRUFBZTVILGFBQUksRUFBSkEsRUFBTTZILFNBQVNDLEtBQzlCQyxFQUFhLGlCQUFvQ1osR0FDdkQsSUFBSWEsRUFrQkosT0FoQklySixLQUFLbUgsc0JBQXNCRixJQUMzQm1DLEVBQWNuQyxZQUFjQSxFQUM1Qm9DLEVBQVl6RSxJQUVad0UsRUFBY1gsVUFBWVAsRUFDMUJtQixFQUFZLE9BQUgsd0JBQVF6RSxHQUEyQixDQUFFcUMsaUJBRzdDdEIsSUFDRHlELEVBQWN4RSw0QkFBOEJ5RSxHQUc1Q04sR0FBVUUsSUFDVkcsRUFBYy9ELHFCQUF1QixDQUFFMEQsU0FBUUUsaUJBRzVDRyxDLENBR1gsTUFBTUUsRUFBd0IsQ0FDMUJDLE9BQVFsQixFQUNSbUIsSUFBSyxHQUFHVixxQkFBNEJsRCxvQkFDcEMwQyxrQ0FHSixPQUFPLE9BQVAsd0JBQ09FLEdBQWdCLENBQ25CYyx3QkFDQWIsVUFBV1AsR0FFbkIsQ0FFUSxxQkFBQWYsQ0FBc0JGLEdBQzFCLE1BQU8sa0JBQWtCd0MsS0FBS3hDLEVBQ2xDLENBRVEsaUJBQUE5QyxHQUNKLE9BQU9uRSxLQUFLMEosV0FBVzFKLEtBQUtxRCxlQUNoQyxDQUVRLHdCQUFBZ0QsR0FDSixPQUFPckcsS0FBSzBKLFdBQVcxSixLQUFLdUQsc0JBQ2hDLENBRVEsb0JBQUF3QixHQUNKLE9BQU8vRSxLQUFLMEosV0FBVzFKLEtBQUswRCxrQkFDaEMsQ0FFUSxVQUFBZ0csQ0FBYzNILEdBQ2xCLE9BQU9ELEVBQ0hDLEVBQ0EsSUFBTSxJQUFJRSxFQUFvQjVDLEVBQXdCOEMsdUJBRTlELENBR1EsZ0JBQUE2RixDQUNKdEMsR0FLQSxNQ3JVNkIsaUJBSGpDaUUsRUR3VW9DakUsSUNwVVYsT0FBdEJpRSxHQUNBLFNBQVVBLEdBQ1YsYUFBY0EsR0FDZCxXQUFZQSxHQUNaLG1CQUFvQkEsRURpVVQsQ0FDSC9CLFFBQVNsQyxFQUFjckUsS0FBS3VHLFFBQzVCQyxZQUFhbkMsRUFBY2tFLFNBQVMvQixZQUNwQ0Msc0JBQXVCcEMsRUFBY04sT0FBTzBDLHNCQUM1Q0Msd0JBQTZCbkMsR0FDekJGLEVBQWNtRSxlQUFlOUIsd0JBQTJCbkMsSUFJN0RGLEVDblZSO0FBQUEsUURvVkgsRUVoVlcsTUFBTW9FLFVBQTRDeEssRUFDN0QsV0FBQUUsQ0FBWUMsR0FDUkUsTUFDSUYsR0FDSSx1R0FHUk8sS0FBS0osS0FBTyxzQ0FDWkksS0FBS0gsS0FBTyxtQ0FDaEIsRUNEVyxNQUFNa0ssRUFDakIsV0FBQXZLLENBQ1l3SyxFQUNBQyxFQUE2Q0MsUUFEN0MsS0FBQUYsYUFBQUEsRUFDQSxLQUFBQyxvQkFBQUEsQ0FDVCxDQUVHLElBQUEzRyxDQUFLaUcsRyxxQ0FDUCxNQUFNLG1CQUFFcEIsR0FBdUJvQixFQUN6QlksR0FBU2hDLGFBQWtCLEVBQWxCQSxFQUFvQmdDLFNBQVUsS0FFdkNDLEVBQW9COUgsRUFBbUI2SCxHQU03QyxTQUpNbkssS0FBS2dLLGFBQWFLLFdBQ3BCLGtCQUFrQkQsc0NBR2pCcEssS0FBS2lLLG9CQUFvQkssT0FDMUIsTUFBTSxJQUFJUixFQUdkLE9BQU85SixLQUFLaUssb0JBQW9CSyxNQUNwQyxFO21CQzlCVyxTQUFTQyxJQUNwQixPQUFPLElBQUl0SCxFQUE0QixJQUFJOEcsRUFBd0JTLDJFQUFBQSxJQUN2RSxDQ0xlLFNBQVNDLEVBQ3BCQyxFQUNBQyxHQUVBLE9BQU83SyxPQUFPOEssT0FBT0YsRUFBUSxDQUFFQyxjQUNuQyxDQ0FlLE1BQU1FLFVBQTZCdkwsRUFDOUMsV0FBQUUsQ0FBWUMsR0FDUkUsTUFBTUYsR0FBVyx5Q0FFakJPLEtBQUtKLEtBQU8sdUJBQ1pJLEtBQUtILEtBQU8sa0JBQ2hCLEVDTlcsTUFBTWlMLFVBQW9DRCxFQUNyRCxXQUFBckwsQ0FBWXVMLEdBQ1IsSUFBSXRMLEVBQVUseUVBRVZzTCxJQUNBdEwsRUFBVSxHQUFHQSw0REFBa0VzTCxFQUFjQyxLQUN6RixVQUlSckwsTUFBTUYsR0FFTk8sS0FBS0osS0FBTyw2QkFDaEIsRUNiVyxNQUFNcUwsVUFBb0MzTCxFQUNyRCxXQUFBRSxDQUFZQyxHQUNSRSxNQUFNRixHQUFXLGtDQUVqQk8sS0FBS0osS0FBTyw4QkFDWkksS0FBS0gsS0FBTyxtQkFDaEIsRUNQVyxNQUFNcUwsVUFBMEM1TCxFQUMzRCxXQUFBRSxHQUNJRyxNQUFNLGtFQUVOSyxLQUFLSixLQUFPLG9DQUNaSSxLQUFLSCxLQUFPLGlDQUNoQixFLHNTQ2tCVyxNQUFNc0wsRUFHakIsV0FBQTNMLENBQ1k0TCxFQUNBQyxHQURBLEtBQUFELDBCQUFBQSxFQUNBLEtBQUFDLDRCQUFBQSxDQUNULENBRUcsVUFBQWxJLENBQ0ZzQixHLHdDQUVBLE1BQU0sU0FBRW1CLEVBQVEsVUFBRTBGLEdBQWM3RyxFQUVoQyxJQUFLbUIsRUFDRCxNQUFNLElBQUlpRixFQUNOLGtFQUlSLE1BQU1VLEVBQVF2TCxLQUFLb0wsMEJBQTBCSSxZQUN2QyxTQUFFMUUsR0FBYXlFLEVBQU16RCx3QkFBd0JjLGlCQUM3Q3hGLEVBQWdCbUksRUFBTXhELHdCQUFzRG5DLEdBQzVFdUMsRUFBcUIvRSxFQUFjK0Usb0JBQXNCLENBQUMsR0FDMUQsYUFBRXNELEVBQWUsR0FBRSxPQUFFdEIsRUFBUyxHQUFFLDBCQUFFckUsR0FBOEJxQyxFQUl0RSxTQUZNbkksS0FBS3FMLDRCQUE0QmxJLFdBQVdDLEdBRTlDcEQsS0FBSzBMLGNBQWNELElBQ2ZILGFBQVMsRUFBVEEsRUFBV0ssZUFDWDNMLEtBQUs0TCxnQkFDRE4sRUFBVUssYUFDVkYsRUFDQSxnQkFDQXpMLEtBQUs2TCxhQUFhMUIsUUFHdkIsQ0FDSCxNQUFRakUsR0FBSTFCLEdBQWdCeEUsS0FBSzhMLG1CQWNqQyxHQVpBOUwsS0FBSytMLGlCQUFtQi9MLEtBQUtxTCw0QkFBNEI3RixzQkFBc0IsQ0FDM0VFLGNBQWU2RixFQUNmL0csY0FDQW1CLDJCQUE0QjNGLEtBQUtnTSxzQkFDN0JsRixFQUNBcUQsRUFBTzhCLGVBRVhyRyxXQUNBQyxVQUFXakQsRUFBcUJzSixTQUNoQ3BHLCtCQUdDOUYsS0FBSytMLGlCQUNOLE1BQU0sSUFBSWxCLEVBQ04sK0UsQ0FJaEIsRSxDQUVNLE9BQUFzQixDQUFRQyxFQUEyQjNILEcsd0NBQ3JDLE1BQU0sUUFBRTRILEdBQVlELEVBRXBCLElBQUtDLEVBQ0QsTUFBTSxJQUFJdkIsRUFBNEIsQ0FBQyxZQUczQyxNQUFNLFNBQUVsRixHQUFheUcsRUFDZmQsRUFBUXZMLEtBQUtvTCwwQkFBMEJJLFlBQ3ZDLFNBQUUxRSxHQUFheUUsRUFBTXpELHdCQUF3QmMsaUJBRTdDVCxFQURnQm9ELEVBQU14RCx3QkFBc0RuQyxHQUN6Q3VDLG9CQUFzQixDQUFDLEdBQzFELGFBQUVzRCxFQUFlLEdBQUUsT0FBRXRCLEVBQVMsSUFBT2hDLEVBRTNDLEdBQ0luSSxLQUFLMEwsY0FBY0QsSUFDbkJ6TCxLQUFLZ00sc0JBQXNCbEYsRUFBVXFELEVBQU84QixlQUM5QyxDQUNFLE1BQU1LLEVBQWlCLENBQ25CMUcsV0FDQTJHLFlBQWEsQ0FBRUMsTUFBT2YsR0FBZ0IsY0FHcEN6TCxLQUFLb0wsMEJBQTBCcUIsWUFBWUwsRUFBUzNILEdBRTFELElBR0ksa0JBRk16RSxLQUFLb0wsMEJBQTBCc0IsY0FBY0osRyxDQUdyRCxNQUFPSyxHQUNMLEtDcEhPLENBQUNBLEdBQ0ksaUJBQVZBLEdBQWdDLE9BQVZBLEdBQWtCLFNBQVVBLEVEbUgvQyxDQUFlQSxLRW5IaENDLEVGbUhnRkQsRUFBTUUsS0VoSDdELGlCQUFkRCxHQUNPLE9BQWRBLEdBQ0EsV0FBWUEsR0FDWiwrQkFBZ0NBLEdBQzZCLCtCQUE1REEsRUFBaURFLFFBQ2xELFNBQVdGLEVBQWlERyw0QkFDNUQsaUJBQ0tILEVBQWlERywyQkFBMkJDLE1BRTNELGlCQURkSixFQUFpREcsMkJBQTJCQyxLQUMvRUMsZUZ3R08sTUFBTU4sRUFHVixNQUFRSSwyQkFBNEJHLEdBQXFCUCxFQUFNRSxNQUN6RCxhQUFFSSxHQUFpQkMsRUFBaUJGLEtBRTFDLEdBQUl2QixFQUNBLE9BQU8sSUFBSTVILFFBQVEsSUFBTXFHLE9BQU9pRCxTQUFTdkMsT0FBT3FDLElBR3BEak4sS0FBS3FMLDRCQUE0QjFHLGdCQUU3QnlJLEtBQUtDLE1BQU1KLEcsRUVqSXhCLElBQ0hMLEVGeUlJLE9BSkE1TSxLQUFLc04sc0JBQXNCQyxRQUl2QnZOLEtBQUs2TCxhQUFhMUIsR0FDWCxJQUFJdEcsUUFBUSxDQUFDMkosRUFBR0MsS0FDbkIsTUFBTUMsRUFBVSxLQUNaeEQsT0FBT3lELG9CQUFvQixRQUFTRCxHQUNwQ0QsRUFDSSxJQUFJeEMsRUFDQSxxREFLWmYsT0FBTzBELGlCQUFpQixRQUFTRixLQUlsQyxJQUFJN0osUUFBZWdLLHdDQUFBQSxDQUM5QixFLENBRUEsUUFBQUMsR0FDSSxPQUFPakssUUFBUTRKLE9BQU8sSUFBSXZDLEVBQzlCLENBRU0sWUFBQXpILEcsOENBQ0l6RCxLQUFLcUwsNEJBQTRCNUgsZUFFdkN6RCxLQUFLK0wsc0JBQW1CcEksQ0FDNUIsRSxDQUVRLGVBQUFpSSxDQUNKNUgsRUFDQUMsRUFDQUMsRUFDQTZKLEdBRUEsTUFBTUMsRUFBU2hJLFNBQVNpSSxlQUFlakssR0FFdkMsR0FBS2dLLEdBQVdBLEVBQU9FLFdBQXZCLENBSUEsSUFBS0gsRUFBYSxDQUNkLE1BQU1JLEVBQVFILEVBQU9JLFdBQVUsR0FFL0JKLEVBQU9FLFdBQVdHLGFBQWFGLEVBQU9ILEdBRXRDRyxFQUFNUCxpQkFBaUIsUUFBUyxLQUN2QjVOLEtBQUtzTyx1QixDQUlsQnRPLEtBQUtxTCw0QkFBNEJ0SCxXQUFXQyxFQUFVQyxFQUFXQyxFLENBQ3JFLENBRVEsWUFBQTJILENBQWExQixHQUNqQixNQUFrQixPQUFYQSxDQUNYLENBRWMsbUJBQUFtRSxHLDhDQUNKdE8sS0FBS29MLDBCQUEwQm1ELGtCQUFrQixJQUFNLElBQUkxSyxRQUFRZ0ssd0NBQUFBLEVBQzdFLEUsQ0FFUSxnQkFBQS9CLEdBQ0osSUFBSS9GLEVBQVlDLFNBQVNpSSxlQUFlLG1CQUV4QyxPQUFJbEksSUFJSkEsRUFBWUMsU0FBUzBCLGNBQWMsT0FDbkMzQixFQUFVRyxHQUFLLGtCQUNmSCxFQUFVeUksTUFBTUMsUUFBVSxPQUVuQnpJLFNBQVM2RyxLQUFLekcsWUFBWUwsR0FDckMsQ0FFUSxtQkFBQXVILEdBQ0osT0FBT3hMLEVBQ0g5QixLQUFLK0wsaUJBQ0wsSUFBTSxJQUFJOUosRUFBb0I1QyxFQUF3QjhDLHVCQUU5RCxDQUVRLHFCQUFBNkosQ0FDSmxGLEVBQ0FDLEdBRUEsT0FDSS9HLEtBQUtxTCw0QkFBNEJ4RSxhQUFhQyxFQUFVQyxJQUN4REQsRUFBUywwQkFFakIsQ0FFUSxhQUFBNEUsQ0FBY0QsR0FDbEIsUUFBU0EsQ0FDYixFR25PSixNQVNBLEVBQWVoQixFQVJYVyxHQUVPLElBQUlELEVBQ1BDLEVBQ0FiLEtBSTRELENBQUMsQ0FBRXJFLEdBQUksZUNYNUQsTUFBTXdJLFVBQTRCcFAsRUFDN0MsV0FBQUUsQ0FBWUMsR0FDUkUsTUFBTUYsR0FBVyxvQkFFakJPLEtBQUtKLEtBQU8sc0JBQ1pJLEtBQUtILEtBQU8saUJBQ2hCLEUsc1NDTVcsTUFBTThPLEVBQ2pCLFdBQUFuUCxDQUNZNEwsRUFDQUMsR0FEQSxLQUFBRCwwQkFBQUEsRUFDQSxLQUFBQyw0QkFBQUEsQ0FDVCxDQUVHLFVBQUFsSSxDQUNGc0IsRyx3Q0FFQSxNQUFNLFNBQUVtQixFQUFRLFVBQUUwRixHQUFjN0csRUFFaEMsSUFBS21CLEtBQWEwRixhQUFTLEVBQVRBLEVBQVd2RixXQUN6QixNQUFNLElBQUk4RSxFQUNOLG1GQUlSLElBQUl6SCxFQUVKLElBQ0lBLEVBQWdCcEQsS0FBS29MLDBCQUNoQkksV0FDQXpELHdCQUF3Qm5DLEUsQ0FDL0IsTUFBT2dKLFNBQ0M1TyxLQUFLb0wsMEJBQTBCeUQsa0JBQWtCakosR0FDdkR4QyxFQUFnQnBELEtBQUtvTCwwQkFDaEJJLFdBQ0F6RCx3QkFBd0JuQyxFLE9BRzNCNUYsS0FBS3FMLDRCQUE0QmxJLFdBQVdDLEdBRWxEcEQsS0FBS3FMLDRCQUE0QjdGLHNCQUFzQixDQUNuREUsY0FBZTFGLEtBQUtvTCwwQkFBMEJJLFdBQzlDaEgsWUFBYThHLEVBQVV2RixVQUN2QkgsV0FDQUMsVUFBV2pELEVBQXFCc0osVUFFeEMsRSxDQUVNLFlBQUF6SSxHLDhDQUNJekQsS0FBS3FMLDRCQUE0QjVILGNBQzNDLEUsQ0FFQSxNQUFBcUwsR0FDSSxNQUFNLElBQUlKLEVBQ04saUZBRVIsQ0FFTSxPQUFBSyxDQUFRdEssRyx3Q0FDVixNQUNNNEgsRUFEUXJNLEtBQUtvTCwwQkFBMEJJLFdBQ3ZCd0QsZUFFakIzQyxVQUlDck0sS0FBS3FMLDRCQUE0QjlGLGdCQUNqQ3ZGLEtBQUtvTCwwQkFBMEI2RCxzQkFBc0I1QyxFQUFRNkMsV0FBWXpLLEdBQ25GLEUsQ0FFQSw0QkFBQTBLLENBQTZCMUssRyxNQUd6QixPQUZxQyxRQUFyQyxFQUFBQSxhQUFPLEVBQVBBLEVBQVMySyxvQ0FBNEIsaUJBRTlCdkwsUUFBUUMsU0FDbkIsRUM1RUosTUFTQSxFQUFlMkcsRUFSWFcsR0FFTyxJQUFJdUQsRUFDUHZELEVBQ0FiLEtBSTZELENBQUMsQ0FBRXJFLEdBQUksZUNYN0QsTUFBTW1KLFVBQWdDL1AsRUFDakQsV0FBQUUsQ0FBWUMsR0FDUkUsTUFDSUYsR0FDSSxrR0FHUk8sS0FBS0osS0FBTywwQkFDWkksS0FBS0gsS0FBTyw2QkFDaEIsRUNiVyxNQUFNeVAsVUFBdUNoUSxFQUN4RCxXQUFBRSxDQUFZQyxHQUNSRSxNQUNJRixHQUNJLDRGQUdSTyxLQUFLSixLQUFPLGlDQUNaSSxLQUFLSCxLQUFPLHFDQUNoQixFQ1RHLFNBQVMwUCxFQUFxQjlLLEdBQ2pDLE9BQU1BLGFBQW1CM0UsUUFJbEIsNEJBQTZCMkUsQ0FDeEMsQyxJQ1JLK0ssRSxrU0MwQlUsTUFBTUMsRUFHakIsV0FBQWpRLENBQ1k0TCxFQUNBQyxFQUNBcUUsR0FGQSxLQUFBdEUsMEJBQUFBLEVBQ0EsS0FBQUMsNEJBQUFBLEVBQ0EsS0FBQXFFLCtCQUFBQSxDQUNULENBRUcsVUFBQXZNLENBQ0ZzQixHLDhDQUVBLE1BQU0sU0FBRW1CLEVBQVEsWUFBRXBCLEVBQVcsVUFBRThHLEdBQWM3RyxHQUN2QyxZQUFFZ0IsR0FBZ0I2RixHQUFhLENBQUMsRUFFdEMsSUFBSzFGLElBQWFwQixFQUNkLE1BQU0sSUFBSXFHLEVBQ04sbUZBSVIsTUFBTSx3QkFBRTlDLEdBQTRCL0gsS0FBS29MLDBCQUEwQkksV0FFN0RwSSxFQUFnQjJFLEVBQXNEbkMsSUFDdEUsbUJBQUV1QyxHQUF1Qi9FLFFBRXpCcEQsS0FBS3FMLDRCQUE0QmxJLFdBQVdDLEdBRTdDa0ksVUFDS3RMLEtBQUtvTCwwQkFBMEJ1RSx1QkFHekMsTUFBTUMsRUFBZ0NMLEVBQXFCakUsUUFDckQzSCxFQUNBMkgsRUFHRmlFLEVBQXFCakUsSUFDa0QsbUJBQS9CLFFBQWpDLEVBQUFBLEVBQVV1RSwrQkFBdUIsZUFBRUMsNEJBRTFDOVAsS0FBSytQLHlCQUEyQnpFLEVBQVV1RSx3QkFDMUM3UCxLQUFLcUwsNEJBQTRCM0Usc0JBQXFCLElBRzFEMUcsS0FBS3FMLDRCQUE0QjdGLHNCQUFzQixDQUNuREUsY0FBZTFGLEtBQUtvTCwwQkFBMEJJLFdBQzlDaEgsY0FDQW9CLFdBQ0FuQixRQUFTbUwsRUFDVC9KLFVBQVdqRCxFQUFxQm9OLEtBQ2hDdkssY0FDQUssMEJBQTJCcUMsYUFBa0IsRUFBbEJBLEVBQW9CckMsNEJBRy9DOUYsS0FBSytQLDBCQUNML1AsS0FBS3FMLDRCQUE0Qm5HLHlDQUM3QmxGLEtBQUtpUSxrQ0FBa0NDLEtBQUtsUSxNLEdBS3hELFlBQUF5RCxHQUNJLE9BQU96RCxLQUFLcUwsNEJBQTRCNUgsY0FDNUMsQ0FFYyx3QkFBQTBNLEcsZ0RBQ1YsTUFBTUMsRUFBK0UsUUFBdkQsRUFBNkIsUUFBN0IsRUFBQXBRLEtBQUsrUCxnQ0FBd0IsZUFBRUQsZ0NBQXdCLHVCQUVyRixJQUFLTSxFQUNELE1BQU0sSUFBSWhRLEVBQWlCaEIsRUFBcUJtQixhQUdwRCxJQUtJLGFBSnlCUCxLQUFLb0wsMEJBQTBCaUYsaUJBQ3BERCxFLENBSU4sTUFBT3pELEdBQ0wsTUFBTSxJQUFJMEMsQyxJQUlKLHFCQUFBaUIsQ0FDVnBLLEcsd0NBRUEsSUFDSSxNQUNJLFNBQ01sRyxLQUFLMFAsK0JBQStCdksscUJBQXFCZSxJQUFHLE1BRGxFLFFBQVFrRyxFQUFPLFdBQUVtRSxHQUFVLEVBQUtDLEUseVVBQUksR0FBOUIsMEJBR1YsT0FBTyxPQUFQLFFBQ0lDLFlBQWFyRSxFQUNibkYsWUFBYXNKLEdBQ1ZDLEUsQ0FFVCxNQUFPN0QsR0FDTCxNQUFNLElBQUkyQyxDLENBRWxCLEUsQ0FFYyxpQ0FBQVcsRyx3Q0FDVixNQUFNUyxRQUFtQjFRLEtBQUttUSwyQkFDeEI5SyxFQUF1QixDQUN6QjBELE9BQVE0SCxPQUFPRCxFQUFXRSxZQUMxQjNILGFBQWN5SCxFQUFXeEgsU0FBU0MsTUFJdEMsTUFBTyxDQUNIdkUsa0NBSHNDNUUsS0FBS3NRLHNCQUFzQkksRUFBV3hLLElBSTVFYix1QkFDQUMsWUFDMkMsSUFBdkNsRSxFQUF1QnNQLEdBQ2pCNU4sRUFBc0I0RixRQUN0QjVGLEVBQXNCNkYsV0FFeEMsRSxHRC9JSixTQUFLNkcsR0FDRCwwQkFDQSxxQ0FDSCxDQUhELENBQUtBLElBQUFBLEVBQVcsS0FLaEIsVUVMYXFCLEVBQXNCLENBQUUseUJBQTBCLFdDY2hELE1BQU1DLEVBQ2pCLFdBQUF0UixDQUFvQnVSLEdBQUEsS0FBQUEsZUFBQUEsQ0FBZ0MsQ0FFcEQsb0JBQUE1TCxDQUFxQjZMLEdBQ2pCLE1BQU1uRSxFQUFPLENBQUVtRSxVQUNUQyxFQUFVLE9BQUgsUUFDVCxpQkNuQlIsMEVEb0JRLGVBQWdCLEVBQVlDLE1BQ3pCTCxHQUdQLE9BQU83USxLQUFLK1EsZUFBZUksS0FBSyxvQ0FBcUMsQ0FBRUYsVUFBU3BFLFFBQ3BGLEVFZkosTUFjQSxFQUFlcEMsRUFiWFcsSUFFQSxNQUFNZ0csRUFBZ0JDLGdGQUFBQSxHQUNoQkMsRUFBMkIsSUFBSVIsRUFBeUJNLEdBQ3hEL0YsRUFBOEJkLElBRXBDLE9BQU8sSUFBSWtGLEVBQ1ByRSxFQUNBQyxFQUNBaUcsSUFJMkQsQ0FBQyxDQUFFcEwsR0FBSSxlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL2Jvb3RzdHJhcD9mZmNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL21pc3NpbmctZGF0YS1lcnJvci50cz9iN2RjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL25vdC1pbml0aWFsaXplZC1lcnJvci50cz84YjRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3N0YW5kYXJkLWVycm9yLnRzPzhhMDMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc2V0LXByb3RvdHlwZS1vZi50cz84NDVhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvc2hpcHBpbmcvZ2V0U2hpcHBhYmxlSXRlbXNDb3VudC50cz8yNDg1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvc2hpcHBpbmcvZ2V0TGluZUl0ZW1zQ291bnQudHM/MzA3MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3V0aWwtdHlwZXMvZ3VhcmQudHM/NmU2OSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYW1hem9uLXBheS11dGlscy9zcmMvYW1hem9uLXBheS12Mi50cz84MjNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hbWF6b24tcGF5LXV0aWxzL3NyYy9hbWF6b24tcGF5LXYyLXBheW1lbnQtcHJvY2Vzc29yLnRzPzUxMTAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FtYXpvbi1wYXktdXRpbHMvc3JjL2lzSW50ZXJuYWxDaGVja291dFNlbGVjdG9ycy50cz9iMzI1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWNsaWVudC11bmF2YWlsYWJsZS1lcnJvci50cz9mOGVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hbWF6b24tcGF5LXV0aWxzL3NyYy9hbWF6b24tcGF5LXYyLXNjcmlwdC1sb2FkZXIudHM/MGJjYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYW1hem9uLXBheS11dGlscy9zcmMvY3JlYXRlLWFtYXpvbi1wYXktdjItcGF5bWVudC1wcm9jZXNzb3IudHM/Y2IyYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3RvLXJlc29sdmFibGUtbW9kdWxlLnRzP2Q1MjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaW52YWxpZC1hcmd1bWVudC1lcnJvci50cz8zOTIxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWNhbmNlbGxlZC1lcnJvci50cz8wODkwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL29yZGVyLWZpbmFsaXphdGlvbi1ub3QtcmVxdWlyZWQtZXJyb3IudHM/YjVhMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYW1hem9uLXBheS1pbnRlZ3JhdGlvbi9zcmMvYW1hem9uLXBheS12Mi1wYXltZW50LXN0cmF0ZWd5LnRzPzM2YmUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaXMtcmVxdWVzdC1lcnJvci50cz9iNDNkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hbWF6b24tcGF5LXV0aWxzL3NyYy9pc0FtYXpvblBheUFkZGl0aW9uYWxBY3Rpb25FcnJvci50cz8zOTJjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hbWF6b24tcGF5LWludGVncmF0aW9uL3NyYy9jcmVhdGUtYW1hem9uLXBheS12Mi1wYXltZW50LXN0cmF0ZWd5LnRzPzY1ZGEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbm90LWltcGxlbWVudGVkLWVycm9yLnRzPzNhMzUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FtYXpvbi1wYXktaW50ZWdyYXRpb24vc3JjL2FtYXpvbi1wYXktdjItY3VzdG9tZXItc3RyYXRlZ3kudHM/OTA2ZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYW1hem9uLXBheS1pbnRlZ3JhdGlvbi9zcmMvY3JlYXRlLWFtYXpvbi1wYXktdjItY3VzdG9tZXItc3RyYXRlZ3kudHM/NDFiZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9idXktbm93LWNhcnQtY3JlYXRpb24tZXJyb3IudHM/ZDYwNCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYW1hem9uLXBheS1pbnRlZ3JhdGlvbi9zcmMvZXJyb3JzL2FtYXpvbi1wYXktdjItY29uZmlnLWNyZWF0aW9uLWVycm9yLnRzP2NjZTUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FtYXpvbi1wYXktaW50ZWdyYXRpb24vc3JjL2lzV2l0aEJ1eU5vd0ZlYXR1cmVzLnRzP2ZjYjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2NvbnRlbnQtdHlwZS50cz81MDRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hbWF6b24tcGF5LWludGVncmF0aW9uL3NyYy9hbWF6b24tcGF5LXYyLWJ1dHRvbi1zdHJhdGVneS50cz82ZTMzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL2h0dHAtcmVxdWVzdC9zZGstdmVyc2lvbi1oZWFkZXJzLnRzPzdiZjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FtYXpvbi1wYXktaW50ZWdyYXRpb24vc3JjL2FtYXpvbi1wYXktdjItcmVxdWVzdC1zZW5kZXIudHM/NTE3YiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NvbW1vbi9odHRwLXJlcXVlc3QvaW50ZXJuYWwtYXBpLWhlYWRlcnMudHM/NDExMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYW1hem9uLXBheS1pbnRlZ3JhdGlvbi9zcmMvY3JlYXRlLWFtYXpvbi1wYXktdjItYnV0dG9uLXN0cmF0ZWd5LnRzPzZkOGEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBNaXNzaW5nRGF0YUVycm9yVHlwZSB7XG4gICAgTWlzc2luZ0JpbGxpbmdBZGRyZXNzLFxuICAgIE1pc3NpbmdDYXJ0LFxuICAgIE1pc3NpbmdDaGVja291dCxcbiAgICBNaXNzaW5nQ29uc2lnbm1lbnRzLFxuICAgIE1pc3NpbmdDdXN0b21lcixcbiAgICBNaXNzaW5nQ2hlY2tvdXRDb25maWcsXG4gICAgTWlzc2luZ09yZGVyLFxuICAgIE1pc3NpbmdPcmRlckNvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXJJZCxcbiAgICBNaXNzaW5nUGF5bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudElkLFxuICAgIE1pc3NpbmdQYXltZW50SW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICBNaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsLFxuICAgIE1pc3NpbmdQYXltZW50U3RhdHVzLFxuICAgIE1pc3NpbmdQYXltZW50VG9rZW4sXG4gICAgTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIHdoZW4gZGF0YSB0aGF0IGlzIGV4cGVjdGVkIHRvIGV4aXN0IGlzIG1pc3NpbmcuIFVzdWFsbHkgaXRcbiAqIGlzIGR1ZSB0byB0aGUgZmFjdCB0aGF0IGNlcnRhaW4gZGF0YSBoYXMgbm90IGJlZW4gcmV0cmlldmVkIGZyb20gb3Igc2F2ZWQgdG9cbiAqIHRoZSBzZXJ2ZXIgeWV0LiBBbmQgc3VjaCBkYXRhIGlzIHJlcXVpcmVkIHRvIHBlcmZvcm0gY2VydGFpbiBhY3Rpb25zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXNzaW5nRGF0YUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ01pc3NpbmdEYXRhRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbWlzc2luZ19kYXRhJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjYXJ0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDb25zaWdubWVudHM6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ3VzdG9tZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY3VzdG9tZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOlxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlckNvbmZpZzpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSB0b2tlbiByZXF1aXJlZCB0byBzdWJtaXQgYSBwYXltZW50IGlzIG1pc3NpbmcuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBOb3RJbml0aWFsaXplZEVycm9yVHlwZSB7XG4gICAgQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZCxcbiAgICBDdXN0b21lck5vdEluaXRpYWxpemVkLFxuICAgIFBheW1lbnROb3RJbml0aWFsaXplZCxcbiAgICBTaGlwcGluZ05vdEluaXRpYWxpemVkLFxuICAgIFNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIG1ldGhvZCByZXF1aXJlcyBhIGNlcnRhaW4gaW5pdGlhbGl6YXRpb24gY2FsbCB0byBiZVxuICogbWFkZSBmaXJzdC4gU29tZSBvYmplY3RzIGNhbiBiZSBjb25zdHJ1Y3RlZCBidXQgdGhleSBjYW5ub3QgYmUgdXNlZCB1bnRpbCBhXG4gKiBzZXBhcmF0ZSBpbml0aWFsaXphdGlvbiBjYWxsIGlzIG1hZGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdEluaXRpYWxpemVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTm90SW5pdGlhbGl6ZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdub3RfaW5pdGlhbGl6ZWQnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5DdXN0b21lck5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjdXN0b21lciBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TaGlwcGluZ05vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBzaGlwcGluZyBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2hlY2tvdXQgc3BhbSBwcm90ZWN0aW9uIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgQ3VzdG9tRXJyb3IgZnJvbSAnLi9jdXN0b20tZXJyb3InO1xuaW1wb3J0IHNldFByb3RvdHlwZU9mIGZyb20gJy4vc2V0LXByb3RvdHlwZS1vZic7XG5cbi8qKlxuICogVGhpcyBlcnJvciB0eXBlIHNob3VsZCBub3QgYmUgY29uc3RydWN0ZWQgZGlyZWN0bHkuIEl0IGlzIGEgYmFzZSBjbGFzcyBmb3JcbiAqIGFsbCBjdXN0b20gZXJyb3JzIHRocm93biBpbiB0aGlzIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkRXJyb3IgZXh0ZW5kcyBFcnJvciBpbXBsZW1lbnRzIEN1c3RvbUVycm9yIHtcbiAgICBuYW1lID0gJ1N0YW5kYXJkRXJyb3InO1xuICAgIHR5cGUgPSAnc3RhbmRhcmQnO1xuXG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICBzZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgbmV3LnRhcmdldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YWNrID0gbmV3IEVycm9yKHRoaXMubWVzc2FnZSkuc3RhY2s7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihvYmplY3Q6IGFueSwgcHJvdG90eXBlOiBvYmplY3QpIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmplY3QsIHByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqZWN0O1xufVxuIiwiaW1wb3J0IHsgQ2FydCB9IGZyb20gJy4uL2NhcnQnO1xuXG5pbXBvcnQgZ2V0TGluZUl0ZW1zQ291bnQgZnJvbSAnLi9nZXRMaW5lSXRlbXNDb3VudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFNoaXBwYWJsZUl0ZW1zQ291bnQoY2FydDogQ2FydCk6IG51bWJlciB7XG4gICAgcmV0dXJuIGdldExpbmVJdGVtc0NvdW50KGNhcnQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMuZmlsdGVyKChpdGVtKSA9PiAhaXRlbS5hZGRlZEJ5UHJvbW90aW9uKSk7XG59XG4iLCJpbXBvcnQgeyByZWR1Y2UgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBMaW5lSXRlbSB9IGZyb20gJy4uL2NhcnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRMaW5lSXRlbXNDb3VudChsaW5lSXRlbXM6IExpbmVJdGVtW10pOiBudW1iZXIge1xuICAgIHJldHVybiByZWR1Y2UobGluZUl0ZW1zLCAodG90YWwsIGl0ZW06IExpbmVJdGVtKSA9PiB0b3RhbCArIGl0ZW0ucXVhbnRpdHksIDApO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ3VhcmQ8VD4odmFsdWU6IFQsIGVycm9yRmFjdG9yeT86ICgpID0+IEVycm9yKTogTm9uTnVsbGFibGU8VD4ge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IGVycm9yRmFjdG9yeSA/IGVycm9yRmFjdG9yeSgpIDogbmV3IEVycm9yKCdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWUgYXMgTm9uTnVsbGFibGU8VD47XG59XG4iLCJpbXBvcnQge1xuICAgIENhcnQsXG4gICAgQ2hlY2tvdXQsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgU3RvcmVDb25maWcsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5leHBvcnQgdHlwZSBFbnZpcm9ubWVudFR5cGUgPSAnUFJPRFVDVElPTicgfCAnVEVTVCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW1hem9uUGF5VjJPcHRpb25zIHtcbiAgICBlbnZpcm9ubWVudDogRW52aXJvbm1lbnRUeXBlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFtYXpvblBheVYyU0RLIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG4gICAgUGF5OiBBbWF6b25QYXlWMkNsaWVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0Q29uZmlnIHtcbiAgICBjcmVhdGVDaGVja291dFNlc3Npb25Db25maWc6IEFtYXpvblBheVYyQ2hlY2tvdXRTZXNzaW9uQ29uZmlnO1xuICAgIGVzdGltYXRlZE9yZGVyQW1vdW50PzogQW1hem9uUGF5VjJQcmljZTtcbiAgICBwcm9kdWN0VHlwZT86IEFtYXpvblBheVYyUGF5T3B0aW9ucztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbWF6b25QYXlWMkJ1dHRvbiB7XG4gICAgLyoqXG4gICAgICogQWxsb3dzIHlvdSB0byBkZWZpbmUgY3VzdG9tIGFjdGlvbnMuXG4gICAgICovXG4gICAgb25DbGljazogKGNhbGxiYWNrOiAoKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPikgPT4gdm9pZDtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYXRlcyB0aGUgQW1hem9uIFBheSBjaGVja291dC5cbiAgICAgKi9cbiAgICBpbml0Q2hlY2tvdXQocmVxdWVzdENvbmZpZzogUmVxdWVzdENvbmZpZyk6IHZvaWQ7XG59XG5cbmV4cG9ydCB0eXBlIEFtYXpvblBheVYyQnV0dG9uUGFyYW1ldGVycyA9IEFtYXpvblBheVYyQnV0dG9uUGFyYW1zIHwgQW1hem9uUGF5VjJOZXdCdXR0b25QYXJhbXM7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW1hem9uUGF5VjJDbGllbnQge1xuICAgIC8qKlxuICAgICAqIFJlbmRlciB0aGUgQW1hem9uIFBheSBidXR0b24gdG8gYSBIVE1MIGNvbnRhaW5lciBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbnRhaW5lcklkIC0gSFRNTCBlbGVtZW50IGlkLlxuICAgICAqIEBwYXJhbSBwYXJhbXMgLSBCdXR0b24gcmVuZGVyaW5nIHBhcmFtcy5cbiAgICAgKi9cbiAgICByZW5kZXJCdXR0b24oY29udGFpbmVySWQ6IHN0cmluZywgcGFyYW1zOiBBbWF6b25QYXlWMkJ1dHRvblBhcmFtZXRlcnMpOiBBbWF6b25QYXlWMkJ1dHRvbjtcblxuICAgIC8qKlxuICAgICAqIEJpbmQgY2xpY2sgZXZlbnRzIHRvIEhUTUwgZWxlbWVudHMsIHNvIHRoYXQgd2hlbiB0aGUgZWxlbWVudCBpcyBjbGlja2VkLCB0aGUgYnV5ZXIgY2FuIHNlbGVjdCBhIGRpZmZlcmVudCBzaGlwcGluZyBhZGRyZXNzIG9yIHBheW1lbnQgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJ1dHRvbklkIC0gSFRNTCBlbGVtZW50IGlkLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gRWxlbWVudCBiaW5kaW5nIG9wdGlvbnMuXG4gICAgICovXG4gICAgYmluZENoYW5nZUFjdGlvbihidXR0b25JZDogc3RyaW5nLCBvcHRpb25zOiBBbWF6b25QYXlWMkNoYW5nZUFjdGlvbk9wdGlvbnMpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogQWxsb3cgYnV5ZXJzIHRvIHNpZ24gb3V0IGZyb20gdGhlaXIgQW1hem9uIGFjY291bnQuXG4gICAgICovXG4gICAgc2lnbm91dCgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFtYXpvblBheVYySG9zdFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgYW1hem9uPzogQW1hem9uUGF5VjJTREs7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW1hem9uUGF5VjJCdXR0b25Db25maWcge1xuICAgIC8qKlxuICAgICAqIEFtYXpvbiBQYXkgbWVyY2hhbnQgYWNjb3VudCBpZGVudGlmaWVyLlxuICAgICAqL1xuICAgIG1lcmNoYW50SWQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFBsYWNlbWVudCBvZiB0aGUgQW1hem9uIFBheSBidXR0b24gb24geW91ciB3ZWJzaXRlLlxuICAgICAqL1xuICAgIHBsYWNlbWVudDogQW1hem9uUGF5VjJQbGFjZW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBMZWRnZXIgY3VycmVuY3kgcHJvdmlkZWQgZHVyaW5nIHJlZ2lzdHJhdGlvbiBmb3IgdGhlIGdpdmVuIG1lcmNoYW50IGlkZW50aWZpZXIuXG4gICAgICovXG4gICAgbGVkZ2VyQ3VycmVuY3k6IEFtYXpvblBheVYyTGVkZ2VyQ3VycmVuY3k7XG5cbiAgICAvKipcbiAgICAgKiBQcm9kdWN0IHR5cGUgc2VsZWN0ZWQgZm9yIGNoZWNrb3V0LiBEZWZhdWx0IGlzICdQYXlBbmRTaGlwJy5cbiAgICAgKi9cbiAgICBwcm9kdWN0VHlwZT86IEFtYXpvblBheVYyUGF5T3B0aW9ucztcblxuICAgIC8qKlxuICAgICAqIENvbG9yIG9mIHRoZSBBbWF6b24gUGF5IGJ1dHRvbi5cbiAgICAgKi9cbiAgICBidXR0b25Db2xvcj86IEFtYXpvblBheVYyQnV0dG9uQ29sb3I7XG5cbiAgICAvKipcbiAgICAgKiBMYW5ndWFnZSB1c2VkIHRvIHJlbmRlciB0aGUgYnV0dG9uIGFuZCB0ZXh0IG9uIEFtYXpvbiBQYXkgaG9zdGVkIHBhZ2VzLlxuICAgICAqL1xuICAgIGNoZWNrb3V0TGFuZ3VhZ2U/OiBBbWF6b25QYXlWMkNoZWNrb3V0TGFuZ3VhZ2U7XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIGJ1dHRvbiB0byBTYW5kYm94IGVudmlyb25tZW50LiBZb3UgZG8gbm90IGhhdmUgdG8gc2V0IHRoaXMgcGFyYW1ldGVyXG4gICAgICogaWYgeW91ciBgcHVibGljS2V5SWRgIGhhcyBhbiBlbnZpcm9ubWVudCBwcmVmaXguIERlZmF1bHQgaXMgZmFsc2UuXG4gICAgICovXG4gICAgc2FuZGJveD86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIEFtYXpvbiBQYXkgYnV0dG9uIGRlc2lnbi5cbiAgICAgKi9cbiAgICBkZXNpZ24/OiBBbWF6b25QYXlWMkJ1dHRvbkRlc2lnbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbWF6b25QYXlWMkJ1dHRvblBhcmFtcyBleHRlbmRzIEFtYXpvblBheVYyQnV0dG9uQ29uZmlnIHtcbiAgICAvKipcbiAgICAgKiBDb25maWd1cmF0aW9uIGZvciBjYWxsaW5nIHRoZSBlbmRwb2ludCB0byBDcmVhdGUgQ2hlY2tvdXQgU2Vzc2lvbi5cbiAgICAgKi9cbiAgICBjcmVhdGVDaGVja291dFNlc3Npb246IEFtYXpvblBheVYyQ2hlY2tvdXRTZXNzaW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFtYXpvblBheVYyTmV3QnV0dG9uUGFyYW1zIGV4dGVuZHMgQW1hem9uUGF5VjJCdXR0b25Db25maWcge1xuICAgIC8qKlxuICAgICAqIENyZWRlbnRpYWwgcHJvdmlkZWQgYnkgQW1hem9uIFBheS4gWW91IG11c3QgYWxzbyBzZXQgdGhlIGBzYW5kYm94YFxuICAgICAqIHBhcmFtZXRlciBpZiB5b3VyIGBwdWJsaWNLZXlJZGAgZG9lcyBub3QgaGF2ZSBhbiBlbnZpcm9ubWVudCBwcmVmaXguXG4gICAgICovXG4gICAgcHVibGljS2V5SWQ/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBJdCBkb2VzIG5vdCBoYXZlIHRvIG1hdGNoIHRoZSBmaW5hbCBvcmRlciBhbW91bnQgaWYgdGhlIGJ1eWVyIHVwZGF0ZXNcbiAgICAgKiB0aGVpciBvcmRlciBhZnRlciBzdGFydGluZyBjaGVja291dC4gQW1hem9uIFBheSB3aWxsIHVzZSB0aGlzIHZhbHVlIHRvXG4gICAgICogYXNzZXNzIHRyYW5zYWN0aW9uIHJpc2sgYW5kIHByZXZlbnQgYnV5ZXJzIGZyb20gc2VsZWN0aW5nIHBheW1lbnQgbWV0aG9kc1xuICAgICAqIHRoYXQgY2FuJ3QgYmUgdXNlZCB0byBwcm9jZXNzIHRoZSBvcmRlci5cbiAgICAgKi9cbiAgICBlc3RpbWF0ZWRPcmRlckFtb3VudD86IEFtYXpvblBheVYyUHJpY2U7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgQ2hlY2tvdXQgU2Vzc2lvbiBjb25maWd1cmF0aW9uLlxuICAgICAqL1xuICAgIGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbkNvbmZpZz86IEFtYXpvblBheVYyQ2hlY2tvdXRTZXNzaW9uQ29uZmlnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFtYXpvblBheVYyQ2hlY2tvdXRTZXNzaW9uIHtcbiAgICAvKipcbiAgICAgKiBFbmRwb2ludCBVUkwgdG8gQ3JlYXRlIENoZWNrb3V0IFNlc3Npb24uXG4gICAgICovXG4gICAgdXJsOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBIVFRQIHJlcXVlc3QgbWV0aG9kLiBEZWZhdWx0IGlzICdQT1NUJy5cbiAgICAgKi9cbiAgICBtZXRob2Q/OiAnR0VUJyB8ICdQT1NUJztcblxuICAgIC8qKlxuICAgICAqIENoZWNrb3V0IFNlc3Npb24gSUQgcGFyYW1ldGVyIGluIHRoZSByZXNwb25zZS4gRGVmYXVsdCBpcyAnY2hlY2tvdXRTZXNzaW9uSWQnLlxuICAgICAqL1xuICAgIGV4dHJhY3RBbWF6b25DaGVja291dFNlc3Npb25JZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbWF6b25QYXlWMkNoZWNrb3V0U2Vzc2lvbkNvbmZpZyB7XG4gICAgLyoqXG4gICAgICogQSBwYXlsb2FkIHRoYXQgQW1hem9uIFBheSB3aWxsIHVzZSB0byBjcmVhdGUgYSBDaGVja291dCBTZXNzaW9uIG9iamVjdC5cbiAgICAgKi9cbiAgICBwYXlsb2FkSlNPTjogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogUGF5bG9hZCdzIHNpZ25hdHVyZS5cbiAgICAgKi9cbiAgICBzaWduYXR1cmU6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIENyZWRlbnRpYWwgcHJvdmlkZWQgYnkgQW1hem9uIFBheS4gWW91IGRvIG5vdCBoYXZlIHRvIHNldCB0aGlzIHBhcmFtZXRlclxuICAgICAqIGlmIHlvdXIgYHB1YmxpY0tleUlkYCBoYXMgYW4gZW52aXJvbm1lbnQgcHJlZml4LlxuICAgICAqL1xuICAgIHB1YmxpY0tleUlkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFtYXpvblBheVYyUHJpY2Uge1xuICAgIC8qKlxuICAgICAqIFRyYW5zYWN0aW9uIGFtb3VudC5cbiAgICAgKi9cbiAgICBhbW91bnQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRyYW5zYWN0aW9uIGN1cnJlbmN5IGNvZGUgaW4gSVNPIDQyMTcgZm9ybWF0LiBFeGFtcGxlOiBVU0QuXG4gICAgICovXG4gICAgY3VycmVuY3lDb2RlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIEFtYXpvblBheVYyQ2hhbmdlQWN0aW9uVHlwZSA9ICdjaGFuZ2VBZGRyZXNzJyB8ICdjaGFuZ2VQYXltZW50JztcblxuZXhwb3J0IGludGVyZmFjZSBBbWF6b25QYXlWMkNoYW5nZUFjdGlvbk9wdGlvbnMge1xuICAgIC8qKlxuICAgICAqIEFtYXpvbiBQYXkgQ2hlY2tvdXQgU2Vzc2lvbiBpZGVudGlmaWVyLlxuICAgICAqL1xuICAgIGFtYXpvbkNoZWNrb3V0U2Vzc2lvbklkOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgcmVxdWVzdGVkIGJ5IHRoZSBidXllci5cbiAgICAgKi9cbiAgICBjaGFuZ2VBY3Rpb246IEFtYXpvblBheVYyQ2hhbmdlQWN0aW9uVHlwZTtcbn1cblxuZXhwb3J0IGNvbnN0IGFtYXpvblBheVYyUmVnaW9uczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgICBkZTogJ2V1JyxcbiAgICBqcDogJ2ZlJyxcbiAgICB1azogJ2V1JyxcbiAgICB1czogJ25hJyxcbn07XG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvbiAqL1xuZXhwb3J0IGVudW0gQW1hem9uUGF5VjJDaGVja291dExhbmd1YWdlIHtcbiAgICBlbl9VUyA9ICdlbl9VUycsXG4gICAgZW5fR0IgPSAnZW5fR0InLFxuICAgIGRlX0RFID0gJ2RlX0RFJyxcbiAgICBmcl9GUiA9ICdmcl9GUicsXG4gICAgaXRfSVQgPSAnaXRfSVQnLFxuICAgIGVzX0VTID0gJ2VzX0VTJyxcbiAgICBqYV9KUCA9ICdqYV9KUCcsXG59XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvbiAqL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tc2hhZG93ICovXG5leHBvcnQgZW51bSBBbWF6b25QYXlWMlBsYWNlbWVudCB7XG4gICAgLyoqIEluaXRpYWwgb3IgbWFpbiBwYWdlLiAqL1xuICAgIEhvbWUgPSAnSG9tZScsXG5cbiAgICAvKiogUHJvZHVjdCBkZXRhaWxzIHBhZ2UuICovXG4gICAgUHJvZHVjdCA9ICdQcm9kdWN0JyxcblxuICAgIC8qKiBDYXJ0IHJldmlldyBwYWdlIGJlZm9yZSBidXllciBzdGFydHMgY2hlY2tvdXQuICovXG4gICAgQ2FydCA9ICdDYXJ0JyxcblxuICAgIC8qKiBBbnkgcGFnZSBhZnRlciBidXllciBzdGFydHMgY2hlY2tvdXQuICovXG4gICAgQ2hlY2tvdXQgPSAnQ2hlY2tvdXQnLFxuXG4gICAgLyoqIEFueSBwYWdlIHRoYXQgZG9lc24ndCBmaXQgdGhlIHByZXZpb3VzIGRlc2NyaXB0aW9ucy4gKi9cbiAgICBPdGhlciA9ICdPdGhlcicsXG59XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1zaGFkb3cgKi9cblxuZXhwb3J0IGVudW0gQW1hem9uUGF5VjJMZWRnZXJDdXJyZW5jeSB7XG4gICAgVVNEID0gJ1VTRCcsXG4gICAgRVVSID0gJ0VVUicsXG4gICAgR0JQID0gJ0dCUCcsXG4gICAgSlBZID0gJ0pQWScsXG59XG5cbmV4cG9ydCBlbnVtIEFtYXpvblBheVYyUGF5T3B0aW9ucyB7XG4gICAgLyoqIFNlbGVjdCB0aGlzIHByb2R1Y3QgdHlwZSBpZiB5b3UgbmVlZCB0aGUgYnV5ZXIncyBzaGlwcGluZyBkZXRhaWxzLiAqL1xuICAgIFBheUFuZFNoaXAgPSAnUGF5QW5kU2hpcCcsXG5cbiAgICAvKiogU2VsZWN0IHRoaXMgcHJvZHVjdCB0eXBlIGlmIHlvdSBkbyBub3QgbmVlZCB0aGUgYnV5ZXIncyBzaGlwcGluZyBkZXRhaWxzLiAqL1xuICAgIFBheU9ubHkgPSAnUGF5T25seScsXG59XG5cbmV4cG9ydCBlbnVtIEFtYXpvblBheVYyQnV0dG9uQ29sb3Ige1xuICAgIEdvbGQgPSAnR29sZCcsXG4gICAgTGlnaHRHcmF5ID0gJ0xpZ2h0R3JheScsXG4gICAgRGFya0dyYXkgPSAnRGFya0dyYXknLFxufVxuXG5leHBvcnQgZW51bSBBbWF6b25QYXlWMkJ1dHRvbkRlc2lnbiB7XG4gICAgQzAwMDEgPSAnQzAwMDEnLFxufVxuXG4vLyBUT0RPOiBhZnRlciBtaWdyYXRpb24gQW1hem9uUGF5IHN0cmF0ZWdpZXMgdG8gaW50ZWdyYXRpb24gcGFja2FnZVxuLy8gPEludGVybmFsQ2hlY2tvdXRTZWxlY3RvcnM+IHNob3VsZCBiZSByZW1vdmVkXG4vLyBhbmQgcmVwbGFjZWQgdXNhZ2Ugd2l0aCA8UGF5bWVudEludGVncmF0aW9uU2VydmljZT5cbmV4cG9ydCBpbnRlcmZhY2UgSW50ZXJuYWxDaGVja291dFNlbGVjdG9ycyB7XG4gICAgY2FydDoge1xuICAgICAgICBnZXRDYXJ0OiAoKSA9PiBDYXJ0IHwgdW5kZWZpbmVkO1xuICAgIH07XG4gICAgY2hlY2tvdXQ6IHtcbiAgICAgICAgZ2V0Q2hlY2tvdXQ6ICgpID0+IENoZWNrb3V0IHwgdW5kZWZpbmVkO1xuICAgIH07XG4gICAgY29uZmlnOiB7XG4gICAgICAgIGdldFN0b3JlQ29uZmlnT3JUaHJvdzogKCkgPT4gU3RvcmVDb25maWc7XG4gICAgfTtcbiAgICBwYXltZW50TWV0aG9kczoge1xuICAgICAgICBnZXRQYXltZW50TWV0aG9kT3JUaHJvdzogPFQ+KG1ldGhvZElkOiBzdHJpbmcpID0+IFBheW1lbnRNZXRob2Q8VD47XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbWF6b25QYXlWMkluaXRpYWxpemVPcHRpb25zIHtcbiAgICBidXR0b25Db2xvcj86IEFtYXpvblBheVYyQnV0dG9uQ29sb3I7XG4gICAgY2hlY2tvdXRMYW5ndWFnZT86IEFtYXpvblBheVYyQ2hlY2tvdXRMYW5ndWFnZTtcbiAgICBjaGVja291dFNlc3Npb25NZXRob2Q/OiAnR0VUJyB8ICdQT1NUJztcbiAgICBjcmVhdGVDaGVja291dFNlc3Npb25Db25maWc/OiBBbWF6b25QYXlWMkNoZWNrb3V0U2Vzc2lvbkNvbmZpZztcbiAgICBleHRyYWN0QW1hem9uQ2hlY2tvdXRTZXNzaW9uSWQ/OiBzdHJpbmc7XG4gICAgbGVkZ2VyQ3VycmVuY3k/OiBBbWF6b25QYXlWMkxlZGdlckN1cnJlbmN5O1xuICAgIHB1YmxpY0tleUlkPzogc3RyaW5nO1xuICAgIHJlZ2lvbj86IHN0cmluZztcbiAgICBpc0J1dHRvbk1pY3JvVGV4dERpc2FibGVkPzogYm9vbGVhbjtcbiAgICBwYXltZW50VG9rZW4/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW1hem9uUGF5VjJCdXR0b25SZW5kZXJpbmdPcHRpb25zIHtcbiAgICBjaGVja291dFN0YXRlOiBJbnRlcm5hbENoZWNrb3V0U2VsZWN0b3JzIHwgUGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzO1xuICAgIGNvbnRhaW5lcklkOiBzdHJpbmc7XG4gICAgZGVjb3VwbGVDaGVja291dEluaXRpYXRpb24/OiBib29sZWFuO1xuICAgIG1ldGhvZElkOiBzdHJpbmc7XG4gICAgYnV0dG9uQ29sb3I/OiBBbWF6b25QYXlWMkJ1dHRvbkNvbG9yO1xuICAgIG9wdGlvbnM/OiBBbWF6b25QYXlWMkJ1dHRvblBhcmFtZXRlcnM7XG4gICAgcGxhY2VtZW50OiBBbWF6b25QYXlWMlBsYWNlbWVudDtcbiAgICBpc0J1dHRvbk1pY3JvVGV4dERpc2FibGVkPzogYm9vbGVhbjtcbn1cblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG5leHBvcnQgaW50ZXJmYWNlIEFtYXpvblBheUFkZGl0aW9uYWxBY3Rpb25FcnJvckJvZHkge1xuICAgIHN0YXR1czogc3RyaW5nO1xuICAgIGFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkOiB7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHJlZGlyZWN0X3VybDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvbiAqL1xuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dFNldHRpbmdzLFxuICAgIGdldFNoaXBwYWJsZUl0ZW1zQ291bnQsXG4gICAgZ3VhcmQsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlbGVjdG9ycyxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFN0b3JlUHJvZmlsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgQW1hem9uUGF5VjJCdXR0b24sXG4gICAgQW1hem9uUGF5VjJCdXR0b25Db2xvcixcbiAgICBBbWF6b25QYXlWMkJ1dHRvbkNvbmZpZyxcbiAgICBBbWF6b25QYXlWMkJ1dHRvbkRlc2lnbixcbiAgICBBbWF6b25QYXlWMkJ1dHRvblBhcmFtZXRlcnMsXG4gICAgQW1hem9uUGF5VjJCdXR0b25SZW5kZXJpbmdPcHRpb25zLFxuICAgIEFtYXpvblBheVYyQ2hhbmdlQWN0aW9uVHlwZSxcbiAgICBBbWF6b25QYXlWMkNoZWNrb3V0U2Vzc2lvbkNvbmZpZyxcbiAgICBBbWF6b25QYXlWMkluaXRpYWxpemVPcHRpb25zLFxuICAgIEFtYXpvblBheVYyTmV3QnV0dG9uUGFyYW1zLFxuICAgIEFtYXpvblBheVYyUGF5T3B0aW9ucyxcbiAgICBBbWF6b25QYXlWMlBsYWNlbWVudCxcbiAgICBBbWF6b25QYXlWMlByaWNlLFxuICAgIEFtYXpvblBheVYyU0RLLFxuICAgIEludGVybmFsQ2hlY2tvdXRTZWxlY3RvcnMsXG4gICAgUmVxdWVzdENvbmZpZyxcbn0gZnJvbSAnLi9hbWF6b24tcGF5LXYyJztcbmltcG9ydCBBbWF6b25QYXlWMlNjcmlwdExvYWRlciBmcm9tICcuL2FtYXpvbi1wYXktdjItc2NyaXB0LWxvYWRlcic7XG5pbXBvcnQgeyBpc0ludGVybmFsQ2hlY2tvdXRTZWxlY3RvcnMgfSBmcm9tICcuL2lzSW50ZXJuYWxDaGVja291dFNlbGVjdG9ycyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvciB7XG4gICAgcHJpdmF0ZSBhbWF6b25QYXlWMlNESz86IEFtYXpvblBheVYyU0RLO1xuICAgIHByaXZhdGUgYnV0dG9uUGFyZW50Q29udGFpbmVyPzogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBhbWF6b25QYXlWMkJ1dHRvbj86IEFtYXpvblBheVYyQnV0dG9uO1xuICAgIHByaXZhdGUgaXNCdXlOb3dGbG93PzogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYW1hem9uUGF5VjJTY3JpcHRMb2FkZXI6IEFtYXpvblBheVYyU2NyaXB0TG9hZGVyKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPEFtYXpvblBheVYySW5pdGlhbGl6ZU9wdGlvbnM+KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuYW1hem9uUGF5VjJTREsgPSBhd2FpdCB0aGlzLmFtYXpvblBheVYyU2NyaXB0TG9hZGVyLmxvYWQocGF5bWVudE1ldGhvZCk7XG4gICAgICAgIHRoaXMuYnV0dG9uUGFyZW50Q29udGFpbmVyID1cbiAgICAgICAgICAgIHRoaXMuYnV0dG9uUGFyZW50Q29udGFpbmVyIHx8IHRoaXMuY3JlYXRlQW1hem9uUGF5QnV0dG9uUGFyZW50Q29udGFpbmVyKCk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLmFtYXpvblBheVYyQnV0dG9uID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmJ1dHRvblBhcmVudENvbnRhaW5lcj8ucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuYnV0dG9uUGFyZW50Q29udGFpbmVyID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmFtYXpvblBheVYyU0RLID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBiaW5kQnV0dG9uKFxuICAgICAgICBidXR0b25JZDogc3RyaW5nLFxuICAgICAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICAgICAgY2hhbmdlQWN0aW9uOiBBbWF6b25QYXlWMkNoYW5nZUFjdGlvblR5cGUsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2V0QW1hem9uUGF5VjJTREsoKS5QYXkuYmluZENoYW5nZUFjdGlvbihgIyR7YnV0dG9uSWR9YCwge1xuICAgICAgICAgICAgYW1hem9uQ2hlY2tvdXRTZXNzaW9uSWQ6IHNlc3Npb25JZCxcbiAgICAgICAgICAgIGNoYW5nZUFjdGlvbixcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlQnV0dG9uKGNvbnRhaW5lcklkOiBzdHJpbmcsIG9wdGlvbnM6IEFtYXpvblBheVYyQnV0dG9uUGFyYW1ldGVycyk6IHZvaWQge1xuICAgICAgICB0aGlzLmFtYXpvblBheVYyQnV0dG9uID0gdGhpcy5nZXRBbWF6b25QYXlWMlNESygpLlBheS5yZW5kZXJCdXR0b24oXG4gICAgICAgICAgICBgIyR7Y29udGFpbmVySWR9YCxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJlcGFyZUNoZWNrb3V0KGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbkNvbmZpZzogUmVxdWlyZWQ8QW1hem9uUGF5VjJDaGVja291dFNlc3Npb25Db25maWc+KSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RDb25maWcgPSB0aGlzLnByZXBhcmVSZXF1ZXN0Q29uZmlnKGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbkNvbmZpZyk7XG5cbiAgICAgICAgdGhpcy5nZXRBbWF6b25QYXlWMkJ1dHRvbigpLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZXRBbWF6b25QYXlWMkJ1dHRvbigpLmluaXRDaGVja291dChyZXF1ZXN0Q29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJlcGFyZUNoZWNrb3V0V2l0aENyZWF0aW9uUmVxdWVzdENvbmZpZyhcbiAgICAgICAgY3JlYXRlQ2hlY2tvdXRDb25maWc6ICgpID0+IFByb21pc2U8XG4gICAgICAgICAgICB8IHtcbiAgICAgICAgICAgICAgICAgIGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbkNvbmZpZzogUmVxdWlyZWQ8QW1hem9uUGF5VjJDaGVja291dFNlc3Npb25Db25maWc+O1xuICAgICAgICAgICAgICAgICAgZXN0aW1hdGVkT3JkZXJBbW91bnQ6IEFtYXpvblBheVYyUHJpY2U7XG4gICAgICAgICAgICAgICAgICBwcm9kdWN0VHlwZTogQW1hem9uUGF5VjJQYXlPcHRpb25zO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB8IHVuZGVmaW5lZFxuICAgICAgICA+LFxuICAgICkge1xuICAgICAgICB0aGlzLmdldEFtYXpvblBheVYyQnV0dG9uKCkub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSBhd2FpdCBjcmVhdGVDaGVja291dENvbmZpZygpO1xuXG4gICAgICAgICAgICBpZiAoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdENvbmZpZyA9IHRoaXMucHJlcGFyZVJlcXVlc3RDb25maWcoXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5jcmVhdGVDaGVja291dFNlc3Npb25Db25maWcsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5lc3RpbWF0ZWRPcmRlckFtb3VudCxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnByb2R1Y3RUeXBlLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmdldEFtYXpvblBheVYyQnV0dG9uKCkuaW5pdENoZWNrb3V0KHJlcXVlc3RDb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWdub3V0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5hbWF6b25QYXlWMlNESykge1xuICAgICAgICAgICAgdGhpcy5hbWF6b25QYXlWMlNESy5QYXkuc2lnbm91dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHJlbmRlckFtYXpvblBheUJ1dHRvbih7XG4gICAgICAgIGJ1dHRvbkNvbG9yLFxuICAgICAgICBjaGVja291dFN0YXRlLFxuICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgZGVjb3VwbGVDaGVja291dEluaXRpYXRpb24gPSBmYWxzZSxcbiAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHBsYWNlbWVudCxcbiAgICAgICAgaXNCdXR0b25NaWNyb1RleHREaXNhYmxlZCA9IGZhbHNlLFxuICAgIH06IEFtYXpvblBheVYyQnV0dG9uUmVuZGVyaW5nT3B0aW9ucyk6IEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oYCMke2NvbnRhaW5lcklkfWApO1xuXG4gICAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGlkOiBwYXJlbnRDb250YWluZXJJZCB9ID0gY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZ2V0QnV0dG9uUGFyZW50Q29udGFpbmVyKCkpO1xuXG4gICAgICAgIGlmIChvcHRpb25zICYmIGlzQnV0dG9uTWljcm9UZXh0RGlzYWJsZWQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuZGVzaWduID0gQW1hem9uUGF5VjJCdXR0b25EZXNpZ24uQzAwMDE7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhbWF6b25QYXlWMkJ1dHRvbk9wdGlvbnMgPVxuICAgICAgICAgICAgb3B0aW9ucyA/P1xuICAgICAgICAgICAgdGhpcy5nZXRBbWF6b25QYXlWMkJ1dHRvbk9wdGlvbnMoXG4gICAgICAgICAgICAgICAgY2hlY2tvdXRTdGF0ZSxcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwbGFjZW1lbnQsXG4gICAgICAgICAgICAgICAgZGVjb3VwbGVDaGVja291dEluaXRpYXRpb24sXG4gICAgICAgICAgICAgICAgYnV0dG9uQ29sb3IsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uKHBhcmVudENvbnRhaW5lcklkLCBhbWF6b25QYXlWMkJ1dHRvbk9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmdldEJ1dHRvblBhcmVudENvbnRhaW5lcigpO1xuICAgIH1cblxuICAgIHVwZGF0ZUJ1eU5vd0Zsb3dGbGFnKGlzQnV5Tm93Rmxvdz86IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5pc0J1eU5vd0Zsb3cgPSBCb29sZWFuKGlzQnV5Tm93Rmxvdyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaXNQaDRFbmFibGVkKFxuICAgICAgICBmZWF0dXJlczogQ2hlY2tvdXRTZXR0aW5nc1snZmVhdHVyZXMnXSxcbiAgICAgICAgc3RvcmVDb3VudHJ5Q29kZTogU3RvcmVQcm9maWxlWydzdG9yZUNvdW50cnlDb2RlJ10sXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGlzUGg0RW5hYmxlZCA9ICEhZmVhdHVyZXNbJ1BST0pFQ1QtMzQ4My5hbWF6b25fcGF5X3BoNCddO1xuICAgICAgICBjb25zdCBpc1BoNFVzT25seSA9ICEhZmVhdHVyZXNbJ0lOVC02ODg1LmFtYXpvbl9wYXlfcGg0X3VzX29ubHknXTtcblxuICAgICAgICBpZiAoaXNQaDRFbmFibGVkICYmIGlzUGg0VXNPbmx5KSB7XG4gICAgICAgICAgICByZXR1cm4gc3RvcmVDb3VudHJ5Q29kZSA9PT0gJ1VTJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpc1BoNEVuYWJsZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcmVwYXJlUmVxdWVzdENvbmZpZyhcbiAgICAgICAgY3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnOiBSZXF1aXJlZDxBbWF6b25QYXlWMkNoZWNrb3V0U2Vzc2lvbkNvbmZpZz4sXG4gICAgICAgIGVzdGltYXRlZE9yZGVyQW1vdW50PzogQW1hem9uUGF5VjJQcmljZSxcbiAgICAgICAgcHJvZHVjdFR5cGU/OiBBbWF6b25QYXlWMlBheU9wdGlvbnMsXG4gICAgKTogUmVxdWVzdENvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgcHVibGljS2V5SWQsIC4uLnNpZ25lZFBheWxvYWQgfSA9IGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbkNvbmZpZztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnOiB0aGlzLmlzRW52aXJvbm1lbnRTcGVjaWZpYyhwdWJsaWNLZXlJZClcbiAgICAgICAgICAgICAgICA/IHNpZ25lZFBheWxvYWRcbiAgICAgICAgICAgICAgICA6IGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbkNvbmZpZyxcbiAgICAgICAgICAgIC4uLihlc3RpbWF0ZWRPcmRlckFtb3VudCAmJiB7IGVzdGltYXRlZE9yZGVyQW1vdW50IH0pLFxuICAgICAgICAgICAgLi4uKHByb2R1Y3RUeXBlICYmIHsgcHJvZHVjdFR5cGUgfSksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVBbWF6b25QYXlCdXR0b25QYXJlbnRDb250YWluZXIoKTogSFRNTERpdkVsZW1lbnQge1xuICAgICAgICBjb25zdCB1aWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zdWJzdHIoLTQpO1xuICAgICAgICBjb25zdCBwYXJlbnRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBwYXJlbnRDb250YWluZXIuaWQgPSBgYW1hem9ucGF5X2J1dHRvbl9wYXJlbnRfY29udGFpbmVyXyR7dWlkfWA7XG5cbiAgICAgICAgcmV0dXJuIHBhcmVudENvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEFtYXpvblBheVYyQnV0dG9uT3B0aW9ucyhcbiAgICAgICAgY2hlY2tvdXRTdGF0ZTogSW50ZXJuYWxDaGVja291dFNlbGVjdG9ycyB8IFBheW1lbnRJbnRlZ3JhdGlvblNlbGVjdG9ycyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGxhY2VtZW50OiBBbWF6b25QYXlWMlBsYWNlbWVudCxcbiAgICAgICAgZGVjb3VwbGVDaGVja291dEluaXRpYXRpb24gPSBmYWxzZSxcbiAgICAgICAgYnV0dG9uQ29sb3IgPSBBbWF6b25QYXlWMkJ1dHRvbkNvbG9yLkdvbGQsXG4gICAgKTogQW1hem9uUGF5VjJCdXR0b25QYXJhbWV0ZXJzIHtcbiAgICAgICAgY29uc3QgeyBnZXRDYXJ0LCBnZXRDaGVja291dCwgZ2V0U3RvcmVDb25maWdPclRocm93LCBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyB9ID1cbiAgICAgICAgICAgIHRoaXMuZ2V0Q2hlY2tvdXRTdGF0ZShjaGVja291dFN0YXRlKTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY29uZmlnOiB7IG1lcmNoYW50SWQsIHRlc3RNb2RlIH0sXG4gICAgICAgICAgICBpbml0aWFsaXphdGlvbkRhdGEsXG4gICAgICAgIH0gPSBnZXRQYXltZW50TWV0aG9kT3JUaHJvdzxBbWF6b25QYXlWMkluaXRpYWxpemVPcHRpb25zPihtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNoZWNrb3V0TGFuZ3VhZ2UsXG4gICAgICAgICAgICBjaGVja291dFNlc3Npb25NZXRob2QsXG4gICAgICAgICAgICBjcmVhdGVDaGVja291dFNlc3Npb25Db25maWcsXG4gICAgICAgICAgICBleHRyYWN0QW1hem9uQ2hlY2tvdXRTZXNzaW9uSWQsXG4gICAgICAgICAgICBsZWRnZXJDdXJyZW5jeSxcbiAgICAgICAgICAgIHB1YmxpY0tleUlkID0gJycsXG4gICAgICAgICAgICBpc0J1dHRvbk1pY3JvVGV4dERpc2FibGVkLFxuICAgICAgICB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGlmICghbWVyY2hhbnRJZCB8fCAhbGVkZ2VyQ3VycmVuY3kpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJ1dHRvbkJhc2VDb25maWc6IEFtYXpvblBheVYyQnV0dG9uQ29uZmlnID0ge1xuICAgICAgICAgICAgbWVyY2hhbnRJZCxcbiAgICAgICAgICAgIGxlZGdlckN1cnJlbmN5LFxuICAgICAgICAgICAgY2hlY2tvdXRMYW5ndWFnZSxcbiAgICAgICAgICAgIHBsYWNlbWVudCxcbiAgICAgICAgICAgIGJ1dHRvbkNvbG9yLFxuICAgICAgICAgICAgLi4uKGlzQnV0dG9uTWljcm9UZXh0RGlzYWJsZWQgPyB7IGRlc2lnbjogQW1hem9uUGF5VjJCdXR0b25EZXNpZ24uQzAwMDEgfSA6IHt9KSxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodGhpcy5pc0J1eU5vd0Zsb3cpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uYnV0dG9uQmFzZUNvbmZpZyxcbiAgICAgICAgICAgICAgICBzYW5kYm94OiAhIXRlc3RNb2RlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhcnQgPSBnZXRDYXJ0KCk7XG5cbiAgICAgICAgYnV0dG9uQmFzZUNvbmZpZy5wcm9kdWN0VHlwZSA9XG4gICAgICAgICAgICBjYXJ0ICYmIGdldFNoaXBwYWJsZUl0ZW1zQ291bnQoY2FydCkgPT09IDBcbiAgICAgICAgICAgICAgICA/IEFtYXpvblBheVYyUGF5T3B0aW9ucy5QYXlPbmx5XG4gICAgICAgICAgICAgICAgOiBBbWF6b25QYXlWMlBheU9wdGlvbnMuUGF5QW5kU2hpcDtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjaGVja291dFNldHRpbmdzOiB7IGZlYXR1cmVzIH0sXG4gICAgICAgICAgICBzdG9yZVByb2ZpbGU6IHsgc2hvcFBhdGgsIHN0b3JlQ291bnRyeUNvZGUgfSxcbiAgICAgICAgfSA9IGdldFN0b3JlQ29uZmlnT3JUaHJvdygpO1xuXG4gICAgICAgIGlmICh0aGlzLmlzUGg0RW5hYmxlZChmZWF0dXJlcywgc3RvcmVDb3VudHJ5Q29kZSkpIHtcbiAgICAgICAgICAgIGlmICghY3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBhbW91bnQgPSBnZXRDaGVja291dCgpPy5vdXRzdGFuZGluZ0JhbGFuY2UudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IGNhcnQ/LmN1cnJlbmN5LmNvZGU7XG4gICAgICAgICAgICBjb25zdCBidXR0b25PcHRpb25zOiBBbWF6b25QYXlWMk5ld0J1dHRvblBhcmFtcyA9IHsgLi4uYnV0dG9uQmFzZUNvbmZpZyB9O1xuICAgICAgICAgICAgbGV0IHRtcENvbmZpZzogQW1hem9uUGF5VjJDaGVja291dFNlc3Npb25Db25maWc7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRW52aXJvbm1lbnRTcGVjaWZpYyhwdWJsaWNLZXlJZCkpIHtcbiAgICAgICAgICAgICAgICBidXR0b25PcHRpb25zLnB1YmxpY0tleUlkID0gcHVibGljS2V5SWQ7XG4gICAgICAgICAgICAgICAgdG1wQ29uZmlnID0gY3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidXR0b25PcHRpb25zLnNhbmRib3ggPSAhIXRlc3RNb2RlO1xuICAgICAgICAgICAgICAgIHRtcENvbmZpZyA9IHsgLi4uY3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnLCBwdWJsaWNLZXlJZCB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWRlY291cGxlQ2hlY2tvdXRJbml0aWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uT3B0aW9ucy5jcmVhdGVDaGVja291dFNlc3Npb25Db25maWcgPSB0bXBDb25maWc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhbW91bnQgJiYgY3VycmVuY3lDb2RlKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uT3B0aW9ucy5lc3RpbWF0ZWRPcmRlckFtb3VudCA9IHsgYW1vdW50LCBjdXJyZW5jeUNvZGUgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbk9wdGlvbnM7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjcmVhdGVDaGVja291dFNlc3Npb24gPSB7XG4gICAgICAgICAgICBtZXRob2Q6IGNoZWNrb3V0U2Vzc2lvbk1ldGhvZCxcbiAgICAgICAgICAgIHVybDogYCR7c2hvcFBhdGh9L3JlbW90ZS1jaGVja291dC8ke21ldGhvZElkfS9wYXltZW50LXNlc3Npb25gLFxuICAgICAgICAgICAgZXh0cmFjdEFtYXpvbkNoZWNrb3V0U2Vzc2lvbklkLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5idXR0b25CYXNlQ29uZmlnLFxuICAgICAgICAgICAgY3JlYXRlQ2hlY2tvdXRTZXNzaW9uLFxuICAgICAgICAgICAgc2FuZGJveDogISF0ZXN0TW9kZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzRW52aXJvbm1lbnRTcGVjaWZpYyhwdWJsaWNLZXlJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAvXihTQU5EQk9YfExJVkUpLy50ZXN0KHB1YmxpY0tleUlkKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEFtYXpvblBheVYyU0RLKCk6IEFtYXpvblBheVYyU0RLIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3JUaHJvdyh0aGlzLmFtYXpvblBheVYyU0RLKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEJ1dHRvblBhcmVudENvbnRhaW5lcigpOiBIVE1MRGl2RWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9yVGhyb3codGhpcy5idXR0b25QYXJlbnRDb250YWluZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QW1hem9uUGF5VjJCdXR0b24oKTogQW1hem9uUGF5VjJCdXR0b24ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPclRocm93KHRoaXMuYW1hem9uUGF5VjJCdXR0b24pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0T3JUaHJvdzxUPih2YWx1ZT86IFQpOiBUIHtcbiAgICAgICAgcmV0dXJuIGd1YXJkKFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAoKSA9PiBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIElORk86IG5lZWQgdGhpcyBtYXBwaW5nIHdoaWxlIHdlIGhhdmUgc3RyYXRlZ2llcyBpbiBjb3JlIGFuZCBpbiBpbnRlZ3JhdGlvbiBwYWNrYWdlIGF0IHRoZSBzYW1lIHRpbWVcbiAgICBwcml2YXRlIGdldENoZWNrb3V0U3RhdGUoXG4gICAgICAgIGNoZWNrb3V0U3RhdGU6IEludGVybmFsQ2hlY2tvdXRTZWxlY3RvcnMgfCBQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMsXG4gICAgKTogUGljazxcbiAgICAgICAgUGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzLFxuICAgICAgICAnZ2V0Q2FydCcgfCAnZ2V0Q2hlY2tvdXQnIHwgJ2dldFN0b3JlQ29uZmlnT3JUaHJvdycgfCAnZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cnXG4gICAgPiB7XG4gICAgICAgIGlmIChpc0ludGVybmFsQ2hlY2tvdXRTZWxlY3RvcnMoY2hlY2tvdXRTdGF0ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ2V0Q2FydDogY2hlY2tvdXRTdGF0ZS5jYXJ0LmdldENhcnQsXG4gICAgICAgICAgICAgICAgZ2V0Q2hlY2tvdXQ6IGNoZWNrb3V0U3RhdGUuY2hlY2tvdXQuZ2V0Q2hlY2tvdXQsXG4gICAgICAgICAgICAgICAgZ2V0U3RvcmVDb25maWdPclRocm93OiBjaGVja291dFN0YXRlLmNvbmZpZy5nZXRTdG9yZUNvbmZpZ09yVGhyb3csXG4gICAgICAgICAgICAgICAgZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c6IDxUPihtZXRob2RJZDogc3RyaW5nKSA9PlxuICAgICAgICAgICAgICAgICAgICBjaGVja291dFN0YXRlLnBheW1lbnRNZXRob2RzLmdldFBheW1lbnRNZXRob2RPclRocm93PFQ+KG1ldGhvZElkKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2hlY2tvdXRTdGF0ZTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJbnRlcm5hbENoZWNrb3V0U2VsZWN0b3JzIH0gZnJvbSAnLi9hbWF6b24tcGF5LXYyJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzSW50ZXJuYWxDaGVja291dFNlbGVjdG9ycyhcbiAgICBjaGVja291dFNlbGVjdG9yczogdW5rbm93bixcbik6IGNoZWNrb3V0U2VsZWN0b3JzIGlzIEludGVybmFsQ2hlY2tvdXRTZWxlY3RvcnMge1xuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBjaGVja291dFNlbGVjdG9ycyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgY2hlY2tvdXRTZWxlY3RvcnMgIT09IG51bGwgJiZcbiAgICAgICAgJ2NhcnQnIGluIGNoZWNrb3V0U2VsZWN0b3JzICYmXG4gICAgICAgICdjaGVja291dCcgaW4gY2hlY2tvdXRTZWxlY3RvcnMgJiZcbiAgICAgICAgJ2NvbmZpZycgaW4gY2hlY2tvdXRTZWxlY3RvcnMgJiZcbiAgICAgICAgJ3BheW1lbnRNZXRob2RzJyBpbiBjaGVja291dFNlbGVjdG9yc1xuICAgICk7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBmYWlsc1xuICogdG8gbG9hZCwgb3IgZm9yIHNvbWUgcmVhc29uLCBpdCBpcyBpbmFjY2Vzc2libGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgQW1hem9uUGF5VjJIb3N0V2luZG93LFxuICAgIEFtYXpvblBheVYySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgYW1hem9uUGF5VjJSZWdpb25zLFxuICAgIEFtYXpvblBheVYyU0RLLFxufSBmcm9tICcuL2FtYXpvbi1wYXktdjInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbWF6b25QYXlWMlNjcmlwdExvYWRlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgc2NyaXB0TG9hZGVyOiBTY3JpcHRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUgd2luZG93V2l0aEFtYXpvblBheTogQW1hem9uUGF5VjJIb3N0V2luZG93ID0gd2luZG93LFxuICAgICkge31cblxuICAgIGFzeW5jIGxvYWQobWV0aG9kOiBQYXltZW50TWV0aG9kPEFtYXpvblBheVYySW5pdGlhbGl6ZU9wdGlvbnM+KTogUHJvbWlzZTxBbWF6b25QYXlWMlNESz4ge1xuICAgICAgICBjb25zdCB7IGluaXRpYWxpemF0aW9uRGF0YSB9ID0gbWV0aG9kO1xuICAgICAgICBjb25zdCByZWdpb24gPSBpbml0aWFsaXphdGlvbkRhdGE/LnJlZ2lvbiB8fCAndXMnO1xuXG4gICAgICAgIGNvbnN0IGFtYXpvblBheVYyUmVnaW9uID0gYW1hem9uUGF5VjJSZWdpb25zW3JlZ2lvbl07XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChcbiAgICAgICAgICAgIGBodHRwczovL3N0YXRpYy0ke2FtYXpvblBheVYyUmVnaW9ufS5wYXltZW50cy1hbWF6b24uY29tL2NoZWNrb3V0LmpzYCxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIXRoaXMud2luZG93V2l0aEFtYXpvblBheS5hbWF6b24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93V2l0aEFtYXpvblBheS5hbWF6b247XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQgQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yIGZyb20gJy4vYW1hem9uLXBheS12Mi1wYXltZW50LXByb2Nlc3Nvcic7XG5pbXBvcnQgQW1hem9uUGF5VjJTY3JpcHRMb2FkZXIgZnJvbSAnLi9hbWF6b24tcGF5LXYyLXNjcmlwdC1sb2FkZXInO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVBbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IoKTogQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yIHtcbiAgICByZXR1cm4gbmV3IEFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcihuZXcgQW1hem9uUGF5VjJTY3JpcHRMb2FkZXIoZ2V0U2NyaXB0TG9hZGVyKCkpKTtcbn1cbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG1vZHVsZSwgeyByZXNvbHZlSWRzIH0pO1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBtZXRob2QgaXMgdW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGVcbiAqIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgYXJndW1lbnRzIGFjY29yZGluZyB0byB0aGVpciByZXF1aXJlbWVudHMsXG4gKiBpLmUuOiBpZiBhbiBhcmd1bWVudCBpcyBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnSW52YWxpZCBhcmd1bWVudHMgaGF2ZSBiZWVuIHByb3ZpZGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkQXJndW1lbnRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdpbnZhbGlkX2FyZ3VtZW50JztcbiAgICB9XG59XG4iLCJpbXBvcnQgSW52YWxpZEFyZ3VtZW50RXJyb3IgZnJvbSAnLi9pbnZhbGlkLWFyZ3VtZW50LWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB3ZSBhcmUgdW5hYmxlIHRvIHN1Ym1pdCBhIHBheW1lbnQgYmVjYXVzZVxuICogdGhlIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzLCBpLmUuOiBpZiBhbiBhcmd1bWVudCBpc1xuICogbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIGV4dGVuZHMgSW52YWxpZEFyZ3VtZW50RXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGludmFsaWRGaWVsZHM/OiBzdHJpbmdbXSkge1xuICAgICAgICBsZXQgbWVzc2FnZSA9ICdVbmFibGUgdG8gc3VibWl0IHBheW1lbnQgZm9yIHRoZSBvcmRlciBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIGludmFsaWQuJztcblxuICAgICAgICBpZiAoaW52YWxpZEZpZWxkcykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IE1ha2Ugc3VyZSB0aGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgcHJvdmlkZWQgY29ycmVjdGx5OiAke2ludmFsaWRGaWVsZHMuam9pbihcbiAgICAgICAgICAgICAgICAnLCAnLFxuICAgICAgICAgICAgKX0uYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBwYXltZW50IGZsb3cgaXMgY2FuY2VsbGVkLiBJdCBjb3VsZCBiZVxuICogZHVlIHRvIGEgZGVsaWJlcmF0ZSB1c2VyIGludGVyYWN0aW9uLCBpLmUuOiB0aGUgdXNlciBjbGlja3Mgb24gYSBjYW5jZWxcbiAqIGJ1dHRvbiB3aGljaCBkaXNtaXNzZXMgdGhlIHBheW1lbnQgbW9kYWwuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnUGF5bWVudCBwcm9jZXNzIHdhcyBjYW5jZWxsZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X2NhbmNlbGxlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQW1hem9uUGF5VjJDaGFuZ2VBY3Rpb25UeXBlLFxuICAgIEFtYXpvblBheVYyQ2hlY2tvdXRTZXNzaW9uQ29uZmlnLFxuICAgIEFtYXpvblBheVYySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLFxuICAgIEFtYXpvblBheVYyUGxhY2VtZW50LFxuICAgIGlzQW1hem9uUGF5QWRkaXRpb25hbEFjdGlvbkVycm9yQm9keSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9hbWF6b24tcGF5LXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ2hlY2tvdXRTZXR0aW5ncyxcbiAgICBndWFyZCxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc1JlcXVlc3RFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBTdG9yZVByb2ZpbGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBXaXRoQW1hem9uUGF5VjJQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgfSBmcm9tICcuL2FtYXpvbi1wYXktdjItcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbWF6b25QYXlWMlBheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBfYW1hem9uUGF5QnV0dG9uPzogSFRNTERpdkVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcjogQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhBbWF6b25QYXlWMlBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgYW1hem9ucGF5IH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgeyBmZWF0dXJlcyB9ID0gc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncztcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEFtYXpvblBheVYySW5pdGlhbGl6ZU9wdGlvbnM+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgaW5pdGlhbGl6YXRpb25EYXRhID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudFRva2VuID0gJycsIHJlZ2lvbiA9ICcnLCBpc0J1dHRvbk1pY3JvVGV4dERpc2FibGVkIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IuaW5pdGlhbGl6ZShwYXltZW50TWV0aG9kKTtcblxuICAgICAgICBpZiAodGhpcy5faXNSZWFkeVRvUGF5KHBheW1lbnRUb2tlbikpIHtcbiAgICAgICAgICAgIGlmIChhbWF6b25wYXk/LmVkaXRCdXR0b25JZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2JpbmRFZGl0QnV0dG9uKFxuICAgICAgICAgICAgICAgICAgICBhbWF6b25wYXkuZWRpdEJ1dHRvbklkLFxuICAgICAgICAgICAgICAgICAgICBwYXltZW50VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICdjaGFuZ2VQYXltZW50JyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNNb2RhbEZsb3cocmVnaW9uKSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgeyBpZDogY29udGFpbmVySWQgfSA9IHRoaXMuX2NyZWF0ZUNvbnRhaW5lcigpO1xuXG4gICAgICAgICAgICB0aGlzLl9hbWF6b25QYXlCdXR0b24gPSB0aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5yZW5kZXJBbWF6b25QYXlCdXR0b24oe1xuICAgICAgICAgICAgICAgIGNoZWNrb3V0U3RhdGU6IHN0YXRlLFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgIGRlY291cGxlQ2hlY2tvdXRJbml0aWF0aW9uOiB0aGlzLl9pc09uZVRpbWVUcmFuc2FjdGlvbihcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMsXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lvbi50b1VwcGVyQ2FzZSgpLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgcGxhY2VtZW50OiBBbWF6b25QYXlWMlBsYWNlbWVudC5DaGVja291dCxcbiAgICAgICAgICAgICAgICBpc0J1dHRvbk1pY3JvVGV4dERpc2FibGVkLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5fYW1hem9uUGF5QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHJlbmRlciB0aGUgQW1hem9uIFBheSBidXR0b24gdG8gYW4gaW52YWxpZCBIVE1MIGNvbnRhaW5lciBlbGVtZW50LicsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQgfSA9IHBheW1lbnQ7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgZmVhdHVyZXMgfSA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3M7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxBbWF6b25QYXlWMkluaXRpYWxpemVPcHRpb25zPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IGluaXRpYWxpemF0aW9uRGF0YSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IHBheW1lbnRUb2tlbiA9ICcnLCByZWdpb24gPSAnJyB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuX2lzUmVhZHlUb1BheShwYXltZW50VG9rZW4pIHx8XG4gICAgICAgICAgICB0aGlzLl9pc09uZVRpbWVUcmFuc2FjdGlvbihmZWF0dXJlcywgcmVnaW9uLnRvVXBwZXJDYXNlKCkpXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudFBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgcGF5bWVudERhdGE6IHsgbm9uY2U6IHBheW1lbnRUb2tlbiB8fCAnYXBiJyB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHBheWxvYWQsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1JlcXVlc3RFcnJvcihlcnJvcikgfHwgIWlzQW1hem9uUGF5QWRkaXRpb25hbEFjdGlvbkVycm9yQm9keShlcnJvci5ib2R5KSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCB7IGFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkOiBhZGRpdGlvbmFsQWN0aW9uIH0gPSBlcnJvci5ib2R5O1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgcmVkaXJlY3RfdXJsIH0gPSBhZGRpdGlvbmFsQWN0aW9uLmRhdGE7XG5cbiAgICAgICAgICAgICAgICBpZiAocGF5bWVudFRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKSA9PiB3aW5kb3cubG9jYXRpb24uYXNzaWduKHJlZGlyZWN0X3VybCkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLnByZXBhcmVDaGVja291dChcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtYXNzZXJ0aW9uc1xuICAgICAgICAgICAgICAgICAgICBKU09OLnBhcnNlKHJlZGlyZWN0X3VybCkgYXMgUmVxdWlyZWQ8QW1hem9uUGF5VjJDaGVja291dFNlc3Npb25Db25maWc+LFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9nZXRBbWF6b25QYXlCdXR0b24oKS5jbGljaygpO1xuXG4gICAgICAgIC8vIEZvY3VzIG9mIHBhcmVudCB3aW5kb3cgdXNlZCB0byB0cnkgYW5kIGRldGVjdCB0aGUgdXNlciBjYW5jZWxsaW5nIHRoZSBBbWF6b24gbG9nIGluIG1vZGFsXG4gICAgICAgIC8vIFNob3VsZCBiZSByZWZhY3RvcmVkIGlmL3doZW4gQW1hem9uIGFkZCBhIG1vZGFsIGNsb3NlIGhvb2sgdG8gdGhlaXIgU0RLXG4gICAgICAgIGlmICh0aGlzLl9pc01vZGFsRmxvdyhyZWdpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9uRm9jdXMgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIG9uRm9jdXMpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTaG9wcGVyIG5lZWRzIHRvIGxvZ2luIHRvIEFtYXpvbnBheSB0byBjb250aW51ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBvbkZvY3VzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPG5ldmVyPihub29wKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5kZWluaXRpYWxpemUoKTtcblxuICAgICAgICB0aGlzLl9hbWF6b25QYXlCdXR0b24gPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfYmluZEVkaXRCdXR0b24oXG4gICAgICAgIGJ1dHRvbklkOiBzdHJpbmcsXG4gICAgICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgICAgICBjaGFuZ2VBY3Rpb246IEFtYXpvblBheVYyQ2hhbmdlQWN0aW9uVHlwZSxcbiAgICAgICAgaXNNb2RhbEZsb3c6IGJvb2xlYW4sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbklkKTtcblxuICAgICAgICBpZiAoIWJ1dHRvbiB8fCAhYnV0dG9uLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNNb2RhbEZsb3cpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsb25lID0gYnV0dG9uLmNsb25lTm9kZSh0cnVlKTtcblxuICAgICAgICAgICAgYnV0dG9uLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lLCBidXR0b24pO1xuXG4gICAgICAgICAgICBjbG9uZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB2b2lkIHRoaXMuX3Nob3dMb2FkaW5nU3Bpbm5lcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5iaW5kQnV0dG9uKGJ1dHRvbklkLCBzZXNzaW9uSWQsIGNoYW5nZUFjdGlvbik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNNb2RhbEZsb3cocmVnaW9uOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHJlZ2lvbiA9PT0gJ3VzJztcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9zaG93TG9hZGluZ1NwaW5uZXIoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS53aWRnZXRJbnRlcmFjdGlvbigoKSA9PiBuZXcgUHJvbWlzZShub29wKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY3JlYXRlQ29udGFpbmVyKCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBbWF6b25QYXlCdXR0b24nKTtcblxuICAgICAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnRhaW5lci5pZCA9ICdBbWF6b25QYXlCdXR0b24nO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldEFtYXpvblBheUJ1dHRvbigpIHtcbiAgICAgICAgcmV0dXJuIGd1YXJkKFxuICAgICAgICAgICAgdGhpcy5fYW1hem9uUGF5QnV0dG9uLFxuICAgICAgICAgICAgKCkgPT4gbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9pc09uZVRpbWVUcmFuc2FjdGlvbihcbiAgICAgICAgZmVhdHVyZXM6IENoZWNrb3V0U2V0dGluZ3NbJ2ZlYXR1cmVzJ10sXG4gICAgICAgIHN0b3JlQ291bnRyeUNvZGU6IFN0b3JlUHJvZmlsZVsnc3RvcmVDb3VudHJ5Q29kZSddLFxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IuaXNQaDRFbmFibGVkKGZlYXR1cmVzLCBzdG9yZUNvdW50cnlDb2RlKSAmJlxuICAgICAgICAgICAgZmVhdHVyZXNbJ0lOVC02Mzk5LmFtYXpvbl9wYXlfYXBiJ11cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9pc1JlYWR5VG9QYXkocGF5bWVudFRva2VuPzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXBheW1lbnRUb2tlbjtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8vIEhhdmUgdG8gdXNlIGBhc2AgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzM5ODcwNDQvdHlwZWd1YXJkaW5nLWFuLXVua25vd24tbmVzdGVkLW9iamVjdCBzaG91bGQgYmUgZml4ZWQgaW4gNC44K1xuY29uc3QgaXNSZXF1ZXN0RXJyb3IgPSAoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBSZXF1ZXN0RXJyb3IgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdib2R5JyBpbiBlcnJvcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzUmVxdWVzdEVycm9yO1xuIiwiaW1wb3J0IHsgQW1hem9uUGF5QWRkaXRpb25hbEFjdGlvbkVycm9yQm9keSB9IGZyb20gJy4vYW1hem9uLXBheS12Mic7XG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtYXNzZXJ0aW9ucyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQW1hem9uUGF5QWRkaXRpb25hbEFjdGlvbkVycm9yQm9keShcbiAgICBlcnJvckJvZHk6IHVua25vd24sXG4pOiBlcnJvckJvZHkgaXMgQW1hem9uUGF5QWRkaXRpb25hbEFjdGlvbkVycm9yQm9keSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGVycm9yQm9keSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgZXJyb3JCb2R5ICE9PSBudWxsICYmXG4gICAgICAgICdzdGF0dXMnIGluIGVycm9yQm9keSAmJlxuICAgICAgICAnYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQnIGluIGVycm9yQm9keSAmJlxuICAgICAgICAoZXJyb3JCb2R5IGFzIEFtYXpvblBheUFkZGl0aW9uYWxBY3Rpb25FcnJvckJvZHkpLnN0YXR1cyA9PT0gJ2FkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkJyAmJlxuICAgICAgICAnZGF0YScgaW4gKGVycm9yQm9keSBhcyBBbWF6b25QYXlBZGRpdGlvbmFsQWN0aW9uRXJyb3JCb2R5KS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCAmJlxuICAgICAgICAncmVkaXJlY3RfdXJsJyBpblxuICAgICAgICAgICAgKGVycm9yQm9keSBhcyBBbWF6b25QYXlBZGRpdGlvbmFsQWN0aW9uRXJyb3JCb2R5KS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZC5kYXRhICYmXG4gICAgICAgIHR5cGVvZiAoZXJyb3JCb2R5IGFzIEFtYXpvblBheUFkZGl0aW9uYWxBY3Rpb25FcnJvckJvZHkpLmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkLmRhdGFcbiAgICAgICAgICAgIC5yZWRpcmVjdF91cmwgPT09ICdzdHJpbmcnXG4gICAgKTtcbn1cbi8qIGVzbGludC1lbmFibGUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zICovXG4iLCJpbXBvcnQgeyBjcmVhdGVBbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2FtYXpvbi1wYXktdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBBbWF6b25QYXlWMlBheW1lbnRTdHJhdGVneSBmcm9tICcuL2FtYXpvbi1wYXktdjItcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUFtYXpvblBheVYyUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PEFtYXpvblBheVYyUGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBBbWF6b25QYXlWMlBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yKCksXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVBbWF6b25QYXlWMlBheW1lbnRTdHJhdGVneSwgW3sgaWQ6ICdhbWF6b25wYXknIH1dKTtcbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgdHJ5IHRvIGNhbGwgYSBtZXRob2QgdGhhdCBpcyBvbmx5IGEgc3R1YiBhbmQgaGFzIG5vdFxuICogYmVlbiBmdWxseSBpbXBsZW1lbnRlZC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW1wbGVtZW50ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnTm90IGltcGxlbWVudGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbXBsZW1lbnRlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbXBsZW1lbnRlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBBbWF6b25QYXlWMkluaXRpYWxpemVPcHRpb25zLFxuICAgIEFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcixcbiAgICBBbWF6b25QYXlWMlBsYWNlbWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9hbWF6b24tcGF5LXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE5vdEltcGxlbWVudGVkRXJyb3IsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgV2l0aEFtYXpvblBheVYyQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyB9IGZyb20gJy4vYW1hem9uLXBheS12Mi1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbWF6b25QYXlWMkN1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcjogQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQW1hem9uUGF5VjJDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBhbWF6b25wYXkgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCB8fCAhYW1hem9ucGF5Py5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm1ldGhvZElkXCIgb3IgXCJjb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPEFtYXpvblBheVYySW5pdGlhbGl6ZU9wdGlvbnM+O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlXG4gICAgICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgICAgICAuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICB9IGNhdGNoIChfZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2VcbiAgICAgICAgICAgICAgICAuZ2V0U3RhdGUoKVxuICAgICAgICAgICAgICAgIC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5pbml0aWFsaXplKHBheW1lbnRNZXRob2QpO1xuXG4gICAgICAgIHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLnJlbmRlckFtYXpvblBheUJ1dHRvbih7XG4gICAgICAgICAgICBjaGVja291dFN0YXRlOiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxcbiAgICAgICAgICAgIGNvbnRhaW5lcklkOiBhbWF6b25wYXkuY29udGFpbmVyLFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6IEFtYXpvblBheVYyUGxhY2VtZW50LkNoZWNrb3V0LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLmRlaW5pdGlhbGl6ZSgpO1xuICAgIH1cblxuICAgIHNpZ25JbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoXG4gICAgICAgICAgICAnSW4gb3JkZXIgdG8gc2lnbiBpbiB2aWEgQW1hem9uLCB0aGUgc2hvcHBlciBtdXN0IGNsaWNrIG9uIFwiQW1hem9uIFBheVwiIGJ1dHRvbi4nLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25PdXQob3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnQgPSBzdGF0ZS5nZXRQYXltZW50SWQoKTtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLnNpZ25vdXQoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnJlbW90ZUNoZWNrb3V0U2lnbk91dChwYXltZW50LnByb3ZpZGVySWQsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQob3B0aW9ucz86IEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIG9wdGlvbnM/LmNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2s/LigpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVBbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2FtYXpvbi1wYXktdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQW1hem9uUGF5VjJDdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vYW1hem9uLXBheS12Mi1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUFtYXpvblBheVYyQ3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8QW1hem9uUGF5VjJDdXN0b21lclN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBBbWF6b25QYXlWMkN1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcigpLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQW1hem9uUGF5VjJDdXN0b21lclN0cmF0ZWd5LCBbeyBpZDogJ2FtYXpvbnBheScgfV0pO1xuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBzaG9wcGVyIHRyaWVzIHRvIHNpZ24gaW4gYXMgYSBndWVzdCBidXRcbiAqIHRoZXkgYXJlIGFscmVhZHkgc2lnbmVkIGluIGFzIGEgcmVnaXN0ZXJlZCBjdXN0b21lci5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnV5Tm93Q2FydENyZWF0aW9uRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZCBkdXJpbmcgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uIHByb2Nlc3MuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnQnV5Tm93Q2FydENyZWF0aW9uRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnYnV5X25vd19jYXJ0X2NyZWF0aW9uX2Vycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTdGFuZGFyZEVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFtYXpvblBheVYyQ29uZmlnQ3JlYXRpb25FcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBtZXNzYWdlIHx8XG4gICAgICAgICAgICAgICAgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkIGR1cmluZyBjb25maWcgY3JlYXRpb24gcHJvY2Vzcy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdBbWF6b25QYXlWMkNvbmZpZ0NyZWF0aW9uRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnYW1hem9uX3BheV92Ml9jb25maWdfY3JlYXRpb25fZXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFdpdGhCdXlOb3dGZWF0dXJlIH0gZnJvbSAnLi9hbWF6b24tcGF5LXYyLWJ1dHRvbi1vcHRpb25zJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzV2l0aEJ1eU5vd0ZlYXR1cmVzKG9wdGlvbnM6IHVua25vd24pOiBvcHRpb25zIGlzIFdpdGhCdXlOb3dGZWF0dXJlIHtcbiAgICBpZiAoIShvcHRpb25zIGluc3RhbmNlb2YgT2JqZWN0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuICdidXlOb3dJbml0aWFsaXplT3B0aW9ucycgaW4gb3B0aW9ucztcbn1cbiIsImVudW0gQ29udGVudFR5cGUge1xuICAgIEpzb24gPSAnYXBwbGljYXRpb24vanNvbicsXG4gICAgSnNvblYxID0gJ2FwcGxpY2F0aW9uL3ZuZC5iYy52MStqc29uJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udGVudFR5cGU7XG4iLCJpbXBvcnQge1xuICAgIEFtYXpvblBheVYyQ2hlY2tvdXRTZXNzaW9uQ29uZmlnLFxuICAgIEFtYXpvblBheVYySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLFxuICAgIEFtYXpvblBheVYyUGF5T3B0aW9ucyxcbiAgICBBbWF6b25QYXlWMlBsYWNlbWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9hbWF6b24tcGF5LXV0aWxzJztcbmltcG9ydCB7XG4gICAgQnV5Tm93Q2FydENyZWF0aW9uRXJyb3IsXG4gICAgQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5LFxuICAgIGdldFNoaXBwYWJsZUl0ZW1zQ291bnQsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBXaXRoQW1hem9uUGF5VjJCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICBXaXRoQnV5Tm93RmVhdHVyZSxcbn0gZnJvbSAnLi9hbWF6b24tcGF5LXYyLWJ1dHRvbi1vcHRpb25zJztcbmltcG9ydCBBbWF6b25QYXlWMlJlcXVlc3RTZW5kZXIgZnJvbSAnLi9hbWF6b24tcGF5LXYyLXJlcXVlc3Qtc2VuZGVyJztcbmltcG9ydCBBbWF6b25QYXlWMkNvbmZpZ0NyZWF0aW9uRXJyb3IgZnJvbSAnLi9lcnJvcnMvYW1hem9uLXBheS12Mi1jb25maWctY3JlYXRpb24tZXJyb3InO1xuaW1wb3J0IHsgaXNXaXRoQnV5Tm93RmVhdHVyZXMgfSBmcm9tICcuL2lzV2l0aEJ1eU5vd0ZlYXR1cmVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW1hem9uUGF5VjJCdXR0b25TdHJhdGVneSBpbXBsZW1lbnRzIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3kge1xuICAgIHByaXZhdGUgX2J1eU5vd0luaXRpYWxpemVPcHRpb25zOiBXaXRoQnV5Tm93RmVhdHVyZVsnYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMnXTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yOiBBbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IsXG4gICAgICAgIHByaXZhdGUgYW1hem9uUGF5VjJDb25maWdSZXF1ZXN0U2VuZGVyOiBBbWF6b25QYXlWMlJlcXVlc3RTZW5kZXIsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyAmIFdpdGhBbWF6b25QYXlWMkJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBjb250YWluZXJJZCwgYW1hem9ucGF5IH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCB7IGJ1dHRvbkNvbG9yIH0gPSBhbWF6b25wYXkgfHwge307XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCB8fCAhY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm1ldGhvZElkXCIgb3IgXCJjb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cgfSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBnZXRQYXltZW50TWV0aG9kT3JUaHJvdzxBbWF6b25QYXlWMkluaXRpYWxpemVPcHRpb25zPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLmluaXRpYWxpemUocGF5bWVudE1ldGhvZCk7XG5cbiAgICAgICAgaWYgKCFhbWF6b25wYXkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpbml0aWFsaXplQW1hem9uQnV0dG9uT3B0aW9ucyA9IGlzV2l0aEJ1eU5vd0ZlYXR1cmVzKGFtYXpvbnBheSlcbiAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IGFtYXpvbnBheTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc1dpdGhCdXlOb3dGZWF0dXJlcyhhbWF6b25wYXkpICYmXG4gICAgICAgICAgICB0eXBlb2YgYW1hem9ucGF5LmJ1eU5vd0luaXRpYWxpemVPcHRpb25zPy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkgPT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucyA9IGFtYXpvbnBheS5idXlOb3dJbml0aWFsaXplT3B0aW9ucztcbiAgICAgICAgICAgIHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLnVwZGF0ZUJ1eU5vd0Zsb3dGbGFnKHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IucmVuZGVyQW1hem9uUGF5QnV0dG9uKHtcbiAgICAgICAgICAgIGNoZWNrb3V0U3RhdGU6IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLFxuICAgICAgICAgICAgY29udGFpbmVySWQsXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIG9wdGlvbnM6IGluaXRpYWxpemVBbWF6b25CdXR0b25PcHRpb25zLFxuICAgICAgICAgICAgcGxhY2VtZW50OiBBbWF6b25QYXlWMlBsYWNlbWVudC5DYXJ0LFxuICAgICAgICAgICAgYnV0dG9uQ29sb3IsXG4gICAgICAgICAgICBpc0J1dHRvbk1pY3JvVGV4dERpc2FibGVkOiBpbml0aWFsaXphdGlvbkRhdGE/LmlzQnV0dG9uTWljcm9UZXh0RGlzYWJsZWQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IucHJlcGFyZUNoZWNrb3V0V2l0aENyZWF0aW9uUmVxdWVzdENvbmZpZyhcbiAgICAgICAgICAgICAgICB0aGlzLl9nZXRDaGVja291dENyZWF0aW9uUmVxdWVzdENvbmZpZy5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLmRlaW5pdGlhbGl6ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2NyZWF0ZUJ1eU5vd0NhcnRPclRocm93KCkge1xuICAgICAgICBjb25zdCBidXlOb3dDYXJ0UmVxdWVzdEJvZHkgPSB0aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucz8uZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5Py4oKTtcblxuICAgICAgICBpZiAoIWJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NhcnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJ1eU5vd0NhcnQgPSBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydChcbiAgICAgICAgICAgICAgICBidXlOb3dDYXJ0UmVxdWVzdEJvZHksXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gYnV5Tm93Q2FydDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfY3JlYXRlQ2hlY2tvdXRDb25maWcoXG4gICAgICAgIGlkOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxSZXF1aXJlZDxBbWF6b25QYXlWMkNoZWNrb3V0U2Vzc2lvbkNvbmZpZz4+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgICBib2R5OiB7IHBheWxvYWQsIHB1YmxpY19rZXksIC4uLnJlc3QgfSxcbiAgICAgICAgICAgIH0gPSBhd2FpdCB0aGlzLmFtYXpvblBheVYyQ29uZmlnUmVxdWVzdFNlbmRlci5jcmVhdGVDaGVja291dENvbmZpZyhpZCk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZEpTT046IHBheWxvYWQsXG4gICAgICAgICAgICAgICAgcHVibGljS2V5SWQ6IHB1YmxpY19rZXksXG4gICAgICAgICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQW1hem9uUGF5VjJDb25maWdDcmVhdGlvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9nZXRDaGVja291dENyZWF0aW9uUmVxdWVzdENvbmZpZygpIHtcbiAgICAgICAgY29uc3QgYnV5Tm93Q2FydCA9IGF3YWl0IHRoaXMuX2NyZWF0ZUJ1eU5vd0NhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGVzdGltYXRlZE9yZGVyQW1vdW50ID0ge1xuICAgICAgICAgICAgYW1vdW50OiBTdHJpbmcoYnV5Tm93Q2FydC5iYXNlQW1vdW50KSxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZTogYnV5Tm93Q2FydC5jdXJyZW5jeS5jb2RlLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjcmVhdGVDaGVja291dFNlc3Npb25Db25maWcgPSBhd2FpdCB0aGlzLl9jcmVhdGVDaGVja291dENvbmZpZyhidXlOb3dDYXJ0LmlkKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnLFxuICAgICAgICAgICAgZXN0aW1hdGVkT3JkZXJBbW91bnQsXG4gICAgICAgICAgICBwcm9kdWN0VHlwZTpcbiAgICAgICAgICAgICAgICBnZXRTaGlwcGFibGVJdGVtc0NvdW50KGJ1eU5vd0NhcnQpID09PSAwXG4gICAgICAgICAgICAgICAgICAgID8gQW1hem9uUGF5VjJQYXlPcHRpb25zLlBheU9ubHlcbiAgICAgICAgICAgICAgICAgICAgOiBBbWF6b25QYXlWMlBheU9wdGlvbnMuUGF5QW5kU2hpcCxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCJleHBvcnQgY29uc3QgU0RLX1ZFUlNJT05fSEVBREVSUyA9IHsgJ1gtQ2hlY2tvdXQtU0RLLVZlcnNpb24nOiBMSUJSQVJZX1ZFUlNJT04gfTtcbiIsImltcG9ydCB7IFJlcXVlc3RTZW5kZXIsIFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IHtcbiAgICBDb250ZW50VHlwZSxcbiAgICBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICBTREtfVkVSU0lPTl9IRUFERVJTLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGludGVyZmFjZSBDaGVja291dENvbmZpZyB7XG4gICAgcGF5bG9hZDogc3RyaW5nO1xuICAgIHNpZ25hdHVyZTogc3RyaW5nO1xuICAgIHB1YmxpY19rZXk6IHN0cmluZztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW1hem9uUGF5VjJSZXF1ZXN0U2VuZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9yZXF1ZXN0U2VuZGVyOiBSZXF1ZXN0U2VuZGVyKSB7fVxuXG4gICAgY3JlYXRlQ2hlY2tvdXRDb25maWcoY2FydElkOiBzdHJpbmcpOiBQcm9taXNlPFJlc3BvbnNlPENoZWNrb3V0Q29uZmlnPj4ge1xuICAgICAgICBjb25zdCBib2R5ID0geyBjYXJ0SWQgfTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICdYLUFQSS1JTlRFUk5BTCc6IElOVEVSTkFMX1VTRV9PTkxZLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IENvbnRlbnRUeXBlLkpzb24sXG4gICAgICAgICAgICAuLi5TREtfVkVSU0lPTl9IRUFERVJTLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QoJy9hcGkvc3RvcmVmcm9udC9wYXltZW50L2FtYXpvbnBheScsIHsgaGVhZGVycywgYm9keSB9KTtcbiAgICB9XG59XG4iLCJleHBvcnQgY29uc3QgSU5URVJOQUxfVVNFX09OTFkgPVxuICAgICdUaGlzIEFQSSBlbmRwb2ludCBpcyBmb3IgaW50ZXJuYWwgdXNlIG9ubHkgYW5kIG1heSBjaGFuZ2UgaW4gdGhlIGZ1dHVyZSc7XG4iLCJpbXBvcnQgeyBjcmVhdGVSZXF1ZXN0U2VuZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IHsgY3JlYXRlQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9hbWF6b24tcGF5LXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEFtYXpvblBheVYyQnV0dG9uU3RyYXRlZ3kgZnJvbSAnLi9hbWF6b24tcGF5LXYyLWJ1dHRvbi1zdHJhdGVneSc7XG5pbXBvcnQgQW1hem9uUGF5VjJSZXF1ZXN0U2VuZGVyIGZyb20gJy4vYW1hem9uLXBheS12Mi1yZXF1ZXN0LXNlbmRlcic7XG5cbmNvbnN0IGNyZWF0ZUFtYXpvblBheVYyQnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PEFtYXpvblBheVYyQnV0dG9uU3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICBjb25zdCByZXF1ZXN0U2VuZGVyID0gY3JlYXRlUmVxdWVzdFNlbmRlcigpO1xuICAgIGNvbnN0IGFtYXpvblBheVYyUmVxdWVzdFNlbmRlciA9IG5ldyBBbWF6b25QYXlWMlJlcXVlc3RTZW5kZXIocmVxdWVzdFNlbmRlcik7XG4gICAgY29uc3QgYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yID0gY3JlYXRlQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yKCk7XG5cbiAgICByZXR1cm4gbmV3IEFtYXpvblBheVYyQnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcixcbiAgICAgICAgYW1hem9uUGF5VjJSZXF1ZXN0U2VuZGVyLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQW1hem9uUGF5VjJCdXR0b25TdHJhdGVneSwgW3sgaWQ6ICdhbWF6b25wYXknIH1dKTtcbiJdLCJuYW1lcyI6WyJNaXNzaW5nRGF0YUVycm9yVHlwZSIsIk5vdEluaXRpYWxpemVkRXJyb3JUeXBlIiwiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwicHJvdG90eXBlIiwic3VwZXIiLCJuYW1lIiwidHlwZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwidGhpcyIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJNaXNzaW5nRGF0YUVycm9yIiwic3VidHlwZSIsIk1pc3NpbmdCaWxsaW5nQWRkcmVzcyIsIk1pc3NpbmdDYXJ0IiwiTWlzc2luZ0NvbnNpZ25tZW50cyIsIk1pc3NpbmdDaGVja291dCIsIk1pc3NpbmdDdXN0b21lciIsIk1pc3NpbmdDaGVja291dENvbmZpZyIsIk1pc3NpbmdPcmRlckNvbmZpZyIsIk1pc3NpbmdPcmRlciIsIk1pc3NpbmdPcmRlcklkIiwiTWlzc2luZ1BheW1lbnQiLCJNaXNzaW5nUGF5bWVudFRva2VuIiwiTWlzc2luZ1BheW1lbnRNZXRob2QiLCJNaXNzaW5nU2hpcHBpbmdBZGRyZXNzIiwiZ2V0RXJyb3JNZXNzYWdlIiwiZ2V0U2hpcHBhYmxlSXRlbXNDb3VudCIsImNhcnQiLCJsaW5lSXRlbXMiLCJwaHlzaWNhbEl0ZW1zIiwiZmlsdGVyIiwiaXRlbSIsImFkZGVkQnlQcm9tb3Rpb24iLCJyZWR1Y2UiLCJ0b3RhbCIsInF1YW50aXR5IiwiZ3VhcmQiLCJ2YWx1ZSIsImVycm9yRmFjdG9yeSIsIk5vdEluaXRpYWxpemVkRXJyb3IiLCJDdXN0b21lck5vdEluaXRpYWxpemVkIiwiUGF5bWVudE5vdEluaXRpYWxpemVkIiwiU2hpcHBpbmdOb3RJbml0aWFsaXplZCIsIlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQiLCJhbWF6b25QYXlWMlJlZ2lvbnMiLCJkZSIsImpwIiwidWsiLCJ1cyIsIkFtYXpvblBheVYyQ2hlY2tvdXRMYW5ndWFnZSIsIkFtYXpvblBheVYyUGxhY2VtZW50IiwiQW1hem9uUGF5VjJMZWRnZXJDdXJyZW5jeSIsIkFtYXpvblBheVYyUGF5T3B0aW9ucyIsIkFtYXpvblBheVYyQnV0dG9uQ29sb3IiLCJBbWF6b25QYXlWMkJ1dHRvbkRlc2lnbiIsIkFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvciIsImFtYXpvblBheVYyU2NyaXB0TG9hZGVyIiwiaW5pdGlhbGl6ZSIsInBheW1lbnRNZXRob2QiLCJhbWF6b25QYXlWMlNESyIsImxvYWQiLCJidXR0b25QYXJlbnRDb250YWluZXIiLCJjcmVhdGVBbWF6b25QYXlCdXR0b25QYXJlbnRDb250YWluZXIiLCJkZWluaXRpYWxpemUiLCJhbWF6b25QYXlWMkJ1dHRvbiIsInVuZGVmaW5lZCIsInJlbW92ZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiYmluZEJ1dHRvbiIsImJ1dHRvbklkIiwic2Vzc2lvbklkIiwiY2hhbmdlQWN0aW9uIiwiZ2V0QW1hem9uUGF5VjJTREsiLCJQYXkiLCJiaW5kQ2hhbmdlQWN0aW9uIiwiYW1hem9uQ2hlY2tvdXRTZXNzaW9uSWQiLCJjcmVhdGVCdXR0b24iLCJjb250YWluZXJJZCIsIm9wdGlvbnMiLCJyZW5kZXJCdXR0b24iLCJwcmVwYXJlQ2hlY2tvdXQiLCJjcmVhdGVDaGVja291dFNlc3Npb25Db25maWciLCJyZXF1ZXN0Q29uZmlnIiwicHJlcGFyZVJlcXVlc3RDb25maWciLCJnZXRBbWF6b25QYXlWMkJ1dHRvbiIsIm9uQ2xpY2siLCJpbml0Q2hlY2tvdXQiLCJwcmVwYXJlQ2hlY2tvdXRXaXRoQ3JlYXRpb25SZXF1ZXN0Q29uZmlnIiwiY3JlYXRlQ2hlY2tvdXRDb25maWciLCJjb25maWciLCJlc3RpbWF0ZWRPcmRlckFtb3VudCIsInByb2R1Y3RUeXBlIiwic2lnbm91dCIsInJlbmRlckFtYXpvblBheUJ1dHRvbiIsImJ1dHRvbkNvbG9yIiwiY2hlY2tvdXRTdGF0ZSIsImRlY291cGxlQ2hlY2tvdXRJbml0aWF0aW9uIiwibWV0aG9kSWQiLCJwbGFjZW1lbnQiLCJpc0J1dHRvbk1pY3JvVGV4dERpc2FibGVkIiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJwYXJlbnRDb250YWluZXJJZCIsImFwcGVuZENoaWxkIiwiZ2V0QnV0dG9uUGFyZW50Q29udGFpbmVyIiwiZGVzaWduIiwiQzAwMDEiLCJhbWF6b25QYXlWMkJ1dHRvbk9wdGlvbnMiLCJnZXRBbWF6b25QYXlWMkJ1dHRvbk9wdGlvbnMiLCJ1cGRhdGVCdXlOb3dGbG93RmxhZyIsImlzQnV5Tm93RmxvdyIsIkJvb2xlYW4iLCJpc1BoNEVuYWJsZWQiLCJmZWF0dXJlcyIsInN0b3JlQ291bnRyeUNvZGUiLCJpc1BoNFVzT25seSIsInB1YmxpY0tleUlkIiwic2lnbmVkUGF5bG9hZCIsImlzRW52aXJvbm1lbnRTcGVjaWZpYyIsInVpZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInBhcmVudENvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJHb2xkIiwiZ2V0Q2FydCIsImdldENoZWNrb3V0IiwiZ2V0U3RvcmVDb25maWdPclRocm93IiwiZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3ciLCJnZXRDaGVja291dFN0YXRlIiwibWVyY2hhbnRJZCIsInRlc3RNb2RlIiwiaW5pdGlhbGl6YXRpb25EYXRhIiwiY2hlY2tvdXRMYW5ndWFnZSIsImNoZWNrb3V0U2Vzc2lvbk1ldGhvZCIsImV4dHJhY3RBbWF6b25DaGVja291dFNlc3Npb25JZCIsImxlZGdlckN1cnJlbmN5IiwiYnV0dG9uQmFzZUNvbmZpZyIsInNhbmRib3giLCJQYXlPbmx5IiwiUGF5QW5kU2hpcCIsImNoZWNrb3V0U2V0dGluZ3MiLCJzdG9yZVByb2ZpbGUiLCJzaG9wUGF0aCIsImFtb3VudCIsIm91dHN0YW5kaW5nQmFsYW5jZSIsImN1cnJlbmN5Q29kZSIsImN1cnJlbmN5IiwiY29kZSIsImJ1dHRvbk9wdGlvbnMiLCJ0bXBDb25maWciLCJjcmVhdGVDaGVja291dFNlc3Npb24iLCJtZXRob2QiLCJ1cmwiLCJ0ZXN0IiwiZ2V0T3JUaHJvdyIsImNoZWNrb3V0U2VsZWN0b3JzIiwiY2hlY2tvdXQiLCJwYXltZW50TWV0aG9kcyIsIlBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIiwiQW1hem9uUGF5VjJTY3JpcHRMb2FkZXIiLCJzY3JpcHRMb2FkZXIiLCJ3aW5kb3dXaXRoQW1hem9uUGF5Iiwid2luZG93IiwicmVnaW9uIiwiYW1hem9uUGF5VjJSZWdpb24iLCJsb2FkU2NyaXB0IiwiYW1hem9uIiwiY3JlYXRlQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yIiwiZ2V0U2NyaXB0TG9hZGVyIiwidG9SZXNvbHZhYmxlTW9kdWxlIiwibW9kdWxlIiwicmVzb2x2ZUlkcyIsImFzc2lnbiIsIkludmFsaWRBcmd1bWVudEVycm9yIiwiUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIiwiaW52YWxpZEZpZWxkcyIsImpvaW4iLCJQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IiLCJPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IiLCJBbWF6b25QYXlWMlBheW1lbnRTdHJhdGVneSIsInBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJhbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IiLCJhbWF6b25wYXkiLCJzdGF0ZSIsImdldFN0YXRlIiwicGF5bWVudFRva2VuIiwiX2lzUmVhZHlUb1BheSIsImVkaXRCdXR0b25JZCIsIl9iaW5kRWRpdEJ1dHRvbiIsIl9pc01vZGFsRmxvdyIsIl9jcmVhdGVDb250YWluZXIiLCJfYW1hem9uUGF5QnV0dG9uIiwiX2lzT25lVGltZVRyYW5zYWN0aW9uIiwidG9VcHBlckNhc2UiLCJDaGVja291dCIsImV4ZWN1dGUiLCJwYXlsb2FkIiwicGF5bWVudCIsInBheW1lbnRQYXlsb2FkIiwicGF5bWVudERhdGEiLCJub25jZSIsInN1Ym1pdE9yZGVyIiwic3VibWl0UGF5bWVudCIsImVycm9yIiwiZXJyb3JCb2R5IiwiYm9keSIsInN0YXR1cyIsImFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkIiwiZGF0YSIsInJlZGlyZWN0X3VybCIsImFkZGl0aW9uYWxBY3Rpb24iLCJsb2NhdGlvbiIsIkpTT04iLCJwYXJzZSIsIl9nZXRBbWF6b25QYXlCdXR0b24iLCJjbGljayIsIl8iLCJyZWplY3QiLCJvbkZvY3VzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJub29wIiwiZmluYWxpemUiLCJpc01vZGFsRmxvdyIsImJ1dHRvbiIsImdldEVsZW1lbnRCeUlkIiwicGFyZW50Tm9kZSIsImNsb25lIiwiY2xvbmVOb2RlIiwicmVwbGFjZUNoaWxkIiwiX3Nob3dMb2FkaW5nU3Bpbm5lciIsIndpZGdldEludGVyYWN0aW9uIiwic3R5bGUiLCJkaXNwbGF5IiwiTm90SW1wbGVtZW50ZWRFcnJvciIsIkFtYXpvblBheVYyQ3VzdG9tZXJTdHJhdGVneSIsIl9lIiwibG9hZFBheW1lbnRNZXRob2QiLCJzaWduSW4iLCJzaWduT3V0IiwiZ2V0UGF5bWVudElkIiwicmVtb3RlQ2hlY2tvdXRTaWduT3V0IiwicHJvdmlkZXJJZCIsImV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQiLCJjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrIiwiQnV5Tm93Q2FydENyZWF0aW9uRXJyb3IiLCJBbWF6b25QYXlWMkNvbmZpZ0NyZWF0aW9uRXJyb3IiLCJpc1dpdGhCdXlOb3dGZWF0dXJlcyIsIkNvbnRlbnRUeXBlIiwiQW1hem9uUGF5VjJCdXR0b25TdHJhdGVneSIsImFtYXpvblBheVYyQ29uZmlnUmVxdWVzdFNlbmRlciIsImxvYWREZWZhdWx0Q2hlY2tvdXQiLCJpbml0aWFsaXplQW1hem9uQnV0dG9uT3B0aW9ucyIsImJ1eU5vd0luaXRpYWxpemVPcHRpb25zIiwiZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5IiwiX2J1eU5vd0luaXRpYWxpemVPcHRpb25zIiwiQ2FydCIsIl9nZXRDaGVja291dENyZWF0aW9uUmVxdWVzdENvbmZpZyIsImJpbmQiLCJfY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3ciLCJidXlOb3dDYXJ0UmVxdWVzdEJvZHkiLCJjcmVhdGVCdXlOb3dDYXJ0IiwiX2NyZWF0ZUNoZWNrb3V0Q29uZmlnIiwicHVibGljX2tleSIsInJlc3QiLCJwYXlsb2FkSlNPTiIsImJ1eU5vd0NhcnQiLCJTdHJpbmciLCJiYXNlQW1vdW50IiwiU0RLX1ZFUlNJT05fSEVBREVSUyIsIkFtYXpvblBheVYyUmVxdWVzdFNlbmRlciIsIl9yZXF1ZXN0U2VuZGVyIiwiY2FydElkIiwiaGVhZGVycyIsIkpzb24iLCJwb3N0IiwicmVxdWVzdFNlbmRlciIsImNyZWF0ZVJlcXVlc3RTZW5kZXIiLCJhbWF6b25QYXlWMlJlcXVlc3RTZW5kZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/amazon-pay.js\n\n}");

/***/ }),

/***/ "./packages/amazon-pay-v2-integration/src/AmazonPayV2Button.tsx":
/*!**********************************************************************!*\
  !*** ./packages/amazon-pay-v2-integration/src/AmazonPayV2Button.tsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_amazon_pay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/amazon-pay */ \"../checkout-sdk-js/dist/esm/integrations/amazon-pay.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_checkout_button_integration__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/checkout-button-integration */ \"./packages/checkout-button-integration/src/CheckoutButton.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isHTMLElement/isHTMLElement.ts\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n\n\n\n\n\nconst beautifyAmazonButton = () => {\n    var _a;\n    if (!document.querySelector('.checkout-button-container')) {\n        return;\n    }\n    const container = document.querySelector('#amazonpayCheckoutButton > div');\n    if (container) {\n        const amazonButton = (_a = container.shadowRoot) === null || _a === void 0 ? void 0 : _a.querySelector('.amazonpay-button-view1');\n        if ((0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(amazonButton)) {\n            amazonButton.style.height = '36px';\n            return;\n        }\n    }\n    setTimeout(beautifyAmazonButton, 10);\n};\nconst AmazonPayV2Button = (props) => {\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        beautifyAmazonButton();\n    }, []);\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"AmazonPayContainer\" },\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_checkout_button_integration__WEBPACK_IMPORTED_MODULE_2__[\"default\"], Object.assign({ integrations: [_bigcommerce_checkout_sdk_integrations_amazon_pay__WEBPACK_IMPORTED_MODULE_0__.createAmazonPayV2CustomerStrategy] }, props))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(AmazonPayV2Button, [{ id: 'amazonpay' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hbWF6b24tcGF5LXYyLWludGVncmF0aW9uL3NyYy9BbWF6b25QYXlWMkJ1dHRvbi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFzRztBQUNyQztBQUVrQjtBQUNaO0FBS2hCO0FBRXZELE1BQU0sb0JBQW9CLEdBQUcsR0FBUyxFQUFFOztJQUNwQyxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyw0QkFBNEIsQ0FBQyxFQUFFLENBQUM7UUFDeEQsT0FBTztJQUNYLENBQUM7SUFFRCxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLGdDQUFnQyxDQUFDLENBQUM7SUFFM0UsSUFBSSxTQUFTLEVBQUUsQ0FBQztRQUNaLE1BQU0sWUFBWSxHQUFHLGVBQVMsQ0FBQyxVQUFVLDBDQUFFLGFBQWEsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1FBRXBGLElBQUksa0ZBQWEsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDO1lBQzlCLFlBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztZQUVuQyxPQUFPO1FBQ1gsQ0FBQztJQUNMLENBQUM7SUFFRCxVQUFVLENBQUMsb0JBQW9CLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDekMsQ0FBQyxDQUFDO0FBRUYsTUFBTSxpQkFBaUIsR0FBMkMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtJQUN4RSxnREFBUyxDQUFDLEdBQUcsRUFBRTtRQUNYLG9CQUFvQixFQUFFLENBQUM7SUFDM0IsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBRVAsT0FBTyxDQUNILG9FQUFLLFNBQVMsRUFBQyxvQkFBb0I7UUFDL0IsMkRBQUMseUZBQWMsa0JBQUMsWUFBWSxFQUFFLENBQUMsZ0hBQWlDLENBQUMsSUFBTSxLQUFLLEVBQUksQ0FDOUUsQ0FDVCxDQUFDO0FBQ04sQ0FBQyxDQUFDO0FBRUYsaUVBQWUseUZBQXFCLENBQ2hDLGlCQUFpQixFQUNqQixDQUFDLEVBQUUsRUFBRSxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQ3hCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL3BhY2thZ2VzL2FtYXpvbi1wYXktdjItaW50ZWdyYXRpb24vc3JjL0FtYXpvblBheVYyQnV0dG9uLnRzeD81N2JlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUFtYXpvblBheVYyQ3VzdG9tZXJTdHJhdGVneSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvaW50ZWdyYXRpb25zL2FtYXpvbi1wYXknO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgQ2hlY2tvdXRCdXR0b24gfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvY2hlY2tvdXQtYnV0dG9uLWludGVncmF0aW9uJztcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaW5zdHJ1bWVudC11dGlscyc7XG5pbXBvcnQge1xuICAgIHR5cGUgQ2hlY2tvdXRCdXR0b25Qcm9wcyxcbiAgICB0eXBlIENoZWNrb3V0QnV0dG9uUmVzb2x2ZUlkLFxuICAgIHRvUmVzb2x2YWJsZUNvbXBvbmVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuY29uc3QgYmVhdXRpZnlBbWF6b25CdXR0b24gPSAoKTogdm9pZCA9PiB7XG4gICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hlY2tvdXQtYnV0dG9uLWNvbnRhaW5lcicpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYW1hem9ucGF5Q2hlY2tvdXRCdXR0b24gPiBkaXYnKTtcblxuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgY29uc3QgYW1hem9uQnV0dG9uID0gY29udGFpbmVyLnNoYWRvd1Jvb3Q/LnF1ZXJ5U2VsZWN0b3IoJy5hbWF6b25wYXktYnV0dG9uLXZpZXcxJyk7XG5cbiAgICAgICAgaWYgKGlzSFRNTEVsZW1lbnQoYW1hem9uQnV0dG9uKSkge1xuICAgICAgICAgICAgYW1hem9uQnV0dG9uLnN0eWxlLmhlaWdodCA9ICczNnB4JztcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0VGltZW91dChiZWF1dGlmeUFtYXpvbkJ1dHRvbiwgMTApO1xufTtcblxuY29uc3QgQW1hem9uUGF5VjJCdXR0b246IEZ1bmN0aW9uQ29tcG9uZW50PENoZWNrb3V0QnV0dG9uUHJvcHM+ID0gKHByb3BzKSA9PiB7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgYmVhdXRpZnlBbWF6b25CdXR0b24oKTtcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIkFtYXpvblBheUNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPENoZWNrb3V0QnV0dG9uIGludGVncmF0aW9ucz17W2NyZWF0ZUFtYXpvblBheVYyQ3VzdG9tZXJTdHJhdGVneV19IHsuLi5wcm9wc30gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZUNvbXBvbmVudDxDaGVja291dEJ1dHRvblByb3BzLCBDaGVja291dEJ1dHRvblJlc29sdmVJZD4oXG4gICAgQW1hem9uUGF5VjJCdXR0b24sXG4gICAgW3sgaWQ6ICdhbWF6b25wYXknIH1dLFxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/amazon-pay-v2-integration/src/AmazonPayV2Button.tsx\n\n}");

/***/ }),

/***/ "./packages/amazon-pay-v2-integration/src/AmazonPayV2PaymentMethod.tsx":
/*!*****************************************************************************!*\
  !*** ./packages/amazon-pay-v2-integration/src/AmazonPayV2PaymentMethod.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_amazon_pay__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/amazon-pay */ \"../checkout-sdk-js/dist/esm/integrations/amazon-pay.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-widget-integration */ \"./packages/hosted-widget-integration/src/HostedWidgetPaymentComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n\n\n\n\n\n\n\nconst AmazonPayV2PaymentMethod = (_a) => {\n    var { checkoutService, checkoutState, paymentForm, method, method: { initializationData: { paymentDescriptor, paymentToken }, } } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"checkoutService\", \"checkoutState\", \"paymentForm\", \"method\", \"method\"]);\n    const initializeAmazonPayV2Payment = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((options) => checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_amazon_pay__WEBPACK_IMPORTED_MODULE_1__.createAmazonPayV2PaymentStrategy], amazonpay: {\n            editButtonId: 'editButtonId',\n        } })), [checkoutService]);\n    const reload = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => window.location.reload(), []);\n    const { hidePaymentSubmitButton, disableSubmit, setFieldValue, setSubmit, setValidationSchema, } = paymentForm;\n    const { data: { getCheckout, isPaymentDataRequired }, statuses: { isLoadingInstruments }, } = checkoutState;\n    const checkout = getCheckout();\n    const customer = checkoutState.data.getCustomer();\n    const isGuestCustomer = customer === null || customer === void 0 ? void 0 : customer.isGuest;\n    const isInstrumentFeatureAvailable = !isGuestCustomer && Boolean(method.config.isVaultingEnabled);\n    const instruments = checkoutState.data.getInstruments(method) || [];\n    return (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_4__[\"default\"], Object.assign({}, rest, { buttonId: \"editButtonId\", containerId: \"paymentWidget\", deinitializePayment: checkoutService.deinitializePayment, disableSubmit: disableSubmit, hidePaymentSubmitButton: hidePaymentSubmitButton, hideWidget: true, initializePayment: initializeAmazonPayV2Payment, instruments: instruments, isInstrumentCardCodeRequired: (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(checkoutState), isInstrumentCardNumberRequired: (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(checkoutState), isInstrumentFeatureAvailable: isInstrumentFeatureAvailable, isLoadingInstruments: isLoadingInstruments(), isPaymentDataRequired: isPaymentDataRequired(), isSignInRequired: false, isSignedIn: (0,lodash__WEBPACK_IMPORTED_MODULE_2__.some)(checkout === null || checkout === void 0 ? void 0 : checkout.payments, { providerId: method.id }), loadInstruments: checkoutService.loadInstruments, method: method, onSignOut: reload, paymentDescriptor: paymentDescriptor, setFieldValue: setFieldValue, setSubmit: setSubmit, setValidationSchema: setValidationSchema, shouldShow: !!paymentToken, shouldShowDescriptor: !!paymentToken, shouldShowEditButton: !!paymentToken, signOut: checkoutService.signOutCustomer })));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(AmazonPayV2PaymentMethod, [{ id: 'amazonpay' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hbWF6b24tcGF5LXYyLWludGVncmF0aW9uL3NyYy9BbWF6b25QYXlWMlBheW1lbnRNZXRob2QudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUNxRztBQUN2RTtBQUNxQztBQUU0QjtBQUkvQztBQUtPO0FBRXZELE1BQU0sd0JBQXdCLEdBQTBDLENBQUMsRUFTeEUsRUFBRSxFQUFFO1FBVG9FLEVBQ3JFLGVBQWUsRUFDZixhQUFhLEVBQ2IsV0FBVyxFQUNYLE1BQU0sRUFDTixNQUFNLEVBQUUsRUFDSixrQkFBa0IsRUFBRSxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxHQUMxRCxPQUVKLEVBRE0sSUFBSSxxREFSOEQsdUVBU3hFLENBRFU7SUFFUCxNQUFNLDRCQUE0QixHQUFHLGtEQUFXLENBQzVDLENBQUMsT0FBaUMsRUFBRSxFQUFFLENBQ2xDLGVBQWUsQ0FBQyxpQkFBaUIsaUNBQzFCLE9BQU8sS0FDVixZQUFZLEVBQUUsQ0FBQywrR0FBZ0MsQ0FBQyxFQUNoRCxTQUFTLEVBQUU7WUFDUCxZQUFZLEVBQUUsY0FBYztTQUMvQixJQUNILEVBQ04sQ0FBQyxlQUFlLENBQUMsQ0FDcEIsQ0FBQztJQUVGLE1BQU0sTUFBTSxHQUFHLGtEQUFXLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUUvRCxNQUFNLEVBQ0YsdUJBQXVCLEVBQ3ZCLGFBQWEsRUFDYixhQUFhLEVBQ2IsU0FBUyxFQUNULG1CQUFtQixHQUN0QixHQUFHLFdBQVcsQ0FBQztJQUVoQixNQUFNLEVBQ0YsSUFBSSxFQUFFLEVBQUUsV0FBVyxFQUFFLHFCQUFxQixFQUFFLEVBQzVDLFFBQVEsRUFBRSxFQUFFLG9CQUFvQixFQUFFLEdBQ3JDLEdBQUcsYUFBYSxDQUFDO0lBRWxCLE1BQU0sUUFBUSxHQUFHLFdBQVcsRUFBRSxDQUFDO0lBQy9CLE1BQU0sUUFBUSxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDbEQsTUFBTSxlQUFlLEdBQUcsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLE9BQU8sQ0FBQztJQUMxQyxNQUFNLDRCQUE0QixHQUM5QixDQUFDLGVBQWUsSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBRWpFLE1BQU0sV0FBVyxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUVwRSxPQUFPLENBQ0gsMkRBQUMsdUZBQTRCLG9CQUNyQixJQUFJLElBQ1IsUUFBUSxFQUFDLGNBQWMsRUFDdkIsV0FBVyxFQUFDLGVBQWUsRUFDM0IsbUJBQW1CLEVBQUUsZUFBZSxDQUFDLG1CQUFtQixFQUN4RCxhQUFhLEVBQUUsYUFBYSxFQUM1Qix1QkFBdUIsRUFBRSx1QkFBdUIsRUFDaEQsVUFBVSxRQUNWLGlCQUFpQixFQUFFLDRCQUE0QixFQUMvQyxXQUFXLEVBQUUsV0FBVyxFQUN4Qiw0QkFBNEIsRUFBRSxrRkFBb0MsQ0FBQyxhQUFhLENBQUMsRUFDakYsOEJBQThCLEVBQUUsa0ZBQXNDLENBQUMsYUFBYSxDQUFDLEVBQ3JGLDRCQUE0QixFQUFFLDRCQUE0QixFQUMxRCxvQkFBb0IsRUFBRSxvQkFBb0IsRUFBRSxFQUM1QyxxQkFBcUIsRUFBRSxxQkFBcUIsRUFBRSxFQUM5QyxnQkFBZ0IsRUFBRSxLQUFLLEVBQ3ZCLFVBQVUsRUFBRSw0Q0FBSSxDQUFDLFFBQVEsYUFBUixRQUFRLHVCQUFSLFFBQVEsQ0FBRSxRQUFRLEVBQUUsRUFBRSxVQUFVLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQy9ELGVBQWUsRUFBRSxlQUFlLENBQUMsZUFBZSxFQUNoRCxNQUFNLEVBQUUsTUFBTSxFQUNkLFNBQVMsRUFBRSxNQUFNLEVBQ2pCLGlCQUFpQixFQUFFLGlCQUFpQixFQUNwQyxhQUFhLEVBQUUsYUFBYSxFQUM1QixTQUFTLEVBQUUsU0FBUyxFQUNwQixtQkFBbUIsRUFBRSxtQkFBbUIsRUFDeEMsVUFBVSxFQUFFLENBQUMsQ0FBQyxZQUFZLEVBQzFCLG9CQUFvQixFQUFFLENBQUMsQ0FBQyxZQUFZLEVBQ3BDLG9CQUFvQixFQUFFLENBQUMsQ0FBQyxZQUFZLEVBQ3BDLE9BQU8sRUFBRSxlQUFlLENBQUMsZUFBZSxJQUMxQyxDQUNMLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSx5RkFBcUIsQ0FDaEMsd0JBQXdCLEVBQ3hCLENBQUMsRUFBRSxFQUFFLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FDeEIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYW1hem9uLXBheS12Mi1pbnRlZ3JhdGlvbi9zcmMvQW1hem9uUGF5VjJQYXltZW50TWV0aG9kLnRzeD9kY2M3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgUGF5bWVudEluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgeyBjcmVhdGVBbWF6b25QYXlWMlBheW1lbnRTdHJhdGVneSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvaW50ZWdyYXRpb25zL2FtYXpvbi1wYXknO1xuaW1wb3J0IHsgc29tZSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgdHlwZSBGdW5jdGlvbkNvbXBvbmVudCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEhvc3RlZFdpZGdldFBheW1lbnRDb21wb25lbnQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaG9zdGVkLXdpZGdldC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRTZWxlY3RvcixcbiAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3Rvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2luc3RydW1lbnQtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICB0eXBlIFBheW1lbnRNZXRob2RQcm9wcyxcbiAgICB0eXBlIFBheW1lbnRNZXRob2RSZXNvbHZlSWQsXG4gICAgdG9SZXNvbHZhYmxlQ29tcG9uZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5jb25zdCBBbWF6b25QYXlWMlBheW1lbnRNZXRob2Q6IEZ1bmN0aW9uQ29tcG9uZW50PFBheW1lbnRNZXRob2RQcm9wcz4gPSAoe1xuICAgIGNoZWNrb3V0U2VydmljZSxcbiAgICBjaGVja291dFN0YXRlLFxuICAgIHBheW1lbnRGb3JtLFxuICAgIG1ldGhvZCxcbiAgICBtZXRob2Q6IHtcbiAgICAgICAgaW5pdGlhbGl6YXRpb25EYXRhOiB7IHBheW1lbnREZXNjcmlwdG9yLCBwYXltZW50VG9rZW4gfSxcbiAgICB9LFxuICAgIC4uLnJlc3Rcbn0pID0+IHtcbiAgICBjb25zdCBpbml0aWFsaXplQW1hem9uUGF5VjJQYXltZW50ID0gdXNlQ2FsbGJhY2soXG4gICAgICAgIChvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMpID0+XG4gICAgICAgICAgICBjaGVja291dFNlcnZpY2UuaW5pdGlhbGl6ZVBheW1lbnQoe1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRpb25zOiBbY3JlYXRlQW1hem9uUGF5VjJQYXltZW50U3RyYXRlZ3ldLFxuICAgICAgICAgICAgICAgIGFtYXpvbnBheToge1xuICAgICAgICAgICAgICAgICAgICBlZGl0QnV0dG9uSWQ6ICdlZGl0QnV0dG9uSWQnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgW2NoZWNrb3V0U2VydmljZV0sXG4gICAgKTtcblxuICAgIGNvbnN0IHJlbG9hZCA9IHVzZUNhbGxiYWNrKCgpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKSwgW10pO1xuXG4gICAgY29uc3Qge1xuICAgICAgICBoaWRlUGF5bWVudFN1Ym1pdEJ1dHRvbixcbiAgICAgICAgZGlzYWJsZVN1Ym1pdCxcbiAgICAgICAgc2V0RmllbGRWYWx1ZSxcbiAgICAgICAgc2V0U3VibWl0LFxuICAgICAgICBzZXRWYWxpZGF0aW9uU2NoZW1hLFxuICAgIH0gPSBwYXltZW50Rm9ybTtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YTogeyBnZXRDaGVja291dCwgaXNQYXltZW50RGF0YVJlcXVpcmVkIH0sXG4gICAgICAgIHN0YXR1c2VzOiB7IGlzTG9hZGluZ0luc3RydW1lbnRzIH0sXG4gICAgfSA9IGNoZWNrb3V0U3RhdGU7XG5cbiAgICBjb25zdCBjaGVja291dCA9IGdldENoZWNrb3V0KCk7XG4gICAgY29uc3QgY3VzdG9tZXIgPSBjaGVja291dFN0YXRlLmRhdGEuZ2V0Q3VzdG9tZXIoKTtcbiAgICBjb25zdCBpc0d1ZXN0Q3VzdG9tZXIgPSBjdXN0b21lcj8uaXNHdWVzdDtcbiAgICBjb25zdCBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlID1cbiAgICAgICAgIWlzR3Vlc3RDdXN0b21lciAmJiBCb29sZWFuKG1ldGhvZC5jb25maWcuaXNWYXVsdGluZ0VuYWJsZWQpO1xuXG4gICAgY29uc3QgaW5zdHJ1bWVudHMgPSBjaGVja291dFN0YXRlLmRhdGEuZ2V0SW5zdHJ1bWVudHMobWV0aG9kKSB8fCBbXTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxIb3N0ZWRXaWRnZXRQYXltZW50Q29tcG9uZW50XG4gICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgICAgIGJ1dHRvbklkPVwiZWRpdEJ1dHRvbklkXCJcbiAgICAgICAgICAgIGNvbnRhaW5lcklkPVwicGF5bWVudFdpZGdldFwiXG4gICAgICAgICAgICBkZWluaXRpYWxpemVQYXltZW50PXtjaGVja291dFNlcnZpY2UuZGVpbml0aWFsaXplUGF5bWVudH1cbiAgICAgICAgICAgIGRpc2FibGVTdWJtaXQ9e2Rpc2FibGVTdWJtaXR9XG4gICAgICAgICAgICBoaWRlUGF5bWVudFN1Ym1pdEJ1dHRvbj17aGlkZVBheW1lbnRTdWJtaXRCdXR0b259XG4gICAgICAgICAgICBoaWRlV2lkZ2V0XG4gICAgICAgICAgICBpbml0aWFsaXplUGF5bWVudD17aW5pdGlhbGl6ZUFtYXpvblBheVYyUGF5bWVudH1cbiAgICAgICAgICAgIGluc3RydW1lbnRzPXtpbnN0cnVtZW50c31cbiAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWQ9e2lzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRTZWxlY3RvcihjaGVja291dFN0YXRlKX1cbiAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZD17aXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkU2VsZWN0b3IoY2hlY2tvdXRTdGF0ZSl9XG4gICAgICAgICAgICBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlPXtpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlfVxuICAgICAgICAgICAgaXNMb2FkaW5nSW5zdHJ1bWVudHM9e2lzTG9hZGluZ0luc3RydW1lbnRzKCl9XG4gICAgICAgICAgICBpc1BheW1lbnREYXRhUmVxdWlyZWQ9e2lzUGF5bWVudERhdGFSZXF1aXJlZCgpfVxuICAgICAgICAgICAgaXNTaWduSW5SZXF1aXJlZD17ZmFsc2V9XG4gICAgICAgICAgICBpc1NpZ25lZEluPXtzb21lKGNoZWNrb3V0Py5wYXltZW50cywgeyBwcm92aWRlcklkOiBtZXRob2QuaWQgfSl9XG4gICAgICAgICAgICBsb2FkSW5zdHJ1bWVudHM9e2NoZWNrb3V0U2VydmljZS5sb2FkSW5zdHJ1bWVudHN9XG4gICAgICAgICAgICBtZXRob2Q9e21ldGhvZH1cbiAgICAgICAgICAgIG9uU2lnbk91dD17cmVsb2FkfVxuICAgICAgICAgICAgcGF5bWVudERlc2NyaXB0b3I9e3BheW1lbnREZXNjcmlwdG9yfVxuICAgICAgICAgICAgc2V0RmllbGRWYWx1ZT17c2V0RmllbGRWYWx1ZX1cbiAgICAgICAgICAgIHNldFN1Ym1pdD17c2V0U3VibWl0fVxuICAgICAgICAgICAgc2V0VmFsaWRhdGlvblNjaGVtYT17c2V0VmFsaWRhdGlvblNjaGVtYX1cbiAgICAgICAgICAgIHNob3VsZFNob3c9eyEhcGF5bWVudFRva2VufVxuICAgICAgICAgICAgc2hvdWxkU2hvd0Rlc2NyaXB0b3I9eyEhcGF5bWVudFRva2VufVxuICAgICAgICAgICAgc2hvdWxkU2hvd0VkaXRCdXR0b249eyEhcGF5bWVudFRva2VufVxuICAgICAgICAgICAgc2lnbk91dD17Y2hlY2tvdXRTZXJ2aWNlLnNpZ25PdXRDdXN0b21lcn1cbiAgICAgICAgLz5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlQ29tcG9uZW50PFBheW1lbnRNZXRob2RQcm9wcywgUGF5bWVudE1ldGhvZFJlc29sdmVJZD4oXG4gICAgQW1hem9uUGF5VjJQYXltZW50TWV0aG9kLFxuICAgIFt7IGlkOiAnYW1hem9ucGF5JyB9XSxcbik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/amazon-pay-v2-integration/src/AmazonPayV2PaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/amazon-pay-v2-integration/src/index.ts":
/*!*********************************************************!*\
  !*** ./packages/amazon-pay-v2-integration/src/index.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AmazonPayV2Button: () => (/* reexport safe */ _AmazonPayV2Button__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   AmazonPayV2PaymentMethod: () => (/* reexport safe */ _AmazonPayV2PaymentMethod__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _AmazonPayV2PaymentMethod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AmazonPayV2PaymentMethod */ \"./packages/amazon-pay-v2-integration/src/AmazonPayV2PaymentMethod.tsx\");\n/* harmony import */ var _AmazonPayV2Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AmazonPayV2Button */ \"./packages/amazon-pay-v2-integration/src/AmazonPayV2Button.tsx\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hbWF6b24tcGF5LXYyLWludGVncmF0aW9uL3NyYy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlGO0FBQ2QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL3BhY2thZ2VzL2FtYXpvbi1wYXktdjItaW50ZWdyYXRpb24vc3JjL2luZGV4LnRzP2FkZTUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgZGVmYXVsdCBhcyBBbWF6b25QYXlWMlBheW1lbnRNZXRob2QgfSBmcm9tICcuL0FtYXpvblBheVYyUGF5bWVudE1ldGhvZCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEFtYXpvblBheVYyQnV0dG9uIH0gZnJvbSAnLi9BbWF6b25QYXlWMkJ1dHRvbic7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/amazon-pay-v2-integration/src/index.ts\n\n}");

/***/ }),

/***/ "./packages/checkout-button-integration/src/CheckoutButton.tsx":
/*!*********************************************************************!*\
  !*** ./packages/checkout-button-integration/src/CheckoutButton.tsx ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n\n\n\nconst CheckoutButton = ({ checkoutService: { deinitializeCustomer, initializeCustomer }, checkoutButtonContainerClass, containerId, methodId, onUnhandledError, onWalletButtonClick, additionalInitializationOptions, integrations, }) => {\n    const initializeCustomerStrategyOrThrow = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        try {\n            yield initializeCustomer({\n                methodId,\n                integrations,\n                [methodId]: Object.assign({ container: containerId, onUnhandledError, onClick: () => onWalletButtonClick(methodId) }, additionalInitializationOptions),\n            });\n        }\n        catch (error) {\n            if (typeof onUnhandledError === 'function' && error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    });\n    const deinitializeCustomerStrategyOrThrow = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        try {\n            yield deinitializeCustomer({ methodId });\n        }\n        catch (error) {\n            if (typeof onUnhandledError === 'function' && error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        void initializeCustomerStrategyOrThrow();\n        return () => {\n            void deinitializeCustomerStrategyOrThrow();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: checkoutButtonContainerClass, \"data-test\": containerId, id: containerId }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(CheckoutButton, []));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9jaGVja291dC1idXR0b24taW50ZWdyYXRpb24vc3JjL0NoZWNrb3V0QnV0dG9uLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBaUU7QUFNVjtBQUV2RCxNQUFNLGNBQWMsR0FBMkMsQ0FBQyxFQUM1RCxlQUFlLEVBQUUsRUFBRSxvQkFBb0IsRUFBRSxrQkFBa0IsRUFBRSxFQUM3RCw0QkFBNEIsRUFDNUIsV0FBVyxFQUNYLFFBQVEsRUFDUixnQkFBZ0IsRUFDaEIsbUJBQW1CLEVBQ25CLCtCQUErQixFQUMvQixZQUFZLEdBQ2YsRUFBRSxFQUFFO0lBQ0QsTUFBTSxpQ0FBaUMsR0FBRyxHQUFTLEVBQUUsQ0FBQztRQUNsRCxJQUFJLENBQUM7WUFDRCxNQUFNLGtCQUFrQixDQUFDO2dCQUNyQixRQUFRO2dCQUNSLFlBQVk7Z0JBQ1osQ0FBQyxRQUFRLENBQUMsa0JBQ04sU0FBUyxFQUFFLFdBQVcsRUFDdEIsZ0JBQWdCLEVBQ2hCLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsSUFDekMsK0JBQStCLENBQ3JDO2FBQ0osQ0FBQyxDQUFDO1FBQ1AsQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDYixJQUFJLE9BQU8sZ0JBQWdCLEtBQUssVUFBVSxJQUFJLEtBQUssWUFBWSxLQUFLLEVBQUUsQ0FBQztnQkFDbkUsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDNUIsQ0FBQztRQUNMLENBQUM7SUFDTCxDQUFDLEVBQUM7SUFFRixNQUFNLG1DQUFtQyxHQUFHLEdBQVMsRUFBRSxDQUFDO1FBQ3BELElBQUksQ0FBQztZQUNELE1BQU0sb0JBQW9CLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQzdDLENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2IsSUFBSSxPQUFPLGdCQUFnQixLQUFLLFVBQVUsSUFBSSxLQUFLLFlBQVksS0FBSyxFQUFFLENBQUM7Z0JBQ25FLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzVCLENBQUM7UUFDTCxDQUFDO0lBQ0wsQ0FBQyxFQUFDO0lBRUYsZ0RBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDWCxLQUFLLGlDQUFpQyxFQUFFLENBQUM7UUFFekMsT0FBTyxHQUFHLEVBQUU7WUFDUixLQUFLLG1DQUFtQyxFQUFFLENBQUM7UUFDL0MsQ0FBQyxDQUFDO1FBQ0YsdURBQXVEO0lBQzNELENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUVQLE9BQU8sQ0FDSCxvRUFBSyxTQUFTLEVBQUUsNEJBQTRCLGVBQWEsV0FBVyxFQUFFLEVBQUUsRUFBRSxXQUFXLEdBQUksQ0FDNUYsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLHlGQUFxQixDQUNoQyxjQUFjLEVBQ2QsRUFBRSxDQUNMLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL3BhY2thZ2VzL2NoZWNrb3V0LWJ1dHRvbi1pbnRlZ3JhdGlvbi9zcmMvQ2hlY2tvdXRCdXR0b24udHN4P2FjMzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHtcbiAgICB0eXBlIENoZWNrb3V0QnV0dG9uUHJvcHMsXG4gICAgdHlwZSBDaGVja291dEJ1dHRvblJlc29sdmVJZCxcbiAgICB0b1Jlc29sdmFibGVDb21wb25lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmNvbnN0IENoZWNrb3V0QnV0dG9uOiBGdW5jdGlvbkNvbXBvbmVudDxDaGVja291dEJ1dHRvblByb3BzPiA9ICh7XG4gICAgY2hlY2tvdXRTZXJ2aWNlOiB7IGRlaW5pdGlhbGl6ZUN1c3RvbWVyLCBpbml0aWFsaXplQ3VzdG9tZXIgfSxcbiAgICBjaGVja291dEJ1dHRvbkNvbnRhaW5lckNsYXNzLFxuICAgIGNvbnRhaW5lcklkLFxuICAgIG1ldGhvZElkLFxuICAgIG9uVW5oYW5kbGVkRXJyb3IsXG4gICAgb25XYWxsZXRCdXR0b25DbGljayxcbiAgICBhZGRpdGlvbmFsSW5pdGlhbGl6YXRpb25PcHRpb25zLFxuICAgIGludGVncmF0aW9ucyxcbn0pID0+IHtcbiAgICBjb25zdCBpbml0aWFsaXplQ3VzdG9tZXJTdHJhdGVneU9yVGhyb3cgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBpbml0aWFsaXplQ3VzdG9tZXIoe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGludGVncmF0aW9ucyxcbiAgICAgICAgICAgICAgICBbbWV0aG9kSWRdOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVySWQsXG4gICAgICAgICAgICAgICAgICAgIG9uVW5oYW5kbGVkRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IG9uV2FsbGV0QnV0dG9uQ2xpY2sobWV0aG9kSWQpLFxuICAgICAgICAgICAgICAgICAgICAuLi5hZGRpdGlvbmFsSW5pdGlhbGl6YXRpb25PcHRpb25zLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25VbmhhbmRsZWRFcnJvciA9PT0gJ2Z1bmN0aW9uJyAmJiBlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgb25VbmhhbmRsZWRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgZGVpbml0aWFsaXplQ3VzdG9tZXJTdHJhdGVneU9yVGhyb3cgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBkZWluaXRpYWxpemVDdXN0b21lcih7IG1ldGhvZElkIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvblVuaGFuZGxlZEVycm9yID09PSAnZnVuY3Rpb24nICYmIGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBvblVuaGFuZGxlZEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICB2b2lkIGluaXRpYWxpemVDdXN0b21lclN0cmF0ZWd5T3JUaHJvdygpO1xuXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB2b2lkIGRlaW5pdGlhbGl6ZUN1c3RvbWVyU3RyYXRlZ3lPclRocm93KCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2hlY2tvdXRCdXR0b25Db250YWluZXJDbGFzc30gZGF0YS10ZXN0PXtjb250YWluZXJJZH0gaWQ9e2NvbnRhaW5lcklkfSAvPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVDb21wb25lbnQ8Q2hlY2tvdXRCdXR0b25Qcm9wcywgQ2hlY2tvdXRCdXR0b25SZXNvbHZlSWQ+KFxuICAgIENoZWNrb3V0QnV0dG9uLFxuICAgIFtdLFxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/checkout-button-integration/src/CheckoutButton.tsx\n\n}");

/***/ }),

/***/ "./packages/instrument-utils/src/guards/isHTMLElement/isHTMLElement.ts":
/*!*****************************************************************************!*\
  !*** ./packages/instrument-utils/src/guards/isHTMLElement/isHTMLElement.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ isHTMLElement)\n/* harmony export */ });\nfunction isHTMLElement(element) {\n    return element instanceof HTMLElement;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9pbnN0cnVtZW50LXV0aWxzL3NyYy9ndWFyZHMvaXNIVE1MRWxlbWVudC9pc0hUTUxFbGVtZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBZSxTQUFTLGFBQWEsQ0FBQyxPQUFnQjtJQUNsRCxPQUFPLE9BQU8sWUFBWSxXQUFXLENBQUM7QUFDMUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvaW5zdHJ1bWVudC11dGlscy9zcmMvZ3VhcmRzL2lzSFRNTEVsZW1lbnQvaXNIVE1MRWxlbWVudC50cz81ZWE3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzSFRNTEVsZW1lbnQoZWxlbWVudDogdW5rbm93bik6IGVsZW1lbnQgaXMgSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiBlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/instrument-utils/src/guards/isHTMLElement/isHTMLElement.ts\n\n}");

/***/ })

}]);
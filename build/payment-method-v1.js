"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["payment-method-v1"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/no-payment.js":
/*!**************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/no-payment.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createNoPaymentStrategy: () => (/* binding */ o)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\nclass t extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class r extends t{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class n{constructor(e){this._paymentIntegrationService=e}execute(t,r){return n=this,o=void 0,a=function*(){yield this._paymentIntegrationService.submitOrder((0,lodash__WEBPACK_IMPORTED_MODULE_0__.omit)(t,\"payment\"),r)},new((i=void 0)||(i=Promise))(function(e,t){function r(e){try{c(a.next(e))}catch(e){t(e)}}function s(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(r,s)}c((a=a.apply(n,o||[])).next())});// removed by dead control flow\n var n, o, i, a; }finalize(){return Promise.reject(new r)}initialize(){return Promise.resolve()}deinitialize(){return Promise.resolve()}}const o=(i=e=>new n(e),a=[{id:\"nopaymentdatarequired\"}],Object.assign(i,{resolveIds:a}));var i,a;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9uby1wYXltZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQU9lLE1BQWVBLFVBQXNCQyxNQUloRCxXQUFBQyxDQUFZQyxHQ1hELElBQXFDQyxFRFk1Q0MsTUFBTUYsR0FBVyxxQ0FKckIsS0FBQUcsS0FBTyxnQkFDUCxLQUFBQyxLQUFPLFdDVHlDSCxhRGNaQSxVQ2JoQ0ksT0FBT0MsZUFDUEQsT0FBT0MsZURZUUMsS0NaZU4sR0RZZk0sS0NWUkMsVUFBWVAsRURZb0IsbUJBQTVCSCxNQUFNVyxrQkFDYlgsTUFBTVcsa0JBQWtCRixpQkFFeEJBLEtBQUtHLE1BQVEsSUFBSVosTUFBTVMsS0FBS1AsU0FBU1UsS0FFN0MsRUVmVyxNQUFNQyxVQUEwQ2QsRUFDM0QsV0FBQUUsR0FDSUcsTUFBTSxrRUFFTkssS0FBS0osS0FBTyxvQ0FDWkksS0FBS0gsS0FBTyxpQ0FDaEIsRUNGVyxNQUFNUSxFQUNqQixXQUFBYixDQUFvQmMsR0FBQSxLQUFBQSwyQkFBQUEsQ0FBd0QsQ0FFdEUsT0FBQUMsQ0FBUUMsRUFBMkJDLEcsMkNBQy9CVCxLQUFLTSwyQkFBMkJJLFlBQVlDLDRDQUFBQSxDQUFLSCxFQUFTLFdBQVlDLEVBQ2hGLEU7a0JBRUEsUUFBQUcsR0FDSSxPQUFPQyxRQUFRQyxPQUFPLElBQUlWLEVBQzlCLENBRUEsVUFBQVcsR0FDSSxPQUFPRixRQUFRRyxTQUNuQixDQUVBLFlBQUFDLEdBQ0ksT0FBT0osUUFBUUcsU0FDbkIsRUNwQkosTUFJQSxHQ1JJRSxFREtBQyxHQUNDLElBQUlkLEVBQXFDYyxHQ0wxQ0MsRURPdUQsQ0FBQyxDQUFFQyxHQUFJLDBCQ0x2RHZCLE9BQU93QixPQUFPSixFQUFRLENBQUVFLGdCQUpwQixJQUNYRixFQUNBRSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvb3JkZXItZmluYWxpemF0aW9uLW5vdC1yZXF1aXJlZC1lcnJvci50cz9iNWExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9uby1wYXltZW50LWludGVncmF0aW9uL3NyYy9uby1wYXltZW50LWRhdGEtcmVxdWlyZWQtc3RyYXRlZ3kudHM/MTYxNyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvbm8tcGF5bWVudC1pbnRlZ3JhdGlvbi9zcmMvY3JlYXRlLW5vLXBheW1lbnQtc3RyYXRlZ3kudHM/NTcyYSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3RvLXJlc29sdmFibGUtbW9kdWxlLnRzP2Q1MjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEN1c3RvbUVycm9yIGZyb20gJy4vY3VzdG9tLWVycm9yJztcbmltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tICcuL3NldC1wcm90b3R5cGUtb2YnO1xuXG4vKipcbiAqIFRoaXMgZXJyb3IgdHlwZSBzaG91bGQgbm90IGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LiBJdCBpcyBhIGJhc2UgY2xhc3MgZm9yXG4gKiBhbGwgY3VzdG9tIGVycm9ycyB0aHJvd24gaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBDdXN0b21FcnJvciB7XG4gICAgbmFtZSA9ICdTdGFuZGFyZEVycm9yJztcbiAgICB0eXBlID0gJ3N0YW5kYXJkJztcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIG5ldy50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpLnN0YWNrO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0UHJvdG90eXBlT2Yob2JqZWN0OiBhbnksIHByb3RvdHlwZTogb2JqZWN0KSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqZWN0LCBwcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHRyeWluZyB0byBtYWtlIGFuIG9yZGVyIGZpbmFsaXphdGlvbiByZXF1ZXN0IGZvciBhXG4gKiBwYXltZW50IG1ldGhvZCB0aGF0IGRvZXMgbm90IHJlcXVpcmUgc3VjaCBwcm9jZWR1cmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IG9taXQgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vUGF5bWVudERhdGFSZXF1aXJlZFBheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSkge31cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9taXQocGF5bG9hZCwgJ3BheW1lbnQnKSwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IE5vUGF5bWVudERhdGFSZXF1aXJlZFBheW1lbnRTdHJhdGVneSBmcm9tICcuL25vLXBheW1lbnQtZGF0YS1yZXF1aXJlZC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZU5vUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PE5vUGF5bWVudERhdGFSZXF1aXJlZFBheW1lbnRTdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT4gbmV3IE5vUGF5bWVudERhdGFSZXF1aXJlZFBheW1lbnRTdHJhdGVneShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZU5vUGF5bWVudFN0cmF0ZWd5LCBbeyBpZDogJ25vcGF5bWVudGRhdGFyZXF1aXJlZCcgfV0pO1xuIiwiaW1wb3J0IFJlc29sdmFibGVNb2R1bGUgZnJvbSAnLi9yZXNvbHZhYmxlLW1vZHVsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4oXG4gICAgbW9kdWxlOiBUTW9kdWxlLFxuICAgIHJlc29sdmVJZHM6IFRJZGVudGlmaWVyW10sXG4pOiBSZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPiB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obW9kdWxlLCB7IHJlc29sdmVJZHMgfSk7XG59XG4iXSwibmFtZXMiOlsiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwicHJvdG90eXBlIiwic3VwZXIiLCJuYW1lIiwidHlwZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwidGhpcyIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IiLCJOb1BheW1lbnREYXRhUmVxdWlyZWRQYXltZW50U3RyYXRlZ3kiLCJfcGF5bWVudEludGVncmF0aW9uU2VydmljZSIsImV4ZWN1dGUiLCJwYXlsb2FkIiwib3B0aW9ucyIsInN1Ym1pdE9yZGVyIiwib21pdCIsImZpbmFsaXplIiwiUHJvbWlzZSIsInJlamVjdCIsImluaXRpYWxpemUiLCJyZXNvbHZlIiwiZGVpbml0aWFsaXplIiwibW9kdWxlIiwicGF5bWVudEludGVncmF0aW9uU2VydmljZSIsInJlc29sdmVJZHMiLCJpZCIsImFzc2lnbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/no-payment.js\n\n}");

/***/ }),

/***/ "../checkout-sdk-js/dist/esm/integrations/paypal-pro.js":
/*!**************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/paypal-pro.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPayPalProPaymentStrategy: () => (/* binding */ F)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nvar o,d,c=function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}d((i=i.apply(e,t||[])).next())})};class u{constructor(e,t){this._paymentIntegrationService=e,this._cardinalClient=t}prepare(e){return c(this,void 0,void 0,function*(){yield this._cardinalClient.load(e.id,e.config.testMode),yield this._cardinalClient.configure(yield this._getClientToken(e))})}start(e,t,n,r){return c(this,void 0,void 0,function*(){const{getCardInstrument:s,getPaymentMethodOrThrow:o}=this._paymentIntegrationService.getState(),{payment:{methodId:d=\"\",paymentData:c={}}={}}=t,u=function(e){return Boolean(e.instrumentId)}(c)&&s(c.instrumentId),l=u?u.iin:r&&r.getBin();l&&(yield this._cardinalClient.runBinProcess(l));try{return yield e((0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)(t,{payment:{paymentData:{threeDSecure:{token:o(d).clientToken}}}}),n)}catch(e){if(!(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"}))throw e;const n=yield this._cardinalClient.getThreeDSecureData(e.body.three_ds_result,this._getOrderData());if(!r)return void(yield this._paymentIntegrationService.submitPayment((0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)(t.payment,{paymentData:{threeDSecure:n}})));yield r.submit((0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)(t.payment,{paymentData:{threeDSecure:n}}))}})}_getClientToken(e){return c(this,void 0,void 0,function*(){return e.clientToken?e.clientToken:(yield this._paymentIntegrationService.loadPaymentMethod(e.id),this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.id).clientToken||\"\")})}_getOrderData(){const e=this._paymentIntegrationService.getState(),t=e.getBillingAddressOrThrow(),n=e.getShippingAddress(),i=e.getCheckoutOrThrow(),r=e.getOrderOrThrow();return{billingAddress:t,shippingAddress:n,currencyCode:i.cart.currency.code,id:r.orderId.toString(),amount:i.cart.cartAmount}}}class l extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(o||(o={}));class h extends l{constructor(e){super(function(e){switch(e){case o.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case o.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case o.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case o.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case o.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case o.MissingCheckoutConfig:case o.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case o.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case o.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case o.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case o.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case o.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case o.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class m extends l{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(d||(d={}));class p extends l{constructor(e){super(function(e){switch(e){case d.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case d.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case d.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case d.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}const g=[100004,1010,1011,1020];var y,b,f,v,_,C,I;!function(e){e.SetupCompleted=\"payments.setupComplete\",e.Validated=\"payments.validated\"}(y||(y={})),function(e){e.Init=\"init\",e.Complete=\"complete\",e.Confirm=\"confirm\"}(b||(b={})),function(e){e.Success=\"SUCCESS\",e.NoAction=\"NOACTION\",e.Failure=\"FAILURE\",e.Error=\"ERROR\"}(f||(f={})),function(e){e.CCA=\"CCA\",e.Paypal=\"Paypal\",e.Wallet=\"Wallet\",e.VisaCheckout=\"VisaCheckout\",e.ApplePay=\"ApplePay\",e.DiscoverWallet=\"DiscoverWallet\"}(v||(v={})),function(e){e.BinProcess=\"bin.process\"}(_||(_={})),function(e){e.CCA=\"cca\"}(C||(C={})),function(e){e.Yes=\"Y\",e.No=\"N\"}(I||(I={}));class P{constructor(e){this._scriptLoader=e,this._provider=\"\",this._testMode=!1,this._configurationToken=\"\"}load(e,t=!1){return this._provider=e,this._testMode=t,this._sdk||(this._sdk=this._scriptLoader.load(e,t)),this._sdk.then(lodash__WEBPACK_IMPORTED_MODULE_1__.noop)}configure(e){if(this._configurationToken){if(this._configurationToken===e)return Promise.resolve();this._sdk=this._scriptLoader.load(`${this._provider}.${Date.now()}`,this._testMode)}return this._getClientSDK().then(n=>new Promise((i,r)=>{n.on(y.SetupCompleted,()=>{n.off(y.SetupCompleted),n.off(y.Validated),this._configurationToken=e,i()}),n.on(y.Validated,e=>{n.off(y.SetupCompleted),n.off(y.Validated),e.ActionCode===f.Error&&((0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)(g,e.ErrorNumber)&&r(new h(o.MissingPaymentMethod)),r(new m(e.ErrorDescription)))}),n.setup(b.Init,{jwt:e})}))}runBinProcess(e){return this._getClientSDK().then(t=>t.trigger(_.BinProcess,e).catch(lodash__WEBPACK_IMPORTED_MODULE_1__.noop)).then(e=>{if(!e||!e.Status)throw new p(d.PaymentNotInitialized)})}getThreeDSecureData(e,t){return this._getClientSDK().then(n=>new Promise((i,r)=>{n.on(y.Validated,(e,t)=>{if(n.off(y.Validated),!t)return r(new m(e.ErrorDescription?e.ErrorDescription:\"An error was encountered while processing the transaction.\"));if(!e.ActionCode)return i({token:t});switch(e.ActionCode){case f.Success:return i({token:t});case f.NoAction:return e.ErrorNumber>0?r(new m(e.ErrorDescription)):e.Payment&&e.Payment.ExtendedData&&e.Payment.ExtendedData.SignatureVerification===I.Yes?i({token:t}):r(new m(\"Transaction signature could not be validated.\"));case f.Failure:return r(new m(\"User failed authentication or an error was encountered while processing the transaction.\"));case f.Error:return r(new m(e.ErrorDescription))}});const a={AcsUrl:e.acs_url,Payload:e.merchant_data},s=this._mapToPartialOrder(t,e.payer_auth_request);n.continue(C.CCA,a,s)}))}_mapToPartialOrder(e,t){const n={BillingAddress:this._mapToCardinalAddress(e.billingAddress)};return e.paymentData&&(n.Account=this._mapToCardinalAccount(e.paymentData)),e.billingAddress.email&&(n.Email1=e.billingAddress.email),e.shippingAddress&&(n.ShippingAddress=this._mapToCardinalAddress(e.shippingAddress)),{Consumer:n,OrderDetails:{OrderNumber:e.id,Amount:e.amount,CurrencyCode:e.currencyCode,OrderChannel:\"S\",TransactionId:t}}}_mapToCardinalAccount(e){return{AccountNumber:Number(e.ccNumber),ExpirationMonth:Number(e.ccExpiry.month),ExpirationYear:Number(e.ccExpiry.year),NameOnAccount:e.ccName,CardCode:Number(e.ccCvv)}}_mapToCardinalAddress(e){const t={FirstName:e.firstName,LastName:e.lastName,Address1:e.address1,City:e.city,State:e.stateOrProvince,PostalCode:e.postalCode,CountryCode:e.countryCode};return e.address2&&(t.Address2=e.address2),e.phone&&(t.Phone1=e.phone),t}_getClientSDK(){if(!this._sdk)throw new p(d.PaymentNotInitialized);return this._sdk}}class w extends l{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class S{constructor(e,t=window){this._scriptLoader=e,this._window=t}load(e,t){const n=t?\"https://songbirdstag.cardinalcommerce.com/edge/v1/songbird.js\":\"https://songbird.cardinalcommerce.com/edge/v1/songbird.js\";return this._scriptLoader.loadScript(`${n}?v=${e}`).then(()=>{if(!this._window.Cardinal)throw new w;return this._window.Cardinal})}}class M extends l{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class O extends l{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class A extends M{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}var E,N=function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}d((i=i.apply(e,t||[])).next())})},k=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class D{constructor(e){this._paymentIntegrationService=e}execute(e,t){var n,i;return this._isHostedPaymentFormEnabled(null===(n=e.payment)||void 0===n?void 0:n.methodId,null===(i=e.payment)||void 0===i?void 0:i.gatewayId)&&this._shouldRenderHostedForm?this._executeWithHostedForm(e,t):this._executeWithoutHostedForm(e,t)}initialize(e){if(!this._isHostedPaymentFormEnabled(null==e?void 0:e.methodId,null==e?void 0:e.gatewayId)||!this._isHostedFieldAvailable(e))return this._shouldRenderHostedForm=!1,Promise.resolve();const t=e&&e.creditCard&&e.creditCard.form,n=this._paymentIntegrationService.getState(),{paymentSettings:{bigpayBaseUrl:i=\"\"}={}}=n.getStoreConfigOrThrow();if(!t)throw new M;const r=this._paymentIntegrationService.createHostedForm(i,t);return r.attach().then(()=>(this._shouldRenderHostedForm=!0,this._hostedForm=r,Promise.resolve()))}deinitialize(){return this._hostedForm&&this._hostedForm.detach(),Promise.resolve()}finalize(){return Promise.reject(new O)}_executeWithoutHostedForm(e,t){return N(this,void 0,void 0,function*(){const{payment:n}=e,i=k(e,[\"payment\"]),r=n&&n.paymentData;if(!n||!r)throw new A([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:r}))})}_executeWithHostedForm(e,t){return N(this,void 0,void 0,function*(){const{payment:n}=e,i=k(e,[\"payment\"]),r=this._hostedForm;if(!r)throw new p(d.PaymentNotInitialized);if(!n||!n.methodId)throw new A([\"payment.methodId\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield r.validate().then(()=>r.submit(n))})}_isHostedPaymentFormEnabled(e,t){return!!e&&!0===this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t).config.isHostedFormEnabled}_isHostedFieldAvailable(e){return!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.values)(e&&e.creditCard&&e.creditCard.form.fields).every(lodash__WEBPACK_IMPORTED_MODULE_1__.isNil)}}!function(e){e.ACKNOWLEDGE=\"ACKNOWLEDGE\",e.FINALIZE=\"FINALIZE\",e.INITIALIZE=\"INITIALIZE\"}(E||(E={}));const T=E;var x=function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}d((i=i.apply(e,t||[])).next())})};class z extends D{constructor(e,t){super(e),this.paymentIntegrationService=e,this.threeDSecureFlow=t}initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return x(this,void 0,void 0,function*(){yield t.initialize.call(this,e);const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId);n.config.is3dsEnabled&&(yield this.threeDSecureFlow.prepare(n))})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return x(this,void 0,void 0,function*(){const{payment:{methodId:i=\"\"}={}}=e,r=this.paymentIntegrationService.getState();return r.getPaymentStatus()===T.ACKNOWLEDGE?(yield this.paymentIntegrationService.submitOrder(Object.assign(Object.assign({},e),{payment:{methodId:i}}),t),Promise.resolve()):r.getPaymentMethodOrThrow(i).config.is3dsEnabled?this.threeDSecureFlow.start(n.execute.bind(this),e,t,this._hostedForm):n.execute.call(this,e,t)})}}const F=(U=t=>new z(t,new u(t,new P(new S((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())))),j=[{id:\"paypal\"}],Object.assign(U,{resolveIds:j}));var U,j;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9wYXlwYWwtcHJvLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7SUFFWUEsRUNBQUMsRSxrU0NhRyxNQUFNQyxFQUNqQixXQUFBQyxDQUNZQyxFQUNBQyxHQURBLEtBQUFELDJCQUFBQSxFQUNBLEtBQUFDLGdCQUFBQSxDQUNULENBRUcsT0FBQUMsQ0FBUUMsRyw4Q0FDSkMsS0FBS0gsZ0JBQWdCSSxLQUFLRixFQUFPRyxHQUFJSCxFQUFPSSxPQUFPQyxnQkFDbkRKLEtBQUtILGdCQUFnQlEsZ0JBQWdCTCxLQUFLTSxnQkFBZ0JQLEdBQ3BFLEUsQ0FFTSxLQUFBUSxDQUNGQyxFQUNBQyxFQUNBQyxFQUNBQyxHLHdDQUVBLE1BQU0sa0JBQUVDLEVBQWlCLHdCQUFFQyxHQUN2QmIsS0FBS0osMkJBQTJCa0IsWUFFNUJDLFNBQVMsU0FBRUMsRUFBVyxHQUFFLFlBQUVDLEVBQWMsQ0FBQyxHQUFNLENBQUMsR0FBTVIsRUFDeERTLEVDNUJDLFNBQ1hBLEdBRUEsT0FBT0MsUUFBU0QsRUFBaUNFLGFBQ3JELENEeUJZQyxDQUFvQkosSUFBZ0JMLEVBQWtCSyxFQUFZRyxjQUNoRUUsRUFBTUosRUFBYUEsRUFBV0ssSUFBTVosR0FBY0EsRUFBV2EsU0FFL0RGLFVBQ010QixLQUFLSCxnQkFBZ0I0QixjQUFjSCxJQUc3QyxJQUNJLGFBQWFkLEVBQ1RrQiw2Q0FBQUEsQ0FBTWpCLEVBQVMsQ0FDWE0sUUFBUyxDQUNMRSxZQUFhLENBQ1RVLGFBQWMsQ0FBRUMsTUFBT2YsRUFBd0JHLEdBQVVhLGlCQUlyRW5CLEUsQ0FFTixNQUFPb0IsR0FDTCxJRXJEVyxDQUFDQSxHQUNJLGlCQUFWQSxHQUFnQyxPQUFWQSxHQUFrQixTQUFVQSxFRnFEbkQsQ0FBZUEsS0FDZkMsNENBQUFBLENBQUtELEVBQU1FLEtBQUtDLE9BQVEsQ0FBRUMsS0FBTSw0QkFFakMsTUFBTUosRUFHVixNQUFNSCxRQUFxQjNCLEtBQUtILGdCQUFn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Q3JDLE1BQVFLLFNBQVMsU0FBRUMsRUFBVyxJQUFPLENBQUMsR0FBTVAsRUFFdENnQyxFQUFRekMsS0FBS2tQLDBCQUEwQnBPLFdBRTdDLE9BQUkyQixFQUFNNk0scUJBQXVCLEVBQW1CQyxtQkFDMUN2UCxLQUFLa1AsMEJBQTBCUixZQUFZLE9BQUQsd0JBRXJDak8sR0FBTyxDQUNWTSxRQUFTLENBQUVDLGNBRWZOLEdBR0drRyxRQUFRQyxXQUdmcEUsRUFBTTVCLHdCQUF3QkcsR0FBVWIsT0FBT2tQLGFBQ3hDclAsS0FBS21QLGlCQUFpQjVPLE1BQ3pCLEVBQU1DLFFBQVFnUCxLQUFLeFAsTUFDbkJTLEVBQ0FDLEVBQ0FWLEtBQUtzTyxhQUlOLEVBQU05TixRQUFPLFVBQUNDLEVBQVNDLEVBQ2xDLEUsRUMxQ0osTUFXQSxHQ3RCSStPLEVEWUFQLEdBRUEsSUFBSUQsRUFDQUMsRUFDQSxJQUFJeFAsRUFDQXdQLEVBQ0EsSUFBSS9JLEVBQWUsSUFBSXNHLEVBQXFCaUQsMkVBQUFBLE9DakJwREMsRURxQjhELENBQUMsQ0FBRXpQLEdBQUksV0NuQjlEOEQsT0FBTzRMLE9BQU9ILEVBQVEsQ0FBRUUsZ0JBSnBCLElBQ1hGLEVBQ0FFLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9taXNzaW5nLWRhdGEtZXJyb3IudHM/YjdkYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW5pdGlhbGl6ZWQtZXJyb3IudHM/OGI0ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvY2FyZGluYWwtaW50ZWdyYXRpb24vc3JjL2NhcmRpbmFsLXRocmVlLWQtc2VjdXJlLWZsb3cudHM/YmMzOSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaXMtdmF1bHRlZC1pbnN0cnVtZW50LnRzPzE4MGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaXMtcmVxdWVzdC1lcnJvci50cz9iNDNkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3N0YW5kYXJkLWVycm9yLnRzPzhhMDMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc2V0LXByb3RvdHlwZS1vZi50cz84NDVhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWZhaWxlZC1lcnJvci50cz8wN2RkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jYXJkaW5hbC1pbnRlZ3JhdGlvbi9zcmMvY2FyZGluYWwudHM/NWJmYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvY2FyZGluYWwtaW50ZWdyYXRpb24vc3JjL2NhcmRpbmFsLWNsaWVudC50cz8yMjE3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWNsaWVudC11bmF2YWlsYWJsZS1lcnJvci50cz9mOGVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jYXJkaW5hbC1pbnRlZ3JhdGlvbi9zcmMvY2FyZGluYWwtc2NyaXB0LWxvYWRlci50cz8zYmIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2ludmFsaWQtYXJndW1lbnQtZXJyb3IudHM/MzkyMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9vcmRlci1maW5hbGl6YXRpb24tbm90LXJlcXVpcmVkLWVycm9yLnRzP2I1YTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1hcmd1bWVudC1pbnZhbGlkLWVycm9yLnRzP2E1MDEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L3BheW1lbnQtc3RhdHVzLXR5cGVzLnRzPzBiODAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2NyZWRpdC1jYXJkLWludGVncmF0aW9uL3NyYy9jcmVkaXQtY2FyZC1wYXltZW50LXN0cmF0ZWd5LnRzPzI4OWYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1wcm8taW50ZWdyYXRpb24vc3JjL3BheXBhbC1wcm8tcGF5bWVudC1zdHJhdGVneS50cz84YjFhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtcHJvLWludGVncmF0aW9uL3NyYy9jcmVhdGUtcGF5cGFsLXByby1wYXltZW50LXN0cmF0ZWd5LnRzPzNiYmEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBNaXNzaW5nRGF0YUVycm9yVHlwZSB7XG4gICAgTWlzc2luZ0JpbGxpbmdBZGRyZXNzLFxuICAgIE1pc3NpbmdDYXJ0LFxuICAgIE1pc3NpbmdDaGVja291dCxcbiAgICBNaXNzaW5nQ29uc2lnbm1lbnRzLFxuICAgIE1pc3NpbmdDdXN0b21lcixcbiAgICBNaXNzaW5nQ2hlY2tvdXRDb25maWcsXG4gICAgTWlzc2luZ09yZGVyLFxuICAgIE1pc3NpbmdPcmRlckNvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXJJZCxcbiAgICBNaXNzaW5nUGF5bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudElkLFxuICAgIE1pc3NpbmdQYXltZW50SW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICBNaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsLFxuICAgIE1pc3NpbmdQYXltZW50U3RhdHVzLFxuICAgIE1pc3NpbmdQYXltZW50VG9rZW4sXG4gICAgTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIHdoZW4gZGF0YSB0aGF0IGlzIGV4cGVjdGVkIHRvIGV4aXN0IGlzIG1pc3NpbmcuIFVzdWFsbHkgaXRcbiAqIGlzIGR1ZSB0byB0aGUgZmFjdCB0aGF0IGNlcnRhaW4gZGF0YSBoYXMgbm90IGJlZW4gcmV0cmlldmVkIGZyb20gb3Igc2F2ZWQgdG9cbiAqIHRoZSBzZXJ2ZXIgeWV0LiBBbmQgc3VjaCBkYXRhIGlzIHJlcXVpcmVkIHRvIHBlcmZvcm0gY2VydGFpbiBhY3Rpb25zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXNzaW5nRGF0YUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ01pc3NpbmdEYXRhRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbWlzc2luZ19kYXRhJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjYXJ0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDb25zaWdubWVudHM6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ3VzdG9tZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY3VzdG9tZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOlxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlckNvbmZpZzpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSB0b2tlbiByZXF1aXJlZCB0byBzdWJtaXQgYSBwYXltZW50IGlzIG1pc3NpbmcuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBOb3RJbml0aWFsaXplZEVycm9yVHlwZSB7XG4gICAgQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZCxcbiAgICBDdXN0b21lck5vdEluaXRpYWxpemVkLFxuICAgIFBheW1lbnROb3RJbml0aWFsaXplZCxcbiAgICBTaGlwcGluZ05vdEluaXRpYWxpemVkLFxuICAgIFNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIG1ldGhvZCByZXF1aXJlcyBhIGNlcnRhaW4gaW5pdGlhbGl6YXRpb24gY2FsbCB0byBiZVxuICogbWFkZSBmaXJzdC4gU29tZSBvYmplY3RzIGNhbiBiZSBjb25zdHJ1Y3RlZCBidXQgdGhleSBjYW5ub3QgYmUgdXNlZCB1bnRpbCBhXG4gKiBzZXBhcmF0ZSBpbml0aWFsaXphdGlvbiBjYWxsIGlzIG1hZGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdEluaXRpYWxpemVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTm90SW5pdGlhbGl6ZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdub3RfaW5pdGlhbGl6ZWQnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5DdXN0b21lck5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjdXN0b21lciBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TaGlwcGluZ05vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBzaGlwcGluZyBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2hlY2tvdXQgc3BhbSBwcm90ZWN0aW9uIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBtZXJnZSwgc29tZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgSG9zdGVkRm9ybSxcbiAgICBpc1JlcXVlc3RFcnJvcixcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQ2FyZGluYWxDbGllbnQsIHsgQ2FyZGluYWxPcmRlckRhdGEgfSBmcm9tICcuL2NhcmRpbmFsLWNsaWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmRpbmFsVGhyZWVEU2VjdXJlRmxvdyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgX2NhcmRpbmFsQ2xpZW50OiBDYXJkaW5hbENsaWVudCxcbiAgICApIHt9XG5cbiAgICBhc3luYyBwcmVwYXJlKG1ldGhvZDogUGF5bWVudE1ldGhvZCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLl9jYXJkaW5hbENsaWVudC5sb2FkKG1ldGhvZC5pZCwgbWV0aG9kLmNvbmZpZy50ZXN0TW9kZSk7XG4gICAgICAgIGF3YWl0IHRoaXMuX2NhcmRpbmFsQ2xpZW50LmNvbmZpZ3VyZShhd2FpdCB0aGlzLl9nZXRDbGllbnRUb2tlbihtZXRob2QpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzdGFydChcbiAgICAgICAgZXhlY3V0ZTogUGF5bWVudFN0cmF0ZWd5WydleGVjdXRlJ10sXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgICAgIGhvc3RlZEZvcm0/OiBIb3N0ZWRGb3JtLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGdldENhcmRJbnN0cnVtZW50LCBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyB9ID1cbiAgICAgICAgICAgIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICBjb25zdCB7IHBheW1lbnQ6IHsgbWV0aG9kSWQgPSAnJywgcGF5bWVudERhdGEgPSB7fSB9ID0ge30gfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IGluc3RydW1lbnQgPVxuICAgICAgICAgICAgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkgJiYgZ2V0Q2FyZEluc3RydW1lbnQocGF5bWVudERhdGEuaW5zdHJ1bWVudElkKTtcbiAgICAgICAgY29uc3QgYmluID0gaW5zdHJ1bWVudCA/IGluc3RydW1lbnQuaWluIDogaG9zdGVkRm9ybSAmJiBob3N0ZWRGb3JtLmdldEJpbigpO1xuXG4gICAgICAgIGlmIChiaW4pIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2NhcmRpbmFsQ2xpZW50LnJ1bkJpblByb2Nlc3MoYmluKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZShcbiAgICAgICAgICAgICAgICBtZXJnZShwYXlsb2FkLCB7XG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyZWVEU2VjdXJlOiB7IHRva2VuOiBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCkuY2xpZW50VG9rZW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIWlzUmVxdWVzdEVycm9yKGVycm9yKSB8fFxuICAgICAgICAgICAgICAgICFzb21lKGVycm9yLmJvZHkuZXJyb3JzLCB7IGNvZGU6ICd0aHJlZV9kX3NlY3VyZV9yZXF1aXJlZCcgfSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0aHJlZURTZWN1cmUgPSBhd2FpdCB0aGlzLl9jYXJkaW5hbENsaWVudC5nZXRUaHJlZURTZWN1cmVEYXRhKFxuICAgICAgICAgICAgICAgIGVycm9yLmJvZHkudGhyZWVfZHNfcmVzdWx0LFxuICAgICAgICAgICAgICAgIHRoaXMuX2dldE9yZGVyRGF0YSgpLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKCFob3N0ZWRGb3JtKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KFxuICAgICAgICAgICAgICAgICAgICBtZXJnZShwYXlsb2FkLnBheW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7IHRocmVlRFNlY3VyZSB9LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBob3N0ZWRGb3JtLnN1Ym1pdChcbiAgICAgICAgICAgICAgICBtZXJnZShwYXlsb2FkLnBheW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudERhdGE6IHsgdGhyZWVEU2VjdXJlIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfZ2V0Q2xpZW50VG9rZW4obWV0aG9kOiBQYXltZW50TWV0aG9kKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgaWYgKG1ldGhvZC5jbGllbnRUb2tlbikge1xuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZC5jbGllbnRUb2tlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kLmlkKTtcblxuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgIC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2QuaWQpO1xuXG4gICAgICAgIHJldHVybiBwYXltZW50TWV0aG9kLmNsaWVudFRva2VuIHx8ICcnO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldE9yZGVyRGF0YSgpOiBDYXJkaW5hbE9yZGVyRGF0YSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRTaGlwcGluZ0FkZHJlc3MoKTtcbiAgICAgICAgY29uc3QgY2hlY2tvdXQgPSBzdGF0ZS5nZXRDaGVja291dE9yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBzdGF0ZS5nZXRPcmRlck9yVGhyb3coKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3MsXG4gICAgICAgICAgICBzaGlwcGluZ0FkZHJlc3MsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGU6IGNoZWNrb3V0LmNhcnQuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgIGlkOiBvcmRlci5vcmRlcklkLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBhbW91bnQ6IGNoZWNrb3V0LmNhcnQuY2FydEFtb3VudCxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEZvcm1hdHRlZFBheWxvYWQsXG4gICAgRm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICcuL3BheW1lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1ZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgVmF1bHRlZEluc3RydW1lbnQge1xuICAgIHJldHVybiBCb29sZWFuKChpbnN0cnVtZW50IGFzIFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgICBCb29sZWFuKChpbnN0cnVtZW50IGFzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdHJ1bWVudCwgJ2NjTnVtYmVyJykgJiZcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0cnVtZW50LCAnY2NDdnYnKVxuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Zvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgRm9ybWF0dGVkUGF5bG9hZDxGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudD4ge1xuICAgIGNvbnN0IGZvcm1hdHRlZEluc3RydW1lbnQgPSAoaW5zdHJ1bWVudCBhcyBGb3JtYXR0ZWRQYXlsb2FkPEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50PilcbiAgICAgICAgLmZvcm1hdHRlZFBheWxvYWQ7XG5cbiAgICBpZiAoIWZvcm1hdHRlZEluc3RydW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgQm9vbGVhbihmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiAmJiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbi50b2tlbilcbiAgICApO1xufVxuIiwiaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vLyBIYXZlIHRvIHVzZSBgYXNgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzczOTg3MDQ0L3R5cGVndWFyZGluZy1hbi11bmtub3duLW5lc3RlZC1vYmplY3Qgc2hvdWxkIGJlIGZpeGVkIGluIDQuOCtcbmNvbnN0IGlzUmVxdWVzdEVycm9yID0gKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVxdWVzdEVycm9yID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnYm9keScgaW4gZXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpc1JlcXVlc3RFcnJvcjtcbiIsImltcG9ydCBDdXN0b21FcnJvciBmcm9tICcuL2N1c3RvbS1lcnJvcic7XG5pbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSAnLi9zZXQtcHJvdG90eXBlLW9mJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHR5cGUgc2hvdWxkIG5vdCBiZSBjb25zdHJ1Y3RlZCBkaXJlY3RseS4gSXQgaXMgYSBiYXNlIGNsYXNzIGZvclxuICogYWxsIGN1c3RvbSBlcnJvcnMgdGhyb3duIGluIHRoaXMgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgQ3VzdG9tRXJyb3Ige1xuICAgIG5hbWUgPSAnU3RhbmRhcmRFcnJvcic7XG4gICAgdHlwZSA9ICdzdGFuZGFyZCc7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgICBpZiAodHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBuZXcudGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFjaztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKG9iamVjdDogYW55LCBwcm90b3R5cGU6IG9iamVjdCkge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iamVjdCwgcHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICAgIH1cblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIHBheW1lbnQgbWV0aG9kIGV4cGVyaWVuY2VzIHNvbWUga2luZCBvZlxuICogZmFpbHVyZSAoaS5lLjogaXRzIGNsaWVudCBsaWJyYXJ5IHJldHVybnMgYSByZWplY3RlZCBwcm9taXNlKS4gQW5kIHRoZXJlIGlzXG4gKiBubyBvdGhlciBlcnJvciB0eXBlIHRoYXQgaXMgbW9yZSBzcGVjaWZpYyB0aGFuIHRoaXMgb25lLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGhhcyB0aHJvd24gYW4gdW5leHBlY3RlZCBlcnJvci4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kRmFpbGVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X2ludmFsaWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFRocmVlRFNlY3VyZSwgVGhyZWVEU2VjdXJlVG9rZW4gfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGNvbnN0IENhcmRpbmFsU2lnbmF0dXJlVmFsaWRhdGlvbkVycm9ycyA9IFsxMDAwMDQsIDEwMTAsIDEwMTEsIDEwMjBdO1xuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsU0RLIHtcbiAgICBjb25maWd1cmUocGFyYW1zOiBDYXJkaW5hbENvbmZpZ3VyYXRpb24pOiB2b2lkO1xuICAgIG9uKHBhcmFtczogQ2FyZGluYWxFdmVudFR5cGUsIGNhbGxiYWNrOiBDYXJkaW5hbEV2ZW50TWFwW0NhcmRpbmFsRXZlbnRUeXBlXSk6IHZvaWQ7XG4gICAgb2ZmKHBhcmFtczogQ2FyZGluYWxFdmVudFR5cGUpOiB2b2lkO1xuICAgIHNldHVwPEsgZXh0ZW5kcyBrZXlvZiBDYXJkaW5hbEluaXRpYWxpemF0aW9uRGF0YU1hcD4oXG4gICAgICAgIGluaXRpYWxpemF0aW9uVHlwZTogSyxcbiAgICAgICAgaW5pdGlhbGl6YXRpb25EYXRhOiBDYXJkaW5hbEluaXRpYWxpemF0aW9uRGF0YU1hcFtLXSxcbiAgICApOiB2b2lkO1xuICAgIHRyaWdnZXIoXG4gICAgICAgIGV2ZW50OiBDYXJkaW5hbFRyaWdnZXJFdmVudHMsXG4gICAgICAgIGRhdGE/OiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxDYXJkaW5hbEJpblByb2Nlc3NSZXNwb25zZSB8IHZvaWQ+O1xuICAgIGNvbnRpbnVlKFxuICAgICAgICBwYXltZW50QnJhbmQ6IENhcmRpbmFsUGF5bWVudEJyYW5kLFxuICAgICAgICBjb250aW51ZU9iamVjdDogQ2FyZGluYWxDb250aW51ZSxcbiAgICAgICAgb3JkZXI6IENhcmRpbmFsUGFydGlhbE9yZGVyLFxuICAgICk6IHZvaWQ7XG4gICAgc3RhcnQocGF5bWVudEJyYW5kOiBDYXJkaW5hbFBheW1lbnRCcmFuZCwgb3JkZXI6IENhcmRpbmFsUGFydGlhbE9yZGVyLCBqd3Q/OiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsV2luZG93IGV4dGVuZHMgV2luZG93IHtcbiAgICBDYXJkaW5hbD86IENhcmRpbmFsU0RLO1xufVxuXG5leHBvcnQgZW51bSBDYXJkaW5hbEV2ZW50VHlwZSB7XG4gICAgU2V0dXBDb21wbGV0ZWQgPSAncGF5bWVudHMuc2V0dXBDb21wbGV0ZScsXG4gICAgVmFsaWRhdGVkID0gJ3BheW1lbnRzLnZhbGlkYXRlZCcsXG59XG5cbmV4cG9ydCB0eXBlIHNldHVwQ29tcGxldGVGbiA9IChzZXR1cENvbXBsZXRlRGF0YTogQ2FyZGluYWxTZXR1cENvbXBsZXRlZERhdGEpID0+IHZvaWQ7XG5leHBvcnQgdHlwZSB2YWxpZGF0ZWRGbiA9IChkYXRhOiBDYXJkaW5hbFZhbGlkYXRlZERhdGEsIGp3dD86IHN0cmluZykgPT4gdm9pZDtcblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbEV2ZW50TWFwIHtcbiAgICBbQ2FyZGluYWxFdmVudFR5cGUuU2V0dXBDb21wbGV0ZWRdOiBzZXR1cENvbXBsZXRlRm47XG4gICAgW0NhcmRpbmFsRXZlbnRUeXBlLlZhbGlkYXRlZF06IHZhbGlkYXRlZEZuO1xufVxuXG5leHBvcnQgdHlwZSBDYXJkaW5hbENvbmZpZ3VyYXRpb24gPSBQYXJ0aWFsPHtcbiAgICBsb2dnaW5nOiB7XG4gICAgICAgIGxldmVsOiBzdHJpbmc7XG4gICAgfTtcbiAgICBwYXltZW50OiB7XG4gICAgICAgIHZpZXc6IHN0cmluZztcbiAgICAgICAgZnJhbWV3b3JrOiBzdHJpbmc7XG4gICAgICAgIGRpc3BsYXlMb2FkaW5nOiBib29sZWFuO1xuICAgIH07XG59PjtcblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbFNldHVwQ29tcGxldGVkRGF0YSB7XG4gICAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gICAgbW9kdWxlczogQ2FyZGluYWxNb2R1bGVTdGF0ZVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsTW9kdWxlU3RhdGUge1xuICAgIGxvYWRlZDogYm9vbGVhbjtcbiAgICBtb2R1bGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGVudW0gQ2FyZGluYWxJbml0aWFsaXphdGlvblR5cGUge1xuICAgIEluaXQgPSAnaW5pdCcsXG4gICAgQ29tcGxldGUgPSAnY29tcGxldGUnLFxuICAgIENvbmZpcm0gPSAnY29uZmlybScsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxJbml0aWFsaXphdGlvbkRhdGFNYXAge1xuICAgIFtDYXJkaW5hbEluaXRpYWxpemF0aW9uVHlwZS5Jbml0XTogQ2FyZGluYWxJbml0VHlwZURhdGE7XG4gICAgW0NhcmRpbmFsSW5pdGlhbGl6YXRpb25UeXBlLkNvbXBsZXRlXTogQ2FyZGluYWxDb21wbGV0ZVR5cGVEYXRhO1xuICAgIFtDYXJkaW5hbEluaXRpYWxpemF0aW9uVHlwZS5Db25maXJtXTogQ2FyZGluYWxDb25maXJtVHlwZURhdGE7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxJbml0VHlwZURhdGEge1xuICAgIGp3dDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsQ29tcGxldGVUeXBlRGF0YSB7XG4gICAgU3RhdHVzOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxDb25maXJtVHlwZURhdGEge1xuICAgIGp3dDogc3RyaW5nO1xuICAgIGNhcmRpbmFsUmVzcG9uc2VKd3Q6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbFZhbGlkYXRlZERhdGEge1xuICAgIEFjdGlvbkNvZGU/OiBDYXJkaW5hbFZhbGlkYXRlZEFjdGlvbjtcbiAgICBFcnJvckRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgRXJyb3JOdW1iZXI6IG51bWJlcjtcbiAgICBWYWxpZGF0ZWQ/OiBib29sZWFuO1xuICAgIFBheW1lbnQ/OiBDYXJkaW5hbFBheW1lbnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxQYXltZW50IHtcbiAgICBFeHRlbmRlZERhdGE/OiBDYXJkaW5hbENDQUV4dGVuZGVkRGF0YTtcbiAgICBQcm9jZXNzb3JUcmFuc2FjdGlvbklkOiBzdHJpbmc7XG4gICAgVHlwZTogQ2FyZGluYWxQYXltZW50VHlwZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbEJpblByb2Nlc3NSZXNwb25zZSB7XG4gICAgU3RhdHVzOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsQ29udGludWUge1xuICAgIEFjc1VybDogc3RyaW5nO1xuICAgIFBheWxvYWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbFBhcnRpYWxPcmRlciB7XG4gICAgT3JkZXJEZXRhaWxzOiBDYXJkaW5hbE9yZGVyRGV0YWlscztcbiAgICBDb25zdW1lcj86IENhcmRpbmFsQ29uc3VtZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxDb25zdW1lciB7XG4gICAgRW1haWwxPzogc3RyaW5nO1xuICAgIEVtYWlsMj86IHN0cmluZztcbiAgICBTaGlwcGluZ0FkZHJlc3M/OiBDYXJkaW5hbEFkZHJlc3M7XG4gICAgQmlsbGluZ0FkZHJlc3M/OiBDYXJkaW5hbEFkZHJlc3M7XG4gICAgQWNjb3VudD86IENhcmRpbmFsQWNjb3VudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbEFjY291bnQge1xuICAgIEFjY291bnROdW1iZXI6IG51bWJlcjtcbiAgICBFeHBpcmF0aW9uTW9udGg6IG51bWJlcjtcbiAgICBFeHBpcmF0aW9uWWVhcjogbnVtYmVyO1xuICAgIE5hbWVPbkFjY291bnQ6IHN0cmluZztcbiAgICBDYXJkQ29kZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsQWRkcmVzcyB7XG4gICAgRnVsbE5hbWU/OiBzdHJpbmc7XG4gICAgRmlyc3ROYW1lOiBzdHJpbmc7XG4gICAgTWlkZGxlTmFtZT86IHN0cmluZztcbiAgICBMYXN0TmFtZTogc3RyaW5nO1xuICAgIEFkZHJlc3MxOiBzdHJpbmc7XG4gICAgQWRkcmVzczI/OiBzdHJpbmc7XG4gICAgQWRkcmVzczM/OiBzdHJpbmc7XG4gICAgQ2l0eTogc3RyaW5nO1xuICAgIFN0YXRlOiBzdHJpbmc7XG4gICAgUG9zdGFsQ29kZTogc3RyaW5nO1xuICAgIENvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgUGhvbmUxPzogc3RyaW5nO1xuICAgIFBob25lMj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbE9yZGVyRGV0YWlscyB7XG4gICAgT3JkZXJOdW1iZXI6IHN0cmluZztcbiAgICBBbW91bnQ6IG51bWJlcjtcbiAgICBDdXJyZW5jeUNvZGU6IHN0cmluZztcbiAgICBPcmRlckRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICAgIE9yZGVyQ2hhbm5lbDogc3RyaW5nO1xuICAgIFRyYW5zYWN0aW9uSWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIENhcmRpbmFsQ0NBRXh0ZW5kZWREYXRhID0gUGFydGlhbDx7XG4gICAgQ0FWVjogc3RyaW5nO1xuICAgIEVDSUZsYWc6IHN0cmluZztcbiAgICBQQVJlc1N0YXR1czogc3RyaW5nO1xuICAgIFNpZ25hdHVyZVZlcmlmaWNhdGlvbjogc3RyaW5nO1xuICAgIFhJRDogc3RyaW5nO1xuICAgIFVDQUZJbmRpY2F0b3I6IHN0cmluZztcbiAgICBDaGFsbGVuZ2VDYW5jZWw6IHN0cmluZztcbn0+O1xuXG5leHBvcnQgZW51bSBDYXJkaW5hbFZhbGlkYXRlZEFjdGlvbiB7XG4gICAgU3VjY2VzcyA9ICdTVUNDRVNTJyxcbiAgICBOb0FjdGlvbiA9ICdOT0FDVElPTicsXG4gICAgRmFpbHVyZSA9ICdGQUlMVVJFJyxcbiAgICBFcnJvciA9ICdFUlJPUicsXG59XG5cbmV4cG9ydCBlbnVtIENhcmRpbmFsUGF5bWVudFR5cGUge1xuICAgIENDQSA9ICdDQ0EnLFxuICAgIFBheXBhbCA9ICdQYXlwYWwnLFxuICAgIFdhbGxldCA9ICdXYWxsZXQnLFxuICAgIFZpc2FDaGVja291dCA9ICdWaXNhQ2hlY2tvdXQnLFxuICAgIEFwcGxlUGF5ID0gJ0FwcGxlUGF5JyxcbiAgICBEaXNjb3ZlcldhbGxldCA9ICdEaXNjb3ZlcldhbGxldCcsXG59XG5cbmV4cG9ydCBlbnVtIENhcmRpbmFsVHJpZ2dlckV2ZW50cyB7XG4gICAgQmluUHJvY2VzcyA9ICdiaW4ucHJvY2VzcycsXG59XG5cbmV4cG9ydCBlbnVtIENhcmRpbmFsUGF5bWVudEJyYW5kIHtcbiAgICBDQ0EgPSAnY2NhJyxcbn1cblxuZXhwb3J0IGVudW0gQ2FyZGluYWxTaWduYXR1cmVWZXJpZmljYXRpb24ge1xuICAgIFllcyA9ICdZJyxcbiAgICBObyA9ICdOJyxcbn1cblxuZXhwb3J0IHR5cGUgQ2FyZGluYWxUaHJlZURTZWN1cmVUb2tlbiA9IFBpY2s8VGhyZWVEU2VjdXJlLCAneGlkJz4gfCBUaHJlZURTZWN1cmVUb2tlbjtcbiIsImltcG9ydCB7IGluY2x1ZGVzLCBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBBZGRyZXNzLFxuICAgIEJpbGxpbmdBZGRyZXNzLFxuICAgIENyZWRpdENhcmRJbnN0cnVtZW50LFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IsXG4gICAgVGhyZWVEU2VjdXJlVG9rZW4sXG4gICAgVGhyZWVEc1Jlc3VsdCxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgQ2FyZGluYWxBY2NvdW50LFxuICAgIENhcmRpbmFsQWRkcmVzcyxcbiAgICBDYXJkaW5hbENvbnN1bWVyLFxuICAgIENhcmRpbmFsRXZlbnRUeXBlLFxuICAgIENhcmRpbmFsSW5pdGlhbGl6YXRpb25UeXBlLFxuICAgIENhcmRpbmFsUGFydGlhbE9yZGVyLFxuICAgIENhcmRpbmFsUGF5bWVudEJyYW5kLFxuICAgIENhcmRpbmFsU0RLLFxuICAgIENhcmRpbmFsU2lnbmF0dXJlVmFsaWRhdGlvbkVycm9ycyxcbiAgICBDYXJkaW5hbFNpZ25hdHVyZVZlcmlmaWNhdGlvbixcbiAgICBDYXJkaW5hbFRyaWdnZXJFdmVudHMsXG4gICAgQ2FyZGluYWxWYWxpZGF0ZWRBY3Rpb24sXG4gICAgQ2FyZGluYWxWYWxpZGF0ZWREYXRhLFxufSBmcm9tICcuL2NhcmRpbmFsJztcbmltcG9ydCBDYXJkaW5hbFNjcmlwdExvYWRlciBmcm9tICcuL2NhcmRpbmFsLXNjcmlwdC1sb2FkZXInO1xuXG5leHBvcnQgdHlwZSBDYXJkaW5hbFN1cHBvcnRlZFBheW1lbnRJbnN0cnVtZW50ID0gQ3JlZGl0Q2FyZEluc3RydW1lbnQgfCBWYXVsdGVkSW5zdHJ1bWVudDtcblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbE9yZGVyRGF0YSB7XG4gICAgYmlsbGluZ0FkZHJlc3M6IEJpbGxpbmdBZGRyZXNzO1xuICAgIHNoaXBwaW5nQWRkcmVzcz86IEFkZHJlc3M7XG4gICAgY3VycmVuY3lDb2RlOiBzdHJpbmc7XG4gICAgaWQ6IHN0cmluZztcbiAgICBhbW91bnQ6IG51bWJlcjtcbiAgICBwYXltZW50RGF0YT86IENyZWRpdENhcmRJbnN0cnVtZW50O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkaW5hbENsaWVudCB7XG4gICAgcHJpdmF0ZSBfcHJvdmlkZXIgPSAnJztcbiAgICBwcml2YXRlIF90ZXN0TW9kZSA9IGZhbHNlO1xuICAgIHByaXZhdGUgX3Nkaz86IFByb21pc2U8Q2FyZGluYWxTREs+O1xuICAgIHByaXZhdGUgX2NvbmZpZ3VyYXRpb25Ub2tlbiA9ICcnO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfc2NyaXB0TG9hZGVyOiBDYXJkaW5hbFNjcmlwdExvYWRlcikge31cblxuICAgIGxvYWQocHJvdmlkZXI6IHN0cmluZywgdGVzdE1vZGUgPSBmYWxzZSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLl9wcm92aWRlciA9IHByb3ZpZGVyO1xuICAgICAgICB0aGlzLl90ZXN0TW9kZSA9IHRlc3RNb2RlO1xuXG4gICAgICAgIGlmICghdGhpcy5fc2RrKSB7XG4gICAgICAgICAgICB0aGlzLl9zZGsgPSB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZChwcm92aWRlciwgdGVzdE1vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3Nkay50aGVuKG5vb3ApO1xuICAgIH1cblxuICAgIGNvbmZpZ3VyZShjbGllbnRUb2tlbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLl9jb25maWd1cmF0aW9uVG9rZW4pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb25maWd1cmF0aW9uVG9rZW4gPT09IGNsaWVudFRva2VuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9zZGsgPSB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZChgJHt0aGlzLl9wcm92aWRlcn0uJHtEYXRlLm5vdygpfWAsIHRoaXMuX3Rlc3RNb2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRDbGllbnRTREsoKS50aGVuKFxuICAgICAgICAgICAgKGNsaWVudCkgPT5cbiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudC5vbihDYXJkaW5hbEV2ZW50VHlwZS5TZXR1cENvbXBsZXRlZCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50Lm9mZihDYXJkaW5hbEV2ZW50VHlwZS5TZXR1cENvbXBsZXRlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQub2ZmKENhcmRpbmFsRXZlbnRUeXBlLlZhbGlkYXRlZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbmZpZ3VyYXRpb25Ub2tlbiA9IGNsaWVudFRva2VuO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudC5vbihDYXJkaW5hbEV2ZW50VHlwZS5WYWxpZGF0ZWQsIChkYXRhOiBDYXJkaW5hbFZhbGlkYXRlZERhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudC5vZmYoQ2FyZGluYWxFdmVudFR5cGUuU2V0dXBDb21wbGV0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50Lm9mZihDYXJkaW5hbEV2ZW50VHlwZS5WYWxpZGF0ZWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRhdGEuQWN0aW9uQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ2FyZGluYWxWYWxpZGF0ZWRBY3Rpb24uRXJyb3I6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlcyhDYXJkaW5hbFNpZ25hdHVyZVZhbGlkYXRpb25FcnJvcnMsIGRhdGEuRXJyb3JOdW1iZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE1pc3NpbmdEYXRhRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoZGF0YS5FcnJvckRlc2NyaXB0aW9uKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjbGllbnQuc2V0dXAoQ2FyZGluYWxJbml0aWFsaXphdGlvblR5cGUuSW5pdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgand0OiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcnVuQmluUHJvY2VzcyhiaW5OdW1iZXI6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q2xpZW50U0RLKClcbiAgICAgICAgICAgIC50aGVuKChjbGllbnQpID0+XG4gICAgICAgICAgICAgICAgY2xpZW50LnRyaWdnZXIoQ2FyZGluYWxUcmlnZ2VyRXZlbnRzLkJpblByb2Nlc3MsIGJpbk51bWJlcikuY2F0Y2gobm9vcCksXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQgfHwgIXJlc3VsdC5TdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRUaHJlZURTZWN1cmVEYXRhKFxuICAgICAgICB0aHJlZURTZWN1cmVEYXRhOiBUaHJlZURzUmVzdWx0LFxuICAgICAgICBvcmRlckRhdGE6IENhcmRpbmFsT3JkZXJEYXRhLFxuICAgICk6IFByb21pc2U8VGhyZWVEU2VjdXJlVG9rZW4+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENsaWVudFNESygpLnRoZW4oKGNsaWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPFRocmVlRFNlY3VyZVRva2VuPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgY2xpZW50Lm9uKFxuICAgICAgICAgICAgICAgICAgICBDYXJkaW5hbEV2ZW50VHlwZS5WYWxpZGF0ZWQsXG4gICAgICAgICAgICAgICAgICAgIChkYXRhOiBDYXJkaW5hbFZhbGlkYXRlZERhdGEsIGp3dD86IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50Lm9mZihDYXJkaW5hbEV2ZW50VHlwZS5WYWxpZGF0ZWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWp3dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLkVycm9yRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRhdGEuRXJyb3JEZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ0FuIGVycm9yIHdhcyBlbmNvdW50ZXJlZCB3aGlsZSBwcm9jZXNzaW5nIHRoZSB0cmFuc2FjdGlvbi4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGF0YS5BY3Rpb25Db2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyB0b2tlbjogand0IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRhdGEuQWN0aW9uQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ2FyZGluYWxWYWxpZGF0ZWRBY3Rpb24uU3VjY2VzczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyB0b2tlbjogand0IH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDYXJkaW5hbFZhbGlkYXRlZEFjdGlvbi5Ob0FjdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuRXJyb3JOdW1iZXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoZGF0YS5FcnJvckRlc2NyaXB0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZGF0YS5QYXltZW50IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZGF0YS5QYXltZW50LkV4dGVuZGVkRGF0YSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5QYXltZW50LkV4dGVuZGVkRGF0YS5TaWduYXR1cmVWZXJpZmljYXRpb24gIT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FyZGluYWxTaWduYXR1cmVWZXJpZmljYXRpb24uWWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVHJhbnNhY3Rpb24gc2lnbmF0dXJlIGNvdWxkIG5vdCBiZSB2YWxpZGF0ZWQuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgdG9rZW46IGp3dCB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ2FyZGluYWxWYWxpZGF0ZWRBY3Rpb24uRmFpbHVyZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1VzZXIgZmFpbGVkIGF1dGhlbnRpY2F0aW9uIG9yIGFuIGVycm9yIHdhcyBlbmNvdW50ZXJlZCB3aGlsZSBwcm9jZXNzaW5nIHRoZSB0cmFuc2FjdGlvbi4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ2FyZGluYWxWYWxpZGF0ZWRBY3Rpb24uRXJyb3I6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcihkYXRhLkVycm9yRGVzY3JpcHRpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGludWVPYmplY3QgPSB7XG4gICAgICAgICAgICAgICAgICAgIEFjc1VybDogdGhyZWVEU2VjdXJlRGF0YS5hY3NfdXJsLFxuICAgICAgICAgICAgICAgICAgICBQYXlsb2FkOiB0aHJlZURTZWN1cmVEYXRhLm1lcmNoYW50X2RhdGEsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRpYWxPcmRlciA9IHRoaXMuX21hcFRvUGFydGlhbE9yZGVyKFxuICAgICAgICAgICAgICAgICAgICBvcmRlckRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHRocmVlRFNlY3VyZURhdGEucGF5ZXJfYXV0aF9yZXF1ZXN0LFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBjbGllbnQuY29udGludWUoQ2FyZGluYWxQYXltZW50QnJhbmQuQ0NBLCBjb250aW51ZU9iamVjdCwgcGFydGlhbE9yZGVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBUb1BhcnRpYWxPcmRlcihcbiAgICAgICAgb3JkZXJEYXRhOiBDYXJkaW5hbE9yZGVyRGF0YSxcbiAgICAgICAgdHJhbnNhY3Rpb25JZDogc3RyaW5nLFxuICAgICk6IENhcmRpbmFsUGFydGlhbE9yZGVyIHtcbiAgICAgICAgY29uc3QgY29uc3VtZXI6IENhcmRpbmFsQ29uc3VtZXIgPSB7XG4gICAgICAgICAgICBCaWxsaW5nQWRkcmVzczogdGhpcy5fbWFwVG9DYXJkaW5hbEFkZHJlc3Mob3JkZXJEYXRhLmJpbGxpbmdBZGRyZXNzKSxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAob3JkZXJEYXRhLnBheW1lbnREYXRhKSB7XG4gICAgICAgICAgICBjb25zdW1lci5BY2NvdW50ID0gdGhpcy5fbWFwVG9DYXJkaW5hbEFjY291bnQob3JkZXJEYXRhLnBheW1lbnREYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcmRlckRhdGEuYmlsbGluZ0FkZHJlc3MuZW1haWwpIHtcbiAgICAgICAgICAgIGNvbnN1bWVyLkVtYWlsMSA9IG9yZGVyRGF0YS5iaWxsaW5nQWRkcmVzcy5lbWFpbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcmRlckRhdGEuc2hpcHBpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgICBjb25zdW1lci5TaGlwcGluZ0FkZHJlc3MgPSB0aGlzLl9tYXBUb0NhcmRpbmFsQWRkcmVzcyhvcmRlckRhdGEuc2hpcHBpbmdBZGRyZXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBDb25zdW1lcjogY29uc3VtZXIsXG4gICAgICAgICAgICBPcmRlckRldGFpbHM6IHtcbiAgICAgICAgICAgICAgICBPcmRlck51bWJlcjogb3JkZXJEYXRhLmlkLFxuICAgICAgICAgICAgICAgIEFtb3VudDogb3JkZXJEYXRhLmFtb3VudCxcbiAgICAgICAgICAgICAgICBDdXJyZW5jeUNvZGU6IG9yZGVyRGF0YS5jdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgT3JkZXJDaGFubmVsOiAnUycsXG4gICAgICAgICAgICAgICAgVHJhbnNhY3Rpb25JZDogdHJhbnNhY3Rpb25JZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbWFwVG9DYXJkaW5hbEFjY291bnQocGF5bWVudERhdGE6IENyZWRpdENhcmRJbnN0cnVtZW50KTogQ2FyZGluYWxBY2NvdW50IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIEFjY291bnROdW1iZXI6IE51bWJlcihwYXltZW50RGF0YS5jY051bWJlciksXG4gICAgICAgICAgICBFeHBpcmF0aW9uTW9udGg6IE51bWJlcihwYXltZW50RGF0YS5jY0V4cGlyeS5tb250aCksXG4gICAgICAgICAgICBFeHBpcmF0aW9uWWVhcjogTnVtYmVyKHBheW1lbnREYXRhLmNjRXhwaXJ5LnllYXIpLFxuICAgICAgICAgICAgTmFtZU9uQWNjb3VudDogcGF5bWVudERhdGEuY2NOYW1lLFxuICAgICAgICAgICAgQ2FyZENvZGU6IE51bWJlcihwYXltZW50RGF0YS5jY0N2diksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbWFwVG9DYXJkaW5hbEFkZHJlc3MoYWRkcmVzczogQWRkcmVzcyk6IENhcmRpbmFsQWRkcmVzcyB7XG4gICAgICAgIGNvbnN0IGNhcmRpbmFsQWRkcmVzczogQ2FyZGluYWxBZGRyZXNzID0ge1xuICAgICAgICAgICAgRmlyc3ROYW1lOiBhZGRyZXNzLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIExhc3ROYW1lOiBhZGRyZXNzLmxhc3ROYW1lLFxuICAgICAgICAgICAgQWRkcmVzczE6IGFkZHJlc3MuYWRkcmVzczEsXG4gICAgICAgICAgICBDaXR5OiBhZGRyZXNzLmNpdHksXG4gICAgICAgICAgICBTdGF0ZTogYWRkcmVzcy5zdGF0ZU9yUHJvdmluY2UsXG4gICAgICAgICAgICBQb3N0YWxDb2RlOiBhZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICBDb3VudHJ5Q29kZTogYWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoYWRkcmVzcy5hZGRyZXNzMikge1xuICAgICAgICAgICAgY2FyZGluYWxBZGRyZXNzLkFkZHJlc3MyID0gYWRkcmVzcy5hZGRyZXNzMjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhZGRyZXNzLnBob25lKSB7XG4gICAgICAgICAgICBjYXJkaW5hbEFkZHJlc3MuUGhvbmUxID0gYWRkcmVzcy5waG9uZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYXJkaW5hbEFkZHJlc3M7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0Q2xpZW50U0RLKCk6IFByb21pc2U8Q2FyZGluYWxTREs+IHtcbiAgICAgICAgaWYgKCF0aGlzLl9zZGspIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fc2RrO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGZhaWxzXG4gKiB0byBsb2FkLCBvciBmb3Igc29tZSByZWFzb24sIGl0IGlzIGluYWNjZXNzaWJsZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGlzIG5vdCBsb2FkZWQgb3IgcmVhZHkgdG8gYmUgdXNlZC4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X21ldGhvZF9jbGllbnRfdW5hdmFpbGFibGUnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgQ2FyZGluYWxTREssIENhcmRpbmFsV2luZG93IH0gZnJvbSAnLi9jYXJkaW5hbCc7XG5cbmNvbnN0IFNES19URVNUX1VSTCA9ICdodHRwczovL3NvbmdiaXJkc3RhZy5jYXJkaW5hbGNvbW1lcmNlLmNvbS9lZGdlL3YxL3NvbmdiaXJkLmpzJztcbmNvbnN0IFNES19QUk9EX1VSTCA9ICdodHRwczovL3NvbmdiaXJkLmNhcmRpbmFsY29tbWVyY2UuY29tL2VkZ2UvdjEvc29uZ2JpcmQuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkaW5hbFNjcmlwdExvYWRlciB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfc2NyaXB0TG9hZGVyOiBTY3JpcHRMb2FkZXIsIHByaXZhdGUgX3dpbmRvdzogQ2FyZGluYWxXaW5kb3cgPSB3aW5kb3cpIHt9XG5cbiAgICBsb2FkKHByb3ZpZGVyOiBzdHJpbmcsIHRlc3RNb2RlPzogYm9vbGVhbik6IFByb21pc2U8Q2FyZGluYWxTREs+IHtcbiAgICAgICAgY29uc3QgdXJsID0gdGVzdE1vZGUgPyBTREtfVEVTVF9VUkwgOiBTREtfUFJPRF9VUkw7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkU2NyaXB0KGAke3VybH0/dj0ke3Byb3ZpZGVyfWApLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl93aW5kb3cuQ2FyZGluYWwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dpbmRvdy5DYXJkaW5hbDtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBtZXRob2QgaXMgdW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGVcbiAqIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgYXJndW1lbnRzIGFjY29yZGluZyB0byB0aGVpciByZXF1aXJlbWVudHMsXG4gKiBpLmUuOiBpZiBhbiBhcmd1bWVudCBpcyBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnSW52YWxpZCBhcmd1bWVudHMgaGF2ZSBiZWVuIHByb3ZpZGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkQXJndW1lbnRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdpbnZhbGlkX2FyZ3VtZW50JztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB0cnlpbmcgdG8gbWFrZSBhbiBvcmRlciBmaW5hbGl6YXRpb24gcmVxdWVzdCBmb3IgYVxuICogcGF5bWVudCBtZXRob2QgdGhhdCBkb2VzIG5vdCByZXF1aXJlIHN1Y2ggcHJvY2VkdXJlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJ1RoZSBjdXJyZW50IG9yZGVyIGRvZXMgbm90IG5lZWQgdG8gYmUgZmluYWxpemVkIGF0IHRoaXMgc3RhZ2UuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ09yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdvcmRlcl9maW5hbGl6YXRpb25fbm90X3JlcXVpcmVkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgSW52YWxpZEFyZ3VtZW50RXJyb3IgZnJvbSAnLi9pbnZhbGlkLWFyZ3VtZW50LWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB3ZSBhcmUgdW5hYmxlIHRvIHN1Ym1pdCBhIHBheW1lbnQgYmVjYXVzZVxuICogdGhlIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzLCBpLmUuOiBpZiBhbiBhcmd1bWVudCBpc1xuICogbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIGV4dGVuZHMgSW52YWxpZEFyZ3VtZW50RXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGludmFsaWRGaWVsZHM/OiBzdHJpbmdbXSkge1xuICAgICAgICBsZXQgbWVzc2FnZSA9ICdVbmFibGUgdG8gc3VibWl0IHBheW1lbnQgZm9yIHRoZSBvcmRlciBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIGludmFsaWQuJztcblxuICAgICAgICBpZiAoaW52YWxpZEZpZWxkcykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IE1ha2Ugc3VyZSB0aGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgcHJvdmlkZWQgY29ycmVjdGx5OiAke2ludmFsaWRGaWVsZHMuam9pbihcbiAgICAgICAgICAgICAgICAnLCAnLFxuICAgICAgICAgICAgKX0uYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3InO1xuICAgIH1cbn1cbiIsImVudW0gUGF5bWVudFN0YXR1c1R5cGVzIHtcbiAgICBBQ0tOT1dMRURHRSA9ICdBQ0tOT1dMRURHRScsXG4gICAgRklOQUxJWkUgPSAnRklOQUxJWkUnLFxuICAgIElOSVRJQUxJWkUgPSAnSU5JVElBTElaRScsXG59XG5cbmV4cG9ydCBkZWZhdWx0IFBheW1lbnRTdGF0dXNUeXBlcztcbiIsImltcG9ydCB7IGlzTmlsLCB2YWx1ZXMgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEhvc3RlZEZvcm0sXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IFdpdGhDcmVkaXRDYXJkUGF5bWVudEluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnLi9jcmVkaXQtY2FyZC1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByb3RlY3RlZCBfaG9zdGVkRm9ybT86IEhvc3RlZEZvcm07XG4gICAgcHJvdGVjdGVkIF9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtPzogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBfcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSkge31cblxuICAgIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQoXG4gICAgICAgICAgICBwYXlsb2FkLnBheW1lbnQ/Lm1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bG9hZC5wYXltZW50Py5nYXRld2F5SWQsXG4gICAgICAgICkgJiYgdGhpcy5fc2hvdWxkUmVuZGVySG9zdGVkRm9ybVxuICAgICAgICAgICAgPyB0aGlzLl9leGVjdXRlV2l0aEhvc3RlZEZvcm0ocGF5bG9hZCwgb3B0aW9ucylcbiAgICAgICAgICAgIDogdGhpcy5fZXhlY3V0ZVdpdGhvdXRIb3N0ZWRGb3JtKHBheWxvYWQsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQ3JlZGl0Q2FyZFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXRoaXMuX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKG9wdGlvbnM/Lm1ldGhvZElkLCBvcHRpb25zPy5nYXRld2F5SWQpIHx8XG4gICAgICAgICAgICAhdGhpcy5faXNIb3N0ZWRGaWVsZEF2YWlsYWJsZShvcHRpb25zKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm0gPSBmYWxzZTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm9ybU9wdGlvbnMgPSBvcHRpb25zICYmIG9wdGlvbnMuY3JlZGl0Q2FyZCAmJiBvcHRpb25zLmNyZWRpdENhcmQuZm9ybTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudFNldHRpbmdzOiB7IGJpZ3BheUJhc2VVcmw6IGhvc3QgPSAnJyB9ID0ge30gfSA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKTtcblxuICAgICAgICBpZiAoIWZvcm1PcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUhvc3RlZEZvcm0oaG9zdCwgZm9ybU9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBmb3JtLmF0dGFjaCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fc2hvdWxkUmVuZGVySG9zdGVkRm9ybSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9ob3N0ZWRGb3JtID0gZm9ybTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLl9ob3N0ZWRGb3JtKSB7XG4gICAgICAgICAgICB0aGlzLl9ob3N0ZWRGb3JtLmRldGFjaCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgX2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybShcbiAgICAgICAgcGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgcGF5bWVudERhdGEgPSBwYXltZW50ICYmIHBheW1lbnQucGF5bWVudERhdGE7XG5cbiAgICAgICAgaWYgKCFwYXltZW50IHx8ICFwYXltZW50RGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQucGF5bWVudERhdGEnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoeyAuLi5wYXltZW50LCBwYXltZW50RGF0YSB9KTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgX2V4ZWN1dGVXaXRoSG9zdGVkRm9ybShcbiAgICAgICAgcGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgZm9ybSA9IHRoaXMuX2hvc3RlZEZvcm07XG5cbiAgICAgICAgaWYgKCFmb3JtKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXltZW50IHx8ICFwYXltZW50Lm1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudC5tZXRob2RJZCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIGF3YWl0IGZvcm0udmFsaWRhdGUoKS50aGVuKCgpID0+IGZvcm0uc3VibWl0KHBheW1lbnQpKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKG1ldGhvZElkPzogc3RyaW5nLCBnYXRld2F5SWQ/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCwgZ2F0ZXdheUlkKTtcblxuICAgICAgICByZXR1cm4gcGF5bWVudE1ldGhvZC5jb25maWcuaXNIb3N0ZWRGb3JtRW5hYmxlZCA9PT0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9pc0hvc3RlZEZpZWxkQXZhaWxhYmxlKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aENyZWRpdENhcmRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhdmFsdWVzKG9wdGlvbnMgJiYgb3B0aW9ucy5jcmVkaXRDYXJkICYmIG9wdGlvbnMuY3JlZGl0Q2FyZC5mb3JtLmZpZWxkcykuZXZlcnkoXG4gICAgICAgICAgICBpc05pbCxcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDYXJkaW5hbFRocmVlRFNlY3VyZUZsb3cgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2NhcmRpbmFsLWludGVncmF0aW9uJztcbmltcG9ydCB7IENyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2NyZWRpdC1jYXJkLWludGVncmF0aW9uJztcbmltcG9ydCB7XG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0YXR1c1R5cGVzLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5cGFsUHJvUGF5bWVudFN0cmF0ZWd5IGV4dGVuZHMgQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByb3RlY3RlZCBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHRocmVlRFNlY3VyZUZsb3c6IENhcmRpbmFsVGhyZWVEU2VjdXJlRmxvdyxcbiAgICApIHtcbiAgICAgICAgc3VwZXIocGF5bWVudEludGVncmF0aW9uU2VydmljZSk7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZShvcHRpb25zKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cob3B0aW9ucy5tZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKHBheW1lbnRNZXRob2QuY29uZmlnLmlzM2RzRW5hYmxlZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy50aHJlZURTZWN1cmVGbG93LnByZXBhcmUocGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50OiB7IG1ldGhvZElkID0gJycgfSA9IHt9IH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgaWYgKHN0YXRlLmdldFBheW1lbnRTdGF0dXMoKSA9PT0gUGF5bWVudFN0YXR1c1R5cGVzLkFDS05PV0xFREdFKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICBwYXltZW50OiB7IG1ldGhvZElkIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkKS5jb25maWcuaXMzZHNFbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aHJlZURTZWN1cmVGbG93LnN0YXJ0KFxuICAgICAgICAgICAgICAgIHN1cGVyLmV4ZWN1dGUuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZShwYXlsb2FkLCBvcHRpb25zKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgQ2FyZGluYWxDbGllbnQsXG4gICAgQ2FyZGluYWxTY3JpcHRMb2FkZXIsXG4gICAgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2NhcmRpbmFsLWludGVncmF0aW9uJztcbmltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFBheXBhbFByb1BheW1lbnRTdHJhdGVneSBmcm9tICcuL3BheXBhbC1wcm8tcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbFByb1BheW1lbnRTdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8UGF5cGFsUHJvUGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PlxuICAgIG5ldyBQYXlwYWxQcm9QYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIG5ldyBDYXJkaW5hbFRocmVlRFNlY3VyZUZsb3coXG4gICAgICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgbmV3IENhcmRpbmFsQ2xpZW50KG5ldyBDYXJkaW5hbFNjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSkpLFxuICAgICAgICApLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxQcm9QYXltZW50U3RyYXRlZ3ksIFt7IGlkOiAncGF5cGFsJyB9XSk7XG4iLCJpbXBvcnQgUmVzb2x2YWJsZU1vZHVsZSBmcm9tICcuL3Jlc29sdmFibGUtbW9kdWxlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9SZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPihcbiAgICBtb2R1bGU6IFRNb2R1bGUsXG4gICAgcmVzb2x2ZUlkczogVElkZW50aWZpZXJbXSxcbik6IFJlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+IHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2R1bGUsIHsgcmVzb2x2ZUlkcyB9KTtcbn1cbiJdLCJuYW1lcyI6WyJNaXNzaW5nRGF0YUVycm9yVHlwZSIsIk5vdEluaXRpYWxpemVkRXJyb3JUeXBlIiwiQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93IiwiY29uc3RydWN0b3IiLCJfcGF5bWVudEludGVncmF0aW9uU2VydmljZSIsIl9jYXJkaW5hbENsaWVudCIsInByZXBhcmUiLCJtZXRob2QiLCJ0aGlzIiwibG9hZCIsImlkIiwiY29uZmlnIiwidGVzdE1vZGUiLCJjb25maWd1cmUiLCJfZ2V0Q2xpZW50VG9rZW4iLCJzdGFydCIsImV4ZWN1dGUiLCJwYXlsb2FkIiwib3B0aW9ucyIsImhvc3RlZEZvcm0iLCJnZXRDYXJkSW5zdHJ1bWVudCIsImdldFBheW1lbnRNZXRob2RPclRocm93IiwiZ2V0U3RhdGUiLCJwYXltZW50IiwibWV0aG9kSWQiLCJwYXltZW50RGF0YSIsImluc3RydW1lbnQiLCJCb29sZWFuIiwiaW5zdHJ1bWVudElkIiwiaXNWYXVsdGVkSW5zdHJ1bWVudCIsImJpbiIsImlpbiIsImdldEJpbiIsInJ1bkJpblByb2Nlc3MiLCJtZXJnZSIsInRocmVlRFNlY3VyZSIsInRva2VuIiwiY2xpZW50VG9rZW4iLCJlcnJvciIsInNvbWUiLCJib2R5IiwiZXJyb3JzIiwiY29kZSIsImdldFRocmVlRFNlY3VyZURhdGEiLCJ0aHJlZV9kc19yZXN1bHQiLCJfZ2V0T3JkZXJEYXRhIiwic3VibWl0UGF5bWVudCIsInN1Ym1pdCIsImxvYWRQYXltZW50TWV0aG9kIiwic3RhdGUiLCJiaWxsaW5nQWRkcmVzcyIsImdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdyIsInNoaXBwaW5nQWRkcmVzcyIsImdldFNoaXBwaW5nQWRkcmVzcyIsImNoZWNrb3V0IiwiZ2V0Q2hlY2tvdXRPclRocm93Iiwib3JkZXIiLCJnZXRPcmRlck9yVGhyb3ciLCJjdXJyZW5jeUNvZGUiLCJjYXJ0IiwiY3VycmVuY3kiLCJvcmRlcklkIiwidG9TdHJpbmciLCJhbW91bnQiLCJjYXJ0QW1vdW50IiwiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwibWVzc2FnZSIsInByb3RvdHlwZSIsInN1cGVyIiwibmFtZSIsInR5cGUiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJNaXNzaW5nRGF0YUVycm9yIiwic3VidHlwZSIsIk1pc3NpbmdCaWxsaW5nQWRkcmVzcyIsIk1pc3NpbmdDYXJ0IiwiTWlzc2luZ0NvbnNpZ25tZW50cyIsIk1pc3NpbmdDaGVja291dCIsIk1pc3NpbmdDdXN0b21lciIsIk1pc3NpbmdDaGVja291dENvbmZpZyIsIk1pc3NpbmdPcmRlckNvbmZpZyIsIk1pc3NpbmdPcmRlciIsIk1pc3NpbmdPcmRlcklkIiwiTWlzc2luZ1BheW1lbnQiLCJNaXNzaW5nUGF5bWVudFRva2VuIiwiTWlzc2luZ1BheW1lbnRNZXRob2QiLCJNaXNzaW5nU2hpcHBpbmdBZGRyZXNzIiwiZ2V0RXJyb3JNZXNzYWdlIiwiUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yIiwiTm90SW5pdGlhbGl6ZWRFcnJvciIsIkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50Tm90SW5pdGlhbGl6ZWQiLCJTaGlwcGluZ05vdEluaXRpYWxpemVkIiwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCIsIkNhcmRpbmFsU2lnbmF0dXJlVmFsaWRhdGlvbkVycm9ycyIsIkNhcmRpbmFsRXZlbnRUeXBlIiwiQ2FyZGluYWxJbml0aWFsaXphdGlvblR5cGUiLCJDYXJkaW5hbFZhbGlkYXRlZEFjdGlvbiIsIkNhcmRpbmFsUGF5bWVudFR5cGUiLCJDYXJkaW5hbFRyaWdnZXJFdmVudHMiLCJDYXJkaW5hbFBheW1lbnRCcmFuZCIsIkNhcmRpbmFsU2lnbmF0dXJlVmVyaWZpY2F0aW9uIiwiQ2FyZGluYWxDbGllbnQiLCJfc2NyaXB0TG9hZGVyIiwiX3Byb3ZpZGVyIiwiX3Rlc3RNb2RlIiwiX2NvbmZpZ3VyYXRpb25Ub2tlbiIsInByb3ZpZGVyIiwiX3NkayIsInRoZW4iLCJub29wIiwiUHJvbWlzZSIsInJlc29sdmUiLCJEYXRlIiwibm93IiwiX2dldENsaWVudFNESyIsImNsaWVudCIsInJlamVjdCIsIm9uIiwiU2V0dXBDb21wbGV0ZWQiLCJvZmYiLCJWYWxpZGF0ZWQiLCJkYXRhIiwiQWN0aW9uQ29kZSIsImluY2x1ZGVzIiwiRXJyb3JOdW1iZXIiLCJFcnJvckRlc2NyaXB0aW9uIiwic2V0dXAiLCJJbml0Iiwiand0IiwiYmluTnVtYmVyIiwidHJpZ2dlciIsIkJpblByb2Nlc3MiLCJjYXRjaCIsInJlc3VsdCIsIlN0YXR1cyIsInRocmVlRFNlY3VyZURhdGEiLCJvcmRlckRhdGEiLCJTdWNjZXNzIiwiTm9BY3Rpb24iLCJQYXltZW50IiwiRXh0ZW5kZWREYXRhIiwiU2lnbmF0dXJlVmVyaWZpY2F0aW9uIiwiWWVzIiwiRmFpbHVyZSIsImNvbnRpbnVlT2JqZWN0IiwiQWNzVXJsIiwiYWNzX3VybCIsIlBheWxvYWQiLCJtZXJjaGFudF9kYXRhIiwicGFydGlhbE9yZGVyIiwiX21hcFRvUGFydGlhbE9yZGVyIiwicGF5ZXJfYXV0aF9yZXF1ZXN0IiwiY29udGludWUiLCJDQ0EiLCJ0cmFuc2FjdGlvbklkIiwiY29uc3VtZXIiLCJCaWxsaW5nQWRkcmVzcyIsIl9tYXBUb0NhcmRpbmFsQWRkcmVzcyIsIkFjY291bnQiLCJfbWFwVG9DYXJkaW5hbEFjY291bnQiLCJlbWFpbCIsIkVtYWlsMSIsIlNoaXBwaW5nQWRkcmVzcyIsIkNvbnN1bWVyIiwiT3JkZXJEZXRhaWxzIiwiT3JkZXJOdW1iZXIiLCJBbW91bnQiLCJDdXJyZW5jeUNvZGUiLCJPcmRlckNoYW5uZWwiLCJUcmFuc2FjdGlvbklkIiwiQWNjb3VudE51bWJlciIsIk51bWJlciIsImNjTnVtYmVyIiwiRXhwaXJhdGlvbk1vbnRoIiwiY2NFeHBpcnkiLCJtb250aCIsIkV4cGlyYXRpb25ZZWFyIiwieWVhciIsIk5hbWVPbkFjY291bnQiLCJjY05hbWUiLCJDYXJkQ29kZSIsImNjQ3Z2IiwiYWRkcmVzcyIsImNhcmRpbmFsQWRkcmVzcyIsIkZpcnN0TmFtZSIsImZpcnN0TmFtZSIsIkxhc3ROYW1lIiwibGFzdE5hbWUiLCJBZGRyZXNzMSIsImFkZHJlc3MxIiwiQ2l0eSIsImNpdHkiLCJTdGF0ZSIsInN0YXRlT3JQcm92aW5jZSIsIlBvc3RhbENvZGUiLCJwb3N0YWxDb2RlIiwiQ291bnRyeUNvZGUiLCJjb3VudHJ5Q29kZSIsImFkZHJlc3MyIiwiQWRkcmVzczIiLCJwaG9uZSIsIlBob25lMSIsIlBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIiwiQ2FyZGluYWxTY3JpcHRMb2FkZXIiLCJfd2luZG93Iiwid2luZG93IiwidXJsIiwibG9hZFNjcmlwdCIsIkNhcmRpbmFsIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IiLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiam9pbiIsIlBheW1lbnRTdGF0dXNUeXBlcyIsIkNyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kiLCJfaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQiLCJnYXRld2F5SWQiLCJfc2hvdWxkUmVuZGVySG9zdGVkRm9ybSIsIl9leGVjdXRlV2l0aEhvc3RlZEZvcm0iLCJfZXhlY3V0ZVdpdGhvdXRIb3N0ZWRGb3JtIiwiaW5pdGlhbGl6ZSIsIl9pc0hvc3RlZEZpZWxkQXZhaWxhYmxlIiwiZm9ybU9wdGlvbnMiLCJjcmVkaXRDYXJkIiwiZm9ybSIsInBheW1lbnRTZXR0aW5ncyIsImJpZ3BheUJhc2VVcmwiLCJob3N0IiwiZ2V0U3RvcmVDb25maWdPclRocm93IiwiY3JlYXRlSG9zdGVkRm9ybSIsImF0dGFjaCIsIl9ob3N0ZWRGb3JtIiwiZGVpbml0aWFsaXplIiwiZGV0YWNoIiwiZmluYWxpemUiLCJzdWJtaXRPcmRlciIsInZhbGlkYXRlIiwiaXNIb3N0ZWRGb3JtRW5hYmxlZCIsInZhbHVlcyIsImZpZWxkcyIsImV2ZXJ5IiwiaXNOaWwiLCJQYXlwYWxQcm9QYXltZW50U3RyYXRlZ3kiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwidGhyZWVEU2VjdXJlRmxvdyIsInBheW1lbnRNZXRob2QiLCJpczNkc0VuYWJsZWQiLCJnZXRQYXltZW50U3RhdHVzIiwiQUNLTk9XTEVER0UiLCJiaW5kIiwibW9kdWxlIiwiZ2V0U2NyaXB0TG9hZGVyIiwicmVzb2x2ZUlkcyIsImFzc2lnbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/paypal-pro.js\n\n}");

/***/ }),

/***/ "../checkout-sdk-js/dist/esm/integrations/sezzle.js":
/*!**********************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/sezzle.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSezzlePaymentStrategy: () => (/* binding */ s)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"../checkout-sdk-js/node_modules/@bigcommerce/form-poster/lib/index.js\");\nclass t extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class r extends t{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class n extends r{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}class i extends t{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class o{constructor(e,t){this._formPoster=e,this._paymentIntegrationService=t}execute(e,t){return r=this,i=void 0,a=function*(){const{payment:r}=e,i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,[\"payment\"]),o=r&&r.paymentData;if(!r||!o)throw new n([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(i,t);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},r),{paymentData:o}))}catch(e){if(!(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)||\"object\"!=typeof(a=e.body)||null===a||!(\"additional_action_required\"in a)||!this._isAdditionalActionRequired(e.body))return Promise.reject(e);const{body:{additional_action_required:{data:{redirect_url:t}}}}=e;return new Promise(()=>{this.redirectUrl(t)})}var a},new((o=void 0)||(o=Promise))(function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function s(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o(function(e){e(r)})).then(n,s)}c((a=a.apply(r,i||[])).next())});// removed by dead control flow\n var r, i, o, a; }finalize(){return Promise.reject(new i)}initialize(){return Promise.resolve()}deinitialize(){return Promise.resolve()}redirectUrl(e){return this._formPoster.postForm(e,{})}_isAdditionalActionRequired(e){const{additional_action_required:t,status:r}=e;return\"additional_action_required\"===r&&t&&\"offsite_redirect\"===t.type}}class a extends o{redirectUrl(e){window.location.replace(e)}}const s=(c=t=>new a((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__.createFormPoster)(),t),d=[{id:\"sezzle\"}],Object.assign(c,{resolveIds:d}));var c,d;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9zZXp6bGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFPZSxNQUFlQSxVQUFzQkMsTUFJaEQsV0FBQUMsQ0FBWUMsR0NYRCxJQUFxQ0MsRURZNUNDLE1BQU1GLEdBQVcscUNBSnJCLEtBQUFHLEtBQU8sZ0JBQ1AsS0FBQUMsS0FBTyxXQ1R5Q0gsYURjWkEsVUNiaENJLE9BQU9DLGVBQ1BELE9BQU9DLGVEWVFDLEtDWmVOLEdEWWZNLEtDVlJDLFVBQVlQLEVEWW9CLG1CQUE1QkgsTUFBTVcsa0JBQ2JYLE1BQU1XLGtCQUFrQkYsaUJBRXhCQSxLQUFLRyxNQUFRLElBQUlaLE1BQU1TLEtBQUtQLFNBQVNVLEtBRTdDLEVFZFcsTUFBTUMsVUFBNkJkLEVBQzlDLFdBQUFFLENBQVlDLEdBQ1JFLE1BQU1GLEdBQVcseUNBRWpCTyxLQUFLSixLQUFPLHVCQUNaSSxLQUFLSCxLQUFPLGtCQUNoQixFQ05XLE1BQU1RLFVBQW9DRCxFQUNyRCxXQUFBWixDQUFZYyxHQUNSLElBQUliLEVBQVUseUVBRVZhLElBQ0FiLEVBQVUsR0FBR0EsNERBQWtFYSxFQUFjQyxLQUN6RixVQUlSWixNQUFNRixHQUVOTyxLQUFLSixLQUFPLDZCQUNoQixFQ2RXLE1BQU1ZLFVBQTBDbEIsRUFDM0QsV0FBQUUsR0FDSUcsTUFBTSxrRUFFTkssS0FBS0osS0FBTyxvQ0FDWkksS0FBS0gsS0FBTyxpQ0FDaEIsRUNFVyxNQUFNWSxFQUNqQixXQUFBakIsQ0FDWWtCLEVBQ0FDLEdBREEsS0FBQUQsWUFBQUEsRUFDQSxLQUFBQywyQkFBQUEsQ0FDVCxDQUVHLE9BQUFDLENBQVFDLEVBQTJCQyxHLHFDQUNyQyxNQUFNLFFBQUVDLEdBQXNCRixFQUFWRyxFLHlVQUFLLENBQUtILEVBQXhCLGFBQ0FJLEVBQWNGLEdBQVdBLEVBQVFFLFlBRXZDLElBQUtGLElBQVlFLEVBQ2IsTUFBTSxJQUFJWixFQUE0QixDQUFDLDhCQUdyQ0wsS0FBS1csMkJBQTJCTyxZQUFZRixFQUFPRixHQUV6RCxVQUNVZCxLQUFLVywyQkFBMkJRLGNBQWMsT0FBRCx3QkFBTUosR0FBTyxDQUFFRSxnQixDQUNwRSxNQUFPRyxHQUNMLElDOUJXLENBQUNBLEdBQ0ksaUJBQVZBLEdBQWdDLE9BQVZBLEdBQWtCLFNBQVVBLEVEOEJuRCxDQUFlQSxJRXZCSixpQkFEZUMsRUZ5QkNELEVBQU1FLE9FeEJBLE9BQVZELEtBQWtCLCtCQUFnQ0EsS0Z5QnpFckIsS0FBS3VCLDRCQUE0QkgsRUFBTUUsTUFFeEMsT0FBT0UsUUFBUUMsT0FBT0wsR0FHMUIsTUFDSUUsTUFDSUksNEJBQ0lDLE1BQU0sYUFBRUMsTUFHaEJSLEVBR0osT0FBTyxJQUFJSSxRQUFRLEtBQ2Z4QixLQUFLNkIsWUFBWUQsSSxDRXpDMUIsSUFBb0NQLENGNkN2QyxFO2tCQUVBLFFBQUFTLEdBQ0ksT0FBT04sUUFBUUMsT0FBTyxJQUFJakIsRUFDOUIsQ0FFQSxVQUFBdUIsR0FDSSxPQUFPUCxRQUFRUSxTQUNuQixDQUVBLFlBQUFDLEdBQ0ksT0FBT1QsUUFBUVEsU0FDbkIsQ0FFVSxXQUFBSCxDQUFZRCxHQUNsQixPQUFPNUIsS0FBS1UsWUFBWXdCLFNBQVNOLEVBQWMsQ0FBQyxFQUNwRCxDQUVRLDJCQUFBTCxDQUE0QkQsR0FDaEMsTUFBTSwyQkFBRUksRUFBMEIsT0FBRVMsR0FBV2IsRUFFL0MsTUFDZSwrQkFBWGEsR0FDQVQsR0FDb0MscUJBQXBDQSxFQUEyQjdCLElBRW5DLEVHL0VXLE1BQU11QyxVQUE4QjNCLEVBQ3JDLFdBQUFvQixDQUFZUSxHQUNsQkMsT0FBT0MsU0FBU0MsUUFBUUgsRUFDNUIsRUNJSixNQUlBLEdDVklJLEVET0FDLEdBQ0MsSUFBSU4sRUFBc0JPLDBFQUFBQSxHQUFvQkQsR0NQL0NFLEVEUzJELENBQUMsQ0FBRUMsR0FBSSxXQ1AzRC9DLE9BQU9nRCxPQUFPTCxFQUFRLENBQUVHLGdCQUpwQixJQUNYSCxFQUNBRyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaW52YWxpZC1hcmd1bWVudC1lcnJvci50cz8zOTIxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL29yZGVyLWZpbmFsaXphdGlvbi1ub3QtcmVxdWlyZWQtZXJyb3IudHM/YjVhMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvZXh0ZXJuYWwtaW50ZWdyYXRpb24vc3JjL2V4dGVybmFsLXBheW1lbnQtc3RyYXRlZ3kudHM/MWI5MSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pcy1yZXF1ZXN0LWVycm9yLnRzP2I0M2QiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2V4dGVybmFsLWludGVncmF0aW9uL3NyYy9pcy1hZGRpdGlvbmFsLWFjdGlvbi50cz9mZWE0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zZXp6bGUtaW50ZWdyYXRpb24vc3JjL3NlenpsZS1wYXltZW50LXN0cmF0ZWd5LnRzPzA4NDQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3NlenpsZS1pbnRlZ3JhdGlvbi9zcmMvY3JlYXRlLXNlenpsZS1wYXltZW50LXN0cmF0ZWd5LnRzP2QxYTUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDdXN0b21FcnJvciBmcm9tICcuL2N1c3RvbS1lcnJvcic7XG5pbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSAnLi9zZXQtcHJvdG90eXBlLW9mJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHR5cGUgc2hvdWxkIG5vdCBiZSBjb25zdHJ1Y3RlZCBkaXJlY3RseS4gSXQgaXMgYSBiYXNlIGNsYXNzIGZvclxuICogYWxsIGN1c3RvbSBlcnJvcnMgdGhyb3duIGluIHRoaXMgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgQ3VzdG9tRXJyb3Ige1xuICAgIG5hbWUgPSAnU3RhbmRhcmRFcnJvcic7XG4gICAgdHlwZSA9ICdzdGFuZGFyZCc7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgICBpZiAodHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBuZXcudGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFjaztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKG9iamVjdDogYW55LCBwcm90b3R5cGU6IG9iamVjdCkge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iamVjdCwgcHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICAgIH1cblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIG1ldGhvZCBpcyB1bmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZVxuICogY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSBhcmd1bWVudHMgYWNjb3JkaW5nIHRvIHRoZWlyIHJlcXVpcmVtZW50cyxcbiAqIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdJbnZhbGlkIGFyZ3VtZW50cyBoYXZlIGJlZW4gcHJvdmlkZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ0ludmFsaWRBcmd1bWVudEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ2ludmFsaWRfYXJndW1lbnQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBJbnZhbGlkQXJndW1lbnRFcnJvciBmcm9tICcuL2ludmFsaWQtYXJndW1lbnQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHdlIGFyZSB1bmFibGUgdG8gc3VibWl0IGEgcGF5bWVudCBiZWNhdXNlXG4gKiB0aGUgY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSByZXF1aXJlZCBmaWVsZHMsIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzXG4gKiBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IgZXh0ZW5kcyBJbnZhbGlkQXJndW1lbnRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoaW52YWxpZEZpZWxkcz86IHN0cmluZ1tdKSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBmb3IgdGhlIG9yZGVyIGJlY2F1c2UgdGhlIHBheWxvYWQgaXMgaW52YWxpZC4nO1xuXG4gICAgICAgIGlmIChpbnZhbGlkRmllbGRzKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gYCR7bWVzc2FnZX0gTWFrZSBzdXJlIHRoZSBmb2xsb3dpbmcgZmllbGRzIGFyZSBwcm92aWRlZCBjb3JyZWN0bHk6ICR7aW52YWxpZEZpZWxkcy5qb2luKFxuICAgICAgICAgICAgICAgICcsICcsXG4gICAgICAgICAgICApfS5gO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5cbmltcG9ydCB7XG4gICAgaXNSZXF1ZXN0RXJyb3IsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IEFkZGl0aW9uYWxBY3Rpb25SZXF1aXJlZCwgaXNBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWQgfSBmcm9tICcuL2lzLWFkZGl0aW9uYWwtYWN0aW9uJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXh0ZXJuYWxQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIF9mb3JtUG9zdGVyOiBGb3JtUG9zdGVyLFxuICAgICAgICBwcml2YXRlIF9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHBheW1lbnQgJiYgcGF5bWVudC5wYXltZW50RGF0YTtcblxuICAgICAgICBpZiAoIXBheW1lbnQgfHwgIXBheW1lbnREYXRhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudC5wYXltZW50RGF0YSddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoeyAuLi5wYXltZW50LCBwYXltZW50RGF0YSB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhaXNSZXF1ZXN0RXJyb3IoZXJyb3IpIHx8XG4gICAgICAgICAgICAgICAgIWlzQWRkaXRpb25hbEFjdGlvblJlcXVpcmVkKGVycm9yLmJvZHkpIHx8XG4gICAgICAgICAgICAgICAgIXRoaXMuX2lzQWRkaXRpb25hbEFjdGlvblJlcXVpcmVkKGVycm9yLmJvZHkpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyByZWRpcmVjdF91cmwgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSA9IGVycm9yO1xuXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVkaXJlY3RVcmwocmVkaXJlY3RfdXJsKTtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgfSkgYXMgYW55O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgcmVkaXJlY3RVcmwocmVkaXJlY3RfdXJsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1Qb3N0ZXIucG9zdEZvcm0ocmVkaXJlY3RfdXJsLCB7fSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWQoYm9keTogQWRkaXRpb25hbEFjdGlvblJlcXVpcmVkKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHsgYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQsIHN0YXR1cyB9ID0gYm9keTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgc3RhdHVzID09PSAnYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQnICYmXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCAmJlxuICAgICAgICAgICAgYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQudHlwZSA9PT0gJ29mZnNpdGVfcmVkaXJlY3QnXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vLyBIYXZlIHRvIHVzZSBgYXNgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzczOTg3MDQ0L3R5cGVndWFyZGluZy1hbi11bmtub3duLW5lc3RlZC1vYmplY3Qgc2hvdWxkIGJlIGZpeGVkIGluIDQuOCtcbmNvbnN0IGlzUmVxdWVzdEVycm9yID0gKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVxdWVzdEVycm9yID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnYm9keScgaW4gZXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpc1JlcXVlc3RFcnJvcjtcbiIsImV4cG9ydCBpbnRlcmZhY2UgQWRkaXRpb25hbEFjdGlvblJlcXVpcmVkIHtcbiAgICBhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZDoge1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICByZWRpcmVjdF91cmw6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgIH07XG4gICAgc3RhdHVzOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0FkZGl0aW9uYWxBY3Rpb25SZXF1aXJlZCh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIEFkZGl0aW9uYWxBY3Rpb25SZXF1aXJlZCB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwgJiYgJ2FkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkJyBpbiB2YWx1ZTtcbn1cbiIsImltcG9ydCB7IEV4dGVybmFsUGF5bWVudFN0cmF0ZWd5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9leHRlcm5hbC1pbnRlZ3JhdGlvbic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlenpsZVBheW1lbnRTdHJhdGVneSBleHRlbmRzIEV4dGVybmFsUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcm90ZWN0ZWQgcmVkaXJlY3RVcmwodXJsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UodXJsKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcblxuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBTZXp6bGVQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9zZXp6bGUtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVNlenpsZVBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxTZXp6bGVQYXltZW50U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IG5ldyBTZXp6bGVQYXltZW50U3RyYXRlZ3koY3JlYXRlRm9ybVBvc3RlcigpLCBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVNlenpsZVBheW1lbnRTdHJhdGVneSwgW3sgaWQ6ICdzZXp6bGUnIH1dKTtcbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG1vZHVsZSwgeyByZXNvbHZlSWRzIH0pO1xufVxuIl0sIm5hbWVzIjpbIlN0YW5kYXJkRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInByb3RvdHlwZSIsInN1cGVyIiwibmFtZSIsInR5cGUiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInRoaXMiLCJfX3Byb3RvX18iLCJjYXB0dXJlU3RhY2tUcmFjZSIsInN0YWNrIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiam9pbiIsIk9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciIsIkV4dGVybmFsUGF5bWVudFN0cmF0ZWd5IiwiX2Zvcm1Qb3N0ZXIiLCJfcGF5bWVudEludGVncmF0aW9uU2VydmljZSIsImV4ZWN1dGUiLCJwYXlsb2FkIiwib3B0aW9ucyIsInBheW1lbnQiLCJvcmRlciIsInBheW1lbnREYXRhIiwic3VibWl0T3JkZXIiLCJzdWJtaXRQYXltZW50IiwiZXJyb3IiLCJ2YWx1ZSIsImJvZHkiLCJfaXNBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWQiLCJQcm9taXNlIiwicmVqZWN0IiwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQiLCJkYXRhIiwicmVkaXJlY3RfdXJsIiwicmVkaXJlY3RVcmwiLCJmaW5hbGl6ZSIsImluaXRpYWxpemUiLCJyZXNvbHZlIiwiZGVpbml0aWFsaXplIiwicG9zdEZvcm0iLCJzdGF0dXMiLCJTZXp6bGVQYXltZW50U3RyYXRlZ3kiLCJ1cmwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlcGxhY2UiLCJtb2R1bGUiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwiY3JlYXRlRm9ybVBvc3RlciIsInJlc29sdmVJZHMiLCJpZCIsImFzc2lnbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/sezzle.js\n\n}");

/***/ }),

/***/ "../checkout-sdk-js/dist/esm/integrations/td-bank.js":
/*!***********************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/td-bank.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTDOnlineMartPaymentStrategy: () => (/* binding */ I)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"../checkout-sdk-js/node_modules/@bigcommerce/form-poster/lib/index.js\");\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\nvar s,o;class a extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class d extends a{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class c extends d{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(s||(s={}));class u extends a{constructor(e){super(function(e){switch(e){case s.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case s.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case s.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case s.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case s.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case s.MissingCheckoutConfig:case s.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case s.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case s.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case s.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case s.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case s.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case s.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class l extends a{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}function h(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}function m(){const{navigator:e}=window;let t;return t=e.language?e.language:e.userLanguage,{color_depth:window.screen.colorDepth||24,java_enabled:\"function\"==typeof e.javaEnabled&&e.javaEnabled(),language:t,screen_height:window.screen.height,screen_width:window.screen.width,time_zone_offset:(new Date).getTimezoneOffset().toString()}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(o||(o={}));class p extends a{constructor(e){super(function(e){switch(e){case o.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case o.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case o.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case o.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}function g(e){return\"object\"==typeof e&&null!==e&&\"bigpayToken\"in e&&\"defaultInstrument\"in e&&\"provider\"in e&&\"trustedShippingAddress\"in e&&\"method\"in e&&\"type\"in e}var y;!function(e){e.CARD_NUMBER=\"card-number\",e.CVV=\"cvv\",e.EXPIRY=\"expiry\"}(y||(y={}));var b=function(e,t,n,i){return new(n||(n=Promise))(function(r,s){function o(e){try{d(i.next(e))}catch(e){s(e)}}function a(e){try{d(i.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}d((i=i.apply(e,t||[])).next())})};class f{constructor(e,t,n){this.paymentIntegrationService=e,this.tdOnlineMartScriptLoader=t,this.formPoster=n,this.tdInputs=[{id:\"ccNumber\",fieldType:y.CARD_NUMBER},{id:\"ccCvv\",fieldType:y.CVV},{id:\"ccExpiry\",fieldType:y.EXPIRY}]}initialize(e){return b(this,void 0,void 0,function*(){const{methodId:t}=e;if(!t)throw new d('Unable to initialize payment because \"options.methodId\" argument is not provided.');this.tdOnlineMartClient=yield this.loadTDOnlineMartJs(),this.mountHostedFields(t)})}execute(e,t){return b(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new c([\"payment\"]);if(!n.methodId)throw new u(s.MissingPaymentMethod);const r=yield this.getPaymentPayloadOrThrow(n);yield this.paymentIntegrationService.submitOrder(i,t);try{yield this.paymentIntegrationService.submitPayment(r)}catch(e){yield this.processWithAdditionalAction(e)}})}finalize(){return Promise.reject(new l)}deinitialize(){return this.tdOnlineMartClient=void 0,this.tdInputs.forEach(({inputElement:e})=>{null==e||e.unmount()}),Promise.resolve()}getPaymentPayloadOrThrow(e){return b(this,void 0,void 0,function*(){const{methodId:t,paymentData:n}=e,{shouldSaveInstrument:i=!1,shouldSetAsDefaultInstrument:r=!1}=h(n)?n:{},s={browser_info:m(),shouldSaveInstrument:i,shouldSetAsDefaultInstrument:r};if(h(n)&&Boolean(n.instrumentId)&&n.instrumentId){const e=!!this.paymentIntegrationService.getState().getCartOrThrow().lineItems.digitalItems.length,i=!this.isTrustedVaultingInstrument(n.instrumentId)||e;return{methodId:t,paymentData:Object.assign(Object.assign(Object.assign({},s),{instrumentId:n.instrumentId}),i?{nonce:n.instrumentId}:{})}}let o;try{o=yield this.getTokenOrThrow()}catch(e){this.throwTokenizationError(e)}return{methodId:t,paymentData:Object.assign(Object.assign({},s),{nonce:o})}})}mountHostedFields(e){const t=this.getHostedFieldsOptions(),n=this.getTDOnlineMartClientOrThrow();this.tdInputs.forEach(i=>{const r=`${e}-${i.id}`;document.getElementById(r)&&(i.inputElement=n.create(i.fieldType,t),i.inputElement.mount(`#${r}`))})}loadTDOnlineMartJs(){return b(this,void 0,void 0,function*(){return this.tdOnlineMartClient?this.tdOnlineMartClient:this.tdOnlineMartScriptLoader.load()})}getTokenOrThrow(){return new Promise((e,t)=>{this.getTDOnlineMartClientOrThrow().createToken(n=>{const{error:i,token:r}=n;if(i||!r)return t(i);e(r)})})}getTDOnlineMartClientOrThrow(){if(!this.tdOnlineMartClient)throw new p(o.PaymentNotInitialized);return this.tdOnlineMartClient}processWithAdditionalAction(e){return b(this,void 0,void 0,function*(){if(!function(e){return(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)&&(t=e.body,(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(t)&&\"object\"==typeof t&&\"errors\"in t&&\"three_ds_result\"in t&&(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isArray)(t.errors)&&(0,lodash__WEBPACK_IMPORTED_MODULE_2__.some)(t.errors,{code:\"three_d_secure_required\"}));// removed by dead control flow\n var t; }(e))throw e;const{three_ds_result:t}=e.body,{acs_url:s,payer_auth_request:o,merchant_data:a}=t||{};if(!s||!o||!a)throw new c([\"formUrl\",\"threeDSSessionData\",\"creq\"]);return new Promise(e=>{this.formPoster.postForm(s,{threeDSSessionData:o,creq:a},e,\"_top\")})})}throwTokenizationError(e){if(!function(e){return\"object\"==typeof e&&null!==e&&\"field\"in e&&\"type\"in e&&\"message\"in e}(e))throw new u(s.MissingPaymentToken);throw new Error(e.message)}getHostedFieldsOptions(){return{style:{error:{color:\"#d14343\"}},classes:{error:\"form-input--error\"}}}isTrustedVaultingInstrument(e){const t=this.paymentIntegrationService.getState().getInstruments(),n=null==t?void 0:t.find(t=>g(t)&&t.bigpayToken===e);return!(g(n)&&!n.trustedShippingAddress)}}class M extends a{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class v{constructor(e,t=window){this.scriptLoader=e,this.tdOnlineMartWindow=t}load(){return e=this,t=void 0,i=function*(){if(this.tdOnlineMartWindow.customcheckout||(yield this.scriptLoader.loadScript(\"https://libs.na.bambora.com/customcheckout/1/customcheckout.js\")),!this.tdOnlineMartWindow.customcheckout)throw new M;return this.tdOnlineMartWindow.customcheckout()},new((n=void 0)||(n=Promise))(function(r,s){function o(e){try{d(i.next(e))}catch(e){s(e)}}function a(e){try{d(i.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}d((i=i.apply(e,t||[])).next())});// removed by dead control flow\n var e, t, n, i; }}const I=(w=n=>new f(n,new v((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.getScriptLoader)()),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__.createFormPoster)()),O=[{id:\"tdonlinemart\"}],Object.assign(w,{resolveIds:O}));var w,O;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy90ZC1iYW5rLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ0EsSUNDWUEsRUNBQUMsRUNLRyxNQUFlQyxVQUFzQkMsTUFJaEQsV0FBQUMsQ0FBWUMsR0NYRCxJQUFxQ0MsRURZNUNDLE1BQU1GLEdBQVcscUNBSnJCLEtBQUFHLEtBQU8sZ0JBQ1AsS0FBQUMsS0FBTyxXQ1R5Q0gsYURjWkEsVUNiaENJLE9BQU9DLGVBQ1BELE9BQU9DLGVEWVFDLEtDWmVOLEdEWWZNLEtDVlJDLFVBQVlQLEVEWW9CLG1CQUE1QkgsTUFBTVcsa0JBQ2JYLE1BQU1XLGtCQUFrQkYsaUJBRXhCQSxLQUFLRyxNQUFRLElBQUlaLE1BQU1TLEtBQUtQLFNBQVNVLEtBRTdDLEVFZFcsTUFBTUMsVUFBNkJkLEVBQzlDLFdBQUFFLENBQVlDLEdBQ1JFLE1BQU1GLEdBQVcseUNBRWpCTyxLQUFLSixLQUFPLHVCQUNaSSxLQUFLSCxLQUFPLGtCQUNoQixFQ05XLE1BQU1RLFVBQW9DRCxFQUNyRCxXQUFBWixDQUFZYyxHQUNSLElBQUliLEVBQVUseUVBRVZhLElBQ0FiLEVBQVUsR0FBR0EsNERBQWtFYSxFQUFjQyxLQUN6RixVQUlSWixNQUFNRixHQUVOTyxLQUFLSixLQUFPLDZCQUNoQixHTGxCSixTQUFZUixHQUNSLHFEQUNBLGlDQUNBLHlDQUNBLGlEQUNBLHlDQUNBLHFEQUNBLG1DQUNBLCtDQUNBLHVDQUNBLHVDQUNBLDRDQUNBLDREQUNBLG9EQUNBLDhEQUNBLG9EQUNBLGtEQUNBLHVEQUNILENBbEJELENBQVlBLElBQUFBLEVBQW9CLEtBeUJqQixNQUFNb0IsVUFBeUJsQixFQUMxQyxXQUFBRSxDQUFtQmlCLEdBQ2ZkLE1BT1IsU0FBeUJFLEdBQ3JCLE9BQVFBLEdBQ0osS0FBS1QsRUFBcUJzQixzQkFDdEIsTUFBTyxpRUFFWCxLQUFLdEIsRUFBcUJ1QixZQUN0QixNQUFPLHNEQUVYLEtBQUt2QixFQUFxQndCLG9C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Q0EsRUFBZUcsdUJBSXpCLEVLblFXLE1BQU1DLFVBQTRDMUosRUFDN0QsV0FBQUUsQ0FBWUMsR0FDUkUsTUFDSUYsR0FDSSx1R0FHUk8sS0FBS0osS0FBTyxzQ0FDWkksS0FBS0gsS0FBTyxtQ0FDaEIsRUNUVyxNQUFNb0osRUFDakIsV0FBQXpKLENBQ1kwSixFQUNBQyxFQUE2Q3BILFFBRDdDLEtBQUFtSCxhQUFBQSxFQUNBLEtBQUFDLG1CQUFBQSxDQUNULENBRUcsSUFBQWxDLEcscUNBT0YsR0FOS2pILEtBQUttSixtQkFBbUJDLHVCQUNuQnBKLEtBQUtrSixhQUFhRyxXQUNwQixvRUFJSHJKLEtBQUttSixtQkFBbUJDLGVBQ3pCLE1BQU0sSUFBSUosRUFHZCxPQUFPaEosS0FBS21KLG1CQUFtQkMsZ0JBQ25DLEU7bUJDYkosTUFVQSxHQ2xCSUUsRURTQS9GLEdBRU8sSUFBSUQsRUFDUEMsRUFDQSxJQUFJMEYsRUFBeUJNLDJFQUFBQSxJQUM3QkMsMEVBQUFBLElDYkpDLEVEaUJpRSxDQUFDLENBQUU5RixHQUFJLGlCQ2ZqRTdELE9BQU80SixPQUFPSixFQUFRLENBQUVHLGdCQUpwQixJQUNYSCxFQUNBRyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL2Jvb3RzdHJhcD9mZmNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL21pc3NpbmctZGF0YS1lcnJvci50cz9iN2RjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL25vdC1pbml0aWFsaXplZC1lcnJvci50cz84YjRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3N0YW5kYXJkLWVycm9yLnRzPzhhMDMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc2V0LXByb3RvdHlwZS1vZi50cz84NDVhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2ludmFsaWQtYXJndW1lbnQtZXJyb3IudHM/MzkyMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LWFyZ3VtZW50LWludmFsaWQtZXJyb3IudHM/YTUwMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9vcmRlci1maW5hbGl6YXRpb24tbm90LXJlcXVpcmVkLWVycm9yLnRzP2I1YTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L2lzLWhvc3RlZC1pbnRydW1lbnQtbGlrZS50cz84NzYzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL2Jyb3dzZXItaW5mby9nZXQtYnJvd3Nlci1pbmZvLnRzPzhiYTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3V0aWxpdHkvc3JjL2lzLWJhc2UtaW5zdHJ1bWVudC9pcy1iYXNlLWluc3RydW1lbnQudHM/ZTkyZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdGQtYmFuay1pbnRlZ3JhdGlvbi9zcmMvdGQtb25saW5lLW1hcnQudHM/MDE2MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdGQtYmFuay1pbnRlZ3JhdGlvbi9zcmMvdGQtb25saW5lLW1hcnQtcGF5bWVudC1zdHJhdGVneS50cz9hZTQ3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy12YXVsdGVkLWluc3RydW1lbnQudHM/MTgwZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdGQtYmFuay1pbnRlZ3JhdGlvbi9zcmMvaXNUZE9ubGluZU1hcnRBZGRpdGlvbmFsQWN0aW9uLnRzPzMwMzIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaXMtcmVxdWVzdC1lcnJvci50cz9iNDNkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy90ZC1iYW5rLWludGVncmF0aW9uL3NyYy9pcy1jcmVhdGUtdG9rZW4tZXJyb3IudHM/ZTQ5MyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1jbGllbnQtdW5hdmFpbGFibGUtZXJyb3IudHM/ZjhlYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdGQtYmFuay1pbnRlZ3JhdGlvbi9zcmMvdGQtb25saW5lLW1hcnQtc2NyaXB0LWxvYWRlci50cz85MzM2Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy90ZC1iYW5rLWludGVncmF0aW9uL3NyYy9jcmVhdGUtdGQtb25saW5lLW1hcnQtcGF5bWVudC1zdHJhdGVneS50cz9kZTQ0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvdG8tcmVzb2x2YWJsZS1tb2R1bGUudHM/ZDUyMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE1pc3NpbmdEYXRhRXJyb3JUeXBlIHtcbiAgICBNaXNzaW5nQmlsbGluZ0FkZHJlc3MsXG4gICAgTWlzc2luZ0NhcnQsXG4gICAgTWlzc2luZ0NoZWNrb3V0LFxuICAgIE1pc3NpbmdDb25zaWdubWVudHMsXG4gICAgTWlzc2luZ0N1c3RvbWVyLFxuICAgIE1pc3NpbmdDaGVja291dENvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXIsXG4gICAgTWlzc2luZ09yZGVyQ29uZmlnLFxuICAgIE1pc3NpbmdPcmRlcklkLFxuICAgIE1pc3NpbmdQYXltZW50LFxuICAgIE1pc3NpbmdQYXltZW50SWQsXG4gICAgTWlzc2luZ1BheW1lbnRJbnN0cnVtZW50LFxuICAgIE1pc3NpbmdQYXltZW50TWV0aG9kLFxuICAgIE1pc3NpbmdQYXltZW50UmVkaXJlY3RVcmwsXG4gICAgTWlzc2luZ1BheW1lbnRTdGF0dXMsXG4gICAgTWlzc2luZ1BheW1lbnRUb2tlbixcbiAgICBNaXNzaW5nU2hpcHBpbmdBZGRyZXNzLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3Igd2hlbiBkYXRhIHRoYXQgaXMgZXhwZWN0ZWQgdG8gZXhpc3QgaXMgbWlzc2luZy4gVXN1YWxseSBpdFxuICogaXMgZHVlIHRvIHRoZSBmYWN0IHRoYXQgY2VydGFpbiBkYXRhIGhhcyBub3QgYmVlbiByZXRyaWV2ZWQgZnJvbSBvciBzYXZlZCB0b1xuICogdGhlIHNlcnZlciB5ZXQuIEFuZCBzdWNoIGRhdGEgaXMgcmVxdWlyZWQgdG8gcGVyZm9ybSBjZXJ0YWluIGFjdGlvbnMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pc3NpbmdEYXRhRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTWlzc2luZ0RhdGFFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTWlzc2luZ0RhdGFFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdtaXNzaW5nX2RhdGEnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgYmlsbGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDYXJ0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNhcnQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NvbnNpZ25tZW50czpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25zaWdubWVudHMgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNoZWNrb3V0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDdXN0b21lcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjdXN0b21lciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXRDb25maWc6XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyQ29uZmlnOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbmZpZ3VyYXRpb24gZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIElEIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBnZW5lcmF0ZWQgeWV0Lic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50VG9rZW46XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHRva2VuIHJlcXVpcmVkIHRvIHN1Ym1pdCBhIHBheW1lbnQgaXMgbWlzc2luZy4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2Q6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBtZXRob2QgZGF0YSBpcyB1bmF2YWlsYWJsZSBvciBub3QgcHJvcGVybHkgY29uZmlndXJlZC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1NoaXBwaW5nQWRkcmVzczpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBzaGlwcGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlIHtcbiAgICBDaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkLFxuICAgIEN1c3RvbWVyTm90SW5pdGlhbGl6ZWQsXG4gICAgUGF5bWVudE5vdEluaXRpYWxpemVkLFxuICAgIFNoaXBwaW5nTm90SW5pdGlhbGl6ZWQsXG4gICAgU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIGEgbWV0aG9kIHJlcXVpcmVzIGEgY2VydGFpbiBpbml0aWFsaXphdGlvbiBjYWxsIHRvIGJlXG4gKiBtYWRlIGZpcnN0LiBTb21lIG9iamVjdHMgY2FuIGJlIGNvbnN0cnVjdGVkIGJ1dCB0aGV5IGNhbm5vdCBiZSB1c2VkIHVudGlsIGFcbiAqIHNlcGFyYXRlIGluaXRpYWxpemF0aW9uIGNhbGwgaXMgbWFkZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW5pdGlhbGl6ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbml0aWFsaXplZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbml0aWFsaXplZCc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGN1c3RvbWVyIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHNoaXBwaW5nIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjaGVja291dCBzcGFtIHByb3RlY3Rpb24gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBDdXN0b21FcnJvciBmcm9tICcuL2N1c3RvbS1lcnJvcic7XG5pbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSAnLi9zZXQtcHJvdG90eXBlLW9mJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHR5cGUgc2hvdWxkIG5vdCBiZSBjb25zdHJ1Y3RlZCBkaXJlY3RseS4gSXQgaXMgYSBiYXNlIGNsYXNzIGZvclxuICogYWxsIGN1c3RvbSBlcnJvcnMgdGhyb3duIGluIHRoaXMgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgQ3VzdG9tRXJyb3Ige1xuICAgIG5hbWUgPSAnU3RhbmRhcmRFcnJvcic7XG4gICAgdHlwZSA9ICdzdGFuZGFyZCc7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgICBpZiAodHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBuZXcudGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFjaztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKG9iamVjdDogYW55LCBwcm90b3R5cGU6IG9iamVjdCkge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iamVjdCwgcHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICAgIH1cblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIG1ldGhvZCBpcyB1bmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZVxuICogY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSBhcmd1bWVudHMgYWNjb3JkaW5nIHRvIHRoZWlyIHJlcXVpcmVtZW50cyxcbiAqIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdJbnZhbGlkIGFyZ3VtZW50cyBoYXZlIGJlZW4gcHJvdmlkZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ0ludmFsaWRBcmd1bWVudEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ2ludmFsaWRfYXJndW1lbnQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBJbnZhbGlkQXJndW1lbnRFcnJvciBmcm9tICcuL2ludmFsaWQtYXJndW1lbnQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHdlIGFyZSB1bmFibGUgdG8gc3VibWl0IGEgcGF5bWVudCBiZWNhdXNlXG4gKiB0aGUgY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSByZXF1aXJlZCBmaWVsZHMsIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzXG4gKiBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IgZXh0ZW5kcyBJbnZhbGlkQXJndW1lbnRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoaW52YWxpZEZpZWxkcz86IHN0cmluZ1tdKSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBmb3IgdGhlIG9yZGVyIGJlY2F1c2UgdGhlIHBheWxvYWQgaXMgaW52YWxpZC4nO1xuXG4gICAgICAgIGlmIChpbnZhbGlkRmllbGRzKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gYCR7bWVzc2FnZX0gTWFrZSBzdXJlIHRoZSBmb2xsb3dpbmcgZmllbGRzIGFyZSBwcm92aWRlZCBjb3JyZWN0bHk6ICR7aW52YWxpZEZpZWxkcy5qb2luKFxuICAgICAgICAgICAgICAgICcsICcsXG4gICAgICAgICAgICApfS5gO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSG9zdGVkSW5zdHJ1bWVudCB9IGZyb20gJy4vcGF5bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UoXG4gICAgaW5zdHJ1bWVudDogdW5rbm93bixcbik6IGluc3RydW1lbnQgaXMgSG9zdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGluc3RydW1lbnQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGluc3RydW1lbnQgIT09IG51bGwgJiZcbiAgICAgICAgKHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKSAmJlxuICAgICAgICAodHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKVxuICAgICk7XG59XG4iLCJpbXBvcnQgQnJvd3NlckluZm8gZnJvbSAnLi9icm93c2VyLWluZm8nO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRCcm93c2VySW5mbygpOiBCcm93c2VySW5mbyB7XG4gICAgY29uc3QgeyBuYXZpZ2F0b3IgfSA9IHdpbmRvdztcblxuICAgIGxldCBsYW5ndWFnZTogc3RyaW5nO1xuXG4gICAgaWYgKG5hdmlnYXRvci5sYW5ndWFnZSkge1xuICAgICAgICBsYW5ndWFnZSA9IG5hdmlnYXRvci5sYW5ndWFnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBsYW5ndWFnZSA9IChuYXZpZ2F0b3IgYXMgYW55KS51c2VyTGFuZ3VhZ2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29sb3JfZGVwdGg6IHdpbmRvdy5zY3JlZW4uY29sb3JEZXB0aCB8fCAyNCxcbiAgICAgICAgamF2YV9lbmFibGVkOiB0eXBlb2YgbmF2aWdhdG9yLmphdmFFbmFibGVkID09PSAnZnVuY3Rpb24nID8gbmF2aWdhdG9yLmphdmFFbmFibGVkKCkgOiBmYWxzZSxcbiAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgIHNjcmVlbl9oZWlnaHQ6IHdpbmRvdy5zY3JlZW4uaGVpZ2h0LFxuICAgICAgICBzY3JlZW5fd2lkdGg6IHdpbmRvdy5zY3JlZW4ud2lkdGgsXG4gICAgICAgIHRpbWVfem9uZV9vZmZzZXQ6IG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKS50b1N0cmluZygpLFxuICAgIH07XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIEJhc2VJbnN0cnVtZW50IHtcbiAgICBiaWdwYXlUb2tlbjogc3RyaW5nO1xuICAgIGRlZmF1bHRJbnN0cnVtZW50OiBib29sZWFuO1xuICAgIHByb3ZpZGVyOiBzdHJpbmc7XG4gICAgdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczogYm9vbGVhbjtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2VJbnN0cnVtZW50KGluc3RydW1lbnQ6IHVua25vd24pOiBpbnN0cnVtZW50IGlzIEJhc2VJbnN0cnVtZW50IHtcbiAgICBpZiAodHlwZW9mIGluc3RydW1lbnQgIT09ICdvYmplY3QnIHx8IGluc3RydW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgICdiaWdwYXlUb2tlbicgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAnZGVmYXVsdEluc3RydW1lbnQnIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ3Byb3ZpZGVyJyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICd0cnVzdGVkU2hpcHBpbmdBZGRyZXNzJyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICdtZXRob2QnIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ3R5cGUnIGluIGluc3RydW1lbnRcbiAgICApO1xufVxuIiwiaW1wb3J0IHsgUmVxdWVzdEVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGRPbmxpbmVNYXJ0SG9zdFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgY3VzdG9tY2hlY2tvdXQ/KCk6IFREQ3VzdG9tQ2hlY2tvdXRTREs7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVERDdXN0b21DaGVja291dFNESyB7XG4gICAgY3JlYXRlKGZpZWxkVHlwZTogRmllbGRUeXBlLCBvcHRpb25zPzogRmllbGRPcHRpb25zKTogVGRPbmxpbmVNYXJ0RWxlbWVudDtcbiAgICBjcmVhdGVUb2tlbihjYWxsYmFjazogKHJlc3VsdDogQ3JlYXRlVG9rZW5SZXNwb25zZSkgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGRPbmxpbmVNYXJ0RWxlbWVudCB7XG4gICAgbW91bnQoY3NzU2VsZWN0b3I6IHN0cmluZyk6IHZvaWQ7XG4gICAgdW5tb3VudCgpOiB2b2lkO1xufVxuXG5leHBvcnQgZW51bSBGaWVsZFR5cGUge1xuICAgIENBUkRfTlVNQkVSID0gJ2NhcmQtbnVtYmVyJyxcbiAgICBDVlYgPSAnY3Z2JyxcbiAgICBFWFBJUlkgPSAnZXhwaXJ5Jyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBURE9ubGluZU1hcnRJbnB1dCB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBmaWVsZFR5cGU6IEZpZWxkVHlwZTtcbiAgICBpbnB1dEVsZW1lbnQ/OiBUZE9ubGluZU1hcnRFbGVtZW50O1xufVxuXG5pbnRlcmZhY2UgQ3JlYXRlVG9rZW5SZXNwb25zZSB7XG4gICAgY29kZTogc3RyaW5nO1xuICAgIGVycm9yPzogQ3JlYXRlVG9rZW5FcnJvcjtcbiAgICB0b2tlbj86IHN0cmluZztcbiAgICBsYXN0ND86IHN0cmluZztcbiAgICBleHBpcnlNb250aD86IHN0cmluZztcbiAgICBleHBpcnlZZWFyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZVRva2VuRXJyb3Ige1xuICAgIGZpZWxkOiBzdHJpbmc7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbn1cblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG5leHBvcnQgaW50ZXJmYWNlIFRkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHkge1xuICAgIGVycm9ycz86IEFycmF5PHsgY29kZTogc3RyaW5nIH0+O1xuICAgIHRocmVlX2RzX3Jlc3VsdD86IHtcbiAgICAgICAgYWNzX3VybDogc3RyaW5nO1xuICAgICAgICBwYXllcl9hdXRoX3JlcXVlc3Q6IHN0cmluZztcbiAgICAgICAgbWVyY2hhbnRfZGF0YTogc3RyaW5nO1xuICAgIH07XG59XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvbiAqL1xuXG5leHBvcnQgdHlwZSBUZE9ubGluZU1hcnRBZGRpdGlvbmFsQWN0aW9uID0gUmVxdWVzdEVycm9yPFRkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHk+O1xuXG4vLyBOb3RlOiBUaGUgc3R5bGUgcHJvcGVydHkgYWZmZWN0cyB0aGUgcmVtb3RlIHN0eWxpbmcgb2YgdGV4dCBpbnNpZGUgdGhlIGlmcmFtZSBpbnB1dC4gVGhlIGNsYXNzZXMgcHJvcGVydHkgdXBkYXRlcyB0aGUgY2xhc3MgbGlzdCBvZiB0aGUgZWxlbWVudCB0aGUgZmllbGQgaXMgbW91bnRlZCB0byBvbiB5b3VyIHBhZ2UuXG5pbnRlcmZhY2UgRmllbGRPcHRpb25zIHtcbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgICBzdHlsZT86IFN0eWxlcztcbiAgICBjbGFzc2VzPzogQ2xhc3NlcztcbiAgICBicmFuZHM/OiBzdHJpbmdbXTtcbn1cblxuaW50ZXJmYWNlIENsYXNzZXMge1xuICAgIGJhc2U/OiBzdHJpbmc7XG4gICAgY29tcGxldGU/OiBzdHJpbmc7XG4gICAgZW1wdHk/OiBzdHJpbmc7XG4gICAgZm9jdXM/OiBzdHJpbmc7XG4gICAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBTdHlsZXMge1xuICAgIGJhc2U/OiBDc3NTdHlsZXM7XG4gICAgY29tcGxldGU/OiBDc3NTdHlsZXM7XG4gICAgZW1wdHk/OiBDc3NTdHlsZXM7XG4gICAgZXJyb3I/OiBDc3NTdHlsZXM7XG59XG5cbmludGVyZmFjZSBDc3NTdHlsZXMge1xuICAgIGNvbG9yPzogc3RyaW5nO1xuICAgIGZvbnRGYW1pbHk/OiBzdHJpbmc7XG4gICAgZm9udFNpemU/OiBzdHJpbmc7XG4gICAgZm9udFN0eWxlPzogc3RyaW5nO1xuICAgIGZvbnRXZWlnaHQ/OiBzdHJpbmc7XG4gICAgdGV4dERlY29yYXRpb24/OiBzdHJpbmc7XG4gICAgcGFkZGluZz86IHN0cmluZztcbiAgICBwYWRkaW5nTGVmdD86IHN0cmluZztcbiAgICBwYWRkaW5nVG9wPzogc3RyaW5nO1xuICAgIHBhZGRpbmdSaWdodD86IHN0cmluZztcbiAgICBwYWRkaW5nQm90dG9tPzogc3RyaW5nO1xufVxuIiwiaW1wb3J0IHsgRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5cbmltcG9ydCB7XG4gICAgZ2V0QnJvd3NlckluZm8sXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBpc0Jhc2VJbnN0cnVtZW50IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcblxuaW1wb3J0IGlzQ3JlYXRlVG9rZW5FcnJvciBmcm9tICcuL2lzLWNyZWF0ZS10b2tlbi1lcnJvcic7XG5pbXBvcnQgeyBpc1RkT25saW5lTWFydEFkZGl0aW9uYWxBY3Rpb24gfSBmcm9tICcuL2lzVGRPbmxpbmVNYXJ0QWRkaXRpb25hbEFjdGlvbic7XG5pbXBvcnQge1xuICAgIEZpZWxkVHlwZSxcbiAgICBUREN1c3RvbUNoZWNrb3V0U0RLLFxuICAgIFRET25saW5lTWFydElucHV0LFxuICAgIFRkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHksXG59IGZyb20gJy4vdGQtb25saW5lLW1hcnQnO1xuaW1wb3J0IFRET25saW5lTWFydFNjcmlwdExvYWRlciBmcm9tICcuL3RkLW9ubGluZS1tYXJ0LXNjcmlwdC1sb2FkZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBURE9ubGluZU1hcnRQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgdGRPbmxpbmVNYXJ0Q2xpZW50PzogVERDdXN0b21DaGVja291dFNESztcbiAgICBwcml2YXRlIHRkSW5wdXRzOiBURE9ubGluZU1hcnRJbnB1dFtdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2NjTnVtYmVyJyxcbiAgICAgICAgICAgIGZpZWxkVHlwZTogRmllbGRUeXBlLkNBUkRfTlVNQkVSLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2NjQ3Z2JyxcbiAgICAgICAgICAgIGZpZWxkVHlwZTogRmllbGRUeXBlLkNWVixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdjY0V4cGlyeScsXG4gICAgICAgICAgICBmaWVsZFR5cGU6IEZpZWxkVHlwZS5FWFBJUlksXG4gICAgICAgIH0sXG4gICAgXTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgdGRPbmxpbmVNYXJ0U2NyaXB0TG9hZGVyOiBURE9ubGluZU1hcnRTY3JpcHRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUgZm9ybVBvc3RlcjogRm9ybVBvc3RlcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudGRPbmxpbmVNYXJ0Q2xpZW50ID0gYXdhaXQgdGhpcy5sb2FkVERPbmxpbmVNYXJ0SnMoKTtcblxuICAgICAgICB0aGlzLm1vdW50SG9zdGVkRmllbGRzKG1ldGhvZElkKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXltZW50Lm1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IGF3YWl0IHRoaXMuZ2V0UGF5bWVudFBheWxvYWRPclRocm93KHBheW1lbnQpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc1dpdGhBZGRpdGlvbmFsQWN0aW9uKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMudGRPbmxpbmVNYXJ0Q2xpZW50ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMudGRJbnB1dHMuZm9yRWFjaCgoeyBpbnB1dEVsZW1lbnQgfTogVERPbmxpbmVNYXJ0SW5wdXQpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudD8udW5tb3VudCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRQYXltZW50UGF5bG9hZE9yVGhyb3cocGF5bWVudDogT3JkZXJQYXltZW50UmVxdWVzdEJvZHkpIHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5bWVudERhdGEgfSA9IHBheW1lbnQ7XG4gICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlIH0gPVxuICAgICAgICAgICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSkgPyBwYXltZW50RGF0YSA6IHt9O1xuICAgICAgICBjb25zdCBjb21tb25QYXltZW50RGF0YSA9IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgICAgICAgICAgIGJyb3dzZXJfaW5mbzogZ2V0QnJvd3NlckluZm8oKSxcbiAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlKHBheW1lbnREYXRhKSAmJlxuICAgICAgICAgICAgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkgJiZcbiAgICAgICAgICAgIHBheW1lbnREYXRhLmluc3RydW1lbnRJZFxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IGNhcnQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgZGlnaXRhbEl0ZW1zSW5DYXJ0ID0gISFjYXJ0LmxpbmVJdGVtcy5kaWdpdGFsSXRlbXMubGVuZ3RoO1xuXG4gICAgICAgICAgICBjb25zdCBzaG91bGRBZGRWZXJpZmljYXRpb25Ub2tlbiA9XG4gICAgICAgICAgICAgICAgIXRoaXMuaXNUcnVzdGVkVmF1bHRpbmdJbnN0cnVtZW50KHBheW1lbnREYXRhLmluc3RydW1lbnRJZCkgfHwgZGlnaXRhbEl0ZW1zSW5DYXJ0O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmNvbW1vblBheW1lbnREYXRhLFxuICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQ6IHBheW1lbnREYXRhLmluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgLi4uKHNob3VsZEFkZFZlcmlmaWNhdGlvblRva2VuID8geyBub25jZTogcGF5bWVudERhdGEuaW5zdHJ1bWVudElkIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbm9uY2U6IHN0cmluZztcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbm9uY2UgPSBhd2FpdCB0aGlzLmdldFRva2VuT3JUaHJvdygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy50aHJvd1Rva2VuaXphdGlvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgLi4uY29tbW9uUGF5bWVudERhdGEsXG4gICAgICAgICAgICAgICAgbm9uY2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgbW91bnRIb3N0ZWRGaWVsZHMobWV0aG9kSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5nZXRIb3N0ZWRGaWVsZHNPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IHRkT25saW5lTWFydENsaWVudCA9IHRoaXMuZ2V0VERPbmxpbmVNYXJ0Q2xpZW50T3JUaHJvdygpO1xuXG4gICAgICAgIHRoaXMudGRJbnB1dHMuZm9yRWFjaCgoaW5wdXQ6IFRET25saW5lTWFydElucHV0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dElkID0gYCR7bWV0aG9kSWR9LSR7aW5wdXQuaWR9YDtcblxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbnB1dElkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5wdXQuaW5wdXRFbGVtZW50ID0gdGRPbmxpbmVNYXJ0Q2xpZW50LmNyZWF0ZShpbnB1dC5maWVsZFR5cGUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaW5wdXQuaW5wdXRFbGVtZW50Lm1vdW50KGAjJHtpbnB1dElkfWApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRURE9ubGluZU1hcnRKcygpOiBQcm9taXNlPFREQ3VzdG9tQ2hlY2tvdXRTREs+IHtcbiAgICAgICAgaWYgKHRoaXMudGRPbmxpbmVNYXJ0Q2xpZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZE9ubGluZU1hcnRDbGllbnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy50ZE9ubGluZU1hcnRTY3JpcHRMb2FkZXIubG9hZCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VG9rZW5PclRocm93KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmdldFRET25saW5lTWFydENsaWVudE9yVGhyb3coKS5jcmVhdGVUb2tlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBlcnJvciwgdG9rZW4gfSA9IHJlc3VsdDtcblxuICAgICAgICAgICAgICAgIGlmIChlcnJvciB8fCAhdG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0b2tlbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRURE9ubGluZU1hcnRDbGllbnRPclRocm93KCk6IFREQ3VzdG9tQ2hlY2tvdXRTREsge1xuICAgICAgICBpZiAoIXRoaXMudGRPbmxpbmVNYXJ0Q2xpZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudGRPbmxpbmVNYXJ0Q2xpZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1dpdGhBZGRpdGlvbmFsQWN0aW9uKGVycm9yOiB1bmtub3duKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICghaXNUZE9ubGluZU1hcnRBZGRpdGlvbmFsQWN0aW9uKGVycm9yKSkge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IHRocmVlX2RzX3Jlc3VsdDogdGhyZWVEU1Jlc3VsdCB9OiBUZE9ubGluZU1hcnRUaHJlZURTRXJyb3JCb2R5ID0gZXJyb3IuYm9keTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYWNzX3VybDogZm9ybVVybCxcbiAgICAgICAgICAgIHBheWVyX2F1dGhfcmVxdWVzdDogdGhyZWVEU1Nlc3Npb25EYXRhLFxuICAgICAgICAgICAgbWVyY2hhbnRfZGF0YTogY3JlcSxcbiAgICAgICAgfSA9IHRocmVlRFNSZXN1bHQgfHwge307XG5cbiAgICAgICAgaWYgKCFmb3JtVXJsIHx8ICF0aHJlZURTU2Vzc2lvbkRhdGEgfHwgIWNyZXEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydmb3JtVXJsJywgJ3RocmVlRFNTZXNzaW9uRGF0YScsICdjcmVxJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZvcm1Qb3N0ZXIucG9zdEZvcm0oXG4gICAgICAgICAgICAgICAgZm9ybVVybCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRocmVlRFNTZXNzaW9uRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY3JlcSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgJ190b3AnLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0aHJvd1Rva2VuaXphdGlvbkVycm9yKGVycm9yOiB1bmtub3duKTogbmV2ZXIge1xuICAgICAgICBpZiAoIWlzQ3JlYXRlVG9rZW5FcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50VG9rZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SG9zdGVkRmllbGRzT3B0aW9ucygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSB7XG4gICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnI2QxNDM0MycsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGNsYXNzZXMgPSB7XG4gICAgICAgICAgICBlcnJvcjogJ2Zvcm0taW5wdXQtLWVycm9yJyxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3R5bGUsXG4gICAgICAgICAgICBjbGFzc2VzLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNUcnVzdGVkVmF1bHRpbmdJbnN0cnVtZW50KGluc3RydW1lbnRJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGluc3RydW1lbnRzID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0SW5zdHJ1bWVudHMoKTtcblxuICAgICAgICBjb25zdCBmaW5kSW5zdHJ1bWVudCA9IGluc3RydW1lbnRzPy5maW5kKFxuICAgICAgICAgICAgKGluc3RydW1lbnQpID0+IGlzQmFzZUluc3RydW1lbnQoaW5zdHJ1bWVudCkgJiYgaW5zdHJ1bWVudC5iaWdwYXlUb2tlbiA9PT0gaW5zdHJ1bWVudElkLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB0cnVzdGVkU2hpcHBpbmdBZGRyZXNzID0gaXNCYXNlSW5zdHJ1bWVudChmaW5kSW5zdHJ1bWVudClcbiAgICAgICAgICAgID8gZmluZEluc3RydW1lbnQudHJ1c3RlZFNoaXBwaW5nQWRkcmVzc1xuICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICByZXR1cm4gISF0cnVzdGVkU2hpcHBpbmdBZGRyZXNzO1xuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgRm9ybWF0dGVkUGF5bG9hZCxcbiAgICBGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJy4vcGF5bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIEJvb2xlYW4oKGluc3RydW1lbnQgYXMgVmF1bHRlZEluc3RydW1lbnQpLmluc3RydW1lbnRJZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0hvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQge1xuICAgIHJldHVybiAoXG4gICAgICAgIEJvb2xlYW4oKGluc3RydW1lbnQgYXMgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQpLmluc3RydW1lbnRJZCkgJiZcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0cnVtZW50LCAnY2NOdW1iZXInKSAmJlxuICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RydW1lbnQsICdjY0N2dicpXG4gICAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBGb3JtYXR0ZWRQYXlsb2FkPEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50PiB7XG4gICAgY29uc3QgZm9ybWF0dGVkSW5zdHJ1bWVudCA9IChpbnN0cnVtZW50IGFzIEZvcm1hdHRlZFBheWxvYWQ8Rm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQ+KVxuICAgICAgICAuZm9ybWF0dGVkUGF5bG9hZDtcblxuICAgIGlmICghZm9ybWF0dGVkSW5zdHJ1bWVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuID09PSAnc3RyaW5nJyB8fFxuICAgICAgICBCb29sZWFuKGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuICYmIGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuLnRva2VuKVxuICAgICk7XG59XG4iLCJpbXBvcnQgeyBpc0FycmF5LCBpc09iamVjdCwgc29tZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7IGlzUmVxdWVzdEVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IFRkT25saW5lTWFydEFkZGl0aW9uYWxBY3Rpb24sIFRkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHkgfSBmcm9tICcuL3RkLW9ubGluZS1tYXJ0JztcblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zICovXG5mdW5jdGlvbiBpc1RkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHkoXG4gICAgZXJyb3JCb2R5OiB1bmtub3duLFxuKTogZXJyb3JCb2R5IGlzIFRkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHkge1xuICAgIHJldHVybiAoXG4gICAgICAgIGlzT2JqZWN0KGVycm9yQm9keSkgJiZcbiAgICAgICAgdHlwZW9mIGVycm9yQm9keSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgJ2Vycm9ycycgaW4gZXJyb3JCb2R5ICYmXG4gICAgICAgICd0aHJlZV9kc19yZXN1bHQnIGluIGVycm9yQm9keSAmJlxuICAgICAgICBpc0FycmF5KChlcnJvckJvZHkgYXMgVGRPbmxpbmVNYXJ0VGhyZWVEU0Vycm9yQm9keSkuZXJyb3JzKSAmJlxuICAgICAgICBzb21lKChlcnJvckJvZHkgYXMgVGRPbmxpbmVNYXJ0VGhyZWVEU0Vycm9yQm9keSkuZXJyb3JzLCB7XG4gICAgICAgICAgICBjb2RlOiAndGhyZWVfZF9zZWN1cmVfcmVxdWlyZWQnLFxuICAgICAgICB9KVxuICAgICk7XG59XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtYXNzZXJ0aW9ucyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaXNUZE9ubGluZU1hcnRBZGRpdGlvbmFsQWN0aW9uKFxuICAgIGVycm9yOiB1bmtub3duLFxuKTogZXJyb3IgaXMgVGRPbmxpbmVNYXJ0QWRkaXRpb25hbEFjdGlvbiB7XG4gICAgcmV0dXJuIGlzUmVxdWVzdEVycm9yKGVycm9yKSAmJiBpc1RkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHkoZXJyb3IuYm9keSk7XG59XG4iLCJpbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8vIEhhdmUgdG8gdXNlIGBhc2AgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzM5ODcwNDQvdHlwZWd1YXJkaW5nLWFuLXVua25vd24tbmVzdGVkLW9iamVjdCBzaG91bGQgYmUgZml4ZWQgaW4gNC44K1xuY29uc3QgaXNSZXF1ZXN0RXJyb3IgPSAoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBSZXF1ZXN0RXJyb3IgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdib2R5JyBpbiBlcnJvcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzUmVxdWVzdEVycm9yO1xuIiwiaW1wb3J0IHsgQ3JlYXRlVG9rZW5FcnJvciB9IGZyb20gJy4vdGQtb25saW5lLW1hcnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0NyZWF0ZVRva2VuRXJyb3IoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBDcmVhdGVUb2tlbkVycm9yIHtcbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGVycm9yICE9PSBudWxsICYmXG4gICAgICAgICdmaWVsZCcgaW4gZXJyb3IgJiZcbiAgICAgICAgJ3R5cGUnIGluIGVycm9yICYmXG4gICAgICAgICdtZXNzYWdlJyBpbiBlcnJvclxuICAgICk7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBmYWlsc1xuICogdG8gbG9hZCwgb3IgZm9yIHNvbWUgcmVhc29uLCBpdCBpcyBpbmFjY2Vzc2libGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IFREQ3VzdG9tQ2hlY2tvdXRTREssIFRkT25saW5lTWFydEhvc3RXaW5kb3cgfSBmcm9tICcuL3RkLW9ubGluZS1tYXJ0JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVERPbmxpbmVNYXJ0U2NyaXB0TG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSB0ZE9ubGluZU1hcnRXaW5kb3c6IFRkT25saW5lTWFydEhvc3RXaW5kb3cgPSB3aW5kb3csXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgbG9hZCgpOiBQcm9taXNlPFREQ3VzdG9tQ2hlY2tvdXRTREs+IHtcbiAgICAgICAgaWYgKCF0aGlzLnRkT25saW5lTWFydFdpbmRvdy5jdXN0b21jaGVja291dCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChcbiAgICAgICAgICAgICAgICAnaHR0cHM6Ly9saWJzLm5hLmJhbWJvcmEuY29tL2N1c3RvbWNoZWNrb3V0LzEvY3VzdG9tY2hlY2tvdXQuanMnLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy50ZE9ubGluZU1hcnRXaW5kb3cuY3VzdG9tY2hlY2tvdXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudGRPbmxpbmVNYXJ0V2luZG93LmN1c3RvbWNoZWNrb3V0KCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5pbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgVERPbmxpbmVNYXJ0UGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vdGQtb25saW5lLW1hcnQtcGF5bWVudC1zdHJhdGVneSc7XG5pbXBvcnQgVERPbmxpbmVNYXJ0U2NyaXB0TG9hZGVyIGZyb20gJy4vdGQtb25saW5lLW1hcnQtc2NyaXB0LWxvYWRlcic7XG5cbmNvbnN0IGNyZWF0ZVRET25saW5lTWFydFBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxURE9ubGluZU1hcnRQYXltZW50U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICByZXR1cm4gbmV3IFRET25saW5lTWFydFBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgbmV3IFRET25saW5lTWFydFNjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSksXG4gICAgICAgIGNyZWF0ZUZvcm1Qb3N0ZXIoKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVRET25saW5lTWFydFBheW1lbnRTdHJhdGVneSwgW3sgaWQ6ICd0ZG9ubGluZW1hcnQnIH1dKTtcbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG1vZHVsZSwgeyByZXNvbHZlSWRzIH0pO1xufVxuIl0sIm5hbWVzIjpbIk1pc3NpbmdEYXRhRXJyb3JUeXBlIiwiTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUiLCJTdGFuZGFyZEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJwcm90b3R5cGUiLCJzdXBlciIsIm5hbWUiLCJ0eXBlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJ0aGlzIiwiX19wcm90b19fIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJzdGFjayIsIkludmFsaWRBcmd1bWVudEVycm9yIiwiUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIiwiaW52YWxpZEZpZWxkcyIsImpvaW4iLCJNaXNzaW5nRGF0YUVycm9yIiwic3VidHlwZSIsIk1pc3NpbmdCaWxsaW5nQWRkcmVzcyIsIk1pc3NpbmdDYXJ0IiwiTWlzc2luZ0NvbnNpZ25tZW50cyIsIk1pc3NpbmdDaGVja291dCIsIk1pc3NpbmdDdXN0b21lciIsIk1pc3NpbmdDaGVja291dENvbmZpZyIsIk1pc3NpbmdPcmRlckNvbmZpZyIsIk1pc3NpbmdPcmRlciIsIk1pc3NpbmdPcmRlcklkIiwiTWlzc2luZ1BheW1lbnQiLCJNaXNzaW5nUGF5bWVudFRva2VuIiwiTWlzc2luZ1BheW1lbnRNZXRob2QiLCJNaXNzaW5nU2hpcHBpbmdBZGRyZXNzIiwiZ2V0RXJyb3JNZXNzYWdlIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSIsImluc3RydW1lbnQiLCJzaG91bGRTYXZlSW5zdHJ1bWVudCIsInNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQiLCJnZXRCcm93c2VySW5mbyIsIm5hdmlnYXRvciIsIndpbmRvdyIsImxhbmd1YWdlIiwidXNlckxhbmd1YWdlIiwiY29sb3JfZGVwdGgiLCJzY3JlZW4iLCJjb2xvckRlcHRoIiwiamF2YV9lbmFibGVkIiwiamF2YUVuYWJsZWQiLCJzY3JlZW5faGVpZ2h0IiwiaGVpZ2h0Iiwic2NyZWVuX3dpZHRoIiwid2lkdGgiLCJ0aW1lX3pvbmVfb2Zmc2V0IiwiRGF0ZSIsImdldFRpbWV6b25lT2Zmc2V0IiwidG9TdHJpbmciLCJOb3RJbml0aWFsaXplZEVycm9yIiwiQ3VzdG9tZXJOb3RJbml0aWFsaXplZCIsIlBheW1lbnROb3RJbml0aWFsaXplZCIsIlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQiLCJTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkIiwiaXNCYXNlSW5zdHJ1bWVudCIsIkZpZWxkVHlwZSIsIlRET25saW5lTWFydFBheW1lbnRTdHJhdGVneSIsInBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJ0ZE9ubGluZU1hcnRTY3JpcHRMb2FkZXIiLCJmb3JtUG9zdGVyIiwidGRJbnB1dHMiLCJpZCIsImZpZWxkVHlwZSIsIkNBUkRfTlVNQkVSIiwiQ1ZWIiwiRVhQSVJZIiwiaW5pdGlhbGl6ZSIsIm9wdGlvbnMiLCJtZXRob2RJZCIsInRkT25saW5lTWFydENsaWVudCIsImxvYWRURE9ubGluZU1hcnRKcyIsIm1vdW50SG9zdGVkRmllbGRzIiwiZXhlY3V0ZSIsInBheWxvYWQiLCJwYXltZW50Iiwib3JkZXIiLCJwYXltZW50UGF5bG9hZCIsImdldFBheW1lbnRQYXlsb2FkT3JUaHJvdyIsInN1Ym1pdE9yZGVyIiwic3VibWl0UGF5bWVudCIsImVycm9yIiwicHJvY2Vzc1dpdGhBZGRpdGlvbmFsQWN0aW9uIiwiZmluYWxpemUiLCJQcm9taXNlIiwicmVqZWN0IiwiZGVpbml0aWFsaXplIiwidW5kZWZpbmVkIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsInVubW91bnQiLCJyZXNvbHZlIiwicGF5bWVudERhdGEiLCJjb21tb25QYXltZW50RGF0YSIsImJyb3dzZXJfaW5mbyIsIkJvb2xlYW4iLCJpbnN0cnVtZW50SWQiLCJkaWdpdGFsSXRlbXNJbkNhcnQiLCJnZXRTdGF0ZSIsImdldENhcnRPclRocm93IiwibGluZUl0ZW1zIiwiZGlnaXRhbEl0ZW1zIiwibGVuZ3RoIiwic2hvdWxkQWRkVmVyaWZpY2F0aW9uVG9rZW4iLCJpc1RydXN0ZWRWYXVsdGluZ0luc3RydW1lbnQiLCJub25jZSIsImdldFRva2VuT3JUaHJvdyIsInRocm93VG9rZW5pemF0aW9uRXJyb3IiLCJnZXRIb3N0ZWRGaWVsZHNPcHRpb25zIiwiZ2V0VERPbmxpbmVNYXJ0Q2xpZW50T3JUaHJvdyIsImlucHV0IiwiaW5wdXRJZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjcmVhdGUiLCJtb3VudCIsImxvYWQiLCJjcmVhdGVUb2tlbiIsInJlc3VsdCIsInRva2VuIiwiZXJyb3JCb2R5IiwiYm9keSIsImlzT2JqZWN0IiwiaXNBcnJheSIsImVycm9ycyIsInNvbWUiLCJjb2RlIiwiaXNUZE9ubGluZU1hcnRBZGRpdGlvbmFsQWN0aW9uIiwidGhyZWVfZHNfcmVzdWx0IiwidGhyZWVEU1Jlc3VsdCIsImFjc191cmwiLCJmb3JtVXJsIiwicGF5ZXJfYXV0aF9yZXF1ZXN0IiwidGhyZWVEU1Nlc3Npb25EYXRhIiwibWVyY2hhbnRfZGF0YSIsImNyZXEiLCJwb3N0Rm9ybSIsImlzQ3JlYXRlVG9rZW5FcnJvciIsInN0eWxlIiwiY29sb3IiLCJjbGFzc2VzIiwiaW5zdHJ1bWVudHMiLCJnZXRJbnN0cnVtZW50cyIsImZpbmRJbnN0cnVtZW50IiwiZmluZCIsImJpZ3BheVRva2VuIiwidHJ1c3RlZFNoaXBwaW5nQWRkcmVzcyIsIlBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIiwiVERPbmxpbmVNYXJ0U2NyaXB0TG9hZGVyIiwic2NyaXB0TG9hZGVyIiwidGRPbmxpbmVNYXJ0V2luZG93IiwiY3VzdG9tY2hlY2tvdXQiLCJsb2FkU2NyaXB0IiwibW9kdWxlIiwiZ2V0U2NyaXB0TG9hZGVyIiwiY3JlYXRlRm9ybVBvc3RlciIsInJlc29sdmVJZHMiLCJhc3NpZ24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/td-bank.js\n\n}");

/***/ }),

/***/ "../checkout-sdk-js/dist/esm/integrations/zip.js":
/*!*******************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/zip.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createZipPaymentStrategy: () => (/* binding */ g)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"../checkout-sdk-js/node_modules/@bigcommerce/request-sender/esm/index.js\");\nvar t;(function(e){e.Json=\"application/json\",e.JsonV1=\"application/vnd.bc.v1+json\"})(t||(t={}));const n=t,i={\"X-Checkout-SDK-Version\":\"1.808.0\"};var r;class s{constructor(e){this._requestSender=e}saveExternalId(e,t){return r=this,s=void 0,o=function*(){const r=`/api/storefront/payment/${e}/save-external-id`,s={headers:Object.assign({Accept:n.JsonV1,\"X-API-INTERNAL\":\"This API endpoint is for internal use only and may change in the future\"},i),body:{externalId:t,provider:e}};yield this._requestSender.post(r,s)},new((a=void 0)||(a=Promise))(function(e,t){function n(e){try{c(o.next(e))}catch(e){t(e)}}function i(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a(function(e){e(r)})).then(n,i)}c((o=o.apply(r,s||[])).next())});// removed by dead control flow\n var r, s, a, o; }}class a extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class o extends a{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class c extends o{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(r||(r={}));class d extends a{constructor(e){super(function(e){switch(e){case r.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case r.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case r.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case r.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case r.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case r.MissingCheckoutConfig:case r.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case r.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case r.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case r.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case r.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case r.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case r.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class u extends a{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class l{constructor(e,t){this.paymentIntegrationService=e,this.storefrontPaymentRequestSender=t}initialize(){return Promise.resolve()}execute(e,t){return n=this,i=void 0,a=function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new c([\"payment\"]);const{methodId:s}=n,{getPaymentMethodOrThrow:a}=yield this.paymentIntegrationService.loadPaymentMethod(s,t),{clientToken:o,initializationData:u}=a(s),l=null==u?void 0:u.redirectUrl;if(!o||!l)throw new d(r.MissingPaymentMethod);const{id:g}=JSON.parse(o);if(!g)throw new d(r.MissingPaymentToken);const{isStoreCreditApplied:p}=this.paymentIntegrationService.getState().getCheckoutOrThrow();yield this.paymentIntegrationService.applyStoreCredit(p),yield this.paymentIntegrationService.initializePayment(s,{useStoreCredit:p}),yield this.paymentIntegrationService.submitOrder(i,t),yield this._prepareForReferredRegistration(s,g);try{yield this.paymentIntegrationService.submitPayment({methodId:s,paymentData:{nonce:g}})}catch(e){if((e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)&&\"additional_action_required\"===e.body.status)return new Promise(()=>window.location.replace(l));throw e}},new((s=void 0)||(s=Promise))(function(e,t){function r(e){try{c(a.next(e))}catch(e){t(e)}}function o(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s(function(e){e(n)})).then(r,o)}c((a=a.apply(n,i||[])).next())});// removed by dead control flow\n var n, i, s, a; }finalize(){return Promise.reject(new u)}deinitialize(){return Promise.resolve()}_prepareForReferredRegistration(e,t){return this.storefrontPaymentRequestSender.saveExternalId(e,t)}}const g=(p=t=>{const{getHost:n}=t.getState(),i=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_0__.createRequestSender)({host:n()}),r=new s(i);return new l(t,r)},y=[{id:\"zip\"},{id:\"quadpay\"}],Object.assign(p,{resolveIds:y}));var p,y;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy96aXAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSxJQ0RLQSxHQUFMLFNBQUtBLEdBQ0QsMEJBQ0EscUNBQ0gsRUFIRCxDQUFLQSxJQUFBQSxFQUFXLEtBS2hCLFVDTGFDLEVBQXNCLENBQUUseUJBQTBCLFcsSUNFbkRDLEVDRUcsTUFBTUMsRUFDakIsV0FBQUMsQ0FBb0JDLEdBQUEsS0FBQUEsZUFBQUEsQ0FBZ0MsQ0FFOUMsY0FBQUMsQ0FBZUMsRUFBa0JDLEcscUNBQ25DLE1BQU1DLEVBQU0sMkJBQTJCRixxQkFDakNHLEVBQVUsQ0FDWkMsUUFBUyxPQUFGLFFBQ0hDLE9BQVEsRUFBWUMsT0FDcEIsaUJDWFosMkVEWWVaLEdBRVBhLEtBQU0sQ0FDRkMsV0FBWVAsRUFDWlEsU0FBVVQsVUFJWlUsS0FBS1osZUFBZWEsS0FBV1QsRUFBS0MsRUFDOUMsRTttQkVmVyxNQUFlUyxVQUFzQkMsTUFJaEQsV0FBQWhCLENBQVlpQixHQ1hELElBQXFDQyxFRFk1Q0MsTUFBTUYsR0FBVyxxQ0FKckIsS0FBQUcsS0FBTyxnQkFDUCxLQUFBQyxLQUFPLFdDVHlDSCxhRGNaQSxVQ2JoQ0ksT0FBT0MsZUFDUEQsT0FBT0MsZURZUVYsS0NaZUssR0RZZkwsS0NWUlcsVUFBWU4sRURZb0IsbUJBQTVCRixNQUFNUyxrQkFDYlQsTUFBTVMsa0JBQWtCWixpQkFFeEJBLEtBQUthLE1BQVEsSUFBSVYsTUFBTUgsS0FBS0ksU0FBU1MsS0FFN0MsRUVkVyxNQUFNQyxVQUE2QlosRUFDOUMsV0FBQWYsQ0FBWWlCLEdBQ1JFLE1BQU1GLEdBQVcseUNBRWpCSixLQUFLTyxLQUFPLHVCQUNaUCxLQUFLUSxLQUFPLGtCQUNoQixFQ05XLE1BQU1PLFVBQW9DRCxFQUNyRCxXQUFBM0IsQ0FBWTZCLEdBQ1IsSUFBSVosRUFBVSx5RUFFVlksSUFDQVosRUFBVSxHQUFHQSw0REFBa0VZLEVBQWNDLEtBQ3pGLFVBSVJYLE1BQU1G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R0FDSSxPQUFPOUIsUUFBUStCLE9BQU8sSUFBSXBDLEVBQzlCLENBRUEsWUFBQXFDLEdBQ0ksT0FBT2hDLFFBQVFDLFNBQ25CLENBRVEsK0JBQUFxQixDQUFnQ3ZFLEVBQWtCUSxHQUN0RCxPQUFPRSxLQUFLcUMsK0JBQStCaEQsZUFBZUMsRUFBVVEsRUFDeEUsRUU3RUosTUFVQSxHQ2pCSTBFLEVEUUFwQyxJQUVBLE1BQU0sUUFBRXFDLEdBQVlyQyxFQUEwQm9CLFdBQ3hDa0IsRUFBZ0JDLGdGQUFBQSxDQUFvQixDQUFFQyxLQUFNSCxNQUM1Q3BDLEVBQWlDLElBQUluRCxFQUErQndGLEdBRTFFLE9BQU8sSUFBSXZDLEVBQW1CQyxFQUEyQkMsSUNiekR3QyxFRGdCd0QsQ0FBQyxDQUFFM0IsR0FBSSxPQUFTLENBQUVBLEdBQUksWUNkdkV6QyxPQUFPcUUsT0FBT04sRUFBUSxDQUFFSyxnQkFKcEIsSUFDWEwsRUFDQUssRSIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ib290c3RyYXA/ZmZjYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NvbW1vbi9odHRwLXJlcXVlc3QvY29udGVudC10eXBlLnRzPzUwNGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L3Nkay12ZXJzaW9uLWhlYWRlcnMudHM/N2JmMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9taXNzaW5nLWRhdGEtZXJyb3IudHM/YjdkYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvc3RvcmVmcm9udC1wYXltZW50LXJlcXVlc3Qtc2VuZGVyLnRzPzMyZmEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2ludGVybmFsLWFwaS1oZWFkZXJzLnRzPzQxMTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaW52YWxpZC1hcmd1bWVudC1lcnJvci50cz8zOTIxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL29yZGVyLWZpbmFsaXphdGlvbi1ub3QtcmVxdWlyZWQtZXJyb3IudHM/YjVhMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvemlwLWludGVncmF0aW9uL3NyYy96aXAtcGF5bWVudC1zdHJhdGVneS50cz80MmE5Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2lzLXJlcXVlc3QtZXJyb3IudHM/YjQzZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvemlwLWludGVncmF0aW9uL3NyYy9jcmVhdGUtemlwLXBheW1lbnQtc3RyYXRlZ3kudHM/NzIyNiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3RvLXJlc29sdmFibGUtbW9kdWxlLnRzP2Q1MjAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsImVudW0gQ29udGVudFR5cGUge1xuICAgIEpzb24gPSAnYXBwbGljYXRpb24vanNvbicsXG4gICAgSnNvblYxID0gJ2FwcGxpY2F0aW9uL3ZuZC5iYy52MStqc29uJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udGVudFR5cGU7XG4iLCJleHBvcnQgY29uc3QgU0RLX1ZFUlNJT05fSEVBREVSUyA9IHsgJ1gtQ2hlY2tvdXQtU0RLLVZlcnNpb24nOiBMSUJSQVJZX1ZFUlNJT04gfTtcbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBNaXNzaW5nRGF0YUVycm9yVHlwZSB7XG4gICAgTWlzc2luZ0JpbGxpbmdBZGRyZXNzLFxuICAgIE1pc3NpbmdDYXJ0LFxuICAgIE1pc3NpbmdDaGVja291dCxcbiAgICBNaXNzaW5nQ29uc2lnbm1lbnRzLFxuICAgIE1pc3NpbmdDdXN0b21lcixcbiAgICBNaXNzaW5nQ2hlY2tvdXRDb25maWcsXG4gICAgTWlzc2luZ09yZGVyLFxuICAgIE1pc3NpbmdPcmRlckNvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXJJZCxcbiAgICBNaXNzaW5nUGF5bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudElkLFxuICAgIE1pc3NpbmdQYXltZW50SW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICBNaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsLFxuICAgIE1pc3NpbmdQYXltZW50U3RhdHVzLFxuICAgIE1pc3NpbmdQYXltZW50VG9rZW4sXG4gICAgTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIHdoZW4gZGF0YSB0aGF0IGlzIGV4cGVjdGVkIHRvIGV4aXN0IGlzIG1pc3NpbmcuIFVzdWFsbHkgaXRcbiAqIGlzIGR1ZSB0byB0aGUgZmFjdCB0aGF0IGNlcnRhaW4gZGF0YSBoYXMgbm90IGJlZW4gcmV0cmlldmVkIGZyb20gb3Igc2F2ZWQgdG9cbiAqIHRoZSBzZXJ2ZXIgeWV0LiBBbmQgc3VjaCBkYXRhIGlzIHJlcXVpcmVkIHRvIHBlcmZvcm0gY2VydGFpbiBhY3Rpb25zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXNzaW5nRGF0YUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ01pc3NpbmdEYXRhRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbWlzc2luZ19kYXRhJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjYXJ0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDb25zaWdubWVudHM6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ3VzdG9tZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY3VzdG9tZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOlxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlckNvbmZpZzpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSB0b2tlbiByZXF1aXJlZCB0byBzdWJtaXQgYSBwYXltZW50IGlzIG1pc3NpbmcuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFJlcXVlc3RTZW5kZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgeyBDb250ZW50VHlwZSwgSU5URVJOQUxfVVNFX09OTFksIFNES19WRVJTSU9OX0hFQURFUlMgfSBmcm9tICcuLi9jb21tb24vaHR0cC1yZXF1ZXN0JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RvcmVmcm9udFBheW1lbnRSZXF1ZXN0U2VuZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9yZXF1ZXN0U2VuZGVyOiBSZXF1ZXN0U2VuZGVyKSB7fVxuXG4gICAgYXN5bmMgc2F2ZUV4dGVybmFsSWQobWV0aG9kSWQ6IHN0cmluZywgdG9rZW46IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9zdG9yZWZyb250L3BheW1lbnQvJHttZXRob2RJZH0vc2F2ZS1leHRlcm5hbC1pZGA7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQWNjZXB0OiBDb250ZW50VHlwZS5Kc29uVjEsXG4gICAgICAgICAgICAgICAgJ1gtQVBJLUlOVEVSTkFMJzogSU5URVJOQUxfVVNFX09OTFksXG4gICAgICAgICAgICAgICAgLi4uU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxJZDogdG9rZW4sXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IG1ldGhvZElkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3Q8dm9pZD4odXJsLCBvcHRpb25zKTtcbiAgICB9XG59XG4iLCJleHBvcnQgY29uc3QgSU5URVJOQUxfVVNFX09OTFkgPVxuICAgICdUaGlzIEFQSSBlbmRwb2ludCBpcyBmb3IgaW50ZXJuYWwgdXNlIG9ubHkgYW5kIG1heSBjaGFuZ2UgaW4gdGhlIGZ1dHVyZSc7XG4iLCJpbXBvcnQgQ3VzdG9tRXJyb3IgZnJvbSAnLi9jdXN0b20tZXJyb3InO1xuaW1wb3J0IHNldFByb3RvdHlwZU9mIGZyb20gJy4vc2V0LXByb3RvdHlwZS1vZic7XG5cbi8qKlxuICogVGhpcyBlcnJvciB0eXBlIHNob3VsZCBub3QgYmUgY29uc3RydWN0ZWQgZGlyZWN0bHkuIEl0IGlzIGEgYmFzZSBjbGFzcyBmb3JcbiAqIGFsbCBjdXN0b20gZXJyb3JzIHRocm93biBpbiB0aGlzIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkRXJyb3IgZXh0ZW5kcyBFcnJvciBpbXBsZW1lbnRzIEN1c3RvbUVycm9yIHtcbiAgICBuYW1lID0gJ1N0YW5kYXJkRXJyb3InO1xuICAgIHR5cGUgPSAnc3RhbmRhcmQnO1xuXG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICBzZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgbmV3LnRhcmdldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YWNrID0gbmV3IEVycm9yKHRoaXMubWVzc2FnZSkuc3RhY2s7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihvYmplY3Q6IGFueSwgcHJvdG90eXBlOiBvYmplY3QpIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmplY3QsIHByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqZWN0O1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBtZXRob2QgaXMgdW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGVcbiAqIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgYXJndW1lbnRzIGFjY29yZGluZyB0byB0aGVpciByZXF1aXJlbWVudHMsXG4gKiBpLmUuOiBpZiBhbiBhcmd1bWVudCBpcyBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnSW52YWxpZCBhcmd1bWVudHMgaGF2ZSBiZWVuIHByb3ZpZGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkQXJndW1lbnRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdpbnZhbGlkX2FyZ3VtZW50JztcbiAgICB9XG59XG4iLCJpbXBvcnQgSW52YWxpZEFyZ3VtZW50RXJyb3IgZnJvbSAnLi9pbnZhbGlkLWFyZ3VtZW50LWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB3ZSBhcmUgdW5hYmxlIHRvIHN1Ym1pdCBhIHBheW1lbnQgYmVjYXVzZVxuICogdGhlIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzLCBpLmUuOiBpZiBhbiBhcmd1bWVudCBpc1xuICogbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIGV4dGVuZHMgSW52YWxpZEFyZ3VtZW50RXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGludmFsaWRGaWVsZHM/OiBzdHJpbmdbXSkge1xuICAgICAgICBsZXQgbWVzc2FnZSA9ICdVbmFibGUgdG8gc3VibWl0IHBheW1lbnQgZm9yIHRoZSBvcmRlciBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIGludmFsaWQuJztcblxuICAgICAgICBpZiAoaW52YWxpZEZpZWxkcykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IE1ha2Ugc3VyZSB0aGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgcHJvdmlkZWQgY29ycmVjdGx5OiAke2ludmFsaWRGaWVsZHMuam9pbihcbiAgICAgICAgICAgICAgICAnLCAnLFxuICAgICAgICAgICAgKX0uYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHRyeWluZyB0byBtYWtlIGFuIG9yZGVyIGZpbmFsaXphdGlvbiByZXF1ZXN0IGZvciBhXG4gKiBwYXltZW50IG1ldGhvZCB0aGF0IGRvZXMgbm90IHJlcXVpcmUgc3VjaCBwcm9jZWR1cmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgaXNSZXF1ZXN0RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFN0b3JlZnJvbnRQYXltZW50UmVxdWVzdFNlbmRlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFppcFBheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBzdG9yZWZyb250UGF5bWVudFJlcXVlc3RTZW5kZXI6IFN0b3JlZnJvbnRQYXltZW50UmVxdWVzdFNlbmRlcixcbiAgICApIHt9XG5cbiAgICBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQgfSA9IHBheW1lbnQ7XG4gICAgICAgIGNvbnN0IHsgZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cgfSA9IGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjbGllbnRUb2tlbixcbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uRGF0YSxcbiAgICAgICAgfTogeyBjbGllbnRUb2tlbj86IHN0cmluZzsgaW5pdGlhbGl6YXRpb25EYXRhPzogeyByZWRpcmVjdFVybD86IHN0cmluZyB9IH0gPVxuICAgICAgICAgICAgZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICBjb25zdCByZWRpcmVjdFVybCA9IGluaXRpYWxpemF0aW9uRGF0YT8ucmVkaXJlY3RVcmw7XG5cbiAgICAgICAgaWYgKCFjbGllbnRUb2tlbiB8fCAhcmVkaXJlY3RVcmwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgaWQ6IG5vbmNlIH0gPSBKU09OLnBhcnNlKGNsaWVudFRva2VuKTtcblxuICAgICAgICBpZiAoIW5vbmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgaXNTdG9yZUNyZWRpdEFwcGxpZWQ6IHVzZVN0b3JlQ3JlZGl0IH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2VcbiAgICAgICAgICAgIC5nZXRTdGF0ZSgpXG4gICAgICAgICAgICAuZ2V0Q2hlY2tvdXRPclRocm93KCk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmFwcGx5U3RvcmVDcmVkaXQodXNlU3RvcmVDcmVkaXQpO1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZVBheW1lbnQobWV0aG9kSWQsIHsgdXNlU3RvcmVDcmVkaXQgfSk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fcHJlcGFyZUZvclJlZmVycmVkUmVnaXN0cmF0aW9uKG1ldGhvZElkLCBub25jZSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YTogeyBub25jZSB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoaXNSZXF1ZXN0RXJyb3IoZXJyb3IpICYmIGVycm9yLmJvZHkuc3RhdHVzID09PSAnYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgpID0+IHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHJlZGlyZWN0VXJsKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3ByZXBhcmVGb3JSZWZlcnJlZFJlZ2lzdHJhdGlvbihtZXRob2RJZDogc3RyaW5nLCBleHRlcm5hbElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmVmcm9udFBheW1lbnRSZXF1ZXN0U2VuZGVyLnNhdmVFeHRlcm5hbElkKG1ldGhvZElkLCBleHRlcm5hbElkKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8vIEhhdmUgdG8gdXNlIGBhc2AgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzM5ODcwNDQvdHlwZWd1YXJkaW5nLWFuLXVua25vd24tbmVzdGVkLW9iamVjdCBzaG91bGQgYmUgZml4ZWQgaW4gNC44K1xuY29uc3QgaXNSZXF1ZXN0RXJyb3IgPSAoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBSZXF1ZXN0RXJyb3IgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdib2R5JyBpbiBlcnJvcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzUmVxdWVzdEVycm9yO1xuIiwiaW1wb3J0IHsgY3JlYXRlUmVxdWVzdFNlbmRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICBTdG9yZWZyb250UGF5bWVudFJlcXVlc3RTZW5kZXIsXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFppcFBheW1lbnRTdHJhdGVneSBmcm9tICcuL3ppcC1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlWmlwUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFppcFBheW1lbnRTdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT4ge1xuICAgIGNvbnN0IHsgZ2V0SG9zdCB9ID0gcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgIGNvbnN0IHJlcXVlc3RTZW5kZXIgPSBjcmVhdGVSZXF1ZXN0U2VuZGVyKHsgaG9zdDogZ2V0SG9zdCgpIH0pO1xuICAgIGNvbnN0IHN0b3JlZnJvbnRQYXltZW50UmVxdWVzdFNlbmRlciA9IG5ldyBTdG9yZWZyb250UGF5bWVudFJlcXVlc3RTZW5kZXIocmVxdWVzdFNlbmRlcik7XG5cbiAgICByZXR1cm4gbmV3IFppcFBheW1lbnRTdHJhdGVneShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLCBzdG9yZWZyb250UGF5bWVudFJlcXVlc3RTZW5kZXIpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVppcFBheW1lbnRTdHJhdGVneSwgW3sgaWQ6ICd6aXAnIH0sIHsgaWQ6ICdxdWFkcGF5JyB9XSk7XG4iLCJpbXBvcnQgUmVzb2x2YWJsZU1vZHVsZSBmcm9tICcuL3Jlc29sdmFibGUtbW9kdWxlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9SZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPihcbiAgICBtb2R1bGU6IFRNb2R1bGUsXG4gICAgcmVzb2x2ZUlkczogVElkZW50aWZpZXJbXSxcbik6IFJlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+IHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2R1bGUsIHsgcmVzb2x2ZUlkcyB9KTtcbn1cbiJdLCJuYW1lcyI6WyJDb250ZW50VHlwZSIsIlNES19WRVJTSU9OX0hFQURFUlMiLCJNaXNzaW5nRGF0YUVycm9yVHlwZSIsIlN0b3JlZnJvbnRQYXltZW50UmVxdWVzdFNlbmRlciIsImNvbnN0cnVjdG9yIiwiX3JlcXVlc3RTZW5kZXIiLCJzYXZlRXh0ZXJuYWxJZCIsIm1ldGhvZElkIiwidG9rZW4iLCJ1cmwiLCJvcHRpb25zIiwiaGVhZGVycyIsIkFjY2VwdCIsIkpzb25WMSIsImJvZHkiLCJleHRlcm5hbElkIiwicHJvdmlkZXIiLCJ0aGlzIiwicG9zdCIsIlN0YW5kYXJkRXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJwcm90b3R5cGUiLCJzdXBlciIsIm5hbWUiLCJ0eXBlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJjYXB0dXJlU3RhY2tUcmFjZSIsInN0YWNrIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiam9pbiIsIk1pc3NpbmdEYXRhRXJyb3IiLCJzdWJ0eXBlIiwiTWlzc2luZ0JpbGxpbmdBZGRyZXNzIiwiTWlzc2luZ0NhcnQiLCJNaXNzaW5nQ29uc2lnbm1lbnRzIiwiTWlzc2luZ0NoZWNrb3V0IiwiTWlzc2luZ0N1c3RvbWVyIiwiTWlzc2luZ0NoZWNrb3V0Q29uZmlnIiwiTWlzc2luZ09yZGVyQ29uZmlnIiwiTWlzc2luZ09yZGVyIiwiTWlzc2luZ09yZGVySWQiLCJNaXNzaW5nUGF5bWVudCIsIk1pc3NpbmdQYXltZW50VG9rZW4iLCJNaXNzaW5nUGF5bWVudE1ldGhvZCIsIk1pc3NpbmdTaGlwcGluZ0FkZHJlc3MiLCJnZXRFcnJvck1lc3NhZ2UiLCJPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IiLCJaaXBQYXltZW50U3RyYXRlZ3kiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwic3RvcmVmcm9udFBheW1lbnRSZXF1ZXN0U2VuZGVyIiwiaW5pdGlhbGl6ZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZXhlY3V0ZSIsInBheWxvYWQiLCJwYXltZW50Iiwib3JkZXIiLCJnZXRQYXltZW50TWV0aG9kT3JUaHJvdyIsImxvYWRQYXltZW50TWV0aG9kIiwiY2xpZW50VG9rZW4iLCJpbml0aWFsaXphdGlvbkRhdGEiLCJyZWRpcmVjdFVybCIsImlkIiwibm9uY2UiLCJKU09OIiwicGFyc2UiLCJpc1N0b3JlQ3JlZGl0QXBwbGllZCIsInVzZVN0b3JlQ3JlZGl0IiwiZ2V0U3RhdGUiLCJnZXRDaGVja291dE9yVGhyb3ciLCJhcHBseVN0b3JlQ3JlZGl0IiwiaW5pdGlhbGl6ZVBheW1lbnQiLCJzdWJtaXRPcmRlciIsIl9wcmVwYXJlRm9yUmVmZXJyZWRSZWdpc3RyYXRpb24iLCJzdWJtaXRQYXltZW50IiwicGF5bWVudERhdGEiLCJlcnJvciIsInN0YXR1cyIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVwbGFjZSIsImZpbmFsaXplIiwicmVqZWN0IiwiZGVpbml0aWFsaXplIiwibW9kdWxlIiwiZ2V0SG9zdCIsInJlcXVlc3RTZW5kZXIiLCJjcmVhdGVSZXF1ZXN0U2VuZGVyIiwiaG9zdCIsInJlc29sdmVJZHMiLCJhc3NpZ24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/zip.js\n\n}");

/***/ }),

/***/ "./packages/core/src/app/payment/paymentMethod/PaymentMethod.tsx":
/*!***********************************************************************!*\
  !*** ./packages/core/src/app/payment/paymentMethod/PaymentMethod.tsx ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_no_payment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/no-payment */ \"../checkout-sdk-js/dist/esm/integrations/no-payment.js\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_paypal_pro__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/paypal-pro */ \"../checkout-sdk-js/dist/esm/integrations/paypal-pro.js\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_sezzle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/sezzle */ \"../checkout-sdk-js/dist/esm/integrations/sezzle.js\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_td_bank__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/td-bank */ \"../checkout-sdk-js/dist/esm/integrations/td-bank.js\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_zip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/zip */ \"../checkout-sdk-js/dist/esm/integrations/zip.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _checkout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../checkout */ \"./packages/core/src/app/checkout/withCheckout.tsx\");\n/* harmony import */ var _PaymentMethodId__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./PaymentMethodId */ \"./packages/core/src/app/payment/paymentMethod/PaymentMethodId.ts\");\n/* harmony import */ var _PaymentMethodProviderType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./PaymentMethodProviderType */ \"./packages/core/src/app/payment/paymentMethod/PaymentMethodProviderType.ts\");\n/* harmony import */ var _PaymentMethodType__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./PaymentMethodType */ \"./packages/core/src/app/payment/paymentMethod/PaymentMethodType.ts\");\n\n\n\n\n\n\n\nconst BraintreeCreditCardPaymentMethod = (0,react__WEBPACK_IMPORTED_MODULE_5__.lazy)(() => Promise.all(/*! import() | braintree-credit-card-payment-method */[__webpack_require__.e(\"packages_core_src_app_payment_StoreInstrumentFieldset_StoreInstrumentFieldset_tsx-packages_co-39091b\"), __webpack_require__.e(\"packages_core_src_app_payment_hostedCreditCard_withHostedCreditCardFieldset_tsx-packages_core-49f577\"), __webpack_require__.e(\"braintree-credit-card-payment-method\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./BraintreeCreditCardPaymentMethod */ \"./packages/core/src/app/payment/paymentMethod/BraintreeCreditCardPaymentMethod.tsx\")));\nconst HostedCreditCardPaymentMethod = (0,react__WEBPACK_IMPORTED_MODULE_5__.lazy)(() => Promise.all(/*! import() | hosted-credit-card-payment-method */[__webpack_require__.e(\"packages_instrument-utils_src_storedInstrument_ManageInstrumentsModal_ManageInstrumentsModal_-149597\"), __webpack_require__.e(\"packages_instrument-utils_src_guards_isInstrumentCardCodeRequiredSelector_ts-packages_instrum-8e6504\"), __webpack_require__.e(\"packages_instrument-utils_src_creditCard_CreditCardCodeTooltip_tsx-packages_ui_src_icon_IconH-0563ba\"), __webpack_require__.e(\"packages_credit-card-integration_src_CreditCardPaymentMethodContainer_tsx\"), __webpack_require__.e(\"packages_hosted-credit-card-integration_src_components_HostedCreditCardFieldset_HostedCreditC-cf449c\"), __webpack_require__.e(\"checkout-sdk-js_dist_esm_integrations_bluesnap-direct_js\"), __webpack_require__.e(\"packages_core_src_app_payment_StoreInstrumentFieldset_StoreInstrumentFieldset_tsx-packages_co-39091b\"), __webpack_require__.e(\"packages_hosted-credit-card-integration_src_components_HostedCreditCardComponent_tsx\"), __webpack_require__.e(\"packages_core_src_app_payment_hostedCreditCard_withHostedCreditCardFieldset_tsx-packages_core-49f577\"), __webpack_require__.e(\"hosted-credit-card-payment-method\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./HostedCreditCardPaymentMethod */ \"./packages/core/src/app/payment/paymentMethod/HostedCreditCardPaymentMethod.tsx\")));\nconst HostedPaymentMethod = (0,react__WEBPACK_IMPORTED_MODULE_5__.lazy)(() => Promise.all(/*! import() | hosted-payment-method */[__webpack_require__.e(\"packages_instrument-utils_src_storedInstrument_ManageInstrumentsModal_ManageInstrumentsModal_-149597\"), __webpack_require__.e(\"packages_instrument-utils_src_storedInstrument_AccountInstrumentFieldset_AccountInstrumentFie-0292a0\"), __webpack_require__.e(\"packages_core_src_app_payment_StoreInstrumentFieldset_StoreInstrumentFieldset_tsx-packages_co-39091b\"), __webpack_require__.e(\"hosted-payment-method\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./HostedPaymentMethod */ \"./packages/core/src/app/payment/paymentMethod/HostedPaymentMethod.tsx\")));\n\n\n\n/**\n * If possible, try to avoid having components that are specific to a specific\n * payment provider or method. Instead, try to generalise the requirements and\n * use components that can are reusable for multiple payment methods. i.e.:\n * CreditCardPaymentMethod, HostedPaymentMethod etc... If it is really necessary\n * for a particular payment method, you may write a method-specific component for\n * the purpose of configuring a general-purpose component in order to fulfill\n * its specific product or technical requirements.\n */\nconst PaymentMethodComponent = (props) => {\n    const { method } = props;\n    if (method.id === _PaymentMethodId__WEBPACK_IMPORTED_MODULE_7__[\"default\"].Braintree) {\n        return react__WEBPACK_IMPORTED_MODULE_5___default().createElement(react__WEBPACK_IMPORTED_MODULE_5__.Suspense, null,\n            react__WEBPACK_IMPORTED_MODULE_5___default().createElement(BraintreeCreditCardPaymentMethod, Object.assign({}, props)));\n    }\n    if (method.id === _PaymentMethodId__WEBPACK_IMPORTED_MODULE_7__[\"default\"].Humm ||\n        method.id === _PaymentMethodId__WEBPACK_IMPORTED_MODULE_7__[\"default\"].Laybuy ||\n        method.method === _PaymentMethodType__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Paypal ||\n        method.method === _PaymentMethodType__WEBPACK_IMPORTED_MODULE_9__[\"default\"].PaypalCredit ||\n        method.type === _PaymentMethodProviderType__WEBPACK_IMPORTED_MODULE_8__[\"default\"].Hosted) {\n        return react__WEBPACK_IMPORTED_MODULE_5___default().createElement(react__WEBPACK_IMPORTED_MODULE_5__.Suspense, null,\n            react__WEBPACK_IMPORTED_MODULE_5___default().createElement(HostedPaymentMethod, Object.assign({}, props)));\n    }\n    // NOTE: Some payment methods have `method` as `credit-card` but they are\n    // actually not. Therefore, as a workaround, we are doing the following\n    // check last.\n    if (method.method === _PaymentMethodType__WEBPACK_IMPORTED_MODULE_9__[\"default\"].CreditCard ||\n        method.type === _PaymentMethodProviderType__WEBPACK_IMPORTED_MODULE_8__[\"default\"].Api) {\n        return react__WEBPACK_IMPORTED_MODULE_5___default().createElement(react__WEBPACK_IMPORTED_MODULE_5__.Suspense, null,\n            react__WEBPACK_IMPORTED_MODULE_5___default().createElement(HostedCreditCardPaymentMethod, Object.assign({}, props)));\n    }\n    return null;\n};\nfunction mapToWithCheckoutPaymentMethodProps({ checkoutService, checkoutState }, { method }) {\n    const { statuses: { isInitializingPayment }, } = checkoutState;\n    return {\n        deinitializeCustomer: checkoutService.deinitializeCustomer,\n        deinitializePayment: checkoutService.deinitializePayment,\n        initializeCustomer: checkoutService.initializeCustomer,\n        initializePayment: (options) => {\n            var _a;\n            return checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [\n                    ...(_a = options.integrations) !== null && _a !== void 0 ? _a : [],\n                    // The strategies below don’t appear to correspond to any existing component,\n                    // so they are initialized globally at the root level.\n                    _bigcommerce_checkout_sdk_integrations_no_payment__WEBPACK_IMPORTED_MODULE_0__.createNoPaymentStrategy,\n                    _bigcommerce_checkout_sdk_integrations_paypal_pro__WEBPACK_IMPORTED_MODULE_1__.createPayPalProPaymentStrategy,\n                    _bigcommerce_checkout_sdk_integrations_sezzle__WEBPACK_IMPORTED_MODULE_2__.createSezzlePaymentStrategy,\n                    _bigcommerce_checkout_sdk_integrations_td_bank__WEBPACK_IMPORTED_MODULE_3__.createTDOnlineMartPaymentStrategy,\n                    _bigcommerce_checkout_sdk_integrations_zip__WEBPACK_IMPORTED_MODULE_4__.createZipPaymentStrategy,\n                ] }));\n        },\n        isInitializing: isInitializingPayment(method.id),\n    };\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_checkout__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(mapToWithCheckoutPaymentMethodProps)((0,react__WEBPACK_IMPORTED_MODULE_5__.memo)(PaymentMethodComponent)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9jb3JlL3NyYy9hcHAvcGF5bWVudC9wYXltZW50TWV0aG9kL1BheW1lbnRNZXRob2QudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQVE2RjtBQUNNO0FBQ1A7QUFDTztBQUNiO0FBQ1Y7QUFJOUI7QUFFOUMsTUFBTSxnQ0FBZ0MsR0FBRywyQ0FBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLG9qQkFBMEcsQ0FBQyxDQUFDO0FBQ2hLLE1BQU0sNkJBQTZCLEdBQUcsMkNBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQywwMENBQW9HLENBQUMsQ0FBQztBQUN2SixNQUFNLG1CQUFtQixHQUFHLDJDQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsMm5CQUE4RSxDQUFDLENBQUM7QUFFdkU7QUFDb0I7QUFDaEI7QUFrQnBEOzs7Ozs7OztHQVFHO0FBQ0gsTUFBTSxzQkFBc0IsR0FFeEIsQ0FBQyxLQUFLLEVBQUUsRUFBRTtJQUNWLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUM7SUFFekIsSUFBSSxNQUFNLENBQUMsRUFBRSxLQUFLLHdEQUFlLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDMUMsT0FBTywyREFBQywyQ0FBUTtZQUFDLDJEQUFDLGdDQUFnQyxvQkFBSyxLQUFLLEVBQUksQ0FBVyxDQUFDO0lBQ2hGLENBQUM7SUFFRCxJQUNJLE1BQU0sQ0FBQyxFQUFFLEtBQUssd0RBQWUsQ0FBQyxJQUFJO1FBQ2xDLE1BQU0sQ0FBQyxFQUFFLEtBQUssd0RBQWUsQ0FBQyxNQUFNO1FBQ3BDLE1BQU0sQ0FBQyxNQUFNLEtBQUssMERBQWlCLENBQUMsTUFBTTtRQUMxQyxNQUFNLENBQUMsTUFBTSxLQUFLLDBEQUFpQixDQUFDLFlBQVk7UUFDaEQsTUFBTSxDQUFDLElBQUksS0FBSyxrRUFBeUIsQ0FBQyxNQUFNLEVBQ2xELENBQUM7UUFDQyxPQUFPLDJEQUFDLDJDQUFRO1lBQUMsMkRBQUMsbUJBQW1CLG9CQUFLLEtBQUssRUFBSSxDQUFXLENBQUM7SUFDbkUsQ0FBQztJQUVELHlFQUF5RTtJQUN6RSx1RUFBdUU7SUFDdkUsY0FBYztJQUNkLElBQ0ksTUFBTSxDQUFDLE1BQU0sS0FBSywwREFBaUIsQ0FBQyxVQUFVO1FBQzlDLE1BQU0sQ0FBQyxJQUFJLEtBQUssa0VBQXlCLENBQUMsR0FBRyxFQUMvQyxDQUFDO1FBQ0MsT0FBTywyREFBQywyQ0FBUTtZQUFDLDJEQUFDLDZCQUE2QixvQkFBSyxLQUFLLEVBQUksQ0FBVyxDQUFDO0lBQzdFLENBQUM7SUFFRCxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDLENBQUM7QUFFRixTQUFTLG1DQUFtQyxDQUN4QyxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQXdCLEVBQ3hELEVBQUUsTUFBTSxFQUFzQjtJQUU5QixNQUFNLEVBQ0YsUUFBUSxFQUFFLEVBQUUscUJBQXFCLEVBQUUsR0FDdEMsR0FBRyxhQUFhLENBQUM7SUFFbEIsT0FBTztRQUNILG9CQUFvQixFQUFFLGVBQWUsQ0FBQyxvQkFBb0I7UUFDMUQsbUJBQW1CLEVBQUUsZUFBZSxDQUFDLG1CQUFtQjtRQUN4RCxrQkFBa0IsRUFBRSxlQUFlLENBQUMsa0JBQWtCO1FBQ3RELGlCQUFpQixFQUFFLENBQUMsT0FBTyxFQUFFLEVBQUU7O1lBQzNCLE9BQU8sZUFBZSxDQUFDLGlCQUFpQixpQ0FDakMsT0FBTyxLQUNWLFlBQVksRUFBRTtvQkFDVixHQUFHLGFBQU8sQ0FBQyxZQUFZLG1DQUFJLEVBQUU7b0JBQzdCLDZFQUE2RTtvQkFDN0Usc0RBQXNEO29CQUN0RCxzR0FBdUI7b0JBQ3ZCLDZHQUE4QjtvQkFDOUIsc0dBQTJCO29CQUMzQiw2R0FBaUM7b0JBQ2pDLGdHQUF3QjtpQkFDM0IsSUFDSCxDQUFDO1FBQ1AsQ0FBQztRQUNELGNBQWMsRUFBRSxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO0tBQ25ELENBQUM7QUFDTixDQUFDO0FBRUQsaUVBQWUscURBQVksQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDLDJDQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9jb3JlL3NyYy9hcHAvcGF5bWVudC9wYXltZW50TWV0aG9kL1BheW1lbnRNZXRob2QudHN4PzdmNDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICB0eXBlIENoZWNrb3V0U2VsZWN0b3JzLFxuICAgIHR5cGUgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICB0eXBlIEN1c3RvbWVyUmVxdWVzdE9wdGlvbnMsXG4gICAgdHlwZSBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgdHlwZSBQYXltZW50TWV0aG9kLFxuICAgIHR5cGUgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrJztcbmltcG9ydCB7IGNyZWF0ZU5vUGF5bWVudFN0cmF0ZWd5LCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvaW50ZWdyYXRpb25zL25vLXBheW1lbnQnO1xuaW1wb3J0IHsgY3JlYXRlUGF5UGFsUHJvUGF5bWVudFN0cmF0ZWd5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9pbnRlZ3JhdGlvbnMvcGF5cGFsLXBybyc7XG5pbXBvcnQgeyBjcmVhdGVTZXp6bGVQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2ludGVncmF0aW9ucy9zZXp6bGUnO1xuaW1wb3J0IHsgY3JlYXRlVERPbmxpbmVNYXJ0UGF5bWVudFN0cmF0ZWd5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9pbnRlZ3JhdGlvbnMvdGQtYmFuayc7XG5pbXBvcnQgeyBjcmVhdGVaaXBQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2ludGVncmF0aW9ucy96aXAnO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIGxhenksIG1lbW8sIFN1c3BlbnNlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyB0eXBlIENoZWNrb3V0Q29udGV4dFByb3BzIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgd2l0aENoZWNrb3V0IH0gZnJvbSAnLi4vLi4vY2hlY2tvdXQnO1xuXG5jb25zdCBCcmFpbnRyZWVDcmVkaXRDYXJkUGF5bWVudE1ldGhvZCA9IGxhenkoKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwiYnJhaW50cmVlLWNyZWRpdC1jYXJkLXBheW1lbnQtbWV0aG9kXCIgKi8nLi9CcmFpbnRyZWVDcmVkaXRDYXJkUGF5bWVudE1ldGhvZCcpKTtcbmNvbnN0IEhvc3RlZENyZWRpdENhcmRQYXltZW50TWV0aG9kID0gbGF6eSgoKSA9PiBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJob3N0ZWQtY3JlZGl0LWNhcmQtcGF5bWVudC1tZXRob2RcIiAqLycuL0hvc3RlZENyZWRpdENhcmRQYXltZW50TWV0aG9kJykpO1xuY29uc3QgSG9zdGVkUGF5bWVudE1ldGhvZCA9IGxhenkoKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwiaG9zdGVkLXBheW1lbnQtbWV0aG9kXCIgKi8nLi9Ib3N0ZWRQYXltZW50TWV0aG9kJykpO1xuXG5pbXBvcnQgUGF5bWVudE1ldGhvZElkIGZyb20gJy4vUGF5bWVudE1ldGhvZElkJztcbmltcG9ydCBQYXltZW50TWV0aG9kUHJvdmlkZXJUeXBlIGZyb20gJy4vUGF5bWVudE1ldGhvZFByb3ZpZGVyVHlwZSc7XG5pbXBvcnQgUGF5bWVudE1ldGhvZFR5cGUgZnJvbSAnLi9QYXltZW50TWV0aG9kVHlwZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudE1ldGhvZFByb3BzIHtcbiAgICBtZXRob2Q6IFBheW1lbnRNZXRob2Q7XG4gICAgaXNFbWJlZGRlZD86IGJvb2xlYW47XG4gICAgaXNVc2luZ011bHRpU2hpcHBpbmc/OiBib29sZWFuO1xuICAgIG9uVW5oYW5kbGVkRXJyb3I/KGVycm9yOiBFcnJvcik6IHZvaWQ7XG4gICAgc3VibWl0Rm9ybT8oKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXaXRoQ2hlY2tvdXRQYXltZW50TWV0aG9kUHJvcHMge1xuICAgIGlzSW5pdGlhbGl6aW5nOiBib29sZWFuO1xuICAgIGRlaW5pdGlhbGl6ZUN1c3RvbWVyKG9wdGlvbnM6IEN1c3RvbWVyUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPENoZWNrb3V0U2VsZWN0b3JzPjtcbiAgICBkZWluaXRpYWxpemVQYXltZW50KG9wdGlvbnM6IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8Q2hlY2tvdXRTZWxlY3RvcnM+O1xuICAgIGluaXRpYWxpemVDdXN0b21lcihvcHRpb25zOiBDdXN0b21lckluaXRpYWxpemVPcHRpb25zKTogUHJvbWlzZTxDaGVja291dFNlbGVjdG9ycz47XG4gICAgaW5pdGlhbGl6ZVBheW1lbnQob3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zKTogUHJvbWlzZTxDaGVja291dFNlbGVjdG9ycz47XG59XG5cbi8qKlxuICogSWYgcG9zc2libGUsIHRyeSB0byBhdm9pZCBoYXZpbmcgY29tcG9uZW50cyB0aGF0IGFyZSBzcGVjaWZpYyB0byBhIHNwZWNpZmljXG4gKiBwYXltZW50IHByb3ZpZGVyIG9yIG1ldGhvZC4gSW5zdGVhZCwgdHJ5IHRvIGdlbmVyYWxpc2UgdGhlIHJlcXVpcmVtZW50cyBhbmRcbiAqIHVzZSBjb21wb25lbnRzIHRoYXQgY2FuIGFyZSByZXVzYWJsZSBmb3IgbXVsdGlwbGUgcGF5bWVudCBtZXRob2RzLiBpLmUuOlxuICogQ3JlZGl0Q2FyZFBheW1lbnRNZXRob2QsIEhvc3RlZFBheW1lbnRNZXRob2QgZXRjLi4uIElmIGl0IGlzIHJlYWxseSBuZWNlc3NhcnlcbiAqIGZvciBhIHBhcnRpY3VsYXIgcGF5bWVudCBtZXRob2QsIHlvdSBtYXkgd3JpdGUgYSBtZXRob2Qtc3BlY2lmaWMgY29tcG9uZW50IGZvclxuICogdGhlIHB1cnBvc2Ugb2YgY29uZmlndXJpbmcgYSBnZW5lcmFsLXB1cnBvc2UgY29tcG9uZW50IGluIG9yZGVyIHRvIGZ1bGZpbGxcbiAqIGl0cyBzcGVjaWZpYyBwcm9kdWN0IG9yIHRlY2huaWNhbCByZXF1aXJlbWVudHMuXG4gKi9cbmNvbnN0IFBheW1lbnRNZXRob2RDb21wb25lbnQ6IEZ1bmN0aW9uQ29tcG9uZW50PFxuICAgIFBheW1lbnRNZXRob2RQcm9wcyAmIFdpdGhDaGVja291dFBheW1lbnRNZXRob2RQcm9wc1xuPiA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgbWV0aG9kIH0gPSBwcm9wcztcblxuICAgIGlmIChtZXRob2QuaWQgPT09IFBheW1lbnRNZXRob2RJZC5CcmFpbnRyZWUpIHtcbiAgICAgICAgcmV0dXJuIDxTdXNwZW5zZT48QnJhaW50cmVlQ3JlZGl0Q2FyZFBheW1lbnRNZXRob2Qgey4uLnByb3BzfSAvPjwvU3VzcGVuc2U+O1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgICAgbWV0aG9kLmlkID09PSBQYXltZW50TWV0aG9kSWQuSHVtbSB8fFxuICAgICAgICBtZXRob2QuaWQgPT09IFBheW1lbnRNZXRob2RJZC5MYXlidXkgfHxcbiAgICAgICAgbWV0aG9kLm1ldGhvZCA9PT0gUGF5bWVudE1ldGhvZFR5cGUuUGF5cGFsIHx8XG4gICAgICAgIG1ldGhvZC5tZXRob2QgPT09IFBheW1lbnRNZXRob2RUeXBlLlBheXBhbENyZWRpdCB8fFxuICAgICAgICBtZXRob2QudHlwZSA9PT0gUGF5bWVudE1ldGhvZFByb3ZpZGVyVHlwZS5Ib3N0ZWRcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIDxTdXNwZW5zZT48SG9zdGVkUGF5bWVudE1ldGhvZCB7Li4ucHJvcHN9IC8+PC9TdXNwZW5zZT47XG4gICAgfVxuXG4gICAgLy8gTk9URTogU29tZSBwYXltZW50IG1ldGhvZHMgaGF2ZSBgbWV0aG9kYCBhcyBgY3JlZGl0LWNhcmRgIGJ1dCB0aGV5IGFyZVxuICAgIC8vIGFjdHVhbGx5IG5vdC4gVGhlcmVmb3JlLCBhcyBhIHdvcmthcm91bmQsIHdlIGFyZSBkb2luZyB0aGUgZm9sbG93aW5nXG4gICAgLy8gY2hlY2sgbGFzdC5cbiAgICBpZiAoXG4gICAgICAgIG1ldGhvZC5tZXRob2QgPT09IFBheW1lbnRNZXRob2RUeXBlLkNyZWRpdENhcmQgfHxcbiAgICAgICAgbWV0aG9kLnR5cGUgPT09IFBheW1lbnRNZXRob2RQcm92aWRlclR5cGUuQXBpXG4gICAgKSB7XG4gICAgICAgIHJldHVybiA8U3VzcGVuc2U+PEhvc3RlZENyZWRpdENhcmRQYXltZW50TWV0aG9kIHsuLi5wcm9wc30gLz48L1N1c3BlbnNlPjtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbmZ1bmN0aW9uIG1hcFRvV2l0aENoZWNrb3V0UGF5bWVudE1ldGhvZFByb3BzKFxuICAgIHsgY2hlY2tvdXRTZXJ2aWNlLCBjaGVja291dFN0YXRlIH06IENoZWNrb3V0Q29udGV4dFByb3BzLFxuICAgIHsgbWV0aG9kIH06IFBheW1lbnRNZXRob2RQcm9wcyxcbik6IFdpdGhDaGVja291dFBheW1lbnRNZXRob2RQcm9wcyB7XG4gICAgY29uc3Qge1xuICAgICAgICBzdGF0dXNlczogeyBpc0luaXRpYWxpemluZ1BheW1lbnQgfSxcbiAgICB9ID0gY2hlY2tvdXRTdGF0ZTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGRlaW5pdGlhbGl6ZUN1c3RvbWVyOiBjaGVja291dFNlcnZpY2UuZGVpbml0aWFsaXplQ3VzdG9tZXIsXG4gICAgICAgIGRlaW5pdGlhbGl6ZVBheW1lbnQ6IGNoZWNrb3V0U2VydmljZS5kZWluaXRpYWxpemVQYXltZW50LFxuICAgICAgICBpbml0aWFsaXplQ3VzdG9tZXI6IGNoZWNrb3V0U2VydmljZS5pbml0aWFsaXplQ3VzdG9tZXIsXG4gICAgICAgIGluaXRpYWxpemVQYXltZW50OiAob3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrb3V0U2VydmljZS5pbml0aWFsaXplUGF5bWVudCh7XG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucy5pbnRlZ3JhdGlvbnMgPz8gW10sXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBzdHJhdGVnaWVzIGJlbG93IGRvbuKAmXQgYXBwZWFyIHRvIGNvcnJlc3BvbmQgdG8gYW55IGV4aXN0aW5nIGNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgLy8gc28gdGhleSBhcmUgaW5pdGlhbGl6ZWQgZ2xvYmFsbHkgYXQgdGhlIHJvb3QgbGV2ZWwuXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZU5vUGF5bWVudFN0cmF0ZWd5LFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVQYXlQYWxQcm9QYXltZW50U3RyYXRlZ3ksXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVNlenpsZVBheW1lbnRTdHJhdGVneSxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVERPbmxpbmVNYXJ0UGF5bWVudFN0cmF0ZWd5LFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVaaXBQYXltZW50U3RyYXRlZ3ksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBpc0luaXRpYWxpemluZzogaXNJbml0aWFsaXppbmdQYXltZW50KG1ldGhvZC5pZCksXG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgd2l0aENoZWNrb3V0KG1hcFRvV2l0aENoZWNrb3V0UGF5bWVudE1ldGhvZFByb3BzKShtZW1vKFBheW1lbnRNZXRob2RDb21wb25lbnQpKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/core/src/app/payment/paymentMethod/PaymentMethod.tsx\n\n}");

/***/ })

}]);
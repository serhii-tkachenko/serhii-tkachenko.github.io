"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["checkout-sdk-js_dist_esm_integrations_bigcommerce-payments_js"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/bigcommerce-payments.js":
/*!************************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/bigcommerce-payments.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBigCommercePaymentsAlternativeMethodsButtonStrategy: () => (/* binding */ Ie),\n/* harmony export */   createBigCommercePaymentsAlternativeMethodsPaymentStrategy: () => (/* binding */ mt),\n/* harmony export */   createBigCommercePaymentsButtonStrategy: () => (/* binding */ pe),\n/* harmony export */   createBigCommercePaymentsCreditCardsPaymentStrategy: () => (/* binding */ dt),\n/* harmony export */   createBigCommercePaymentsCustomerStrategy: () => (/* binding */ V),\n/* harmony export */   createBigCommercePaymentsFastlaneCustomerStrategy: () => (/* binding */ ae),\n/* harmony export */   createBigCommercePaymentsFastlanePaymentStrategy: () => (/* binding */ $e),\n/* harmony export */   createBigCommercePaymentsPayLaterButtonStrategy: () => (/* binding */ be),\n/* harmony export */   createBigCommercePaymentsPayLaterCustomerStrategy: () => (/* binding */ le),\n/* harmony export */   createBigCommercePaymentsPayLaterPaymentStrategy: () => (/* binding */ Ye),\n/* harmony export */   createBigCommercePaymentsPaymentStrategy: () => (/* binding */ Ue),\n/* harmony export */   createBigCommercePaymentsRatePayPayPaymentStrategy: () => (/* binding */ Xe),\n/* harmony export */   createBigCommercePaymentsVenmoButtonStrategy: () => (/* binding */ Oe),\n/* harmony export */   createBigCommercePaymentsVenmoCustomerStrategy: () => (/* binding */ ue),\n/* harmony export */   createBigCommercePaymentsVenmoPaymentStrategy: () => (/* binding */ yt)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"../checkout-sdk-js/node_modules/@bigcommerce/form-poster/lib/index.js\");\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"../checkout-sdk-js/node_modules/@bigcommerce/request-sender/esm/index.js\");\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\nvar l,c={};function m(e,t){return Object.assign(e,{resolveIds:t})}c.d=(e,t)=>{for(var i in t)c.o(t,i)&&!c.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class u extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class h extends u{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(l||(l={}));class y extends u{constructor(e){super(function(e){switch(e){case l.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case l.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case l.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case l.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case l.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case l.MissingCheckoutConfig:case l.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case l.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case l.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case l.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case l.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case l.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case l.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class p extends u{constructor(e){super(e||\"An unexpected error has occurred during buy now cart creation process. Please try again later.\"),this.name=\"BuyNowCartCreationError\",this.type=\"buy_now_cart_creation_error\"}}const g={body:{},headers:{},status:0};class v extends u{constructor(e,{message:t,errors:i}={}){const{body:n,headers:o,status:r}=e||g;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=n,this.headers=o,this.status=r,this.errors=i||[]}}var f,b,P,S,I,C,w,O;!function(e){e.BuyNow=\"BUY_NOW\"}(f||(f={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(b||(b={})),function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(P||(P={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(S||(S={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(I||(I={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(C||(C={})),function(e){e.OXXO=\"oxxo\"}(w||(w={})),function(e){e.Approved=\"APPROVED\",e.Created=\"CREATED\",e.PayerActionRequired=\"PAYER_ACTION_REQUIRED\",e.PollingStop=\"POLLING_STOP\",e.PollingError=\"POLLING_ERROR\"}(O||(O={}));var _=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class k{constructor(e,t,i,n){this.formPoster=e,this.paymentIntegrationService=t,this.bigCommercePaymentsRequestSender=i,this.bigCommercePaymentsScriptLoader=n}loadPayPalSdk(e,t,i,n){return _(this,void 0,void 0,function*(){const o=this.paymentIntegrationService.getState(),r=t||o.getCartOrThrow().currency.code,a=o.getPaymentMethodOrThrow(e);return this.paypalSdk=yield this.bigCommercePaymentsScriptLoader.getPayPalSDK(a,r,i,n),this.paypalSdk})}getPayPalSdkOrThrow(){if(!this.paypalSdk)throw new h;return this.paypalSdk}createBuyNowCartOrThrow(e){return _(this,void 0,void 0,function*(){const t=e.getBuyNowCartRequestBody();if(!t)throw new y(l.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(t)}catch(e){throw new p}})}createOrder(e,t){return _(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n}=yield this.bigCommercePaymentsRequestSender.createOrder(e,Object.assign({cartId:i},t));return n})}createOrderCardFields(e,t){return _(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n,setupToken:o}=yield this.bigCommercePaymentsRequestSender.createOrder(e,Object.assign({cartId:i},t));return Object.assign({orderId:n},o?{setupToken:o}:{})})}updateOrder(){return _(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getConsignmentsOrThrow()[0];try{yield this.bigCommercePaymentsRequestSender.updateOrder({availableShippingOptions:i.availableShippingOptions,cartId:t.id,selectedShippingOption:i.selectedShippingOption})}catch(e){throw new v}})}getOrderStatus(e,t){return _(this,void 0,void 0,function*(){try{const{status:i}=yield this.bigCommercePaymentsRequestSender.getOrderStatus(e,t);return i}catch(e){throw new v}})}tokenizePayment(e,t){const i=this.paymentIntegrationService.getState().getCartOrThrow();if(!t)throw new y(l.MissingOrderId);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",action:\"set_external_checkout\",provider:e,order_id:t},i.source===f.BuyNow&&{cart_id:i.id}))}submitPayment(e,t,i){return _(this,void 0,void 0,function*(){const n={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:e,paypal_account:{order_id:t}}};yield this.paymentIntegrationService.submitPayment(Object.assign({methodId:e,paymentData:n},i?{gatewayId:i}:{}))})}getShippingOptionOrThrow(e){const t=this.paymentIntegrationService.getState().getConsignmentsOrThrow()[0],i=t.availableShippingOptions||[],n=i.find(e=>e.isRecommended),o=(e?i.find(t=>t.id===e):i.find(e=>{var i;return e.id===(null===(i=t.selectedShippingOption)||void 0===i?void 0:i.id)}))||n||i[0];if(!o)throw new Error(\"Your order can't be shipped to this address\");return o}getAddress(e){return{firstName:(null==e?void 0:e.firstName)||\"\",lastName:(null==e?void 0:e.lastName)||\"\",email:(null==e?void 0:e.email)||\"\",phone:(null==e?void 0:e.phone)||\"\",company:\"\",address1:(null==e?void 0:e.address1)||\"\",address2:(null==e?void 0:e.address2)||\"\",city:(null==e?void 0:e.city)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",stateOrProvince:\"\",stateOrProvinceCode:(null==e?void 0:e.stateOrProvinceCode)||\"\",customFields:[]}}getBillingAddressFromOrderDetails({payer:e}){var t,i;return this.getAddress({firstName:e.name.given_name,lastName:e.name.surname,email:e.email_address,address1:e.address.address_line_1,address2:e.address.address_line_2,city:e.address.admin_area_2,countryCode:e.address.country_code,postalCode:e.address.postal_code,stateOrProvinceCode:e.address.admin_area_1,phone:null===(i=null===(t=e.phone)||void 0===t?void 0:t.phone_number)||void 0===i?void 0:i.national_number})}getShippingAddressFromOrderDetails(e){const{payer:t,purchase_units:i}=e,{address:n,name:{full_name:o}}=i[0].shipping,[r,...a]=o.split(\" \");return this.getAddress({firstName:r,lastName:a.join(\" \"),email:t.email_address,address1:n.address_line_1,address2:n.address_line_2,city:n.admin_area_2,countryCode:n.country_code,postalCode:n.postal_code,stateOrProvinceCode:n.admin_area_1})}getValidButtonStyle(e){const{color:t,height:i,label:n,shape:o}=e||{},a={color:t&&I[t]?t:void 0,height:this.getValidHeight(i),label:n&&S[n]?n:void 0,shape:o&&C[o]?o:void 0};return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(a,lodash__WEBPACK_IMPORTED_MODULE_3__.isNil)}getValidHeight(e){return e&&\"number\"==typeof e?e>55?55:e<25?25:e:40}removeElement(e){const t=e&&document.getElementById(e);t&&(t.style.display=\"none\")}}const A=\"This API endpoint is for internal use only and may change in the future\";var E;!function(e){e.Json=\"application/json\",e.JsonV1=\"application/vnd.bc.v1+json\"}(E||(E={}));const T=E,z={\"X-Checkout-SDK-Version\":\"1.819.0\"};var F=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class B{constructor(e){this.requestSender=e}createOrder(e,t){return F(this,void 0,void 0,function*(){const i=`/api/storefront/payment/${e}`,n=t,o=Object.assign({\"X-API-INTERNAL\":A,\"Content-Type\":T.Json},z);return(yield this.requestSender.post(i,{headers:o,body:n})).body})}updateOrder(e){return F(this,void 0,void 0,function*(){const t=e,i=Object.assign({\"X-API-INTERNAL\":A,\"Content-Type\":T.Json},z);return(yield this.requestSender.put(\"/api/storefront/initialization/bigcommerce_payments\",{headers:i,body:t})).body})}getOrderStatus(e=\"bigcommerce_payments\",t){return F(this,void 0,void 0,function*(){const i=`/api/storefront/initialization/${e}`,n=Object.assign({\"X-API-INTERNAL\":A,\"Content-Type\":T.Json},z);return(yield this.requestSender.get(i,Object.assign({headers:n},t))).body})}}var D=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class x{constructor(e){this.scriptLoader=e,this.window=window}getPayPalSDK(e,t,i,n){return D(this,void 0,void 0,function*(){const o=this.getPayPalSdkScriptConfigOrThrow(e,t,i);return this.loadPayPalSDK(o,n)})}loadPayPalSDK(e,t=!1){return D(this,void 0,void 0,function*(){if(!this.window.paypal||t){const t=this.transformConfig(e.options),i=this.transformConfig(e.attributes),n=`https://www.paypal.com/sdk/js?${new URLSearchParams(t).toString()}`;yield this.scriptLoader.loadScript(n,{async:!0,attributes:i})}if(!this.window.paypal)throw new h;return this.window.paypal})}getPayPalSdkScriptConfigOrThrow(e,t,i=!0){const{id:n,clientToken:o,initializationData:r}=e;if(!(null==r?void 0:r.clientId))throw new y(l.MissingPaymentMethod);const{intent:a,clientId:s,merchantId:d,buyerCountry:c,attributionId:m,isVenmoEnabled:u,isHostedCheckoutEnabled:h,isPayPalCreditAvailable:p,isDeveloperModeApplicable:g,availableAlternativePaymentMethods:v=[],enabledAlternativePaymentMethods:f=[],isGooglePayEnabled:b}=r,P=h||i,S=\"bigcommerce_payments_creditcards\"===n,I=S?[\"card\"]:[],C=S?[]:[\"card\"],w=p?[\"credit\",\"paylater\"]:[],O=p?[]:[\"credit\",\"paylater\"],_=i||!P,k=u?[\"venmo\"]:[],A=u?[]:[\"venmo\"],E=_?f:[],T=_?v.filter(e=>!f.includes(e)):v,z=b?[\"googlepay\"]:[],F=i?[\"card-fields\"]:[],B=this.filterFundingOptions([...C,...O,...A,...T]),D=this.filterFundingOptions([...I,...w,...k,...E]);return{options:Object.assign({\"client-id\":s,\"merchant-id\":d,\"enable-funding\":D.length>0?D:void 0,\"disable-funding\":B.length>0?B:void 0,commit:P,components:[\"buttons\",\"hosted-fields\",\"payment-fields\",\"legal\",...z,...F],currency:t,intent:a},g&&{\"buyer-country\":c}),attributes:{\"data-partner-attribution-id\":m,\"data-client-token\":o}}}filterFundingOptions(e){const t=[\"klarna\"];return e?e.filter(e=>!t.includes(e)):[]}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}const M=i=>{const{getHost:o}=i.getState();return new k((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__.createFormPoster)(),i,new B((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_1__.createRequestSender)({host:o()})),new x((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__.getScriptLoader)()))};class N extends u{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}var U=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class j{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return U(this,void 0,void 0,function*(){const{bigcommerce_payments:t,methodId:i}=e;if(!i)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.bigcommerce_payments\" argument is not provided.');if(!t.container)throw new N('Unable to initialize payment because \"options.bigcommerce_payments.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new N('Unable to initialize payment because \"options.bigcommerce_payments.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return U(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signInCustomer(e,t),Promise.resolve()})}signOut(e){return U(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onClick:n,onComplete:o}=t,r=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d}=a.initializationData||{},{checkoutTopButtonStyles:l}=d||{},c=Object.assign({createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments\"),onApprove:({orderID:t})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(e,t)},n&&{onClick:()=>n()}),m={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,o)},u=Object.assign(Object.assign({fundingSource:r.FUNDING.PAYPAL,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},l),{height:36}))},c),s&&m),h=r.Buttons(u);h.isEligible()?h.render(`#${i}`):this.bigCommercePaymentsIntegrationService.removeElement(i)}onHostedCheckoutApprove(e,t,i,n){return U(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return U(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return U(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const V=m(e=>new j(e,M(e)),[{id:\"bigcommerce_payments\"}]);var R,L,$,q,H,G,Y,W,K=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class J{constructor(e){this.scriptLoader=e,this.window=window}getPayPalFastlaneSdk(e,t,i){return K(this,void 0,void 0,function*(){if(!this.window.paypalFastlaneSdk){const n=this.getPayPalFastlaneSdkConfiguration(e,t,i);if(yield this.loadPayPalSdk(n),!this.window.paypalFastlaneSdk)throw new h}return this.window.paypalFastlaneSdk})}getPayPalGooglePaySdk(e,t,i,n){return K(this,void 0,void 0,function*(){if(!this.window.paypalGooglePay||n){const n=this.getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i);yield this.loadPayPalSdk(n)}if(!this.window.paypalGooglePay)throw new h;return this.window.paypalGooglePay})}getPayPalApmsSdk(e,t){return K(this,void 0,void 0,function*(){if(!this.window.paypalApms){const i=this.getPayPalApmSdkConfiguration(e,t);if(yield this.loadPayPalSdk(i),!this.window.paypalApms)throw new h}return this.window.paypalApms})}getPayPalMessages(e,t){return K(this,void 0,void 0,function*(){if(!this.window.paypalMessages){const i=this.getPayPalSdkMessagesConfiguration(e,t);yield this.loadPayPalSdk(i)}if(!this.window.paypalMessages)throw new h;return this.window.paypalMessages})}loadPayPalSdk({options:e,attributes:t}){return K(this,void 0,void 0,function*(){const i=this.transformConfig(e),n=this.transformConfig(t),o=`https://www.paypal.com/sdk/js?${new URLSearchParams(i).toString()}`;yield this.scriptLoader.loadScript(o,{async:!0,attributes:n})})}getPayPalFastlaneSdkConfiguration(e,t,i){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new y(l.MissingPaymentMethod);const{intent:r,clientId:a,merchantId:s,attributionId:d}=o;return{options:{\"client-id\":a,\"merchant-id\":s,commit:!0,components:[\"fastlane\",\"three-domain-secure\"],currency:t,intent:r},attributes:{\"data-client-metadata-id\":i.replace(/-/g,\"\"),\"data-namespace\":\"paypalFastlaneSdk\",\"data-partner-attribution-id\":d,\"data-sdk-client-token\":n}}}getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i=!0){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new y(l.MissingPaymentMethod);const{intent:r,clientId:a,merchantId:s,buyerCountry:d,attributionId:c,isHostedCheckoutEnabled:m,isDeveloperModeApplicable:u}=o,h=m||i;return{options:Object.assign({\"client-id\":a,\"merchant-id\":s,commit:h,components:[\"googlepay\"],currency:t,intent:r},u&&{\"buyer-country\":d}),attributes:{\"data-partner-attribution-id\":c,\"data-client-token\":n,\"data-namespace\":\"paypalGooglePay\"}}}getPayPalApmSdkConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new y(l.MissingPaymentMethod);const{intent:n,clientId:o,merchantId:r,buyerCountry:a,attributionId:s,isDeveloperModeApplicable:d,availableAlternativePaymentMethods:c=[],enabledAlternativePaymentMethods:m=[]}=i,u=this.filterFundingOptions(m),h=this.filterFundingOptions(c.filter(e=>!m.includes(e)));return{options:Object.assign({\"client-id\":o,\"merchant-id\":r,\"enable-funding\":u.length>0?u:void 0,\"disable-funding\":h.length>0?h:void 0,commit:!0,components:[\"buttons\",\"payment-fields\"],currency:t,intent:n},d&&{\"buyer-country\":a}),attributes:{\"data-partner-attribution-id\":s,\"data-namespace\":\"paypalApms\"}}}getPayPalSdkMessagesConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new y(l.MissingPaymentMethod);const{clientId:n,merchantId:o,attributionId:r,isDeveloperModeApplicable:a,buyerCountry:s}=i;return{options:Object.assign({\"client-id\":n,\"merchant-id\":o,components:[\"messages\"],currency:t},a&&{\"buyer-country\":s}),attributes:{\"data-namespace\":\"paypalMessages\",\"data-partner-attribution-id\":r}}}filterFundingOptions(e){const t=[\"klarna\"];return e?e.filter(e=>!t.includes(e)):[]}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}function X(){return new J((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__.createScriptLoader)())}!function(e){e.CVV=\"cvv\",e.PAN=\"pan\"}(R||(R={}));class Z{static get(e){const t=`${encodeURIComponent(`${e}`)}=`,i=document.cookie;let n=null;const o=i.indexOf(t);if(o>-1){let e=i.indexOf(\";\",o);-1===e&&(e=i.length),n=decodeURIComponent(i.substring(o+t.length,e))}return n}static set(e,t,i={secure:!0}){let n=`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;const{expires:o,path:r,domain:a,secure:s}=i;if(o)n+=`; expires=${o.toUTCString()}`;else{const e=new Date,t=60;e.setTime(e.getTime()+60*t*1e3),n+=`; expires=${e.toUTCString()}`}r&&(n+=`; path=${r}`),a&&(n+=`; domain=${a}`),s&&(n+=\"; secure\"),document.cookie=n}static remove(e,t){Z.set(e,\"\",Object.assign({expires:new Date(0)},t))}}!function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(L||(L={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}($||($={})),function(e){e.Succeeded=\"succeeded\",e.Cancelled=\"cancelled\",e.Errored=\"errored\"}(q||(q={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(H||(H={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(G||(G={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(Y||(Y={})),function(e){e.SUCCEEDED=\"succeeded\",e.FAILED=\"failed\",e.CANCELED=\"canceled\",e.UNRECOGNIZED=\"unrecognized\"}(W||(W={}));var Q=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ee{constructor(){this.window=window}initializePayPalFastlane(e,t,i){return Q(this,void 0,void 0,function*(){if(t&&(window.localStorage.setItem(\"fastlaneEnv\",\"sandbox\"),window.localStorage.setItem(\"axoEnv\",\"sandbox\")),!this.window.paypalFastlane){const t={root:{backgroundColorPrimary:\"transparent\"}};this.window.paypalFastlane=yield e.Fastlane({styles:i||t})}return this.window.paypalFastlane})}getPayPalFastlaneOrThrow(){if(!this.window.paypalFastlane)throw new h;return this.window.paypalFastlane}lookupCustomerOrThrow(e){return Q(this,void 0,void 0,function*(){return this.getPayPalFastlaneOrThrow().identity.lookupCustomerByEmail(e)})}triggerAuthenticationFlowOrThrow(e){return Q(this,void 0,void 0,function*(){return e?this.getPayPalFastlaneOrThrow().identity.triggerAuthenticationFlow(e):{}})}updateStorageSessionId(e){const t=new Date;t.setDate(t.getDate()+14);const i={expires:t,secure:!0};Z.set(\"bc-fastlane-sessionId\",e,i)}removeStorageSessionId(){Z.remove(\"bc-fastlane-sessionId\")}getStorageSessionId(){return Z.get(\"bc-fastlane-sessionId\")||\"\"}mapPayPalFastlaneProfileToBcCustomerData(e,t){var i,n,o;const{authenticationState:r,profileData:a}=t,s=null===(o=null===(n=null===(i=null==a?void 0:a.card)||void 0===i?void 0:i.paymentSource)||void 0===n?void 0:n.card)||void 0===o?void 0:o.billingAddress,d=null==a?void 0:a.shippingAddress,l=null==a?void 0:a.name,c=null==a?void 0:a.card,m=d?this.mapPayPalToBcAddress(d.address,d.name,d.phoneNumber):void 0,u=s&&l?this.mapPayPalToBcAddress(s,l,null==d?void 0:d.phoneNumber):void 0,h=c?this.mapPayPalToBcInstrument(e,c):[],y=this.filterAddresses([m,u]);return{authenticationState:r||W.UNRECOGNIZED,addresses:y,billingAddress:u,shippingAddress:m,instruments:h}}mapPayPalToBcInstrument(e,t){const{id:i,paymentSource:n}=t,{brand:o,expiry:r,lastDigits:a}=n.card,[s,d]=r.split(\"-\");return[{bigpayToken:i,brand:o,defaultInstrument:!1,expiryMonth:d,expiryYear:s,iin:\"\",last4:a,method:e,provider:e,trustedShippingAddress:!1,untrustedShippingCardVerificationMode:R.PAN,type:\"card\"}]}mapBcToPayPalAddress(e){return{company:(null==e?void 0:e.company)||\"\",addressLine1:(null==e?void 0:e.address1)||\"\",addressLine2:(null==e?void 0:e.address2)||\"\",adminArea1:(null==e?void 0:e.stateOrProvinceCode)||(null==e?void 0:e.stateOrProvince)||\"\",adminArea2:(null==e?void 0:e.city)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\"}}mapPayPalToBcAddress(e,t,i,n){const[o,r]=t.fullName.split(\" \"),a=(null==i?void 0:i.nationalNumber)||\"\",s=(null==i?void 0:i.countryCode)||\"\";return{id:Date.now(),type:\"paypal-address\",firstName:t.firstName||o||\"\",lastName:t.lastName||r||\"\",company:e.company||\"\",address1:e.addressLine1,address2:e.addressLine2||\"\",city:e.adminArea2,stateOrProvince:e.adminArea1,stateOrProvinceCode:e.adminArea1,country:e.countryCode||\"\",countryCode:e.countryCode||\"\",postalCode:e.postalCode,phone:s+a,customFields:n||[]}}filterAddresses(e){return e.reduce((e,t)=>t?e.some(e=>this.isEqualAddresses(e,t))?e:[...e,t]:e,[])}isEqualAddresses(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.isEqual)(this.normalizeAddress(e),this.normalizeAddress(t))}normalizeAddress(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omit)(e,[\"id\",\"phone\"])}}function te(){return new ee}function ie(e){return\"string\"!=typeof e}function ne(e,t){if(t||e)return function(e){var t,i;const n={},o=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.root,ie),r=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.input,ie),a=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.toggle,ie),s=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(t=e.text)||void 0===t?void 0:t.body,ie),l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(i=e.text)||void 0===i?void 0:i.caption,ie),c=e.branding;return Object.keys(o).length&&(n.root=o),Object.keys(r).length&&(n.input=r),Object.keys(a).length&&(n.toggle=a),Object.keys(s).length&&(n.text={},n.text.body=s),Object.keys(l).length&&(n.text=Object.assign({},n.text),n.text.caption=l),c&&(n.branding=c),n}(function(e,t){var i,n,o,r,a,s,d,l,c,m,u,h,y,p,g,v,f,b,P,S,I,C;return{root:{backgroundColorPrimary:(null==e?void 0:e.fastlaneRootSettingsBackgroundColor)||(null===(i=null==t?void 0:t.root)||void 0===i?void 0:i.backgroundColorPrimary),errorColor:(null==e?void 0:e.fastlaneRootSettingsErrorColor)||(null===(n=null==t?void 0:t.root)||void 0===n?void 0:n.errorColor),fontFamily:(null==e?void 0:e.fastlaneRootSettingsFontFamily)||(null===(o=null==t?void 0:t.root)||void 0===o?void 0:o.fontFamily),fontSizeBase:(null==e?void 0:e.fastlaneRootSettingsFontSize)||(null===(r=null==t?void 0:t.root)||void 0===r?void 0:r.fontSizeBase),padding:(null==e?void 0:e.fastlaneRootSettingsPadding)||(null===(a=null==t?void 0:t.root)||void 0===a?void 0:a.padding),primaryColor:(null==e?void 0:e.fastlaneRootSettingsPrimaryColor)||(null===(s=null==t?void 0:t.root)||void 0===s?void 0:s.primaryColor)},input:{borderRadius:(null==e?void 0:e.fastlaneInputSettingsBorderRadius)||(null===(d=null==t?void 0:t.input)||void 0===d?void 0:d.borderRadius),borderColor:(null==e?void 0:e.fastlaneInputSettingsBorderColor)||(null===(l=null==t?void 0:t.input)||void 0===l?void 0:l.borderColor),focusBorderColor:(null==e?void 0:e.fastlaneInputSettingsFocusBorderBase)||(null===(c=null==t?void 0:t.input)||void 0===c?void 0:c.focusBorderColor),backgroundColor:(null==e?void 0:e.fastlaneInputSettingsBackgroundColor)||(null===(m=null==t?void 0:t.input)||void 0===m?void 0:m.backgroundColor),borderWidth:(null==e?void 0:e.fastlaneInputSettingsBorderWidth)||(null===(u=null==t?void 0:t.input)||void 0===u?void 0:u.borderWidth),textColorBase:(null==e?void 0:e.fastlaneInputSettingsTextColorBase)||(null===(h=null==t?void 0:t.input)||void 0===h?void 0:h.textColorBase)},toggle:{colorPrimary:(null==e?void 0:e.fastlaneToggleSettingsColorPrimary)||(null===(y=null==t?void 0:t.toggle)||void 0===y?void 0:y.colorPrimary),colorSecondary:(null==e?void 0:e.fastlaneToggleSettingsColorSecondary)||(null===(p=null==t?void 0:t.toggle)||void 0===p?void 0:p.colorSecondary)},text:{body:{color:(null==e?void 0:e.fastlaneTextBodySettingsColor)||(null===(v=null===(g=null==t?void 0:t.text)||void 0===g?void 0:g.body)||void 0===v?void 0:v.color),fontSize:(null==e?void 0:e.fastlaneTextBodySettingsFontSize)||(null===(b=null===(f=null==t?void 0:t.text)||void 0===f?void 0:f.body)||void 0===b?void 0:b.fontSize)},caption:{color:(null==e?void 0:e.fastlaneTextCaptionSettingsColor)||(null===(S=null===(P=null==t?void 0:t.text)||void 0===P?void 0:P.caption)||void 0===S?void 0:S.color),fontSize:(null==e?void 0:e.fastlaneTextCaptionSettingsFontSize)||(null===(C=null===(I=null==t?void 0:t.text)||void 0===I?void 0:I.caption)||void 0===C?void 0:C.fontSize)}},branding:(null==e?void 0:e.fastlaneBrandingSettings)||(null==t?void 0:t.branding)}}(e,t))}var oe=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class re{constructor(e,t,i){this.paymentIntegrationService=e,this.bigCommercePaymentsSdk=t,this.bigCommercePaymentsFastlaneUtils=i}initialize(e){var t;return oe(this,void 0,void 0,function*(){const{methodId:i,bigcommerce_payments_fastlane:n}=e;if(!i)throw new N('Unable to proceed because \"methodId\" argument is not provided.');try{yield this.paymentIntegrationService.loadPaymentMethod(i);const e=this.paymentIntegrationService.getState(),o=e.getCartOrThrow(),r=e.getPaymentMethodOrThrow(i),a=!!(null===(t=r.initializationData)||void 0===t?void 0:t.isDeveloperModeApplicable),s=yield this.bigCommercePaymentsSdk.getPayPalFastlaneSdk(r,o.currency.code,o.id);yield this.bigCommercePaymentsFastlaneUtils.initializePayPalFastlane(s,a,this.getFastlaneStyles(i,n))}catch(e){}return Promise.resolve()})}deinitialize(){return oe(this,void 0,void 0,function*(){return Promise.resolve()})}signIn(e,t){return oe(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return oe(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){return oe(this,void 0,void 0,function*(){const{checkoutPaymentMethodExecuted:t,continueWithCheckoutCallback:i,methodId:n}=e||{};if(!n)throw new N('Unable to proceed because \"methodId\" argument is not provided.');if(\"function\"!=typeof i)throw new N('Unable to proceed because \"continueWithCheckoutCallback\" argument is not provided and it must be a function.');if(this.paymentIntegrationService.getState().getCustomerOrThrow().isGuest){t&&\"function\"==typeof t&&t();try{yield this.runPayPalAuthenticationFlowOrThrow(n)}catch(e){}}i()})}runPayPalAuthenticationFlowOrThrow(e){return oe(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow().id,n=t.getCustomer(),o=t.getBillingAddress(),r=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:a}=yield this.bigCommercePaymentsFastlaneUtils.lookupCustomerOrThrow(r),s=yield this.bigCommercePaymentsFastlaneUtils.triggerAuthenticationFlowOrThrow(a),d=s.authenticationState===W.CANCELED;yield this.updateCustomerDataState(e,s),d?this.bigCommercePaymentsFastlaneUtils.removeStorageSessionId():this.bigCommercePaymentsFastlaneUtils.updateStorageSessionId(i)})}updateCustomerDataState(e,t){var i;return oe(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getCartOrThrow(),{authenticationState:o,addresses:r,billingAddress:a,shippingAddress:s,instruments:d}=this.bigCommercePaymentsFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,t);if(yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:o,addresses:r,instruments:d}),a&&(yield this.paymentIntegrationService.updateBillingAddress(a)),s&&n.lineItems.physicalItems.length>0){const t=yield this.paymentIntegrationService.updateShippingAddress(s),n=t.getPaymentMethodOrThrow(e),{isFastlaneShippingOptionAutoSelectEnabled:o}=n.initializationData||{},r=t.getConsignments()||[],a=(null===(i=r[0])||void 0===i?void 0:i.availableShippingOptions)||[],d=a[0],l=a.find(e=>e.isRecommended);if((l||d)&&o){const e=(null==l?void 0:l.id)||d.id;yield this.paymentIntegrationService.selectShippingOption(e)}}})}getFastlaneStyles(e,t){const i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{fastlaneStyles:n,isFastlaneStylingEnabled:o}=i.initializationData||{};return ne(o?n:{},null==t?void 0:t.styles)}}const ae=m(e=>new re(e,X(),te()),[{id:\"bigcommerce_payments_fastlane\"},{id:\"bigcommerce_payments_creditcards\"}]);var se=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class de{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return se(this,void 0,void 0,function*(){const{bigcommerce_payments_paylater:t,methodId:i}=e;if(!i)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater\" argument is not provided.');if(!t.container)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC BigCommercePayments PayLater]: button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return se(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return se(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onComplete:n,onClick:o}=t,r=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d}=a.initializationData||{},{checkoutTopButtonStyles:l}=d||{},c=Object.assign({createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_paylater\"),onApprove:({orderID:t})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(e,t)},o&&{onClick:()=>o()}),m={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,n)},u=[r.FUNDING.PAYLATER,r.FUNDING.CREDIT];let h=!1;u.forEach(e=>{if(!h){const t=Object.assign(Object.assign({fundingSource:e,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},l),{height:36}))},c),s&&m),n=r.Buttons(t);n.isEligible()&&(n.render(`#${i}`),h=!0)}}),h||this.bigCommercePaymentsIntegrationService.removeElement(i)}onHostedCheckoutApprove(e,t,i,n){return se(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return se(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return se(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const le=m(e=>new de(e,M(e)),[{id:\"bigcommerce_payments_paylater\"}]);var ce=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class me{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){return ce(this,void 0,void 0,function*(){const{bigcommerce_payments_venmo:t,methodId:i}=e;if(!i)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo\" argument is not provided.');if(!t.container)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo.onClick\" argument is not a function.');this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC Payments Venmo]: Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return ce(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return ce(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onClick:n}=t,o=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:a}=r.initializationData||{},{checkoutTopButtonStyles:s}=a||{},d=Object.assign({fundingSource:o.FUNDING.VENMO,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},s),{height:36})),createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_venmo\"),onApprove:({orderID:t})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(e,t)},n&&{onClick:()=>n()}),l=o.Buttons(d);l.isEligible()?l.render(`#${i}`):this.bigCommercePaymentsIntegrationService.removeElement(i)}}const ue=m(e=>new me(e,M(e)),[{id:\"bigcommerce_payments_venmo\"}]);var he=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ye{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){var t;return he(this,void 0,void 0,function*(){const{bigcommerce_payments:i,containerId:n,methodId:o}=e,r=Boolean(null==i?void 0:i.buyNowInitializeOptions);if(!o)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new N('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!i)throw new N('Unable to initialize payment because \"options.bigcommerce_payments\" argument is not provided.');if(r&&!i.currencyCode)throw new N('Unable to initialize payment because \"options.bigcommerce_payments.currencyCode\" argument is not provided.');if(r&&\"function\"!=typeof(null===(t=i.buyNowInitializeOptions)||void 0===t?void 0:t.getBuyNowCartRequestBody))throw new N('Unable to initialize payment because \"options.bigcommerce_payments.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');r||(yield this.paymentIntegrationService.loadDefaultCheckout());const a=r?i.currencyCode:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(o,a,!1),this.renderButton(n,o,i)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onComplete:r,onEligibilityFailure:a}=i,s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:l}=d.initializationData||{},c={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},m={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},u={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,r)},h=Object.assign(Object.assign(Object.assign({fundingSource:s.FUNDING.PAYPAL,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(o)},c),n&&m),l&&u),y=s.Buttons(h);y.isEligible()?y.render(`#${e}`):a&&\"function\"==typeof a?a():this.bigCommercePaymentsIntegrationService.removeElement(e)}handleClick(e){return he(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,i,n){return he(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return he(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return he(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}}const pe=m(e=>new ye(e,M(e)),[{id:\"bigcommerce_payments\"}]),ge=function({styles:e}){const t={};return e.color&&(t.color=e.color),e.layout&&(t.layout=e.layout),(e[\"logo-type\"]||e[\"logo-position\"])&&(t.logo={},e[\"logo-type\"]&&(t.logo.type=e[\"logo-type\"]),e[\"logo-position\"]&&(t.logo.position=e[\"logo-position\"])),e.ratio&&(t.ratio=e.ratio),(e[\"text-color\"]||e[\"text-size\"])&&(t.text={},e[\"text-color\"]&&(t.text.color=e[\"text-color\"]),e[\"text-size\"]&&(t.text.size=+e[\"text-size\"])),t};var ve=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class fe{constructor(e,t,i){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.payPalSdkHelper=i}initialize(e){return ve(this,void 0,void 0,function*(){const{bigcommerce_payments_paylater:t,containerId:i,methodId:n}=e,{buyNowInitializeOptions:o,currencyCode:r,messagingContainerId:a}=t||{},s=!!o;if(!n)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new N('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater\" argument is not provided.');if(s&&!r)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater.currencyCode\" argument is not provided.');if(s&&\"function\"!=typeof(null==o?void 0:o.getBuyNowCartRequestBody))throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');s||(yield this.paymentIntegrationService.loadDefaultCheckout());const d=this.paymentIntegrationService.getState(),l=s?r:d.getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n,l,!1),this.renderButton(i,n,t);const c=a&&document.getElementById(a);if(l&&c){const e=d.getPaymentMethodOrThrow(n),{paypalBNPLConfiguration:t=[]}=e.initializationData||{},i=t&&t.find(({id:e})=>\"cart\"===e);if(!(null==i?void 0:i.status))return;c.removeAttribute(\"data-pp-style-logo-type\"),c.removeAttribute(\"data-pp-style-logo-position\"),c.removeAttribute(\"data-pp-style-text-color\"),c.removeAttribute(\"data-pp-style-text-size\");const o=yield this.payPalSdkHelper.getPayPalMessages(e,l);this.renderMessages(o,a,i)}})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onComplete:r,onEligibilityFailure:a}=i,s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:l}=d.initializationData||{},c={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_paylater\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},m={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},u={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,r)},h=[s.FUNDING.PAYLATER,s.FUNDING.CREDIT];let y=!1;h.forEach(t=>{if(!y){const i=Object.assign(Object.assign(Object.assign({fundingSource:t,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(o)},c),n&&m),l&&u),r=s.Buttons(i);r.isEligible()?(r.render(`#${e}`),y=!0):a&&\"function\"==typeof a&&a()}}),y||this.bigCommercePaymentsIntegrationService.removeElement(e)}handleClick(e){return ve(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,i,n){return ve(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return ve(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return ve(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"cart\",style:ge(i)};e.Messages(n).render(`#${t}`)}}const be=m(e=>new fe(e,M(e),X()),[{id:\"bigcommerce_payments_paylater\"}]);var Pe=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Se{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){return Pe(this,void 0,void 0,function*(){const{bigcommerce_payments_apms:t,containerId:i,methodId:n}=e,{apm:o,buyNowInitializeOptions:r,currencyCode:a}=t||{},s=!!r;if(!n)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new N('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_apms\" argument is not provided.');if(!o)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_apms.apm\" argument is not provided.');if(s&&!a)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_apms.currencyCode\" argument is not provided.');if(s&&\"function\"!=typeof(null==r?void 0:r.getBuyNowCartRequestBody))throw new N('Unable to initialize payment because \"options.bigcommerce_payments_apms.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');s||(yield this.paymentIntegrationService.loadDefaultCheckout());const d=s?a:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n,d,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{apm:n,buyNowInitializeOptions:o,style:r,onEligibilityFailure:a}=i,s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow();if(!Object.values(s.FUNDING).includes(n))throw new N('Unable to initialize PayPal button because \"options.bigcommerce_payments_apms.apm\" argument is not valid funding source.');const d={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apms\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(o),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:n,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r)},d),o&&l),m=s.Buttons(c);m.isEligible()?m.render(`#${e}`):a&&\"function\"==typeof a?a():this.bigCommercePaymentsIntegrationService.removeElement(e)}handleClick(e){return Pe(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const Ie=m(e=>new Se(e,M(e)),[{id:\"bigcommerce_payments_apms\"}]);var Ce=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class we{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){return Ce(this,void 0,void 0,function*(){const{bigcommerce_payments_venmo:t,containerId:i,methodId:n}=e,{buyNowInitializeOptions:o,currencyCode:r}=t||{},a=!!o;if(!n)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new N('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo\" argument is not provided.');if(a&&!r)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo.currencyCode\" argument is not provided.');if(a&&\"function\"!=typeof(null==o?void 0:o.getBuyNowCartRequestBody))throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');a||(yield this.paymentIntegrationService.loadDefaultCheckout());const s=a?r:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n,s,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onEligibilityFailure:r}=i,a=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),s=a.FUNDING.VENMO,d={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_venmo\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:s,style:this.getValidVenmoButtonStyles(o)},d),n&&l),m=a.Buttons(c);m.isEligible()?m.render(`#${e}`):r&&\"function\"==typeof r?r():this.bigCommercePaymentsIntegrationService.removeElement(e)}getValidVenmoButtonStyles(e){const t=this.bigCommercePaymentsIntegrationService.getValidButtonStyle(e);return t.color===I.gold?Object.assign(Object.assign({},t),{color:void 0}):t}handleClick(e){return Ce(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const Oe=m(e=>new we(e,M(e)),[{id:\"bigcommerce_payments_venmo\"}]),_e={size:70,color:\"#d9d9d9\",backgroundColor:\"#ffffff\"},ke=\"embedded-checkout-loading-indicator-rotation\";class Ae{constructor(e){this.styles=Object.assign(Object.assign({},_e),e&&e.styles),this.containerStyles=Object.assign({},e&&e.containerStyles),this.defineAnimation(),this.container=this.buildContainer(),this.indicator=this.buildIndicator(),this.container.appendChild(this.indicator)}show(e){if(e){const t=document.getElementById(e);if(!t)throw new Error(\"Unable to attach the loading indicator because the parent ID is not valid.\");t.appendChild(this.container)}this.container.style.visibility=\"visible\",this.container.style.opacity=\"1\"}hide(){const e=()=>{this.container.style.visibility=\"hidden\",this.container.removeEventListener(\"transitionend\",e)};this.container.addEventListener(\"transitionend\",e),this.container.style.opacity=\"0\"}buildContainer(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.bottom=\"0\",e.style.left=\"0\",e.style.height=\"100%\",e.style.width=\"100%\",e.style.position=\"absolute\",e.style.right=\"0\",e.style.top=\"0\",e.style.transition=\"all 250ms ease-out\",e.style.opacity=\"0\",this.setStyleAttribute(e,this.containerStyles),e}buildIndicator(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.width=`${this.styles.size}px`,e.style.height=`${this.styles.size}px`,e.style.borderRadius=`${this.styles.size}px`,e.style.border=\"solid 1px\",e.style.borderColor=`${this.styles.backgroundColor} ${this.styles.backgroundColor} ${this.styles.color} ${this.styles.color}`,e.style.margin=\"0 auto\",e.style.position=\"absolute\",e.style.left=\"0\",e.style.right=\"0\",e.style.top=\"50%\",e.style.transform=\"translateY(-50%) rotate(0deg)\",e.style.transformStyle=\"preserve-3d\",e.style.animation=`${ke} 500ms infinite cubic-bezier(0.69, 0.31, 0.56, 0.83)`,e}setStyleAttribute(e,t){Object.keys(t).forEach(i=>{e.style.setProperty(i,t[i])})}defineAnimation(){var e;if(document.getElementById(ke))return;const t=document.createElement(\"style\");t.id=ke,null===(e=document.head)||void 0===e||e.appendChild(t),t.sheet instanceof CSSStyleSheet&&t.sheet.insertRule(`\\n                @keyframes ${ke} {\\n                    0% { transform: translateY(-50%) rotate(0deg); }\\n                    100% { transform: translateY(-50%) rotate(360deg); }\\n                }\\n            `,0)}}const Ee={\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"};class Te extends N{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}class ze extends v{constructor(e){super(e,{message:\"There is a problem processing your payment. Please try again later.\"}),this.name=\"PaymentMethodInvalidError\",this.type=\"payment_method_invalid\"}}class Fe extends u{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}function Be(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}function De(e){return Boolean(e.instrumentId)}function xe(e){return\"object\"==typeof e&&null!==e&&\"bigpayToken\"in e&&\"defaultInstrument\"in e&&\"provider\"in e&&\"trustedShippingAddress\"in e&&\"method\"in e&&\"type\"in e}var Me=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ne{constructor(e,t,i){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=i}initialize(e){var t,i;return Me(this,void 0,void 0,function*(){const{methodId:n,bigcommerce_payments:o}=e||{};if(this.bigcommerce_payments=o,!n)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new N('Unable to initialize payment because \"options.bigcommerce_payments\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(n);const r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n);this.loadingIndicatorContainer=o.container.split(\"#\")[1],(null===(t=r.initializationData)||void 0===t?void 0:t.orderId)?this.orderId=null===(i=r.initializationData)||void 0===i?void 0:i.orderId:(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n),o.onInit&&\"function\"==typeof o.onInit&&o.onInit(()=>this.renderButton(n,o)),(void 0===o.shouldRenderPayPalButtonOnInitialization||o.shouldRenderPayPalButtonOnInitialization)&&this.renderButton(n,o))})}execute(e,t){return Me(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{onError:o}=this.bigcommerce_payments||{};if(!i)throw new Te([\"payment\"]);const{methodId:r,paymentData:a}=i;if(this.isPayPalVaultedInstrumentPaymentData(a)&&!this.orderId&&(this.orderId=yield this.createOrder()),!this.orderId)throw new ze;const s=this.isPayPalVaultedInstrumentPaymentData(a)?this.prepareVaultedInstrumentPaymentPayload(r,this.orderId,a):this.preparePaymentPayload(r,this.orderId,a);try{yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment(s)}catch(e){return this.isProviderError(e)&&(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i.methodId),yield new Promise((e,t)=>{var n;this.bigcommerce_payments&&(null===(n=this.paypalButton)||void 0===n||n.close(),this.renderButton(i.methodId,this.bigcommerce_payments),this.handleError(new Error(\"INSTRUMENT_DECLINED\"),o)),t()})),this.handleError(e,o),Promise.reject()}})}finalize(){return Promise.reject(new Fe)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}prepareVaultedInstrumentPaymentPayload(e,t,i){const{instrumentId:n,shouldSetAsDefaultInstrument:o}=i,r=!this.isTrustedVaultingFlow(i);return r?{methodId:e,paymentData:{shouldSaveInstrument:r,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}:{methodId:e,paymentData:{instrumentId:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t},bigpay_token:{token:n}}}}}preparePaymentPayload(e,t,i){const{shouldSaveInstrument:n=!1,shouldSetAsDefaultInstrument:o=!1}=Be(i)?i:{};return{methodId:e,paymentData:{shouldSaveInstrument:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}}renderButton(e,t){const i=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:r}=o||{},{container:a,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,m={fundingSource:i.FUNDING.PAYPAL,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r),createOrder:()=>this.createOrder(),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onError:e=>this.handleError(e,s),onCancel:()=>this.toggleLoadingIndicator(!1)};this.paypalButton=i.Buttons(m),this.paypalButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.paypalButton.render(a))}handleClick(e,t){return Me(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;yield t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createOrder(){return Me(this,void 0,void 0,function*(){const e=this.getFieldsValues();return this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_paymentscheckout\",{shouldSaveInstrument:(null==e?void 0:e.shouldSaveInstrument)||!1})})}getFieldsValues(){const{getFieldsValues:e}=this.bigcommerce_payments||{};return\"function\"==typeof e?e():void 0}isTrustedVaultingFlow(e){if(e&&De(e)){const t=this.paymentIntegrationService.getState().getInstruments(),i=null==t?void 0:t.find(t=>xe(t)&&t.bigpayToken===e.instrumentId);return!(xe(i)&&!i.trustedShippingAddress)}return!1}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isPayPalVaultedInstrumentPaymentData(e){return!!e&&De(e)&&Be(e)}isProviderError(e){var t,i,n;return!!function(e){return\"object\"==typeof e&&null!==e&&\"errors\"in e}(e)&&\"INSTRUMENT_DECLINED\"===(null===(n=null===(i=((null===(t=null==e?void 0:e.errors)||void 0===t?void 0:t.filter(e=>e.provider_error))||[])[0])||void 0===i?void 0:i.provider_error)||void 0===n?void 0:n.code)}}const Ue=m(e=>new Ne(e,M(e),new Ae({containerStyles:Ee})),[{id:\"bigcommerce_payments\"}]);function je(e){return!!e&&(\"authenticationState\"in e||\"addresses\"in e||\"instruments\"in e)}function Ve(e,t,i=!0){var n;return null!==(n=e[t])&&void 0!==n?n:i}var Re=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Le{constructor(e,t,i,n){this.paymentIntegrationService=e,this.bigCommercePaymentsRequestSender=t,this.bigCommercePaymentsSdk=i,this.bigCommercePaymentsFastlaneUtils=n}initialize(e){var t,i;return Re(this,void 0,void 0,function*(){const{methodId:n,bigcommerce_payments_fastlane:o}=e;if(!n)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(this.methodId=n,!o)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_fastlane\" argument is not provided.');if(this.bigcommerce_payments_fastlane=o,!o.onInit||\"function\"!=typeof o.onInit)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_fastlane.onInit\" argument is not provided or it is not a function.');if(!o.onChange||\"function\"!=typeof o.onChange)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_fastlane.onChange\" argument is not provided or it is not a function.');yield this.paymentIntegrationService.loadPaymentMethod(n);const r=this.paymentIntegrationService.getState(),a=r.getCartOrThrow(),s=r.getPaymentMethodOrThrow(n),{isDeveloperModeApplicable:d,isFastlaneStylingEnabled:l}=s.initializationData||{};this.threeDSVerificationMethod=null===(t=s.initializationData)||void 0===t?void 0:t.threeDSVerificationMethod,this.paypalFastlaneSdk=yield this.bigCommercePaymentsSdk.getPayPalFastlaneSdk(s,a.currency.code,a.id);const c=ne(l?null===(i=null==s?void 0:s.initializationData)||void 0===i?void 0:i.fastlaneStyles:{},null==o?void 0:o.styles);yield this.bigCommercePaymentsFastlaneUtils.initializePayPalFastlane(this.paypalFastlaneSdk,!!d,c),this.shouldRunAuthenticationFlow()&&(yield this.runPayPalAuthenticationFlowOrThrow(n)),yield this.initializePayPalPaymentComponent(),o.onInit(e=>this.renderPayPalPaymentComponent(e)),o.onChange(()=>this.handlePayPalStoredInstrumentChange(n))})}execute(e,t){return Re(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new Te([\"payment\"]);const{paymentData:o,methodId:r}=i,a=o&&De(o);try{yield this.paymentIntegrationService.submitOrder(n,t);const e=a?yield this.prepareVaultedInstrumentPaymentPayload(r,o):yield this.preparePaymentPayload(r,o);yield this.paymentIntegrationService.submitPayment(e),this.bigCommercePaymentsFastlaneUtils.removeStorageSessionId()}catch(e){if(function(e){return\"object\"==typeof e&&null!==e&&\"message\"in e&&\"response\"in e&&\"name\"in e.response}(e)&&\"INVALID_REQUEST\"===e.response.name){const e={translationKey:\"payment.errors.invalid_request_error\"};return this.handleError(e),Promise.reject()}if(e instanceof Error&&\"FastlaneError\"!==e.name)throw e;return Promise.reject()}})}finalize(){return Promise.reject(new Fe)}deinitialize(){return Re(this,void 0,void 0,function*(){return Promise.resolve()})}shouldRunAuthenticationFlow(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getCustomerOrThrow(),n=e.getPaymentProviderCustomer(),o=je(n)?n:{},r=this.bigCommercePaymentsFastlaneUtils.getStorageSessionId();return!(!i.isGuest||(null==o?void 0:o.authenticationState)===W.CANCELED||(null==o?void 0:o.authenticationState)||r!==t.id)}runPayPalAuthenticationFlowOrThrow(e){return Re(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getCustomer(),o=t.getBillingAddress(),r=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:a}=yield this.bigCommercePaymentsFastlaneUtils.lookupCustomerOrThrow(r),s=yield this.bigCommercePaymentsFastlaneUtils.triggerAuthenticationFlowOrThrow(a),{authenticationState:d,addresses:l,instruments:c}=this.bigCommercePaymentsFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,s);yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:d,addresses:l,instruments:c}),s.authenticationState===W.CANCELED?this.bigCommercePaymentsFastlaneUtils.removeStorageSessionId():this.bigCommercePaymentsFastlaneUtils.updateStorageSessionId(i.id)}catch(e){}})}initializePayPalPaymentComponent(){return Re(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),t=e.phone,i=`${e.firstName} ${e.lastName}`.trim(),n=this.bigCommercePaymentsFastlaneUtils.getPayPalFastlaneOrThrow(),o={fields:Object.assign({cardholderName:{prefill:i,enabled:!0}},t&&{phoneNumber:{prefill:t}})};this.paypalComponentMethods=yield n.FastlaneCardComponent(o)})}renderPayPalPaymentComponent(e){const t=this.getPayPalComponentMethodsOrThrow();if(!e)throw new N('Unable to render card component because \"container\" argument is not provided.');t.render(e)}getPayPalComponentMethodsOrThrow(){if(!this.paypalComponentMethods)throw new h;return this.paypalComponentMethods}prepareVaultedInstrumentPaymentPayload(e,t){return Re(this,void 0,void 0,function*(){const{instrumentId:i}=t,n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),o=this.isBigcommercePaymentsFastlaneThreeDSAvailable()&&n.config.is3dsEnabled;o||(yield this.createOrder(i));const r=o?yield this.get3DSNonce(i):i;return{methodId:e,paymentData:{formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:r}}}}})}preparePaymentPayload(e,t){return Re(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getBillingAddressOrThrow(),o=i.getPaymentMethodOrThrow(e),r=`${n.firstName} ${n.lastName}`.trim(),{getPaymentToken:a}=this.getPayPalComponentMethodsOrThrow(),{id:s}=yield a({name:{fullName:r},billingAddress:this.bigCommercePaymentsFastlaneUtils.mapBcToPayPalAddress(n)}),d=this.isBigcommercePaymentsFastlaneThreeDSAvailable()&&o.config.is3dsEnabled;d||(yield this.createOrder(s));const{shouldSaveInstrument:l=!1,shouldSetAsDefaultInstrument:c=!1}=Be(t)?t:{},m=d?yield this.get3DSNonce(s):s;return{methodId:e,paymentData:Object.assign(Object.assign({},t),{shouldSaveInstrument:l,shouldSetAsDefaultInstrument:c,formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:m}}})}})}createOrder(e){return Re(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getCartOrThrow().id;if(this.methodId){const{orderId:i}=yield this.bigCommercePaymentsRequestSender.createOrder(this.methodId,{cartId:t,fastlaneToken:e});this.orderId=i}})}get3DSNonce(e){var t;return Re(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getCartOrThrow(),o=i.getOrderOrThrow(),r=i.getStoreConfigOrThrow().links.checkoutLink,a=null===(t=this.paypalFastlaneSdk)||void 0===t?void 0:t.ThreeDomainSecureClient;if(!a)throw new h;const s={amount:o.orderAmount.toFixed(2),currency:n.currency.code,nonce:e,threeDSRequested:\"SCA_ALWAYS\"===this.threeDSVerificationMethod,transactionContext:{experience_context:{locale:\"en-US\",return_url:r,cancel_url:r}}};if(yield a.isEligible(s)){const{liabilityShift:t,authenticationState:i,nonce:n}=yield a.show();if(t===b.No||t===b.Unknown)throw new ze;if(yield this.createOrder(e),i===q.Succeeded)return n;if(i===q.Errored)throw new ze;if(i===q.Cancelled)throw console.error(\"3DS check was canceled\"),new ze}return e})}handlePayPalStoredInstrumentChange(e){return Re(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsFastlaneUtils.getPayPalFastlaneOrThrow(),{selectionChanged:i,selectedCard:n}=yield t.profile.showCardSelector();if(i){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomer(),i=je(t)?t:{},o=this.bigCommercePaymentsFastlaneUtils.mapPayPalToBcInstrument(e,n)[0];return yield this.paymentIntegrationService.updatePaymentProviderCustomer(Object.assign(Object.assign({},i),{instruments:[o]})),o}})}isBigcommercePaymentsFastlaneThreeDSAvailable(){return Ve(this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features,\"PROJECT-7080.bcp_fastlane_three_ds\")}handleError(e){var t;(null===(t=this.bigcommerce_payments_fastlane)||void 0===t?void 0:t.onError)&&\"function\"==typeof this.bigcommerce_payments_fastlane.onError&&this.bigcommerce_payments_fastlane.onError(e)}}const $e=m(e=>{const{getHost:i}=e.getState();return new Le(e,new B((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_1__.createRequestSender)({host:i()})),X(),te())},[{id:\"bigcommerce_payments_fastlane\"}]);class qe extends u{constructor(e){super(e||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}var He=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ge{constructor(e,t,i,n){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=i,this.paypalSdkHelper=n}initialize(e){return He(this,void 0,void 0,function*(){const{methodId:t,bigcommerce_payments_paylater:i}=e||{};if(!t)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(t);const n=this.paymentIntegrationService.getState(),o=n.getPaymentMethodOrThrow(t),{paypalBNPLConfiguration:r=[],orderId:a}=o.initializationData||{},{bannerContainerId:s,container:d}=i;if(void 0!==s){if(!document.getElementById(s))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=r&&r.find(({id:e})=>\"checkout\"===e);if(!(null==e?void 0:e.status))return;const t=yield this.paypalSdkHelper.getPayPalMessages(o,n.getCartOrThrow().currency.code);return this.renderMessages(t,s,e)}a?this.orderId=a:(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(t),this.loadingIndicatorContainer=null==d?void 0:d.split(\"#\")[1],this.renderButton(t,i))})}execute(e,t){return He(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new Te([\"payment\"]);if(!this.orderId)throw new ze;yield this.paymentIntegrationService.submitOrder(n,t),yield this.bigCommercePaymentsIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new Fe)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.bigCommercePaymentsButtons)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){if(!(null==t?void 0:t.container))throw new N('Unable to initialize payment because \"container\" argument is not provided.');const i=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:r}=o||{},{container:a,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,m=[i.FUNDING.PAYLATER,i.FUNDING.CREDIT];let u=!1;m.forEach(e=>{if(u)return;const t={fundingSource:e,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r),createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_paylater\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.bigCommercePaymentsButtons=i.Buttons(t),this.bigCommercePaymentsButtons.isEligible()||e!==i.FUNDING.PAYLATER){if(!this.bigCommercePaymentsButtons.isEligible()&&e===i.FUNDING.CREDIT)throw new qe(`BigCommercePayments ${e} is not available for your region. Please use BigCommercePayments Checkout instead.`);d&&\"function\"==typeof d&&d(),this.bigCommercePaymentsButtons.render(a),u=!0}})}handleClick(e,t){return He(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;t&&\"function\"==typeof t&&(yield t(()=>(this.toggleLoadingIndicator(!0),i()),n))})}handleApprove({orderID:e},t){this.orderId=e,t&&\"function\"==typeof t&&t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:ge(i)};e.Messages(n).render(`#${t}`)}}const Ye=m(e=>new Ge(e,M(e),new Ae({containerStyles:Ee}),X()),[{id:\"bigcommerce_payments_paylater\"}]);class We extends v{constructor(e){super(e,{message:\"The request has timed out or aborted.\"}),this.name=\"TimeoutError\",this.type=\"timeout\"}}var Ke=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Je{constructor(e,t,i,n=3e3,o=3e5){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=i,this.pollingInterval=n,this.maxPollingIntervalTime=o,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return Ke(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,bigcommerce_payments_ratepay:n}=e;if(!i)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!n)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_ratepay\" argument is not provided.');const{legalTextContainer:o,container:r,loadingContainerId:a}=n;if(!r)throw new N('Unable to initialize payment because \"options.container\" argument is not provided.');if(!o)throw new N('Unable to initialize payment because \"options.legalTextContainer\" argument is not provided.');if(!a)throw new N('Unable to initialize payment because \"options.loadingContainerId\" argument is not provided.');this.loadingIndicatorContainer=a;const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i,t),{merchantId:d}=s.initializationData||{};if(!d)throw new N(\"Unable to initialize payment because merchantId argument is not provided.\");this.bigcommerce_payments_ratepay=n,yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i),this.createFraudNetScript(d,i,t),this.loadFraudnetConfig(),this.renderLegalText(o,r)})}execute(e,t){return Ke(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{getFieldsValues:o}=this.bigcommerce_payments_ratepay||{};if(!i)throw new Te([\"payment\"]);if(!o||\"function\"!=typeof o)throw new N('Unable to initialize payment because \"options.getFieldsValues\" argument is not provided.');this.toggleLoadingIndicator(!0);try{const e=yield this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apmscheckout\",{metadataId:this.guid}),{ratepayBirthDate:r,ratepayPhoneNumber:a,ratepayPhoneCountryCode:s}=o(),d={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:i.methodId,rate_pay:{birth_date:this.normalizeDate(r),phone:{national_number:a,country_code:s.split(\"+\")[1]}},paypal_account:{order_id:e}}};return yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment({methodId:i.methodId,paymentData:d}),yield new Promise((e,t)=>{this.initializePollingMechanism(i.methodId,e,t,i.gatewayId)})}catch(e){return this.handleError(e),new Promise((e,t)=>t())}})}finalize(){return Promise.reject(new Fe)}deinitialize(){const{legalTextContainer:e}=this.bigcommerce_payments_ratepay||{},t=document.querySelectorAll('[data-id=\"fraudnetScript\"]')[0],i=document.querySelectorAll('[data-id=\"fraudnetConfig\"]')[0];if(this.deinitializePollingMechanism(),t.remove(),i.remove(),e){const t=document.getElementById(e);null==t||t.remove()}return Promise.resolve()}normalizeDate(e){const t=this.formatDate(e.getDate()),i=this.formatDate(e.getMonth()+1);return`${e.getFullYear()}-${i}-${t}`}formatDate(e){return`${e<10?0:\"\"}${e}`}renderLegalText(e,t){const i=e,n=t.split(\"#\")[1],o=document.getElementById(n),r=null==o?void 0:o.parentNode,a=document.createElement(\"div\");a.style.marginBottom=\"20px\",a.setAttribute(\"id\",i),null==r||r.prepend(a);const s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),d=s.Legal({fundingSource:s.Legal.FUNDING.PAY_UPON_INVOICE});if(!document.getElementById(i))throw new N('Unable to initialize payment because \"legalTextContainerElement\" argument is not found.');d.render(`#${i}`)}handleError(e){const{onError:t}=this.bigcommerce_payments_ratepay||{};this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createFraudNetScript(e,t,i){const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t,i),{testMode:o}=n.config,r=document.createElement(\"script\");r.setAttribute(\"type\",\"application/json\"),r.setAttribute(\"fncls\",\"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99\"),r.setAttribute(\"data-id\",\"fraudnetScript\"),this.guid=this.generateGUID();const a={f:this.guid,s:`${e}_checkout-page`,sandbox:o};r.innerHTML=JSON.stringify(a),document.body.appendChild(r)}generateGUID(){let e=\"\";for(let t=0;t<32;t+=1)e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"[Math.floor(62*Math.random())];return e}loadFraudnetConfig(){const e=document.createElement(\"script\");e.setAttribute(\"data-id\",\"fraudnetConfig\"),e.src=\"https://c.paypal.com/da/r/fb.js\",document.body.appendChild(e)}reinitializeStrategy(e){return Ke(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}initializePollingMechanism(e,t,i,n){return Ke(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.bigCommercePaymentsIntegrationService.getOrderStatus(\"bigcommerce_payments_apms\",{params:{useMetadata:!0}}),r=o===O.PollingStop,a=o===O.PollingError;if(r)return this.deinitializePollingMechanism(),t();if(a)return i();if(!r&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,bigcommerce_payments_ratepay:this.bigcommerce_payments_ratepay}),this.handleError(new We)}catch(e){this.handleError(e),i()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const Xe=m(e=>new Je(e,M(e),new Ae({containerStyles:Object.assign(Object.assign({},Ee),{position:\"fixed\"})})),[{gateway:\"bigcommerce_payments_apms\",id:\"ratepay\"}]);var Ze;!function(e){e.CardCode=\"cardCode\",e.CardCodeVerification=\"cardCodeVerification\",e.CardExpiry=\"cardExpiry\",e.CardName=\"cardName\",e.CardNumber=\"cardNumber\",e.CardNumberVerification=\"cardNumberVerification\",e.CardExpiryVerification=\"cardExpiryVerification\"}(Ze||(Ze={}));const Qe=Ze;function et(e){return Qe.CardNumber in e&&Qe.CardName in e&&Qe.CardExpiry in e}function tt(e){return Qe.CardNumberVerification in e&&Qe.CardCodeVerification in e&&Qe.CardExpiryVerification in e}class it extends u{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}var nt;!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(nt||(nt={}));class ot extends u{constructor(e){super(function(e){switch(e){case nt.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case nt.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case nt.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case nt.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}class rt extends u{constructor(e,t){super(t||\"Unable to proceed because the payment form contains invalid data.\"),this.details=e,this.name=\"PaymentInvalidFormError\",this.type=\"payment_invalid_form\"}}var at=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class st{constructor(e,t,i,n){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.bigCommercePaymentsSdk=i,this.bigCommercePaymentsFastlaneUtils=n}initialize(e){return at(this,void 0,void 0,function*(){const{methodId:t,bigcommerce_payments_creditcards:i}=e,n=i,{form:o,onCreditCardFieldsRenderingError:r,onLoadComplete:a}=n||{};if(!t)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new N('Unable to proceed because \"options.bigcommerce_payments_creditcards.form\" argument is not provided.');this.hostedFormOptions=o,this.isCreditCardForm=et(o.fields),this.isCreditCardVaultedForm=tt(o.fields)&&!this.hasUndefinedValues(),yield this.paymentIntegrationService.loadPaymentMethod(t),yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(t,void 0,!0,!0),null==a||a(),(this.isCreditCardForm||this.isCreditCardVaultedForm)&&(yield this.initializeFields(o,r)),this.shouldInitializePayPalFastlane(t)&&(yield this.initializePayPalFastlaneOrThrow(t))})}execute(e,t){return at(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{methodId:o,paymentData:r}=i||{};if(!i||!o)throw new Te([\"payment\"]);if(this.executionPaymentData=r,this.isCreditCardForm||this.isCreditCardVaultedForm)yield this.validateHostedFormOrThrow(),yield this.submitHostedForm();else{const{orderId:e}=yield this.bigCommercePaymentsIntegrationService.createOrderCardFields(\"bigcommerce_payments_creditcardscheckout\",this.getInstrumentParams());this.returnedOrderId=e}const a=this.preparePaymentPayload(o,r,this.returnedOrderId,this.returnedVaultedToken);yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment(a)})}finalize(){return Promise.reject(new Fe)}deinitialize(){var e,t,i,n;return at(this,void 0,void 0,function*(){return yield null===(e=this.cvvField)||void 0===e?void 0:e.close(),yield null===(t=this.expiryField)||void 0===t?void 0:t.close(),yield null===(i=this.numberField)||void 0===i?void 0:i.close(),yield null===(n=this.nameField)||void 0===n?void 0:n.close(),Promise.resolve()})}preparePaymentPayload(e,t,i,n){const{shouldSaveInstrument:o=!1,shouldSetAsDefaultInstrument:a=!1}=Be(t)?t:{},s=t&&De(t)?t.instrumentId:void 0,l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)({verification_nonce:n,token:s},lodash__WEBPACK_IMPORTED_MODULE_3__.isNil);return{methodId:e,paymentData:{shouldSaveInstrument:o,shouldSetAsDefaultInstrument:a,instrumentId:s,formattedPayload:Object.assign(Object.assign({},n||s?{bigpay_token:l}:{}),i?{card_with_order:{order_id:i}}:{})}}}initializeFields(e,t){return at(this,void 0,void 0,function*(){const{fields:i,styles:n}=e,o=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),r=this.getExecuteCallback(i),a=Object.assign({style:this.getInputStyles(n),onApprove:({orderID:e,vaultSetupToken:t,liabilityShift:i})=>{if(i===b.No||i===b.Unknown)throw new Error;return this.handleApprove({orderID:e,vaultSetupToken:t})},onError:()=>{throw new it},inputEvents:{onChange:t=>this.onChangeHandler(e,t),onFocus:t=>this.onFocusHandler(e,t),onBlur:t=>this.onBlurHandler(e,t),onInputSubmitRequest:t=>this.onInputSubmitRequest(e,t)}},r);if(this.cardFields=yield o.CardFields(a),!this.cardFields.isEligible())throw new ot(nt.PaymentNotInitialized);try{this.stylizeInputContainers(i),et(i)&&(yield this.renderFields(i)),tt(i)&&(yield this.renderVaultedFields(i))}catch(e){\"function\"==typeof t&&t(e)}})}getExecuteCallback(e){return tt(e)?this.createVaultSetupTokenCallback():this.createOrderCallback()}createVaultSetupTokenCallback(){return{createVaultSetupToken:()=>at(this,void 0,void 0,function*(){const{setupToken:e}=(yield this.bigCommercePaymentsIntegrationService.createOrderCardFields(\"bigcommerce_payments_creditcardscheckout\",Object.assign(Object.assign({},this.getInstrumentParams()),{setupToken:!0})))||{};return e})}}createOrderCallback(){return{createOrder:()=>at(this,void 0,void 0,function*(){const{orderId:e}=(yield this.bigCommercePaymentsIntegrationService.createOrderCardFields(\"bigcommerce_payments_creditcardscheckout\",this.getInstrumentParams()))||{};return e})}}handleApprove({orderID:e,vaultSetupToken:t}){e&&(this.returnedOrderId=e),t&&(this.returnedVaultedToken=t)}renderFields(e){var t,i,n,o;return at(this,void 0,void 0,function*(){const r=this.getCardFieldsOrThrow();(null===(t=e.cardCode)||void 0===t?void 0:t.containerId)&&(this.cvvField=r.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCode.containerId}`)),(null===(i=e.cardExpiry)||void 0===i?void 0:i.containerId)&&(this.expiryField=r.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiry.containerId}`)),(null===(n=e.cardName)||void 0===n?void 0:n.containerId)&&(this.nameField=r.NameField({placeholder:\"\"}),yield this.nameField.render(`#${e.cardName.containerId}`)),(null===(o=e.cardNumber)||void 0===o?void 0:o.containerId)&&(this.numberField=r.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumber.containerId}`))})}renderVaultedFields(e){var t,i,n;return at(this,void 0,void 0,function*(){const o=this.getCardFieldsOrThrow();(null===(t=e.cardCodeVerification)||void 0===t?void 0:t.containerId)&&(this.cvvField=o.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCodeVerification.containerId}`)),(null===(i=e.cardExpiryVerification)||void 0===i?void 0:i.containerId)&&(this.expiryField=o.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiryVerification.containerId}`)),(null===(n=e.cardNumberVerification)||void 0===n?void 0:n.containerId)&&(this.numberField=o.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumberVerification.containerId}`))})}getInstrumentParams(){if(!this.executionPaymentData)return{};if(Be(this.executionPaymentData)){const{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}=this.executionPaymentData;return{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}}if(De(this.executionPaymentData)){const{instrumentId:e}=this.executionPaymentData;return{instrumentId:e}}return{}}getFieldTypeByEmittedField({emittedBy:e}){return{fieldType:this.mapFieldType(e)}}submitHostedForm(){return at(this,void 0,void 0,function*(){const e=this.getCardFieldsOrThrow(),t=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),i={billingAddress:{company:t.company,addressLine1:t.address1,addressLine2:t.address2,adminArea1:t.stateOrProvinceCode,adminArea2:t.city,postalCode:t.postalCode,countryCode:t.countryCode}};try{this.isCreditCardVaultedForm?yield e.submit():yield e.submit(i)}catch(e){throw new it(\"Failed authentication. Please try to authorize again.\")}})}validateHostedFormOrThrow(){var e,t;return at(this,void 0,void 0,function*(){const i=this.getCardFieldsOrThrow(),n=yield i.getState().then(e=>e),o=this.getValidityData(n);if(!o.isValid)throw null===(t=null===(e=this.hostedFormOptions)||void 0===e?void 0:e.onValidate)||void 0===t||t.call(e,o),new rt(this.mapValidationErrors(o.errors))})}getValidityData({fields:e}){const t=Object.assign({},e);delete t.cardNameField;const i=Object.keys(t);return{isValid:i.every(e=>{var i;return null===(i=t[e])||void 0===i?void 0:i.isValid}),errors:i.reduce((e,i)=>{var n;const o=this.mapFieldType(i);return Object.assign(Object.assign({},e),{[o]:(null===(n=t[i])||void 0===n?void 0:n.isValid)?void 0:[this.getInvalidErrorByFieldType(o)]})},{})}}getInvalidErrorByFieldType(e){switch(e){case Qe.CardCode:case Qe.CardCodeVerification:return{fieldType:e,message:\"Invalid card code\",type:\"invalid_card_code\"};case Qe.CardNumber:case Qe.CardNumberVerification:return{fieldType:e,message:\"Invalid card number\",type:\"invalid_card_number\"};case Qe.CardExpiry:case Qe.CardExpiryVerification:return{fieldType:e,message:\"Invalid card expiry\",type:\"invalid_card_expiry\"};default:return{fieldType:e,message:\"Invalid field\",type:\"invalid\"}}}mapValidationErrors(e={}){const t={};return Object.keys(e).forEach(i=>{var n,o;t[i]=[{message:(null===(o=null===(n=e[i])||void 0===n?void 0:n[0])||void 0===o?void 0:o.message)||\"\",type:i}]}),t}mapFieldType(e){switch(e){case\"name\":return Qe.CardName;case\"cardNumberField\":case\"number\":return this.isCreditCardForm?Qe.CardNumber:Qe.CardNumberVerification;case\"cardExpiryField\":case\"expiry\":return this.isCreditCardForm?Qe.CardExpiry:Qe.CardExpiryVerification;case\"cardCvvField\":case\"cvv\":return this.isCreditCardForm?Qe.CardCode:Qe.CardCodeVerification;default:throw new Error(\"Unexpected field type\")}}getCardFieldsOrThrow(){if(!this.cardFields)throw new ot(nt.PaymentNotInitialized);return this.cardFields}getInputStyles(e){var t,i,n;const o={\"font-size\":(null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.fontSize)||\"1rem\",\"font-family\":(null===(i=null==e?void 0:e.default)||void 0===i?void 0:i.fontFamily)||\"Montserrat, Arial, Helvetica, sans-serif\",\"font-weight\":(null===(n=null==e?void 0:e.default)||void 0===n?void 0:n.fontWeight)||\"400\",outline:\"none\",padding:\"9px 13px\"},r=Object.assign(Object.assign({},o),{color:\"#333333\"});return{input:r,\".invalid\":Object.assign(Object.assign({},o),{color:\"red\"}),\".valid\":r,\":focus\":r}}stylizeInputContainers(e){Object.values(e||{}).forEach(e=>{const t=document.getElementById(`${(null==e?void 0:e.containerId)||\"\"}`);t&&(t.style.padding=\"0px\",t.style.boxShadow=\"none\",t.style.border=\"none\",t.style.background=\"transparent\",t.style.marginBottom=\"10px\",t.style.marginLeft=\"-5px\")})}hasUndefinedValues(){return!this.hostedFormOptions||Object.values(this.hostedFormOptions.fields).some(e=>void 0===e)}onChangeHandler(e,t){var i;null===(i=null==e?void 0:e.onValidate)||void 0===i||i.call(e,this.getValidityData(t))}onFocusHandler(e,t){var i;null===(i=null==e?void 0:e.onFocus)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onBlurHandler(e,t){var i;null===(i=null==e?void 0:e.onBlur)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onInputSubmitRequest(e,t){var i;null===(i=null==e?void 0:e.onEnter)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}shouldInitializePayPalFastlane(e){var t,i;const n=this.paymentIntegrationService.getState(),o=n.getPaymentMethodOrThrow(e),r=n.getPaymentProviderCustomer(),a=(s=r)&&(\"authenticationState\"in s||\"addresses\"in s||\"instruments\"in s)?r:{};var s;return(null===(t=null==o?void 0:o.initializationData)||void 0===t?void 0:t.isAcceleratedCheckoutEnabled)&&(null===(i=null==o?void 0:o.initializationData)||void 0===i?void 0:i.isBigCommercePaymentsAnalyticsV2Enabled)&&!(null==a?void 0:a.authenticationState)}initializePayPalFastlaneOrThrow(e){return at(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getPaymentMethodOrThrow(e),{initializationData:o}=n;if(!(null==o?void 0:o.connectClientToken))return;const r=yield this.bigCommercePaymentsSdk.getPayPalFastlaneSdk(n,i.currency.code,i.id);yield this.bigCommercePaymentsFastlaneUtils.initializePayPalFastlane(r,!!(null==o?void 0:o.isDeveloperModeApplicable))}catch(e){}})}}const dt=m(e=>new st(e,M(e),X(),te()),[{id:\"bigcommerce_payments_creditcards\"}]);var lt=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ct{constructor(e,t,i,n,o=3e3,r=3e5){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.bigCommercePaymentsSdkHelper=i,this.loadingIndicator=n,this.pollingInterval=o,this.maxPollingIntervalTime=r,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.isPollingEnabled=!1}initialize(e){return lt(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,bigcommerce_payments_apms:n}=e;if(this.bigCommercePaymentsAlternativeMethods=n,!i)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!n)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_apms\" argument is not provided.');const o=this.paymentIntegrationService.getState(),r=o.getPaymentMethodOrThrow(i,t),{orderId:a,shouldRenderFields:s}=r.initializationData||{},d=o.getStoreConfigOrThrow().checkoutSettings.features;this.isPollingEnabled=Ve(d,\"PAYPAL-5624.bcp_ideal_polling\"),a?this.orderId=a:(this.paypalApms=yield this.bigCommercePaymentsSdkHelper.getPayPalApmsSdk(r,o.getCartOrThrow().currency.code),this.loadingIndicatorContainer=n.container.split(\"#\")[1],this.renderButton(i,t,n),s&&this.renderFields(i,n))})}execute(e,t){return lt(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new Te([\"payment\"]);const{methodId:o,gatewayId:r}=i;if(!this.orderId)throw new ze;this.isPollingEnabled&&\"ideal\"===o&&(yield new Promise((e,t)=>{this.initializePollingMechanism(o,e,t,r)})),this.isNonInstantPaymentMethod(o)||(yield this.paymentIntegrationService.submitOrder(n,t)),yield this.bigCommercePaymentsIntegrationService.submitPayment(o,this.orderId,r)})}finalize(){return Promise.reject(new Fe)}deinitialize(){var e;return this.orderId=void 0,this.isPollingEnabled&&this.resetPollingMechanism(),null===(e=this.bigCommercePaymentsButton)||void 0===e||e.close(),Promise.resolve()}initializePollingMechanism(e,t,i,n){return lt(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.bigCommercePaymentsIntegrationService.getOrderStatus(n),r=o===O.Approved,a=o===O.PollingError;if(r)return this.deInitializePollingMechanism(),t();if(a)return i();if(!r&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,bigCommercePaymentsAlternativeMethods:this.bigCommercePaymentsAlternativeMethods}),this.handleError(new We)}catch(e){i()}})}deInitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deInitializePollingMechanism()}reinitializeStrategy(e){return lt(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}handleError(e){const{onError:t}=this.bigCommercePaymentsAlternativeMethods||{};this.isPollingEnabled&&this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderButton(e,t,i){const n=this.getPaypalAmpsSdkOrThrow(),o=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t),{buttonStyle:r}=o.initializationData||{},{container:a,onError:s,onRenderButton:d,submitForm:l}=i,c={fundingSource:e,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r),onInit:(e,t)=>i.onInitButton(t),createOrder:()=>this.onCreateOrder(e,t,i),onApprove:e=>this.handleApprove(e,l),onCancel:()=>{this.toggleLoadingIndicator(!1),this.deInitializePollingMechanism()},onError:e=>{this.deInitializePollingMechanism(),this.handleFailure(e,s)},onClick:(e,t)=>lt(this,void 0,void 0,function*(){return i.onValidate(t.resolve,t.reject)})};this.bigCommercePaymentsButton=n.Buttons(c),this.bigCommercePaymentsButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.bigCommercePaymentsButton.render(a))}onCreateOrder(e,t,i){return lt(this,void 0,void 0,function*(){const{onValidate:n}=i;yield n(()=>(this.toggleLoadingIndicator(!0),()=>Promise.resolve()),lodash__WEBPACK_IMPORTED_MODULE_3__.noop);const o=yield this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apms\");if(this.isNonInstantPaymentMethod(e)){const i={useStoreCredit:!1},n={params:{methodId:e,gatewayId:t}};yield this.paymentIntegrationService.submitOrder(i,n),yield this.bigCommercePaymentsIntegrationService.submitPayment(e,o,t)}return o})}handleApprove({orderID:e},t){this.orderId=e,t()}handleFailure(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderFields(e,t){const i=this.getPaypalAmpsSdkOrThrow(),n=this.paymentIntegrationService.getState(),{firstName:o,lastName:r,email:a}=n.getBillingAddressOrThrow(),{apmFieldsContainer:s,apmFieldsStyles:d}=t;if(!s)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_apms\" argument should contain \"apmFieldsContainer\".');const l=document.querySelector(s);l&&(l.innerHTML=\"\");const c={fundingSource:e,style:d||{},fields:{name:{value:`${o} ${r}`},email:{value:a}}};i.PaymentFields(c).render(s)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isNonInstantPaymentMethod(e){return e.toUpperCase()in w}getPaypalAmpsSdkOrThrow(){if(!this.paypalApms)throw new h;return this.paypalApms}}const mt=m(e=>new ct(e,M(e),X(),new Ae({containerStyles:Ee})),[{gateway:\"bigcommerce_payments_apms\"}]);var ut=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ht{constructor(e,t,i){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=i}initialize(e){var t,i;return ut(this,void 0,void 0,function*(){const{methodId:n,bigcommerce_payments_venmo:o}=e||{};if(!n)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(n);const r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n);(null===(t=r.initializationData)||void 0===t?void 0:t.orderId)?this.orderId=null===(i=r.initializationData)||void 0===i?void 0:i.orderId:(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n),this.loadingIndicatorContainer=o.container.split(\"#\")[1],this.renderButton(n,o))})}execute(e,t){return ut(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new Te([\"payment\"]);if(!this.orderId)throw new ze;yield this.paymentIntegrationService.submitOrder(n,t),yield this.bigCommercePaymentsIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new Fe)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){const i=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:r}=o||{},{container:a,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,m={fundingSource:i.FUNDING.VENMO,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r),createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_venmo_checkout\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=i.Buttons(m),!this.paypalButton.isEligible())throw new qe(\"Venmo is not available for your region. Please another payment method instead.\");d&&\"function\"==typeof d&&d(),this.paypalButton.render(a)}handleClick(e,t){return ut(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;yield t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,t(),this.toggleLoadingIndicator(!1)}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const yt=m(e=>new ht(e,M(e),new Ae({styles:{backgroundColor:\"black\"}})),[{id:\"bigcommerce_payments_venmo\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9iaWdjb21tZXJjZS1wYXltZW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLElDQ1lBLEVERFJDLEVBQXNCLENBQUMsRUVDWixTQUFTQyxFQUNwQkMsRUFDQUMsR0FFQSxPQUFPQyxPQUFPQyxPQUFPSCxFQUFRLENBQUVDLGNBQ25DLENDTkFILEVBQW9CTSxFQUFJLENBQUNDLEVBQVNDLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWFIsRUFBb0JVLEVBQUVGLEVBQVlDLEtBQVNULEVBQW9CVSxFQUFFSCxFQUFTRSxJQUM1RUwsT0FBT08sZUFBZUosRUFBU0UsRUFBSyxDQUFFRyxZQUFZLEVBQU1DLElBQUtMLEVBQVdDLE1DSjNFVCxFQUFvQlUsRUFBSSxDQUFDSSxFQUFLQyxJQUFVWCxPQUFPWSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ09uRSxNQUFlSSxVQUFzQkMsTUFJaEQsV0FBQUMsQ0FBWUMsR0NYRCxJQUFxQ04sRURZNUNPLE1BQU1ELEdBQVcscUNBSnJCLEtBQUFFLEtBQU8sZ0JBQ1AsS0FBQUMsS0FBTyxXQ1R5Q1QsYURjWkEsVUNiaENaLE9BQU9zQixlQUNQdEIsT0FBT3NCLGVEWVFDLEtDWmVYLEdEWWZXLEtDVlJDLFVBQVlaLEVEWW9CLG1CQUE1QkksTUFBTVMsa0JBQ2JULE1BQU1TLGtCQUFrQkYsaUJBRXhCQSxLQUFLRyxNQUFRLElBQUlWLE1BQU1PLEtBQUtMLFNBQVNRLEtBRTdDLEVFZlcsTUFBTUMsVUFBNENaLEVBQzdELFdBQUFFLENBQVlDLEdBQ1JDLE1BQ0lELEdBQ0ksdUdBR1JLLEtBQUtILEtBQU8sc0NBQ1pHLEtBQUtGLEtBQU8sbUNBQ2hCLEdOYkosU0FBWTFCLEdBQ1IscURBQ0EsaUNBQ0EseUNBQ0EsaURBQ0EseUNBQ0EscURBQ0EsbUNBQ0EsK0NBQ0EsdUNBQ0EsdUNBQ0EsNENBQ0EsNERBQ0Esb0RBQ0EsOERB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LENBQUV0TSxPQUFRLENBQUV5RyxnQkFBaUIsWUFHdUIsQ0FDN0UsQ0FBRW5YLEdBQUksZ0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svYm9vdHN0cmFwP2ZmY2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbWlzc2luZy1kYXRhLWVycm9yLnRzP2I3ZGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzPzk5NGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kPzllYTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtY2xpZW50LXVuYXZhaWxhYmxlLWVycm9yLnRzP2Y4ZWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvYnV5LW5vdy1jYXJ0LWNyZWF0aW9uLWVycm9yLnRzP2Q2MDQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcmVxdWVzdC1lcnJvci50cz9jODQwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY2FydC9jYXJ0LXNvdXJjZS50cz8zODhhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMudHM/OTBmMiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UudHM/OTYzZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NvbW1vbi9odHRwLXJlcXVlc3QvaW50ZXJuYWwtYXBpLWhlYWRlcnMudHM/NDExMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NvbW1vbi9odHRwLXJlcXVlc3QvY29udGVudC10eXBlLnRzPzUwNGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L3Nkay12ZXJzaW9uLWhlYWRlcnMudHM/N2JmMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJlcXVlc3Qtc2VuZGVyLnRzP2EwNDAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1zY3JpcHQtbG9hZGVyLnRzP2Y0NjUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZS50cz83Yjc1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2ludmFsaWQtYXJndW1lbnQtZXJyb3IudHM/MzkyMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWN1c3RvbWVyLXN0cmF0ZWd5LnRzP2JmYjciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jaGVja291dC1idXR0b25zL2RlZmF1bHQtY2hlY2tvdXQtYnV0dG9uLWhlaWdodC50cz9kNDI1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWN1c3RvbWVyLXN0cmF0ZWd5LnRzP2RiY2UiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L2luc3RydW1lbnQudHM/ZjJiNiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMvc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzLnRzPzY0ZDUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzL3NyYy9wYXlwYWwtc2RrLWhlbHBlci50cz8wYzA1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscy9zcmMvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLXNkay50cz8xNTE3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdG9yYWdlL3NyYy9jb29raWUtc3RvcmFnZS50cz8xNTNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscy9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtdXRpbHMudHM/ODNhOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMvc3JjL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS11dGlscy50cz80MGVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscy9zcmMvdXRpbHMvZ2V0LWZhc3RsYW5lLXN0eWxlcy50cz81ZTc0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUvYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtY3VzdG9tZXItc3RyYXRlZ3kudHM/OGQ0NiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS1jdXN0b21lci1zdHJhdGVneS50cz8xOTgyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXIvYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItY3VzdG9tZXItc3RyYXRlZ3kudHM/ZDY0MSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci1jdXN0b21lci1zdHJhdGVneS50cz8yYjljIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8vYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tY3VzdG9tZXItc3RyYXRlZ3kudHM/YzAzMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXZlbm1vL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby1jdXN0b21lci1zdHJhdGVneS50cz9mZTcwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMvYmlnY29tbWVyY2UtcGF5bWVudHMtYnV0dG9uLXN0cmF0ZWd5LnRzPzIzNTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtYnV0dG9uLXN0cmF0ZWd5LnRzPzQ0YzciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzL3NyYy91dGlscy9nZXQtcGF5cGFsLW1lc3NhZ2VzLXN0eWxlcy1mcm9tLWJucGwtY29uZmlnLnRzPzVlODUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci1idXR0b24tc3RyYXRlZ3kudHM/ZjcwMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci1idXR0b24tc3RyYXRlZ3kudHM/MzIxMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWFsdGVybmF0aXZlLW1ldGhvZHMvYmlnY29tbWVyY2UtcGF5bWVudHMtYWx0ZXJuYXRpdmUtbWV0aG9kcy1idXR0b24tc3RyYXRlZ3kudHM/OGJiYSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWFsdGVybmF0aXZlLW1ldGhvZHMvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWFsdGVybmF0aXZlLW1ldGhvZHMtYnV0dG9uLXN0cmF0ZWd5LnRzPzQ5OTIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby1idXR0b24tc3RyYXRlZ3kudHM/NDBiNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXZlbm1vL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby1idXR0b24tc3RyYXRlZ3kudHM/MWUzYSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdWkvc3JjL2xvYWRpbmctaW5kaWNhdG9yL2xvYWRpbmctaW5kaWNhdG9yLnRzP2IwODciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1jb25zdGFudHMudHM/NzQzMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LWFyZ3VtZW50LWludmFsaWQtZXJyb3IudHM/YTUwMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1pbnZhbGlkLWVycm9yLnRzPzNhZGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvb3JkZXItZmluYWxpemF0aW9uLW5vdC1yZXF1aXJlZC1lcnJvci50cz9iNWExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy1ob3N0ZWQtaW50cnVtZW50LWxpa2UudHM/ODc2MyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaXMtdmF1bHRlZC1pbnN0cnVtZW50LnRzPzE4MGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3V0aWxpdHkvc3JjL2lzLWJhc2UtaW5zdHJ1bWVudC9pcy1iYXNlLWluc3RydW1lbnQudHM/ZTkyZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheW1lbnQtc3RyYXRlZ3kudHM/N2M1MyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMvc3JjL3V0aWxzL2lzLWJpZ2NvbW1lcmNlLXBheW1lbnRzLXByb3ZpZGVyLWVycm9yLnRzP2YwN2QiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bWVudC1zdHJhdGVneS50cz8xMWNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscy9zcmMvdXRpbHMvaXMtcGF5cGFsLWZhc3RsYW5lLWN1c3RvbWVyLnRzP2Q5NDAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3V0aWxpdHkvc3JjL2lzLWV4cGVyaW1lbnQtZW5hYmxlZC9pcy1leHBlcmltZW50LWVuYWJsZWQudHM/YzlhNCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lLXBheW1lbnQtc3RyYXRlZ3kudHM/ZjE5MiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMvc3JjL3V0aWxzL2lzLWJpZ2NvbW1lcmNlLWZhc3RsYW5lLXJlcXVlc3QtZXJyb3IudHM/Y2I2ZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS1wYXltZW50LXN0cmF0ZWd5LnRzPzE0ZjUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbm90LWltcGxlbWVudGVkLWVycm9yLnRzPzNhMzUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci1wYXltZW50LXN0cmF0ZWd5LnRzPzI0ZTIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItcGF5bWVudC1zdHJhdGVneS50cz84ZDUyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3RpbWVvdXQtZXJyb3IudHM/MDgwZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJhdGVwYXkvYmlnY29tbWVyY2UtcGF5bWVudHMtcmF0ZXBheS1wYXltZW50LXN0cmF0ZWd5LnRzPzA4MWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1yYXRlcGF5L2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1yYXRlcGF5LXBheW1lbnQtc3RyYXRlZ3kudHM/ZDljYSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2hvc3RlZC1mb3JtL2hvc3RlZC1maWVsZC10eXBlLnRzPzY1ZDgiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9ob3N0ZWQtZm9ybS9pcy1jcmVkaXQtY2FyZC1mb3JtLWZpZWxkcy50cz8wZmFhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvaG9zdGVkLWZvcm0vaXMtY3JlZGl0LWNhcmQtdmF1bHRlZC1mb3JtLWZpZWxkcy50cz9mM2IzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWZhaWxlZC1lcnJvci50cz8wN2RkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL25vdC1pbml0aWFsaXplZC1lcnJvci50cz84YjRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtaW52YWxpZC1mb3JtLWVycm9yLnRzP2MwZmIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1jcmVkaXQtY2FyZHMvYmlnY29tbWVyY2UtcGF5bWVudHMtY3JlZGl0LWNhcmRzLXBheW1lbnQtc3RyYXRlZ3kudHM/ZGUwZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMvc3JjL3V0aWxzL2lzLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lLWN1c3RvbWVyLnRzP2E1Y2QiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1jcmVkaXQtY2FyZHMvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWNyZWRpdC1jYXJkcy1wYXltZW50LXN0cmF0ZWd5LnRzP2RmZTkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWFsdGVybmF0aXZlLW1ldGhvZHMtcGF5bWVudC1zdHJhdGVneS50cz8zYTNlIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtYWx0ZXJuYXRpdmUtbWV0aG9kcy9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtYWx0ZXJuYXRpdmUtbWV0aG9kcy1wYXltZW50LXN0cmF0ZWd5LnRzPzRmYjUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby1wYXltZW50LXN0cmF0ZWd5LnRzP2RiNzYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tcGF5bWVudC1zdHJhdGVneS50cz81OGZlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTWlzc2luZ0RhdGFFcnJvclR5cGUge1xuICAgIE1pc3NpbmdCaWxsaW5nQWRkcmVzcyxcbiAgICBNaXNzaW5nQ2FydCxcbiAgICBNaXNzaW5nQ2hlY2tvdXQsXG4gICAgTWlzc2luZ0NvbnNpZ25tZW50cyxcbiAgICBNaXNzaW5nQ3VzdG9tZXIsXG4gICAgTWlzc2luZ0NoZWNrb3V0Q29uZmlnLFxuICAgIE1pc3NpbmdPcmRlcixcbiAgICBNaXNzaW5nT3JkZXJDb25maWcsXG4gICAgTWlzc2luZ09yZGVySWQsXG4gICAgTWlzc2luZ1BheW1lbnQsXG4gICAgTWlzc2luZ1BheW1lbnRJZCxcbiAgICBNaXNzaW5nUGF5bWVudEluc3RydW1lbnQsXG4gICAgTWlzc2luZ1BheW1lbnRNZXRob2QsXG4gICAgTWlzc2luZ1BheW1lbnRSZWRpcmVjdFVybCxcbiAgICBNaXNzaW5nUGF5bWVudFN0YXR1cyxcbiAgICBNaXNzaW5nUGF5bWVudFRva2VuLFxuICAgIE1pc3NpbmdTaGlwcGluZ0FkZHJlc3MsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciB3aGVuIGRhdGEgdGhhdCBpcyBleHBlY3RlZCB0byBleGlzdCBpcyBtaXNzaW5nLiBVc3VhbGx5IGl0XG4gKiBpcyBkdWUgdG8gdGhlIGZhY3QgdGhhdCBjZXJ0YWluIGRhdGEgaGFzIG5vdCBiZWVuIHJldHJpZXZlZCBmcm9tIG9yIHNhdmVkIHRvXG4gKiB0aGUgc2VydmVyIHlldC4gQW5kIHN1Y2ggZGF0YSBpcyByZXF1aXJlZCB0byBwZXJmb3JtIGNlcnRhaW4gYWN0aW9ucy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlzc2luZ0RhdGFFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdNaXNzaW5nRGF0YUVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ21pc3NpbmdfZGF0YSc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTWlzc2luZ0RhdGFFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdCaWxsaW5nQWRkcmVzczpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBiaWxsaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NhcnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2FydCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ29uc2lnbm1lbnRzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbnNpZ25tZW50cyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2hlY2tvdXQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0N1c3RvbWVyOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGN1c3RvbWVyIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dENvbmZpZzpcbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJDb25maWc6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uZmlndXJhdGlvbiBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgSUQgaXMgdW5hdmFpbGFibGUgb3Igbm90IGdlbmVyYXRlZCB5ZXQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgdG9rZW4gcmVxdWlyZWQgdG8gc3VibWl0IGEgcGF5bWVudCBpcyBtaXNzaW5nLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IG1ldGhvZCBkYXRhIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBwcm9wZXJseSBjb25maWd1cmVkLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nU2hpcHBpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHNoaXBwaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVzb2x2YWJsZU1vZHVsZSBmcm9tICcuL3Jlc29sdmFibGUtbW9kdWxlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9SZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPihcbiAgICBtb2R1bGU6IFRNb2R1bGUsXG4gICAgcmVzb2x2ZUlkczogVElkZW50aWZpZXJbXSxcbik6IFJlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+IHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2R1bGUsIHsgcmVzb2x2ZUlkcyB9KTtcbn1cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgQ3VzdG9tRXJyb3IgZnJvbSAnLi9jdXN0b20tZXJyb3InO1xuaW1wb3J0IHNldFByb3RvdHlwZU9mIGZyb20gJy4vc2V0LXByb3RvdHlwZS1vZic7XG5cbi8qKlxuICogVGhpcyBlcnJvciB0eXBlIHNob3VsZCBub3QgYmUgY29uc3RydWN0ZWQgZGlyZWN0bHkuIEl0IGlzIGEgYmFzZSBjbGFzcyBmb3JcbiAqIGFsbCBjdXN0b20gZXJyb3JzIHRocm93biBpbiB0aGlzIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkRXJyb3IgZXh0ZW5kcyBFcnJvciBpbXBsZW1lbnRzIEN1c3RvbUVycm9yIHtcbiAgICBuYW1lID0gJ1N0YW5kYXJkRXJyb3InO1xuICAgIHR5cGUgPSAnc3RhbmRhcmQnO1xuXG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICBzZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgbmV3LnRhcmdldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YWNrID0gbmV3IEVycm9yKHRoaXMubWVzc2FnZSkuc3RhY2s7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihvYmplY3Q6IGFueSwgcHJvdG90eXBlOiBvYmplY3QpIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmplY3QsIHByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqZWN0O1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gdGhlIGNsaWVudCBsaWJyYXJ5IG9mIGEgcGF5bWVudCBtZXRob2QgZmFpbHNcbiAqIHRvIGxvYWQsIG9yIGZvciBzb21lIHJlYXNvbiwgaXQgaXMgaW5hY2Nlc3NpYmxlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBtZXNzYWdlIHx8XG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNsaWVudCBsaWJyYXJ5IG9mIGEgcGF5bWVudCBtZXRob2QgaXMgbm90IGxvYWRlZCBvciByZWFkeSB0byBiZSB1c2VkLicsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfbWV0aG9kX2NsaWVudF91bmF2YWlsYWJsZSc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBzaG9wcGVyIHRyaWVzIHRvIHNpZ24gaW4gYXMgYSBndWVzdCBidXRcbiAqIHRoZXkgYXJlIGFscmVhZHkgc2lnbmVkIGluIGFzIGEgcmVnaXN0ZXJlZCBjdXN0b21lci5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnV5Tm93Q2FydENyZWF0aW9uRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZCBkdXJpbmcgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uIHByb2Nlc3MuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnQnV5Tm93Q2FydENyZWF0aW9uRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnYnV5X25vd19jYXJ0X2NyZWF0aW9uX2Vycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5jb25zdCBERUZBVUxUX1JFU1BPTlNFID0ge1xuICAgIGJvZHk6IHt9LFxuICAgIGhlYWRlcnM6IHt9LFxuICAgIHN0YXR1czogMCxcbn07XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdW5hYmxlIHRvIG1ha2UgYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIuIEl0IHdyYXBzXG4gKiBhbnkgc2VydmVyIHJlc3BvbnNlIGludG8gYSBKUyBlcnJvciBvYmplY3QuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlcXVlc3RFcnJvcjxUQm9keSA9IGFueT4gZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBib2R5OiBUQm9keSB8IHt9O1xuICAgIGhlYWRlcnM6IHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gICAgZXJyb3JzOiBBcnJheTx7IGNvZGU6IHN0cmluZzsgbWVzc2FnZT86IHN0cmluZyB9PjtcbiAgICBzdGF0dXM6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICByZXNwb25zZT86IFJlc3BvbnNlPFRCb2R5IHwge30+LFxuICAgICAgICB7XG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZXJyb3JzLFxuICAgICAgICB9OiB7XG4gICAgICAgICAgICBtZXNzYWdlPzogc3RyaW5nO1xuICAgICAgICAgICAgZXJyb3JzPzogQXJyYXk8eyBjb2RlOiBzdHJpbmc7IG1lc3NhZ2U/OiBzdHJpbmcgfT47XG4gICAgICAgIH0gPSB7fSxcbiAgICApIHtcbiAgICAgICAgY29uc3QgeyBib2R5LCBoZWFkZXJzLCBzdGF0dXMgfSA9IHJlc3BvbnNlIHx8IERFRkFVTFRfUkVTUE9OU0U7XG5cbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1JlcXVlc3RFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdyZXF1ZXN0JztcbiAgICAgICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzIHx8IFtdO1xuICAgIH1cbn1cbiIsImV4cG9ydCBlbnVtIENhcnRTb3VyY2Uge1xuICAgIEJ1eU5vdyA9ICdCVVlfTk9XJyxcbn1cbiIsImltcG9ydCB7XG4gICAgQnV5Tm93Q2FydFJlcXVlc3RCb2R5LFxuICAgIEhvc3RlZEluc3RydW1lbnQsXG4gICAgU2hpcHBpbmdPcHRpb24sXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZSBQYXltZW50cyBGdW5kaW5nIHNvdXJjZXNcbiAqXG4gKi9cbmV4cG9ydCB0eXBlIEZ1bmRpbmdUeXBlID0gc3RyaW5nO1xuLy8gVE9ETzogcmVuYW1lIEJpZ0NvbW1lcmNlUGF5bWVudHNTREtGdW5kaW5nIHRvIFBheVBhbFNES0Z1bmRpbmdcbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c1NES0Z1bmRpbmcge1xuICAgIENBUkQ6IHN0cmluZztcbiAgICBQQVlQQUw6IHN0cmluZztcbiAgICBDUkVESVQ6IHN0cmluZztcbiAgICBQQVlMQVRFUjogc3RyaW5nO1xuICAgIE9YWE86IHN0cmluZztcbiAgICBTRVBBOiBzdHJpbmc7XG4gICAgVkVOTU86IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgU0RLXG4gKlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNDb25maWcge1xuICAgIGlucHV0RXZlbnRzOiB7XG4gICAgICAgIG9uQ2hhbmdlKGRhdGE6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgICAgICBvbkZvY3VzKGRhdGE6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgICAgICBvbkJsdXIoZGF0YTogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdGF0ZSk6IHZvaWQ7XG4gICAgICAgIG9uSW5wdXRTdWJtaXRSZXF1ZXN0KGRhdGE6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgIH07XG4gICAgY3JlYXRlVmF1bHRTZXR1cFRva2VuPzogKGRhdGE6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGUpID0+IHZvaWQ7XG4gICAgY3JlYXRlT3JkZXI/OiAoKSA9PiBQcm9taXNlPHN0cmluZz47XG4gICAgc3R5bGU6IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zWydzdHlsZXMnXTtcbiAgICBvbkFwcHJvdmUoZGF0YTogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNPbkFwcHJvdmVEYXRhKTogdm9pZDtcbiAgICBvbkVycm9yKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNPbkFwcHJvdmVEYXRhIHtcbiAgICB2YXVsdFNldHVwVG9rZW4/OiBzdHJpbmc7XG4gICAgb3JkZXJJRDogc3RyaW5nO1xuICAgIGxpYWJpbGl0eVNoaWZ0PzogTGlhYmlsaXR5U2hpZnRFbnVtO1xufVxuXG5leHBvcnQgZW51bSBMaWFiaWxpdHlTaGlmdEVudW0ge1xuICAgIFBvc3NpYmxlID0gJ1BPU1NJQkxFJyxcbiAgICBObyA9ICdOTycsXG4gICAgVW5rbm93biA9ICdVTktOT1dOJyxcbiAgICBZZXMgPSAnWUVTJyxcbn1cblxuaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzRmllbGREYXRhIHtcbiAgICBpc0ZvY3VzZWQ6IGJvb2xlYW47XG4gICAgaXNFbXB0eTogYm9vbGVhbjtcbiAgICBpc1ZhbGlkOiBib29sZWFuO1xuICAgIGlzUG90ZW50aWFsbHlWYWxpZDogYm9vbGVhbjtcbn1cblxudHlwZSBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc0NhcmQgPSBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzQ2FyZDtcblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlIHtcbiAgICBjYXJkczogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNDYXJkW107XG4gICAgZW1pdHRlZEJ5OiBzdHJpbmc7XG4gICAgaXNGb3JtVmFsaWQ6IGJvb2xlYW47XG4gICAgZXJyb3JzOiBzdHJpbmdbXTtcbiAgICBmaWVsZHM6IHtcbiAgICAgICAgY2FyZEN2dkZpZWxkOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgY2FyZE51bWJlckZpZWxkOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgY2FyZE5hbWVGaWVsZD86IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBjYXJkRXhwaXJ5RmllbGQ6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzRmllbGREYXRhO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkcyB7XG4gICAgcmVuZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xuICAgIGNsZWFyKCk6IHZvaWQ7XG4gICAgcmVtb3ZlQ2xhc3MoY2xhc3NOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xuICAgIGNsb3NlKCk6IFByb21pc2U8dm9pZD47XG59XG5cbmludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhIHtcbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkcyB7XG4gICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xuICAgIENWVkZpZWxkKGNvbmZpZz86IEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEpOiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzO1xuICAgIEV4cGlyeUZpZWxkKGNvbmZpZz86IEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEpOiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzO1xuICAgIE5hbWVGaWVsZChjb25maWc/OiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkcztcbiAgICBOdW1iZXJGaWVsZChjb25maWc/OiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkcztcbiAgICBzdWJtaXQoY29uZmlnPzogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdWJtaXRDb25maWcpOiBQcm9taXNlPHZvaWQ+O1xuICAgIGdldFN0YXRlKCk6IFByb21pc2U8QmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdGF0ZT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdWJtaXRDb25maWcge1xuICAgIGJpbGxpbmdBZGRyZXNzOiB7XG4gICAgICAgIGNvbXBhbnk/OiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3NMaW5lMTogc3RyaW5nO1xuICAgICAgICBhZGRyZXNzTGluZTI/OiBzdHJpbmc7XG4gICAgICAgIGFkbWluQXJlYTE6IHN0cmluZzsgLy8gU3RhdGVcbiAgICAgICAgYWRtaW5BcmVhMjogc3RyaW5nOyAvLyBDaXR5XG4gICAgICAgIHBvc3RhbENvZGU6IHN0cmluZztcbiAgICAgICAgY291bnRyeUNvZGU/OiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxTREsge1xuICAgIENhcmRGaWVsZHM6IChcbiAgICAgICAgZGF0YTogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNDb25maWcsXG4gICAgKSA9PiBQcm9taXNlPEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzPjtcbiAgICBHb29nbGVwYXk6ICgpID0+IHtcbiAgICAgICAgY29uZmlnOiAoKSA9PiBQcm9taXNlPEdvb2dsZVBheUNvbmZpZz47XG4gICAgICAgIGNvbmZpcm1PcmRlcjogKGFyZzA6IHtcbiAgICAgICAgICAgIG9yZGVySWQ6IHN0cmluZztcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2REYXRhOiBDb25maXJtT3JkZXJEYXRhO1xuICAgICAgICB9KSA9PiBQcm9taXNlPHsgc3RhdHVzOiBzdHJpbmcgfT47XG4gICAgICAgIGluaXRpYXRlUGF5ZXJBY3Rpb246ICgpID0+IHZvaWQ7XG4gICAgfTtcbiAgICBGVU5ESU5HOiBCaWdDb21tZXJjZVBheW1lbnRzU0RLRnVuZGluZztcbiAgICBIb3N0ZWRGaWVsZHM6IHtcbiAgICAgICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgICBkYXRhOiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzUmVuZGVyT3B0aW9ucyxcbiAgICAgICAgKTogUHJvbWlzZTxCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzPjtcbiAgICB9O1xuICAgIExlZ2FsOiBQYXlQYWxMZWdhbCAmIExlZ2FsRnVuZGluZztcbiAgICBCdXR0b25zKG9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyk6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zO1xuICAgIFBheW1lbnRGaWVsZHMoXG4gICAgICAgIG9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50RmllbGRzT3B0aW9ucyxcbiAgICApOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEZpZWxkcztcbiAgICBNZXNzYWdlcyhvcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzTWVzc2FnZXNPcHRpb25zKTogQmlnQ29tbWVyY2VQYXltZW50c01lc3NhZ2VzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpcm1PcmRlckRhdGEge1xuICAgIHRva2VuaXphdGlvbkRhdGE6IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICB0b2tlbjogc3RyaW5nO1xuICAgIH07XG4gICAgaW5mbzoge1xuICAgICAgICBjYXJkTmV0d29yazogc3RyaW5nO1xuICAgICAgICBjYXJkRGV0YWlsczogc3RyaW5nO1xuICAgIH07XG4gICAgdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdvb2dsZVBheUNvbmZpZyB7XG4gICAgYWxsb3dlZFBheW1lbnRNZXRob2RzOiBBbGxvd2VkUGF5bWVudE1ldGhvZHNbXTtcbiAgICBhcGlWZXJzaW9uOiBudW1iZXI7XG4gICAgYXBpVmVyc2lvbk1pbm9yOiBudW1iZXI7XG4gICAgY291bnRyeUNvZGU6IHN0cmluZztcbiAgICBpc0VsaWdpYmxlOiBib29sZWFuO1xuICAgIG1lcmNoYW50SW5mbzoge1xuICAgICAgICBtZXJjaGFudElkOiBzdHJpbmc7XG4gICAgICAgIG1lcmNoYW50T3JpZ2luOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbGxvd2VkUGF5bWVudE1ldGhvZHMge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIGFsbG93ZWRBdXRoTWV0aG9kczogc3RyaW5nW107XG4gICAgICAgIGFsbG93ZWRDYXJkTmV0d29ya3M6IHN0cmluZ1tdO1xuICAgICAgICBiaWxsaW5nQWRkcmVzc1JlcXVpcmVkOiBib29sZWFuO1xuICAgICAgICBhc3N1cmFuY2VEZXRhaWxzUmVxdWlyZWQ6IGJvb2xlYW47XG4gICAgICAgIGJpbGxpbmdBZGRyZXNzUGFyYW1ldGVyczoge1xuICAgICAgICAgICAgZm9ybWF0OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICB0b2tlbml6YXRpb25TcGVjaWZpY2F0aW9uOiB7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgICAgZ2F0ZXdheTogc3RyaW5nO1xuICAgICAgICAgICAgZ2F0ZXdheU1lcmNoYW50SWQ6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgdHlwZSBQYXlQYWxMZWdhbCA9IChwYXJhbXM6IHsgZnVuZGluZ1NvdXJjZTogc3RyaW5nIH0pID0+IHtcbiAgICByZW5kZXIoY29udGFpbmVyOiBzdHJpbmcpOiB2b2lkO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBMZWdhbEZ1bmRpbmcge1xuICAgIEZVTkRJTkc6IHtcbiAgICAgICAgUEFZX1VQT05fSU5WT0lDRTogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlydGhEYXRlIHtcbiAgICBnZXRGdWxsWWVhcigpOiBudW1iZXI7XG4gICAgZ2V0RGF0ZSgpOiBudW1iZXI7XG4gICAgZ2V0TW9udGgoKTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRQYXJhbXMge1xuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgJ2NsaWVudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdtZXJjaGFudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdidXllci1jb3VudHJ5Jz86IHN0cmluZztcbiAgICAgICAgJ2Rpc2FibGUtZnVuZGluZyc/OiBGdW5kaW5nVHlwZVtdO1xuICAgICAgICAnZW5hYmxlLWZ1bmRpbmcnPzogRnVuZGluZ1R5cGVbXTtcbiAgICAgICAgY3VycmVuY3k/OiBzdHJpbmc7XG4gICAgICAgIGNvbW1pdD86IGJvb2xlYW47XG4gICAgICAgIGludGVudD86IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlbnQ7XG4gICAgICAgIGNvbXBvbmVudHM/OiBDb21wb25lbnRzU2NyaXB0VHlwZTtcbiAgICB9O1xuICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgJ2RhdGEtY2xpZW50LXRva2VuJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtY2xpZW50LW1ldGFkYXRhLWlkJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLXVzZXItaWQtdG9rZW4nPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBlbnVtIEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlbnQge1xuICAgIEFVVEhPUklaRSA9ICdhdXRob3JpemUnLFxuICAgIENBUFRVUkUgPSAnY2FwdHVyZScsXG59XG5cbmV4cG9ydCB0eXBlIENvbXBvbmVudHNTY3JpcHRUeXBlID0gQXJyYXk8XG4gICAgfCAnYnV0dG9ucydcbiAgICB8ICdmdW5kaW5nLWVsaWdpYmlsaXR5J1xuICAgIHwgJ2hvc3RlZC1maWVsZHMnXG4gICAgfCAnbWVzc2FnZXMnXG4gICAgfCAncGF5bWVudC1maWVsZHMnXG4gICAgfCAnbGVnYWwnXG4gICAgfCAnZ29vZ2xlcGF5J1xuICAgIHwgJ2Nvbm5lY3QnXG4gICAgfCAnY2FyZC1maWVsZHMnXG4+O1xuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0V2luZG93IGV4dGVuZHMgV2luZG93IHtcbiAgICBwYXlwYWw/OiBQYXlQYWxTREs7XG59XG5cbi8qKlxuICpcbiAqIEJpZ0NvbW1lcmNlIFBheW1lbnRzIEluaXRpYWxpemF0aW9uIERhdGFcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSB7XG4gICAgYXR0cmlidXRpb25JZD86IHN0cmluZztcbiAgICBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzOiBGdW5kaW5nVHlwZVtdO1xuICAgIGJ1dHRvblN0eWxlPzogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zO1xuICAgIGJ1eWVyQ291bnRyeT86IHN0cmluZztcbiAgICBjbGllbnRJZDogc3RyaW5nO1xuICAgIGNsaWVudFRva2VuPzogc3RyaW5nO1xuICAgIGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzOiBGdW5kaW5nVHlwZVtdO1xuICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGU/OiBib29sZWFuO1xuICAgIGludGVudD86IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlbnQ7XG4gICAgaXNBY2NlbGVyYXRlZENoZWNrb3V0RW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlPzogYm9vbGVhbjtcbiAgICBpc1Zlbm1vRW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNHb29nbGVQYXlFbmFibGVkPzogYm9vbGVhbjtcbiAgICBtZXJjaGFudElkPzogc3RyaW5nO1xuICAgIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgc2hvdWxkUmVuZGVyRmllbGRzPzogYm9vbGVhbjtcbiAgICBzaG91bGRSdW5BY2NlbGVyYXRlZENoZWNrb3V0PzogYm9vbGVhbjtcbiAgICBwYXltZW50QnV0dG9uU3R5bGVzPzogUmVjb3JkPHN0cmluZywgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zPjtcbn1cblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgQnV5Tm93XG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zIHtcbiAgICBnZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkoKTogQnV5Tm93Q2FydFJlcXVlc3RCb2R5O1xufVxuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZSBQYXltZW50cyBIb3N0ZWQgRmllbGRzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zIHtcbiAgICBmaWVsZHM/OiB7XG4gICAgICAgIG51bWJlcj86IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZE9wdGlvbjtcbiAgICAgICAgY3Z2PzogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkT3B0aW9uO1xuICAgICAgICBleHBpcmF0aW9uRGF0ZT86IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZE9wdGlvbjtcbiAgICB9O1xuICAgIHBheW1lbnRzU0RLPzogYm9vbGVhbjtcbiAgICBzdHlsZXM/OiB7XG4gICAgICAgIGlucHV0PzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJy5pbnZhbGlkJz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgICAgICcudmFsaWQnPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJzpmb2N1cyc/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgIH07XG4gICAgY3JlYXRlT3JkZXIoKTogUHJvbWlzZTxzdHJpbmc+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZE9wdGlvbiB7XG4gICAgc2VsZWN0b3I6IHN0cmluZztcbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzIHtcbiAgICBzdWJtaXQoXG4gICAgICAgIG9wdGlvbnM/OiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzU3VibWl0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNBcHByb3ZlPjtcbiAgICBnZXRTdGF0ZSgpOiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzU3RhdGU7XG4gICAgb24oZXZlbnROYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiAoZXZlbnQ6IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNTdGF0ZSkgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc1N1Ym1pdE9wdGlvbnMge1xuICAgIGNvbnRpbmdlbmNpZXM/OiBBcnJheTwnM0RfU0VDVVJFJz47XG4gICAgY2FyZGhvbGRlck5hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0FwcHJvdmUge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbiAgICBsaWFiaWxpdHlTaGlmdD86ICdQT1NTSUJMRScgfCAnTk8nIHwgJ1VOS05PV04nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNTdGF0ZSB7XG4gICAgY2FyZHM6IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNDYXJkW107XG4gICAgZW1pdHRlZEJ5OiBzdHJpbmc7XG4gICAgZmllbGRzOiB7XG4gICAgICAgIG51bWJlcj86IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGV4cGlyYXRpb25EYXRlPzogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvbk1vbnRoPzogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvblllYXI/OiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBjdnY/OiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBwb3N0YWxDb2RlPzogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNDYXJkIHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgbmljZVR5cGU6IHN0cmluZztcbiAgICBjb2RlOiB7XG4gICAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgICAgc2l6ZTogbnVtYmVyO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0ZpZWxkRGF0YSB7XG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBpc0ZvY3VzZWQ6IGJvb2xlYW47XG4gICAgaXNFbXB0eTogYm9vbGVhbjtcbiAgICBpc1BvdGVudGlhbGx5VmFsaWQ6IGJvb2xlYW47XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgQnV0dG9uc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xuICAgIGNsb3NlKCk6IHZvaWQ7XG4gICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyB7XG4gICAgZXhwZXJpZW5jZT86IHN0cmluZztcbiAgICBzdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucztcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG4gICAgY3JlYXRlT3JkZXIoKTogUHJvbWlzZTxzdHJpbmc+O1xuICAgIG9uQXBwcm92ZShcbiAgICAgICAgZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICApOiBQcm9taXNlPGJvb2xlYW4gfCB2b2lkPiB8IHZvaWQ7XG4gICAgb25Jbml0PyhkYXRhOiBJbml0Q2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBJbml0Q2FsbGJhY2tBY3Rpb25zKTogUHJvbWlzZTx2b2lkPjtcbiAgICBvbkNvbXBsZXRlPyhkYXRhOiBDb21wbGV0ZUNhbGxiYWNrRGF0YVBheWxvYWQpOiBQcm9taXNlPHZvaWQ+O1xuICAgIG9uQ2xpY2s/KGRhdGE6IENsaWNrQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBDbGlja0NhbGxiYWNrQWN0aW9ucyk6IFByb21pc2U8dm9pZD4gfCB2b2lkO1xuICAgIG9uRXJyb3I/KGVycm9yOiBFcnJvcik6IHZvaWQ7XG4gICAgb25DYW5jZWw/KCk6IHZvaWQ7XG4gICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U/KGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCk6IFByb21pc2U8dm9pZD47XG4gICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U/KGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNlbGVjdGVkU2hpcHBpbmdPcHRpb246IFBheVBhbFNlbGVjdGVkU2hpcHBpbmdPcHRpb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2hpcHBpbmdBZGRyZXNzOiBQYXlQYWxBZGRyZXNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsaWNrQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xpY2tDYWxsYmFja0FjdGlvbnMge1xuICAgIHJlamVjdCgpOiB2b2lkO1xuICAgIHJlc29sdmUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbml0Q2FsbGJhY2tQYXlsb2FkIHtcbiAgICBjb3JyZWxhdGlvbklEOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5pdENhbGxiYWNrQWN0aW9ucyB7XG4gICAgZGlzYWJsZSgpOiB2b2lkO1xuICAgIGVuYWJsZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEFkZHJlc3Mge1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIHBvc3RhbENvZGU6IHN0cmluZztcbiAgICBzdGF0ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEFkZHJlc3NDYWxsYmFja0RhdGEge1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBjb3VudHJ5X2NvZGU6IHN0cmluZztcbiAgICBwb3N0YWxfY29kZTogc3RyaW5nO1xuICAgIHN0YXRlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsU2VsZWN0ZWRTaGlwcGluZ09wdGlvbiB7XG4gICAgYW1vdW50OiB7XG4gICAgICAgIGN1cnJlbmN5X2NvZGU6IHN0cmluZztcbiAgICAgICAgdmFsdWU6IHN0cmluZztcbiAgICB9O1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBzZWxlY3RlZDogYm9vbGVhbjtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJRD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zIHtcbiAgICBvcmRlcjoge1xuICAgICAgICBnZXQ6ICgpID0+IFByb21pc2U8UGF5UGFsT3JkZXJEZXRhaWxzPjtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyRGV0YWlscyB7XG4gICAgcGF5ZXI6IHtcbiAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgZ2l2ZW5fbmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgc3VybmFtZTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbF9hZGRyZXNzOiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3M6IFBheVBhbE9yZGVyQWRkcmVzcztcbiAgICAgICAgcGhvbmU/OiB7XG4gICAgICAgICAgICBwaG9uZV9udW1iZXI6IHtcbiAgICAgICAgICAgICAgICBuYXRpb25hbF9udW1iZXI6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBwdXJjaGFzZV91bml0czogQXJyYXk8e1xuICAgICAgICBzaGlwcGluZzoge1xuICAgICAgICAgICAgYWRkcmVzczogUGF5UGFsT3JkZXJBZGRyZXNzO1xuICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgIGZ1bGxfbmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlckFkZHJlc3Mge1xuICAgIGFkZHJlc3NfbGluZV8xOiBzdHJpbmc7XG4gICAgYWRkcmVzc19saW5lXzI6IHN0cmluZztcbiAgICBhZG1pbl9hcmVhXzI6IHN0cmluZztcbiAgICBhZG1pbl9hcmVhXzE/OiBzdHJpbmc7XG4gICAgcG9zdGFsX2NvZGU6IHN0cmluZztcbiAgICBjb3VudHJ5X2NvZGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0ZUNhbGxiYWNrRGF0YVBheWxvYWQge1xuICAgIGludGVudDogc3RyaW5nO1xuICAgIG9yZGVySUQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25MYWJlbCB7XG4gICAgcGF5cGFsID0gJ3BheXBhbCcsXG4gICAgY2hlY2tvdXQgPSAnY2hlY2tvdXQnLFxuICAgIGJ1eW5vdyA9ICdidXlub3cnLFxuICAgIHBheSA9ICdwYXknLFxuICAgIGluc3RhbGxtZW50ID0gJ2luc3RhbGxtZW50Jyxcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25Db2xvciB7XG4gICAgZ29sZCA9ICdnb2xkJyxcbiAgICBibHVlID0gJ2JsdWUnLFxuICAgIHNpbHZlciA9ICdzaWx2ZXInLFxuICAgIGJsYWNrID0gJ2JsYWNrJyxcbiAgICB3aGl0ZSA9ICd3aGl0ZScsXG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uU2hhcGUge1xuICAgIHBpbGwgPSAncGlsbCcsXG4gICAgcmVjdCA9ICdyZWN0Jyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMge1xuICAgIGNvbG9yPzogU3R5bGVCdXR0b25Db2xvcjtcbiAgICBzaGFwZT86IFN0eWxlQnV0dG9uU2hhcGU7XG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIGxhYmVsPzogU3R5bGVCdXR0b25MYWJlbDtcbn1cblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgUGF5bWVudCBmaWVsZHNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRGaWVsZHMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEZpZWxkc09wdGlvbnMge1xuICAgIHN0eWxlPzogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkc1N0eWxlT3B0aW9ucztcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG4gICAgZmllbGRzOiB7XG4gICAgICAgIG5hbWU/OiB7XG4gICAgICAgICAgICB2YWx1ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgZW1haWw/OiB7XG4gICAgICAgICAgICB2YWx1ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHNTdHlsZU9wdGlvbnMge1xuICAgIHZhcmlhYmxlcz86IHtcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZVNtPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZU0/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTGc/OiBzdHJpbmc7XG4gICAgICAgIHRleHRDb2xvcj86IHN0cmluZztcbiAgICAgICAgY29sb3JUZXh0UGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yQmFja2dyb3VuZD86IHN0cmluZztcbiAgICAgICAgY29sb3JJbmZvPzogc3RyaW5nO1xuICAgICAgICBjb2xvckRhbmdlcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckZvY3VzQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIHNwYWNpbmdVbml0Pzogc3RyaW5nO1xuICAgIH07XG4gICAgcnVsZXM/OiB7XG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgICB9O1xufVxuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZVBheW1lbnRzIE1lc3NhZ2VzXG4gKi9cbi8vIFRPRE86IFRoaXMgaW50ZXJmYWNlIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIFBheVBheVNESyBpbnRlcmZhY2UgaXMgcmVtb3ZlZFxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzTWVzc2FnZXMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbn1cblxuLy8gVE9ETzogVGhpcyBpbnRlcmZhY2UgY2FuIGJlIHJlbW92ZWQgb25jZSB0aGUgUGF5UGF5U0RLIGludGVyZmFjZSBpcyByZW1vdmVkXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNNZXNzYWdlc09wdGlvbnMge1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIHBsYWNlbWVudDogc3RyaW5nO1xuICAgIHN0eWxlPzogQmlnQ29tbWVyY2VQYXltZW50c01lc3NhZ2VzU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U/OiBzdHJpbmc7XG59XG5cbi8vIFRPRE86IFRoaXMgaW50ZXJmYWNlIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIFBheVBheVNESyBpbnRlcmZhY2UgaXMgcmVtb3ZlZFxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzTWVzc2FnZXNTdHlsZU9wdGlvbnMge1xuICAgIGxheW91dD86IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICogT3RoZXJcbiAqXG4gKi9cbmV4cG9ydCBlbnVtIE5vbkluc3RhbnRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzIHtcbiAgICBPWFhPID0gJ294eG8nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyRGF0YSB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNldHVwVG9rZW4/OiBzdHJpbmc7XG4gICAgYXBwcm92ZVVybDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFVwZGF0ZU9yZGVyUmVxdWVzdEJvZHkge1xuICAgIGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucz86IFNoaXBwaW5nT3B0aW9uW107XG4gICAgY2FydElkOiBzdHJpbmc7XG4gICAgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbj86IFNoaXBwaW5nT3B0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2Uge1xuICAgIHN0YXR1c0NvZGU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5IGV4dGVuZHMgSG9zdGVkSW5zdHJ1bWVudCwgVmF1bHRlZEluc3RydW1lbnQge1xuICAgIGNhcnRJZDogc3RyaW5nO1xuICAgIG1ldGFkYXRhSWQ/OiBzdHJpbmc7XG4gICAgc2V0dXBUb2tlbj86IGJvb2xlYW47XG4gICAgZmFzdGxhbmVUb2tlbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGVudW0gUGF5UGFsT3JkZXJTdGF0dXMge1xuICAgIEFwcHJvdmVkID0gJ0FQUFJPVkVEJyxcbiAgICBDcmVhdGVkID0gJ0NSRUFURUQnLFxuICAgIFBheWVyQWN0aW9uUmVxdWlyZWQgPSAnUEFZRVJfQUNUSU9OX1JFUVVJUkVEJyxcbiAgICBQb2xsaW5nU3RvcCA9ICdQT0xMSU5HX1NUT1AnLFxuICAgIFBvbGxpbmdFcnJvciA9ICdQT0xMSU5HX0VSUk9SJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlclN0YXR1c0RhdGEge1xuICAgIHN0YXR1czogUGF5UGFsT3JkZXJTdGF0dXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ3JlYXRlT3JkZXJDYXJkRmllbGRzUmVzcG9uc2Uge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbiAgICBzZXR1cFRva2VuPzogc3RyaW5nO1xufVxuIiwiaW1wb3J0IHsgRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5pbXBvcnQgeyBpc05pbCwgb21pdEJ5IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5LFxuICAgIEJ1eU5vd0NhcnRDcmVhdGlvbkVycm9yLFxuICAgIENhcnQsXG4gICAgQ2FydFNvdXJjZSxcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG4gICAgUmVxdWVzdEVycm9yLFxuICAgIFJlcXVlc3RPcHRpb25zLFxuICAgIFNoaXBwaW5nT3B0aW9uLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyIGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtcmVxdWVzdC1zZW5kZXInO1xuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRMb2FkZXIgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1zY3JpcHQtbG9hZGVyJztcbmltcG9ydCB7XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMsXG4gICAgUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5UGFsQ3JlYXRlT3JkZXJDYXJkRmllbGRzUmVzcG9uc2UsXG4gICAgUGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXlQYWxPcmRlckRldGFpbHMsXG4gICAgUGF5UGFsT3JkZXJTdGF0dXMsXG4gICAgUGF5UGFsU0RLLFxuICAgIFN0eWxlQnV0dG9uQ29sb3IsXG4gICAgU3R5bGVCdXR0b25MYWJlbCxcbiAgICBTdHlsZUJ1dHRvblNoYXBlLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSB7XG4gICAgcHJpdmF0ZSBwYXlwYWxTZGs/OiBQYXlQYWxTREs7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBmb3JtUG9zdGVyOiBGb3JtUG9zdGVyLFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXI6IEJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRMb2FkZXI6IEJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRMb2FkZXIsXG4gICAgKSB7fVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXlQYWxTREsgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgbG9hZFBheVBhbFNkayhcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcHJvdmlkZWRDdXJyZW5jeUNvZGU/OiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUxvYWQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5UGFsU0RLIHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IHByb3ZpZGVkQ3VycmVuY3lDb2RlIHx8IHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxTZGsgPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRMb2FkZXIuZ2V0UGF5UGFsU0RLKFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UsXG4gICAgICAgICAgICBmb3JjZUxvYWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5cGFsU2RrO1xuICAgIH1cblxuICAgIGdldFBheVBhbFNka09yVGhyb3coKTogUGF5UGFsU0RLIHtcbiAgICAgICAgaWYgKCF0aGlzLnBheXBhbFNkaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5wYXlwYWxTZGs7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXkgTm93IGNhcnQgY3JlYXRpb24gbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zOiBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPENhcnQ+IHtcbiAgICAgICAgY29uc3QgY2FydFJlcXVlc3RCb2R5ID0gYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KCk7XG5cbiAgICAgICAgaWYgKCFjYXJ0UmVxdWVzdEJvZHkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDYXJ0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnQoY2FydFJlcXVlc3RCb2R5KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBPcmRlciBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBjcmVhdGVPcmRlcihcbiAgICAgICAgcHJvdmlkZXJJZDogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Qm9keT86IFBhcnRpYWw8UGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keT4sXG4gICAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgY2FydElkID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5pZDtcblxuICAgICAgICBjb25zdCB7IG9yZGVySWQgfSA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIuY3JlYXRlT3JkZXIocHJvdmlkZXJJZCwge1xuICAgICAgICAgICAgY2FydElkLFxuICAgICAgICAgICAgLi4ucmVxdWVzdEJvZHksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBvcmRlcklkO1xuICAgIH1cblxuICAgIGFzeW5jIGNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyhcbiAgICAgICAgcHJvdmlkZXJJZDogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Qm9keT86IFBhcnRpYWw8UGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keT4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxDcmVhdGVPcmRlckNhcmRGaWVsZHNSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmlkO1xuXG4gICAgICAgIGNvbnN0IHsgb3JkZXJJZCwgc2V0dXBUb2tlbiB9ID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlci5jcmVhdGVPcmRlcihcbiAgICAgICAgICAgIHByb3ZpZGVySWQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2FydElkLFxuICAgICAgICAgICAgICAgIC4uLnJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4geyBvcmRlcklkLCAuLi4oc2V0dXBUb2tlbiA/IHsgc2V0dXBUb2tlbiB9IDoge30pIH07XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlT3JkZXIoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBjb25zaWdubWVudCA9IHN0YXRlLmdldENvbnNpZ25tZW50c09yVGhyb3coKVswXTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlci51cGRhdGVPcmRlcih7XG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zOiBjb25zaWdubWVudC5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMsXG4gICAgICAgICAgICAgICAgY2FydElkOiBjYXJ0LmlkLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkU2hpcHBpbmdPcHRpb246IGNvbnNpZ25tZW50LnNlbGVjdGVkU2hpcHBpbmdPcHRpb24sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWVzdEVycm9yKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRPcmRlclN0YXR1cyhtZXRob2RJZD86IHN0cmluZywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTxQYXlQYWxPcmRlclN0YXR1cz4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBzdGF0dXMgfSA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIuZ2V0T3JkZXJTdGF0dXMoXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdGF0dXM7XG4gICAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXltZW50IHN1Ym1pdHRpbmcgYW5kIHRva2VuaXppbmcgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgdG9rZW5pemVQYXltZW50KG1ldGhvZElkOiBzdHJpbmcsIG9yZGVySWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2FydCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFvcmRlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtUG9zdGVyLnBvc3RGb3JtKCcvY2hlY2tvdXQucGhwJywge1xuICAgICAgICAgICAgcGF5bWVudF90eXBlOiAncGF5cGFsJyxcbiAgICAgICAgICAgIGFjdGlvbjogJ3NldF9leHRlcm5hbF9jaGVja291dCcsXG4gICAgICAgICAgICBwcm92aWRlcjogbWV0aG9kSWQsXG4gICAgICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgICAgIC4uLihjYXJ0LnNvdXJjZSA9PT0gQ2FydFNvdXJjZS5CdXlOb3cgJiYgeyBjYXJ0X2lkOiBjYXJ0LmlkIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBzdWJtaXRQYXltZW50KG1ldGhvZElkOiBzdHJpbmcsIG9yZGVySWQ6IHN0cmluZywgZ2F0ZXdheUlkPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0ge1xuICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICBkZXZpY2VfaW5mbzogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXRob2RfaWQ6IG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBvcmRlcklkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGEsXG4gICAgICAgICAgICAuLi4oZ2F0ZXdheUlkID8geyBnYXRld2F5SWQgfSA6IHt9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBTaGlwcGluZyBvcHRpb25zIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyhzZWxlY3RlZFNoaXBwaW5nT3B0aW9uSWQ/OiBzdHJpbmcpOiBTaGlwcGluZ09wdGlvbiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNvbnNpZ25tZW50ID0gc3RhdGUuZ2V0Q29uc2lnbm1lbnRzT3JUaHJvdygpWzBdO1xuXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyA9IGNvbnNpZ25tZW50LmF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyB8fCBbXTtcblxuICAgICAgICBjb25zdCByZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uID0gYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLmZpbmQoXG4gICAgICAgICAgICAob3B0aW9uKSA9PiBvcHRpb24uaXNSZWNvbW1lbmRlZCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uID0gc2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkXG4gICAgICAgICAgICA/IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucy5maW5kKChvcHRpb24pID0+IG9wdGlvbi5pZCA9PT0gc2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkKVxuICAgICAgICAgICAgOiBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMuZmluZChcbiAgICAgICAgICAgICAgICAgIChvcHRpb24pID0+IG9wdGlvbi5pZCA9PT0gY29uc2lnbm1lbnQuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbj8uaWQsXG4gICAgICAgICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb25Ub1NlbGVjdCA9XG4gICAgICAgICAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uIHx8IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24gfHwgYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zWzBdO1xuXG4gICAgICAgIGlmICghc2hpcHBpbmdPcHRpb25Ub1NlbGVjdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91ciBvcmRlciBjYW4ndCBiZSBzaGlwcGVkIHRvIHRoaXMgYWRkcmVzc1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzaGlwcGluZ09wdGlvblRvU2VsZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQWRkcmVzcyB0cmFuc2Zvcm1pbmcgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgZ2V0QWRkcmVzcyhhZGRyZXNzPzogUGFydGlhbDxCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5Pik6IEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlyc3ROYW1lOiBhZGRyZXNzPy5maXJzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBsYXN0TmFtZTogYWRkcmVzcz8ubGFzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBlbWFpbDogYWRkcmVzcz8uZW1haWwgfHwgJycsXG4gICAgICAgICAgICBwaG9uZTogYWRkcmVzcz8ucGhvbmUgfHwgJycsXG4gICAgICAgICAgICBjb21wYW55OiAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MxOiBhZGRyZXNzPy5hZGRyZXNzMSB8fCAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBhZGRyZXNzPy5hZGRyZXNzMiB8fCAnJyxcbiAgICAgICAgICAgIGNpdHk6IGFkZHJlc3M/LmNpdHkgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcz8uY291bnRyeUNvZGUgfHwgJycsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzPy5wb3N0YWxDb2RlIHx8ICcnLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlOiAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGFkZHJlc3M/LnN0YXRlT3JQcm92aW5jZUNvZGUgfHwgJycsXG4gICAgICAgICAgICBjdXN0b21GaWVsZHM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyh7IHBheWVyIH06IFBheVBhbE9yZGVyRGV0YWlscyk6IEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGZpcnN0TmFtZTogcGF5ZXIubmFtZS5naXZlbl9uYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHBheWVyLm5hbWUuc3VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBwYXllci5lbWFpbF9hZGRyZXNzLFxuICAgICAgICAgICAgYWRkcmVzczE6IHBheWVyLmFkZHJlc3MuYWRkcmVzc19saW5lXzEsXG4gICAgICAgICAgICBhZGRyZXNzMjogcGF5ZXIuYWRkcmVzcy5hZGRyZXNzX2xpbmVfMixcbiAgICAgICAgICAgIGNpdHk6IHBheWVyLmFkZHJlc3MuYWRtaW5fYXJlYV8yLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IHBheWVyLmFkZHJlc3MuY291bnRyeV9jb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogcGF5ZXIuYWRkcmVzcy5wb3N0YWxfY29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IHBheWVyLmFkZHJlc3MuYWRtaW5fYXJlYV8xLFxuICAgICAgICAgICAgcGhvbmU6IHBheWVyLnBob25lPy5waG9uZV9udW1iZXI/Lm5hdGlvbmFsX251bWJlcixcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgb3JkZXJEZXRhaWxzOiBQYXlQYWxPcmRlckRldGFpbHMsXG4gICAgKTogQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSB7XG4gICAgICAgIGNvbnN0IHsgcGF5ZXIsIHB1cmNoYXNlX3VuaXRzIH0gPSBvcmRlckRldGFpbHM7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGFkZHJlc3MsXG4gICAgICAgICAgICBuYW1lOiB7IGZ1bGxfbmFtZSB9LFxuICAgICAgICB9ID0gcHVyY2hhc2VfdW5pdHNbMF0uc2hpcHBpbmc7XG5cbiAgICAgICAgY29uc3QgW2ZpcnN0TmFtZSwgLi4ubGFzdE5hbWVdID0gZnVsbF9uYW1lLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogbGFzdE5hbWUuam9pbignICcpLFxuICAgICAgICAgICAgZW1haWw6IHBheWVyLmVtYWlsX2FkZHJlc3MsXG4gICAgICAgICAgICBhZGRyZXNzMTogYWRkcmVzcy5hZGRyZXNzX2xpbmVfMSxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBhZGRyZXNzLmFkZHJlc3NfbGluZV8yLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcy5hZG1pbl9hcmVhXzIsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcy5jb3VudHJ5X2NvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzLnBvc3RhbF9jb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogYWRkcmVzcy5hZG1pbl9hcmVhXzEsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV0dG9ucyBzdHlsZSBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBnZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlPzogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zKTogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zIHtcbiAgICAgICAgY29uc3QgeyBjb2xvciwgaGVpZ2h0LCBsYWJlbCwgc2hhcGUgfSA9IHN0eWxlIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHZhbGlkU3R5bGVzID0ge1xuICAgICAgICAgICAgY29sb3I6IGNvbG9yICYmIFN0eWxlQnV0dG9uQ29sb3JbY29sb3JdID8gY29sb3IgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZ2V0VmFsaWRIZWlnaHQoaGVpZ2h0KSxcbiAgICAgICAgICAgIGxhYmVsOiBsYWJlbCAmJiBTdHlsZUJ1dHRvbkxhYmVsW2xhYmVsXSA/IGxhYmVsIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2hhcGU6IHNoYXBlICYmIFN0eWxlQnV0dG9uU2hhcGVbc2hhcGVdID8gc2hhcGUgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG9taXRCeSh2YWxpZFN0eWxlcywgaXNOaWwpO1xuICAgIH1cblxuICAgIGdldFZhbGlkSGVpZ2h0KGhlaWdodD86IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRIZWlnaHQgPSA0MDtcbiAgICAgICAgY29uc3QgbWluSGVpZ2h0ID0gMjU7XG4gICAgICAgIGNvbnN0IG1heEhlaWdodCA9IDU1O1xuXG4gICAgICAgIGlmICghaGVpZ2h0IHx8IHR5cGVvZiBoZWlnaHQgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdEhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoZWlnaHQgPiBtYXhIZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXhIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVpZ2h0IDwgbWluSGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gbWluSGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHJlbW92ZUVsZW1lbnQoZWxlbWVudElkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50SWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcblxuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgLy8gRm9yIG5vdyB0aGlzIGlzIGEgdGVtcG9yYXJ5IHNvbHV0aW9uLCBmdXJ0aGVyIHJlbW92ZUVsZW1lbnQgbWV0aG9kIHdpbGwgYmUgcmVtb3ZlZFxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IElOVEVSTkFMX1VTRV9PTkxZID1cbiAgICAnVGhpcyBBUEkgZW5kcG9pbnQgaXMgZm9yIGludGVybmFsIHVzZSBvbmx5IGFuZCBtYXkgY2hhbmdlIGluIHRoZSBmdXR1cmUnO1xuIiwiZW51bSBDb250ZW50VHlwZSB7XG4gICAgSnNvbiA9ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICBKc29uVjEgPSAnYXBwbGljYXRpb24vdm5kLmJjLnYxK2pzb24nLFxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250ZW50VHlwZTtcbiIsImV4cG9ydCBjb25zdCBTREtfVkVSU0lPTl9IRUFERVJTID0geyAnWC1DaGVja291dC1TREstVmVyc2lvbic6IExJQlJBUllfVkVSU0lPTiB9O1xuIiwiaW1wb3J0IHsgUmVxdWVzdFNlbmRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCB7XG4gICAgQ29udGVudFR5cGUsXG4gICAgSU5URVJOQUxfVVNFX09OTFksXG4gICAgUmVxdWVzdE9wdGlvbnMsXG4gICAgU0RLX1ZFUlNJT05fSEVBREVSUyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgUGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXlQYWxPcmRlckRhdGEsXG4gICAgUGF5UGFsT3JkZXJTdGF0dXNEYXRhLFxuICAgIFBheVBhbFVwZGF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5UGFsVXBkYXRlT3JkZXJSZXNwb25zZSxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlcXVlc3RTZW5kZXI6IFJlcXVlc3RTZW5kZXIpIHt9XG5cbiAgICBhc3luYyBjcmVhdGVPcmRlcihcbiAgICAgICAgcHJvdmlkZXJJZDogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Qm9keTogUGFydGlhbDxQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5PixcbiAgICApOiBQcm9taXNlPFBheVBhbE9yZGVyRGF0YT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9zdG9yZWZyb250L3BheW1lbnQvJHtwcm92aWRlcklkfWA7XG4gICAgICAgIGNvbnN0IGJvZHkgPSByZXF1ZXN0Qm9keTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICdYLUFQSS1JTlRFUk5BTCc6IElOVEVSTkFMX1VTRV9PTkxZLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IENvbnRlbnRUeXBlLkpzb24sXG4gICAgICAgICAgICAuLi5TREtfVkVSU0lPTl9IRUFERVJTLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdFNlbmRlci5wb3N0PFBheVBhbE9yZGVyRGF0YT4odXJsLCB7IGhlYWRlcnMsIGJvZHkgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5ib2R5O1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZU9yZGVyKFxuICAgICAgICByZXF1ZXN0Qm9keTogUGF5UGFsVXBkYXRlT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICApOiBQcm9taXNlPFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2U+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvc3RvcmVmcm9udC9pbml0aWFsaXphdGlvbi9iaWdjb21tZXJjZV9wYXltZW50c2A7XG4gICAgICAgIGNvbnN0IGJvZHkgPSByZXF1ZXN0Qm9keTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICdYLUFQSS1JTlRFUk5BTCc6IElOVEVSTkFMX1VTRV9PTkxZLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IENvbnRlbnRUeXBlLkpzb24sXG4gICAgICAgICAgICAuLi5TREtfVkVSU0lPTl9IRUFERVJTLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdFNlbmRlci5wdXQ8UGF5UGFsVXBkYXRlT3JkZXJSZXNwb25zZT4odXJsLCB7IGhlYWRlcnMsIGJvZHkgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5ib2R5O1xuICAgIH1cblxuICAgIGFzeW5jIGdldE9yZGVyU3RhdHVzKFxuICAgICAgICBtZXRob2RJZCA9ICdiaWdjb21tZXJjZV9wYXltZW50cycsXG4gICAgICAgIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFBheVBhbE9yZGVyU3RhdHVzRGF0YT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9zdG9yZWZyb250L2luaXRpYWxpemF0aW9uLyR7bWV0aG9kSWR9YDtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICdYLUFQSS1JTlRFUk5BTCc6IElOVEVSTkFMX1VTRV9PTkxZLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IENvbnRlbnRUeXBlLkpzb24sXG4gICAgICAgICAgICAuLi5TREtfVkVSU0lPTl9IRUFERVJTLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdFNlbmRlci5nZXQ8UGF5UGFsT3JkZXJTdGF0dXNEYXRhPih1cmwsIHtcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzLmJvZHk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0hvc3RXaW5kb3csXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0UGFyYW1zLFxuICAgIENvbXBvbmVudHNTY3JpcHRUeXBlLFxuICAgIEZ1bmRpbmdUeXBlLFxuICAgIFBheVBhbFNESyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRMb2FkZXIge1xuICAgIHByaXZhdGUgd2luZG93OiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdFdpbmRvdztcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2NyaXB0TG9hZGVyOiBTY3JpcHRMb2FkZXIpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsU0RLKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZT86IGJvb2xlYW4sXG4gICAgICAgIGZvcmNlTG9hZD86IGJvb2xlYW4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxTREs+IHtcbiAgICAgICAgY29uc3QgcGF5cGFsU2RrU2NyaXB0Q29uZmlnID0gdGhpcy5nZXRQYXlQYWxTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZFBheVBhbFNESyhwYXlwYWxTZGtTY3JpcHRDb25maWcsIGZvcmNlTG9hZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkUGF5UGFsU0RLKFxuICAgICAgICBwYXlwYWxTZGtTY3JpcHRDb25maWc6IEJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRQYXJhbXMsXG4gICAgICAgIGZvcmNlTG9hZCA9IGZhbHNlLFxuICAgICk6IFByb21pc2U8UGF5UGFsU0RLPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsIHx8IGZvcmNlTG9hZCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPEJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRQYXJhbXNbJ29wdGlvbnMnXT4oXG4gICAgICAgICAgICAgICAgcGF5cGFsU2RrU2NyaXB0Q29uZmlnLm9wdGlvbnMsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPEJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRQYXJhbXNbJ2F0dHJpYnV0ZXMnXT4oXG4gICAgICAgICAgICAgICAgcGF5cGFsU2RrU2NyaXB0Q29uZmlnLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBwYXlwYWxTZGtVcmwgPSAnaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9zZGsvanMnO1xuICAgICAgICAgICAgY29uc3Qgc2NyaXB0UXVlcnkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKG9wdGlvbnMpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBzY3JpcHRTcmMgPSBgJHtwYXlwYWxTZGtVcmx9PyR7c2NyaXB0UXVlcnl9YDtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChzY3JpcHRTcmMsIHsgYXN5bmM6IHRydWUsIGF0dHJpYnV0ZXMgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5UGFsU2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UgPSB0cnVlLFxuICAgICk6IEJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRQYXJhbXMge1xuICAgICAgICBjb25zdCB7IGlkLCBjbGllbnRUb2tlbiwgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghaW5pdGlhbGl6YXRpb25EYXRhPy5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICBtZXJjaGFudElkLFxuICAgICAgICAgICAgYnV5ZXJDb3VudHJ5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgIGlzVmVubW9FbmFibGVkLFxuICAgICAgICAgICAgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsXG4gICAgICAgICAgICBpc1BheVBhbENyZWRpdEF2YWlsYWJsZSxcbiAgICAgICAgICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsXG4gICAgICAgICAgICBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzID0gW10sXG4gICAgICAgICAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyA9IFtdLFxuICAgICAgICAgICAgaXNHb29nbGVQYXlFbmFibGVkLFxuICAgICAgICB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IGNvbW1pdCA9IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkIHx8IGluaXRpYWxpemVzT25DaGVja291dFBhZ2U7XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkRW5hYmxlQ2FyZCA9IGlkID09PSAnYmlnY29tbWVyY2VfcGF5bWVudHNfY3JlZGl0Y2FyZHMnO1xuICAgICAgICBjb25zdCBlbmFibGVDYXJkRnVuZGluZyA9IHNob3VsZEVuYWJsZUNhcmQgPyBbJ2NhcmQnXSA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlQ2FyZEZ1bmRpbmcgPSAhc2hvdWxkRW5hYmxlQ2FyZCA/IFsnY2FyZCddIDogW107XG5cbiAgICAgICAgY29uc3QgZW5hYmxlQ3JlZGl0RnVuZGluZyA9IGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlID8gWydjcmVkaXQnLCAncGF5bGF0ZXInXSA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlQ3JlZGl0RnVuZGluZyA9ICFpc1BheVBhbENyZWRpdEF2YWlsYWJsZSA/IFsnY3JlZGl0JywgJ3BheWxhdGVyJ10gOiBbXTtcblxuICAgICAgICBjb25zdCBzaG91bGRFbmFibGVBUE1zID0gaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZSB8fCAhY29tbWl0O1xuICAgICAgICBjb25zdCBlbmFibGVWZW5tb0Z1bmRpbmcgPSBpc1Zlbm1vRW5hYmxlZCA/IFsndmVubW8nXSA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlVmVubW9GdW5kaW5nID0gIWlzVmVubW9FbmFibGVkID8gWyd2ZW5tbyddIDogW107XG4gICAgICAgIGNvbnN0IGVuYWJsZUFQTXNGdW5kaW5nID0gc2hvdWxkRW5hYmxlQVBNcyA/IGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVBUE1zRnVuZGluZyA9IHNob3VsZEVuYWJsZUFQTXNcbiAgICAgICAgICAgID8gYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAoYXBtOiBzdHJpbmcpID0+ICFlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5pbmNsdWRlcyhhcG0pLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM7XG4gICAgICAgIGNvbnN0IGdvb2dsZVBheUNvbXBvbmVudDogQ29tcG9uZW50c1NjcmlwdFR5cGUgPSBpc0dvb2dsZVBheUVuYWJsZWQgPyBbJ2dvb2dsZXBheSddIDogW107XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNDb21wb25lbnQ6IENvbXBvbmVudHNTY3JpcHRUeXBlID0gaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZVxuICAgICAgICAgICAgPyBbJ2NhcmQtZmllbGRzJ11cbiAgICAgICAgICAgIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVGdW5kaW5nOiBGdW5kaW5nVHlwZVtdID0gdGhpcy5maWx0ZXJGdW5kaW5nT3B0aW9ucyhbXG4gICAgICAgICAgICAuLi5kaXNhYmxlQ2FyZEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5kaXNhYmxlQ3JlZGl0RnVuZGluZyxcbiAgICAgICAgICAgIC4uLmRpc2FibGVWZW5tb0Z1bmRpbmcsXG4gICAgICAgICAgICAuLi5kaXNhYmxlQVBNc0Z1bmRpbmcsXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCBlbmFibGVGdW5kaW5nOiBGdW5kaW5nVHlwZVtdID0gdGhpcy5maWx0ZXJGdW5kaW5nT3B0aW9ucyhbXG4gICAgICAgICAgICAuLi5lbmFibGVDYXJkRnVuZGluZyxcbiAgICAgICAgICAgIC4uLmVuYWJsZUNyZWRpdEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVWZW5tb0Z1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVBUE1zRnVuZGluZyxcbiAgICAgICAgXSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICAnZW5hYmxlLWZ1bmRpbmcnOiBlbmFibGVGdW5kaW5nLmxlbmd0aCA+IDAgPyBlbmFibGVGdW5kaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnOiBkaXNhYmxlRnVuZGluZy5sZW5ndGggPiAwID8gZGlzYWJsZUZ1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY29tbWl0LFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbnMnLFxuICAgICAgICAgICAgICAgICAgICAnaG9zdGVkLWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdwYXltZW50LWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdsZWdhbCcsXG4gICAgICAgICAgICAgICAgICAgIC4uLmdvb2dsZVBheUNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgLi4uY2FyZEZpZWxkc0NvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLWNsaWVudC10b2tlbic6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZpbHRlckZ1bmRpbmdPcHRpb25zKGZ1bmRpbmdPcHRpb25zOiBGdW5kaW5nVHlwZVtdIHwgdW5kZWZpbmVkKTogRnVuZGluZ1R5cGVbXSB7XG4gICAgICAgIGNvbnN0IGZ1bmRpbmdUeXBlc1RvQmVGaWx0ZXJlZCA9IFsna2xhcm5hJ107XG5cbiAgICAgICAgaWYgKCFmdW5kaW5nT3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmRpbmdPcHRpb25zLmZpbHRlcihcbiAgICAgICAgICAgIChmdW5kaW5nT3B0aW9uOiBGdW5kaW5nVHlwZSkgPT4gIWZ1bmRpbmdUeXBlc1RvQmVGaWx0ZXJlZC5pbmNsdWRlcyhmdW5kaW5nT3B0aW9uKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYW5zZm9ybUNvbmZpZzxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KGNvbmZpZzogVCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgICAgICBsZXQgdHJhbnNmb3JtZWRDb25maWcgPSB7fTtcblxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY29uZmlnKSBhcyBBcnJheTxrZXlvZiBUPjtcblxuICAgICAgICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjb25maWdba2V5XTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSAnJyB8fFxuICAgICAgICAgICAgICAgIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYW5zZm9ybWVkQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgIC4uLnRyYW5zZm9ybWVkQ29uZmlnLFxuICAgICAgICAgICAgICAgIFtrZXldOiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLmpvaW4oJywnKSA6IHZhbHVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkQ29uZmlnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgY3JlYXRlUmVxdWVzdFNlbmRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5pbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRMb2FkZXIsXG59IGZyb20gJy4vaW5kZXgnO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICBjb25zdCB7IGdldEhvc3QgfSA9IHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgIHJldHVybiBuZXcgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShcbiAgICAgICAgY3JlYXRlRm9ybVBvc3RlcigpLFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIoY3JlYXRlUmVxdWVzdFNlbmRlcih7IGhvc3Q6IGdldEhvc3QoKSB9KSksXG4gICAgICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTtcbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgbWV0aG9kIGlzIHVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlXG4gKiBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIGFyZ3VtZW50cyBhY2NvcmRpbmcgdG8gdGhlaXIgcmVxdWlyZW1lbnRzLFxuICogaS5lLjogaWYgYW4gYXJndW1lbnQgaXMgbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52YWxpZEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0ludmFsaWQgYXJndW1lbnRzIGhhdmUgYmVlbiBwcm92aWRlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnSW52YWxpZEFyZ3VtZW50RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnaW52YWxpZF9hcmd1bWVudCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQ3VzdG9tZXJDcmVkZW50aWFscyxcbiAgICBDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgIEN1c3RvbWVyU3RyYXRlZ3ksXG4gICAgRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxufSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJTdHJhdGVneSBpbXBsZW1lbnRzIEN1c3RvbWVyU3RyYXRlZ3kge1xuICAgIHByaXZhdGUgb25FcnJvciA9IG5vb3A7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBiaWdjb21tZXJjZV9wYXltZW50cywgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50cy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50cy5jb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYmlnY29tbWVyY2VfcGF5bWVudHMub25DbGljayAmJiB0eXBlb2YgYmlnY29tbWVyY2VfcGF5bWVudHMub25DbGljayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzLm9uQ2xpY2tcIiBhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub25FcnJvciA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzLm9uRXJyb3IgfHwgbm9vcDtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFwYXltZW50TWV0aG9kKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5cGFsU2RrIHx8ICFwYXlwYWxTZGsuQnV0dG9ucyB8fCB0eXBlb2YgcGF5cGFsU2RrLkJ1dHRvbnMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICdbQkMgUGF5UGFsXTogUGF5UGFsIEJ1dHRvbiBjb3VsZCBub3QgYmUgcmVuZGVyZWQsIGR1ZSB0byBpc3N1ZXMgd2l0aCBsb2FkaW5nIFBheVBhbCBTREsnLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduSW4oY3JlZGVudGlhbHM6IEN1c3RvbWVyQ3JlZGVudGlhbHMsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoY3JlZGVudGlhbHMsIG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduT3V0KG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyKG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBvcHRpb25zPy5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrPy4oKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzOiBCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uQ2xpY2ssIG9uQ29tcGxldGUgfSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLCBwYXltZW50QnV0dG9uU3R5bGVzIH0gPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcignYmlnY29tbWVyY2VfcGF5bWVudHMnKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICAgICAgLi4uKG9uQ2xpY2sgJiYgeyBvbkNsaWNrOiAoKSA9PiBvbkNsaWNrKCkgfSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGRhdGEsIGFjdGlvbnMsIG1ldGhvZElkLCBvbkNvbXBsZXRlKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuRlVORElORy5QQVlQQUwsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoe1xuICAgICAgICAgICAgICAgIC4uLmNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgICAgIGhlaWdodDogRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgLi4uKGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkICYmIGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcGF5cGFsQnV0dG9uLnJlbmRlcihgIyR7Y29udGFpbmVyfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25Ib3N0ZWRDaGVja291dEFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIG9uQ29tcGxldGU/OiAoKSA9PiB2b2lkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIWRhdGEub3JkZXJJRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FydCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyRGV0YWlscyA9IGF3YWl0IGFjdGlvbnMub3JkZXIuZ2V0KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcblxuICAgICAgICAgICAgaWYgKGNhcnQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe30sIHsgcGFyYW1zOiB7IG1ldGhvZElkIH0gfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChtZXRob2RJZCwgZGF0YS5vcmRlcklEKTtcblxuICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUgJiYgdHlwZW9mIG9uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGNpdHk6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNpdHksXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3Muc3RhdGUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbmZvOiB3ZSB1c2UgdGhlIHNhbWUgYWRkcmVzcyB0byBmaWxsIGJpbGxpbmcgYW5kIHNoaXBwaW5nIGFkZHJlc3NlcyB0byBoYXZlIHZhbGlkIHF1b3RhIG9uIEJFIGZvciBvcmRlciB1cGRhdGluZyBwcm9jZXNzXG4gICAgICAgICAgICAvLyBvbiB0aGlzIHN0YWdlIHdlIGRvbid0IGhhdmUgYWNjZXNzIHRvIHZhbGlkIGN1c3RvbWVyJ3MgYWRkcmVzcyBleGNlcHQgc2hpcHBpbmcgZGF0YVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGFkZHJlc3MpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhhZGRyZXNzKTtcblxuICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPVxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KFxuICAgICAgICAgICAgZGF0YS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub25FcnJvcihlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImNvbnN0IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCA9IDM2O1xuXG5leHBvcnQgZGVmYXVsdCBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQ7XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNDdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtY3VzdG9tZXItc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0N1c3RvbWVyU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c0N1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNDdXN0b21lclN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzJyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBIb3N0ZWRJbnN0cnVtZW50LCBOb25jZUluc3RydW1lbnQgfSBmcm9tICcuL3BheW1lbnQnO1xuXG50eXBlIFBheW1lbnRJbnN0cnVtZW50ID0gQ2FyZEluc3RydW1lbnQgfCBBY2NvdW50SW5zdHJ1bWVudCB8IEhvc3RlZEluc3RydW1lbnQgfCBOb25jZUluc3RydW1lbnQ7XG5cbmV4cG9ydCBkZWZhdWx0IFBheW1lbnRJbnN0cnVtZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VJbnN0cnVtZW50IHtcbiAgICBiaWdwYXlUb2tlbjogc3RyaW5nO1xuICAgIGRlZmF1bHRJbnN0cnVtZW50OiBib29sZWFuO1xuICAgIHByb3ZpZGVyOiBzdHJpbmc7XG4gICAgdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczogYm9vbGVhbjtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUge1xuICAgIENWViA9ICdjdnYnLFxuICAgIFBBTiA9ICdwYW4nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRJbnN0cnVtZW50IGV4dGVuZHMgQmFzZUluc3RydW1lbnQge1xuICAgIGJyYW5kOiBzdHJpbmc7XG4gICAgZXhwaXJ5TW9udGg6IHN0cmluZztcbiAgICBleHBpcnlZZWFyOiBzdHJpbmc7XG4gICAgaWluOiBzdHJpbmc7XG4gICAgbGFzdDQ6IHN0cmluZztcbiAgICB0eXBlOiAnY2FyZCc7XG4gICAgdW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uTW9kZTogVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZTtcbn1cblxuaW50ZXJmYWNlIEJhc2VBY2NvdW50SW5zdHJ1bWVudCBleHRlbmRzIEJhc2VJbnN0cnVtZW50IHtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiAnYWNjb3VudCcgfCAnYmFuayc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VBY2NvdW50SW5zdHJ1bWVudCB7XG4gICAgZXh0ZXJuYWxJZDogc3RyaW5nO1xuICAgIG1ldGhvZDogJ3BheXBhbCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWNoSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VBY2NvdW50SW5zdHJ1bWVudCB7XG4gICAgaXNzdWVyOiBzdHJpbmc7XG4gICAgYWNjb3VudE51bWJlcjogc3RyaW5nO1xuICAgIHR5cGU6ICdiYW5rJztcbiAgICBtZXRob2Q6ICdhY2gnIHwgJ2VjcCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFua0luc3RydW1lbnQgZXh0ZW5kcyBCYXNlQWNjb3VudEluc3RydW1lbnQge1xuICAgIGFjY291bnROdW1iZXI6IHN0cmluZztcbiAgICBpc3N1ZXI6IHN0cmluZztcbiAgICBpYmFuOiBzdHJpbmc7XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdHlwZTogJ2JhbmsnO1xufVxuXG5leHBvcnQgdHlwZSBBY2NvdW50SW5zdHJ1bWVudCA9IFBheVBhbEluc3RydW1lbnQgfCBCYW5rSW5zdHJ1bWVudCB8IEFjaEluc3RydW1lbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRBY2Nlc3NUb2tlbiB7XG4gICAgdmF1bHRBY2Nlc3NUb2tlbjogc3RyaW5nO1xuICAgIHZhdWx0QWNjZXNzRXhwaXJ5OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2Vzc2lvbkNvbnRleHQge1xuICAgIGN1c3RvbWVySWQ6IG51bWJlcjtcbiAgICBzdG9yZUlkOiBzdHJpbmc7XG4gICAgY3VycmVuY3lDb2RlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluc3RydW1lbnRSZXF1ZXN0Q29udGV4dCBleHRlbmRzIFNlc3Npb25Db250ZXh0IHtcbiAgICBhdXRoVG9rZW46IHN0cmluZztcbn1cbiIsImltcG9ydCB7IENhcmRJbnN0cnVtZW50LCBDdXN0b21lckFkZHJlc3MgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgRnVuZGluZyBzb3VyY2VzXG4gKlxuICovXG5leHBvcnQgdHlwZSBGdW5kaW5nVHlwZSA9IHN0cmluZztcblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgSW5pdGlhbGl6YXRpb24gRGF0YVxuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhIHtcbiAgICBhdHRyaWJ1dGlvbklkPzogc3RyaW5nO1xuICAgIGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM6IEZ1bmRpbmdUeXBlW107XG4gICAgYnV0dG9uU3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgYnV5ZXJDb3VudHJ5Pzogc3RyaW5nO1xuICAgIGNsaWVudElkOiBzdHJpbmc7XG4gICAgY2xpZW50VG9rZW4/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVTdHlsZXM/OiBGYXN0bGFuZVN0eWxlc1NldHRpbmdzO1xuICAgIGNvbm5lY3RDbGllbnRUb2tlbj86IHN0cmluZzsgLy8gVE9ETzogcmVtb3ZlIHdoZW4gQkNQIEZhc3RsYW5lIEEvQiB0ZXN0IHdpbGwgYmUgZmluaXNoZWRcbiAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczogRnVuZGluZ1R5cGVbXTtcbiAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlPzogYm9vbGVhbjtcbiAgICBpbnRlbnQ/OiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZW50O1xuICAgIGlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQ/OiBib29sZWFuOyAvLyBQYXlQYWwgRmFzdGxhbmUgcmVsYXRlZFxuICAgIGlzRmFzdGxhbmVTaGlwcGluZ09wdGlvbkF1dG9TZWxlY3RFbmFibGVkPzogYm9vbGVhbjsgLy8gUGF5UGFsIEZhc3RsYW5lIHJlbGF0ZWRcbiAgICBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkPzogYm9vbGVhbjtcbiAgICBpc0JpZ0NvbW1lcmNlUGF5bWVudHNBbmFseXRpY3NWMkVuYWJsZWQ/OiBib29sZWFuOyAvLyBQYXlQYWwgRmFzdGxhbmUgcmVsYXRlZFxuICAgIGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlPzogYm9vbGVhbjtcbiAgICBpc1Zlbm1vRW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNHb29nbGVQYXlFbmFibGVkPzogYm9vbGVhbjtcbiAgICBtZXJjaGFudElkPzogc3RyaW5nO1xuICAgIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgc2hvdWxkUmVuZGVyRmllbGRzPzogYm9vbGVhbjtcbiAgICBzaG91bGRSdW5BY2NlbGVyYXRlZENoZWNrb3V0PzogYm9vbGVhbjsgLy8gVE9ETzogcmVtb3ZlIHdoZW4gQkNQIEZhc3RsYW5lIEEvQiB0ZXN0IHdpbGwgYmUgZmluaXNoZWRcbiAgICBwYXltZW50QnV0dG9uU3R5bGVzPzogUmVjb3JkPHN0cmluZywgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zPjtcbiAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbj86IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbVtdO1xuICAgIHRocmVlRFNWZXJpZmljYXRpb25NZXRob2Q/OiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbEhvc3RXaW5kb3cgY29udGFpbnMgZGlmZmVyZW50XG4gKiBQYXlQYWwgU2RrIGluc3RhbmNlcyBmb3IgZGlmZmVyZW50IHB1cnBvc2VzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEhvc3RXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIHBheXBhbEZhc3RsYW5lPzogUGF5UGFsRmFzdGxhbmU7XG4gICAgcGF5cGFsRmFzdGxhbmVTZGs/OiBQYXlQYWxGYXN0bGFuZVNkaztcbiAgICBwYXlwYWxNZXNzYWdlcz86IFBheVBhbE1lc3NhZ2VzU2RrO1xuICAgIHBheXBhbEFwbXM/OiBQYXlQYWxBcG1TZGs7XG4gICAgcGF5cGFsR29vZ2xlUGF5PzogUGF5UGFsR29vZ2xlUGF5U2RrO1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgU0RLIGNvbmZpZ1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxTZGtDb25maWcge1xuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgJ2NsaWVudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdtZXJjaGFudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdidXllci1jb3VudHJ5Jz86IHN0cmluZztcbiAgICAgICAgJ2VuYWJsZS1mdW5kaW5nJz86IEZ1bmRpbmdUeXBlW107XG4gICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnPzogRnVuZGluZ1R5cGVbXTtcbiAgICAgICAgY3VycmVuY3k/OiBzdHJpbmc7XG4gICAgICAgIGNvbW1pdD86IGJvb2xlYW47XG4gICAgICAgIGludGVudD86IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlbnQ7XG4gICAgICAgIGNvbXBvbmVudHM/OiBQYXlQYWxTZGtDb21wb25lbnRzO1xuICAgIH07XG4gICAgYXR0cmlidXRlczoge1xuICAgICAgICAnZGF0YS1jbGllbnQtbWV0YWRhdGEtaWQnPzogc3RyaW5nO1xuICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtdXNlci1pZC10b2tlbic/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLW5hbWVzcGFjZSc/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLWNsaWVudC10b2tlbic/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLXNkay1jbGllbnQtdG9rZW4nPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBlbnVtIEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlbnQge1xuICAgIEFVVEhPUklaRSA9ICdhdXRob3JpemUnLFxuICAgIENBUFRVUkUgPSAnY2FwdHVyZScsXG59XG5cbmV4cG9ydCB0eXBlIFBheVBhbFNka0NvbXBvbmVudHMgPSBBcnJheTxcbiAgICAnZmFzdGxhbmUnIHwgJ21lc3NhZ2VzJyB8ICdidXR0b25zJyB8ICdwYXltZW50LWZpZWxkcycgfCAnZ29vZ2xlcGF5JyB8ICd0aHJlZS1kb21haW4tc2VjdXJlJ1xuPjtcblxuLyoqXG4gKlxuICogUGF5UGFsIFNkayBpbnN0YW5jZXNcbiAqXG4gKi9cbmV4cG9ydCBlbnVtIExpYWJpbGl0eVNoaWZ0RW51bSB7XG4gICAgUG9zc2libGUgPSAnUE9TU0lCTEUnLFxuICAgIE5vID0gJ05PJyxcbiAgICBVbmtub3duID0gJ1VOS05PV04nLFxuICAgIFllcyA9ICdZRVMnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIHRocmVlRFNlY3VyZVBhcmFtZXRlcnMge1xuICAgIGFtb3VudDogc3RyaW5nO1xuICAgIGN1cnJlbmN5OiBzdHJpbmc7XG4gICAgbm9uY2U6IHN0cmluZztcbiAgICB0aHJlZURTUmVxdWVzdGVkOiBib29sZWFuO1xuICAgIHRyYW5zYWN0aW9uQ29udGV4dDoge1xuICAgICAgICBleHBlcmllbmNlX2NvbnRleHQ6IHtcbiAgICAgICAgICAgIGJyYW5kX25hbWU/OiBzdHJpbmc7XG4gICAgICAgICAgICBsb2NhbGU6IHN0cmluZztcbiAgICAgICAgICAgIHJldHVybl91cmw6IHN0cmluZztcbiAgICAgICAgICAgIGNhbmNlbF91cmw6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lU2RrIHtcbiAgICBUaHJlZURvbWFpblNlY3VyZUNsaWVudDoge1xuICAgICAgICBpc0VsaWdpYmxlKHBhcmFtczogdGhyZWVEU2VjdXJlUGFyYW1ldGVycyk6IFByb21pc2U8Ym9vbGVhbj47XG4gICAgICAgIHNob3coKTogUHJvbWlzZTxUaHJlZURvbWFpblNlY3VyZUNsaWVudFNob3dSZXNwb25zZT47XG4gICAgfTtcbiAgICBGYXN0bGFuZShvcHRpb25zPzogUGF5UGFsRmFzdGxhbmVPcHRpb25zKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZT47XG59XG5cbmludGVyZmFjZSBUaHJlZURvbWFpblNlY3VyZUNsaWVudFNob3dSZXNwb25zZSB7XG4gICAgbGlhYmlsaXR5U2hpZnQ6IExpYWJpbGl0eVNoaWZ0RW51bTtcbiAgICBhdXRoZW50aWNhdGlvblN0YXRlOiBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGU7XG4gICAgbm9uY2U6IHN0cmluZzsgLy8gRW5yaWNoZWQgbm9uY2Ugb3IgdGhlIG9yaWdpbmFsIG5vbmNlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsTWVzc2FnZXNTZGsge1xuICAgIE1lc3NhZ2VzKG9wdGlvbnM6IE1lc3NhZ2luZ09wdGlvbnMpOiBNZXNzYWdpbmdSZW5kZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQXBtU2RrIHtcbiAgICBCdXR0b25zKG9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyk6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zO1xuICAgIFBheW1lbnRGaWVsZHMoXG4gICAgICAgIG9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50RmllbGRzT3B0aW9ucyxcbiAgICApOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEZpZWxkcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxHb29nbGVQYXlTZGsge1xuICAgIEdvb2dsZXBheSgpOiBHb29nbGVQYXk7XG59XG5cbmV4cG9ydCBlbnVtIFREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZSB7XG4gICAgU3VjY2VlZGVkID0gJ3N1Y2NlZWRlZCcsXG4gICAgQ2FuY2VsbGVkID0gJ2NhbmNlbGxlZCcsXG4gICAgRXJyb3JlZCA9ICdlcnJvcmVkJyxcbn1cblxuLyoqXG4gKlxuICogR29vZ2xlIFBheSByZWxhdGVkIHR5cGVzXG4gKlxuICovXG5cbmludGVyZmFjZSBHb29nbGVQYXkge1xuICAgIGNvbmZpZzogKCkgPT4gUHJvbWlzZTxHb29nbGVQYXlDb25maWc+O1xuICAgIGNvbmZpcm1PcmRlcjogKGNvbmZpcm1PcmRlckNvbmZpZzogQ29uZmlybU9yZGVyQ29uZmlnKSA9PiBQcm9taXNlPHsgc3RhdHVzOiBzdHJpbmcgfT47XG4gICAgaW5pdGlhdGVQYXllckFjdGlvbjogKHBheWVyQWN0aW9uQ29uZmlnOiBQYXllckFjdGlvbkNvbmZpZykgPT4gUHJvbWlzZTx2b2lkPjtcbn1cblxuaW50ZXJmYWNlIENvbmZpcm1PcmRlckNvbmZpZyB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHBheW1lbnRNZXRob2REYXRhOiBDb25maXJtT3JkZXJEYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpcm1PcmRlckRhdGEge1xuICAgIHRva2VuaXphdGlvbkRhdGE6IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICB0b2tlbjogc3RyaW5nO1xuICAgIH07XG4gICAgaW5mbzoge1xuICAgICAgICBjYXJkTmV0d29yazogc3RyaW5nO1xuICAgICAgICBjYXJkRGV0YWlsczogc3RyaW5nO1xuICAgIH07XG4gICAgdHlwZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgUGF5ZXJBY3Rpb25Db25maWcge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHb29nbGVQYXlDb25maWcge1xuICAgIGFsbG93ZWRQYXltZW50TWV0aG9kczogQWxsb3dlZFBheW1lbnRNZXRob2RzW107XG4gICAgYXBpVmVyc2lvbjogbnVtYmVyO1xuICAgIGFwaVZlcnNpb25NaW5vcjogbnVtYmVyO1xuICAgIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgaXNFbGlnaWJsZTogYm9vbGVhbjtcbiAgICBtZXJjaGFudEluZm86IHtcbiAgICAgICAgbWVyY2hhbnRJZDogc3RyaW5nO1xuICAgICAgICBtZXJjaGFudE9yaWdpbjogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxsb3dlZFBheW1lbnRNZXRob2RzIHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgICBhbGxvd2VkQXV0aE1ldGhvZHM6IHN0cmluZ1tdO1xuICAgICAgICBhbGxvd2VkQ2FyZE5ldHdvcmtzOiBzdHJpbmdbXTtcbiAgICAgICAgYmlsbGluZ0FkZHJlc3NSZXF1aXJlZDogYm9vbGVhbjtcbiAgICAgICAgYXNzdXJhbmNlRGV0YWlsc1JlcXVpcmVkOiBib29sZWFuO1xuICAgICAgICBiaWxsaW5nQWRkcmVzc1BhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIGZvcm1hdDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgdG9rZW5pemF0aW9uU3BlY2lmaWNhdGlvbjoge1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIGdhdGV3YXk6IHN0cmluZztcbiAgICAgICAgICAgIGdhdGV3YXlNZXJjaGFudElkOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgQnV0dG9uc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xuICAgIGNsb3NlKCk6IHZvaWQ7XG4gICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyB7XG4gICAgc3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgZnVuZGluZ1NvdXJjZTogc3RyaW5nO1xuICAgIGNyZWF0ZU9yZGVyKCk6IFByb21pc2U8c3RyaW5nPjtcbiAgICBvbkFwcHJvdmUoXG4gICAgICAgIGRhdGE6IFBheVBhbEJ1dHRvbkFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IFBheVBhbEJ1dHRvbkFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgKTogUHJvbWlzZTxib29sZWFuIHwgdm9pZD4gfCB2b2lkO1xuICAgIG9uSW5pdD8oXG4gICAgICAgIGRhdGE6IFBheVBhbEJ1dHRvbkluaXRDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IFBheVBhbEJ1dHRvbkluaXRDYWxsYmFja0FjdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPjtcbiAgICBvbkNsaWNrPyhcbiAgICAgICAgZGF0YTogUGF5UGFsQnV0dG9uQ2xpY2tDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IFBheVBhbEJ1dHRvbkNsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4gfCB2b2lkO1xuICAgIG9uRXJyb3I/KGVycm9yOiBFcnJvcik6IHZvaWQ7XG4gICAgb25DYW5jZWw/KCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uQ2xpY2tDYWxsYmFja1BheWxvYWQge1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25DbGlja0NhbGxiYWNrQWN0aW9ucyB7XG4gICAgcmVqZWN0KCk6IHZvaWQ7XG4gICAgcmVzb2x2ZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvbkluaXRDYWxsYmFja1BheWxvYWQge1xuICAgIGNvcnJlbGF0aW9uSUQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25Jbml0Q2FsbGJhY2tBY3Rpb25zIHtcbiAgICBkaXNhYmxlKCk6IHZvaWQ7XG4gICAgZW5hYmxlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJRD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25BcHByb3ZlQ2FsbGJhY2tBY3Rpb25zIHtcbiAgICBvcmRlcjoge1xuICAgICAgICBnZXQ6ICgpID0+IFByb21pc2U8UGF5UGFsT3JkZXJEZXRhaWxzPjtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyRGV0YWlscyB7XG4gICAgcGF5ZXI6IHtcbiAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgZ2l2ZW5fbmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgc3VybmFtZTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbF9hZGRyZXNzOiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3M6IFBheVBhbE9yZGVyQWRkcmVzcztcbiAgICB9O1xuICAgIHB1cmNoYXNlX3VuaXRzOiBBcnJheTx7XG4gICAgICAgIHNoaXBwaW5nOiB7XG4gICAgICAgICAgICBhZGRyZXNzOiBQYXlQYWxPcmRlckFkZHJlc3M7XG4gICAgICAgIH07XG4gICAgfT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJBZGRyZXNzIHtcbiAgICBhZGRyZXNzX2xpbmVfMTogc3RyaW5nO1xuICAgIGFkbWluX2FyZWFfMjogc3RyaW5nO1xuICAgIGFkbWluX2FyZWFfMT86IHN0cmluZztcbiAgICBwb3N0YWxfY29kZTogc3RyaW5nO1xuICAgIGNvdW50cnlfY29kZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBTdHlsZUJ1dHRvbkxhYmVsIHtcbiAgICBwYXlwYWwgPSAncGF5cGFsJyxcbiAgICBjaGVja291dCA9ICdjaGVja291dCcsXG4gICAgYnV5bm93ID0gJ2J1eW5vdycsXG4gICAgcGF5ID0gJ3BheScsXG4gICAgaW5zdGFsbG1lbnQgPSAnaW5zdGFsbG1lbnQnLFxufVxuXG5leHBvcnQgZW51bSBTdHlsZUJ1dHRvbkNvbG9yIHtcbiAgICBnb2xkID0gJ2dvbGQnLFxuICAgIGJsdWUgPSAnYmx1ZScsXG4gICAgc2lsdmVyID0gJ3NpbHZlcicsXG4gICAgYmxhY2sgPSAnYmxhY2snLFxuICAgIHdoaXRlID0gJ3doaXRlJyxcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25TaGFwZSB7XG4gICAgcGlsbCA9ICdwaWxsJyxcbiAgICByZWN0ID0gJ3JlY3QnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyB7XG4gICAgY29sb3I/OiBTdHlsZUJ1dHRvbkNvbG9yO1xuICAgIHNoYXBlPzogU3R5bGVCdXR0b25TaGFwZTtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG4gICAgbGFiZWw/OiBTdHlsZUJ1dHRvbkxhYmVsO1xufVxuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZSBQYXltZW50cyBQYXltZW50RmllbGRzIGZpZWxkc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEZpZWxkcyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50RmllbGRzT3B0aW9ucyB7XG4gICAgc3R5bGU/OiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbiAgICBmaWVsZHM6IHtcbiAgICAgICAgbmFtZT86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbD86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkc1N0eWxlT3B0aW9ucyB7XG4gICAgdmFyaWFibGVzPzoge1xuICAgICAgICBmb250RmFtaWx5Pzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZUJhc2U/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplU20/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVMZz86IHN0cmluZztcbiAgICAgICAgdGV4dENvbG9yPzogc3RyaW5nO1xuICAgICAgICBjb2xvclRleHRQbGFjZWhvbGRlcj86IHN0cmluZztcbiAgICAgICAgY29sb3JCYWNrZ3JvdW5kPzogc3RyaW5nO1xuICAgICAgICBjb2xvckluZm8/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yRGFuZ2VyPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJSYWRpdXM/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckNvbG9yPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJXaWR0aD86IHN0cmluZztcbiAgICAgICAgYm9yZGVyRm9jdXNDb2xvcj86IHN0cmluZztcbiAgICAgICAgc3BhY2luZ1VuaXQ/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBydWxlcz86IHtcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xuICAgIH07XG59XG5cbi8qKlxuICpcbiAqIFBheUxhdGVyIE1lc3NhZ2VzIHJlbGF0ZWQgdHlwZXNcbiAqIGRvYzogaHR0cHM6Ly9kZXZlbG9wZXIucGF5cGFsLmNvbS9kb2NzL2NoZWNrb3V0L3BheS1sYXRlci91cy9pbnRlZ3JhdGUvcmVmZXJlbmNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnaW5nUmVuZGVyIHtcbiAgICByZW5kZXIoY29udGFpbmVyOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VzU3R5bGVPcHRpb25zIHtcbiAgICBjb2xvcj86IHN0cmluZzsgLy8gJ2JsdWUnIHwgJ2JsYWNrJyB8ICd3aGl0ZScgfCAnd2hpdGUtbm8tYm9yZGVyJyB8ICdncmF5JyB8ICdtb25vY2hyb21lJyB8ICdncmF5c2NhbGUnXG4gICAgbGF5b3V0Pzogc3RyaW5nOyAvLyAndGV4dCcgfCAnZmxleCdcbiAgICBsb2dvPzoge1xuICAgICAgICB0eXBlPzogc3RyaW5nOyAvLyAncHJpbWFyeScgfCAnYWx0ZXJuYXRpdmUnIHwgJ2lubGluZScgfCAnbm9uZSdcbiAgICAgICAgcG9zaXRpb24/OiBzdHJpbmc7IC8vICdsZWZ0JyB8ICdyaWdodCcgfCAndG9wJ1xuICAgIH07XG4gICAgcmF0aW8/OiBzdHJpbmc7IC8vICcxeDEnIHwgJzF4NCcgfCAnOHgxJyB8ICcyMHgxJ1xuICAgIHRleHQ/OiB7XG4gICAgICAgIGFsaWduPzogc3RyaW5nOyAvLyAnbGVmdCcgfCAncmlnaHQnIHwgJ2NlbnRlcidcbiAgICAgICAgY29sb3I/OiBzdHJpbmc7IC8vICdibGFjaycgfCAnd2hpdGUnIHwgJ21vbm9jaHJvbWUnIHwgJ2dyYXlzY2FsZSdcbiAgICAgICAgc2l6ZT86IG51bWJlcjsgLy8gZnJvbSAxMCB0byAxNlxuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnaW5nT3B0aW9ucyB7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgcGxhY2VtZW50OiBzdHJpbmc7XG4gICAgc3R5bGU/OiBNZXNzYWdlc1N0eWxlT3B0aW9ucztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHN0YXR1czogYm9vbGVhbjtcbiAgICBzdHlsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBGYXN0bGFuZSByZWxhdGVkIHR5cGVzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lIHtcbiAgICBpZGVudGl0eTogUGF5UGFsRmFzdGxhbmVJZGVudGl0eTtcbiAgICBldmVudHM6IFBheVBhbEZhc3RsYW5lRXZlbnRzO1xuICAgIHByb2ZpbGU6IFBheVBhbEZhc3RsYW5lUHJvZmlsZTtcbiAgICBGYXN0bGFuZUNhcmRDb21wb25lbnQoXG4gICAgICAgIG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZU9wdGlvbnMge1xuICAgIHN0eWxlcz86IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lSWRlbnRpdHkge1xuICAgIGxvb2t1cEN1c3RvbWVyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUxvb2t1cEN1c3RvbWVyQnlFbWFpbFJlc3VsdD47XG4gICAgdHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdyhcbiAgICAgICAgY3VzdG9tZXJDb250ZXh0SWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lTG9va3VwQ3VzdG9tZXJCeUVtYWlsUmVzdWx0IHtcbiAgICBjdXN0b21lckNvbnRleHRJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0IHtcbiAgICBhdXRoZW50aWNhdGlvblN0YXRlPzogUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlO1xuICAgIHByb2ZpbGVEYXRhPzogUGF5UGFsRmFzdGxhbmVQcm9maWxlRGF0YTtcbn1cblxuZXhwb3J0IGVudW0gUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlIHtcbiAgICBTVUNDRUVERUQgPSAnc3VjY2VlZGVkJyxcbiAgICBGQUlMRUQgPSAnZmFpbGVkJyxcbiAgICBDQU5DRUxFRCA9ICdjYW5jZWxlZCcsXG4gICAgVU5SRUNPR05JWkVEID0gJ3VucmVjb2duaXplZCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlRGF0YSB7XG4gICAgbmFtZTogUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZTtcbiAgICBzaGlwcGluZ0FkZHJlc3M6IFBheVBhbEZhc3RsYW5lU2hpcHBpbmdBZGRyZXNzO1xuICAgIGNhcmQ6IFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZSB7XG4gICAgZnVsbE5hbWU6IHN0cmluZztcbiAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgbGFzdE5hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmUge1xuICAgIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgbmF0aW9uYWxOdW1iZXI6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzcyB7XG4gICAgbmFtZTogUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZTtcbiAgICBwaG9uZU51bWJlcjogUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmU7XG4gICAgYWRkcmVzczogUGF5UGFsRmFzdGxhbmVBZGRyZXNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQge1xuICAgIGlkOiBzdHJpbmc7IC8vIG5vbmNlIC8gdG9rZW5cbiAgICBwYXltZW50U291cmNlOiBQYXlQYWxGYXN0bGFuZVBheW1lbnRTb3VyY2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQYXltZW50U291cmNlIHtcbiAgICBjYXJkOiBQYXlQYWxGYXN0bGFuZUNhcmRTb3VyY2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkU291cmNlIHtcbiAgICBicmFuZDogc3RyaW5nO1xuICAgIGV4cGlyeTogc3RyaW5nOyAvLyBcIllZWVktTU1cIlxuICAgIGxhc3REaWdpdHM6IHN0cmluZzsgLy8gXCIxMTExXCJcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYmlsbGluZ0FkZHJlc3M6IFBheVBhbEZhc3RsYW5lQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUFkZHJlc3Mge1xuICAgIGNvbXBhbnk/OiBzdHJpbmc7XG4gICAgYWRkcmVzc0xpbmUxOiBzdHJpbmc7XG4gICAgYWRkcmVzc0xpbmUyPzogc3RyaW5nO1xuICAgIGFkbWluQXJlYTE6IHN0cmluZzsgLy8gU3RhdGVcbiAgICBhZG1pbkFyZWEyOiBzdHJpbmc7IC8vIENpdHlcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeUNvZGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YU1hcHBpbmdSZXN1bHQge1xuICAgIGF1dGhlbnRpY2F0aW9uU3RhdGU6IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZTtcbiAgICBhZGRyZXNzZXM6IEN1c3RvbWVyQWRkcmVzc1tdO1xuICAgIGJpbGxpbmdBZGRyZXNzPzogQ3VzdG9tZXJBZGRyZXNzO1xuICAgIHNoaXBwaW5nQWRkcmVzcz86IEN1c3RvbWVyQWRkcmVzcztcbiAgICBpbnN0cnVtZW50czogQ2FyZEluc3RydW1lbnRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiB7XG4gICAgcm9vdD86IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yUHJpbWFyeT86IHN0cmluZztcbiAgICAgICAgZXJyb3JDb2xvcj86IHN0cmluZztcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBwYWRkaW5nPzogc3RyaW5nO1xuICAgICAgICBwcmltYXJ5Q29sb3I/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBpbnB1dD86IHtcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgZm9jdXNCb3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJXaWR0aD86IHN0cmluZztcbiAgICAgICAgdGV4dENvbG9yQmFzZT86IHN0cmluZztcbiAgICB9O1xuICAgIHRvZ2dsZT86IHtcbiAgICAgICAgY29sb3JQcmltYXJ5Pzogc3RyaW5nO1xuICAgICAgICBjb2xvclNlY29uZGFyeT86IHN0cmluZztcbiAgICB9O1xuICAgIHRleHQ/OiB7XG4gICAgICAgIGJvZHk/OiB7XG4gICAgICAgICAgICBjb2xvcj86IHN0cmluZztcbiAgICAgICAgICAgIGZvbnRTaXplPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBjYXB0aW9uPzoge1xuICAgICAgICAgICAgY29sb3I/OiBzdHJpbmc7XG4gICAgICAgICAgICBmb250U2l6ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGJyYW5kaW5nPzogc3RyaW5nOyAvLyAnbGlnaHQnIHwgJ2RhcmsnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlIHtcbiAgICBzaG93Q2FyZFNlbGVjdG9yKCk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVDYXJkU2VsZWN0b3JSZXNwb25zZT47XG4gICAgc2hvd1NoaXBwaW5nQWRkcmVzc1NlbGVjdG9yKCk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3NTZWxlY3RvclJlc3BvbnNlPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzc1NlbGVjdG9yUmVzcG9uc2Uge1xuICAgIHNlbGVjdGlvbkNoYW5nZWQ6IGJvb2xlYW47XG4gICAgc2VsZWN0ZWRBZGRyZXNzOiBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUNhcmRTZWxlY3RvclJlc3BvbnNlIHtcbiAgICBzZWxlY3Rpb25DaGFuZ2VkOiBib29sZWFuO1xuICAgIHNlbGVjdGVkQ2FyZDogUGF5UGFsRmFzdGxhbmVQcm9maWxlQ2FyZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzIHtcbiAgICBnZXRQYXltZW50VG9rZW4oXG4gICAgICAgIG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lR2V0UGF5bWVudFRva2VuT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQ+O1xuICAgIHJlbmRlcihlbGVtZW50OiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lR2V0UGF5bWVudFRva2VuT3B0aW9ucyB7XG4gICAgbmFtZT86IFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWU7XG4gICAgYmlsbGluZ0FkZHJlc3M/OiBQYXlQYWxGYXN0bGFuZUFkZHJlc3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyB7XG4gICAgZmllbGRzPzogUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50RmllbGRzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudEZpZWxkcyB7XG4gICAgY2FyZGhvbGRlck5hbWU/OiB7XG4gICAgICAgIGVuYWJsZWQ/OiBib29sZWFuO1xuICAgICAgICBwcmVmaWxsPzogc3RyaW5nO1xuICAgIH07XG4gICAgcGhvbmVOdW1iZXI/OiB7XG4gICAgICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAgICAgICBwcmVmaWxsPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVFdmVudHMge1xuICAgIGFwbVNlbGVjdGVkOiAob3B0aW9uczogUGF5UGFsRmFzdGxhbmVBcG1TZWxlY3RlZEV2ZW50T3B0aW9ucykgPT4gdm9pZDtcbiAgICBlbWFpbFN1Ym1pdHRlZDogKG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lRW1haWxFbnRlcmVkRXZlbnRPcHRpb25zKSA9PiB2b2lkO1xuICAgIG9yZGVyUGxhY2VkOiAob3B0aW9uczogUGF5UGFsRmFzdGxhbmVPcmRlclBsYWNlZEV2ZW50T3B0aW9ucykgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUV2ZW50Q29tbW9uT3B0aW9ucyB7XG4gICAgY29udGV4dF90eXBlOiAnY3NfaWQnO1xuICAgIGNvbnRleHRfaWQ6IHN0cmluZzsgLy8gY2hlY2tvdXQgc2Vzc2lvbiBpZFxuICAgIHBhZ2VfdHlwZTogJ2NoZWNrb3V0X3BhZ2UnO1xuICAgIHBhZ2VfbmFtZTogc3RyaW5nOyAvLyB0aXRsZSBvZiB0aGUgY2hlY2tvdXQgaW5pdGlhdGlvbiBwYWdlXG4gICAgcGFydG5lcl9uYW1lOiAnYmlnYyc7XG4gICAgdXNlcl90eXBlOiAnc3RvcmVfbWVtYmVyJyB8ICdzdG9yZV9ndWVzdCc7IC8vIHR5cGUgb2YgdGhlIHVzZXIgb24gdGhlIG1lcmNoYW50IHNpdGVcbiAgICBzdG9yZV9pZDogc3RyaW5nO1xuICAgIG1lcmNoYW50X25hbWU6IHN0cmluZztcbiAgICBleHBlcmltZW50OiBzdHJpbmc7IC8vIHN0cmluZ2lmeSBKU09OIG9iamVjdCBcIlt7IHRyZWF0bWVudF9ncm91cDogJ3Rlc3QnIHwgJ2NvbnRyb2wnIH1dXCJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUFwbVNlbGVjdGVkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIGFwbV9zaG93bjogJzAnIHwgJzEnOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBzaG93biBvbiB0aGUgY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9saXN0OiBzdHJpbmc7IC8vIGxpc3Qgb2YgYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9zZWxlY3RlZDogc3RyaW5nOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBtZXRob2Qgc2VsZWN0ZWQgLyBtZXRob2RJZFxuICAgIGFwbV9sb2NhdGlvbjogJ3ByZS1lbWFpbCBzZWN0aW9uJyB8ICdwYXltZW50IHNlY3Rpb24nOyAvLyBwbGFjZW1lbnQgb2YgQVBNLCB3aGV0aGVyIGl0IGJlIGFib3ZlIHRoZSBlbWFpbCBlbnRyeSBvciBpbiB0aGUgcmFkaW8gYnV0dG9uc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lRW1haWxFbnRlcmVkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIHVzZXJfZW1haWxfc2F2ZWQ6IGJvb2xlYW47IC8vIHNob3dzIHdoZXRoZXIgY2hlY2tvdXQgd2FzIGxvYWRlZCB3aXRoIG9yIHdpdGhvdXQgYSBzYXZlZCBlbWFpbFxuICAgIGFwbV9zaG93bjogJzAnIHwgJzEnOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBzaG93biBvbiB0aGUgY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9saXN0OiBzdHJpbmc7IC8vIGxpc3Qgb2YgYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gY2hlY2tvdXQgcGFnZSAnYXBwbGVwYXksZ29vZ2xlcGF5LHBheXBhbCdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZU9yZGVyUGxhY2VkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIHNlbGVjdGVkX3BheW1lbnRfbWV0aG9kOiBzdHJpbmc7XG4gICAgY3VycmVuY3lfY29kZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUGF5bWVudEZvcm1hdHRlZFBheWxvYWQge1xuICAgIHBheXBhbF9jb25uZWN0X3Rva2VuPzoge1xuICAgICAgICBvcmRlcl9pZD86IHN0cmluZztcbiAgICAgICAgdG9rZW46IHN0cmluZztcbiAgICB9O1xuICAgIHBheXBhbF9mYXN0bGFuZV90b2tlbj86IHtcbiAgICAgICAgb3JkZXJfaWQ/OiBzdHJpbmc7XG4gICAgICAgIHRva2VuOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGYXN0bGFuZVN0eWxlc1NldHRpbmdzIHtcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0Vycm9yQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NGb250RmFtaWx5Pzogc3RyaW5nO1xuICAgIGZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZz86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc1ByaW1hcnlDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRTaXplPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lSW5wdXRTZXR0aW5nc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJSYWRpdXM/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzVGV4dENvbG9yQmFzZT86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NGb2N1c0JvcmRlckJhc2U/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yUHJpbWFyeT86IHN0cmluZztcbiAgICBmYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JTZWNvbmRhcnk/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzRm9udFNpemU/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzRm9udFNpemU/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVCcmFuZGluZ1NldHRpbmdzPzogc3RyaW5nO1xufVxuIiwiaW1wb3J0IHsgU2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBGdW5kaW5nVHlwZSxcbiAgICBQYXlQYWxGYXN0bGFuZVNkayxcbiAgICBQYXlQYWxHb29nbGVQYXlTZGssXG4gICAgUGF5UGFsSG9zdFdpbmRvdyxcbiAgICBQYXlQYWxNZXNzYWdlc1NkayxcbiAgICBQYXlQYWxTZGtDb25maWcsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxTZGtIZWxwZXIge1xuICAgIHByaXZhdGUgd2luZG93OiBQYXlQYWxIb3N0V2luZG93O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcikge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxGYXN0bGFuZVNkayhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgICk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVTZGs+IHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZVNkaykge1xuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRQYXlQYWxGYXN0bGFuZVNka0NvbmZpZ3VyYXRpb24oXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkUGF5UGFsU2RrKGNvbmZpZyk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGspIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZVNkaztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxHb29nbGVQYXlTZGsoXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlPzogYm9vbGVhbixcbiAgICAgICAgZm9yY2VMb2FkPzogYm9vbGVhbixcbiAgICApOiBQcm9taXNlPFBheVBhbEdvb2dsZVBheVNkaz4ge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEdvb2dsZVBheSB8fCBmb3JjZUxvYWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBheXBhbFNka1NjcmlwdENvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsR29vZ2xlUGF5U2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkUGF5UGFsU2RrKHBheXBhbFNka1NjcmlwdENvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEdvb2dsZVBheSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5O1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBheVBhbEFwbXNTZGsoXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICkge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEFwbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsQXBtU2RrQ29uZmlndXJhdGlvbihwYXltZW50TWV0aG9kLCBjdXJyZW5jeUNvZGUpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlQYWxTZGsoY29uZmlnKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxBcG1zKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsQXBtcztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxNZXNzYWdlcyhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxNZXNzYWdlc1Nkaz4ge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlwYWxTZGtNZXNzYWdlc0NvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsU2RrTWVzc2FnZXNDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkUGF5UGFsU2RrKHBheXBhbFNka01lc3NhZ2VzQ29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsTWVzc2FnZXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbE1lc3NhZ2VzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogIGxvYWRQYXlQYWxTZGsgaXMgYSBwYXlwYWwgc2RrIHNjcmlwdCBsb2FkZXJcbiAgICAgKiAgd2hpY2ggbG9hZHMgcGF5cGFsIHNkayBiYXNlZCBvbiBwcm92aWRlZCBjb25maWd1cmF0aW9uXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRQYXlQYWxTZGsoeyBvcHRpb25zLCBhdHRyaWJ1dGVzIH06IFBheVBhbFNka0NvbmZpZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzY3JpcHRPcHRpb25zID0gdGhpcy50cmFuc2Zvcm1Db25maWc8UGF5UGFsU2RrQ29uZmlnWydvcHRpb25zJ10+KG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBzY3JpcHRBdHRyaWJ1dGVzID0gdGhpcy50cmFuc2Zvcm1Db25maWc8UGF5UGFsU2RrQ29uZmlnWydhdHRyaWJ1dGVzJ10+KGF0dHJpYnV0ZXMpO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNka1VybCA9ICdodHRwczovL3d3dy5wYXlwYWwuY29tL3Nkay9qcyc7XG4gICAgICAgIGNvbnN0IHNjcmlwdFF1ZXJ5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhzY3JpcHRPcHRpb25zKS50b1N0cmluZygpO1xuICAgICAgICBjb25zdCBzY3JpcHRTcmMgPSBgJHtwYXlwYWxTZGtVcmx9PyR7c2NyaXB0UXVlcnl9YDtcblxuICAgICAgICBhd2FpdCB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KHNjcmlwdFNyYywge1xuICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBzY3JpcHRBdHRyaWJ1dGVzLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIENvbmZpZ3VyYXRpb25zIHNlY3Rpb25cbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0UGF5UGFsRmFzdGxhbmVTZGtDb25maWd1cmF0aW9uKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICAgICAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gICAgKTogUGF5UGFsU2RrQ29uZmlnIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiwgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghaW5pdGlhbGl6YXRpb25EYXRhIHx8ICFpbml0aWFsaXphdGlvbkRhdGEuY2xpZW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgaW50ZW50LCBjbGllbnRJZCwgbWVyY2hhbnRJZCwgYXR0cmlidXRpb25JZCB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgJ2NsaWVudC1pZCc6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgICdtZXJjaGFudC1pZCc6IG1lcmNoYW50SWQsXG4gICAgICAgICAgICAgICAgY29tbWl0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFsnZmFzdGxhbmUnLCAndGhyZWUtZG9tYWluLXNlY3VyZSddLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1jbGllbnQtbWV0YWRhdGEtaWQnOiBzZXNzaW9uSWQucmVwbGFjZSgvLS9nLCAnJyksXG4gICAgICAgICAgICAgICAgJ2RhdGEtbmFtZXNwYWNlJzogJ3BheXBhbEZhc3RsYW5lU2RrJyxcbiAgICAgICAgICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJzogYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgICAgICAnZGF0YS1zZGstY2xpZW50LXRva2VuJzogY2xpZW50VG9rZW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5UGFsR29vZ2xlUGF5U2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UgPSB0cnVlLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAgIG1lcmNoYW50SWQsXG4gICAgICAgICAgICBidXllckNvdW50cnksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsXG4gICAgICAgICAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLFxuICAgICAgICB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IGNvbW1pdCA9IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkIHx8IGluaXRpYWxpemVzT25DaGVja291dFBhZ2U7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21taXQsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogWydnb29nbGVwYXknXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgICAgICAuLi4oaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSAmJiB7ICdidXllci1jb3VudHJ5JzogYnV5ZXJDb3VudHJ5IH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJzogYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgICAgICAnZGF0YS1jbGllbnQtdG9rZW4nOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsR29vZ2xlUGF5JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxBcG1TZGtDb25maWd1cmF0aW9uKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAgIG1lcmNoYW50SWQsXG4gICAgICAgICAgICBidXllckNvdW50cnksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgIGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMgPSBbXSxcbiAgICAgICAgICAgIGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzID0gW10sXG4gICAgICAgIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgY29uc3QgZW5hYmxlQVBNc0Z1bmRpbmcgPSB0aGlzLmZpbHRlckZ1bmRpbmdPcHRpb25zKGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzKTtcbiAgICAgICAgY29uc3QgZGlzYWJsZUFQTXNGdW5kaW5nID0gdGhpcy5maWx0ZXJGdW5kaW5nT3B0aW9ucyhcbiAgICAgICAgICAgIGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMuZmlsdGVyKFxuICAgICAgICAgICAgICAgIChhcG06IHN0cmluZykgPT4gIWVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzLmluY2x1ZGVzKGFwbSksXG4gICAgICAgICAgICApLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgJ2NsaWVudC1pZCc6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgICdtZXJjaGFudC1pZCc6IG1lcmNoYW50SWQsXG4gICAgICAgICAgICAgICAgJ2VuYWJsZS1mdW5kaW5nJzogZW5hYmxlQVBNc0Z1bmRpbmcubGVuZ3RoID4gMCA/IGVuYWJsZUFQTXNGdW5kaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnOiBkaXNhYmxlQVBNc0Z1bmRpbmcubGVuZ3RoID4gMCA/IGRpc2FibGVBUE1zRnVuZGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBjb21taXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogWydidXR0b25zJywgJ3BheW1lbnQtZmllbGRzJ10sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICAgICAgLi4uKGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUgJiYgeyAnYnV5ZXItY291bnRyeSc6IGJ1eWVyQ291bnRyeSB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICAgICAgJ2RhdGEtbmFtZXNwYWNlJzogJ3BheXBhbEFwbXMnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbFNka01lc3NhZ2VzQ29uZmlndXJhdGlvbihcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgKTogUGF5UGFsU2RrQ29uZmlnIHtcbiAgICAgICAgY29uc3QgeyBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEgfHwgIWluaXRpYWxpemF0aW9uRGF0YS5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBjbGllbnRJZCwgbWVyY2hhbnRJZCwgYXR0cmlidXRpb25JZCwgaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSwgYnV5ZXJDb3VudHJ5IH0gPVxuICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgJ2NsaWVudC1pZCc6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgICdtZXJjaGFudC1pZCc6IG1lcmNoYW50SWQsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogWydtZXNzYWdlcyddLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgLi4uKGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUgJiYgeyAnYnV5ZXItY291bnRyeSc6IGJ1eWVyQ291bnRyeSB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtbmFtZXNwYWNlJzogJ3BheXBhbE1lc3NhZ2VzJyxcbiAgICAgICAgICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJzogYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBVdGlscyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGZpbHRlckZ1bmRpbmdPcHRpb25zKGZ1bmRpbmdPcHRpb25zOiBGdW5kaW5nVHlwZVtdIHwgdW5kZWZpbmVkKTogRnVuZGluZ1R5cGVbXSB7XG4gICAgICAgIGNvbnN0IGZ1bmRpbmdUeXBlc1RvQmVGaWx0ZXJlZCA9IFsna2xhcm5hJ107XG5cbiAgICAgICAgaWYgKCFmdW5kaW5nT3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmRpbmdPcHRpb25zLmZpbHRlcihcbiAgICAgICAgICAgIChmdW5kaW5nT3B0aW9uOiBGdW5kaW5nVHlwZSkgPT4gIWZ1bmRpbmdUeXBlc1RvQmVGaWx0ZXJlZC5pbmNsdWRlcyhmdW5kaW5nT3B0aW9uKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYW5zZm9ybUNvbmZpZzxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KGNvbmZpZzogVCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgICAgICBsZXQgdHJhbnNmb3JtZWRDb25maWcgPSB7fTtcblxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY29uZmlnKSBhcyBBcnJheTxrZXlvZiBUPjtcblxuICAgICAgICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjb25maWdba2V5XTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSAnJyB8fFxuICAgICAgICAgICAgICAgIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYW5zZm9ybWVkQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgIC4uLnRyYW5zZm9ybWVkQ29uZmlnLFxuICAgICAgICAgICAgICAgIFtrZXldOiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLmpvaW4oJywnKSA6IHZhbHVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkQ29uZmlnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZVNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IFBheVBhbFNka0hlbHBlciBmcm9tICcuL3BheXBhbC1zZGstaGVscGVyJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkaygpOiBQYXlQYWxTZGtIZWxwZXIge1xuICAgIHJldHVybiBuZXcgUGF5UGFsU2RrSGVscGVyKGNyZWF0ZVNjcmlwdExvYWRlcigpKTtcbn1cbiIsImludGVyZmFjZSBDb29raWVPcHRpb25zIHtcbiAgICBleHBpcmVzPzogRGF0ZTtcbiAgICBwYXRoPzogc3RyaW5nO1xuICAgIGRvbWFpbj86IHN0cmluZztcbiAgICBzZWN1cmU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb29raWVTdG9yYWdlIHtcbiAgICBzdGF0aWMgZ2V0KG5hbWU6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBjb25zdCBjb29raWVLZXkgPSBgJHtlbmNvZGVVUklDb21wb25lbnQoYCR7bmFtZX1gKX09YDtcbiAgICAgICAgY29uc3QgY29va2llID0gZG9jdW1lbnQuY29va2llO1xuXG4gICAgICAgIGxldCB2YWx1ZSA9IG51bGw7XG5cbiAgICAgICAgY29uc3QgZmlyc3RJbmRleCA9IGNvb2tpZS5pbmRleE9mKGNvb2tpZUtleSk7XG5cbiAgICAgICAgaWYgKGZpcnN0SW5kZXggPiAtMSkge1xuICAgICAgICAgICAgbGV0IGxhc3RJbmRleCA9IGNvb2tpZS5pbmRleE9mKCc7JywgZmlyc3RJbmRleCk7XG5cbiAgICAgICAgICAgIGlmIChsYXN0SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gY29va2llLmxlbmd0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFsdWUgPSBkZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZyhmaXJzdEluZGV4ICsgY29va2llS2V5Lmxlbmd0aCwgbGFzdEluZGV4KSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgc3RhdGljIHNldChuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIG9wdGlvbnM6IENvb2tpZU9wdGlvbnMgPSB7IHNlY3VyZTogdHJ1ZSB9KSB7XG4gICAgICAgIGxldCBjb29raWVUZXh0ID0gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcblxuICAgICAgICBjb25zdCB7IGV4cGlyZXMsIHBhdGgsIGRvbWFpbiwgc2VjdXJlIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmIChleHBpcmVzKSB7XG4gICAgICAgICAgICBjb29raWVUZXh0ICs9IGA7IGV4cGlyZXM9JHtleHBpcmVzLnRvVVRDU3RyaW5nKCl9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAvLyBpbmZvOiBkZWZhdWx0IGNvb2tpZSBleHBpcmF0aW9uIHRpbWUgYWZ0ZXIgc2V0dXBcbiAgICAgICAgICAgIGNvbnN0IG1pbnV0ZXMgPSA2MDtcblxuICAgICAgICAgICAgbm93LnNldFRpbWUobm93LmdldFRpbWUoKSArIG1pbnV0ZXMgKiA2MCAqIDEwMDApO1xuXG4gICAgICAgICAgICBjb29raWVUZXh0ICs9IGA7IGV4cGlyZXM9JHtub3cudG9VVENTdHJpbmcoKX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgcGF0aD0ke3BhdGh9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgZG9tYWluPSR7ZG9tYWlufWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VjdXJlKSB7XG4gICAgICAgICAgICBjb29raWVUZXh0ICs9ICc7IHNlY3VyZSc7XG4gICAgICAgIH1cblxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWVUZXh0O1xuICAgIH1cblxuICAgIHN0YXRpYyByZW1vdmUobmFtZTogc3RyaW5nLCBvcHRpb25zPzogQ29va2llT3B0aW9ucykge1xuICAgICAgICBDb29raWVTdG9yYWdlLnNldChuYW1lLCAnJywgeyBleHBpcmVzOiBuZXcgRGF0ZSgwKSwgLi4ub3B0aW9ucyB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc0VxdWFsLCBvbWl0IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBBZGRyZXNzLFxuICAgIENhcmRJbnN0cnVtZW50LFxuICAgIEN1c3RvbWVyQWRkcmVzcyxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbiAgICBVbnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25UeXBlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IENvb2tpZVN0b3JhZ2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3N0b3JhZ2UnO1xuXG5pbXBvcnQge1xuICAgIFBheVBhbEZhc3RsYW5lLFxuICAgIFBheVBhbEZhc3RsYW5lQWRkcmVzcyxcbiAgICBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0LFxuICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSxcbiAgICBQYXlQYWxGYXN0bGFuZUxvb2t1cEN1c3RvbWVyQnlFbWFpbFJlc3VsdCxcbiAgICBQYXlQYWxGYXN0bGFuZVByb2ZpbGVDYXJkLFxuICAgIFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWUsXG4gICAgUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmUsXG4gICAgUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YU1hcHBpbmdSZXN1bHQsXG4gICAgUGF5UGFsRmFzdGxhbmVTZGssXG4gICAgUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4gICAgUGF5UGFsSG9zdFdpbmRvdyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzIHtcbiAgICBwcml2YXRlIHdpbmRvdzogUGF5UGFsSG9zdFdpbmRvdztcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICB9XG5cbiAgICBhc3luYyBpbml0aWFsaXplUGF5UGFsRmFzdGxhbmUoXG4gICAgICAgIHBheXBhbEZhc3RsYW5lU2RrOiBQYXlQYWxGYXN0bGFuZVNkayxcbiAgICAgICAgaXNUZXN0TW9kZUVuYWJsZWQ6IGJvb2xlYW4sXG4gICAgICAgIHN0eWxlcz86IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxuICAgICk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmU+IHtcbiAgICAgICAgaWYgKGlzVGVzdE1vZGVFbmFibGVkKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Zhc3RsYW5lRW52JywgJ3NhbmRib3gnKTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXhvRW52JywgJ3NhbmRib3gnKTsgLy8gVE9ETzogcmVtb3ZlIGlmIHRoaXMga2V5IGRvZXMgbm90IHVzZSBvbiBQYXlQYWwgc2lkZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZSkge1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFN0eWxlcyA9IHtcbiAgICAgICAgICAgICAgICByb290OiB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvclByaW1hcnk6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lID0gYXdhaXQgcGF5cGFsRmFzdGxhbmVTZGsuRmFzdGxhbmUoe1xuICAgICAgICAgICAgICAgIHN0eWxlczogc3R5bGVzIHx8IGRlZmF1bHRTdHlsZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZTtcbiAgICB9XG5cbiAgICBnZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTogUGF5UGFsRmFzdGxhbmUge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIERldGVjdHMgdGhlIGN1c3RvbWVyIHRvIFBheVBhbCBGYXN0bGFuZSByZWxhdGlvbiBhbmRcbiAgICAgKiByZXR1cm5zIGN1c3RvbWVyQ29udGV4dElkIHRvIHVzZSBpdCBmb3IgYXV0aGVudGljYXRpb25cbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGxvb2t1cEN1c3RvbWVyT3JUaHJvdyhlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUxvb2t1cEN1c3RvbWVyQnlFbWFpbFJlc3VsdD4ge1xuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZSA9IHRoaXMuZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCk7XG5cbiAgICAgICAgcmV0dXJuIHBheXBhbEZhc3RsYW5lLmlkZW50aXR5Lmxvb2t1cEN1c3RvbWVyQnlFbWFpbChlbWFpbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBUcmlnZ2VycyBhdXRoZW50aWNhdGlvbiBmbG93IChzaG93cyBPVFAgcG9wdXApIGlmIHRoZSBjdXN0b21lciByZWNvZ25pc2VkIGFzIFBheVBhbCBGYXN0bGFuZSB1c2VyXG4gICAgICogYW5kIHJldHVybnMgUGF5UGFsIEZhc3RsYW5lIFByb2ZpbGUgZGF0YSB0byB1c2UgaXQgaW4gQkMgY2hlY2tvdXRcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIHRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KFxuICAgICAgICBjdXN0b21lckNvbnRleHRJZD86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgaWYgKCFjdXN0b21lckNvbnRleHRJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmUgPSB0aGlzLmdldFBheVBhbEZhc3RsYW5lT3JUaHJvdygpO1xuXG4gICAgICAgIHJldHVybiBwYXlwYWxGYXN0bGFuZS5pZGVudGl0eS50cmlnZ2VyQXV0aGVudGljYXRpb25GbG93KGN1c3RvbWVyQ29udGV4dElkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqICd1cGRhdGVTdG9yYWdlU2Vzc2lvbklkJyBtZXRob2QgaXMgdXNlZCB0bzpcbiAgICAgKiAtIHNldCBzZXNzaW9uIGlkIGFmdGVyIHVzZXIgd2FzIGF1dGhlbnRpY2F0ZWQgKG9yIHVucmVjb2duaXNlZCkgdG8gdHJpZ2dlciBhdXRoZW50aWNhdGlvbiBhZnRlciBwYWdlIHJlZnJlc2hcbiAgICAgKlxuICAgICAqIEZsb3cgaW5mbzpcbiAgICAgKiBJZiB1c2VyIHVucmVjb2duaXNlZCB0aGVuIHRoZSBsb29rdXAgbWV0aG9kIHdpbGwgYmUgd29ya2luZyBidXQgdGhlIE9UUCB3aWxsIG5vdCBiZSBzaG93blxuICAgICAqIElmIHVzZXIgcmVjb2duaXNlZCBhbmQgbm90IGNhbmNlbGVkIHRoZW4gdGhlIGxvb2t1cCBtZXRob2Qgd2lsbCBiZSB3b3JraW5nIGFuZCB0aGUgT1RQIHdpbGwgYmUgc2hvd24gb25seSBpZiBuZWVkZWRcbiAgICAgKiBJZiB1c2VyIGNhbmNlbHMgdGhlIE9QVCB0aGVuIE9UUCB3aWxsIG5vdCBiZSB0cmlnZ2VyZWQgYWZ0ZXIgcGFnZSByZWZyZXNoXG4gICAgICpcbiAgICAgKi9cbiAgICB1cGRhdGVTdG9yYWdlU2Vzc2lvbklkKHNlc3Npb25JZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGV4cGlyZXMgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIGV4cGlyZXMuc2V0RGF0ZShleHBpcmVzLmdldERhdGUoKSArIDE0KTsgLy8gMiB3ZWVrcyBleHBpcnlcblxuICAgICAgICBjb25zdCBjb29raWVzT3B0aW9uID0ge1xuICAgICAgICAgICAgZXhwaXJlcyxcbiAgICAgICAgICAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgICAgfTtcblxuICAgICAgICBDb29raWVTdG9yYWdlLnNldCgnYmMtZmFzdGxhbmUtc2Vzc2lvbklkJywgc2Vzc2lvbklkLCBjb29raWVzT3B0aW9uKTtcbiAgICB9XG5cbiAgICByZW1vdmVTdG9yYWdlU2Vzc2lvbklkKCk6IHZvaWQge1xuICAgICAgICBDb29raWVTdG9yYWdlLnJlbW92ZSgnYmMtZmFzdGxhbmUtc2Vzc2lvbklkJyk7XG4gICAgfVxuXG4gICAgZ2V0U3RvcmFnZVNlc3Npb25JZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gQ29va2llU3RvcmFnZS5nZXQoJ2JjLWZhc3RsYW5lLXNlc3Npb25JZCcpIHx8ICcnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogJ21hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEnIG1ldGhvZCBpcyByZXNwb25zaWJsZSBmb3I6XG4gICAgICogLSBtYXBwaW5nIFBheVBhbCBGYXN0bGFuZSBQcm9maWxlIGRhdGEgdG8gQkMgZGF0YSBzaGFwZVxuICAgICAqIC0gcmV0dXJuaW5nIG1hcHBlZCBkYXRhIHRvIHVzZSBmb3IgdXBkYXRpbmcgUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgc3RhdGUgYW5kXG4gICAgICogdXBkYXRlIHNoaXBwaW5nIGFuZCBiaWxsaW5nIGFkZHJlc3Nlc1xuICAgICAqXG4gICAgICovXG4gICAgbWFwUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQ6IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgKTogUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YU1hcHBpbmdSZXN1bHQge1xuICAgICAgICBjb25zdCB7IGF1dGhlbnRpY2F0aW9uU3RhdGUsIHByb2ZpbGVEYXRhIH0gPSBhdXRoZW50aWNhdGlvblJlc3VsdDtcblxuICAgICAgICBjb25zdCBwYXlwYWxCaWxsaW5nQWRkcmVzcyA9IHByb2ZpbGVEYXRhPy5jYXJkPy5wYXltZW50U291cmNlPy5jYXJkPy5iaWxsaW5nQWRkcmVzcztcbiAgICAgICAgY29uc3QgcGF5cGFsU2hpcHBpbmdBZGRyZXNzID0gcHJvZmlsZURhdGE/LnNoaXBwaW5nQWRkcmVzcztcbiAgICAgICAgY29uc3QgcGF5cGFsUHJvZmlsZU5hbWUgPSBwcm9maWxlRGF0YT8ubmFtZTtcbiAgICAgICAgY29uc3QgcGF5cGFsSW5zdHJ1bWVudCA9IHByb2ZpbGVEYXRhPy5jYXJkO1xuXG4gICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9IHBheXBhbFNoaXBwaW5nQWRkcmVzc1xuICAgICAgICAgICAgPyB0aGlzLm1hcFBheVBhbFRvQmNBZGRyZXNzKFxuICAgICAgICAgICAgICAgICAgcGF5cGFsU2hpcHBpbmdBZGRyZXNzLmFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICBwYXlwYWxTaGlwcGluZ0FkZHJlc3MubmFtZSxcbiAgICAgICAgICAgICAgICAgIHBheXBhbFNoaXBwaW5nQWRkcmVzcy5waG9uZU51bWJlcixcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgIHBheXBhbEJpbGxpbmdBZGRyZXNzICYmIHBheXBhbFByb2ZpbGVOYW1lXG4gICAgICAgICAgICAgICAgPyB0aGlzLm1hcFBheVBhbFRvQmNBZGRyZXNzKFxuICAgICAgICAgICAgICAgICAgICAgIHBheXBhbEJpbGxpbmdBZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgIHBheXBhbFByb2ZpbGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIHBheXBhbFNoaXBwaW5nQWRkcmVzcz8ucGhvbmVOdW1iZXIsXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGluc3RydW1lbnRzID0gcGF5cGFsSW5zdHJ1bWVudFxuICAgICAgICAgICAgPyB0aGlzLm1hcFBheVBhbFRvQmNJbnN0cnVtZW50KG1ldGhvZElkLCBwYXlwYWxJbnN0cnVtZW50KVxuICAgICAgICAgICAgOiBbXTtcblxuICAgICAgICBjb25zdCBhZGRyZXNzZXMgPSB0aGlzLmZpbHRlckFkZHJlc3Nlcyhbc2hpcHBpbmdBZGRyZXNzLCBiaWxsaW5nQWRkcmVzc10pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlOlxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUgfHwgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLlVOUkVDT0dOSVpFRCxcbiAgICAgICAgICAgIGFkZHJlc3NlcyxcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzLFxuICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgaW5zdHJ1bWVudHMsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgbWFwUGF5UGFsVG9CY0luc3RydW1lbnQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGluc3RydW1lbnQ6IFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQsXG4gICAgKTogQ2FyZEluc3RydW1lbnRbXSB7XG4gICAgICAgIGNvbnN0IHsgaWQsIHBheW1lbnRTb3VyY2UgfSA9IGluc3RydW1lbnQ7XG4gICAgICAgIGNvbnN0IHsgYnJhbmQsIGV4cGlyeSwgbGFzdERpZ2l0cyB9ID0gcGF5bWVudFNvdXJjZS5jYXJkO1xuXG4gICAgICAgIGNvbnN0IFtleHBpcnlZZWFyLCBleHBpcnlNb250aF0gPSBleHBpcnkuc3BsaXQoJy0nKTtcblxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJpZ3BheVRva2VuOiBpZCxcbiAgICAgICAgICAgICAgICBicmFuZCxcbiAgICAgICAgICAgICAgICBkZWZhdWx0SW5zdHJ1bWVudDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXhwaXJ5TW9udGgsXG4gICAgICAgICAgICAgICAgZXhwaXJ5WWVhcixcbiAgICAgICAgICAgICAgICBpaW46ICcnLFxuICAgICAgICAgICAgICAgIGxhc3Q0OiBsYXN0RGlnaXRzLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHRydXN0ZWRTaGlwcGluZ0FkZHJlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvbk1vZGU6IFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUuUEFOLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdjYXJkJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgbWFwQmNUb1BheVBhbEFkZHJlc3MoYWRkcmVzcz86IEFkZHJlc3MpOiBQYXlQYWxGYXN0bGFuZUFkZHJlc3Mge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcGFueTogYWRkcmVzcz8uY29tcGFueSB8fCAnJyxcbiAgICAgICAgICAgIGFkZHJlc3NMaW5lMTogYWRkcmVzcz8uYWRkcmVzczEgfHwgJycsXG4gICAgICAgICAgICBhZGRyZXNzTGluZTI6IGFkZHJlc3M/LmFkZHJlc3MyIHx8ICcnLFxuICAgICAgICAgICAgYWRtaW5BcmVhMTogYWRkcmVzcz8uc3RhdGVPclByb3ZpbmNlQ29kZSB8fCBhZGRyZXNzPy5zdGF0ZU9yUHJvdmluY2UgfHwgJycsXG4gICAgICAgICAgICBhZG1pbkFyZWEyOiBhZGRyZXNzPy5jaXR5IHx8ICcnLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogYWRkcmVzcz8ucG9zdGFsQ29kZSB8fCAnJyxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBhZGRyZXNzPy5jb3VudHJ5Q29kZSB8fCAnJyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBtYXBQYXlQYWxUb0JjQWRkcmVzcyhcbiAgICAgICAgYWRkcmVzczogUGF5UGFsRmFzdGxhbmVBZGRyZXNzLFxuICAgICAgICBwcm9maWxlTmFtZTogUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZSxcbiAgICAgICAgcGhvbmU/OiBQYXlQYWxGYXN0bGFuZVByb2ZpbGVQaG9uZSxcbiAgICAgICAgY3VzdG9tRmllbGRzPzogQ3VzdG9tZXJBZGRyZXNzWydjdXN0b21GaWVsZHMnXSxcbiAgICApOiBDdXN0b21lckFkZHJlc3Mge1xuICAgICAgICBjb25zdCBbZmlyc3ROYW1lLCBsYXN0TmFtZV0gPSBwcm9maWxlTmFtZS5mdWxsTmFtZS5zcGxpdCgnICcpO1xuXG4gICAgICAgIGNvbnN0IHBob25lRGF0YSA9IHtcbiAgICAgICAgICAgIG5hdGlvbmFsTnVtYmVyOiBwaG9uZT8ubmF0aW9uYWxOdW1iZXIgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogcGhvbmU/LmNvdW50cnlDb2RlIHx8ICcnLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIHR5cGU6ICdwYXlwYWwtYWRkcmVzcycsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHByb2ZpbGVOYW1lLmZpcnN0TmFtZSB8fCBmaXJzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBsYXN0TmFtZTogcHJvZmlsZU5hbWUubGFzdE5hbWUgfHwgbGFzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBjb21wYW55OiBhZGRyZXNzLmNvbXBhbnkgfHwgJycsXG4gICAgICAgICAgICBhZGRyZXNzMTogYWRkcmVzcy5hZGRyZXNzTGluZTEsXG4gICAgICAgICAgICBhZGRyZXNzMjogYWRkcmVzcy5hZGRyZXNzTGluZTIgfHwgJycsXG4gICAgICAgICAgICBjaXR5OiBhZGRyZXNzLmFkbWluQXJlYTIsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6IGFkZHJlc3MuYWRtaW5BcmVhMSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGFkZHJlc3MuYWRtaW5BcmVhMSxcbiAgICAgICAgICAgIGNvdW50cnk6IGFkZHJlc3MuY291bnRyeUNvZGUgfHwgJycsIC8vIFRPRE86IHVwZGF0ZSBjb3VudHJ5IHdpdGggdmFsaWQgbmFtaW5nXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcy5jb3VudHJ5Q29kZSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHBob25lOiBwaG9uZURhdGEuY291bnRyeUNvZGUgKyBwaG9uZURhdGEubmF0aW9uYWxOdW1iZXIsXG4gICAgICAgICAgICBjdXN0b21GaWVsZHM6IGN1c3RvbUZpZWxkcyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHJlc3BvbnNpYmxlIGZvciBmaWx0ZXJpbmcgUGF5UGFsIEZhc3RsYW5lIGFkZHJlc3NlcyBpZiB0aGV5IGFyZSB0aGUgc2FtZVxuICAgICAqIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIGFkZHJlc3NlcyB0byB1c2UgdGhlbSBmb3Igc2hpcHBpbmcgYW5kL29yIGJpbGxpbmcgYWRkcmVzcyBzZWxlY3Rpb25zXG4gICAgICogc28gdGhlIGN1c3RvbWVyIHdpbGwgYmUgYWJsZSB0byB1c2UgYWRkcmVzc2VzIGZyb20gUGF5UGFsIEZhc3RsYW5lIGluIGNoZWNrb3V0IGZsb3dcbiAgICAgKlxuICAgICAqL1xuICAgIGZpbHRlckFkZHJlc3NlcyhhZGRyZXNzZXM6IEFycmF5PEN1c3RvbWVyQWRkcmVzcyB8IHVuZGVmaW5lZD4pOiBDdXN0b21lckFkZHJlc3NbXSB7XG4gICAgICAgIHJldHVybiBhZGRyZXNzZXMucmVkdWNlKFxuICAgICAgICAgICAgKGN1c3RvbWVyQWRkcmVzc2VzOiBDdXN0b21lckFkZHJlc3NbXSwgY3VycmVudEFkZHJlc3M6IEN1c3RvbWVyQWRkcmVzcyB8IHVuZGVmaW5lZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY3VycmVudEFkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1c3RvbWVyQWRkcmVzc2VzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHNhbWVBZGRyZXNzSW5UaGVBcnJheSA9IGN1c3RvbWVyQWRkcmVzc2VzLnNvbWUoKGN1c3RvbWVyQWRkcmVzcykgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0VxdWFsQWRkcmVzc2VzKGN1c3RvbWVyQWRkcmVzcywgY3VycmVudEFkZHJlc3MpLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2FtZUFkZHJlc3NJblRoZUFycmF5XG4gICAgICAgICAgICAgICAgICAgID8gY3VzdG9tZXJBZGRyZXNzZXNcbiAgICAgICAgICAgICAgICAgICAgOiBbLi4uY3VzdG9tZXJBZGRyZXNzZXMsIGN1cnJlbnRBZGRyZXNzXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbXSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzRXF1YWxBZGRyZXNzZXMoXG4gICAgICAgIGZpcnN0QWRkcmVzczogQ3VzdG9tZXJBZGRyZXNzLFxuICAgICAgICBzZWNvbmRBZGRyZXNzOiBDdXN0b21lckFkZHJlc3MsXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBpc0VxdWFsKHRoaXMubm9ybWFsaXplQWRkcmVzcyhmaXJzdEFkZHJlc3MpLCB0aGlzLm5vcm1hbGl6ZUFkZHJlc3Moc2Vjb25kQWRkcmVzcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbm9ybWFsaXplQWRkcmVzcyhhZGRyZXNzOiBDdXN0b21lckFkZHJlc3MpIHtcbiAgICAgICAgcmV0dXJuIG9taXQoYWRkcmVzcywgWydpZCcsICdwaG9uZSddKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS11dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzKCk6IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzIHtcbiAgICByZXR1cm4gbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzKCk7XG59XG4iLCJpbXBvcnQgeyBvbWl0QnkgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBGYXN0bGFuZVN0eWxlc1NldHRpbmdzLCBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiB9IGZyb20gJy4uL2luZGV4JztcblxuZnVuY3Rpb24gaXNJbnZhbGlkU3R5bGVPcHRpb24oc3R5bGVPcHRpb246IHVua25vd24pIHtcbiAgICByZXR1cm4gdHlwZW9mIHN0eWxlT3B0aW9uICE9PSAnc3RyaW5nJztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0RmFzdGxhbmVTdHlsZXMoXG4gICAgc3R5bGVTZXR0aW5ncz86IEZhc3RsYW5lU3R5bGVzU2V0dGluZ3MsXG4gICAgdWlTdHlsZXM/OiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbixcbikge1xuICAgIGlmICghdWlTdHlsZXMgJiYgIXN0eWxlU2V0dGluZ3MpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xlYW5VcEZhc3RsYW5lU3R5bGVzKG1lcmdlRmFzdGxhbmVTdHlsZXMoc3R5bGVTZXR0aW5ncywgdWlTdHlsZXMpKTtcbn1cblxuZnVuY3Rpb24gbWVyZ2VGYXN0bGFuZVN0eWxlcyhcbiAgICBzdHlsZVNldHRpbmdzPzogRmFzdGxhbmVTdHlsZXNTZXR0aW5ncyxcbiAgICB1aVN0eWxlcz86IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxuKTogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24ge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJvb3Q6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvclByaW1hcnk6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IgfHxcbiAgICAgICAgICAgICAgICB1aVN0eWxlcz8ucm9vdD8uYmFja2dyb3VuZENvbG9yUHJpbWFyeSxcbiAgICAgICAgICAgIGVycm9yQ29sb3I6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzRXJyb3JDb2xvciB8fCB1aVN0eWxlcz8ucm9vdD8uZXJyb3JDb2xvcixcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzRm9udEZhbWlseSB8fCB1aVN0eWxlcz8ucm9vdD8uZm9udEZhbWlseSxcbiAgICAgICAgICAgIGZvbnRTaXplQmFzZTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRTaXplIHx8IHVpU3R5bGVzPy5yb290Py5mb250U2l6ZUJhc2UsXG4gICAgICAgICAgICBwYWRkaW5nOiBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc1BhZGRpbmcgfHwgdWlTdHlsZXM/LnJvb3Q/LnBhZGRpbmcsXG4gICAgICAgICAgICBwcmltYXJ5Q29sb3I6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NQcmltYXJ5Q29sb3IgfHwgdWlTdHlsZXM/LnJvb3Q/LnByaW1hcnlDb2xvcixcbiAgICAgICAgfSxcbiAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgIGJvcmRlclJhZGl1czpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJSYWRpdXMgfHwgdWlTdHlsZXM/LmlucHV0Py5ib3JkZXJSYWRpdXMsXG4gICAgICAgICAgICBib3JkZXJDb2xvcjpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJDb2xvciB8fCB1aVN0eWxlcz8uaW5wdXQ/LmJvcmRlckNvbG9yLFxuICAgICAgICAgICAgZm9jdXNCb3JkZXJDb2xvcjpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NGb2N1c0JvcmRlckJhc2UgfHxcbiAgICAgICAgICAgICAgICB1aVN0eWxlcz8uaW5wdXQ/LmZvY3VzQm9yZGVyQ29sb3IsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVJbnB1dFNldHRpbmdzQmFja2dyb3VuZENvbG9yIHx8XG4gICAgICAgICAgICAgICAgdWlTdHlsZXM/LmlucHV0Py5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgICBib3JkZXJXaWR0aDpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJXaWR0aCB8fCB1aVN0eWxlcz8uaW5wdXQ/LmJvcmRlcldpZHRoLFxuICAgICAgICAgICAgdGV4dENvbG9yQmFzZTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NUZXh0Q29sb3JCYXNlIHx8IHVpU3R5bGVzPy5pbnB1dD8udGV4dENvbG9yQmFzZSxcbiAgICAgICAgfSxcbiAgICAgICAgdG9nZ2xlOiB7XG4gICAgICAgICAgICBjb2xvclByaW1hcnk6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yUHJpbWFyeSB8fCB1aVN0eWxlcz8udG9nZ2xlPy5jb2xvclByaW1hcnksXG4gICAgICAgICAgICBjb2xvclNlY29uZGFyeTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JTZWNvbmRhcnkgfHxcbiAgICAgICAgICAgICAgICB1aVN0eWxlcz8udG9nZ2xlPy5jb2xvclNlY29uZGFyeSxcbiAgICAgICAgfSxcbiAgICAgICAgdGV4dDoge1xuICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIGNvbG9yOiBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NDb2xvciB8fCB1aVN0eWxlcz8udGV4dD8uYm9keT8uY29sb3IsXG4gICAgICAgICAgICAgICAgZm9udFNpemU6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0ZvbnRTaXplIHx8XG4gICAgICAgICAgICAgICAgICAgIHVpU3R5bGVzPy50ZXh0Py5ib2R5Py5mb250U2l6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYXB0aW9uOiB7XG4gICAgICAgICAgICAgICAgY29sb3I6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0NvbG9yIHx8XG4gICAgICAgICAgICAgICAgICAgIHVpU3R5bGVzPy50ZXh0Py5jYXB0aW9uPy5jb2xvcixcbiAgICAgICAgICAgICAgICBmb250U2l6ZTpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzRm9udFNpemUgfHxcbiAgICAgICAgICAgICAgICAgICAgdWlTdHlsZXM/LnRleHQ/LmNhcHRpb24/LmZvbnRTaXplLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgYnJhbmRpbmc6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lQnJhbmRpbmdTZXR0aW5ncyB8fCB1aVN0eWxlcz8uYnJhbmRpbmcsXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gY2xlYW5VcEZhc3RsYW5lU3R5bGVzKHN0eWxlczogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24pIHtcbiAgICBjb25zdCBmYXN0bGFuZVN0eWxlczogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24gPSB7fTtcblxuICAgIGNvbnN0IHJvb3QgPSBvbWl0Qnkoc3R5bGVzLnJvb3QsIGlzSW52YWxpZFN0eWxlT3B0aW9uKTtcbiAgICBjb25zdCBpbnB1dCA9IG9taXRCeShzdHlsZXMuaW5wdXQsIGlzSW52YWxpZFN0eWxlT3B0aW9uKTtcbiAgICBjb25zdCB0b2dnbGUgPSBvbWl0Qnkoc3R5bGVzLnRvZ2dsZSwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IHRleHRCb2R5ID0gb21pdEJ5KHN0eWxlcy50ZXh0Py5ib2R5LCBpc0ludmFsaWRTdHlsZU9wdGlvbik7XG4gICAgY29uc3QgdGV4dENhcHRpb24gPSBvbWl0Qnkoc3R5bGVzLnRleHQ/LmNhcHRpb24sIGlzSW52YWxpZFN0eWxlT3B0aW9uKTtcbiAgICBjb25zdCBicmFuZGluZyA9IHN0eWxlcy5icmFuZGluZztcblxuICAgIGlmIChPYmplY3Qua2V5cyhyb290KS5sZW5ndGgpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMucm9vdCA9IHJvb3Q7XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKGlucHV0KS5sZW5ndGgpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMuaW5wdXQgPSBpbnB1dDtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXModG9nZ2xlKS5sZW5ndGgpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudG9nZ2xlID0gdG9nZ2xlO1xuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyh0ZXh0Qm9keSkubGVuZ3RoKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLnRleHQgPSB7fTtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudGV4dC5ib2R5ID0gdGV4dEJvZHk7XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKHRleHRDYXB0aW9uKS5sZW5ndGgpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudGV4dCA9IHtcbiAgICAgICAgICAgIC4uLmZhc3RsYW5lU3R5bGVzLnRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLnRleHQuY2FwdGlvbiA9IHRleHRDYXB0aW9uO1xuICAgIH1cblxuICAgIGlmIChicmFuZGluZykge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy5icmFuZGluZyA9IGJyYW5kaW5nO1xuICAgIH1cblxuICAgIHJldHVybiBmYXN0bGFuZVN0eWxlcztcbn1cbiIsImltcG9ydCB7XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBnZXRGYXN0bGFuZVN0eWxlcyxcbiAgICBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0LFxuICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSxcbiAgICBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbixcbiAgICBQYXlQYWxTZGtIZWxwZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBDdXN0b21lckNyZWRlbnRpYWxzLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5IGltcGxlbWVudHMgQ3VzdG9tZXJTdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzU2RrOiBQYXlQYWxTZGtIZWxwZXIsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHM6IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICAgICAgY29uc3QgaXNUZXN0TW9kZUVuYWJsZWQgPSAhIXBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5pc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlO1xuXG4gICAgICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZVNkayA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1Nkay5nZXRQYXlQYWxGYXN0bGFuZVNkayhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGNhcnQuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgICAgICBjYXJ0LmlkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5pbml0aWFsaXplUGF5UGFsRmFzdGxhbmUoXG4gICAgICAgICAgICAgICAgcGF5cGFsRmFzdGxhbmVTZGssXG4gICAgICAgICAgICAgICAgaXNUZXN0TW9kZUVuYWJsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRGYXN0bGFuZVN0eWxlcyhtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgICAgLy8gVE9ETzogYWRkIGxvZ2dlciB0byBiZSBhYmxlIHRvIGRlYnVnIGlzc3VlcyBpZiB0aGVyZSBhbnlcbiAgICAgICAgICAgIC8vIEluZm86IERvIG5vdCB0aHJvdyBhbnl0aGluZyBoZXJlIHRvIGF2b2lkIGJsb2NraW5nIGN1c3RvbWVyIGZyb20gcGFzc2luZyBjaGVja291dCBmbG93XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbkluKGNyZWRlbnRpYWxzOiBDdXN0b21lckNyZWRlbnRpYWxzLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGNyZWRlbnRpYWxzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduT3V0KG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoXG4gICAgICAgIG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCwgY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjaywgbWV0aG9kSWQgfSA9XG4gICAgICAgICAgICBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIGFuZCBpdCBtdXN0IGJlIGEgZnVuY3Rpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjdXN0b21lciA9IHN0YXRlLmdldEN1c3RvbWVyT3JUaHJvdygpO1xuXG4gICAgICAgIGlmIChjdXN0b21lci5pc0d1ZXN0KSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudE1ldGhvZEV4ZWN1dGVkKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5ydW5QYXlQYWxBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KG1ldGhvZElkKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBhZGQgbG9nZ2VyIHRvIGJlIGFibGUgdG8gZGVidWcgaXNzdWVzIGlmIHRoZXJlIGFueVxuICAgICAgICAgICAgICAgIC8vIEluZm86IERvIG5vdCB0aHJvdyBhbnl0aGluZyBoZXJlIHRvIGF2b2lkIGJsb2NraW5nIGN1c3RvbWVyIGZyb20gcGFzc2luZyBjaGVja291dCBmbG93XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBBdXRoZW50aWNhdGlvbiBmbG93IG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgcnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhtZXRob2RJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHN0YXRlLmdldENhcnRPclRocm93KCkuaWQ7XG4gICAgICAgIGNvbnN0IGN1c3RvbWVyID0gc3RhdGUuZ2V0Q3VzdG9tZXIoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzcygpO1xuICAgICAgICBjb25zdCBjdXN0b21lckVtYWlsID0gY3VzdG9tZXI/LmVtYWlsIHx8IGJpbGxpbmdBZGRyZXNzPy5lbWFpbCB8fCAnJztcblxuICAgICAgICBjb25zdCB7IGN1c3RvbWVyQ29udGV4dElkIH0gPVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5sb29rdXBDdXN0b21lck9yVGhyb3coY3VzdG9tZXJFbWFpbCk7XG5cbiAgICAgICAgY29uc3QgYXV0aGVudGljYXRpb25SZXN1bHQgPVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy50cmlnZ2VyQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhcbiAgICAgICAgICAgICAgICBjdXN0b21lckNvbnRleHRJZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgaXNBdXRoZW50aWNhdGlvbkZsb3dDYW5jZWxlZCA9XG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdC5hdXRoZW50aWNhdGlvblN0YXRlID09PSBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUuQ0FOQ0VMRUQ7XG5cbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVDdXN0b21lckRhdGFTdGF0ZShtZXRob2RJZCwgYXV0aGVudGljYXRpb25SZXN1bHQpO1xuXG4gICAgICAgIGlmIChpc0F1dGhlbnRpY2F0aW9uRmxvd0NhbmNlbGVkKSB7XG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLnJlbW92ZVN0b3JhZ2VTZXNzaW9uSWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMudXBkYXRlU3RvcmFnZVNlc3Npb25JZChjYXJ0SWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB1cGRhdGVDdXN0b21lckRhdGFTdGF0ZShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQ6IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHsgYXV0aGVudGljYXRpb25TdGF0ZSwgYWRkcmVzc2VzLCBiaWxsaW5nQWRkcmVzcywgc2hpcHBpbmdBZGRyZXNzLCBpbnN0cnVtZW50cyB9ID1cbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMubWFwUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YShcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgICAgICAgICBhZGRyZXNzZXMsXG4gICAgICAgICAgICBpbnN0cnVtZW50cyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGJpbGxpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNoaXBwaW5nQWRkcmVzcyAmJiBjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRTdGF0ZSA9IGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoXG4gICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICAgICAgdXBkYXRlZFN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgeyBpc0Zhc3RsYW5lU2hpcHBpbmdPcHRpb25BdXRvU2VsZWN0RW5hYmxlZCB9ID1cbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnNpZ25tZW50cyA9IHVwZGF0ZWRTdGF0ZS5nZXRDb25zaWdubWVudHMoKSB8fCBbXTtcbiAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyA9IGNvbnNpZ25tZW50c1swXT8uYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zIHx8IFtdO1xuICAgICAgICAgICAgY29uc3QgZmlyc3RTaGlwcGluZ09wdGlvbiA9IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9uc1swXTtcbiAgICAgICAgICAgIGNvbnN0IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24gPSBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMuZmluZChcbiAgICAgICAgICAgICAgICAob3B0aW9uKSA9PiBvcHRpb24uaXNSZWNvbW1lbmRlZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAocmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiB8fCBmaXJzdFNoaXBwaW5nT3B0aW9uKSAmJlxuICAgICAgICAgICAgICAgIGlzRmFzdGxhbmVTaGlwcGluZ09wdGlvbkF1dG9TZWxlY3RFbmFibGVkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbklkID0gcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbj8uaWQgfHwgZmlyc3RTaGlwcGluZ09wdGlvbi5pZDtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRmFzdGxhbmUgc3R5bGluZyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEZhc3RsYW5lU3R5bGVzKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZTpcbiAgICAgICAgICAgIHwgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9uc1xuICAgICAgICAgICAgfCB1bmRlZmluZWQsXG4gICAgKTogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24gfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCB7IGZhc3RsYW5lU3R5bGVzLCBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgIHJldHVybiBnZXRGYXN0bGFuZVN0eWxlcyhcbiAgICAgICAgICAgIGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZCA/IGZhc3RsYW5lU3R5bGVzIDoge30sXG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZT8uc3R5bGVzLFxuICAgICAgICApO1xuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMsXG4gICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1Nkayxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtY3VzdG9tZXItc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5OiBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGsoKSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMoKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZScgfSwgLy8gdGhpcyBtZXRob2QgaWQgd2lsbCBiZSBwcm92aWRlZCBmb3IgdXNlcnMgZnJvbSB0ZXN0IGdyb3VwXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzJyB9LCAvLyB0aGlzIG1ldGhvZCBpZCB3aWxsIGJlIHByb3ZpZGVkIGZvciB1c2VycyBmcm9tIGNvbnRyb2wgZ3JvdXBcbl0pO1xuIiwiaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQ3VzdG9tZXJDcmVkZW50aWFscyxcbiAgICBDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgIEN1c3RvbWVyU3RyYXRlZ3ksXG4gICAgRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxufSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJDdXN0b21lckluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQ3VzdG9tZXJTdHJhdGVneSBpbXBsZW1lbnRzIEN1c3RvbWVyU3RyYXRlZ3kge1xuICAgIHByaXZhdGUgb25FcnJvciA9IG5vb3A7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyAmXG4gICAgICAgICAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlciwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlci5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlci5jb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlci5vbkNsaWNrICYmXG4gICAgICAgICAgICB0eXBlb2YgYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIub25DbGljayAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlci5vbkNsaWNrXCIgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9uRXJyb3IgPSBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlci5vbkVycm9yIHx8IG5vb3A7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5bWVudE1ldGhvZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIXBheXBhbFNkayB8fCAhcGF5cGFsU2RrLkJ1dHRvbnMgfHwgdHlwZW9mIHBheXBhbFNkay5CdXR0b25zICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICAnW0JDIEJpZ0NvbW1lcmNlUGF5bWVudHMgUGF5TGF0ZXJdOiBidXR0b24gY291bGQgbm90IGJlIHJlbmRlcmVkLCBkdWUgdG8gaXNzdWVzIHdpdGggbG9hZGluZyBQYXlQYWwgU0RLJyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcik7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbkluKGNyZWRlbnRpYWxzOiBDdXN0b21lckNyZWRlbnRpYWxzLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGNyZWRlbnRpYWxzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduT3V0KG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQob3B0aW9ucz86IEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIG9wdGlvbnM/LmNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2s/LigpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25Db21wbGV0ZSwgb25DbGljayB9ID0gYmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLCBwYXltZW50QnV0dG9uU3R5bGVzIH0gPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcbiAgICAgICAgICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyJyxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgICAgICAuLi4ob25DbGljayAmJiB7IG9uQ2xpY2s6ICgpID0+IG9uQ2xpY2soKSB9KSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBob3N0ZWRDaGVja291dENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMub25Ib3N0ZWRDaGVja291dEFwcHJvdmUoZGF0YSwgYWN0aW9ucywgbWV0aG9kSWQsIG9uQ29tcGxldGUpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGZ1bmRpbmdTb3VyY2VzID0gW3BheXBhbFNkay5GVU5ESU5HLlBBWUxBVEVSLCBwYXlwYWxTZGsuRlVORElORy5DUkVESVRdO1xuICAgICAgICBsZXQgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IGZhbHNlO1xuXG4gICAgICAgIGZ1bmRpbmdTb3VyY2VzLmZvckVhY2goKGZ1bmRpbmdTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZnVuZGluZ1NvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgICAgICAgICAuLi4oaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgJiYgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MpLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICAgICAgICAgIGlmIChwYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZW5kZXIoYCMke2NvbnRhaW5lcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWhhc1JlbmRlcmVkU21hcnRCdXR0b24pIHtcbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKFxuICAgICAgICBkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBvbkNvbXBsZXRlPzogKCkgPT4gdm9pZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFkYXRhLm9yZGVySUQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhcnQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBvcmRlckRldGFpbHMgPSBhd2FpdCBhY3Rpb25zLm9yZGVyLmdldCgpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGlmIChjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3Moc2hpcHBpbmdBZGRyZXNzKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt9LCB7IHBhcmFtczogeyBtZXRob2RJZCB9IH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobWV0aG9kSWQsIGRhdGEub3JkZXJJRCk7XG5cbiAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICYmIHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBjaXR5OiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnN0YXRlLFxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW5mbzogd2UgdXNlIHRoZSBzYW1lIGFkZHJlc3MgdG8gZmlsbCBiaWxsaW5nIGFuZCBzaGlwcGluZyBhZGRyZXNzZXMgdG8gaGF2ZSB2YWxpZCBxdW90YSBvbiBCRSBmb3Igb3JkZXIgdXBkYXRpbmcgcHJvY2Vzc1xuICAgICAgICAgICAgLy8gb24gdGhpcyBzdGFnZSB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byB2YWxpZCBjdXN0b21lcidzIGFkZHJlc3MgZXhjZXB0IHNoaXBwaW5nIGRhdGFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhhZGRyZXNzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID1cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyhcbiAgICAgICAgICAgIGRhdGEuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbi5pZCxcbiAgICAgICAgKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckN1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckN1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckN1c3RvbWVyU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQ3VzdG9tZXJTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQ3VzdG9tZXJTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcicgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lckNyZWRlbnRpYWxzLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhLFxufSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lckluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQ3VzdG9tZXJTdHJhdGVneSBpbXBsZW1lbnRzIEN1c3RvbWVyU3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTogQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDdXN0b21lckluaXRpYWxpemVPcHRpb25zICYgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8sIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c192ZW5tb1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8uY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8uY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8ub25DbGljayAmJlxuICAgICAgICAgICAgdHlwZW9mIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vLm9uQ2xpY2sgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8ub25DbGlja1wiIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5bWVudE1ldGhvZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIXBheXBhbFNkayB8fCAhcGF5cGFsU2RrLkJ1dHRvbnMgfHwgdHlwZW9mIHBheXBhbFNkay5CdXR0b25zICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICAnW0JDIFBheW1lbnRzIFZlbm1vXTogQnV0dG9uIGNvdWxkIG5vdCBiZSByZW5kZXJlZCwgZHVlIHRvIGlzc3VlcyB3aXRoIGxvYWRpbmcgUGF5UGFsIFNESycsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8pO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25JbihjcmVkZW50aWFsczogQ3VzdG9tZXJDcmVkZW50aWFscywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihjcmVkZW50aWFscywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbk91dChvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihvcHRpb25zKTtcbiAgICB9XG5cbiAgICBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBvcHRpb25zPy5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrPy4oKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vOiBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25DbGljayB9ID0gYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW87XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG5cbiAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuVkVOTU8sXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoe1xuICAgICAgICAgICAgICAgIC4uLmNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgICAgIGhlaWdodDogRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbycsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICAgICAgLi4uKG9uQ2xpY2sgJiYgeyBvbkNsaWNrOiAoKSA9PiBvbkNsaWNrKCkgfSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uUmVuZGVyID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHBheXBhbEJ1dHRvblJlbmRlci5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHBheXBhbEJ1dHRvblJlbmRlci5yZW5kZXIoYCMke2NvbnRhaW5lcn1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0N1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0N1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0N1c3RvbWVyU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQ3VzdG9tZXJTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQ3VzdG9tZXJTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbycgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG59IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25Jbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25TdHJhdGVneSBpbXBsZW1lbnRzIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTogQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zICYgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBiaWdjb21tZXJjZV9wYXltZW50cywgY29udGFpbmVySWQsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IGlzQnV5Tm93RmxvdyA9IEJvb2xlYW4oYmlnY29tbWVyY2VfcGF5bWVudHM/LmJ1eU5vd0luaXRpYWxpemVPcHRpb25zKTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNCdXlOb3dGbG93ICYmICFiaWdjb21tZXJjZV9wYXltZW50cy5jdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50cy5jdXJyZW5jeUNvZGVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc0J1eU5vd0Zsb3cgJiZcbiAgICAgICAgICAgIHR5cGVvZiBiaWdjb21tZXJjZV9wYXltZW50cy5idXlOb3dJbml0aWFsaXplT3B0aW9ucz8uZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5ICE9PVxuICAgICAgICAgICAgICAgICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHMuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0J1eU5vd0Zsb3cpIHtcbiAgICAgICAgICAgIC8vIEluZm86IGRlZmF1bHQgY2hlY2tvdXQgc2hvdWxkIG5vdCBiZSBsb2FkZWQgZm9yIEJ1eU5vdyBmbG93LFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlcmUgaXMgbm8gY2hlY2tvdXQgc2Vzc2lvbiBhdmFpbGFibGUgZm9yIHRoYXQuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5mbzogd2UgYXJlIHVzaW5nIHByb3ZpZGVkIGN1cnJlbmN5IGNvZGUgZm9yIGJ1eSBub3cgY2FydCxcbiAgICAgICAgLy8gYmVjYXVzZSBjaGVja291dCBzZXNzaW9uIGlzIG5vdCBhdmFpbGFibGUgYmVmb3JlIGJ1eSBub3cgY2FydCBjcmVhdGlvbixcbiAgICAgICAgLy8gaGVuY2UgYXBwbGljYXRpb24gd2lsbCB0aHJvdyBhbiBlcnJvciBvbiBnZXRDYXJ0T3JUaHJvdyBtZXRob2QgY2FsbFxuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBpc0J1eU5vd0Zsb3dcbiAgICAgICAgICAgID8gYmlnY29tbWVyY2VfcGF5bWVudHMuY3VycmVuY3lDb2RlXG4gICAgICAgICAgICA6IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcblxuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oY29udGFpbmVySWQsIG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50cyk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsIHN0eWxlLCBvbkNvbXBsZXRlLCBvbkVsaWdpYmlsaXR5RmFpbHVyZSB9ID1cbiAgICAgICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdiaWdjb21tZXJjZV9wYXltZW50cycpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV5Tm93Rmxvd0NhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlQ2xpY2soYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGRhdGEsIGFjdGlvbnMsIG1ldGhvZElkLCBvbkNvbXBsZXRlKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuRlVORElORy5QQVlQQUwsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGUpLFxuICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgIC4uLihidXlOb3dJbml0aWFsaXplT3B0aW9ucyAmJiBidXlOb3dGbG93Q2FsbGJhY2tzKSxcbiAgICAgICAgICAgIC4uLihpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCAmJiBob3N0ZWRDaGVja291dENhbGxiYWNrcyksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZW5kZXIoYCMke2NvbnRhaW5lcklkfWApO1xuICAgICAgICB9IGVsc2UgaWYgKG9uRWxpZ2liaWxpdHlGYWlsdXJlICYmIHR5cGVvZiBvbkVsaWdpYmlsaXR5RmFpbHVyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FbGlnaWJpbGl0eUZhaWx1cmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcklkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPzogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChidXlOb3dJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYnV5Tm93Q2FydCA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICAgICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KGJ1eU5vd0NhcnQuaWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvbkhvc3RlZENoZWNrb3V0QXBwcm92ZShcbiAgICAgICAgZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgb25Db21wbGV0ZT86ICgpID0+IHZvaWQsXG4gICAgKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGlmICghZGF0YS5vcmRlcklEKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgb3JkZXJEZXRhaWxzID0gYXdhaXQgYWN0aW9ucy5vcmRlci5nZXQoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3MpO1xuXG4gICAgICAgICAgICBpZiAoY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7fSwgeyBwYXJhbXM6IHsgbWV0aG9kSWQgfSB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG1ldGhvZElkLCBkYXRhLm9yZGVySUQpO1xuXG4gICAgICAgICAgICBpZiAob25Db21wbGV0ZSAmJiB0eXBlb2Ygb25Db21wbGV0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEZJWE1FOiBEbyB3ZSByZWFsbHkgbmVlZCB0byByZXR1cm4gdHJ1ZSBoZXJlP1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGNpdHk6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNpdHksXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3Muc3RhdGUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbmZvOiB3ZSB1c2UgdGhlIHNhbWUgYWRkcmVzcyB0byBmaWxsIGJpbGxpbmcgYW5kIHNoaXBwaW5nIGFkZHJlc3NlcyB0byBoYXZlIHZhbGlkIHF1b3RhIG9uIEJFIGZvciBvcmRlciB1cGRhdGluZyBwcm9jZXNzXG4gICAgICAgICAgICAvLyBvbiB0aGlzIHN0YWdlIHdlIGRvbid0IGhhdmUgYWNjZXNzIHRvIHZhbGlkIGN1c3RvbWVyJ3MgYWRkcmVzcyBhY2NlcHQgc2hpcHBpbmcgZGF0YVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGFkZHJlc3MpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhhZGRyZXNzKTtcblxuICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPVxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coXG4gICAgICAgICAgICBkYXRhLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24uaWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25TdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWJ1dHRvbi1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25TdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvblN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvblN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzJyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBNZXNzYWdlc1N0eWxlT3B0aW9ucywgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtIH0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5mdW5jdGlvbiBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnKHtcbiAgICBzdHlsZXMsXG59OiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0pOiBNZXNzYWdlc1N0eWxlT3B0aW9ucyB7XG4gICAgY29uc3QgbWVzc2FnZXNTdHlsZXM6IE1lc3NhZ2VzU3R5bGVPcHRpb25zID0ge307XG5cbiAgICBpZiAoc3R5bGVzLmNvbG9yKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLmNvbG9yID0gc3R5bGVzLmNvbG9yO1xuICAgIH1cblxuICAgIGlmIChzdHlsZXMubGF5b3V0KSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLmxheW91dCA9IHN0eWxlcy5sYXlvdXQ7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlc1snbG9nby10eXBlJ10gfHwgc3R5bGVzWydsb2dvLXBvc2l0aW9uJ10pIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMubG9nbyA9IHt9O1xuXG4gICAgICAgIGlmIChzdHlsZXNbJ2xvZ28tdHlwZSddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvLnR5cGUgPSBzdHlsZXNbJ2xvZ28tdHlwZSddO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0eWxlc1snbG9nby1wb3NpdGlvbiddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvLnBvc2l0aW9uID0gc3R5bGVzWydsb2dvLXBvc2l0aW9uJ107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3R5bGVzLnJhdGlvKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLnJhdGlvID0gc3R5bGVzLnJhdGlvO1xuICAgIH1cblxuICAgIGlmIChzdHlsZXNbJ3RleHQtY29sb3InXSB8fCBzdHlsZXNbJ3RleHQtc2l6ZSddKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLnRleHQgPSB7fTtcblxuICAgICAgICBpZiAoc3R5bGVzWyd0ZXh0LWNvbG9yJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLnRleHQuY29sb3IgPSBzdHlsZXNbJ3RleHQtY29sb3InXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdHlsZXNbJ3RleHQtc2l6ZSddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy50ZXh0LnNpemUgPSArc3R5bGVzWyd0ZXh0LXNpemUnXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtZXNzYWdlc1N0eWxlcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZztcbiIsImltcG9ydCB7XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnLFxuICAgIE1lc3NhZ2luZ09wdGlvbnMsXG4gICAgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgIFBheVBhbE1lc3NhZ2VzU2RrLFxuICAgIFBheVBhbFNka0hlbHBlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG59IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckJ1dHRvbkluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyLWJ1dHRvbi1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJCdXR0b25TdHJhdGVneSBpbXBsZW1lbnRzIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTogQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlQYWxTZGtIZWxwZXI6IFBheVBhbFNka0hlbHBlcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlciwgY29udGFpbmVySWQsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZTogcHJvdmlkZWRDdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXJJZCxcbiAgICAgICAgfSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGlzQnV5Tm93RmxvdyA9ICEhYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzQnV5Tm93RmxvdyAmJiAhcHJvdmlkZWRDdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlci5jdXJyZW5jeUNvZGVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc0J1eU5vd0Zsb3cgJiZcbiAgICAgICAgICAgIHR5cGVvZiBidXlOb3dJbml0aWFsaXplT3B0aW9ucz8uZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5ICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNCdXlOb3dGbG93KSB7XG4gICAgICAgICAgICAvLyBJbmZvOiBkZWZhdWx0IGNoZWNrb3V0IHNob3VsZCBub3QgYmUgbG9hZGVkIGZvciBCdXlOb3cgZmxvdyxcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZXJlIGlzIG5vIGNoZWNrb3V0IHNlc3Npb24gYXZhaWxhYmxlIGZvciB0aGF0LlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgLy8gSW5mbzogd2UgYXJlIHVzaW5nIHByb3ZpZGVkIGN1cnJlbmN5IGNvZGUgZm9yIGJ1eSBub3cgY2FydCxcbiAgICAgICAgLy8gYmVjYXVzZSBjaGVja291dCBzZXNzaW9uIGlzIG5vdCBhdmFpbGFibGUgYmVmb3JlIGJ1eSBub3cgY2FydCBjcmVhdGlvbixcbiAgICAgICAgLy8gaGVuY2UgYXBwbGljYXRpb24gd2lsbCB0aHJvdyBhbiBlcnJvciBvbiBnZXRDYXJ0T3JUaHJvdyBtZXRob2QgY2FsbFxuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBpc0J1eU5vd0Zsb3dcbiAgICAgICAgICAgID8gcHJvdmlkZWRDdXJyZW5jeUNvZGVcbiAgICAgICAgICAgIDogc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihjb250YWluZXJJZCwgbWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyKTtcblxuICAgICAgICBjb25zdCBtZXNzYWdpbmdDb250YWluZXIgPVxuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVySWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWVzc2FnaW5nQ29udGFpbmVySWQpO1xuXG4gICAgICAgIGlmIChjdXJyZW5jeUNvZGUgJiYgbWVzc2FnaW5nQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24gPSBbXSB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgICAgICBjb25zdCBiYW5uZXJDb25maWd1cmF0aW9uID1cbiAgICAgICAgICAgICAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiAmJiBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbi5maW5kKCh7IGlkIH0pID0+IGlkID09PSAnY2FydCcpO1xuXG4gICAgICAgICAgICBpZiAoIWJhbm5lckNvbmZpZ3VyYXRpb24/LnN0YXR1cykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgd2hlbiBkYXRhIGF0dHJpYnV0ZXMgd2lsbCBiZSByZW1vdmVkIGZyb20gcmVsYXRlZCBjYXJ0IGJhbm5lciBjb250YWluZXIgaW4gY29udGVudCBzZXJ2aWNlXG4gICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBwLXN0eWxlLWxvZ28tdHlwZScpO1xuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1wcC1zdHlsZS1sb2dvLXBvc2l0aW9uJyk7XG4gICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBwLXN0eWxlLXRleHQtY29sb3InKTtcbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcHAtc3R5bGUtdGV4dC1zaXplJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheVBhbFNka0hlbHBlciA9IGF3YWl0IHRoaXMucGF5UGFsU2RrSGVscGVyLmdldFBheVBhbE1lc3NhZ2VzKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhpcy5yZW5kZXJNZXNzYWdlcyhwYXlQYWxTZGtIZWxwZXIsIG1lc3NhZ2luZ0NvbnRhaW5lcklkLCBiYW5uZXJDb25maWd1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBjb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcjogQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsIHN0eWxlLCBvbkNvbXBsZXRlLCBvbkVsaWdpYmlsaXR5RmFpbHVyZSB9ID1cbiAgICAgICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyO1xuXG4gICAgICAgIGNvbnN0IGJpZ0NvbW1lcmNlUGF5bWVudHNTZGsgPVxuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcicsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1eU5vd0Zsb3dDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nT3B0aW9uc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vbkhvc3RlZENoZWNrb3V0QXBwcm92ZShkYXRhLCBhY3Rpb25zLCBtZXRob2RJZCwgb25Db21wbGV0ZSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZnVuZGluZ1NvdXJjZXMgPSBbXG4gICAgICAgICAgICBiaWdDb21tZXJjZVBheW1lbnRzU2RrLkZVTkRJTkcuUEFZTEFURVIsXG4gICAgICAgICAgICBiaWdDb21tZXJjZVBheW1lbnRzU2RrLkZVTkRJTkcuQ1JFRElULFxuICAgICAgICBdO1xuICAgICAgICBsZXQgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IGZhbHNlO1xuXG4gICAgICAgIGZ1bmRpbmdTb3VyY2VzLmZvckVhY2goKGZ1bmRpbmdTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZnVuZGluZ1NvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlKSxcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zICYmIGJ1eU5vd0Zsb3dDYWxsYmFja3MpLFxuICAgICAgICAgICAgICAgICAgICAuLi4oaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgJiYgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MpLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwYXlwYWxCdXR0b24gPSBiaWdDb21tZXJjZVBheW1lbnRzU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b24ucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvbkVsaWdpYmlsaXR5RmFpbHVyZSAmJiB0eXBlb2Ygb25FbGlnaWJpbGl0eUZhaWx1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgb25FbGlnaWJpbGl0eUZhaWx1cmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVySWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/OiBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBidXlOb3dDYXJ0ID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coXG4gICAgICAgICAgICAgICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoYnV5Tm93Q2FydC5pZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKFxuICAgICAgICBkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBvbkNvbXBsZXRlPzogKCkgPT4gdm9pZCxcbiAgICApOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgaWYgKCFkYXRhLm9yZGVySUQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBvcmRlckRldGFpbHMgPSBhd2FpdCBhY3Rpb25zLm9yZGVyLmdldCgpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGlmIChjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3Moc2hpcHBpbmdBZGRyZXNzKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt9LCB7IHBhcmFtczogeyBtZXRob2RJZCB9IH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobWV0aG9kSWQsIGRhdGEub3JkZXJJRCk7XG5cbiAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICYmIHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gRklYTUU6IERvIHdlIHJlYWxseSBuZWVkIHRvIHJldHVybiB0cnVlIGhlcmU/XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldEFkZHJlc3Moe1xuICAgICAgICAgICAgY2l0eTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5zdGF0ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEluZm86IHdlIHVzZSB0aGUgc2FtZSBhZGRyZXNzIHRvIGZpbGwgYmlsbGluZyBhbmQgc2hpcHBpbmcgYWRkcmVzc2VzIHRvIGhhdmUgdmFsaWQgcXVvdGEgb24gQkUgZm9yIG9yZGVyIHVwZGF0aW5nIHByb2Nlc3NcbiAgICAgICAgICAgIC8vIG9uIHRoaXMgc3RhZ2Ugd2UgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8gdmFsaWQgY3VzdG9tZXIncyBhZGRyZXNzIGFjY2VwdCBzaGlwcGluZyBkYXRhXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYWRkcmVzcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKGFkZHJlc3MpO1xuXG4gICAgICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdygpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyhcbiAgICAgICAgICAgIGRhdGEuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbi5pZCxcbiAgICAgICAgKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzU2RrOiBQYXlQYWxNZXNzYWdlc1NkayxcbiAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgYmFubmVyQ29uZmlndXJhdGlvbjogUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBjaGVja291dCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENoZWNrb3V0T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbE1lc3NhZ2VzT3B0aW9uczogTWVzc2FnaW5nT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGFtb3VudDogY2hlY2tvdXQub3V0c3RhbmRpbmdCYWxhbmNlLFxuICAgICAgICAgICAgcGxhY2VtZW50OiAnY2FydCcsXG4gICAgICAgICAgICBzdHlsZTogZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyhiYW5uZXJDb25maWd1cmF0aW9uKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxNZXNzYWdlcyA9IHBheXBhbE1lc3NhZ2VzU2RrLk1lc3NhZ2VzKHBheXBhbE1lc3NhZ2VzT3B0aW9ucyk7XG5cbiAgICAgICAgcGF5cGFsTWVzc2FnZXMucmVuZGVyKGAjJHttZXNzYWdpbmdDb250YWluZXJJZH1gKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckJ1dHRvblN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItYnV0dG9uLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckJ1dHRvblN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckJ1dHRvblN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrKCksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckJ1dHRvblN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyJyB9LFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zLFxuICAgIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWFsdGVybmF0aXZlLW1ldGhvZHMtYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneVxuICAgIGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneVxue1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTogQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcywgY29udGFpbmVySWQsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBhcG0sXG4gICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZTogcHJvdmlkZWRDdXJyZW5jeUNvZGUsXG4gICAgICAgIH0gPSBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGlzQnV5Tm93RmxvdyA9ICEhYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c19hcG1zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtc1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYXBtKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcy5hcG1cIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNCdXlOb3dGbG93ICYmICFwcm92aWRlZEN1cnJlbmN5Q29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMuY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaXNCdXlOb3dGbG93ICYmXG4gICAgICAgICAgICB0eXBlb2YgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19hcG1zLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNCdXlOb3dGbG93KSB7XG4gICAgICAgICAgICAvLyBJbmZvOiBkZWZhdWx0IGNoZWNrb3V0IHNob3VsZCBub3QgYmUgbG9hZGVkIGZvciBCdXlOb3cgZmxvdyxcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZXJlIGlzIG5vIGNoZWNrb3V0IHNlc3Npb24gYXZhaWxhYmxlIGZvciB0aGF0LlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluZm86IHdlIGFyZSB1c2luZyBwcm92aWRlZCBjdXJyZW5jeSBjb2RlIGZvciBidXkgbm93IGNhcnQsXG4gICAgICAgIC8vIGJlY2F1c2UgY2hlY2tvdXQgc2Vzc2lvbiBpcyBub3QgYXZhaWxhYmxlIGJlZm9yZSBidXkgbm93IGNhcnQgY3JlYXRpb24sXG4gICAgICAgIC8vIGhlbmNlIGFwcGxpY2F0aW9uIHdpbGwgdGhyb3cgYW4gZXJyb3Igb24gZ2V0Q2FydE9yVGhyb3cgbWV0aG9kIGNhbGxcbiAgICAgICAgY29uc3QgY3VycmVuY3lDb2RlID0gaXNCdXlOb3dGbG93XG4gICAgICAgICAgICA/IHByb3ZpZGVkQ3VycmVuY3lDb2RlXG4gICAgICAgICAgICA6IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcblxuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oY29udGFpbmVySWQsIG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgY29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtczogQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGFwbSwgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsIHN0eWxlLCBvbkVsaWdpYmlsaXR5RmFpbHVyZSB9ID1cbiAgICAgICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXM7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgaXNBdmFpbGFibGVGdW5kaW5nU291cmNlID0gT2JqZWN0LnZhbHVlcyhwYXlwYWxTZGsuRlVORElORykuaW5jbHVkZXMoYXBtKTtcblxuICAgICAgICBpZiAoIWlzQXZhaWxhYmxlRnVuZGluZ1NvdXJjZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBQYXlQYWwgYnV0dG9uIGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMuYXBtXCIgYXJndW1lbnQgaXMgbm90IHZhbGlkIGZ1bmRpbmcgc291cmNlLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcignYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcycpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV5Tm93Rmxvd0NhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlQ2xpY2soYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogYXBtLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlKSxcbiAgICAgICAgICAgIC4uLmRlZmF1bHRDYWxsYmFja3MsXG4gICAgICAgICAgICAuLi4oYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMgJiYgYnV5Tm93Rmxvd0NhbGxiYWNrcyksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uUmVuZGVyID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHBheXBhbEJ1dHRvblJlbmRlci5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHBheXBhbEJ1dHRvblJlbmRlci5yZW5kZXIoYCMke2NvbnRhaW5lcklkfWApO1xuICAgICAgICB9IGVsc2UgaWYgKG9uRWxpZ2liaWxpdHlGYWlsdXJlICYmIHR5cGVvZiBvbkVsaWdpYmlsaXR5RmFpbHVyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FbGlnaWJpbGl0eUZhaWx1cmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcklkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPzogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChidXlOb3dJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYnV5Tm93Q2FydCA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICAgICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KGJ1eU5vd0NhcnQuaWQpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzLWJ1dHRvbi1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc0J1dHRvblN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc0J1dHRvblN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMnIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zLFxuICAgIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgIFN0eWxlQnV0dG9uQ29sb3IsXG59IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0J1dHRvbkluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXZlbm1vLWJ1dHRvbi1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9CdXR0b25TdHJhdGVneSBpbXBsZW1lbnRzIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTogQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzVmVubW9CdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbywgY29udGFpbmVySWQsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCB7IGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLCBjdXJyZW5jeUNvZGU6IHByb3ZpZGVkQ3VycmVuY3lDb2RlIH0gPVxuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8gfHwge307XG5cbiAgICAgICAgY29uc3QgaXNCdXlOb3dGbG93ID0gISFidXlOb3dJbml0aWFsaXplT3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW9cIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNCdXlOb3dGbG93ICYmICFwcm92aWRlZEN1cnJlbmN5Q29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vLmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzQnV5Tm93RmxvdyAmJlxuICAgICAgICAgICAgdHlwZW9mIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8uYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0J1eU5vd0Zsb3cpIHtcbiAgICAgICAgICAgIC8vIEluZm86IGRlZmF1bHQgY2hlY2tvdXQgc2hvdWxkIG5vdCBiZSBsb2FkZWQgZm9yIEJ1eU5vdyBmbG93LFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlcmUgaXMgbm8gY2hlY2tvdXQgc2Vzc2lvbiBhdmFpbGFibGUgZm9yIHRoYXQuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5mbzogd2UgYXJlIHVzaW5nIHByb3ZpZGVkIGN1cnJlbmN5IGNvZGUgZm9yIGJ1eSBub3cgY2FydCxcbiAgICAgICAgLy8gYmVjYXVzZSBjaGVja291dCBzZXNzaW9uIGlzIG5vdCBhdmFpbGFibGUgYmVmb3JlIGJ1eSBub3cgY2FydCBjcmVhdGlvbixcbiAgICAgICAgLy8gaGVuY2UgYXBwbGljYXRpb24gd2lsbCB0aHJvdyBhbiBlcnJvciBvbiBnZXRDYXJ0T3JUaHJvdyBtZXRob2QgY2FsbFxuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBpc0J1eU5vd0Zsb3dcbiAgICAgICAgICAgID8gcHJvdmlkZWRDdXJyZW5jeUNvZGVcbiAgICAgICAgICAgIDogdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihjb250YWluZXJJZCwgbWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgY29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW86IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLCBzdHlsZSwgb25FbGlnaWJpbGl0eUZhaWx1cmUgfSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGZ1bmRpbmdTb3VyY2UgPSBwYXlwYWxTZGsuRlVORElORy5WRU5NTztcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgICAgICAgICAnYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8nLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXlOb3dGbG93Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVDbGljayhidXlOb3dJbml0aWFsaXplT3B0aW9ucyksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuZ2V0VmFsaWRWZW5tb0J1dHRvblN0eWxlcyhzdHlsZSksXG4gICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgLi4uKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zICYmIGJ1eU5vd0Zsb3dDYWxsYmFja3MpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvblJlbmRlciA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChwYXlwYWxCdXR0b25SZW5kZXIuaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICBwYXlwYWxCdXR0b25SZW5kZXIucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgfSBlbHNlIGlmIChvbkVsaWdpYmlsaXR5RmFpbHVyZSAmJiB0eXBlb2Ygb25FbGlnaWJpbGl0eUZhaWx1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRWxpZ2liaWxpdHlGYWlsdXJlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXJJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFZhbGlkVmVubW9CdXR0b25TdHlsZXMoc3R5bGU6IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyB8IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCB2YWxpZEJ1dHRvblN0eWxlID1cbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlKTtcblxuICAgICAgICBpZiAodmFsaWRCdXR0b25TdHlsZS5jb2xvciA9PT0gU3R5bGVCdXR0b25Db2xvci5nb2xkKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLnZhbGlkQnV0dG9uU3R5bGUsXG4gICAgICAgICAgICAgICAgY29sb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsaWRCdXR0b25TdHlsZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucz86IFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1eU5vd0NhcnQgPVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyhcbiAgICAgICAgICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dChidXlOb3dDYXJ0LmlkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQnV0dG9uU3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby1idXR0b24tc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzVmVubW9CdXR0b25TdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQnV0dG9uU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0J1dHRvblN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vJyB9LFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIExvYWRpbmdJbmRpY2F0b3JDb250YWluZXJTdHlsZXMsXG4gICAgTG9hZGluZ0luZGljYXRvclN0eWxlcyxcbn0gZnJvbSAnLi9sb2FkaW5nLWluZGljYXRvci1zdHlsZXMnO1xuXG5jb25zdCBERUZBVUxUX1NUWUxFUzogTG9hZGluZ0luZGljYXRvclN0eWxlcyA9IHtcbiAgICBzaXplOiA3MCxcbiAgICBjb2xvcjogJyNkOWQ5ZDknLFxuICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmZmZmYnLFxufTtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ09OVEFJTkVSX1NUWUxFUyA9IHtcbiAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAnYmFja2dyb3VuZC1jb2xvcic6ICdyZ2JhKDAsIDAsIDAsIDAuNCknLFxuICAgICd6LWluZGV4JzogJzEwMDAnLFxufTtcblxuY29uc3QgUk9UQVRJT05fQU5JTUFUSU9OID0gJ2VtYmVkZGVkLWNoZWNrb3V0LWxvYWRpbmctaW5kaWNhdG9yLXJvdGF0aW9uJztcblxuaW50ZXJmYWNlIExvYWRpbmdJbmRpY2F0b3JPcHRpb25zIHtcbiAgICBzdHlsZXM/OiBMb2FkaW5nSW5kaWNhdG9yU3R5bGVzO1xuICAgIGNvbnRhaW5lclN0eWxlcz86IExvYWRpbmdJbmRpY2F0b3JDb250YWluZXJTdHlsZXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvYWRpbmdJbmRpY2F0b3Ige1xuICAgIHByaXZhdGUgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGluZGljYXRvcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzdHlsZXM6IExvYWRpbmdJbmRpY2F0b3JTdHlsZXM7XG4gICAgcHJpdmF0ZSBjb250YWluZXJTdHlsZXM6IExvYWRpbmdJbmRpY2F0b3JDb250YWluZXJTdHlsZXM7XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zPzogTG9hZGluZ0luZGljYXRvck9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zdHlsZXMgPSB7IC4uLkRFRkFVTFRfU1RZTEVTLCAuLi4ob3B0aW9ucyAmJiBvcHRpb25zLnN0eWxlcykgfTtcbiAgICAgICAgdGhpcy5jb250YWluZXJTdHlsZXMgPSB7IC4uLihvcHRpb25zICYmIG9wdGlvbnMuY29udGFpbmVyU3R5bGVzKSB9O1xuXG4gICAgICAgIHRoaXMuZGVmaW5lQW5pbWF0aW9uKCk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIgPSB0aGlzLmJ1aWxkQ29udGFpbmVyKCk7XG4gICAgICAgIHRoaXMuaW5kaWNhdG9yID0gdGhpcy5idWlsZEluZGljYXRvcigpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuaW5kaWNhdG9yKTtcbiAgICB9XG5cbiAgICBzaG93KHBhcmVudElkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmIChwYXJlbnRJZCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyZW50SWQpO1xuXG4gICAgICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBhdHRhY2ggdGhlIGxvYWRpbmcgaW5kaWNhdG9yIGJlY2F1c2UgdGhlIHBhcmVudCBJRCBpcyBub3QgdmFsaWQuJyxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICB9XG5cbiAgICBoaWRlKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBoYW5kbGVUcmFuc2l0aW9uRW5kID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgaGFuZGxlVHJhbnNpdGlvbkVuZCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGhhbmRsZVRyYW5zaXRpb25FbmQpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZENvbnRhaW5lcigpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmJvdHRvbSA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gJzAnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUudG9wID0gJzAnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgMjUwbXMgZWFzZS1vdXQnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcblxuICAgICAgICB0aGlzLnNldFN0eWxlQXR0cmlidXRlKGNvbnRhaW5lciwgdGhpcy5jb250YWluZXJTdHlsZXMpO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZEluZGljYXRvcigpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGluZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLndpZHRoID0gYCR7dGhpcy5zdHlsZXMuc2l6ZX1weGA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLnN0eWxlcy5zaXplfXB4YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJvcmRlclJhZGl1cyA9IGAke3RoaXMuc3R5bGVzLnNpemV9cHhgO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyID0gJ3NvbGlkIDFweCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXJDb2xvciA9IGAke3RoaXMuc3R5bGVzLmJhY2tncm91bmRDb2xvcn0gJHt0aGlzLnN0eWxlcy5iYWNrZ3JvdW5kQ29sb3J9ICR7dGhpcy5zdHlsZXMuY29sb3J9ICR7dGhpcy5zdHlsZXMuY29sb3J9YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLm1hcmdpbiA9ICcwIGF1dG8nO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUubGVmdCA9ICcwJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnJpZ2h0ID0gJzAnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUudG9wID0gJzUwJSc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoMGRlZyknO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUudHJhbnNmb3JtU3R5bGUgPSAncHJlc2VydmUtM2QnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYW5pbWF0aW9uID0gYCR7Uk9UQVRJT05fQU5JTUFUSU9OfSA1MDBtcyBpbmZpbml0ZSBjdWJpYy1iZXppZXIoMC42OSwgMC4zMSwgMC41NiwgMC44MylgO1xuXG4gICAgICAgIHJldHVybiBpbmRpY2F0b3I7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRTdHlsZUF0dHJpYnV0ZShlbGVtZW50OiBIVE1MRWxlbWVudCwgYXR0cnM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pOiB2b2lkIHtcbiAgICAgICAgT2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goKGspID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoaywgYXR0cnNba10pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRlZmluZUFuaW1hdGlvbigpOiB2b2lkIHtcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gZGVmaW5lIENTUyBhbmltYXRpb24sIHdlIG5lZWQgdG8gaW5zZXJ0IGEgc3R5bGVzaGVldCBpbnRvIHRoZSBob3N0IGZyYW1lLlxuICAgICAgICAvLyBXZSBvbmx5IGhhdmUgdG8gZG8gaXQgb25jZS5cbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFJPVEFUSU9OX0FOSU1BVElPTikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblxuICAgICAgICBzdHlsZS5pZCA9IFJPVEFUSU9OX0FOSU1BVElPTjtcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvblxuICAgICAgICBkb2N1bWVudC5oZWFkPy5hcHBlbmRDaGlsZChzdHlsZSk7XG5cbiAgICAgICAgaWYgKHN0eWxlLnNoZWV0IGluc3RhbmNlb2YgQ1NTU3R5bGVTaGVldCkge1xuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBwcm92aWRlIHRoZSAybmQgcGFyYW1ldGVyIGZvciBJRTExLCBldmVuIHRob3VnaCBpdCBpc1xuICAgICAgICAgICAgLy8gMCBieSBkZWZhdWx0IGZvciBhbGwgb3RoZXIgYnJvd3NlcnMuXG4gICAgICAgICAgICBzdHlsZS5zaGVldC5pbnNlcnRSdWxlKFxuICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICBAa2V5ZnJhbWVzICR7Uk9UQVRJT05fQU5JTUFUSU9OfSB7XG4gICAgICAgICAgICAgICAgICAgIDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSgwZGVnKTsgfVxuICAgICAgICAgICAgICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMgPSB7XG4gICAgJ2JhY2tncm91bmQtY29sb3InOiAncmdiYSgwLCAwLCAwLCAwLjQpJyxcbiAgICAnei1pbmRleCc6ICcxMDAwJyxcbn07XG4iLCJpbXBvcnQgSW52YWxpZEFyZ3VtZW50RXJyb3IgZnJvbSAnLi9pbnZhbGlkLWFyZ3VtZW50LWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB3ZSBhcmUgdW5hYmxlIHRvIHN1Ym1pdCBhIHBheW1lbnQgYmVjYXVzZVxuICogdGhlIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzLCBpLmUuOiBpZiBhbiBhcmd1bWVudCBpc1xuICogbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIGV4dGVuZHMgSW52YWxpZEFyZ3VtZW50RXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGludmFsaWRGaWVsZHM/OiBzdHJpbmdbXSkge1xuICAgICAgICBsZXQgbWVzc2FnZSA9ICdVbmFibGUgdG8gc3VibWl0IHBheW1lbnQgZm9yIHRoZSBvcmRlciBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIGludmFsaWQuJztcblxuICAgICAgICBpZiAoaW52YWxpZEZpZWxkcykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IE1ha2Ugc3VyZSB0aGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgcHJvdmlkZWQgY29ycmVjdGx5OiAke2ludmFsaWRGaWVsZHMuam9pbihcbiAgICAgICAgICAgICAgICAnLCAnLFxuICAgICAgICAgICAgKX0uYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHVuYWJsZSB0byBzdWNjZXNzZnVsbHkgc3VibWl0IGEgc2VydmVyIHJlcXVlc3RcbiAqIHVzaW5nIGEgcGF5bWVudCBtZXRob2QgYmVjYXVzZSB0aGUgbWV0aG9kIGhhcyBpbnZhbGlkIGNvbmZpZ3VyYXRpb24gb3IgaXMgaW5cbiAqIGFuIGludmFsaWQgc3RhdGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3I8VCA9IGFueT4gZXh0ZW5kcyBSZXF1ZXN0RXJyb3I8VD4ge1xuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlPzogUmVzcG9uc2U8VD4pIHtcbiAgICAgICAgc3VwZXIocmVzcG9uc2UsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGVyZSBpcyBhIHByb2JsZW0gcHJvY2Vzc2luZyB5b3VyIHBheW1lbnQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RJbnZhbGlkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfaW52YWxpZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSG9zdGVkSW5zdHJ1bWVudCB9IGZyb20gJy4vcGF5bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UoXG4gICAgaW5zdHJ1bWVudDogdW5rbm93bixcbik6IGluc3RydW1lbnQgaXMgSG9zdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGluc3RydW1lbnQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGluc3RydW1lbnQgIT09IG51bGwgJiZcbiAgICAgICAgKHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKSAmJlxuICAgICAgICAodHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKVxuICAgICk7XG59XG4iLCJpbXBvcnQge1xuICAgIEZvcm1hdHRlZFBheWxvYWQsXG4gICAgRm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICcuL3BheW1lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1ZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgVmF1bHRlZEluc3RydW1lbnQge1xuICAgIHJldHVybiBCb29sZWFuKChpbnN0cnVtZW50IGFzIFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgICBCb29sZWFuKChpbnN0cnVtZW50IGFzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdHJ1bWVudCwgJ2NjTnVtYmVyJykgJiZcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0cnVtZW50LCAnY2NDdnYnKVxuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Zvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgRm9ybWF0dGVkUGF5bG9hZDxGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudD4ge1xuICAgIGNvbnN0IGZvcm1hdHRlZEluc3RydW1lbnQgPSAoaW5zdHJ1bWVudCBhcyBGb3JtYXR0ZWRQYXlsb2FkPEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50PilcbiAgICAgICAgLmZvcm1hdHRlZFBheWxvYWQ7XG5cbiAgICBpZiAoIWZvcm1hdHRlZEluc3RydW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgQm9vbGVhbihmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiAmJiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbi50b2tlbilcbiAgICApO1xufVxuIiwiZXhwb3J0IGludGVyZmFjZSBCYXNlSW5zdHJ1bWVudCB7XG4gICAgYmlncGF5VG9rZW46IHN0cmluZztcbiAgICBkZWZhdWx0SW5zdHJ1bWVudDogYm9vbGVhbjtcbiAgICBwcm92aWRlcjogc3RyaW5nO1xuICAgIHRydXN0ZWRTaGlwcGluZ0FkZHJlc3M6IGJvb2xlYW47XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlSW5zdHJ1bWVudChpbnN0cnVtZW50OiB1bmtub3duKTogaW5zdHJ1bWVudCBpcyBCYXNlSW5zdHJ1bWVudCB7XG4gICAgaWYgKHR5cGVvZiBpbnN0cnVtZW50ICE9PSAnb2JqZWN0JyB8fCBpbnN0cnVtZW50ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICAnYmlncGF5VG9rZW4nIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ2RlZmF1bHRJbnN0cnVtZW50JyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICdwcm92aWRlcicgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAndHJ1c3RlZFNoaXBwaW5nQWRkcmVzcycgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAnbWV0aG9kJyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICd0eXBlJyBpbiBpbnN0cnVtZW50XG4gICAgKTtcbn1cbiIsImltcG9ydCB7IGlzQmlnQ29tbWVyY2VQYXltZW50c1Byb3ZpZGVyRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgSG9zdGVkSW5zdHJ1bWVudCxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlLFxuICAgIGlzVmF1bHRlZEluc3RydW1lbnQsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5LFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudCxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5pbXBvcnQgeyBpc0Jhc2VJbnN0cnVtZW50IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG59IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj86IHN0cmluZztcbiAgICBwcml2YXRlIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwYXlwYWxCdXR0b24/OiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucztcbiAgICBwcml2YXRlIGJpZ2NvbW1lcmNlX3BheW1lbnRzPzogQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRJbml0aWFsaXplT3B0aW9ucztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTogQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yOiBMb2FkaW5nSW5kaWNhdG9yLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHMgfSA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgdGhpcy5iaWdjb21tZXJjZV9wYXltZW50cyA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gYmlnY29tbWVyY2VfcGF5bWVudHMuY29udGFpbmVyLnNwbGl0KCcjJylbMV07XG5cbiAgICAgICAgLy8gSW5mbzpcbiAgICAgICAgLy8gVGhlIFBheVBhbCBidXR0b24gYW5kIGZpZWxkcyBzaG91bGQgbm90IGJlIHJlbmRlcmVkIHdoZW4gc2hvcHBlciB3YXMgcmVkaXJlY3RlZCB0byBDaGVja291dCBwYWdlXG4gICAgICAgIC8vIGFmdGVyIHVzaW5nIHNtYXJ0IHBheW1lbnQgYnV0dG9uIG9uIFBEUCBvciBDYXJ0IHBhZ2UuIEluIHRoaXMgY2FzZSBiYWNrZW5kIHJldHVybnMgb3JkZXIgaWQgaWZcbiAgICAgICAgLy8gaXQgaXMgYXZhaWxhYmxlIGluIGNoZWNrb3V0IHNlc3Npb24uIFRoZXJlZm9yZSwgaXQgaXMgbm90IG5lY2Vzc2FyeSB0byByZW5kZXIgUGF5UGFsIGJ1dHRvbi5cbiAgICAgICAgaWYgKHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8ub3JkZXJJZDtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmIChiaWdjb21tZXJjZV9wYXltZW50cy5vbkluaXQgJiYgdHlwZW9mIGJpZ2NvbW1lcmNlX3BheW1lbnRzLm9uSW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHMub25Jbml0KCgpID0+IHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50cykpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHMuc2hvdWxkUmVuZGVyUGF5UGFsQnV0dG9uT25Jbml0aWFsaXphdGlvbiA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50cy5zaG91bGRSZW5kZXJQYXlQYWxCdXR0b25PbkluaXRpYWxpemF0aW9uXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCB7IG9uRXJyb3IgfSA9IHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHMgfHwge307XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheW1lbnREYXRhIH0gPSBwYXltZW50O1xuXG4gICAgICAgIGlmICh0aGlzLmlzUGF5UGFsVmF1bHRlZEluc3RydW1lbnRQYXltZW50RGF0YShwYXltZW50RGF0YSkgJiYgIXRoaXMub3JkZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5vcmRlcklkID0gYXdhaXQgdGhpcy5jcmVhdGVPcmRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHRoaXMuaXNQYXlQYWxWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnREYXRhKHBheW1lbnREYXRhKVxuICAgICAgICAgICAgPyB0aGlzLnByZXBhcmVWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnRQYXlsb2FkKG1ldGhvZElkLCB0aGlzLm9yZGVySWQsIHBheW1lbnREYXRhKVxuICAgICAgICAgICAgOiB0aGlzLnByZXBhcmVQYXltZW50UGF5bG9hZChtZXRob2RJZCwgdGhpcy5vcmRlcklkLCBwYXltZW50RGF0YSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb3ZpZGVyRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsocGF5bWVudC5tZXRob2RJZCk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5iaWdjb21tZXJjZV9wYXltZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24/LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihwYXltZW50Lm1ldGhvZElkLCB0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKCdJTlNUUlVNRU5UX0RFQ0xJTkVEJyksIG9uRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIG9uRXJyb3IpO1xuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbj8uY2xvc2UoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZChcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsT3JkZXJJZDogc3RyaW5nLFxuICAgICAgICBwYXltZW50RGF0YTogVmF1bHRlZEluc3RydW1lbnQgJiBIb3N0ZWRJbnN0cnVtZW50LFxuICAgICk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCB7IGluc3RydW1lbnRJZCwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCB9ID0gcGF5bWVudERhdGE7XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkQ29uZmlybUluc3RydW1lbnQgPSAhdGhpcy5pc1RydXN0ZWRWYXVsdGluZ0Zsb3cocGF5bWVudERhdGEpO1xuXG4gICAgICAgIGlmIChzaG91bGRDb25maXJtSW5zdHJ1bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudDogc2hvdWxkQ29uZmlybUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IHBheXBhbE9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogcGF5cGFsT3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYmlncGF5X3Rva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogaW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJlcGFyZVBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxPcmRlcklkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keVsncGF5bWVudERhdGEnXSxcbiAgICApOiBQYXltZW50IHtcbiAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCA9IGZhbHNlLCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID0gZmFsc2UgfSA9XG4gICAgICAgICAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlKHBheW1lbnREYXRhKSA/IHBheW1lbnREYXRhIDoge307XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBwYXlwYWxPcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV0dG9uIG1ldGhvZHMvY2FsbGJhY2tzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50czogQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBwYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkVycm9yLCBvblJlbmRlckJ1dHRvbiwgb25WYWxpZGF0ZSwgc3VibWl0Rm9ybSB9ID0gYmlnY29tbWVyY2VfcGF5bWVudHM7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uT3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuUEFZUEFMLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKFxuICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT4gdGhpcy5jcmVhdGVPcmRlcigpLFxuICAgICAgICAgICAgb25DbGljazogKF8sIGFjdGlvbnMpID0+IHRoaXMuaGFuZGxlQ2xpY2soYWN0aW9ucywgb25WYWxpZGF0ZSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhKSA9PiB0aGlzLmhhbmRsZUFwcHJvdmUoZGF0YSwgc3VibWl0Rm9ybSksXG4gICAgICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIG9uRXJyb3IpLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25PcHRpb25zKTtcblxuICAgICAgICBpZiAoIXRoaXMucGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9uUmVuZGVyQnV0dG9uICYmIHR5cGVvZiBvblJlbmRlckJ1dHRvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25SZW5kZXJCdXR0b24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uLnJlbmRlcihjb250YWluZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGFjdGlvbnM6IENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBvblZhbGlkYXRlOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvblZhbGlkYXRlJ10sXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcmVzb2x2ZSwgcmVqZWN0IH0gPSBhY3Rpb25zO1xuXG4gICAgICAgIGNvbnN0IG9uVmFsaWRhdGlvblBhc3NlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcih0cnVlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCBvblZhbGlkYXRlKG9uVmFsaWRhdGlvblBhc3NlZCwgcmVqZWN0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUFwcHJvdmUoXG4gICAgICAgIHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBzdWJtaXRGb3JtOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydzdWJtaXRGb3JtJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySUQ7XG5cbiAgICAgICAgc3VibWl0Rm9ybSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoXG4gICAgICAgIGVycm9yOiB1bmtub3duLFxuICAgICAgICBvbkVycm9yOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvbkVycm9yJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVPcmRlcigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBmaWVsZHNWYWx1ZXMgPSB0aGlzLmdldEZpZWxkc1ZhbHVlcygpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAnYmlnY29tbWVyY2VfcGF5bWVudHNjaGVja291dCcsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQ6IGZpZWxkc1ZhbHVlcz8uc2hvdWxkU2F2ZUluc3RydW1lbnQgfHwgZmFsc2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVmF1bHRpbmcgZmxvdyBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgZ2V0RmllbGRzVmFsdWVzKCk6IEhvc3RlZEluc3RydW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCB7IGdldEZpZWxkc1ZhbHVlcyB9ID0gdGhpcy5iaWdjb21tZXJjZV9wYXltZW50cyB8fCB7fTtcblxuICAgICAgICByZXR1cm4gdHlwZW9mIGdldEZpZWxkc1ZhbHVlcyA9PT0gJ2Z1bmN0aW9uJyA/IGdldEZpZWxkc1ZhbHVlcygpIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNUcnVzdGVkVmF1bHRpbmdGbG93KHBheW1lbnREYXRhPzogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChwYXltZW50RGF0YSAmJiBpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnREYXRhKSkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICAgICAgY29uc3QgaW5zdHJ1bWVudHMgPSBzdGF0ZS5nZXRJbnN0cnVtZW50cygpO1xuXG4gICAgICAgICAgICBjb25zdCBmaW5kSW5zdHJ1bWVudCA9IGluc3RydW1lbnRzPy5maW5kKFxuICAgICAgICAgICAgICAgIChpbnN0cnVtZW50KSA9PlxuICAgICAgICAgICAgICAgICAgICBpc0Jhc2VJbnN0cnVtZW50KGluc3RydW1lbnQpICYmXG4gICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnQuYmlncGF5VG9rZW4gPT09IHBheW1lbnREYXRhLmluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCB0cnVzdGVkU2hpcHBpbmdBZGRyZXNzID0gaXNCYXNlSW5zdHJ1bWVudChmaW5kSW5zdHJ1bWVudClcbiAgICAgICAgICAgICAgICA/IGZpbmRJbnN0cnVtZW50LnRydXN0ZWRTaGlwcGluZ0FkZHJlc3NcbiAgICAgICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgICAgICByZXR1cm4gISF0cnVzdGVkU2hpcHBpbmdBZGRyZXNzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTG9hZGluZyBJbmRpY2F0b3IgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogR3VhcmRzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzUGF5UGFsVmF1bHRlZEluc3RydW1lbnRQYXltZW50RGF0YShcbiAgICAgICAgcGF5bWVudERhdGE/OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4gICAgKTogcGF5bWVudERhdGEgaXMgVmF1bHRlZEluc3RydW1lbnQgJiBIb3N0ZWRJbnN0cnVtZW50IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICEhcGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkgJiYgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzUHJvdmlkZXJFcnJvcihlcnJvcjogdW5rbm93bik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoaXNCaWdDb21tZXJjZVBheW1lbnRzUHJvdmlkZXJFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgIGNvbnN0IHBheXBhbFByb3ZpZGVyRXJyb3IgPSBlcnJvcj8uZXJyb3JzPy5maWx0ZXIoKGUpID0+IGUucHJvdmlkZXJfZXJyb3IpIHx8IFtdO1xuXG4gICAgICAgICAgICByZXR1cm4gcGF5cGFsUHJvdmlkZXJFcnJvclswXT8ucHJvdmlkZXJfZXJyb3I/LmNvZGUgPT09ICdJTlNUUlVNRU5UX0RFQ0xJTkVEJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIFByb3ZpZGVyRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgZXJyb3JzPzogRXJyb3JFbGVtZW50W107XG4gICAgc3RhdHVzPzogc3RyaW5nO1xuICAgIHRocmVlX2RzX3Jlc3VsdD86IHtcbiAgICAgICAgYWNzX3VybDogdW5rbm93bjtcbiAgICAgICAgcGF5ZXJfYXV0aF9yZXF1ZXN0OiB1bmtub3duO1xuICAgICAgICBtZXJjaGFudF9kYXRhOiB1bmtub3duO1xuICAgICAgICBjYWxsYmFja191cmw6IHVua25vd247XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFcnJvckVsZW1lbnQge1xuICAgIGNvZGU6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgcHJvdmlkZXJfZXJyb3I/OiB7XG4gICAgICAgIGNvZGU6IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0JpZ0NvbW1lcmNlUGF5bWVudHNQcm92aWRlckVycm9yKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUHJvdmlkZXJFcnJvciB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IgIT09IG51bGwgJiYgJ2Vycm9ycycgaW4gZXJyb3I7XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IHsgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTIH0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtY29uc3RhbnRzJztcbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIG5ldyBMb2FkaW5nSW5kaWNhdG9yKHtcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlczogTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTLFxuICAgICAgICB9KSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50cycgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50UHJvdmlkZXJDdXN0b21lcixcbiAgICBQYXlQYWxDb25uZWN0Q3VzdG9tZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG4vLyBUT0RPOiB1cGRhdGUgUGF5UGFsQ29ubmVjdEN1c3RvbWVyIHdpdGggUGF5UGFsRmFzdGxhbmVDdXN0b21lclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQYXlQYWxGYXN0bGFuZUN1c3RvbWVyKFxuICAgIGN1c3RvbWVyPzogUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4pOiBjdXN0b21lciBpcyBQYXlQYWxDb25uZWN0Q3VzdG9tZXIge1xuICAgIGlmICghY3VzdG9tZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgICdhdXRoZW50aWNhdGlvblN0YXRlJyBpbiBjdXN0b21lciB8fCAnYWRkcmVzc2VzJyBpbiBjdXN0b21lciB8fCAnaW5zdHJ1bWVudHMnIGluIGN1c3RvbWVyXG4gICAgKTtcbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgRmVhdHVyZXMge1xuICAgIFtmZWF0dXJlTmFtZTogc3RyaW5nXTogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNFeHBlcmltZW50RW5hYmxlZChcbiAgICBmZWF0dXJlczogRmVhdHVyZXMsXG4gICAgZXhwZXJpbWVudE5hbWU6IHN0cmluZyxcbiAgICBmYWxsYmFja1ZhbHVlID0gdHJ1ZSxcbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmZWF0dXJlc1tleHBlcmltZW50TmFtZV0gPz8gZmFsbGJhY2tWYWx1ZTtcbn1cbiIsImltcG9ydCB7XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBnZXRGYXN0bGFuZVN0eWxlcyxcbiAgICBpc0JpZ2NvbW1lcmNlRmFzdGxhbmVSZXF1ZXN0RXJyb3IsXG4gICAgaXNQYXlQYWxGYXN0bGFuZUN1c3RvbWVyLFxuICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSxcbiAgICBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzLFxuICAgIFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE9wdGlvbnMsXG4gICAgUGF5UGFsRmFzdGxhbmVQYXltZW50Rm9ybWF0dGVkUGF5bG9hZCxcbiAgICBQYXlQYWxGYXN0bGFuZVNkayxcbiAgICBQYXlQYWxTZGtIZWxwZXIsXG4gICAgVERTZWN1cmVBdXRoZW50aWNhdGlvblN0YXRlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ2FyZEluc3RydW1lbnQsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBpc0V4cGVyaW1lbnRFbmFibGVkIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJlcXVlc3Qtc2VuZGVyJztcbmltcG9ydCB7IExpYWJpbGl0eVNoaWZ0RW51bSB9IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgcGF5cGFsQ29tcG9uZW50TWV0aG9kcz86IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE1ldGhvZHM7XG4gICAgcHJpdmF0ZSB0aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcGF5cGFsRmFzdGxhbmVTZGs/OiBQYXlQYWxGYXN0bGFuZVNkaztcbiAgICBwcml2YXRlIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lPzogQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lUGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuICAgIHByaXZhdGUgbWV0aG9kSWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlcjogQmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c1NkazogUGF5UGFsU2RrSGVscGVyLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzOiBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyxcbiAgICApIHt9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIERlZmF1bHQgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZSB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1ldGhvZElkID0gbWV0aG9kSWQ7XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZS5vbkluaXQgfHxcbiAgICAgICAgICAgIHR5cGVvZiBiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZS5vbkluaXQgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25Jbml0XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lLm9uQ2hhbmdlIHx8XG4gICAgICAgICAgICB0eXBlb2YgYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25DaGFuZ2UgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25DaGFuZ2VcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLCBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICB0aGlzLnRocmVlRFNWZXJpZmljYXRpb25NZXRob2QgPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LnRocmVlRFNWZXJpZmljYXRpb25NZXRob2Q7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxGYXN0bGFuZVNkayA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1Nkay5nZXRQYXlQYWxGYXN0bGFuZVNkayhcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICBjYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICBjYXJ0LmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lU3R5bGluZyA9IGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZFxuICAgICAgICAgICAgPyBwYXltZW50TWV0aG9kPy5pbml0aWFsaXphdGlvbkRhdGE/LmZhc3RsYW5lU3R5bGVzXG4gICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgIGNvbnN0IGZhc3RsYW5lU3R5bGVzID0gZ2V0RmFzdGxhbmVTdHlsZXMoXG4gICAgICAgICAgICBwYXlwYWxGYXN0bGFuZVN0eWxpbmcsXG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZT8uc3R5bGVzLFxuICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKFxuICAgICAgICAgICAgdGhpcy5wYXlwYWxGYXN0bGFuZVNkayxcbiAgICAgICAgICAgICEhaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgIGZhc3RsYW5lU3R5bGVzLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICh0aGlzLnNob3VsZFJ1bkF1dGhlbnRpY2F0aW9uRmxvdygpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplUGF5UGFsUGF5bWVudENvbXBvbmVudCgpO1xuXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lLm9uSW5pdCgoY29udGFpbmVyOiBzdHJpbmcpID0+XG4gICAgICAgICAgICB0aGlzLnJlbmRlclBheVBhbFBheW1lbnRDb21wb25lbnQoY29udGFpbmVyKSxcbiAgICAgICAgKTtcbiAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25DaGFuZ2UoKCkgPT5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUGF5UGFsU3RvcmVkSW5zdHJ1bWVudENoYW5nZShtZXRob2RJZCksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShvcmRlclJlcXVlc3Q6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gb3JkZXJSZXF1ZXN0O1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IHBheW1lbnREYXRhLCBtZXRob2RJZCB9ID0gcGF5bWVudDtcblxuICAgICAgICBjb25zdCBpc1ZhdWx0ZWRGbG93ID0gcGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gaXNWYXVsdGVkRmxvd1xuICAgICAgICAgICAgICAgID8gYXdhaXQgdGhpcy5wcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZChtZXRob2RJZCwgcGF5bWVudERhdGEpXG4gICAgICAgICAgICAgICAgOiBhd2FpdCB0aGlzLnByZXBhcmVQYXltZW50UGF5bG9hZChtZXRob2RJZCwgcGF5bWVudERhdGEpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudDxQYXlQYWxGYXN0bGFuZVBheW1lbnRGb3JtYXR0ZWRQYXlsb2FkPihcbiAgICAgICAgICAgICAgICBwYXltZW50UGF5bG9hZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMucmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGlzQmlnY29tbWVyY2VGYXN0bGFuZVJlcXVlc3RFcnJvcihlcnJvcikgJiZcbiAgICAgICAgICAgICAgICBlcnJvci5yZXNwb25zZS5uYW1lID09PSAnSU5WQUxJRF9SRVFVRVNUJ1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW52YWxpZFJlcXVlc3RFcnJvciA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25LZXk6ICdwYXltZW50LmVycm9ycy5pbnZhbGlkX3JlcXVlc3RfZXJyb3InLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGludmFsaWRSZXF1ZXN0RXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgIT09ICdGYXN0bGFuZUVycm9yJykge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEF1dGhlbnRpY2F0aW9uIGZsb3cgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBzaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3coKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBjdXN0b21lciA9IHN0YXRlLmdldEN1c3RvbWVyT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwYXltZW50UHJvdmlkZXJDdXN0b21lciA9IHN0YXRlLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCk7XG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lQ3VzdG9tZXIgPSBpc1BheVBhbEZhc3RsYW5lQ3VzdG9tZXIocGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIpXG4gICAgICAgICAgICA/IHBheW1lbnRQcm92aWRlckN1c3RvbWVyXG4gICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lU2Vzc2lvbklkID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5nZXRTdG9yYWdlU2Vzc2lvbklkKCk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWN1c3RvbWVyLmlzR3Vlc3QgfHxcbiAgICAgICAgICAgIHBheXBhbEZhc3RsYW5lQ3VzdG9tZXI/LmF1dGhlbnRpY2F0aW9uU3RhdGUgPT09XG4gICAgICAgICAgICAgICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLkNBTkNFTEVEXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICFwYXlwYWxGYXN0bGFuZUN1c3RvbWVyPy5hdXRoZW50aWNhdGlvblN0YXRlICYmIHBheXBhbEZhc3RsYW5lU2Vzc2lvbklkID09PSBjYXJ0LmlkO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhtZXRob2RJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgICAgICBjb25zdCBjdXN0b21lciA9IHN0YXRlLmdldEN1c3RvbWVyKCk7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzKCk7XG4gICAgICAgICAgICBjb25zdCBjdXN0b21lckVtYWlsID0gY3VzdG9tZXI/LmVtYWlsIHx8IGJpbGxpbmdBZGRyZXNzPy5lbWFpbCB8fCAnJztcblxuICAgICAgICAgICAgY29uc3QgeyBjdXN0b21lckNvbnRleHRJZCB9ID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLmxvb2t1cEN1c3RvbWVyT3JUaHJvdyhjdXN0b21lckVtYWlsKTtcblxuICAgICAgICAgICAgY29uc3QgYXV0aGVudGljYXRpb25SZXN1bHQgPVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMudHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyQ29udGV4dElkLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgYXV0aGVudGljYXRpb25TdGF0ZSwgYWRkcmVzc2VzLCBpbnN0cnVtZW50cyB9ID1cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLm1hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEoXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe1xuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgICAgICAgICAgICAgYWRkcmVzc2VzLFxuICAgICAgICAgICAgICAgIGluc3RydW1lbnRzLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQgPVxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0LmF1dGhlbnRpY2F0aW9uU3RhdGUgPT09XG4gICAgICAgICAgICAgICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLkNBTkNFTEVEO1xuXG4gICAgICAgICAgICBpZiAoaXNBdXRoZW50aWNhdGlvbkZsb3dDYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMucmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLnVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQoY2FydC5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBJbmZvOiBEbyBub3QgdGhyb3cgYW55dGhpbmcgaGVyZSB0byBhdm9pZCBibG9ja2luZyBjdXN0b21lciBmcm9tIHBhc3NpbmcgY2hlY2tvdXQgZmxvd1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCaWdDb21tZXJjZVBheW1lbnRzIEZhc3RsYW5lIENhcmQgQ29tcG9uZW50IHJlbmRlcmluZyBtZXRob2RcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVBheVBhbFBheW1lbnRDb21wb25lbnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHBob25lID0gYmlsbGluZ0FkZHJlc3MucGhvbmU7XG4gICAgICAgIGNvbnN0IGZ1bGxOYW1lID0gYCR7YmlsbGluZ0FkZHJlc3MuZmlyc3ROYW1lfSAke2JpbGxpbmdBZGRyZXNzLmxhc3ROYW1lfWAudHJpbSgpO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBjYXJkQ29tcG9uZW50T3B0aW9uczogUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIGNhcmRob2xkZXJOYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgIHByZWZpbGw6IGZ1bGxOYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4uKHBob25lICYmIHtcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpbGw6IHBob25lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBheXBhbENvbXBvbmVudE1ldGhvZHMgPSBhd2FpdCBwYXlwYWxGYXN0bGFuZS5GYXN0bGFuZUNhcmRDb21wb25lbnQoXG4gICAgICAgICAgICBjYXJkQ29tcG9uZW50T3B0aW9ucyxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclBheVBhbFBheW1lbnRDb21wb25lbnQoY29udGFpbmVyPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbENvbXBvbmVudE1ldGhvZHMgPSB0aGlzLmdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHJlbmRlciBjYXJkIGNvbXBvbmVudCBiZWNhdXNlIFwiY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcGF5cGFsQ29tcG9uZW50TWV0aG9kcy5yZW5kZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93KCk6IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE1ldGhvZHMge1xuICAgICAgICBpZiAoIXRoaXMucGF5cGFsQ29tcG9uZW50TWV0aG9kcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5wYXlwYWxDb21wb25lbnRNZXRob2RzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5bWVudCBQYXlsb2FkIHByZXBhcmF0aW9uIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgcHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICApOiBQcm9taXNlPFBheW1lbnQ8UGF5UGFsRmFzdGxhbmVQYXltZW50Rm9ybWF0dGVkUGF5bG9hZD4+IHtcbiAgICAgICAgY29uc3QgeyBpbnN0cnVtZW50SWQgfSA9IHBheW1lbnREYXRhO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBpczNEU0VuYWJsZWQgPVxuICAgICAgICAgICAgdGhpcy5pc0JpZ2NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVRocmVlRFNBdmFpbGFibGUoKSAmJlxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5jb25maWcuaXMzZHNFbmFibGVkO1xuXG4gICAgICAgIGlmICghaXMzRFNFbmFibGVkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU9yZGVyKGluc3RydW1lbnRJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmYXN0bGFuZVRva2VuID0gaXMzRFNFbmFibGVkID8gYXdhaXQgdGhpcy5nZXQzRFNOb25jZShpbnN0cnVtZW50SWQpIDogaW5zdHJ1bWVudElkO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxfZmFzdGxhbmVfdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiB0aGlzLm9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogZmFzdGxhbmVUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHByZXBhcmVQYXltZW50UGF5bG9hZChcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5bWVudERhdGE6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5WydwYXltZW50RGF0YSddLFxuICAgICk6IFByb21pc2U8UGF5bWVudDxQYXlQYWxGYXN0bGFuZVBheW1lbnRGb3JtYXR0ZWRQYXlsb2FkPj4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBmdWxsTmFtZSA9IGAke2JpbGxpbmdBZGRyZXNzLmZpcnN0TmFtZX0gJHtiaWxsaW5nQWRkcmVzcy5sYXN0TmFtZX1gLnRyaW0oKTtcblxuICAgICAgICBjb25zdCB7IGdldFBheW1lbnRUb2tlbiB9ID0gdGhpcy5nZXRQYXlQYWxDb21wb25lbnRNZXRob2RzT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHsgaWQgfSA9IGF3YWl0IGdldFBheW1lbnRUb2tlbih7XG4gICAgICAgICAgICBuYW1lOiB7IGZ1bGxOYW1lIH0sXG4gICAgICAgICAgICBiaWxsaW5nQWRkcmVzczpcbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLm1hcEJjVG9QYXlQYWxBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaXMzRFNFbmFibGVkID1cbiAgICAgICAgICAgIHRoaXMuaXNCaWdjb21tZXJjZVBheW1lbnRzRmFzdGxhbmVUaHJlZURTQXZhaWxhYmxlKCkgJiZcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuY29uZmlnLmlzM2RzRW5hYmxlZDtcblxuICAgICAgICBpZiAoIWlzM0RTRW5hYmxlZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVPcmRlcihpZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IHNob3VsZFNhdmVJbnN0cnVtZW50ID0gZmFsc2UsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPSBmYWxzZSB9ID1cbiAgICAgICAgICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UocGF5bWVudERhdGEpID8gcGF5bWVudERhdGEgOiB7fTtcblxuICAgICAgICBjb25zdCBmYXN0bGFuZVRva2VuID0gaXMzRFNFbmFibGVkID8gYXdhaXQgdGhpcy5nZXQzRFNOb25jZShpZCkgOiBpZDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIC4uLnBheW1lbnREYXRhLFxuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxfZmFzdGxhbmVfdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiB0aGlzLm9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogZmFzdGxhbmVUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZU9yZGVyKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydElkID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5pZDtcblxuICAgICAgICBpZiAodGhpcy5tZXRob2RJZCkge1xuICAgICAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgICAgIHRoaXMubWV0aG9kSWQsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXJ0SWQsXG4gICAgICAgICAgICAgICAgICAgIGZhc3RsYW5lVG9rZW46IGlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiAzRFNlY3VyZSBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ2V0M0RTTm9uY2UocGF5cGFsTm9uY2U6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBvcmRlciA9IHN0YXRlLmdldE9yZGVyT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBjaGVja291dFVybCA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmxpbmtzLmNoZWNrb3V0TGluaztcblxuICAgICAgICBjb25zdCB0aHJlZURvbWFpblNlY3VyZUNvbXBvbmVudCA9IHRoaXMucGF5cGFsRmFzdGxhbmVTZGs/LlRocmVlRG9tYWluU2VjdXJlQ2xpZW50O1xuXG4gICAgICAgIGlmICghdGhyZWVEb21haW5TZWN1cmVDb21wb25lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGhyZWVEb21haW5TZWN1cmVQYXJhbWV0ZXJzID0ge1xuICAgICAgICAgICAgYW1vdW50OiBvcmRlci5vcmRlckFtb3VudC50b0ZpeGVkKDIpLFxuICAgICAgICAgICAgY3VycmVuY3k6IGNhcnQuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgIG5vbmNlOiBwYXlwYWxOb25jZSxcbiAgICAgICAgICAgIHRocmVlRFNSZXF1ZXN0ZWQ6IHRoaXMudGhyZWVEU1ZlcmlmaWNhdGlvbk1ldGhvZCA9PT0gJ1NDQV9BTFdBWVMnLFxuICAgICAgICAgICAgdHJhbnNhY3Rpb25Db250ZXh0OiB7XG4gICAgICAgICAgICAgICAgZXhwZXJpZW5jZV9jb250ZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZTogJ2VuLVVTJyxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuX3VybDogY2hlY2tvdXRVcmwsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbF91cmw6IGNoZWNrb3V0VXJsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGlzVGhyZWVEb21haW5TZWN1cmVFbGlnaWJsZSA9IGF3YWl0IHRocmVlRG9tYWluU2VjdXJlQ29tcG9uZW50LmlzRWxpZ2libGUoXG4gICAgICAgICAgICB0aHJlZURvbWFpblNlY3VyZVBhcmFtZXRlcnMsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGlzVGhyZWVEb21haW5TZWN1cmVFbGlnaWJsZSkge1xuICAgICAgICAgICAgY29uc3QgeyBsaWFiaWxpdHlTaGlmdCwgYXV0aGVudGljYXRpb25TdGF0ZSwgbm9uY2UgfSA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhyZWVEb21haW5TZWN1cmVDb21wb25lbnQuc2hvdygpO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgbGlhYmlsaXR5U2hpZnQgPT09IExpYWJpbGl0eVNoaWZ0RW51bS5ObyB8fFxuICAgICAgICAgICAgICAgIGxpYWJpbGl0eVNoaWZ0ID09PSBMaWFiaWxpdHlTaGlmdEVudW0uVW5rbm93blxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVPcmRlcihwYXlwYWxOb25jZSk7XG5cbiAgICAgICAgICAgIGlmIChhdXRoZW50aWNhdGlvblN0YXRlID09PSBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUuU3VjY2VlZGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vbmNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDYW5jZWxsZWQgb3IgZXJyb3JlZCwgbWVyY2hhbnQgY2FuIGNob29zZSB0byBzZW5kIHRoZSBjdXN0b21lciBiYWNrIHRvIDNEIFNlY3VyZSBvciBzdWJtaXQgYSBwYXltZW50IGFuZCBvciB2YXVsdCB0aGUgcGF5bWVudCB0b2tlbi5cbiAgICAgICAgICAgIGlmIChhdXRoZW50aWNhdGlvblN0YXRlID09PSBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUuRXJyb3JlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhdXRoZW50aWNhdGlvblN0YXRlID09PSBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUuQ2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignM0RTIGNoZWNrIHdhcyBjYW5jZWxlZCcpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGF5cGFsTm9uY2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCaWdDb21tZXJjZVBheW1lbnRzIEZhc3RsYW5lIGluc3RydW1lbnQgY2hhbmdlXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVBheVBhbFN0b3JlZEluc3RydW1lbnRDaGFuZ2UoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxDYXJkSW5zdHJ1bWVudCB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBjb25zdCBwYXlwYWxBeG9TZGsgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLmdldFBheVBhbEZhc3RsYW5lT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHsgc2VsZWN0aW9uQ2hhbmdlZCwgc2VsZWN0ZWRDYXJkIH0gPSBhd2FpdCBwYXlwYWxBeG9TZGsucHJvZmlsZS5zaG93Q2FyZFNlbGVjdG9yKCk7XG5cbiAgICAgICAgaWYgKHNlbGVjdGlvbkNoYW5nZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50UHJvdmlkZXJDdXN0b21lciA9IHN0YXRlLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCk7XG4gICAgICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZUN1c3RvbWVyID0gaXNQYXlQYWxGYXN0bGFuZUN1c3RvbWVyKHBheW1lbnRQcm92aWRlckN1c3RvbWVyKVxuICAgICAgICAgICAgICAgID8gcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJcbiAgICAgICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEluc3RydW1lbnQgPVxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMubWFwUGF5UGFsVG9CY0luc3RydW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENhcmQsXG4gICAgICAgICAgICAgICAgKVswXTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHtcbiAgICAgICAgICAgICAgICAuLi5wYXlwYWxGYXN0bGFuZUN1c3RvbWVyLFxuICAgICAgICAgICAgICAgIGluc3RydW1lbnRzOiBbc2VsZWN0ZWRJbnN0cnVtZW50XSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRJbnN0cnVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJpZ2NvbW1lcmNlIFBheW1lbnRzIEZhc3RsYW5lIGV4cGVyaW1lbnRzIGhhbmRsaW5nXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzQmlnY29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVGhyZWVEU0F2YWlsYWJsZSgpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgZmVhdHVyZXMgPSBzdGF0ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzO1xuXG4gICAgICAgIHJldHVybiBpc0V4cGVyaW1lbnRFbmFibGVkKGZlYXR1cmVzLCAnUFJPSkVDVC03MDgwLmJjcF9mYXN0bGFuZV90aHJlZV9kcycpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pOiB2b2lkIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZT8ub25FcnJvciAmJlxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25FcnJvciA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIEJpZ2NvbW1lcmNlRmFzdGxhbmVSZXF1ZXN0RXJyb3Ige1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgcmVzcG9uc2U6IHtcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQmlnY29tbWVyY2VGYXN0bGFuZVJlcXVlc3RFcnJvcihcbiAgICBlcnJvcjogdW5rbm93bixcbik6IGVycm9yIGlzIEJpZ2NvbW1lcmNlRmFzdGxhbmVSZXF1ZXN0RXJyb3Ige1xuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgZXJyb3IgIT09IG51bGwgJiZcbiAgICAgICAgJ21lc3NhZ2UnIGluIGVycm9yICYmXG4gICAgICAgICdyZXNwb25zZScgaW4gZXJyb3IgJiZcbiAgICAgICAgJ25hbWUnIGluIChlcnJvciBhcyBCaWdjb21tZXJjZUZhc3RsYW5lUmVxdWVzdEVycm9yKS5yZXNwb25zZVxuICAgICk7XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVSZXF1ZXN0U2VuZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IHtcbiAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyxcbiAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIgZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVQYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT4ge1xuICAgIGNvbnN0IHsgZ2V0SG9zdCB9ID0gcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgcmV0dXJuIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlcihjcmVhdGVSZXF1ZXN0U2VuZGVyKHsgaG9zdDogZ2V0SG9zdCgpIH0pKSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkaygpLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscygpLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lUGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lJyB9LCAvLyBCaWdDb21tZXJjZVBheW1lbnRzIEZhc3RsYW5lIHJlbGF0ZXMgdG8gJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lJyBtZXRob2QgaWRcbl0pO1xuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSB0cnkgdG8gY2FsbCBhIG1ldGhvZCB0aGF0IGlzIG9ubHkgYSBzdHViIGFuZCBoYXMgbm90XG4gKiBiZWVuIGZ1bGx5IGltcGxlbWVudGVkLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RJbXBsZW1lbnRlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdOb3QgaW1wbGVtZW50ZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdEltcGxlbWVudGVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm90X2ltcGxlbWVudGVkJztcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyxcbiAgICBNZXNzYWdpbmdPcHRpb25zLFxuICAgIFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICBQYXlQYWxNZXNzYWdlc1NkayxcbiAgICBQYXlQYWxTZGtIZWxwZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBOb3RJbXBsZW1lbnRlZEVycm9yLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMsXG4gICAgQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG59IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj86IHN0cmluZztcbiAgICBwcml2YXRlIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucz86IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsU2RrSGVscGVyOiBQYXlQYWxTZGtIZWxwZXIsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmXG4gICAgICAgICAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlciB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IHBheXBhbEJOUExDb25maWd1cmF0aW9uID0gW10sIG9yZGVySWQgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGJhbm5lckNvbnRhaW5lcklkLCBjb250YWluZXIgfSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyO1xuXG4gICAgICAgIGlmIChiYW5uZXJDb250YWluZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJhbm5lckNvbnRhaW5lcklkKSkge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNyZWF0ZSBiYW5uZXIgd2l0aG91dCB2YWxpZCBiYW5uZXIgY29udGFpbmVyIElELicpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBiYW5uZXJDb25maWd1cmF0aW9uID1cbiAgICAgICAgICAgICAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiAmJlxuICAgICAgICAgICAgICAgIHBheXBhbEJOUExDb25maWd1cmF0aW9uLmZpbmQoKHsgaWQgfSkgPT4gaWQgPT09ICdjaGVja291dCcpO1xuXG4gICAgICAgICAgICBpZiAoIWJhbm5lckNvbmZpZ3VyYXRpb24/LnN0YXR1cykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXMgPSBhd2FpdCB0aGlzLnBheXBhbFNka0hlbHBlci5nZXRQYXlQYWxNZXNzYWdlcyhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlck1lc3NhZ2VzKHBheXBhbE1lc3NhZ2VzLCBiYW5uZXJDb250YWluZXJJZCwgYmFubmVyQ29uZmlndXJhdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmZvOlxuICAgICAgICAvLyBUaGUgQmlnQ29tbWVyY2VQYXltZW50cyBidXR0b24gYW5kIGZpZWxkcyBzaG91bGQgbm90IGJlIHJlbmRlcmVkIHdoZW4gc2hvcHBlciB3YXMgcmVkaXJlY3RlZCB0byBDaGVja291dCBwYWdlXG4gICAgICAgIC8vIGFmdGVyIHVzaW5nIHNtYXJ0IHBheW1lbnQgYnV0dG9uIG9uIFBEUCBvciBDYXJ0IHBhZ2UuIEluIHRoaXMgY2FzZSBiYWNrZW5kIHJldHVybnMgb3JkZXIgaWQgaWZcbiAgICAgICAgLy8gaXQgaXMgYXZhaWxhYmxlIGluIGNoZWNrb3V0IHNlc3Npb24uIFRoZXJlZm9yZSwgaXQgaXMgbm90IG5lY2Vzc2FyeSB0byByZW5kZXIgQmlnQ29tbWVyY2VQYXltZW50cyBidXR0b24uXG4gICAgICAgIGlmIChvcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklkO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gY29udGFpbmVyPy5zcGxpdCgnIycpWzFdO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcik7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoXG4gICAgICAgICAgICBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgdGhpcy5vcmRlcklkLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1dHRvbiBtZXRob2RzL2NhbGxiYWNrc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXI6IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcj8uY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcImNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJpZ0NvbW1lcmNlU2RrID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBwYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG5cbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uRXJyb3IsIG9uUmVuZGVyQnV0dG9uLCBvblZhbGlkYXRlLCBzdWJtaXRGb3JtIH0gPVxuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXI7XG5cbiAgICAgICAgY29uc3QgZnVuZGluZ1NvdXJjZXMgPSBbYmlnQ29tbWVyY2VTZGsuRlVORElORy5QQVlMQVRFUiwgYmlnQ29tbWVyY2VTZGsuRlVORElORy5DUkVESVRdO1xuICAgICAgICBsZXQgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IGZhbHNlO1xuXG4gICAgICAgIGZ1bmRpbmdTb3VyY2VzLmZvckVhY2goKGZ1bmRpbmdTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmIChoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBidXR0b25PcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgZnVuZGluZ1NvdXJjZSxcbiAgICAgICAgICAgICAgICBzdHlsZTogdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAnYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXInLFxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IChfLCBhY3Rpb25zKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGFjdGlvbnMsIG9uVmFsaWRhdGUpLFxuICAgICAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGEpID0+IHRoaXMuaGFuZGxlQXBwcm92ZShkYXRhLCBzdWJtaXRGb3JtKSxcbiAgICAgICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKSxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIG9uRXJyb3IpLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucyA9IGJpZ0NvbW1lcmNlU2RrLkJ1dHRvbnMoYnV0dG9uT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucy5pc0VsaWdpYmxlKCkgJiZcbiAgICAgICAgICAgICAgICBmdW5kaW5nU291cmNlID09PSBiaWdDb21tZXJjZVNkay5GVU5ESU5HLlBBWUxBVEVSXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucy5pc0VsaWdpYmxlKCkgJiZcbiAgICAgICAgICAgICAgICBmdW5kaW5nU291cmNlID09PSBiaWdDb21tZXJjZVNkay5GVU5ESU5HLkNSRURJVFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGBCaWdDb21tZXJjZVBheW1lbnRzICR7ZnVuZGluZ1NvdXJjZX0gaXMgbm90IGF2YWlsYWJsZSBmb3IgeW91ciByZWdpb24uIFBsZWFzZSB1c2UgQmlnQ29tbWVyY2VQYXltZW50cyBDaGVja291dCBpbnN0ZWFkLmAsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9uUmVuZGVyQnV0dG9uICYmIHR5cGVvZiBvblJlbmRlckJ1dHRvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uUmVuZGVyQnV0dG9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnMucmVuZGVyKGNvbnRhaW5lcik7XG4gICAgICAgICAgICBoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYWN0aW9uczogQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG9uVmFsaWRhdGU6IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25WYWxpZGF0ZSddLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHJlc29sdmUsIHJlamVjdCB9ID0gYWN0aW9ucztcblxuICAgICAgICBjb25zdCBvblZhbGlkYXRpb25QYXNzZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG9uVmFsaWRhdGUgJiYgdHlwZW9mIG9uVmFsaWRhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGF3YWl0IG9uVmFsaWRhdGUob25WYWxpZGF0aW9uUGFzc2VkLCByZWplY3QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVBcHByb3ZlKFxuICAgICAgICB7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgc3VibWl0Rm9ybTogQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydzdWJtaXRGb3JtJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySUQ7XG5cbiAgICAgICAgaWYgKHN1Ym1pdEZvcm0gJiYgdHlwZW9mIHN1Ym1pdEZvcm0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHN1Ym1pdEZvcm0oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoXG4gICAgICAgIGVycm9yOiBFcnJvcixcbiAgICAgICAgb25FcnJvcjogQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvbkVycm9yJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBMb2FkaW5nIEluZGljYXRvciBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgdG9nZ2xlTG9hZGluZ0luZGljYXRvcihpc0xvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGlzTG9hZGluZyAmJiB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZW5kZXIgUGF5IExhdGVyIE1lc3NhZ2VzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzOiBQYXlQYWxNZXNzYWdlc1NkayxcbiAgICAgICAgYmFubmVyQ29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgYmFubmVyQ29uZmlndXJhdGlvbjogUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBjaGVja291dCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENoZWNrb3V0T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbE1lc3NhZ2VzT3B0aW9uczogTWVzc2FnaW5nT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGFtb3VudDogY2hlY2tvdXQub3V0c3RhbmRpbmdCYWxhbmNlLFxuICAgICAgICAgICAgcGxhY2VtZW50OiAncGF5bWVudCcsXG4gICAgICAgICAgICBzdHlsZTogZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyhiYW5uZXJDb25maWd1cmF0aW9uKSxcbiAgICAgICAgfTtcblxuICAgICAgICBwYXlwYWxNZXNzYWdlcy5NZXNzYWdlcyhwYXlwYWxNZXNzYWdlc09wdGlvbnMpLnJlbmRlcihgIyR7YmFubmVyQ29udGFpbmVySWR9YCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkayB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCB7IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyB9IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWNvbnN0YW50cyc7XG5pbXBvcnQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIG5ldyBMb2FkaW5nSW5kaWNhdG9yKHtcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlczogTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTLFxuICAgICAgICB9KSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkaygpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAnYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXInIH0sXG5dKTtcbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgYSByZXF1ZXN0IGZhaWxzIHRvIGNvbXBsZXRlIHdpdGhpbiBpdHMgcmVxdWlyZWQgdGltZWZyYW1lXG4gKiBiZWNhdXNlIG9mIGEgbmV0d29yayBpc3N1ZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZW91dEVycm9yPFQgPSBhbnk+IGV4dGVuZHMgUmVxdWVzdEVycm9yPFQ+IHtcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZT86IFJlc3BvbnNlPFQ+KSB7XG4gICAgICAgIHN1cGVyKHJlc3BvbnNlLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiAnVGhlIHJlcXVlc3QgaGFzIHRpbWVkIG91dCBvciBhYm9ydGVkLicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdUaW1lb3V0RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAndGltZW91dCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgVGltZW91dEVycm9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgQmlydGhEYXRlLFxuICAgIFBheVBhbE9yZGVyU3RhdHVzLFxufSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCB7XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c1JhdGVQYXlQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNSYXRlUGF5UGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJhdGVwYXktaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuY29uc3QgUE9MTElOR19JTlRFUlZBTCA9IDMwMDA7XG5jb25zdCBNQVhfUE9MTElOR19USU1FID0gMzAwMDAwO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzUmF0ZVBheVBheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBndWlkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheT86IEJpZ0NvbW1lcmNlUGF5bWVudHNSYXRlUGF5UGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj86IHN0cmluZztcbiAgICBwcml2YXRlIHBvbGxpbmdUaW1lciA9IDA7XG4gICAgcHJpdmF0ZSBzdG9wUG9sbGluZyA9IG5vb3A7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICAgICAgcHJpdmF0ZSBwb2xsaW5nSW50ZXJ2YWw6IG51bWJlciA9IFBPTExJTkdfSU5URVJWQUwsXG4gICAgICAgIHByaXZhdGUgbWF4UG9sbGluZ0ludGVydmFsVGltZTogbnVtYmVyID0gTUFYX1BPTExJTkdfVElNRSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1JhdGVQYXlQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgZ2F0ZXdheUlkLCBtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheSB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWdhdGV3YXlJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmdhdGV3YXlJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXlcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGxlZ2FsVGV4dENvbnRhaW5lciwgY29udGFpbmVyLCBsb2FkaW5nQ29udGFpbmVySWQgfSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXk7XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWxlZ2FsVGV4dENvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmxlZ2FsVGV4dENvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbG9hZGluZ0NvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubG9hZGluZ0NvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gbG9hZGluZ0NvbnRhaW5lcklkO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB7IG1lcmNoYW50SWQgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgIGlmICghbWVyY2hhbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgbWVyY2hhbnRJZCBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXkgPSBiaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5O1xuXG4gICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZUZyYXVkTmV0U2NyaXB0KG1lcmNoYW50SWQsIG1ldGhvZElkLCBnYXRld2F5SWQpO1xuXG4gICAgICAgIHRoaXMubG9hZEZyYXVkbmV0Q29uZmlnKCk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJMZWdhbFRleHQobGVnYWxUZXh0Q29udGFpbmVyLCBjb250YWluZXIpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGNvbnN0IHsgZ2V0RmllbGRzVmFsdWVzIH0gPSB0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXkgfHwge307XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZ2V0RmllbGRzVmFsdWVzIHx8IHR5cGVvZiBnZXRGaWVsZHNWYWx1ZXMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5nZXRGaWVsZHNWYWx1ZXNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG9yZGVySWQgPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXNjaGVja291dCcsXG4gICAgICAgICAgICAgICAgeyBtZXRhZGF0YUlkOiB0aGlzLmd1aWQgfSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgcmF0ZXBheUJpcnRoRGF0ZSwgcmF0ZXBheVBob25lTnVtYmVyLCByYXRlcGF5UGhvbmVDb3VudHJ5Q29kZSB9ID1cbiAgICAgICAgICAgICAgICBnZXRGaWVsZHNWYWx1ZXMoKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5bWVudERhdGEgPSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICB2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBkZXZpY2VfaW5mbzogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kX2lkOiBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICByYXRlX3BheToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmlydGhfZGF0ZTogdGhpcy5ub3JtYWxpemVEYXRlKHJhdGVwYXlCaXJ0aERhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXRpb25hbF9udW1iZXI6IHJhdGVwYXlQaG9uZU51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudHJ5X2NvZGU6IHJhdGVwYXlQaG9uZUNvdW50cnlDb2RlLnNwbGl0KCcrJylbMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXlwYWxfYWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IG9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kSWQ6IHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgcGF5bWVudERhdGEsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKFxuICAgICAgICAgICAgICAgICAgICBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlLFxuICAgICAgICAgICAgICAgICAgICByZWplY3QsXG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnQuZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKF9yZXNvbHZlLCByZWplY3QpID0+IHJlamVjdCgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbGVnYWxUZXh0Q29udGFpbmVyIH0gPSB0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXkgfHwge307XG4gICAgICAgIGNvbnN0IGZyYXVkTmV0U2NyaXB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaWQ9XCJmcmF1ZG5ldFNjcmlwdFwiXScpWzBdO1xuICAgICAgICBjb25zdCBmcmF1ZE5ldENvbmZpZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWlkPVwiZnJhdWRuZXRDb25maWdcIl0nKVswXTtcblxuICAgICAgICB0aGlzLmRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcblxuICAgICAgICBmcmF1ZE5ldFNjcmlwdC5yZW1vdmUoKTtcbiAgICAgICAgZnJhdWROZXRDb25maWcucmVtb3ZlKCk7XG5cbiAgICAgICAgaWYgKGxlZ2FsVGV4dENvbnRhaW5lcikge1xuICAgICAgICAgICAgY29uc3QgbGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxlZ2FsVGV4dENvbnRhaW5lcik7XG5cbiAgICAgICAgICAgIGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQ/LnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbm9ybWFsaXplRGF0ZShkYXRlOiBCaXJ0aERhdGUpIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IHRoaXMuZm9ybWF0RGF0ZShkYXRlLmdldERhdGUoKSk7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZE1vbnRoID0gdGhpcy5mb3JtYXREYXRlKGRhdGUuZ2V0TW9udGgoKSArIDEpO1xuXG4gICAgICAgIHJldHVybiBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9LSR7Zm9ybWF0dGVkTW9udGh9LSR7Zm9ybWF0dGVkRGF0ZX1gO1xuICAgIH1cblxuICAgIHByaXZhdGUgZm9ybWF0RGF0ZShkYXRlOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYCR7ZGF0ZSA8IDEwID8gMCA6ICcnfSR7ZGF0ZX1gO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyTGVnYWxUZXh0KGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnRJZDogc3RyaW5nLCBjb250YWluZXI6IHN0cmluZykge1xuICAgICAgICBjb25zdCBsZWdhbFRleHRDb250YWluZXJJZCA9IGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnRJZDtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVySWQgPSBjb250YWluZXIuc3BsaXQoJyMnKVsxXTtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0dG9uQ29udGFpbmVySWQpO1xuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXJQYXJlbnQgPSBidXR0b25Db250YWluZXI/LnBhcmVudE5vZGU7XG4gICAgICAgIGNvbnN0IGxlZ2FsVGV4dENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGxlZ2FsVGV4dENvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjBweCc7XG4gICAgICAgIGxlZ2FsVGV4dENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2lkJywgbGVnYWxUZXh0Q29udGFpbmVySWQpO1xuICAgICAgICBidXR0b25Db250YWluZXJQYXJlbnQ/LnByZXBlbmQobGVnYWxUZXh0Q29udGFpbmVyKTtcblxuICAgICAgICBjb25zdCBiaWdDb21tZXJjZVBheW1lbnRzU2RrID1cbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHJhdGVQYXlCdXR0b24gPSBiaWdDb21tZXJjZVBheW1lbnRzU2RrLkxlZ2FsKHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IGJpZ0NvbW1lcmNlUGF5bWVudHNTZGsuTGVnYWwuRlVORElORy5QQVlfVVBPTl9JTlZPSUNFLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxlZ2FsVGV4dENvbnRhaW5lcklkKTtcblxuICAgICAgICBpZiAobGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudCkge1xuICAgICAgICAgICAgcmF0ZVBheUJ1dHRvbi5yZW5kZXIoYCMke2xlZ2FsVGV4dENvbnRhaW5lcklkfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJsZWdhbFRleHRDb250YWluZXJFbGVtZW50XCIgYXJndW1lbnQgaXMgbm90IGZvdW5kLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bik6IHZvaWQge1xuICAgICAgICBjb25zdCB7IG9uRXJyb3IgfSA9IHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheSB8fCB7fTtcblxuICAgICAgICB0aGlzLnJlc2V0UG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlRnJhdWROZXRTY3JpcHQobWVyY2hhbnRJZDogc3RyaW5nLCBtZXRob2RJZDogc3RyaW5nLCBnYXRld2F5SWQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQsIGdhdGV3YXlJZCk7XG4gICAgICAgIGNvbnN0IHsgdGVzdE1vZGUgfSA9IHBheW1lbnRNZXRob2QuY29uZmlnO1xuICAgICAgICBjb25zdCBzY3JpcHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cbiAgICAgICAgc2NyaXB0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgICBzY3JpcHRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZm5jbHMnLCAnZm5wYXJhbXMtZGVkZTdjYzUtMTVmZC00Yzc1LWE5ZjQtMzZjNDMwZWUzYTk5Jyk7XG4gICAgICAgIHNjcmlwdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgJ2ZyYXVkbmV0U2NyaXB0Jyk7XG4gICAgICAgIHRoaXMuZ3VpZCA9IHRoaXMuZ2VuZXJhdGVHVUlEKCk7XG5cbiAgICAgICAgY29uc3QgZnJhdWROZXRDb25maWcgPSB7XG4gICAgICAgICAgICBmOiB0aGlzLmd1aWQsXG4gICAgICAgICAgICBzOiBgJHttZXJjaGFudElkfV9jaGVja291dC1wYWdlYCxcbiAgICAgICAgICAgIHNhbmRib3g6IHRlc3RNb2RlLFxuICAgICAgICB9O1xuXG4gICAgICAgIHNjcmlwdEVsZW1lbnQuaW5uZXJIVE1MID0gSlNPTi5zdHJpbmdpZnkoZnJhdWROZXRDb25maWcpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2VuZXJhdGVHVUlEKCkge1xuICAgICAgICBsZXQgZ3VpZCA9ICcnO1xuICAgICAgICBjb25zdCBjaGFyYWN0ZXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JztcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMyOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVycy5sZW5ndGgpO1xuXG4gICAgICAgICAgICBndWlkICs9IGNoYXJhY3RlcnNbcmFuZG9tSW5kZXhdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGd1aWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsb2FkRnJhdWRuZXRDb25maWcoKSB7XG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG4gICAgICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCAnZnJhdWRuZXRDb25maWcnKTtcbiAgICAgICAgc2NyaXB0LnNyYyA9ICdodHRwczovL2MucGF5cGFsLmNvbS9kYS9yL2ZiLmpzJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcmVpbml0aWFsaXplU3RyYXRlZ3koXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzUmF0ZVBheVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kZWluaXRpYWxpemUoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUG9sbGluZyBtZWNoYW5pc21cbiAgICAgKlxuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICByZXNvbHZlUHJvbWlzZTogKCkgPT4gdm9pZCxcbiAgICAgICAgcmVqZWN0UHJvbWlzZTogKCkgPT4gdm9pZCxcbiAgICAgICAgZ2F0ZXdheUlkPzogc3RyaW5nLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChyZXNvbHZlLCB0aGlzLnBvbGxpbmdJbnRlcnZhbCk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RvcFBvbGxpbmcgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5wb2xsaW5nVGltZXIgKz0gdGhpcy5wb2xsaW5nSW50ZXJ2YWw7XG5cbiAgICAgICAgICAgIGNvbnN0IG9yZGVyU3RhdHVzID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldE9yZGVyU3RhdHVzKFxuICAgICAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c19hcG1zJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlTWV0YWRhdGE6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzT3JkZXJBcHByb3ZlZCA9IG9yZGVyU3RhdHVzID09PSBQYXlQYWxPcmRlclN0YXR1cy5Qb2xsaW5nU3RvcDtcbiAgICAgICAgICAgIGNvbnN0IGlzUG9sbGluZ0Vycm9yID0gb3JkZXJTdGF0dXMgPT09IFBheVBhbE9yZGVyU3RhdHVzLlBvbGxpbmdFcnJvcjtcblxuICAgICAgICAgICAgaWYgKGlzT3JkZXJBcHByb3ZlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc1BvbGxpbmdFcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3RQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaXNPcmRlckFwcHJvdmVkICYmIHRoaXMucG9sbGluZ1RpbWVyIDwgdGhpcy5tYXhQb2xsaW5nSW50ZXJ2YWxUaW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0UHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVpbml0aWFsaXplU3RyYXRlZ3koe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5OiB0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgVGltZW91dEVycm9yKCkpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgICAgICByZWplY3RQcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcbiAgICAgICAgdGhpcy5wb2xsaW5nVGltZXIgPSAwO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzZXRQb2xsaW5nTWVjaGFuaXNtKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IHsgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTIH0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtY29uc3RhbnRzJztcbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNSYXRlUGF5UGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtcmF0ZXBheS1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1JhdGVQYXlQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c1JhdGVQYXlQYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c1JhdGVQYXlQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIG5ldyBMb2FkaW5nSW5kaWNhdG9yKHtcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlczogeyAuLi5MT0FESU5HX0lORElDQVRPUl9TVFlMRVMsIHBvc2l0aW9uOiAnZml4ZWQnIH0sXG4gICAgICAgIH0pLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzUmF0ZVBheVBheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgZ2F0ZXdheTogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMnLCBpZDogJ3JhdGVwYXknIH0sXG5dKTtcbiIsIi8vIGNvcGllZCBmcm9tIHBhY2thZ2VzL2NvcmUvc3JjL2hvc3RlZC1mb3JtL2hvc3RlZC1maWVsZC10eXBlLnRzXG5cbmVudW0gSG9zdGVkRmllbGRUeXBlIHtcbiAgICBDYXJkQ29kZSA9ICdjYXJkQ29kZScsXG4gICAgQ2FyZENvZGVWZXJpZmljYXRpb24gPSAnY2FyZENvZGVWZXJpZmljYXRpb24nLFxuICAgIENhcmRFeHBpcnkgPSAnY2FyZEV4cGlyeScsXG4gICAgQ2FyZE5hbWUgPSAnY2FyZE5hbWUnLFxuICAgIENhcmROdW1iZXIgPSAnY2FyZE51bWJlcicsXG4gICAgQ2FyZE51bWJlclZlcmlmaWNhdGlvbiA9ICdjYXJkTnVtYmVyVmVyaWZpY2F0aW9uJyxcbiAgICBDYXJkRXhwaXJ5VmVyaWZpY2F0aW9uID0gJ2NhcmRFeHBpcnlWZXJpZmljYXRpb24nLFxufVxuXG5leHBvcnQgZGVmYXVsdCBIb3N0ZWRGaWVsZFR5cGU7XG4iLCJpbXBvcnQgSG9zdGVkRmllbGRUeXBlIGZyb20gJy4vaG9zdGVkLWZpZWxkLXR5cGUnO1xuaW1wb3J0IHsgSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCB9IGZyb20gJy4vaG9zdGVkLWZvcm0tb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQ3JlZGl0Q2FyZEZvcm1GaWVsZHMoXG4gICAgZmllbGRzOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbik6IGZpZWxkcyBpcyBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlciBpbiBmaWVsZHMgJiZcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmROYW1lIGluIGZpZWxkcyAmJlxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeSBpbiBmaWVsZHNcbiAgICApO1xufVxuIiwiaW1wb3J0IEhvc3RlZEZpZWxkVHlwZSBmcm9tICcuL2hvc3RlZC1maWVsZC10eXBlJztcbmltcG9ydCB7IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAsIEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAgfSBmcm9tICcuL2hvc3RlZC1mb3JtLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyhcbiAgICBmaWVsZHM6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAgfCBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwLFxuKTogZmllbGRzIGlzIEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAge1xuICAgIHJldHVybiAoXG4gICAgICAgIEhvc3RlZEZpZWxkVHlwZS5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uIGluIGZpZWxkcyAmJlxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGVWZXJpZmljYXRpb24gaW4gZmllbGRzICYmXG4gICAgICAgIEhvc3RlZEZpZWxkVHlwZS5DYXJkRXhwaXJ5VmVyaWZpY2F0aW9uIGluIGZpZWxkc1xuICAgICk7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIHBheW1lbnQgbWV0aG9kIGV4cGVyaWVuY2VzIHNvbWUga2luZCBvZlxuICogZmFpbHVyZSAoaS5lLjogaXRzIGNsaWVudCBsaWJyYXJ5IHJldHVybnMgYSByZWplY3RlZCBwcm9taXNlKS4gQW5kIHRoZXJlIGlzXG4gKiBubyBvdGhlciBlcnJvciB0eXBlIHRoYXQgaXMgbW9yZSBzcGVjaWZpYyB0aGFuIHRoaXMgb25lLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGhhcyB0aHJvd24gYW4gdW5leHBlY3RlZCBlcnJvci4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kRmFpbGVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X2ludmFsaWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBOb3RJbml0aWFsaXplZEVycm9yVHlwZSB7XG4gICAgQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZCxcbiAgICBDdXN0b21lck5vdEluaXRpYWxpemVkLFxuICAgIFBheW1lbnROb3RJbml0aWFsaXplZCxcbiAgICBTaGlwcGluZ05vdEluaXRpYWxpemVkLFxuICAgIFNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIG1ldGhvZCByZXF1aXJlcyBhIGNlcnRhaW4gaW5pdGlhbGl6YXRpb24gY2FsbCB0byBiZVxuICogbWFkZSBmaXJzdC4gU29tZSBvYmplY3RzIGNhbiBiZSBjb25zdHJ1Y3RlZCBidXQgdGhleSBjYW5ub3QgYmUgdXNlZCB1bnRpbCBhXG4gKiBzZXBhcmF0ZSBpbml0aWFsaXphdGlvbiBjYWxsIGlzIG1hZGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdEluaXRpYWxpemVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTm90SW5pdGlhbGl6ZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdub3RfaW5pdGlhbGl6ZWQnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5DdXN0b21lck5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjdXN0b21lciBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TaGlwcGluZ05vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBzaGlwcGluZyBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2hlY2tvdXQgc3BhbSBwcm90ZWN0aW9uIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGludGVyZmFjZSBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMge1xuICAgIFtrZXk6IHN0cmluZ106IEFycmF5PHsgbWVzc2FnZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIGRldGFpbHM6IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscywgbWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IGZvcm0gY29udGFpbnMgaW52YWxpZCBkYXRhLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50SW52YWxpZEZvcm1FcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X2ludmFsaWRfZm9ybSc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgaXNOaWwsIG9taXRCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBpc0JpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVyLFxuICAgIFBheVBhbFNka0hlbHBlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIEhvc3RlZENhcmRGaWVsZE9wdGlvbnMsXG4gICAgSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbiAgICBIb3N0ZWRGaWVsZEJsdXJFdmVudERhdGEsXG4gICAgSG9zdGVkRmllbGRFbnRlckV2ZW50RGF0YSxcbiAgICBIb3N0ZWRGaWVsZEZvY3VzRXZlbnREYXRhLFxuICAgIEhvc3RlZEZpZWxkU3R5bGVzTWFwLFxuICAgIEhvc3RlZEZpZWxkVHlwZSxcbiAgICBIb3N0ZWRGaWVsZFZhbGlkYXRlRXZlbnREYXRhLFxuICAgIEhvc3RlZEZvcm1PcHRpb25zLFxuICAgIEhvc3RlZElucHV0VmFsaWRhdGVFcnJvckRhdGEsXG4gICAgSG9zdGVkSW5wdXRWYWxpZGF0ZUVycm9yRGF0YU1hcCxcbiAgICBIb3N0ZWRJbnN0cnVtZW50LFxuICAgIEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNDcmVkaXRDYXJkRm9ybUZpZWxkcyxcbiAgICBpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyxcbiAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlLFxuICAgIGlzVmF1bHRlZEluc3RydW1lbnQsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50SW52YWxpZEZvcm1FcnJvcixcbiAgICBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMsXG4gICAgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNDb25maWcsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNPbkFwcHJvdmVEYXRhLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGUsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkcyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzUmVuZGVyT3B0aW9ucyxcbiAgICBMaWFiaWxpdHlTaGlmdEVudW0sXG59IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNDcmVkaXRDYXJkc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzQ3JlZGl0Q2FyZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtY3JlZGl0LWNhcmRzLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c0NyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGV4ZWN1dGlvblBheW1lbnREYXRhPzogT3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ107XG4gICAgcHJpdmF0ZSBpc0NyZWRpdENhcmRGb3JtPzogYm9vbGVhbjtcbiAgICBwcml2YXRlIGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtPzogYm9vbGVhbjtcblxuICAgIHByaXZhdGUgY2FyZEZpZWxkcz86IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzO1xuICAgIHByaXZhdGUgY3Z2RmllbGQ/OiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzO1xuICAgIHByaXZhdGUgZXhwaXJ5RmllbGQ/OiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzO1xuICAgIHByaXZhdGUgbnVtYmVyRmllbGQ/OiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzO1xuICAgIHByaXZhdGUgbmFtZUZpZWxkPzogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkcztcblxuICAgIHByaXZhdGUgaG9zdGVkRm9ybU9wdGlvbnM/OiBIb3N0ZWRGb3JtT3B0aW9ucztcbiAgICBwcml2YXRlIHJldHVybmVkT3JkZXJJZD86IHN0cmluZztcbiAgICBwcml2YXRlIHJldHVybmVkVmF1bHRlZFRva2VuPzogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNTZGs6IFBheVBhbFNka0hlbHBlcixcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlsczogQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzQ3JlZGl0Q2FyZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBiaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25PcHRpb25zID0gYmlnY29tbWVyY2VfcGF5bWVudHNfY3JlZGl0Y2FyZHM7XG5cbiAgICAgICAgY29uc3QgeyBmb3JtLCBvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvciwgb25Mb2FkQ29tcGxldGUgfSA9XG4gICAgICAgICAgICBiaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25PcHRpb25zIHx8IHt9O1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZm9ybSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkcy5mb3JtXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ob3N0ZWRGb3JtT3B0aW9ucyA9IGZvcm07XG5cbiAgICAgICAgdGhpcy5pc0NyZWRpdENhcmRGb3JtID0gaXNDcmVkaXRDYXJkRm9ybUZpZWxkcyhmb3JtLmZpZWxkcyk7XG4gICAgICAgIHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0gPVxuICAgICAgICAgICAgaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm1GaWVsZHMoZm9ybS5maWVsZHMpICYmICF0aGlzLmhhc1VuZGVmaW5lZFZhbHVlcygpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgKTtcblxuICAgICAgICBvbkxvYWRDb21wbGV0ZT8uKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNDcmVkaXRDYXJkRm9ybSB8fCB0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVGaWVsZHMoZm9ybSwgb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkSW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKG1ldGhvZElkKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplUGF5UGFsRmFzdGxhbmVPclRocm93KG1ldGhvZElkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXltZW50RGF0YSB9ID0gcGF5bWVudCB8fCB7fTtcblxuICAgICAgICBpZiAoIXBheW1lbnQgfHwgIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGEgPSBwYXltZW50RGF0YTtcblxuICAgICAgICBpZiAodGhpcy5pc0NyZWRpdENhcmRGb3JtIHx8IHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0pIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudmFsaWRhdGVIb3N0ZWRGb3JtT3JUaHJvdygpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zdWJtaXRIb3N0ZWRGb3JtKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUaGUgY29uZGl0aW9uIGdldHMgdHJpZ2dlcmVkIHdoZW4gY3VzdG9tZXIgcGF5cyB3aXRoIHZhdWx0ZWQgaW5zdHJ1bWVudCBhbmQgc2hpcHBpbmcgYWRkcmVzcyBpcyB0cnVzdGVkXG4gICAgICAgICAgICBjb25zdCB7IG9yZGVySWQgfSA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyhcbiAgICAgICAgICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEluc3RydW1lbnRQYXJhbXMoKSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLnJldHVybmVkT3JkZXJJZCA9IG9yZGVySWQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdWJtaXRQYXltZW50UGF5bG9hZCA9IHRoaXMucHJlcGFyZVBheW1lbnRQYXlsb2FkKFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YSxcbiAgICAgICAgICAgIHRoaXMucmV0dXJuZWRPcmRlcklkLFxuICAgICAgICAgICAgdGhpcy5yZXR1cm5lZFZhdWx0ZWRUb2tlbixcbiAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChzdWJtaXRQYXltZW50UGF5bG9hZCk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5jdnZGaWVsZD8uY2xvc2UoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5leHBpcnlGaWVsZD8uY2xvc2UoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5udW1iZXJGaWVsZD8uY2xvc2UoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5uYW1lRmllbGQ/LmNsb3NlKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogU3VibWl0IFBheW1lbnQgUGF5bG9hZCBwcmVwYXJpbmcgbWV0aG9kXG4gICAgICpcbiAgICAgKiBgdmF1bHRlZFRva2VuYCBpcyB1c2VkIHdoZW4gd2UgcGF5IHdpdGggdmF1bHRlZCBpbnN0cnVtZW50ICh3aXRoIHRydXN0ZWQgc2hpcHBpbmcgYWRkcmVzcyBhbmQgdW50cnVzdGVkKVxuICAgICAqIGBzZXR1cFRva2VuYCBpcyB1c2VkIHdoZW4gd2UgcGF5IHdpdGggdmF1bHRlZCBpbnN0cnVtZW50ICh1bnRydXN0ZWQgc2hpcHBpbmcgYWRkcmVzcylcbiAgICAgKiBgb3JkZXJJZGAgaXMgdXNlZCBpbiBldmVyeSBjYXNlIChiYXNpYyBjYXJkIHBheW1lbnQsIHRydXN0ZWQgc2hpcHBpbmcgYWRkcmVzcyBhbmQgdW50cnVzdGVkKVxuICAgICAqL1xuICAgIHByaXZhdGUgcHJlcGFyZVBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXltZW50RGF0YTogT3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ10sXG4gICAgICAgIG9yZGVySWQ/OiBzdHJpbmcsXG4gICAgICAgIG5vbmNlPzogc3RyaW5nLFxuICAgICk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCB7IHNob3VsZFNhdmVJbnN0cnVtZW50ID0gZmFsc2UsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPSBmYWxzZSB9ID1cbiAgICAgICAgICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UocGF5bWVudERhdGEpID8gcGF5bWVudERhdGEgOiB7fTtcblxuICAgICAgICBjb25zdCBpbnN0cnVtZW50SWQgPVxuICAgICAgICAgICAgcGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkgPyBwYXltZW50RGF0YS5pbnN0cnVtZW50SWQgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgY29uc3QgYmlncGF5X3Rva2VuID0gb21pdEJ5KFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9ub25jZTogbm9uY2UsXG4gICAgICAgICAgICAgICAgdG9rZW46IGluc3RydW1lbnRJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc05pbCxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKG5vbmNlIHx8IGluc3RydW1lbnRJZCA/IHsgYmlncGF5X3Rva2VuIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgICAgIC4uLihvcmRlcklkID8geyBjYXJkX3dpdGhfb3JkZXI6IHsgb3JkZXJfaWQ6IG9yZGVySWQgfSB9IDoge30pLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQ2FyZCBmaWVsZHMgaW5pdGlhbGl6ZVxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplRmllbGRzKFxuICAgICAgICBmb3JtT3B0aW9uczogSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgICAgIG9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yPzogQmlnQ29tbWVyY2VQYXltZW50c0NyZWRpdENhcmRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvciddLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGZpZWxkcywgc3R5bGVzIH0gPSBmb3JtT3B0aW9ucztcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBleGVjdXRlQ2FsbGJhY2sgPSB0aGlzLmdldEV4ZWN1dGVDYWxsYmFjayhmaWVsZHMpO1xuXG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNDb25maWc6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzQ29uZmlnID0ge1xuICAgICAgICAgICAgc3R5bGU6IHRoaXMuZ2V0SW5wdXRTdHlsZXMoc3R5bGVzKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHtcbiAgICAgICAgICAgICAgICBvcmRlcklELFxuICAgICAgICAgICAgICAgIHZhdWx0U2V0dXBUb2tlbixcbiAgICAgICAgICAgICAgICBsaWFiaWxpdHlTaGlmdCxcbiAgICAgICAgICAgIH06IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzT25BcHByb3ZlRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgbGlhYmlsaXR5U2hpZnQgPT09IExpYWJpbGl0eVNoaWZ0RW51bS5ObyB8fFxuICAgICAgICAgICAgICAgICAgICBsaWFiaWxpdHlTaGlmdCA9PT0gTGlhYmlsaXR5U2hpZnRFbnVtLlVua25vd25cbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQXBwcm92ZSh7IG9yZGVySUQsIHZhdWx0U2V0dXBUb2tlbiB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkVycm9yOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlucHV0RXZlbnRzOiB7XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6IChldmVudCkgPT4gdGhpcy5vbkNoYW5nZUhhbmRsZXIoZm9ybU9wdGlvbnMsIGV2ZW50KSxcbiAgICAgICAgICAgICAgICBvbkZvY3VzOiAoZXZlbnQpID0+IHRoaXMub25Gb2N1c0hhbmRsZXIoZm9ybU9wdGlvbnMsIGV2ZW50KSxcbiAgICAgICAgICAgICAgICBvbkJsdXI6IChldmVudCkgPT4gdGhpcy5vbkJsdXJIYW5kbGVyKGZvcm1PcHRpb25zLCBldmVudCksXG4gICAgICAgICAgICAgICAgb25JbnB1dFN1Ym1pdFJlcXVlc3Q6IChldmVudCkgPT4gdGhpcy5vbklucHV0U3VibWl0UmVxdWVzdChmb3JtT3B0aW9ucywgZXZlbnQpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC4uLmV4ZWN1dGVDYWxsYmFjayxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNhcmRGaWVsZHMgPSBhd2FpdCBwYXlwYWxTZGsuQ2FyZEZpZWxkcyhjYXJkRmllbGRzQ29uZmlnKTtcblxuICAgICAgICBpZiAoIXRoaXMuY2FyZEZpZWxkcy5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5zdHlsaXplSW5wdXRDb250YWluZXJzKGZpZWxkcyk7XG5cbiAgICAgICAgICAgIGlmIChpc0NyZWRpdENhcmRGb3JtRmllbGRzKGZpZWxkcykpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckZpZWxkcyhmaWVsZHMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm1GaWVsZHMoZmllbGRzKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyVmF1bHRlZEZpZWxkcyhmaWVsZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogR2V0IGV4ZWN1dGUgY2FsbGJhY2sgbWV0aG9kXG4gICAgICogRGVwZW5kcyBvbiBzaGlwcGluZyBhZGRyZXNzIGlzIHRydXN0ZWQgb3Igbm90IHdlIHNob3VsZCBwYXNzIHRvIFBQXG4gICAgICogYGNyZWF0ZVZhdWx0U2V0dXBUb2tlbmAgY2FsbGJhY2sgaWYgYWRkcmVzcyBpcyB1bnRydXN0ZWQgb3JcbiAgICAgKiBgY3JlYXRlT3JkZXJgIGlmIGFkZHJlc3MgaXMgdHJ1c3RlZFxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRFeGVjdXRlQ2FsbGJhY2soXG4gICAgICAgIGZpZWxkczogSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCB8IEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGlzVmF1bHRlZEZvcm0gPSBpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyhmaWVsZHMpO1xuXG4gICAgICAgIHJldHVybiBpc1ZhdWx0ZWRGb3JtID8gdGhpcy5jcmVhdGVWYXVsdFNldHVwVG9rZW5DYWxsYmFjaygpIDogdGhpcy5jcmVhdGVPcmRlckNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVWYXVsdFNldHVwVG9rZW5DYWxsYmFjaygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNyZWF0ZVZhdWx0U2V0dXBUb2tlbjogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgc2V0dXBUb2tlbiB9ID1cbiAgICAgICAgICAgICAgICAgICAgKGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlckNhcmRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgICAgICAnYmlnY29tbWVyY2VfcGF5bWVudHNfY3JlZGl0Y2FyZHNjaGVja291dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5nZXRJbnN0cnVtZW50UGFyYW1zKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBUb2tlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICkpIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHVwVG9rZW47XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlT3JkZXJDYWxsYmFjaygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPVxuICAgICAgICAgICAgICAgICAgICAoYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkc2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW5zdHJ1bWVudFBhcmFtcygpLFxuICAgICAgICAgICAgICAgICAgICApKSB8fCB7fTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBvcmRlcklkO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIG9uQXBwcm92ZSBtZXRob2RcbiAgICAgKiBXaGVuIHN1Ym1pdHRpbmcgYSBmb3JtIHdpdGggYSBgc3VibWl0SG9zdGVkRm9ybWAgbWV0aG9kIGlmIHRoZXJlIGlzIG5vIGVycm9yXG4gICAgICogdGhlbiBvbkFwcHJvdmUgY2FsbGJhY2sgaXMgdHJpZ2dlcmVkIGFuZCBkZXBlbmRzIG9uIHRoZSBmbG93XG4gICAgICogd2Ugd2lsbCByZWNlaXZlIGFuIGBvcmRlcklEYCBpZiBpdCdzIGJhc2ljIHBheWluZyBhbmQgYHZhdWx0U2V0dXBUb2tlbmAgaWYgd2UgYXJlIHBheWluZ1xuICAgICAqIHdpdGggdmF1bHRlZCBpbnN0cnVtZW50IGFuZCBzaGlwcGluZyBhZGRyZXNzIGlzIHVudHJ1c3RlZFxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBoYW5kbGVBcHByb3ZlKHtcbiAgICAgICAgb3JkZXJJRCxcbiAgICAgICAgdmF1bHRTZXR1cFRva2VuLFxuICAgIH06IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzT25BcHByb3ZlRGF0YSkge1xuICAgICAgICBpZiAob3JkZXJJRCkge1xuICAgICAgICAgICAgdGhpcy5yZXR1cm5lZE9yZGVySWQgPSBvcmRlcklEO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhdWx0U2V0dXBUb2tlbikge1xuICAgICAgICAgICAgdGhpcy5yZXR1cm5lZFZhdWx0ZWRUb2tlbiA9IHZhdWx0U2V0dXBUb2tlbjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUmVuZGVyaW5nIENhcmQgRmllbGRzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgcmVuZGVyRmllbGRzKGZpZWxkc09wdGlvbnM6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXApIHtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkcyA9IHRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTtcblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkQ29kZT8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMuY3Z2RmllbGQgPSBjYXJkRmllbGRzLkNWVkZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3Z2RmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmRDb2RlLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZEV4cGlyeT8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwaXJ5RmllbGQgPSBjYXJkRmllbGRzLkV4cGlyeUZpZWxkKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmV4cGlyeUZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkRXhwaXJ5LmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZE5hbWU/LmNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWVGaWVsZCA9IGNhcmRGaWVsZHMuTmFtZUZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubmFtZUZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkTmFtZS5jb250YWluZXJJZH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZHNPcHRpb25zLmNhcmROdW1iZXI/LmNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aGlzLm51bWJlckZpZWxkID0gY2FyZEZpZWxkcy5OdW1iZXJGaWVsZCh7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm51bWJlckZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkTnVtYmVyLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyByZW5kZXJWYXVsdGVkRmllbGRzKGZpZWxkc09wdGlvbnM6IEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXApIHtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkcyA9IHRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTtcblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkQ29kZVZlcmlmaWNhdGlvbj8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMuY3Z2RmllbGQgPSBjYXJkRmllbGRzLkNWVkZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3Z2RmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmRDb2RlVmVyaWZpY2F0aW9uLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZEV4cGlyeVZlcmlmaWNhdGlvbj8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwaXJ5RmllbGQgPSBjYXJkRmllbGRzLkV4cGlyeUZpZWxkKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmV4cGlyeUZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkRXhwaXJ5VmVyaWZpY2F0aW9uLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZE51bWJlclZlcmlmaWNhdGlvbj8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMubnVtYmVyRmllbGQgPSBjYXJkRmllbGRzLk51bWJlckZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubnVtYmVyRmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmROdW1iZXJWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEluc3RydW1lbnQgcGFyYW1zIG1ldGhvZFxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRJbnN0cnVtZW50UGFyYW1zKCk6IEhvc3RlZEluc3RydW1lbnQgfCBWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgICAgIGlmICghdGhpcy5leGVjdXRpb25QYXltZW50RGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzSG9zdGVkSW5zdHJ1bWVudExpa2UodGhpcy5leGVjdXRpb25QYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgfSA9XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRpb25QYXltZW50RGF0YTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1ZhdWx0ZWRJbnN0cnVtZW50KHRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCB7IGluc3RydW1lbnRJZCB9ID0gdGhpcy5leGVjdXRpb25QYXltZW50RGF0YTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQoe1xuICAgICAgICBlbWl0dGVkQnksXG4gICAgfTogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdGF0ZSk6XG4gICAgICAgIHwgSG9zdGVkRmllbGRCbHVyRXZlbnREYXRhXG4gICAgICAgIHwgSG9zdGVkRmllbGRFbnRlckV2ZW50RGF0YVxuICAgICAgICB8IEhvc3RlZEZpZWxkRm9jdXNFdmVudERhdGEge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRUeXBlOiB0aGlzLm1hcEZpZWxkVHlwZShlbWl0dGVkQnkpLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRm9ybSBzdWJtaXQgbWV0aG9kXG4gICAgICogVHJpZ2dlcnMgYSBmb3JtIHN1Ym1pdFxuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIGFzeW5jIHN1Ym1pdEhvc3RlZEZvcm0oKSB7XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHMgPSB0aGlzLmdldENhcmRGaWVsZHNPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG5cbiAgICAgICAgY29uc3Qgc3VibWl0Q29uZmlnID0ge1xuICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3M6IHtcbiAgICAgICAgICAgICAgICBjb21wYW55OiBiaWxsaW5nQWRkcmVzcy5jb21wYW55LFxuICAgICAgICAgICAgICAgIGFkZHJlc3NMaW5lMTogYmlsbGluZ0FkZHJlc3MuYWRkcmVzczEsXG4gICAgICAgICAgICAgICAgYWRkcmVzc0xpbmUyOiBiaWxsaW5nQWRkcmVzcy5hZGRyZXNzMixcbiAgICAgICAgICAgICAgICBhZG1pbkFyZWExOiBiaWxsaW5nQWRkcmVzcy5zdGF0ZU9yUHJvdmluY2VDb2RlLFxuICAgICAgICAgICAgICAgIGFkbWluQXJlYTI6IGJpbGxpbmdBZGRyZXNzLmNpdHksXG4gICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogYmlsbGluZ0FkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZTogYmlsbGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NyZWRpdENhcmRWYXVsdGVkRm9ybSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNhcmRGaWVsZHMuc3VibWl0KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNhcmRGaWVsZHMuc3VibWl0KHN1Ym1pdENvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoXG4gICAgICAgICAgICAgICAgJ0ZhaWxlZCBhdXRoZW50aWNhdGlvbi4gUGxlYXNlIHRyeSB0byBhdXRob3JpemUgYWdhaW4uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFZhbGlkYXRpb24gYW5kIGVycm9yc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyB2YWxpZGF0ZUhvc3RlZEZvcm1PclRocm93KCkge1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzID0gdGhpcy5nZXRDYXJkRmllbGRzT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzU3RhdGUgPSBhd2FpdCBjYXJkRmllbGRzLmdldFN0YXRlKCkudGhlbigoZGF0YSkgPT4gZGF0YSk7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25EYXRhID0gdGhpcy5nZXRWYWxpZGl0eURhdGEoY2FyZEZpZWxkc1N0YXRlKTtcblxuICAgICAgICBpZiAodmFsaWRhdGlvbkRhdGEuaXNWYWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ob3N0ZWRGb3JtT3B0aW9ucz8ub25WYWxpZGF0ZT8uKHZhbGlkYXRpb25EYXRhKTtcblxuICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEludmFsaWRGb3JtRXJyb3IodGhpcy5tYXBWYWxpZGF0aW9uRXJyb3JzKHZhbGlkYXRpb25EYXRhLmVycm9ycykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VmFsaWRpdHlEYXRhKHtcbiAgICAgICAgZmllbGRzLFxuICAgIH06IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGUpOiBIb3N0ZWRGaWVsZFZhbGlkYXRlRXZlbnREYXRhIHtcbiAgICAgICAgY29uc3QgdXBkYXRlZEZpZWxkcyA9IHsgLi4uZmllbGRzIH07XG5cbiAgICAgICAgZGVsZXRlIHVwZGF0ZWRGaWVsZHMuY2FyZE5hbWVGaWVsZDtcblxuICAgICAgICBjb25zdCBmaWVsZHNLZXlzID0gT2JqZWN0LmtleXModXBkYXRlZEZpZWxkcykgYXMgQXJyYXk8XG4gICAgICAgICAgICBrZXlvZiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlWydmaWVsZHMnXVxuICAgICAgICA+O1xuXG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBmaWVsZHNLZXlzLmV2ZXJ5KChrZXkpID0+IHVwZGF0ZWRGaWVsZHNba2V5XT8uaXNWYWxpZCk7XG5cbiAgICAgICAgY29uc3QgZXJyb3JzID0gZmllbGRzS2V5cy5yZWR1Y2UoKGZpZWxkc0Vycm9ycywga2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFR5cGUgPSB0aGlzLm1hcEZpZWxkVHlwZShrZXkpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmZpZWxkc0Vycm9ycyxcbiAgICAgICAgICAgICAgICBbZmllbGRUeXBlXTogdXBkYXRlZEZpZWxkc1trZXldPy5pc1ZhbGlkXG4gICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIDogW3RoaXMuZ2V0SW52YWxpZEVycm9yQnlGaWVsZFR5cGUoZmllbGRUeXBlKV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCB7fSk7XG5cbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZCwgZXJyb3JzIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRJbnZhbGlkRXJyb3JCeUZpZWxkVHlwZShmaWVsZFR5cGU6IHN0cmluZyk6IEhvc3RlZElucHV0VmFsaWRhdGVFcnJvckRhdGEge1xuICAgICAgICBzd2l0Y2ggKGZpZWxkVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGU6XG4gICAgICAgICAgICBjYXNlIEhvc3RlZEZpZWxkVHlwZS5DYXJkQ29kZVZlcmlmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGNhcmQgY29kZScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkX2NhcmRfY29kZScsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlcjpcbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXJWZXJpZmljYXRpb246XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBjYXJkIG51bWJlcicsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkX2NhcmRfbnVtYmVyJyxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjYXNlIEhvc3RlZEZpZWxkVHlwZS5DYXJkRXhwaXJ5OlxuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGNhcmQgZXhwaXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludmFsaWRfY2FyZF9leHBpcnknLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBmaWVsZCcsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYXBWYWxpZGF0aW9uRXJyb3JzKFxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzOiBIb3N0ZWRJbnB1dFZhbGlkYXRlRXJyb3JEYXRhTWFwID0ge30sXG4gICAgKTogUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzIHtcbiAgICAgICAgY29uc3QgZXJyb3JzOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMgPSB7fTtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9yc0tleXMgPSBPYmplY3Qua2V5cyh2YWxpZGF0aW9uRXJyb3JzKSBhcyBBcnJheTxcbiAgICAgICAgICAgIGtleW9mIEhvc3RlZElucHV0VmFsaWRhdGVFcnJvckRhdGFNYXBcbiAgICAgICAgPjtcblxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGVycm9yc1trZXldID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdmFsaWRhdGlvbkVycm9yc1trZXldPy5bMF0/Lm1lc3NhZ2UgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGtleSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGVycm9ycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEZpZWxkcyBtYXBwZXJzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIG1hcEZpZWxkVHlwZSh0eXBlOiBzdHJpbmcpOiBIb3N0ZWRGaWVsZFR5cGUge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ25hbWUnOlxuICAgICAgICAgICAgICAgIHJldHVybiBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE5hbWU7XG5cbiAgICAgICAgICAgIGNhc2UgJ2NhcmROdW1iZXJGaWVsZCc6XG4gICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzQ3JlZGl0Q2FyZEZvcm1cbiAgICAgICAgICAgICAgICAgICAgPyBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlclxuICAgICAgICAgICAgICAgICAgICA6IEhvc3RlZEZpZWxkVHlwZS5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uO1xuXG4gICAgICAgICAgICBjYXNlICdjYXJkRXhwaXJ5RmllbGQnOlxuICAgICAgICAgICAgY2FzZSAnZXhwaXJ5JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0NyZWRpdENhcmRGb3JtXG4gICAgICAgICAgICAgICAgICAgID8gSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnlcbiAgICAgICAgICAgICAgICAgICAgOiBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbjtcblxuICAgICAgICAgICAgY2FzZSAnY2FyZEN2dkZpZWxkJzpcbiAgICAgICAgICAgIGNhc2UgJ2N2dic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNDcmVkaXRDYXJkRm9ybVxuICAgICAgICAgICAgICAgICAgICA/IEhvc3RlZEZpZWxkVHlwZS5DYXJkQ29kZVxuICAgICAgICAgICAgICAgICAgICA6IEhvc3RlZEZpZWxkVHlwZS5DYXJkQ29kZVZlcmlmaWNhdGlvbjtcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZmllbGQgdHlwZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBVdGlsc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRDYXJkRmllbGRzT3JUaHJvdygpOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkcyB7XG4gICAgICAgIGlmICghdGhpcy5jYXJkRmllbGRzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2FyZEZpZWxkcztcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldElucHV0U3R5bGVzKFxuICAgICAgICBzdHlsZXM/OiBIb3N0ZWRGaWVsZFN0eWxlc01hcCxcbiAgICApOiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzUmVuZGVyT3B0aW9uc1snc3R5bGVzJ10ge1xuICAgICAgICBjb25zdCBjb21tb25TdHlsZXMgPSB7XG4gICAgICAgICAgICAnZm9udC1zaXplJzogc3R5bGVzPy5kZWZhdWx0Py5mb250U2l6ZSB8fCAnMXJlbScsXG4gICAgICAgICAgICAnZm9udC1mYW1pbHknOlxuICAgICAgICAgICAgICAgIHN0eWxlcz8uZGVmYXVsdD8uZm9udEZhbWlseSB8fCAnTW9udHNlcnJhdCwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZicsXG4gICAgICAgICAgICAnZm9udC13ZWlnaHQnOiBzdHlsZXM/LmRlZmF1bHQ/LmZvbnRXZWlnaHQgfHwgJzQwMCcsXG4gICAgICAgICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICAgICAgICBwYWRkaW5nOiAnOXB4IDEzcHgnLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRTdHlsZXMgPSB7IC4uLmNvbW1vblN0eWxlcywgY29sb3I6ICcjMzMzMzMzJyB9O1xuICAgICAgICBjb25zdCBlcnJvclN0eWxlcyA9IHsgLi4uY29tbW9uU3R5bGVzLCBjb2xvcjogJ3JlZCcgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5wdXQ6IGRlZmF1bHRTdHlsZXMsXG4gICAgICAgICAgICAnLmludmFsaWQnOiBlcnJvclN0eWxlcyxcbiAgICAgICAgICAgICcudmFsaWQnOiBkZWZhdWx0U3R5bGVzLFxuICAgICAgICAgICAgJzpmb2N1cyc6IGRlZmF1bHRTdHlsZXMsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdHlsaXplSW5wdXRDb250YWluZXJzKFxuICAgICAgICBmaWVsZHM6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAgfCBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwLFxuICAgICk6IHZvaWQge1xuICAgICAgICBPYmplY3QudmFsdWVzKGZpZWxkcyB8fCB7fSkuZm9yRWFjaCgoaWQ6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtpZD8uY29udGFpbmVySWQgfHwgJyd9YCk7XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzBweCc7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5ib3hTaGFkb3cgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMHB4JztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSAnLTVweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFzVW5kZWZpbmVkVmFsdWVzKCkge1xuICAgICAgICBpZiAodGhpcy5ob3N0ZWRGb3JtT3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5ob3N0ZWRGb3JtT3B0aW9ucy5maWVsZHMpLnNvbWUoXG4gICAgICAgICAgICAgICAgKHZhbHVlKSA9PiB2YWx1ZSA9PT0gdW5kZWZpbmVkLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogSW5wdXQgZXZlbnRzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgb25DaGFuZ2VIYW5kbGVyKFxuICAgICAgICBmb3JtT3B0aW9uczogSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgICAgIGV2ZW50OiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlLFxuICAgICk6IHZvaWQge1xuICAgICAgICBmb3JtT3B0aW9ucz8ub25WYWxpZGF0ZT8uKHRoaXMuZ2V0VmFsaWRpdHlEYXRhKGV2ZW50KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZvY3VzSGFuZGxlcihcbiAgICAgICAgZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zLFxuICAgICAgICBldmVudDogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdGF0ZSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgZm9ybU9wdGlvbnM/Lm9uRm9jdXM/Lih0aGlzLmdldEZpZWxkVHlwZUJ5RW1pdHRlZEZpZWxkKGV2ZW50KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkJsdXJIYW5kbGVyKFxuICAgICAgICBmb3JtT3B0aW9uczogSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgICAgIGV2ZW50OiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlLFxuICAgICk6IHZvaWQge1xuICAgICAgICBmb3JtT3B0aW9ucz8ub25CbHVyPy4odGhpcy5nZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZChldmVudCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25JbnB1dFN1Ym1pdFJlcXVlc3QoXG4gICAgICAgIGZvcm1PcHRpb25zOiBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICAgICAgZXZlbnQ6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGUsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGZvcm1PcHRpb25zPy5vbkVudGVyPy4odGhpcy5nZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZChldmVudCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQmlnQ29tbWVyY2VQYXltZW50cyBBY2NlbGVyYXRlZCBjaGVja291dCByZWxhdGVkIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzIHBhcnQgd2hlbiBCQ1AgRmFzdGxhbmUgQS9CIHRlc3Rpbmcgd2lsbCBiZSBmaW5pc2hlZFxuICAgIHByaXZhdGUgc2hvdWxkSW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKG1ldGhvZElkOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gc3RhdGUuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoKTtcbiAgICAgICAgY29uc3QgYmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRQcm92aWRlckN1c3RvbWVyID0gaXNCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lcihcbiAgICAgICAgICAgIHBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuICAgICAgICApXG4gICAgICAgICAgICA/IHBheW1lbnRQcm92aWRlckN1c3RvbWVyXG4gICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kPy5pbml0aWFsaXphdGlvbkRhdGE/LmlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQgJiZcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2Q/LmluaXRpYWxpemF0aW9uRGF0YT8uaXNCaWdDb21tZXJjZVBheW1lbnRzQW5hbHl0aWNzVjJFbmFibGVkICYmXG4gICAgICAgICAgICAhYmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRQcm92aWRlckN1c3RvbWVyPy5hdXRoZW50aWNhdGlvblN0YXRlXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgcGFydCB3aGVuIEJDUCBGYXN0bGFuZSBBL0IgdGVzdGluZyB3aWxsIGJlIGZpbmlzaGVkXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplUGF5UGFsRmFzdGxhbmVPclRocm93KG1ldGhvZElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgICAgIGNvbnN0IHsgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YT8uY29ubmVjdENsaWVudFRva2VuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwYXlQYWxGYXN0bGFuZVNkayA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1Nkay5nZXRQYXlQYWxGYXN0bGFuZVNkayhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGNhcnQuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgICAgICBjYXJ0LmlkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5pbml0aWFsaXplUGF5UGFsRmFzdGxhbmUoXG4gICAgICAgICAgICAgICAgcGF5UGFsRmFzdGxhbmVTZGssXG4gICAgICAgICAgICAgICAgISFpbml0aWFsaXphdGlvbkRhdGE/LmlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChfOiB1bmtub3duKSB7XG4gICAgICAgICAgICAvLyBXZSBzaG91bGQgYXZvaWQgdGhyb3dpbmcgYW55IGVycm9yIGZyb20gdGhpcyBmbG93IHRvIGRvIG5vIGJyYWtlIGRlZmF1bHQgZmxvd1xuICAgICAgICAgICAgLy8gVGhpcyBmbG93IGlzIG9wdGlvbmFsXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuICAgIFBheVBhbENvbm5lY3RDdXN0b21lcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXIoXG4gICAgY3VzdG9tZXI/OiBQYXltZW50UHJvdmlkZXJDdXN0b21lcixcbik6IGN1c3RvbWVyIGlzIFBheVBhbENvbm5lY3RDdXN0b21lciB7XG4gICAgaWYgKCFjdXN0b21lcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgJ2F1dGhlbnRpY2F0aW9uU3RhdGUnIGluIGN1c3RvbWVyIHx8ICdhZGRyZXNzZXMnIGluIGN1c3RvbWVyIHx8ICdpbnN0cnVtZW50cycgaW4gY3VzdG9tZXJcbiAgICApO1xufVxuIiwiaW1wb3J0IHtcbiAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyxcbiAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1jcmVkaXQtY2FyZHMtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c0NyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrKCksXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzKCksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkcycgfSxcbl0pO1xuIiwiaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgUGF5UGFsQXBtU2RrLFxuICAgIFBheVBhbFNka0hlbHBlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgVGltZW91dEVycm9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcbmltcG9ydCB7IGlzRXhwZXJpbWVudEVuYWJsZWQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3V0aWxpdHknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBOb25JbnN0YW50QWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyxcbiAgICBQYXlQYWxPcmRlclN0YXR1cyxcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWFsdGVybmF0aXZlLW1ldGhvZHMtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5jb25zdCBQT0xMSU5HX0lOVEVSVkFMID0gMzAwMDtcbmNvbnN0IE1BWF9QT0xMSU5HX1RJTUUgPSAzMDAwMDA7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3lcbiAgICBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneVxue1xuICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj86IHN0cmluZztcbiAgICBwcml2YXRlIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uPzogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnM7XG4gICAgcHJpdmF0ZSBwYXlwYWxBcG1zPzogUGF5UGFsQXBtU2RrO1xuICAgIHByaXZhdGUgcG9sbGluZ1RpbWVyID0gMDtcbiAgICBwcml2YXRlIHN0b3BQb2xsaW5nID0gbm9vcDtcbiAgICBwcml2YXRlIGlzUG9sbGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHM/OiBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNTZGtIZWxwZXI6IFBheVBhbFNka0hlbHBlcixcbiAgICAgICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yOiBMb2FkaW5nSW5kaWNhdG9yLFxuICAgICAgICBwcml2YXRlIHBvbGxpbmdJbnRlcnZhbDogbnVtYmVyID0gUE9MTElOR19JTlRFUlZBTCxcbiAgICAgICAgcHJpdmF0ZSBtYXhQb2xsaW5nSW50ZXJ2YWxUaW1lOiBudW1iZXIgPSBNQVhfUE9MTElOR19USU1FLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmXG4gICAgICAgICAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBnYXRld2F5SWQsIG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kcyA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFnYXRld2F5SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5nYXRld2F5SWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19hcG1zXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHsgb3JkZXJJZCwgc2hvdWxkUmVuZGVyRmllbGRzIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBjb25zdCBmZWF0dXJlcyA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXM7XG5cbiAgICAgICAgdGhpcy5pc1BvbGxpbmdFbmFibGVkID0gaXNFeHBlcmltZW50RW5hYmxlZChmZWF0dXJlcywgJ1BBWVBBTC01NjI0LmJjcF9pZGVhbF9wb2xsaW5nJyk7XG5cbiAgICAgICAgLy8gSW5mbzpcbiAgICAgICAgLy8gVGhlIEFQTSBidXR0b24gYW5kIGZpZWxkcyBzaG91bGQgbm90IGJlIHJlbmRlcmVkIHdoZW4gc2hvcHBlciB3YXMgcmVkaXJlY3RlZCB0byBDaGVja291dCBwYWdlXG4gICAgICAgIC8vIGFmdGVyIHVzaW5nIHNtYXJ0IHBheW1lbnQgYnV0dG9uIG9uIFBEUCBvciBDYXJ0IHBhZ2UuIEluIHRoaXMgY2FzZSBiYWNrZW5kIHJldHVybnMgb3JkZXIgaWQgaWZcbiAgICAgICAgLy8gaXQgaXMgYXZhaWxhYmxlIGluIGNoZWNrb3V0IHNlc3Npb24uIFRoZXJlZm9yZSwgaXQgaXMgbm90IG5lY2Vzc2FyeSB0byByZW5kZXIgdGhlIGJ1dHRvbi5cbiAgICAgICAgaWYgKG9yZGVySWQpIHtcbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySWQ7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGF5cGFsQXBtcyA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1Nka0hlbHBlci5nZXRQYXlQYWxBcG1zU2RrKFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgIHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIgPSBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zLmNvbnRhaW5lci5zcGxpdCgnIycpWzFdO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBnYXRld2F5SWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMpO1xuXG4gICAgICAgIGlmIChzaG91bGRSZW5kZXJGaWVsZHMpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmllbGRzKG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBnYXRld2F5SWQgfSA9IHBheW1lbnQ7XG5cbiAgICAgICAgaWYgKCF0aGlzLm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc1BvbGxpbmdFbmFibGVkICYmIG1ldGhvZElkID09PSAnaWRlYWwnKSB7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLmluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKG1ldGhvZElkLCByZXNvbHZlLCByZWplY3QsIGdhdGV3YXlJZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5pc05vbkluc3RhbnRQYXltZW50TWV0aG9kKG1ldGhvZElkKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICB0aGlzLm9yZGVySWQsXG4gICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmICh0aGlzLmlzUG9sbGluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b24/LmNsb3NlKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUG9sbGluZyBtZWNoYW5pc21cbiAgICAgKlxuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICByZXNvbHZlUHJvbWlzZTogKHZhbHVlPzogdW5rbm93bikgPT4gdm9pZCxcbiAgICAgICAgcmVqZWN0UHJvbWlzZTogKHZhbHVlPzogdW5rbm93bikgPT4gdm9pZCxcbiAgICAgICAgZ2F0ZXdheUlkPzogc3RyaW5nLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChyZXNvbHZlLCB0aGlzLnBvbGxpbmdJbnRlcnZhbCk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RvcFBvbGxpbmcgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5wb2xsaW5nVGltZXIgKz0gdGhpcy5wb2xsaW5nSW50ZXJ2YWw7XG5cbiAgICAgICAgICAgIGNvbnN0IG9yZGVyU3RhdHVzID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldE9yZGVyU3RhdHVzKFxuICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzT3JkZXJBcHByb3ZlZCA9IG9yZGVyU3RhdHVzID09PSBQYXlQYWxPcmRlclN0YXR1cy5BcHByb3ZlZDtcbiAgICAgICAgICAgIGNvbnN0IGlzUG9sbGluZ0Vycm9yID0gb3JkZXJTdGF0dXMgPT09IFBheVBhbE9yZGVyU3RhdHVzLlBvbGxpbmdFcnJvcjtcblxuICAgICAgICAgICAgaWYgKGlzT3JkZXJBcHByb3ZlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVJbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc1BvbGxpbmdFcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3RQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaXNPcmRlckFwcHJvdmVkICYmIHRoaXMucG9sbGluZ1RpbWVyIDwgdGhpcy5tYXhQb2xsaW5nSW50ZXJ2YWxUaW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0UHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVpbml0aWFsaXplU3RyYXRlZ3koe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICBiaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzOiB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHMsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgVGltZW91dEVycm9yKCkpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0UHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZUluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XG4gICAgICAgIHRoaXMucG9sbGluZ1RpbWVyID0gMDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc2V0UG9sbGluZ01lY2hhbmlzbSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kZUluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyByZWluaXRpYWxpemVTdHJhdGVneShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICkge1xuICAgICAgICBhd2FpdCB0aGlzLmRlaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bikge1xuICAgICAgICBjb25zdCB7IG9uRXJyb3IgfSA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kcyB8fCB7fTtcblxuICAgICAgICBpZiAodGhpcy5pc1BvbGxpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0UG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1dHRvbiBtZXRob2RzL2NhbGxiYWNrc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgZ2F0ZXdheUlkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXM6IEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbEFtcHNTZGsgPSB0aGlzLmdldFBheXBhbEFtcHNTZGtPclRocm93KCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHsgYnV0dG9uU3R5bGUgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkVycm9yLCBvblJlbmRlckJ1dHRvbiwgc3VibWl0Rm9ybSB9ID0gYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcztcblxuICAgICAgICBjb25zdCBidXR0b25PcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBtZXRob2RJZCxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShidXR0b25TdHlsZSksXG4gICAgICAgICAgICBvbkluaXQ6IChfLCBhY3Rpb25zKSA9PiBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zLm9uSW5pdEJ1dHRvbihhY3Rpb25zKSxcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PiB0aGlzLm9uQ3JlYXRlT3JkZXIobWV0aG9kSWQsIGdhdGV3YXlJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhKSA9PiB0aGlzLmhhbmRsZUFwcHJvdmUoZGF0YSwgc3VibWl0Rm9ybSksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZUluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25FcnJvcjogKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZUluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVGYWlsdXJlKGVycm9yLCBvbkVycm9yKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoXywgYWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zLm9uVmFsaWRhdGUoYWN0aW9ucy5yZXNvbHZlLCBhY3Rpb25zLnJlamVjdCksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uID0gcGF5cGFsQW1wc1Nkay5CdXR0b25zKGJ1dHRvbk9wdGlvbnMpO1xuXG4gICAgICAgIGlmICghdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9uUmVuZGVyQnV0dG9uICYmIHR5cGVvZiBvblJlbmRlckJ1dHRvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25SZW5kZXJCdXR0b24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbi5yZW5kZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uQ3JlYXRlT3JkZXIoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGdhdGV3YXlJZDogc3RyaW5nLFxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zOiBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHsgb25WYWxpZGF0ZSB9ID0gYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcztcblxuICAgICAgICBjb25zdCBvblZhbGlkYXRpb25QYXNzZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiAoKSA9PiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCBvblZhbGlkYXRlKG9uVmFsaWRhdGlvblBhc3NlZCwgbm9vcCk7XG5cbiAgICAgICAgY29uc3Qgb3JkZXJJZCA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcbiAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c19hcG1zJyxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodGhpcy5pc05vbkluc3RhbnRQYXltZW50TWV0aG9kKG1ldGhvZElkKSkge1xuICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSB7IHVzZVN0b3JlQ3JlZGl0OiBmYWxzZSB9O1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIG9yZGVySWQsXG4gICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvcmRlcklkO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlQXBwcm92ZShcbiAgICAgICAgeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIHN1Ym1pdEZvcm06IEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ3N1Ym1pdEZvcm0nXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJRDtcblxuICAgICAgICBzdWJtaXRGb3JtKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVGYWlsdXJlKFxuICAgICAgICBlcnJvcjogRXJyb3IsXG4gICAgICAgIG9uRXJyb3I6IEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uRXJyb3InXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEZpZWxkcyBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyRmllbGRzKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zOiBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBwYXlwYWxBbXBzU2RrID0gdGhpcy5nZXRQYXlwYWxBbXBzU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IGZpcnN0TmFtZSwgbGFzdE5hbWUsIGVtYWlsIH0gPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCB7IGFwbUZpZWxkc0NvbnRhaW5lciwgYXBtRmllbGRzU3R5bGVzIH0gPSBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zO1xuXG4gICAgICAgIGlmICghYXBtRmllbGRzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtc1wiIGFyZ3VtZW50IHNob3VsZCBjb250YWluIFwiYXBtRmllbGRzQ29udGFpbmVyXCIuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWVsZENvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFwbUZpZWxkc0NvbnRhaW5lcik7XG5cbiAgICAgICAgaWYgKGZpZWxkQ29udGFpbmVyRWxlbWVudCkge1xuICAgICAgICAgICAgZmllbGRDb250YWluZXJFbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmllbGRzT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IG1ldGhvZElkLFxuICAgICAgICAgICAgc3R5bGU6IGFwbUZpZWxkc1N0eWxlcyB8fCB7fSxcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGAke2ZpcnN0TmFtZX0gJHtsYXN0TmFtZX1gLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVtYWlsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFBheW1lbnRGaWVsZHMgPSBwYXlwYWxBbXBzU2RrLlBheW1lbnRGaWVsZHMoZmllbGRzT3B0aW9ucyk7XG5cbiAgICAgICAgcGF5cGFsUGF5bWVudEZpZWxkcy5yZW5kZXIoYXBtRmllbGRzQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgaXNOb25JbnN0YW50UGF5bWVudE1ldGhvZChtZXRob2RJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBtZXRob2RJZC50b1VwcGVyQ2FzZSgpIGluIE5vbkluc3RhbnRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5cGFsQW1wc1Nka09yVGhyb3coKSB7XG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxBcG1zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnBheXBhbEFwbXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkayB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCB7IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyB9IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWNvbnN0YW50cyc7XG5pbXBvcnQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtYWx0ZXJuYXRpdmUtbWV0aG9kcy1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGsoKSxcbiAgICAgICAgbmV3IExvYWRpbmdJbmRpY2F0b3Ioe1xuICAgICAgICAgICAgY29udGFpbmVyU3R5bGVzOiBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMsXG4gICAgICAgIH0pLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBnYXRld2F5OiAnYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcycgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBOb3RJbXBsZW1lbnRlZEVycm9yLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBDbGlja0NhbGxiYWNrQWN0aW9ucyxcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgb3JkZXJJZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheXBhbEJ1dHRvbj86IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vIH0gPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c192ZW5tb1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgLy8gSW5mbzpcbiAgICAgICAgLy8gVGhlIFBheVBhbCBidXR0b24gYW5kIGZpZWxkcyBzaG91bGQgbm90IGJlIHJlbmRlcmVkIHdoZW4gc2hvcHBlciB3YXMgcmVkaXJlY3RlZCB0byBDaGVja291dCBwYWdlXG4gICAgICAgIC8vIGFmdGVyIHVzaW5nIHNtYXJ0IHBheW1lbnQgYnV0dG9uIG9uIFBEUCBvciBDYXJ0IHBhZ2UuIEluIHRoaXMgY2FzZSBiYWNrZW5kIHJldHVybnMgb3JkZXIgaWQgaWZcbiAgICAgICAgLy8gaXQgaXMgYXZhaWxhYmxlIGluIGNoZWNrb3V0IHNlc3Npb24uIFRoZXJlZm9yZSwgaXQgaXMgbm90IG5lY2Vzc2FyeSB0byByZW5kZXIgUGF5UGFsIGJ1dHRvbi5cbiAgICAgICAgaWYgKHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8ub3JkZXJJZDtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vLmNvbnRhaW5lci5zcGxpdCgnIycpWzFdO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoXG4gICAgICAgICAgICBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgdGhpcy5vcmRlcklkLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbj8uY2xvc2UoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXR0b24gbWV0aG9kcy9jYWxsYmFja3NcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vOiBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkVycm9yLCBvblJlbmRlckJ1dHRvbiwgb25WYWxpZGF0ZSwgc3VibWl0Rm9ybSB9ID1cbiAgICAgICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbk9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IHBheXBhbFNkay5GVU5ESU5HLlZFTk1PLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKFxuICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c192ZW5tb19jaGVja291dCcsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IChfLCBhY3Rpb25zKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGFjdGlvbnMsIG9uVmFsaWRhdGUpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YSkgPT4gdGhpcy5oYW5kbGVBcHByb3ZlKGRhdGEsIHN1Ym1pdEZvcm0pLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSksXG4gICAgICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIG9uRXJyb3IpLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKFxuICAgICAgICAgICAgICAgIGBWZW5tbyBpcyBub3QgYXZhaWxhYmxlIGZvciB5b3VyIHJlZ2lvbi4gUGxlYXNlIGFub3RoZXIgcGF5bWVudCBtZXRob2QgaW5zdGVhZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvblJlbmRlckJ1dHRvbiAmJiB0eXBlb2Ygb25SZW5kZXJCdXR0b24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uUmVuZGVyQnV0dG9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbi5yZW5kZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBhY3Rpb25zOiBDbGlja0NhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgb25WYWxpZGF0ZTogQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvblZhbGlkYXRlJ10sXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcmVzb2x2ZSwgcmVqZWN0IH0gPSBhY3Rpb25zO1xuXG4gICAgICAgIGNvbnN0IG9uVmFsaWRhdGlvblBhc3NlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcih0cnVlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCBvblZhbGlkYXRlKG9uVmFsaWRhdGlvblBhc3NlZCwgcmVqZWN0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUFwcHJvdmUoXG4gICAgICAgIHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBzdWJtaXRGb3JtOiBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ3N1Ym1pdEZvcm0nXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJRDtcblxuICAgICAgICBzdWJtaXRGb3JtKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihcbiAgICAgICAgZXJyb3I6IEVycm9yLFxuICAgICAgICBvbkVycm9yOiBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uRXJyb3InXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBuZXcgTG9hZGluZ0luZGljYXRvcih7IHN0eWxlczogeyBiYWNrZ3JvdW5kQ29sb3I6ICdibGFjaycgfSB9KSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vUGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vJyB9LFxuXSk7XG4iXSwibmFtZXMiOlsiTWlzc2luZ0RhdGFFcnJvclR5cGUiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwidG9SZXNvbHZhYmxlTW9kdWxlIiwibW9kdWxlIiwicmVzb2x2ZUlkcyIsIk9iamVjdCIsImFzc2lnbiIsImQiLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwic3VwZXIiLCJuYW1lIiwidHlwZSIsInNldFByb3RvdHlwZU9mIiwidGhpcyIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciIsIk1pc3NpbmdEYXRhRXJyb3IiLCJzdWJ0eXBlIiwiTWlzc2luZ0JpbGxpbmdBZGRyZXNzIiwiTWlzc2luZ0NhcnQiLCJNaXNzaW5nQ29uc2lnbm1lbnRzIiwiTWlzc2luZ0NoZWNrb3V0IiwiTWlzc2luZ0N1c3RvbWVyIiwiTWlzc2luZ0NoZWNrb3V0Q29uZmlnIiwiTWlzc2luZ09yZGVyQ29uZmlnIiwiTWlzc2luZ09yZGVyIiwiTWlzc2luZ09yZGVySWQiLCJNaXNzaW5nUGF5bWVudCIsIk1pc3NpbmdQYXltZW50VG9rZW4iLCJNaXNzaW5nUGF5bWVudE1ldGhvZCIsIk1pc3NpbmdTaGlwcGluZ0FkZHJlc3MiLCJnZXRFcnJvck1lc3NhZ2UiLCJCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvciIsIkRFRkFVTFRfUkVTUE9OU0UiLCJib2R5IiwiaGVhZGVycyIsInN0YXR1cyIsIlJlcXVlc3RFcnJvciIsInJlc3BvbnNlIiwiZXJyb3JzIiwiQ2FydFNvdXJjZSIsIkxpYWJpbGl0eVNoaWZ0RW51bSIsIkJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlbnQiLCJTdHlsZUJ1dHRvbkxhYmVsIiwiU3R5bGVCdXR0b25Db2xvciIsIlN0eWxlQnV0dG9uU2hhcGUiLCJOb25JbnN0YW50QWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyIsIlBheVBhbE9yZGVyU3RhdHVzIiwiQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSIsImZvcm1Qb3N0ZXIiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwiYmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIiLCJiaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyIiwibG9hZFBheVBhbFNkayIsIm1ldGhvZElkIiwicHJvdmlkZWRDdXJyZW5jeUNvZGUiLCJpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlIiwiZm9yY2VMb2FkIiwic3RhdGUiLCJnZXRTdGF0ZSIsImN1cnJlbmN5Q29kZSIsImdldENhcnRPclRocm93IiwiY3VycmVuY3kiLCJjb2RlIiwicGF5bWVudE1ldGhvZCIsImdldFBheW1lbnRNZXRob2RPclRocm93IiwicGF5cGFsU2RrIiwiZ2V0UGF5UGFsU0RLIiwiZ2V0UGF5UGFsU2RrT3JUaHJvdyIsImNyZWF0ZUJ1eU5vd0NhcnRPclRocm93IiwiYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMiLCJjYXJ0UmVxdWVzdEJvZHkiLCJnZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkiLCJjcmVhdGVCdXlOb3dDYXJ0IiwiZXJyb3IiLCJjcmVhdGVPcmRlciIsInByb3ZpZGVySWQiLCJyZXF1ZXN0Qm9keSIsImNhcnRJZCIsImlkIiwib3JkZXJJZCIsImNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyIsInNldHVwVG9rZW4iLCJ1cGRhdGVPcmRlciIsImNhcnQiLCJjb25zaWdubWVudCIsImdldENvbnNpZ25tZW50c09yVGhyb3ciLCJhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMiLCJzZWxlY3RlZFNoaXBwaW5nT3B0aW9uIiwiX2Vycm9yIiwiZ2V0T3JkZXJTdGF0dXMiLCJvcHRpb25zIiwidG9rZW5pemVQYXltZW50IiwicG9zdEZvcm0iLCJwYXltZW50X3R5cGUiLCJhY3Rpb24iLCJwcm92aWRlciIsIm9yZGVyX2lkIiwic291cmNlIiwiQnV5Tm93IiwiY2FydF9pZCIsInN1Ym1pdFBheW1lbnQiLCJnYXRld2F5SWQiLCJwYXltZW50RGF0YSIsImZvcm1hdHRlZFBheWxvYWQiLCJ2YXVsdF9wYXltZW50X2luc3RydW1lbnQiLCJzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudCIsImRldmljZV9pbmZvIiwibWV0aG9kX2lkIiwicGF5cGFsX2FjY291bnQiLCJnZXRTaGlwcGluZ09wdGlvbk9yVGhyb3ciLCJzZWxlY3RlZFNoaXBwaW5nT3B0aW9uSWQiLCJyZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uIiwiZmluZCIsIm9wdGlvbiIsImlzUmVjb21tZW5kZWQiLCJzaGlwcGluZ09wdGlvblRvU2VsZWN0IiwiZ2V0QWRkcmVzcyIsImFkZHJlc3MiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwicGhvbmUiLCJjb21wYW55IiwiYWRkcmVzczEiLCJhZGRyZXNzMiIsImNpdHkiLCJjb3VudHJ5Q29kZSIsInBvc3RhbENvZGUiLCJzdGF0ZU9yUHJvdmluY2UiLCJzdGF0ZU9yUHJvdmluY2VDb2RlIiwiY3VzdG9tRmllbGRzIiwiZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzIiwicGF5ZXIiLCJnaXZlbl9uYW1lIiwic3VybmFtZSIsImVtYWlsX2FkZHJlc3MiLCJhZGRyZXNzX2xpbmVfMSIsImFkZHJlc3NfbGluZV8yIiwiYWRtaW5fYXJlYV8yIiwiY291bnRyeV9jb2RlIiwicG9zdGFsX2NvZGUiLCJhZG1pbl9hcmVhXzEiLCJwaG9uZV9udW1iZXIiLCJuYXRpb25hbF9udW1iZXIiLCJnZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzIiwib3JkZXJEZXRhaWxzIiwicHVyY2hhc2VfdW5pdHMiLCJmdWxsX25hbWUiLCJzaGlwcGluZyIsInNwbGl0Iiwiam9pbiIsImdldFZhbGlkQnV0dG9uU3R5bGUiLCJzdHlsZSIsImNvbG9yIiwiaGVpZ2h0IiwibGFiZWwiLCJzaGFwZSIsInZhbGlkU3R5bGVzIiwidW5kZWZpbmVkIiwiZ2V0VmFsaWRIZWlnaHQiLCJvbWl0QnkiLCJpc05pbCIsInJlbW92ZUVsZW1lbnQiLCJlbGVtZW50SWQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImRpc3BsYXkiLCJJTlRFUk5BTF9VU0VfT05MWSIsIkNvbnRlbnRUeXBlIiwiU0RLX1ZFUlNJT05fSEVBREVSUyIsIkJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyIiwicmVxdWVzdFNlbmRlciIsInVybCIsIkpzb24iLCJwb3N0IiwicHV0IiwiQmlnQ29tbWVyY2VQYXltZW50c1NjcmlwdExvYWRlciIsInNjcmlwdExvYWRlciIsIndpbmRvdyIsInBheXBhbFNka1NjcmlwdENvbmZpZyIsImdldFBheVBhbFNka1NjcmlwdENvbmZpZ09yVGhyb3ciLCJsb2FkUGF5UGFsU0RLIiwicGF5cGFsIiwidHJhbnNmb3JtQ29uZmlnIiwiYXR0cmlidXRlcyIsInNjcmlwdFNyYyIsIlVSTFNlYXJjaFBhcmFtcyIsInRvU3RyaW5nIiwibG9hZFNjcmlwdCIsImFzeW5jIiwiY2xpZW50VG9rZW4iLCJpbml0aWFsaXphdGlvbkRhdGEiLCJjbGllbnRJZCIsImludGVudCIsIm1lcmNoYW50SWQiLCJidXllckNvdW50cnkiLCJhdHRyaWJ1dGlvbklkIiwiaXNWZW5tb0VuYWJsZWQiLCJpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCIsImlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlIiwiaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSIsImF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMiLCJlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyIsImlzR29vZ2xlUGF5RW5hYmxlZCIsImNvbW1pdCIsInNob3VsZEVuYWJsZUNhcmQiLCJlbmFibGVDYXJkRnVuZGluZyIsImRpc2FibGVDYXJkRnVuZGluZyIsImVuYWJsZUNyZWRpdEZ1bmRpbmciLCJkaXNhYmxlQ3JlZGl0RnVuZGluZyIsInNob3VsZEVuYWJsZUFQTXMiLCJlbmFibGVWZW5tb0Z1bmRpbmciLCJkaXNhYmxlVmVubW9GdW5kaW5nIiwiZW5hYmxlQVBNc0Z1bmRpbmciLCJkaXNhYmxlQVBNc0Z1bmRpbmciLCJmaWx0ZXIiLCJhcG0iLCJpbmNsdWRlcyIsImdvb2dsZVBheUNvbXBvbmVudCIsImNhcmRGaWVsZHNDb21wb25lbnQiLCJkaXNhYmxlRnVuZGluZyIsImZpbHRlckZ1bmRpbmdPcHRpb25zIiwiZW5hYmxlRnVuZGluZyIsImxlbmd0aCIsImNvbXBvbmVudHMiLCJmdW5kaW5nT3B0aW9ucyIsImZ1bmRpbmdUeXBlc1RvQmVGaWx0ZXJlZCIsImZ1bmRpbmdPcHRpb24iLCJjb25maWciLCJ0cmFuc2Zvcm1lZENvbmZpZyIsImtleXMiLCJmb3JFYWNoIiwidmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJnZXRIb3N0IiwiY3JlYXRlRm9ybVBvc3RlciIsImNyZWF0ZVJlcXVlc3RTZW5kZXIiLCJob3N0IiwiZ2V0U2NyaXB0TG9hZGVyIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJTdHJhdGVneSIsImJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UiLCJvbkVycm9yIiwibm9vcCIsImluaXRpYWxpemUiLCJiaWdjb21tZXJjZV9wYXltZW50cyIsImNvbnRhaW5lciIsIm9uQ2xpY2siLCJnZXRQYXltZW50TWV0aG9kIiwibG9hZFBheW1lbnRNZXRob2QiLCJCdXR0b25zIiwicmVuZGVyQnV0dG9uIiwiY29uc29sZSIsImRlaW5pdGlhbGl6ZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2lnbkluIiwiY3JlZGVudGlhbHMiLCJzaWduSW5DdXN0b21lciIsInNpZ25PdXQiLCJzaWduT3V0Q3VzdG9tZXIiLCJleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0IiwiY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayIsIm9uQ29tcGxldGUiLCJwYXltZW50QnV0dG9uU3R5bGVzIiwiY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMiLCJkZWZhdWx0Q2FsbGJhY2tzIiwib25BcHByb3ZlIiwib3JkZXJJRCIsImhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzIiwib25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UiLCJkYXRhIiwib25TaGlwcGluZ09wdGlvbnNDaGFuZ2UiLCJhY3Rpb25zIiwib25Ib3N0ZWRDaGVja291dEFwcHJvdmUiLCJidXR0b25SZW5kZXJPcHRpb25zIiwiZnVuZGluZ1NvdXJjZSIsIkZVTkRJTkciLCJQQVlQQUwiLCJwYXlwYWxCdXR0b24iLCJpc0VsaWdpYmxlIiwicmVuZGVyIiwib3JkZXIiLCJiaWxsaW5nQWRkcmVzcyIsInVwZGF0ZUJpbGxpbmdBZGRyZXNzIiwibGluZUl0ZW1zIiwicGh5c2ljYWxJdGVtcyIsInNoaXBwaW5nQWRkcmVzcyIsInVwZGF0ZVNoaXBwaW5nQWRkcmVzcyIsInN1Ym1pdE9yZGVyIiwicGFyYW1zIiwiaGFuZGxlRXJyb3IiLCJzaGlwcGluZ09wdGlvbiIsInNlbGVjdFNoaXBwaW5nT3B0aW9uIiwiVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZSIsIlREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZSIsIlBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSIsIlBheVBhbFNka0hlbHBlciIsImdldFBheVBhbEZhc3RsYW5lU2RrIiwic2Vzc2lvbklkIiwicGF5cGFsRmFzdGxhbmVTZGsiLCJnZXRQYXlQYWxGYXN0bGFuZVNka0NvbmZpZ3VyYXRpb24iLCJnZXRQYXlQYWxHb29nbGVQYXlTZGsiLCJwYXlwYWxHb29nbGVQYXkiLCJnZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93IiwiZ2V0UGF5UGFsQXBtc1NkayIsInBheXBhbEFwbXMiLCJnZXRQYXlQYWxBcG1TZGtDb25maWd1cmF0aW9uIiwiZ2V0UGF5UGFsTWVzc2FnZXMiLCJwYXlwYWxNZXNzYWdlcyIsInBheXBhbFNka01lc3NhZ2VzQ29uZmlnIiwiZ2V0UGF5UGFsU2RrTWVzc2FnZXNDb25maWd1cmF0aW9uIiwic2NyaXB0T3B0aW9ucyIsInNjcmlwdEF0dHJpYnV0ZXMiLCJyZXBsYWNlIiwiY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkayIsImNyZWF0ZVNjcmlwdExvYWRlciIsIkNvb2tpZVN0b3JhZ2UiLCJjb29raWVLZXkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJjb29raWUiLCJmaXJzdEluZGV4IiwiaW5kZXhPZiIsImxhc3RJbmRleCIsImRlY29kZVVSSUNvbXBvbmVudCIsInN1YnN0cmluZyIsInNldCIsInNlY3VyZSIsImNvb2tpZVRleHQiLCJleHBpcmVzIiwicGF0aCIsImRvbWFpbiIsInRvVVRDU3RyaW5nIiwibm93IiwiRGF0ZSIsIm1pbnV0ZXMiLCJzZXRUaW1lIiwiZ2V0VGltZSIsInJlbW92ZSIsIkJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzIiwiaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lIiwiaXNUZXN0TW9kZUVuYWJsZWQiLCJzdHlsZXMiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwicGF5cGFsRmFzdGxhbmUiLCJkZWZhdWx0U3R5bGVzIiwicm9vdCIsImJhY2tncm91bmRDb2xvclByaW1hcnkiLCJGYXN0bGFuZSIsImdldFBheVBhbEZhc3RsYW5lT3JUaHJvdyIsImxvb2t1cEN1c3RvbWVyT3JUaHJvdyIsImlkZW50aXR5IiwibG9va3VwQ3VzdG9tZXJCeUVtYWlsIiwidHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3ciLCJjdXN0b21lckNvbnRleHRJZCIsInRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3ciLCJ1cGRhdGVTdG9yYWdlU2Vzc2lvbklkIiwic2V0RGF0ZSIsImdldERhdGUiLCJjb29raWVzT3B0aW9uIiwicmVtb3ZlU3RvcmFnZVNlc3Npb25JZCIsImdldFN0b3JhZ2VTZXNzaW9uSWQiLCJtYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhIiwiYXV0aGVudGljYXRpb25SZXN1bHQiLCJhdXRoZW50aWNhdGlvblN0YXRlIiwicHJvZmlsZURhdGEiLCJwYXlwYWxCaWxsaW5nQWRkcmVzcyIsImNhcmQiLCJwYXltZW50U291cmNlIiwicGF5cGFsU2hpcHBpbmdBZGRyZXNzIiwicGF5cGFsUHJvZmlsZU5hbWUiLCJwYXlwYWxJbnN0cnVtZW50IiwibWFwUGF5UGFsVG9CY0FkZHJlc3MiLCJwaG9uZU51bWJlciIsImluc3RydW1lbnRzIiwibWFwUGF5UGFsVG9CY0luc3RydW1lbnQiLCJhZGRyZXNzZXMiLCJmaWx0ZXJBZGRyZXNzZXMiLCJVTlJFQ09HTklaRUQiLCJpbnN0cnVtZW50IiwiYnJhbmQiLCJleHBpcnkiLCJsYXN0RGlnaXRzIiwiZXhwaXJ5WWVhciIsImV4cGlyeU1vbnRoIiwiYmlncGF5VG9rZW4iLCJkZWZhdWx0SW5zdHJ1bWVudCIsImlpbiIsImxhc3Q0IiwibWV0aG9kIiwidHJ1c3RlZFNoaXBwaW5nQWRkcmVzcyIsInVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvbk1vZGUiLCJQQU4iLCJtYXBCY1RvUGF5UGFsQWRkcmVzcyIsImFkZHJlc3NMaW5lMSIsImFkZHJlc3NMaW5lMiIsImFkbWluQXJlYTEiLCJhZG1pbkFyZWEyIiwicHJvZmlsZU5hbWUiLCJmdWxsTmFtZSIsInBob25lRGF0YSIsIm5hdGlvbmFsTnVtYmVyIiwiY291bnRyeSIsInJlZHVjZSIsImN1c3RvbWVyQWRkcmVzc2VzIiwiY3VycmVudEFkZHJlc3MiLCJzb21lIiwiY3VzdG9tZXJBZGRyZXNzIiwiaXNFcXVhbEFkZHJlc3NlcyIsImZpcnN0QWRkcmVzcyIsInNlY29uZEFkZHJlc3MiLCJpc0VxdWFsIiwibm9ybWFsaXplQWRkcmVzcyIsIm9taXQiLCJjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyIsImlzSW52YWxpZFN0eWxlT3B0aW9uIiwic3R5bGVPcHRpb24iLCJnZXRGYXN0bGFuZVN0eWxlcyIsInN0eWxlU2V0dGluZ3MiLCJ1aVN0eWxlcyIsImZhc3RsYW5lU3R5bGVzIiwiaW5wdXQiLCJ0b2dnbGUiLCJ0ZXh0Qm9keSIsInRleHQiLCJ0ZXh0Q2FwdGlvbiIsImNhcHRpb24iLCJicmFuZGluZyIsImNsZWFuVXBGYXN0bGFuZVN0eWxlcyIsImZhc3RsYW5lUm9vdFNldHRpbmdzQmFja2dyb3VuZENvbG9yIiwiZXJyb3JDb2xvciIsImZhc3RsYW5lUm9vdFNldHRpbmdzRXJyb3JDb2xvciIsImZvbnRGYW1pbHkiLCJmYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRGYW1pbHkiLCJmb250U2l6ZUJhc2UiLCJmYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRTaXplIiwicGFkZGluZyIsImZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZyIsInByaW1hcnlDb2xvciIsImZhc3RsYW5lUm9vdFNldHRpbmdzUHJpbWFyeUNvbG9yIiwiYm9yZGVyUmFkaXVzIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyUmFkaXVzIiwiYm9yZGVyQ29sb3IiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJDb2xvciIsImZvY3VzQm9yZGVyQ29sb3IiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NGb2N1c0JvcmRlckJhc2UiLCJiYWNrZ3JvdW5kQ29sb3IiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJXaWR0aCIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlcldpZHRoIiwidGV4dENvbG9yQmFzZSIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc1RleHRDb2xvckJhc2UiLCJjb2xvclByaW1hcnkiLCJmYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JQcmltYXJ5IiwiY29sb3JTZWNvbmRhcnkiLCJmYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JTZWNvbmRhcnkiLCJmYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NDb2xvciIsImZvbnRTaXplIiwiZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzRm9udFNpemUiLCJmYXN0bGFuZVRleHRDYXB0aW9uU2V0dGluZ3NDb2xvciIsImZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0ZvbnRTaXplIiwiZmFzdGxhbmVCcmFuZGluZ1NldHRpbmdzIiwibWVyZ2VGYXN0bGFuZVN0eWxlcyIsIkJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kiLCJiaWdDb21tZXJjZVBheW1lbnRzU2RrIiwiYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMiLCJiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZSIsIl8iLCJjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCIsImdldEN1c3RvbWVyT3JUaHJvdyIsImlzR3Vlc3QiLCJydW5QYXlQYWxBdXRoZW50aWNhdGlvbkZsb3dPclRocm93IiwiY3VzdG9tZXIiLCJnZXRDdXN0b21lciIsImdldEJpbGxpbmdBZGRyZXNzIiwiY3VzdG9tZXJFbWFpbCIsImlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQiLCJDQU5DRUxFRCIsInVwZGF0ZUN1c3RvbWVyRGF0YVN0YXRlIiwidXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJ1cGRhdGVkU3RhdGUiLCJpc0Zhc3RsYW5lU2hpcHBpbmdPcHRpb25BdXRvU2VsZWN0RW5hYmxlZCIsImNvbnNpZ25tZW50cyIsImdldENvbnNpZ25tZW50cyIsImZpcnN0U2hpcHBpbmdPcHRpb24iLCJzaGlwcGluZ09wdGlvbklkIiwiaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkIiwiQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQ3VzdG9tZXJTdHJhdGVneSIsImJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyIiwiYmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyIiwiZnVuZGluZ1NvdXJjZXMiLCJQQVlMQVRFUiIsIkNSRURJVCIsImhhc1JlbmRlcmVkU21hcnRCdXR0b24iLCJCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lclN0cmF0ZWd5IiwiYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8iLCJWRU5NTyIsInBheXBhbEJ1dHRvblJlbmRlciIsIkJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25TdHJhdGVneSIsImNvbnRhaW5lcklkIiwiaXNCdXlOb3dGbG93IiwiQm9vbGVhbiIsImxvYWREZWZhdWx0Q2hlY2tvdXQiLCJvbkVsaWdpYmlsaXR5RmFpbHVyZSIsImJ1eU5vd0Zsb3dDYWxsYmFja3MiLCJoYW5kbGVDbGljayIsIm9uQ2FuY2VsIiwiYnV5Tm93Q2FydCIsImxvYWRDaGVja291dCIsIm1lc3NhZ2VzU3R5bGVzIiwibGF5b3V0IiwibG9nbyIsInBvc2l0aW9uIiwicmF0aW8iLCJzaXplIiwiQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQnV0dG9uU3RyYXRlZ3kiLCJwYXlQYWxTZGtIZWxwZXIiLCJtZXNzYWdpbmdDb250YWluZXJJZCIsIm1lc3NhZ2luZ0NvbnRhaW5lciIsInBheXBhbEJOUExDb25maWd1cmF0aW9uIiwiYmFubmVyQ29uZmlndXJhdGlvbiIsInJlbW92ZUF0dHJpYnV0ZSIsInJlbmRlck1lc3NhZ2VzIiwicGF5cGFsTWVzc2FnZXNTZGsiLCJwYXlwYWxNZXNzYWdlc09wdGlvbnMiLCJhbW91bnQiLCJnZXRDaGVja291dE9yVGhyb3ciLCJvdXRzdGFuZGluZ0JhbGFuY2UiLCJwbGFjZW1lbnQiLCJNZXNzYWdlcyIsIkJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneSIsImJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMiLCJ2YWx1ZXMiLCJCaWdDb21tZXJjZVBheW1lbnRzVmVubW9CdXR0b25TdHJhdGVneSIsImdldFZhbGlkVmVubW9CdXR0b25TdHlsZXMiLCJ2YWxpZEJ1dHRvblN0eWxlIiwiZ29sZCIsIkRFRkFVTFRfU1RZTEVTIiwiUk9UQVRJT05fQU5JTUFUSU9OIiwiTG9hZGluZ0luZGljYXRvciIsImNvbnRhaW5lclN0eWxlcyIsImRlZmluZUFuaW1hdGlvbiIsImJ1aWxkQ29udGFpbmVyIiwiaW5kaWNhdG9yIiwiYnVpbGRJbmRpY2F0b3IiLCJhcHBlbmRDaGlsZCIsInNob3ciLCJwYXJlbnRJZCIsInBhcmVudCIsInZpc2liaWxpdHkiLCJvcGFjaXR5IiwiaGlkZSIsImhhbmRsZVRyYW5zaXRpb25FbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNyZWF0ZUVsZW1lbnQiLCJib3R0b20iLCJsZWZ0Iiwid2lkdGgiLCJyaWdodCIsInRvcCIsInRyYW5zaXRpb24iLCJzZXRTdHlsZUF0dHJpYnV0ZSIsImJvcmRlciIsIm1hcmdpbiIsInRyYW5zZm9ybSIsInRyYW5zZm9ybVN0eWxlIiwiYW5pbWF0aW9uIiwiYXR0cnMiLCJrIiwic2V0UHJvcGVydHkiLCJoZWFkIiwic2hlZXQiLCJDU1NTdHlsZVNoZWV0IiwiaW5zZXJ0UnVsZSIsIkxPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyIsIlBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciIsImludmFsaWRGaWVsZHMiLCJQYXltZW50TWV0aG9kSW52YWxpZEVycm9yIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSIsInNob3VsZFNhdmVJbnN0cnVtZW50Iiwic2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCIsImlzVmF1bHRlZEluc3RydW1lbnQiLCJpbnN0cnVtZW50SWQiLCJpc0Jhc2VJbnN0cnVtZW50IiwiQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRTdHJhdGVneSIsImxvYWRpbmdJbmRpY2F0b3IiLCJsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyIiwib25Jbml0Iiwic2hvdWxkUmVuZGVyUGF5UGFsQnV0dG9uT25Jbml0aWFsaXphdGlvbiIsImV4ZWN1dGUiLCJwYXlsb2FkIiwicGF5bWVudCIsImlzUGF5UGFsVmF1bHRlZEluc3RydW1lbnRQYXltZW50RGF0YSIsInBheW1lbnRQYXlsb2FkIiwicHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQiLCJwcmVwYXJlUGF5bWVudFBheWxvYWQiLCJpc1Byb3ZpZGVyRXJyb3IiLCJfcmVzb2x2ZSIsInJlamVjdCIsImNsb3NlIiwiZmluYWxpemUiLCJwYXlwYWxPcmRlcklkIiwic2hvdWxkQ29uZmlybUluc3RydW1lbnQiLCJpc1RydXN0ZWRWYXVsdGluZ0Zsb3ciLCJiaWdwYXlfdG9rZW4iLCJ0b2tlbiIsImNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyIsIm9uUmVuZGVyQnV0dG9uIiwib25WYWxpZGF0ZSIsInN1Ym1pdEZvcm0iLCJidXR0b25PcHRpb25zIiwiaGFuZGxlQXBwcm92ZSIsInRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IiLCJmaWVsZHNWYWx1ZXMiLCJnZXRGaWVsZHNWYWx1ZXMiLCJnZXRJbnN0cnVtZW50cyIsImZpbmRJbnN0cnVtZW50IiwiaXNMb2FkaW5nIiwiaXNCaWdDb21tZXJjZVBheW1lbnRzUHJvdmlkZXJFcnJvciIsImUiLCJwcm92aWRlcl9lcnJvciIsImlzUGF5UGFsRmFzdGxhbmVDdXN0b21lciIsImlzRXhwZXJpbWVudEVuYWJsZWQiLCJmZWF0dXJlcyIsImV4cGVyaW1lbnROYW1lIiwiZmFsbGJhY2tWYWx1ZSIsIkJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVBheW1lbnRTdHJhdGVneSIsIm9uQ2hhbmdlIiwidGhyZWVEU1ZlcmlmaWNhdGlvbk1ldGhvZCIsInNob3VsZFJ1bkF1dGhlbnRpY2F0aW9uRmxvdyIsImluaXRpYWxpemVQYXlQYWxQYXltZW50Q29tcG9uZW50IiwicmVuZGVyUGF5UGFsUGF5bWVudENvbXBvbmVudCIsImhhbmRsZVBheVBhbFN0b3JlZEluc3RydW1lbnRDaGFuZ2UiLCJvcmRlclJlcXVlc3QiLCJpc1ZhdWx0ZWRGbG93IiwiaXNCaWdjb21tZXJjZUZhc3RsYW5lUmVxdWVzdEVycm9yIiwiaW52YWxpZFJlcXVlc3RFcnJvciIsInRyYW5zbGF0aW9uS2V5IiwicGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJnZXRQYXltZW50UHJvdmlkZXJDdXN0b21lciIsInBheXBhbEZhc3RsYW5lQ3VzdG9tZXIiLCJwYXlwYWxGYXN0bGFuZVNlc3Npb25JZCIsImdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdyIsInRyaW0iLCJjYXJkQ29tcG9uZW50T3B0aW9ucyIsImZpZWxkcyIsImNhcmRob2xkZXJOYW1lIiwicHJlZmlsbCIsImVuYWJsZWQiLCJwYXlwYWxDb21wb25lbnRNZXRob2RzIiwiRmFzdGxhbmVDYXJkQ29tcG9uZW50IiwiZ2V0UGF5UGFsQ29tcG9uZW50TWV0aG9kc09yVGhyb3ciLCJpczNEU0VuYWJsZWQiLCJpc0JpZ2NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVRocmVlRFNBdmFpbGFibGUiLCJpczNkc0VuYWJsZWQiLCJmYXN0bGFuZVRva2VuIiwiZ2V0M0RTTm9uY2UiLCJwYXlwYWxfZmFzdGxhbmVfdG9rZW4iLCJnZXRQYXltZW50VG9rZW4iLCJwYXlwYWxOb25jZSIsImdldE9yZGVyT3JUaHJvdyIsImNoZWNrb3V0VXJsIiwiZ2V0U3RvcmVDb25maWdPclRocm93IiwibGlua3MiLCJjaGVja291dExpbmsiLCJ0aHJlZURvbWFpblNlY3VyZUNvbXBvbmVudCIsIlRocmVlRG9tYWluU2VjdXJlQ2xpZW50IiwidGhyZWVEb21haW5TZWN1cmVQYXJhbWV0ZXJzIiwib3JkZXJBbW91bnQiLCJ0b0ZpeGVkIiwibm9uY2UiLCJ0aHJlZURTUmVxdWVzdGVkIiwidHJhbnNhY3Rpb25Db250ZXh0IiwiZXhwZXJpZW5jZV9jb250ZXh0IiwibG9jYWxlIiwicmV0dXJuX3VybCIsImNhbmNlbF91cmwiLCJsaWFiaWxpdHlTaGlmdCIsIk5vIiwiVW5rbm93biIsIlN1Y2NlZWRlZCIsIkVycm9yZWQiLCJDYW5jZWxsZWQiLCJwYXlwYWxBeG9TZGsiLCJzZWxlY3Rpb25DaGFuZ2VkIiwic2VsZWN0ZWRDYXJkIiwicHJvZmlsZSIsInNob3dDYXJkU2VsZWN0b3IiLCJzZWxlY3RlZEluc3RydW1lbnQiLCJjaGVja291dFNldHRpbmdzIiwiTm90SW1wbGVtZW50ZWRFcnJvciIsIkJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRTdHJhdGVneSIsInBheXBhbFNka0hlbHBlciIsImJhbm5lckNvbnRhaW5lcklkIiwiYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnMiLCJiaWdDb21tZXJjZVNkayIsIlRpbWVvdXRFcnJvciIsIkJpZ0NvbW1lcmNlUGF5bWVudHNSYXRlUGF5UGF5bWVudFN0cmF0ZWd5IiwicG9sbGluZ0ludGVydmFsIiwibWF4UG9sbGluZ0ludGVydmFsVGltZSIsInBvbGxpbmdUaW1lciIsInN0b3BQb2xsaW5nIiwiYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheSIsImxlZ2FsVGV4dENvbnRhaW5lciIsImxvYWRpbmdDb250YWluZXJJZCIsImNyZWF0ZUZyYXVkTmV0U2NyaXB0IiwibG9hZEZyYXVkbmV0Q29uZmlnIiwicmVuZGVyTGVnYWxUZXh0IiwibWV0YWRhdGFJZCIsImd1aWQiLCJyYXRlcGF5QmlydGhEYXRlIiwicmF0ZXBheVBob25lTnVtYmVyIiwicmF0ZXBheVBob25lQ291bnRyeUNvZGUiLCJyYXRlX3BheSIsImJpcnRoX2RhdGUiLCJub3JtYWxpemVEYXRlIiwiaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20iLCJmcmF1ZE5ldFNjcmlwdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmcmF1ZE5ldENvbmZpZyIsImRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20iLCJsZWdhbFRleHRDb250YWluZXJFbGVtZW50IiwiZGF0ZSIsImZvcm1hdHRlZERhdGUiLCJmb3JtYXREYXRlIiwiZm9ybWF0dGVkTW9udGgiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwibGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudElkIiwibGVnYWxUZXh0Q29udGFpbmVySWQiLCJidXR0b25Db250YWluZXJJZCIsImJ1dHRvbkNvbnRhaW5lciIsImJ1dHRvbkNvbnRhaW5lclBhcmVudCIsInBhcmVudE5vZGUiLCJtYXJnaW5Cb3R0b20iLCJzZXRBdHRyaWJ1dGUiLCJwcmVwZW5kIiwicmF0ZVBheUJ1dHRvbiIsIkxlZ2FsIiwiUEFZX1VQT05fSU5WT0lDRSIsInJlc2V0UG9sbGluZ01lY2hhbmlzbSIsInRlc3RNb2RlIiwic2NyaXB0RWxlbWVudCIsImdlbmVyYXRlR1VJRCIsImYiLCJzIiwic2FuZGJveCIsImlubmVySFRNTCIsIkpTT04iLCJzdHJpbmdpZnkiLCJpIiwiTWF0aCIsImZsb29yIiwiY2hhcmFjdGVycyIsInJhbmRvbSIsInNjcmlwdCIsInNyYyIsInJlaW5pdGlhbGl6ZVN0cmF0ZWd5IiwicmVzb2x2ZVByb21pc2UiLCJyZWplY3RQcm9taXNlIiwidGltZW91dCIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJvcmRlclN0YXR1cyIsInVzZU1ldGFkYXRhIiwiaXNPcmRlckFwcHJvdmVkIiwiUG9sbGluZ1N0b3AiLCJpc1BvbGxpbmdFcnJvciIsIlBvbGxpbmdFcnJvciIsImdhdGV3YXkiLCJIb3N0ZWRGaWVsZFR5cGUiLCJpc0NyZWRpdENhcmRGb3JtRmllbGRzIiwiQ2FyZE51bWJlciIsIkNhcmROYW1lIiwiQ2FyZEV4cGlyeSIsImlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzIiwiQ2FyZE51bWJlclZlcmlmaWNhdGlvbiIsIkNhcmRDb2RlVmVyaWZpY2F0aW9uIiwiQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbiIsIlBheW1lbnRNZXRob2RGYWlsZWRFcnJvciIsIk5vdEluaXRpYWxpemVkRXJyb3JUeXBlIiwiTm90SW5pdGlhbGl6ZWRFcnJvciIsIkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50Tm90SW5pdGlhbGl6ZWQiLCJTaGlwcGluZ05vdEluaXRpYWxpemVkIiwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCIsIlBheW1lbnRJbnZhbGlkRm9ybUVycm9yIiwiZGV0YWlscyIsIkJpZ0NvbW1lcmNlUGF5bWVudHNDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneSIsImJpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzIiwiYmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uT3B0aW9ucyIsImZvcm0iLCJvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvciIsIm9uTG9hZENvbXBsZXRlIiwiaG9zdGVkRm9ybU9wdGlvbnMiLCJpc0NyZWRpdENhcmRGb3JtIiwiaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0iLCJoYXNVbmRlZmluZWRWYWx1ZXMiLCJpbml0aWFsaXplRmllbGRzIiwic2hvdWxkSW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lIiwiaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lT3JUaHJvdyIsImV4ZWN1dGlvblBheW1lbnREYXRhIiwidmFsaWRhdGVIb3N0ZWRGb3JtT3JUaHJvdyIsInN1Ym1pdEhvc3RlZEZvcm0iLCJnZXRJbnN0cnVtZW50UGFyYW1zIiwicmV0dXJuZWRPcmRlcklkIiwic3VibWl0UGF5bWVudFBheWxvYWQiLCJyZXR1cm5lZFZhdWx0ZWRUb2tlbiIsImN2dkZpZWxkIiwiZXhwaXJ5RmllbGQiLCJudW1iZXJGaWVsZCIsIm5hbWVGaWVsZCIsInZlcmlmaWNhdGlvbl9ub25jZSIsImNhcmRfd2l0aF9vcmRlciIsImZvcm1PcHRpb25zIiwiZXhlY3V0ZUNhbGxiYWNrIiwiZ2V0RXhlY3V0ZUNhbGxiYWNrIiwiY2FyZEZpZWxkc0NvbmZpZyIsImdldElucHV0U3R5bGVzIiwidmF1bHRTZXR1cFRva2VuIiwiaW5wdXRFdmVudHMiLCJldmVudCIsIm9uQ2hhbmdlSGFuZGxlciIsIm9uRm9jdXMiLCJvbkZvY3VzSGFuZGxlciIsIm9uQmx1ciIsIm9uQmx1ckhhbmRsZXIiLCJvbklucHV0U3VibWl0UmVxdWVzdCIsImNhcmRGaWVsZHMiLCJDYXJkRmllbGRzIiwic3R5bGl6ZUlucHV0Q29udGFpbmVycyIsInJlbmRlckZpZWxkcyIsInJlbmRlclZhdWx0ZWRGaWVsZHMiLCJjcmVhdGVWYXVsdFNldHVwVG9rZW5DYWxsYmFjayIsImNyZWF0ZU9yZGVyQ2FsbGJhY2siLCJjcmVhdGVWYXVsdFNldHVwVG9rZW4iLCJmaWVsZHNPcHRpb25zIiwiZ2V0Q2FyZEZpZWxkc09yVGhyb3ciLCJjYXJkQ29kZSIsIkNWVkZpZWxkIiwicGxhY2Vob2xkZXIiLCJjYXJkRXhwaXJ5IiwiRXhwaXJ5RmllbGQiLCJjYXJkTmFtZSIsIk5hbWVGaWVsZCIsImNhcmROdW1iZXIiLCJOdW1iZXJGaWVsZCIsImNhcmRDb2RlVmVyaWZpY2F0aW9uIiwiY2FyZEV4cGlyeVZlcmlmaWNhdGlvbiIsImNhcmROdW1iZXJWZXJpZmljYXRpb24iLCJnZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZCIsImVtaXR0ZWRCeSIsImZpZWxkVHlwZSIsIm1hcEZpZWxkVHlwZSIsInN1Ym1pdENvbmZpZyIsInN1Ym1pdCIsImNhcmRGaWVsZHNTdGF0ZSIsInRoZW4iLCJ2YWxpZGF0aW9uRGF0YSIsImdldFZhbGlkaXR5RGF0YSIsImlzVmFsaWQiLCJtYXBWYWxpZGF0aW9uRXJyb3JzIiwidXBkYXRlZEZpZWxkcyIsImNhcmROYW1lRmllbGQiLCJmaWVsZHNLZXlzIiwiZXZlcnkiLCJmaWVsZHNFcnJvcnMiLCJnZXRJbnZhbGlkRXJyb3JCeUZpZWxkVHlwZSIsIkNhcmRDb2RlIiwidmFsaWRhdGlvbkVycm9ycyIsImNvbW1vblN0eWxlcyIsImRlZmF1bHQiLCJmb250V2VpZ2h0Iiwib3V0bGluZSIsImJveFNoYWRvdyIsImJhY2tncm91bmQiLCJtYXJnaW5MZWZ0Iiwib25FbnRlciIsImJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50UHJvdmlkZXJDdXN0b21lciIsImlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQiLCJpc0JpZ0NvbW1lcmNlUGF5bWVudHNBbmFseXRpY3NWMkVuYWJsZWQiLCJjb25uZWN0Q2xpZW50VG9rZW4iLCJwYXlQYWxGYXN0bGFuZVNkayIsIkJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3kiLCJiaWdDb21tZXJjZVBheW1lbnRzU2RrSGVscGVyIiwiaXNQb2xsaW5nRW5hYmxlZCIsImJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHMiLCJzaG91bGRSZW5kZXJGaWVsZHMiLCJpc05vbkluc3RhbnRQYXltZW50TWV0aG9kIiwiYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbiIsIkFwcHJvdmVkIiwiZGVJbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSIsInBheXBhbEFtcHNTZGsiLCJnZXRQYXlwYWxBbXBzU2RrT3JUaHJvdyIsImJ1dHRvblN0eWxlIiwib25Jbml0QnV0dG9uIiwib25DcmVhdGVPcmRlciIsImhhbmRsZUZhaWx1cmUiLCJ1c2VTdG9yZUNyZWRpdCIsImFwbUZpZWxkc0NvbnRhaW5lciIsImFwbUZpZWxkc1N0eWxlcyIsImZpZWxkQ29udGFpbmVyRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJQYXltZW50RmllbGRzIiwidG9VcHBlckNhc2UiLCJCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50U3RyYXRlZ3kiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/bigcommerce-payments.js\n\n}");

/***/ })

}]);